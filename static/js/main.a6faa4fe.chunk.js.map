{"version":3,"sources":["utils/object.js","models/can/BoardUnit.js","utils/css.js","utils/color.js","config.js","utils/dbc.js","utils/url.js","logging/CloudLog.js","components/AddSignals.js","components/SignalLegendEntry/FIELDS.js","components/SignalLegendEntry/Field.js","components/SignalLegendEntry/SignalForm.js","components/SignalLegendEntry/NumberField.js","components/SignalLegendEntry/OptionField.js","components/SignalLegendEntry/StringField.js","components/SignalLegendEntry/ColorBar.js","components/SignalLegendEntry/index.js","components/SignalLegend.js","models/can/dbc.js","models/can/signal.js","images/webusb-enable-experimental-features.png","images/webusb-enable-webusb.png","workers/rlog-downloader.worker.js","workers/dbc-csv-downloader.worker.js","workers/message-parser.worker.js","workers/CanStreamerWorker.worker.js","logging/Sentry.js","api/github-auth.js","components/MessageBytes.js","components/Meta.js","utils/array.js","models/graph-data.js","vega/CanPlot.js","utils/debounce.js","components/CanGraph.js","components/CanGraphList.js","components/HLS.js","components/PlayButton.js","components/RouteSeeker/RouteSeeker.js","components/RouteVideoSync.js","components/CanLog.js","models/can/entries.js","components/PlaySpeedSelector.js","components/Explorer.js","components/Modals/baseModal.js","components/Modals/OnboardingModal.js","api/OpenDbc.js","components/SaveDbcModal.js","components/GithubDbcList.js","components/DbcUpload.js","components/LoadDbcModal.js","components/EditMessageModal.js","components/LoadingBar.js","api/localstorage.js","api/unlogger.js","CanExplorer.js","utils/string.js","acura-dbc.js","index.js","models/can/frame.js","logging/LogEntries.js","models/can/logSignals.js"],"names":["swapKeysAndValues","obj","f","Object","keys","reduce","acc","k","BoardUnit","name","this","attributes","comment","styles","classes","forEach","call","arguments","it","_definition","_name","push","classNames","apply","css","shade","opacity","r","g","b","t","opacityPos","Math","abs","round","GITHUB_CLIENT_ID","GITHUB_REDIRECT_URL","GITHUB_AUTH_TOKEN_KEY","OPENDBC_SOURCE_REPO","USE_UNLOGGER","window","getUrlParameter","UNLOGGER_HOST","LOGENTRIES_TOKEN","PART_SEGMENT_LENGTH","CAN_GRAPH_MAX_POINTS","STREAMING_WINDOW","EXPLORER_URL","createMessageSpec","dbc","address","id","bus","frame","getMessageFrame","size","entries","byteColors","Array","fill","byteStateChangeCounts","createMessageEntry","time","relTime","data","byteStateChangeTimes","signals","getSignalValues","hexData","Buffer","from","toString","updated","Date","now","parseMessage","timeStart","lastParsedMessage","msgSpec","determineByteStateChangeTimes","msgSize","i","length","substr","msgEntry","BIG_ENDIAN_START_BITS","j","bigEndianBitIndex","matrixBitIndex","indexOf","addCanMessage","canMessage","canStartTime","messages","prevMsgEntries","byteStateChangeCountsByMessage","busTime","undefined","prevMsgEntry","every","c","map","count","idx","matrixBitNumber","bigEndianIndex","findMaxByteStateChangeCount","values","m","counts","countArr","concat","count1","count2","setMessageByteColors","message","maxByteStateChangeCount","isNaN","min","red","objToQuery","encodeURIComponent","decodeURIComponent","join","location","replace","results","RegExp","exec","search","modifyQueryParameters","add","remove","params","key","value","origin","pathname","CloudLog","LogEntries","init","token","no_format","catchall","context","update","level","global","__JEST__","entry","ctx","created","getTime","msg","src","log","warn","error","emit","Styles","StyleSheet","create","bit","margin","padding","userSelect","cursor","textAlign","position","bitSelectedStyle","backgroundColor","bitSignificance","fontSize","display","bottom","left","right","highlightedSignalTitle","AddSignals","props","updateSignalStyles","signalStyles","calcSignalStyles","state","setState","onSignalHover","signal","highlightedSignal","onBitHover","bitIdx","dragStartBit","dragSignal","copySignals","assign","startBit","isLittleEndian","msbBitIndex","DbcUtils","lsbBitNumber","diff","bitDescription","floor","lsbBitIndex","dragCurrentBit","onSignalHoverEnd","resetDragState","onTentativeSignalChange","onSignalChange","oldSignal","signalName","uid","propagateUpSignalChange","onSignalRemove","onSignalPlotChange","shouldPlot","signalUid","bits","signalsCopy","nextProps","nextState","messageIndex","JSON","stringify","plottedSignalUids","colorRgbStr","colors","darkenedColors","lightenedColors","colorsCommaSep","color","signalColorStyle","filter","existingNames","signalNum","Signal","nextNewSignalName","dragEndBit","signalForBit","isDragAcrossSingleByte","createSignal","createSignalIfNotExtendingOne","byteIdx","byteBitIdx","readInt8","bigEndianStartBit","bigEndianCurrentBit","bigEndianBitIdx","rowCount","rows","rowBits","bitStyle","bitDesc","isMsb","isLsb","bitIsContainedInSelection","className","bitValue","onMouseEnter","onMouseLeave","onMouseDown","onBitMouseDown","bind","onMouseUp","onBitMouseUp","onDoubleClick","onBitDoubleClick","byteValueHex","cellSpacing","onConfirmedSignalChange","toFixed","isLogEvent","renderBitMatrix","Component","unsignedTransformation","field","Number","title","type","transform","options","optionValues","Little","Big","startByte","endByte","Signed","Unsigned","Field","htmlFor","children","FieldMap","number","valueCol","fieldSpec","isExpanded","signalEdited","updateField","num","onChange","e","target","option","valueOptions","optionEles","opt","defaultValue","string","getSignalEdited","FIELDS","Node","onClick","styled","isHighlighted","rgb","SignalLegendEntry","signalCopy","toggleEditing","fieldSpecForName","parseInt","toggleExpandSignal","stopPropagation","toggleSignalPlot","isPlotted","preventDefault","equals","expandedEntryClass","plottedButtonClass","cx","ColorBar","SignalForm","find","SignalLegend","expandedSignals","s","includes","updatedExpandedSignals","signalRows","sort","signal1","signal2","checkExpandedSignal","row","a","UINT64","require","DBC_COMMENT_RE","DBC_COMMENT_MULTI_LINE_RE","MSG_RE","SIGNAL_RE","MP_SIGNAL_RE","VAL_RE","VAL_TABLE_RE","MSG_TRANSMITTER_RE","SIGNAL_COMMENT_RE","SIGNAL_COMMENT_MULTI_LINE_RE","MESSAGE_COMMENT_RE","MESSAGE_COMMENT_MULTI_LINE_RE","BOARD_UNIT_RE","BOARD_UNIT_COMMENT_RE","BOARD_UNIT_COMMENT_MULTI_LINE_RE","floatOrInt","numericStr","isInteger","parseFloat","DBC","dbcString","boardUnits","comments","Map","dbcText","importDbcString","LogSignals","get","messageNames","msgName","msgNum","boardUnitNames","bu","missingBoardUnits","arr","receiver","receivers","recv","array","updateBoardUnits","txt","_newSymbols","boardUnitsText","text","frames","messageTxs","transmitters","slice","addr","txs","signalsByMsgId","sig","s1","s2","msgAddr","valueDescriptions","valueDescriptionText","trim","msgId","Frame","nextNewFrameName","set","newMsg","createFrame","warnings","valueTables","followUp","lines","split","line","followUpLine","partialComment","matches","match","idString","transmitter","isSigned","factor","offset","max","unit","receiverStr","signalProperties","messageId","vals","description","table","tableName","items","hasFollowUp","newBoardUnits","boardUnitName","boardUnit","signalSpec","dataBitPos","blen","swapOrder","wordSize","gSize","swappedWords","word","rightHandAnd","pow","ival","shiftr","and","toNumber","buf","shiftAmount","signalValue","bitPos","byteOffset","readUInt32LE","readUInt32BE","has","buffer","paddedBuffer","paddedDataHex","rightPad","signalValuesByName","valueForInt64Signal","valueForInt32Signal","metricComment","metric","metrics","metricName","isFloat","multiplex","random","calculateMin","calculateMax","generateColors","byteOrder","signedChar","str","desc","bitIndex","bitRange","bitNumber","start","range","littleEndianBitDescription","bigEndianBitDescription","rawRange","rawMin","calculateRawRange","rawMax","otherSignal","v","module","exports","Worker","opts","__webpack_hash__","release","Raven","config","install","authorizeUrl","route","client_id","redirect_uri","scope","MessageBytes","isVisible","lastMessageIndex","lastSeekTime","onVisibilityChange","onCanvasRefAvailable","live","nextLastEntry","curLastEntry","seekTime","frameForTime","seekIndex","updateCanvas","mostRecentMessageIndex","findIndex","canvas","mostRecentMsg","findMostRecentMessage","getContext","fillStyle","fillRect","font","fillText","ref","width","devicePixelRatio","height","scale","ckmeans","Meta","onFilterChanged","onFilterFocus","onFilterUnfocus","canMsgFilter","logEventMsgFilter","renderMessageBytes","toggleShowLogEvents","dbcLastSaved","filterText","lastSaved","fromNow","hoveredMessages","orderedMessageKeys","showLogEvents","lastSavedTimer","setInterval","clearInterval","nextMsgKeys","sortMessages","byteCountsDidUpdate","prevMessages","nextMessages","some","messagesByEntryCount","partialMapping","entryCountKey","entryCounts","bin","entryCount","partial","msg1","msg2","reverse","val","toLowerCase","selectedMessages","onMessageUnselected","updateSelectedMessages","onMessageSelected","selectedMessageClass","colSpan","orderedMessages","cellPadding","renderLogEventMessages","renderCanMessages","navigator","ReadableStream","WritableStream","dbcFilename","lastSavedPretty","saveable","showLoadDbc","saveLog","shareUrl","data-clipboard-text","data-clipboard-action","Clipboard","href","showSaveDbc","style","float","checked","onFocus","onBlur","renderAvailableMessagesList","elementWiseEquals","arr1","arr2","ele","findIndexRight","condition","_calcGraphData","firstCanTime","console","samples","skip","lastEntry","x","y","appendNewGraphData","plottedSignals","graphData","plottedMessages","plottedMessageIds","index","maxGraphTime","series","signalUidsByMessageId","graphDataMaxMessageTimes","signalUids","maxIndex","ArrayUtils","newGraphData","firstNewEntryIdx","newEntries","signalGraphData","messageIdOutOfBounds","graphDataLowerBound","$schema","top","on","events","source","expr","fields","ops","as","scales","domain","zero","clamp","domainRaw","axes","orient","labelOverlap","marks","interactive","encode","enter","facet","groupby","interpolate","hover","fillOpacity","clip","stroke","strokeWidth","x2","y2","group","test","fontWeight","debounce","func","wait","immediate","timeout","args","later","callNow","clearTimeout","setTimeout","DefaultPlotInnerStyle","CanGraph","updateBounds","view","bounds","run","insertData","changeset","insert","change","plotInnerStyle","shiftX","shiftY","isDataInserted","getGraphData","spec","getGraphSpec","onNewView","onSignalClickTime","onSignalSegment","onDragAnchorMouseDown","onDragAnchorMouseUp","onDragStart","onPlotResize","firstRelTime","lastRelTime","messageRelTime","GraphData","CanPlotSpec","domainMin","segment","domainMax","newSegment","prevProps","canReceiveGraphDrop","dragPos","runAfter","updateStyleFromDragPos","plottedSignal","segmentIsNew","currentTime","runAsync","oldProps","oldState","clickTime","onRelativeTimeClick","isArray","onSegmentChanged","getState","subcontext","brush","rect","container","getBoundingClientRect","clientX","clientY","persist","plotInnerStyleFromMouseEvent","onDragEnd","canReceiveDropClass","onGraphRefAvailable","messageName","unplot","background","onResize","measureRef","Vega","logLevel","signalListeners","renderer","actions","emptyTable","CanGraphList","draggingSignal","dragShift","graphToReceiveDrop","plotListRef","plotRefs","renderSignalPlot","onPlotListRefReady","onGraphDragStart","onGraphDragEnd","onMouseMove","draggingGraph","determineDraggingGraph","hidden","document","elementFromPoint","closestPlot","closest","closestPlotRef","isEqualNode","mergePlots","fromPlot","toPlot","isDragging","addCanGraphRef","onSignalUnplotPressed","onGraphTimeClick","HLS","onSeeking","playing","onLoadStart","onPlaySeek","videoElement","shouldInitVideoTime","onSeeked","startTime","onLoadEnd","playbackRate","playbackSpeed","loadSource","paused","play","pause","player","Hls","enableWorker","disablePtsDtsCorrectionInMp4Remux","attachMedia","onVideoElementAvailable","destroy","video","autoPlay","muted","onWaiting","onPlaying","PlayButton","isPlaying","process","onPause","onPlay","imageSource","alt","onMouseOver","RouteSeeker","updateDraggingSeek","ratio","onUserSeek","seekedBarStyle","zeroSeekedBarStyle","markerStyle","hiddenMarkerStyle","tooltipStyle","hiddenTooltipStyle","tooltipTime","executePlayTimer","segmentIndices","videoLength","newRatio","updateSeekedBar","nearestFrameTime","segmentProgress","cancelAnimationFrame","playTimer","progressBar","offsetWidth","markerOffsetPct","mouseEventXOffsetPercent","markerWidth","tooltipWidth","ratioTime","requestAnimationFrame","duration","roundTime","loadingOverlay","justifyContent","alignItems","zIndex","loadingSpinner","img","hls","seekBar","RouteVideoSync","shouldShowJpeg","isLoading","shouldRestartHls","onHlsRestart","userSeekIndex","canFrameOffset","userSeekTime","funcSeekToRatio","thumbnails","l","monoTime","btoa","String","fromCharCode","url","playSpeed","onVideoClick","nearestFrameUrl","VideoApi","getRearCameraStreamIndexUrl","shouldRestart","onRestart","CanLog","expandedMessages","messageHeights","allPacketsExpanded","renderLogListItemMessage","addDisplayedMessages","renderLogListItem","renderLogList","onExpandAllChanged","toggleExpandAllPackets","curMessageLength","nextMessageLength","newLength","ITEMS_PER_PAGE","msgIdx","onMessageExpanded","expMsgTime","plot","plotted","onSignalPlotPressed","msgIsExpanded","isMessageExpanded","msgHasSignals","isSignalPlotted","plottedButtonText","signalValuePretty","hasSignalsClass","expandedClass","toggleExpandPacketSignals","renderLogListItemSignals","expandAllText","expandAllClass","itemRenderer","itemsRenderer","listLength","pageSize","updateWhenThisValueChanges","findTimeIndex","findRelativeTimeIndex","findSegmentIndices","isRelative","segmentTimeLow","segmentTimeHi","timeIndexFunc","segmentIdxLow","upperSegmentIdxHi","segmentIdxHi","PlaySpeedSelector","onPlaySpeedChanged","currentTarget","clipSegment","_segment","_segmentIndices","nextMessage","segmentStartIdx","segmentEndIdx","segmentStartTime","segmentEndTime","Explorer","updateSegment","selectedMessage","currentParts","Entries","startSegments","shouldShowAddSignal","autoplay","showAddSignal","onKeyDown","toggleShouldShowAddSignal","changePlaySpeed","addEventListener","removeEventListener","keyCode","resetSegment","curMessage","messageExists","signalExists","nextSeekTime","nextSeekMsgEntry","routeStartTime","partStartOffset","partEndOffset","windowStartTime","clone","format","windowEndTime","newPlottedSignals","indexFromSeekTime","onSeek","partsCount","selectedMessageKey","selectedMessageName","showEditMessageModal","onClose","selectedMessagePlottedSignalUids","fromPlotIdx","splice","toPlotIdx","signalsExpandedClass","graphSegment","renderExplorerSignals","renderSelectMessagePrompt","Modal","windowHeight","modalHeight","updateHeights","contentRect","innerHeight","variations","variation","disableClose","readVariationClasses","checkClosability","checkYScrollability","handleClose","subtitle","navigation","footer","OnboardingModal","webUsbEnabled","usb","viewingUsbInstructions","pandaConnected","attemptPandaConnection","toggleUsbInstructions","navigateToExplorer","handlePandaConnect","drive","can","attemptingPandaConnection","CommaAuth","isAuthenticated","renderLogin","renderPandaEligibility","instructionalImages","step2","step3","renderUsbInstructions","renderOnboardingOptions","rel","renderModalFooter","renderModalContent","OpenDBC","github","GitHub","sourceRepo","getRepo","githubUsername","fetchGithubUsername","getUser","user","getProfile","profile","login","repoFullName","repo","username","repoName","getContents","response","content","path","dbcPath","fileContents","rawContentsUrl","download_url","fetch","cache","resp","repoDetails","full_name","getGithubUsername","openDbcFork","getDetails","repoDetailResp","repoSourceIsOpenDbc","fork","status","contents","commitMessage","getRef","refResp","getCommit","object","sha","headCommitResp","headCommit","getTree","tree","headTreeResp","headTree","mode","createTree","createTreeResp","createdTree","commit","commitResp","updateHead","updateHeadResp","SaveDbcModal","tab","sourceDbcFilename","tabs","commitToGitHub","downloadDbcFile","forkOpenDbcAndWait","renderForkButton","renderTabNavigation","renderActions","openDbcClient","getUserOpenDbcFork","filename","commitFile","onDbcSaved","blob","Blob","FileSaver","saveAs","isTimedOut","interval","then","disabled","hasGithubAuth","loginWithGithub","data-extension","renderForkStep","renderFilenameField","renderCommitMessage","renderTabContent","GithubDbcList","paths","selectedPath","pathQuery","updatePathQuery","list","getDbcContents","dbcContents","onDbcLoaded","placeholder","p","selectPath","DbcUpload","onTextChanged","LoadDbcModal","dbcSource","userOpenDbcRepo","handleSave","onDbcSelected","hasAuth","EditMessageModal","messageFrame","copy","editTransmitter","addTransmitter","keyframes","fetchPersistedDbc","routeName","maybeDbc","localStorage","getItem","parse","persistDbc","dbcJson","setItem","GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY","UnloggerClient","socket","SocketIO","dongleId","baseTime","seekSeconds","RLogDownloader","LogCSVDownloader","MessageParser","CanStreamerWorker","CanExplorer","partChangeDebounced","minPart","maxPart","minTime","maxTime","minIndex","spawnWorker","lastBusTime","currentPart","currentWorkers","loadingParts","loadedParts","showOnboarding","editMessageModalMessage","partsLoaded","spawnWorkerHash","pandaNoDeviceSelected","isGithubAuthenticated","githubAuthToken","logUrls","OpenDbc","unloggerClient","hideOnboarding","hideLoadDbc","hideSaveDbc","hideEditMessageModal","onPartChange","onMessageFrameEdited","initCanData","processStreamedCanMessages","onStreamedCanMessagesProcessed","showingModal","lastMessageEntriesById","githubSignOut","downloadLogAsCSV","pandaReader","Panda","onMessage","exp","Moment","fullname","proclog","start_time","urlPromise","logUrlsPromise","Promise","resolve","DrivesApi","getRouteInfo","RawDataApi","getLogUrls","all","initData","newState","getShareSignature","shareSignature","catch","err","writer","createWriteStream","getWriter","encoder","TextEncoder","downloadLiveLogAsCSV","dataHandler","downloadRawLogAsCSV","logData","shouldClose","progress","close","uint8array","write","handler","worker","onmessage","postMessage","sourceId","newThumbnails","oldIndex","newIndex","result","newMessages","msgEntries","newMsgEntries","msgLength","newMsgLength","entryLength","msgIndex","newMsgIndex","workerHash","part","action","cancelWorker","allWorkerParts","partOffset","tempPart","hash","charCodeAt","isFinished","addAndRehydrateMessages","mergeThumbnails","prepend","base","isDemo","isLegacyShare","setSignals","updateMessageFrame","newMessage","reparseMessages","msgKey","seek","GithubAuth","newCanMessages","canStreamerWorker","windowFloor","messageIds","newEntryFloor","firstEntryIndexInsideStreamingWindow","enforceStreamingMessageWindow","_onStreamedCanMessagesProcessed","persistedDbc","unlisten","onError","stack","dataArray","unpersistGithubAuthToken","removeItem","segments","LoadingBar","selectedPart","routes","AcuraDbc","Sentry","routeFullName","isShare","authTokenQueryParam","persistGithubAuthToken","urlNoAuthToken","fetchPersistedGithubAuthToken","Request","configure","ReactDOM","render","getElementById","createElement","createComment","appendChild","extended","txName","txNum","nextNewTransmitterName","header","self","_indexOf","_getAjaxObject","XDomainRequest","XMLHttpRequest","LogStream","_endpoint","_traceCode","trace","PI","substring","_pageInfo","page_info","_token","_print","print","_noFormat","_SSL","ssl","protocol","LEENDPOINT","_backlog","_active","_sentPageInfo","_apiCall","request","constructor","onreadystatechange","readyState","shift","onload","open","setRequestHeader","overrideMimeType","send","_getEvent","prototype","Error","_agentInfo","nav","doNotTrack","screen","referrer","innerWidth","browser","appName","version","appVersion","cookie_enabled","cookieEnabled","do_not_track","platform","_rawLog","event","serialized","ex","oldHandler","onerror","newHandler","Logger","logger","dict","endpoint","_log","info","loggers","_createLogStream","hasOwnProperty","_deprecatedInit","createLogStream","to","_getLogger","_destroyLogStream","signalMap","FrontLeftWheel","shortSignal","FrontRightWheel","RearLeftWheel","RearRightWheel","VEgo","AEgo","VEgoRaw","YawRate","SteeringAngle","longSignal","Brake","Gas","LeftBlinker","boolSignal","RightBlinker","GenericToggle","DoorOpen","SeatbeltUnlatched","GasPressed","BrakeLights","SteeringPressed","Standstill","GearShifter","unsigned","charSignal","RcvTow","GpsWeek","LeapSeconds","NumMeas","Voltage","Current","Started","ControlsAllowed","GasInterceptorDetected","StartedSignalDetected","Cpu0","Cpu1","Cpu2","Cpu3","Mem","Gpu","FanSpeed","BatteryPercent","UsbOnline","FreeSpace","ADDRESS_LIST","nameForAddress","isLogAddress","frameForAddress","createSignalEntry","addressForName"],"mappings":"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","file":"static/js/main.a6faa4fe.chunk.js","sourcesContent":["export function swapKeysAndValues(obj, f) {\n  return Object.keys(obj).reduce((acc, k) => {\n    acc[obj[k]] = k;\n    return acc;\n  }, {});\n}\n\nexport function fromArray(arr) {\n  // arr is an array of array key-value pairs\n  // like [['a', 1], ['b', 2]]\n\n  const pairs = arr.map(([k, v]) => ({ [k]: v }));\n  if (pairs.length > 0) {\n    return Object.assign(...pairs);\n  }\n  return {};\n}\n","export default class BoardUnit {\n  constructor(name) {\n    this.name = name;\n    this.attributes = {};\n    this.comment = null;\n  }\n\n  text() {\n    return this.name;\n  }\n}\n","// Wrapper of aphrodite css() function\n// that supports string class names in\n// addition to style objects.\n\n// Useful for component testing\n\nimport { css } from 'aphrodite';\nimport classNames from 'classnames';\n\nexport default function () {\n  const styles = [];\n  const classes = [];\n\n  [].forEach.call(arguments, (it) => {\n    if (it && it._definition && it._name) styles.push(it);\n    else classes.push(it);\n  });\n\n  return classNames.apply(null, [...classes, css(styles)]);\n}\n","export function shade([r, g, b], opacity) {\n  /*\n    @param {Array} rgb\n    @param {Number} opacity -1.0 -> +1.0\n        negative opacity will darken image\n\n    returns new RGB array\n    */\n  const t = opacity < 0 ? 0 : 255;\n  const opacityPos = Math.abs(opacity);\n\n  return [\n    Math.round((t - r) * opacityPos) + r,\n    Math.round((t - g) * opacityPos) + g,\n    Math.round((t - b) * opacityPos) + b\n  ];\n}\n","import { getUrlParameter } from './utils/url';\n\nconst ENV = process.env.NODE_ENV === 'production' ? 'prod' : 'debug';\n\nconst ENV_GITHUB_CLIENT_ID = {\n  debug: 'f1e42d14f45491f9ca34',\n  prod: '4b43250e7499a97d62a5'\n};\nexport const GITHUB_CLIENT_ID = ENV_GITHUB_CLIENT_ID[ENV];\n\nconst ENV_GITHUB_REDIRECT_URL = {\n  debug: 'http://127.0.0.1:1235/callback',\n  prod: 'https://api.comma.ai/cabana/ghcallback'\n};\nexport const GITHUB_REDIRECT_URL = ENV_GITHUB_REDIRECT_URL[ENV];\nexport const GITHUB_AUTH_TOKEN_KEY = 'gh_access_token';\nexport const OPENDBC_SOURCE_REPO = 'commaai/opendbc';\n\nexport const USE_UNLOGGER = typeof window !== 'undefined' && getUrlParameter('unlogger') !== null;\nexport const UNLOGGER_HOST = 'http://localhost:8080/unlogger';\n\nexport const LOGENTRIES_TOKEN = '4bc98019-8277-4fe0-867c-ed21ea843cc5';\n\nexport const PART_SEGMENT_LENGTH = 3;\n\nexport const CAN_GRAPH_MAX_POINTS = 5000;\n\nexport const STREAMING_WINDOW = 60;\n\nconst ENV_EXPLORER_URL = {\n  debug: 'http://127.0.0.1:3000/',\n  prod: 'https://my.comma.ai/'\n};\nexport const EXPLORER_URL = ENV_EXPLORER_URL[ENV];\n","function findMaxByteStateChangeCount(messages) {\n  return Object.values(messages)\n    .map((m) => m.byteStateChangeCounts)\n    .reduce((counts, countArr) => counts.concat(countArr), []) // flatten arrays\n    .reduce((count1, count2) => (count1 > count2 ? count1 : count2), 0); // find max\n}\n\nfunction addCanMessage(\n  canMessage,\n  dbc,\n  canStartTime,\n  messages,\n  prevMsgEntries,\n  byteStateChangeCountsByMessage\n) {\n  const {\n    address, busTime, data, bus\n  } = canMessage;\n  const id = `${bus}:${address.toString(16)}`;\n\n  if (messages[id] === undefined) messages[id] = createMessageSpec(dbc, address, id, bus);\n\n  const prevMsgEntry = messages[id].entries.length > 0\n    ? messages[id].entries[messages[id].entries.length - 1]\n    : prevMsgEntries[id] || null;\n\n  if (\n    byteStateChangeCountsByMessage[id]\n    && messages[id].byteStateChangeCounts.every((c) => c === 0)\n  ) {\n    messages[id].byteStateChangeCounts = byteStateChangeCountsByMessage[id];\n  }\n\n  const { msgEntry, byteStateChangeCounts } = parseMessage(\n    dbc,\n    busTime,\n    address,\n    data,\n    canStartTime,\n    prevMsgEntry\n  );\n\n  messages[id].byteStateChangeCounts = byteStateChangeCounts.map(\n    (count, idx) => messages[id].byteStateChangeCounts[idx] + count\n  );\n\n  messages[id].entries.push(msgEntry);\n\n  return msgEntry;\n}\n\nfunction createMessageSpec(dbc, address, id, bus) {\n  const frame = dbc.getMessageFrame(address);\n  const size = frame ? frame.size : 8;\n\n  return {\n    address,\n    id,\n    bus,\n    entries: [],\n    frame,\n    byteColors: Array(size).fill(0),\n    byteStateChangeCounts: Array(size).fill(0)\n  };\n}\n\nfunction determineByteStateChangeTimes(\n  hexData,\n  time,\n  msgSize,\n  lastParsedMessage\n) {\n  const byteStateChangeCounts = Array(msgSize).fill(0);\n  let byteStateChangeTimes;\n\n  if (!lastParsedMessage) {\n    byteStateChangeTimes = Array(msgSize).fill(time);\n  } else {\n    byteStateChangeTimes = Array.from(lastParsedMessage.byteStateChangeTimes);\n\n    for (let i = 0; i < byteStateChangeTimes.length; i++) {\n      const currentData = hexData.substr(i * 2, 2);\n      const prevData = lastParsedMessage.hexData.substr(i * 2, 2);\n\n      if (currentData !== prevData) {\n        byteStateChangeTimes[i] = time;\n        byteStateChangeCounts[i] = 1;\n      }\n    }\n  }\n\n  return { byteStateChangeTimes, byteStateChangeCounts };\n}\n\nfunction createMessageEntry(\n  dbc,\n  address,\n  time,\n  relTime,\n  data,\n  byteStateChangeTimes\n) {\n  return {\n    signals: dbc.getSignalValues(address, data),\n    time,\n    relTime,\n    hexData: Buffer.from(data).toString('hex'),\n    byteStateChangeTimes,\n    updated: Date.now()\n  };\n}\n\nfunction parseMessage(dbc, time, address, data, timeStart, lastParsedMessage) {\n  let hexData;\n  if (typeof data === 'string') {\n    hexData = data;\n    data = Buffer.from(data, 'hex');\n  } else {\n    hexData = Buffer.from(data).toString('hex');\n  }\n  const msgSpec = dbc.getMessageFrame(address);\n  const msgSize = msgSpec ? msgSpec.size : 8;\n  const relTime = time - timeStart;\n\n  const {\n    byteStateChangeTimes,\n    byteStateChangeCounts\n  } = determineByteStateChangeTimes(\n    hexData,\n    relTime,\n    msgSize,\n    lastParsedMessage\n  );\n  const msgEntry = createMessageEntry(\n    dbc,\n    address,\n    time,\n    relTime,\n    data,\n    byteStateChangeTimes\n  );\n\n  return { msgEntry, byteStateChangeCounts };\n}\n\nconst BIG_ENDIAN_START_BITS = [];\nfor (let i = 0; i < 64; i += 8) {\n  for (let j = 7; j > -1; j--) {\n    BIG_ENDIAN_START_BITS.push(i + j);\n  }\n}\n\nfunction bigEndianBitIndex(matrixBitIndex) {\n  return BIG_ENDIAN_START_BITS.indexOf(matrixBitIndex);\n}\n\nfunction matrixBitNumber(bigEndianIndex) {\n  return BIG_ENDIAN_START_BITS[bigEndianIndex];\n}\n\nfunction setMessageByteColors(message, maxByteStateChangeCount) {\n  message.byteColors = message.byteStateChangeCounts\n    .map((count) => (isNaN(count)\n      ? 0\n      : Math.min(255, 75 + 180 * (count / maxByteStateChangeCount))))\n    .map((red) => `rgb(${Math.round(red)},0,0)`);\n\n  return message;\n}\n\nexport default {\n  bigEndianBitIndex,\n  addCanMessage,\n  createMessageSpec,\n  matrixBitNumber,\n  parseMessage,\n  findMaxByteStateChangeCount,\n  setMessageByteColors,\n  createMessageEntry\n};\n","/* eslint-disable no-restricted-globals */\nexport function objToQuery(obj) {\n  return Object.keys(obj)\n    .map((k) => `${k}=${encodeURIComponent(decodeURIComponent(obj[k]))}`)\n    .join('&');\n}\n\nexport function getUrlParameter(name) {\n  const { location } = window;\n  name = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp(`[\\\\?&]${name}=([^&#]*)`);\n  const results = regex.exec(location.search);\n\n  return results === null\n    ? null\n    : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\nexport function modifyQueryParameters({ add, remove = [] }) {\n  const regex = new RegExp('[\\\\?&]([^&#]+)=([^&#]*)');\n  const results = regex.exec(location.search);\n\n  let params = {};\n  if (results != null) {\n    for (let i = 1; i < results.length - 1; i += 2) {\n      const key = results[i];\n      const value = results[i + 1];\n      params[key] = value;\n    }\n    for (const key in params) {\n      if (remove.indexOf(key) !== -1) {\n        delete params[key];\n      }\n    }\n    params = { ...params, ...add };\n  } else {\n    params = add;\n  }\n\n  return `${location.origin + location.pathname}?${objToQuery(params)}`;\n}\n","import LogEntries from './LogEntries';\nimport { LOGENTRIES_TOKEN } from '../config';\n\nclass CloudLog {\n  constructor() {\n    LogEntries.init({\n      token: LOGENTRIES_TOKEN,\n      no_format: true,\n      catchall: false\n    });\n    this.context = {};\n  }\n\n  bind(obj) {\n    this.context.update(obj);\n  }\n\n  emit(message, level = 'log') {\n    if (typeof global.__JEST__ !== 'undefined') {\n      // Don't log in testing environment\n      return;\n    }\n\n    const entry = {\n      ctx: this.context,\n      created: new Date().getTime() / 1000,\n      msg: message,\n      src: 'JSCloudLog'\n    };\n\n    if (level === 'log') {\n      LogEntries.log(entry);\n    } else if (level === 'warn') {\n      LogEntries.warn(entry);\n    } else if (level === 'error') {\n      LogEntries.error(entry);\n    }\n  }\n\n  log(message) {\n    this.emit(message);\n  }\n\n  warn(message) {\n    this.emit(message, 'warn');\n  }\n\n  error(message) {\n    this.emit(message, 'error');\n  }\n}\n\nexport default new CloudLog();\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { StyleSheet } from 'aphrodite/no-important';\nimport css from '../utils/css';\n\nimport SignalLegend from './SignalLegend';\nimport Signal from '../models/can/signal';\nimport { shade } from '../utils/color';\nimport DbcUtils from '../utils/dbc';\n\n/*\nAddSignals component draws an 8x8 matrix\nrepresenting the bytes in a CAN message, alongside\na signal legend. Dragging on the matrix\neither extends or creates a signal, which is\nconfigurable in the legend.\n*/\n\nconst Styles = StyleSheet.create({\n  bit: {\n    margin: 0,\n    padding: 12,\n    userSelect: 'none',\n    cursor: 'pointer',\n    textAlign: 'center',\n    position: 'relative'\n  },\n  bitSelectedStyle: {\n    backgroundColor: 'rgba(0,119,158,0.5)'\n  },\n  bitSignificance: {\n    fontSize: 12,\n    display: 'block',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    margin: '0 auto'\n  },\n  highlightedSignalTitle: {\n    backgroundColor: 'rgba(0,0,0,0.2)'\n  }\n});\n\nexport default class AddSignals extends Component {\n  static propTypes = {\n    message: PropTypes.object,\n    onConfirmedSignalChange: PropTypes.func,\n    messageIndex: PropTypes.number,\n    onSignalPlotChange: PropTypes.func,\n    plottedSignalUids: PropTypes.array\n  };\n\n  constructor(props) {\n    super(props);\n\n    let signals = {};\n    if (props.message && props.message.frame && props.message.frame.signals) {\n      signals = this.copySignals(props.message.frame.signals);\n    }\n\n    this.state = {\n      bits: [],\n      signals,\n      signalStyles: this.calcSignalStyles(signals),\n      highlightedSignal: null,\n      dragStartBit: null,\n      dragSignal: null,\n      dragCurrentBit: null\n    };\n  }\n\n  copySignals(signals) {\n    return Object.entries(signals).reduce(\n      (signalsCopy, [signalName, signal]) => {\n        signalsCopy[signalName] = Object.assign(Object.create(signal), signal);\n        return signalsCopy;\n      },\n      {}\n    );\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      nextProps.message.hexData !== this.props.message.hexData\n      || nextProps.messageIndex !== this.props.messageIndex\n      || JSON.stringify(nextProps.plottedSignalUids)\n        !== JSON.stringify(this.props.plottedSignalUids)\n      || JSON.stringify(this.state) !== JSON.stringify(nextState)\n    );\n  }\n\n  signalColorStyle(signal) {\n    const { colors } = signal;\n\n    let colorRgbStr;\n    let backgroundColor;\n    if (this.state && this.state.highlightedSignal === signal.name) {\n      // when signal highlighted,\n      // darkened background and lightened text.\n\n      const darkenedColors = shade(colors, -0.5);\n      const lightenedColors = shade(colors, 0.9);\n      colorRgbStr = `rgb(${lightenedColors.join(',')})`;\n      backgroundColor = `rgba(${darkenedColors.join(',')},0.5)`;\n    } else {\n      const colorsCommaSep = colors.join(',');\n      colorRgbStr = `rgb(${colorsCommaSep})`;\n      backgroundColor = `rgba(${colorsCommaSep},0.2)`;\n    }\n\n    const style = StyleSheet.create({\n      signal: { color: colorRgbStr, backgroundColor }\n    }).signal;\n    return style;\n  }\n\n  updateSignalStyles = () => {\n    const signalStyles = this.calcSignalStyles(this.state.signals);\n\n    this.setState({ signalStyles });\n  };\n\n  calcSignalStyles(signals) {\n    const signalStyles = {};\n    Object.values(signals).forEach((signal) => {\n      signalStyles[signal.name] = this.signalColorStyle(signal);\n    });\n\n    return signalStyles;\n  }\n\n  componentWillReceiveProps({ message }) {\n    const isNewMessage = message.address !== this.props.message.address;\n    if (isNewMessage) {\n      const signals = message.frame ? message.frame.signals : {};\n\n      this.setState(\n        { signals: this.copySignals(signals) },\n        this.updateSignalStyles\n      );\n    }\n  }\n\n  signalForBit(bitIdx) {\n    // bitIdx in [0,64)\n    // returns instance of Signal\n\n    return Object.values(this.state.signals).filter(\n      (signal) => signal.bitDescription(bitIdx) !== null\n    )[0];\n  }\n\n  onSignalHover = (signal) => {\n    if (!signal) return;\n\n    this.setState({ highlightedSignal: signal.name }, this.updateSignalStyles);\n  };\n\n  signalBitIndex(bitIdx, signal) {\n    // todo does this work for both big and little endian?\n    let { startBit } = signal;\n    if (!signal.isLittleEndian) {\n      startBit = DbcUtils.bigEndianBitIndex(startBit);\n    }\n    return bitIdx - startBit;\n  }\n\n  onBitHover = (bitIdx, signal) => {\n    let { dragStartBit, signals, dragSignal } = this.state;\n\n    if (dragStartBit !== null) {\n      if (dragSignal !== null) {\n        signals = this.copySignals(signals);\n        dragSignal = Object.assign(Object.create(dragSignal), dragSignal);\n\n        if (dragStartBit === dragSignal.startBit && dragSignal.size > 1) {\n          if (!dragSignal.isLittleEndian) {\n            // should not be able to drag the msb past the lsb\n            const hoveredBigEndian = DbcUtils.bigEndianBitIndex(bitIdx);\n            const lsbBigEndian = dragSignal.lsbBitNumber();\n\n            if (hoveredBigEndian > lsbBigEndian) {\n              return;\n            }\n          } else {\n            // should not be able to drag the lsb past the msb\n            if (bitIdx > dragSignal.msbBitIndex()) {\n              return;\n            }\n          }\n\n          const diff = bitIdx - dragStartBit;\n\n          if (dragSignal.isLittleEndian) {\n            dragSignal.size -= diff;\n          } else if (dragSignal.bitDescription(bitIdx) === null) {\n            dragSignal.size += Math.abs(diff);\n          } else {\n            dragSignal.size -= Math.abs(diff);\n          }\n\n          dragSignal.startBit += diff;\n\n          signals[dragSignal.name] = dragSignal;\n          dragStartBit = dragSignal.startBit;\n        } else if (dragSignal.size === 1) {\n          // 1-bit signals can be dragged in either direction\n          if (Math.floor(bitIdx / 8) === Math.floor(dragStartBit / 8)) {\n            if (bitIdx > dragStartBit) {\n              if (dragSignal.isLittleEndian) {\n                dragSignal.size = bitIdx - dragSignal.startBit;\n              } else {\n                dragSignal.startBit = bitIdx;\n                dragSignal.size = bitIdx - dragStartBit + 1;\n                dragStartBit = bitIdx;\n              }\n            } else if (dragSignal.isLittleEndian) {\n              dragSignal.startBit = bitIdx;\n              dragSignal.size = dragStartBit - bitIdx + 1;\n              dragStartBit = bitIdx;\n            } else {\n              dragSignal.size = dragStartBit - bitIdx + 1;\n              dragStartBit = bitIdx;\n            }\n          }\n\n          signals[dragSignal.name] = dragSignal;\n        } else if (\n          dragSignal.isLittleEndian\n          && dragStartBit === dragSignal.msbBitIndex()\n        ) {\n          if (bitIdx < dragSignal.startBit) {\n            // should not be able to drag the MSB past the LSB\n            return;\n          }\n          const diff = bitIdx - dragStartBit;\n          if (dragSignal.bitDescription(bitIdx) === null) {\n            dragSignal.size += Math.abs(diff);\n          } else {\n            dragSignal.size -= Math.abs(diff);\n          }\n          signals[dragSignal.name] = dragSignal;\n          dragStartBit = dragSignal.msbBitIndex();\n        } else if (\n          !dragSignal.isLittleEndian\n          && dragStartBit === dragSignal.lsbBitIndex()\n        ) {\n          const diff = bitIdx - dragStartBit;\n          if (dragSignal.bitDescription(bitIdx) === null) {\n            dragSignal.size += Math.abs(diff);\n          } else {\n            dragSignal.size -= Math.abs(diff);\n          }\n          signals[dragSignal.name] = dragSignal;\n          dragStartBit = dragSignal.lsbBitIndex();\n        }\n        this.setState({\n          signals,\n          dragSignal,\n          dragCurrentBit: bitIdx,\n          dragStartBit\n        });\n      } else {\n        this.setState({ dragCurrentBit: bitIdx });\n      }\n    }\n    if (signal) {\n      this.onSignalHover(signal);\n    }\n  };\n\n  onSignalHoverEnd = (signal) => {\n    if (!signal) return;\n\n    this.setState({ highlightedSignal: null }, this.updateSignalStyles);\n  };\n\n  nextNewSignalName() {\n    const existingNames = Object.keys(this.state.signals);\n    let signalNum = 1;\n    let signalName;\n    do {\n      signalName = `NEW_SIGNAL_${signalNum}`;\n      signalNum++;\n    } while (existingNames.indexOf(signalName) !== -1);\n\n    return signalName;\n  }\n\n  onBitMouseDown(dragStartBit, dragSignal) {\n    this.setState({\n      dragStartBit,\n      dragSignal: dragSignal || null\n    });\n  }\n\n  createSignal({ startBit, size, isLittleEndian }) {\n    const signal = new Signal({\n      name: this.nextNewSignalName(),\n      startBit,\n      size,\n      isLittleEndian\n    });\n    let { signals } = this.state;\n    signals = { ...signals };\n    signals[signal.name] = signal;\n\n    this.setState({ signals }, this.propagateUpSignalChange);\n  }\n\n  createSignalIfNotExtendingOne(dragStartBit, dragEndBit) {\n    if (this.state.dragSignal === null) {\n      // check for overlapping bits\n      for (let i = dragStartBit; i <= dragEndBit; i++) {\n        if (this.signalForBit(i) !== undefined) {\n          // Don't create signal if a signal is already defined in the selected range.\n          return;\n        }\n      }\n      const isDragAcrossSingleByte = Math.floor(dragEndBit / 8) === Math.floor(dragStartBit / 8);\n      const isDragDirectionUp = !isDragAcrossSingleByte && dragEndBit < dragStartBit;\n\n      let isLittleEndian;\n      if (isDragAcrossSingleByte || !isDragDirectionUp) {\n        isLittleEndian = dragStartBit % 8 < 4;\n      } else {\n        isLittleEndian = dragStartBit % 8 >= 4;\n      }\n      let size;\n      let startBit = dragStartBit;\n\n      if (isDragAcrossSingleByte) {\n        size = Math.abs(dragEndBit - dragStartBit) + 1;\n      } else if (isLittleEndian) {\n        if (dragEndBit > dragStartBit) {\n          startBit = dragStartBit;\n          size = dragEndBit - dragStartBit + 1;\n        } else {\n          startBit = dragEndBit;\n          size = dragStartBit - dragEndBit + 1;\n        }\n      } else {\n        if (dragEndBit < dragStartBit) {\n          startBit = dragEndBit;\n        }\n        size = Math.abs(\n          DbcUtils.bigEndianBitIndex(dragEndBit)\n              - DbcUtils.bigEndianBitIndex(dragStartBit)\n        ) + 1;\n      }\n\n      this.createSignal({ startBit, size, isLittleEndian });\n    }\n  }\n\n  onBitMouseUp(dragEndBit, signal) {\n    if (this.state.dragStartBit !== null) {\n      const { dragStartBit } = this.state;\n\n      if (dragEndBit !== dragStartBit) {\n        // one-bit signal requires double click\n        // see onBitDoubleClick\n        this.createSignalIfNotExtendingOne(dragStartBit, dragEndBit);\n      }\n      this.propagateUpSignalChange();\n      this.resetDragState();\n    }\n  }\n\n  byteValueHex(byteIdx) {\n    const { entries } = this.props.message;\n    if (this.props.messageIndex < entries.length) {\n      const entry = entries[this.props.messageIndex];\n\n      return entry.hexData.substr(byteIdx * 2, 2);\n    }\n    return '--';\n  }\n\n  bitValue(byteIdx, byteBitIdx) {\n    const { entries } = this.props.message;\n    if (this.props.messageIndex < entries.length) {\n      const entry = entries[this.props.messageIndex];\n      const data = Buffer.from(entry.hexData, 'hex');\n      if (byteIdx >= data.length) {\n        return '-';\n      }\n      const byte = data.readInt8(byteIdx);\n      return (byte >> byteBitIdx) & 1;\n    }\n    return '-';\n  }\n\n  bitIsContainedInSelection(bitIdx, isLittleEndian = false) {\n    const { dragStartBit, dragCurrentBit } = this.state;\n\n    if (isLittleEndian || dragStartBit % 8 < 4) {\n      return (\n        dragStartBit !== null\n        && dragCurrentBit !== null\n        && bitIdx >= dragStartBit\n        && bitIdx <= dragCurrentBit\n      );\n    }\n    const bigEndianStartBit = DbcUtils.bigEndianBitIndex(dragStartBit);\n    const bigEndianCurrentBit = DbcUtils.bigEndianBitIndex(dragCurrentBit);\n    const bigEndianBitIdx = DbcUtils.bigEndianBitIndex(bitIdx);\n    return (\n      dragStartBit !== null\n      && dragCurrentBit !== null\n      && bigEndianBitIdx >= bigEndianStartBit\n      && bigEndianBitIdx <= bigEndianCurrentBit\n    );\n  }\n\n  onBitDoubleClick(startBit, signal) {\n    if (signal === undefined) {\n      this.createSignal({ startBit, size: 1, isLittleEndian: false });\n    }\n  }\n\n  renderBitMatrix() {\n    const { message } = this.props;\n    const rows = [];\n    let rowCount;\n    if (message.frame && message.frame.size) {\n      rowCount = Math.floor((message.frame.size * 8) / 8);\n    } else {\n      rowCount = 8;\n    }\n\n    for (let i = 0; i < rowCount; i++) {\n      const rowBits = [];\n      for (let j = 7; j >= 0; j--) {\n        const bitIdx = i * 8 + j;\n        const signal = this.signalForBit(bitIdx);\n        let bitStyle = null;\n        let bitSignificance = '';\n        if (signal) {\n          bitStyle = this.state.signalStyles[signal.name] || null;\n          const bitDesc = signal.bitDescription(bitIdx);\n          bitSignificance = bitDesc.isMsb ? 'msb' : bitDesc.isLsb ? 'lsb' : '';\n        } else if (this.bitIsContainedInSelection(bitIdx)) {\n          bitStyle = Styles.bitSelectedStyle;\n        }\n        const className = css('bit', Styles.bit, bitStyle);\n        const bitValue = this.bitValue(i, j);\n\n        rowBits.push(\n          <td\n            key={j.toString()}\n            className={className}\n            onMouseEnter={() => this.onBitHover(bitIdx, signal)}\n            onMouseLeave={() => this.onSignalHoverEnd(signal)}\n            onMouseDown={this.onBitMouseDown.bind(this, bitIdx, signal)}\n            onMouseUp={this.onBitMouseUp.bind(this, bitIdx, signal)}\n            onDoubleClick={() => this.onBitDoubleClick(bitIdx, signal)}\n          >\n            <span>{bitValue}</span>\n            <span className={css(Styles.bitSignificance)}>\n              {bitSignificance}\n            </span>\n          </td>\n        );\n      }\n\n      rowBits.push(<td key=\"hex-repr\">{this.byteValueHex(i)}</td>);\n      rows.push(<tr key={i.toString()}>{rowBits}</tr>);\n    }\n\n    return (\n      <div className=\"cabana-explorer-signals-matrix\">\n        <table cellSpacing={0} onMouseLeave={this.resetDragState}>\n          <tbody>{rows}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  resetDragState = () => {\n    this.setState({\n      dragStartBit: null,\n      dragSignal: null,\n      dragCurrentBit: null\n    });\n  };\n\n  onTentativeSignalChange = (signal) => {\n    // Tentative signal changes are not propagated up\n    // but their effects are displayed in the bitmatrix\n    const { signals } = this.state;\n    signals[signal.name] = signal;\n    this.setState({ signals });\n  };\n\n  onSignalChange = (signal, oldSignal) => {\n    const { signals } = this.state;\n\n    for (const signalName in signals) {\n      if (signals[signalName].uid === signal.uid) {\n        delete signals[signalName];\n      }\n    }\n    signals[signal.name] = signal;\n\n    this.setState({ signals }, this.propagateUpSignalChange);\n  };\n\n  onSignalRemove = (signal) => {\n    const { signals } = this.state;\n    delete signals[signal.name];\n    this.setState({ signals }, this.propagateUpSignalChange);\n  };\n\n  propagateUpSignalChange() {\n    const { signals } = this.state;\n\n    this.props.onConfirmedSignalChange(\n      this.props.message,\n      this.copySignals(signals)\n    );\n  }\n\n  onSignalPlotChange = (shouldPlot, signalUid) => {\n    const { message } = this.props;\n\n    this.props.onSignalPlotChange(shouldPlot, message.id, signalUid);\n  };\n\n  render() {\n    return (\n      <div className=\"cabana-explorer-signals-controller\">\n        {Object.keys(this.state.signals).length === 0 ? (\n          <p>Double click or drag to add a signal</p>\n        ) : null}\n        {this.props.message.entries[this.props.messageIndex] ? (\n          <div className=\"cabana-explorer-signals-time\">\n            <p>\n              time:\n              {' '}\n              {this.props.message.entries[\n                this.props.messageIndex\n              ].relTime.toFixed(3)}\n            </p>\n          </div>\n        ) : null}\n        {this.props.message.isLogEvent || this.renderBitMatrix()}\n        <SignalLegend\n          isLogEvent={!!this.props.message.isLogEvent}\n          signals={this.state.signals}\n          signalStyles={this.state.signalStyles}\n          highlightedSignal={this.state.highlightedSignal}\n          onSignalHover={this.onSignalHover}\n          onSignalHoverEnd={this.onSignalHoverEnd}\n          onTentativeSignalChange={this.onTentativeSignalChange}\n          onSignalChange={this.onSignalChange}\n          onSignalRemove={this.onSignalRemove}\n          onSignalPlotChange={this.onSignalPlotChange}\n          plottedSignalUids={this.props.plottedSignalUids}\n        />\n      </div>\n    );\n  }\n}\n","import DbcUtils from '../../utils/dbc';\n\nconst unsignedTransformation = (field) => (value, signal) => {\n  if (value !== '') {\n    value = Number(value) || 0;\n\n    if (value < 0) {\n      value = 0;\n    }\n  }\n  signal[field] = value;\n  return signal;\n};\n\nexport default [\n  {\n    field: 'name',\n    title: 'Name',\n    type: 'string'\n  },\n  {\n    field: 'size',\n    title: 'Size',\n    type: 'number',\n    transform: unsignedTransformation('size')\n  },\n  {\n    field: 'startBit',\n    title: (signal) => (signal.isLittleEndian ? 'Least significant bit' : 'Most significant bit'),\n    type: 'number',\n    transform: unsignedTransformation('startBit')\n  },\n  {\n    field: 'isLittleEndian',\n    title: 'Endianness',\n    type: 'option',\n    options: {\n      options: ['Little', 'Big'],\n      optionValues: { Little: true, Big: false }\n    },\n    transform: (isLittleEndian, signal) => {\n      if (signal.isLittleEndian !== isLittleEndian) {\n        const { startBit } = signal;\n\n        if (isLittleEndian) {\n          // big endian -> little endian\n          const startByte = Math.floor(signal.startBit / 8);\n          const endByte = Math.floor((signal.startBit - signal.size + 1) / 8);\n\n          if (startByte === endByte) {\n            signal.startBit = signal.startBit - signal.size + 1;\n          } else {\n            signal.startBit = DbcUtils.matrixBitNumber(startBit);\n          }\n        } else {\n          // little endian -> big endian\n          const startByte = Math.floor(signal.startBit / 8);\n          const endByte = Math.floor((signal.startBit + signal.size - 1) / 8);\n\n          if (startByte === endByte) {\n            signal.startBit = signal.startBit + signal.size - 1;\n          } else {\n            signal.startBit = DbcUtils.bigEndianBitIndex(startBit);\n          }\n        }\n        signal.isLittleEndian = isLittleEndian;\n      }\n      return signal;\n    }\n  },\n  {\n    field: 'isSigned',\n    title: 'Sign',\n    type: 'option',\n    options: {\n      options: ['Signed', 'Unsigned'],\n      optionValues: { Signed: true, Unsigned: false }\n    }\n  },\n  {\n    field: 'factor',\n    title: 'Factor',\n    type: 'number'\n  },\n  {\n    field: 'offset',\n    title: 'Offset',\n    type: 'number'\n  },\n  {\n    field: 'unit',\n    title: 'Unit',\n    type: 'string'\n  },\n  {\n    field: 'comment',\n    title: 'Comment',\n    type: 'string'\n  },\n  {\n    field: 'min',\n    title: 'Minimum value',\n    type: 'number'\n  },\n  {\n    field: 'max',\n    title: 'Maximum value',\n    type: 'number'\n  }\n];\n","import React, { Component } from 'react';\n\nexport default class Field extends Component {\n  render() {\n    const { title, htmlFor, children } = this.props;\n    return (\n      <div className=\"form-field form-field--small\">\n        <label htmlFor={htmlFor}>{title}</label>\n        {children}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport FIELDS from './FIELDS';\nimport NumberField from './NumberField';\nimport StringField from './StringField';\nimport OptionField from './OptionField';\n\nconst FieldMap = {\n  number: NumberField,\n  option: OptionField,\n  string: StringField\n};\n\nexport default ({\n  signal,\n  onSignalRemove,\n  isExpanded,\n  getSignalEdited,\n  update\n}) => (\n  <div className=\"signals-legend-entry-form\">\n    {FIELDS.map((field) => {\n      const Node = FieldMap[field.type];\n      return (\n        <div className=\"signals-legend-entry-form-field\" key={field.field}>\n          <Node\n            fieldSpec={field}\n            signal={signal}\n            isExpanded={isExpanded}\n            signalEdited={getSignalEdited(field.field)}\n            updateField={update}\n          />\n        </div>\n      );\n    })}\n    <div className=\"signals-legend-entry-form-remove\">\n      <button\n        className=\"button--tiny button--alpha\"\n        onClick={() => onSignalRemove(signal)}\n      >\n        Remove Signal\n      </button>\n    </div>\n  </div>\n);\n","import React from 'react';\nimport Field from './Field';\n\nexport default ({\n  fieldSpec,\n  signal,\n  isExpanded,\n  signalEdited,\n  updateField\n}) => {\n  const { field, title } = fieldSpec;\n  const htmlFor = `${signal.name}_${field}`;\n  let valueCol;\n\n  if (isExpanded) {\n    let value = signalEdited;\n    if (value !== '') {\n      const num = Number(value);\n      value = isNaN(num) ? '' : num;\n    }\n    valueCol = (\n      <input\n        id={htmlFor}\n        type=\"number\"\n        value={value}\n        onChange={(e) => {\n          updateField(fieldSpec, e.target.value);\n        }}\n      />\n    );\n  } else {\n    const value = signal[field];\n    valueCol = <span>{value}</span>;\n  }\n  return (\n    <Field\n      title={typeof title === 'function' ? title(signal) : title}\n      htmlFor={htmlFor}\n    >\n      {valueCol}\n    </Field>\n  );\n};\n","import React from 'react';\nimport Field from './Field';\n\nimport { swapKeysAndValues } from '../../utils/object';\n\nexport default ({\n  fieldSpec,\n  signal,\n  isExpanded,\n  signalEdited,\n  updateField\n}) => {\n  let valueCol;\n  const { field, title } = fieldSpec;\n  const htmlFor = `${signal.name}_${field}`;\n  const { options, optionValues } = fieldSpec.options;\n  const valueOptions = swapKeysAndValues(optionValues);\n\n  if (isExpanded) {\n    const optionEles = options.map((opt) => (\n      <option key={opt} value={optionValues[opt]}>\n        {opt}\n      </option>\n    ));\n    valueCol = (\n      <select\n        id={htmlFor}\n        defaultValue={signalEdited}\n        onChange={(e) => {\n          updateField(fieldSpec, e.target.value === 'true');\n        }}\n      >\n        {optionEles}\n      </select>\n    );\n  } else {\n    valueCol = <span>{valueOptions[signal[field]]}</span>;\n  }\n\n  return (\n    <Field\n      title={typeof title === 'function' ? title(signal) : title}\n      htmlFor={htmlFor}\n    >\n      {valueCol}\n    </Field>\n  );\n};\n","import React from 'react';\nimport Field from './Field';\n\nexport default ({\n  fieldSpec,\n  signal,\n  isExpanded,\n  signalEdited,\n  updateField\n}) => {\n  const { field, title } = fieldSpec;\n  const htmlFor = `${signal.name}_${field}`;\n  let valueCol;\n  if (isExpanded) {\n    valueCol = (\n      <input\n        id={htmlFor}\n        type=\"text\"\n        value={signalEdited || ''}\n        onChange={(e) => {\n          updateField(fieldSpec, e.target.value);\n        }}\n      />\n    );\n  } else {\n    valueCol = <span>{signal[field]}</span>;\n  }\n\n  return (\n    <Field\n      title={typeof title === 'function' ? title(signal) : title}\n      htmlFor={htmlFor}\n    >\n      {valueCol}\n    </Field>\n  );\n};\n","import styled from 'react-emotion';\n\n// color bar on the left side of the signals legend\nexport default styled('div')`\n  display: block;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  width: 1.5%;\n  opacity: ${({ isHighlighted }) => (isHighlighted ? 0.5 : 0.3)};\n  background-color: rgb(${({ rgb }) => rgb.join(',')});\n`;\n","// SignalLegendEntry.js\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport Signal from '../../models/can/signal';\nimport SignalForm from './SignalForm';\nimport ColorBar from './ColorBar';\nimport FIELDS from './FIELDS';\n\nexport default class SignalLegendEntry extends Component {\n  static propTypes = {\n    isLogEvent: PropTypes.bool,\n    signal: PropTypes.instanceOf(Signal).isRequired,\n    isHighlighted: PropTypes.bool,\n    onSignalHover: PropTypes.func,\n    onSignalHoverEnd: PropTypes.func,\n    onTentativeSignalChange: PropTypes.func,\n    onSignalChange: PropTypes.func,\n    onSignalRemove: PropTypes.func,\n    onSignalPlotChange: PropTypes.func,\n    toggleExpandSignal: PropTypes.func,\n    isPlotted: PropTypes.bool,\n    isExpanded: PropTypes.bool\n  };\n\n  static fieldSpecForName = (name) => FIELDS.find((field) => field.field === name);\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      signalEdited: Object.assign(Object.create(props.signal), props.signal)\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.signal.equals(this.props.signal)) {\n      this.setState({\n        signalEdited: Object.assign(\n          Object.create(nextProps.signal),\n          nextProps.signal\n        )\n      });\n    }\n  }\n\n  updateField = (fieldSpec, value) => {\n    let { signalEdited } = this.state;\n    const { signal } = this.props;\n\n    if (fieldSpec.transform) {\n      signalEdited = fieldSpec.transform(value, signalEdited);\n    } else {\n      signalEdited[fieldSpec.field] = value;\n    }\n\n    // Save entire signal while editing\n    this.setState({ signalEdited });\n    const signalCopy = Object.assign(Object.create(signal), signal);\n    Object.entries(signalEdited).forEach(([field, value]) => {\n      signalCopy[field] = value;\n    });\n    this.props.onSignalChange(signalCopy, signal);\n  };\n\n  toggleEditing = (e) => {\n    if (this.props.isLogEvent) {\n      return;\n    }\n    let { signalEdited } = this.state;\n    const { signal, isExpanded } = this.props;\n    const signalCopy = Object.assign(Object.create(signal), signal);\n\n    if (isExpanded) {\n      // Finished editing, save changes & reset intermediate\n      // signalEdited state.\n      Object.entries(signalEdited).forEach(([field, value]) => {\n        const fieldSpec = SignalLegendEntry.fieldSpecForName(field);\n\n        if (\n          fieldSpec\n          && fieldSpec.type === 'number'\n          && isNaN(parseInt(value, 10))\n        ) {\n          value = 0;\n        }\n\n        signalCopy[field] = value;\n      });\n      this.props.onSignalChange(signalCopy, signal);\n    } else {\n      signalEdited = signalCopy;\n    }\n\n    // Expand and enable signal editing\n    this.setState({\n      signalEdited\n    });\n    this.props.toggleExpandSignal(signal);\n    e.stopPropagation();\n  };\n\n  toggleSignalPlot = (e) => {\n    const { signal, isPlotted } = this.props;\n    e.preventDefault();\n    this.props.onSignalPlotChange(!isPlotted, signal.uid);\n  };\n\n  getSignalEdited = (field) => this.state.signalEdited[field];\n\n  render() {\n    const {\n      signal, isHighlighted, color, isPlotted, isExpanded\n    } = this.props;\n    const expandedEntryClass = isExpanded ? 'is-expanded' : null;\n    const plottedButtonClass = isPlotted ? 'button' : 'button--alpha';\n    return (\n      <div\n        className={cx('signals-legend-entry', expandedEntryClass)}\n        onMouseEnter={() => this.props.onSignalHover(signal)}\n        onMouseLeave={() => this.props.onSignalHoverEnd(signal)}\n      >\n        <ColorBar isHighlighted={isHighlighted} rgb={color} />\n        <div className=\"signals-legend-entry-header\">\n          <div\n            className=\"signals-legend-entry-header-name\"\n            onClick={this.toggleEditing}\n          >\n            <strong>{signal.name}</strong>\n          </div>\n          <div\n            className=\"signals-legend-entry-header-action\"\n            onClick={this.toggleSignalPlot}\n          >\n            <button className={cx('button--tiny', plottedButtonClass)}>\n              {isPlotted ? 'Hide Plot' : 'Show Plot'}\n            </button>\n          </div>\n        </div>\n        <div className=\"signals-legend-entry-body\">\n          {isExpanded && (\n            <SignalForm\n              signal={signal}\n              onSignalRemove={this.props.onSignalRemove}\n              isExpanded={isExpanded}\n              getSignalEdited={this.getSignalEdited}\n              update={this.updateField}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","// SignalLegend.js\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SignalLegendEntry from './SignalLegendEntry';\n\nexport default class SignalLegend extends Component {\n  static propTypes = {\n    isLogEvent: PropTypes.bool,\n    signals: PropTypes.object,\n    signalStyles: PropTypes.object,\n    highlightedSignal: PropTypes.string,\n    onSignalHover: PropTypes.func,\n    onSignalHoverEnd: PropTypes.func,\n    onTentativeSignalChange: PropTypes.func,\n    onSignalChange: PropTypes.func,\n    onSignalRemove: PropTypes.func,\n    onSignalPlotChange: PropTypes.func,\n    plottedSignalUids: PropTypes.array\n  };\n\n  state = {\n    expandedSignals: []\n  };\n\n  toggleExpandSignal = (s) => {\n    const { expandedSignals } = this.state;\n    if (!expandedSignals.includes(s.uid)) {\n      const updatedExpandedSignals = [...expandedSignals, s.uid];\n      this.setState({ expandedSignals: updatedExpandedSignals });\n    } else {\n      const updatedExpandedSignals = expandedSignals.filter((i) => i !== s.uid);\n      this.setState({ expandedSignals: updatedExpandedSignals });\n    }\n  };\n\n  checkExpandedSignal(s) {\n    return this.state.expandedSignals.includes(s);\n  }\n\n  render() {\n    const { signals, highlightedSignal } = this.props;\n    const signalRowsNested = Object.entries(signals)\n      .sort(([_, signal1], [__, signal2]) => {\n        if (signal1.startBit < signal2.startBit) {\n          return -1;\n        }\n        return 1;\n      })\n      .map(([signalName, signal]) => {\n        const { colors } = signals[signalName];\n        const isHighlighted = highlightedSignal === signalName;\n\n        return (\n          <SignalLegendEntry\n            isLogEvent={this.props.isLogEvent}\n            key={signal.uid}\n            signal={signal}\n            isHighlighted={isHighlighted}\n            color={colors}\n            onSignalHover={this.props.onSignalHover}\n            onSignalHoverEnd={this.props.onSignalHoverEnd}\n            onTentativeSignalChange={this.props.onTentativeSignalChange}\n            onSignalChange={this.props.onSignalChange}\n            onSignalRemove={this.props.onSignalRemove}\n            onSignalPlotChange={this.props.onSignalPlotChange}\n            toggleExpandSignal={this.toggleExpandSignal}\n            isPlotted={this.props.plottedSignalUids.indexOf(signal.uid) !== -1}\n            isExpanded={this.checkExpandedSignal(signal.uid)}\n          />\n        );\n      });\n\n    const signalRows = signalRowsNested\n      .filter((row) => row != null)\n      .reduce((a, b) => a.concat(b), []);\n\n    return <div className=\"cabana-explorer-signals-legend\">{signalRows}</div>;\n  }\n}\n","import rightPad from 'right-pad';\nimport CloudLog from '../../logging/CloudLog';\nimport Signal from './signal';\nimport Frame from './frame';\nimport BoardUnit from './BoardUnit';\nimport DbcUtils from '../../utils/dbc';\nimport * as LogSignals from './logSignals';\n\nconst { UINT64 } = require('cuint');\n\nconst DBC_COMMENT_RE = /^CM_ *\"(.*)\";/;\nconst DBC_COMMENT_MULTI_LINE_RE = /^CM_ *\"(.*)/;\n\nconst MSG_RE = /^BO_ (\\w+) (\\w+) *: (\\w+) (\\w+)/;\n\nconst SIGNAL_RE = /^SG_ (\\w+) : (\\d+)\\|(\\d+)@(\\d+)([+|-]) \\(([0-9.+-eE]+),([0-9.+-eE]+)\\) \\[([0-9.+-eE]+)\\|([0-9.+-eE]+)\\] \"(.*)\" (.*)/;\n// Multiplexed signal\nconst MP_SIGNAL_RE = /^SG_ (\\w+) (\\w+) *: (\\d+)\\|(\\d+)@(\\d+)([+|-]) \\(([0-9.+-eE]+),([0-9.+-eE]+)\\) \\[([0-9.+-eE]+)\\|([0-9.+-eE]+)\\] \"(.*)\" (.*)/;\n\nconst VAL_RE = /^VAL_ (\\w+) (\\w+) (.*);/;\nconst VAL_TABLE_RE = /^VAL_TABLE_ (\\w+) (.*);/;\n\nconst MSG_TRANSMITTER_RE = /^BO_TX_BU_ ([0-9]+) *: *(.+);/;\n\nconst SIGNAL_COMMENT_RE = /^CM_ SG_ *(\\w+) *(\\w+) *\"(.*)\";/;\nconst SIGNAL_COMMENT_MULTI_LINE_RE = /^CM_ SG_ *(\\w+) *(\\w+) *\"(.*)/;\n\n// Message Comments (CM_ BO_ )\nconst MESSAGE_COMMENT_RE = /^CM_ BO_ *(\\w+) *\"(.*)\";/;\nconst MESSAGE_COMMENT_MULTI_LINE_RE = /^CM_ BO_ *(\\w+) *\"(.*)/;\n\nconst BOARD_UNIT_RE = /^BU_:(.*)/;\nconst BOARD_UNIT_COMMENT_RE = /^CM_ BU_ *(\\w+) *\"(.*)\";/;\nconst BOARD_UNIT_COMMENT_MULTI_LINE_RE = /^CM_ BU_ *(\\w+) *\"(.*)/;\n\n// Follow ups are used to parse multi-line comment definitions\nconst FOLLOW_UP_DBC_COMMENT = 'FollowUpDbcComment';\nconst FOLLOW_UP_SIGNAL_COMMENT = 'FollowUpSignalComment';\nconst FOLLOW_UP_MSG_COMMENT = 'FollowUpMsgComment';\nconst FOLLOW_UP_BOARD_UNIT_COMMENT = 'FollowUpBoardUnitComment';\n\nfunction floatOrInt(numericStr) {\n  if (Number.isInteger(numericStr)) {\n    return parseInt(numericStr, 10);\n  }\n  return parseFloat(numericStr);\n}\n\nexport function swapOrder(arr, wordSize, gSize) {\n  const swappedWords = [];\n\n  for (let i = 0; i < arr.length; i += wordSize) {\n    const word = arr.slice(i, i + wordSize);\n    for (let j = wordSize - gSize; j > -gSize; j -= gSize) {\n      swappedWords.push(word.slice(j, j + gSize));\n    }\n  }\n\n  return swappedWords.join('');\n}\n\nexport default class DBC {\n  constructor(dbcString) {\n    this.boardUnits = [];\n    this.comments = [];\n    this.messages = new Map();\n\n    if (dbcString !== undefined) {\n      this.dbcText = dbcString;\n      this.importDbcString(dbcString);\n    }\n  }\n\n  getMessageFrame(address) {\n    if (LogSignals.isLogAddress(address)) {\n      return LogSignals.frameForAddress(address);\n    }\n    return this.messages.get(address);\n  }\n\n  nextNewFrameName() {\n    const messageNames = [];\n\n    for (const msg of this.messages.values()) {\n      messageNames.push(msg.name);\n    }\n\n    let msgNum = 1;\n    let msgName;\n    do {\n      msgName = `NEW_MSG_${msgNum}`;\n      msgNum++;\n    } while (messageNames.indexOf(msgName) !== -1);\n\n    return msgName;\n  }\n\n  updateBoardUnits() {\n    const boardUnitNames = this.boardUnits.map((bu) => bu.name);\n    const missingBoardUnits = Array.from(this.messages.entries())\n      .map(([msgId, frame]) => Object.values(frame.signals))\n      .reduce((arr, signals) => arr.concat(signals), [])\n      .map((signal) => signal.receiver)\n      .reduce((arr, receivers) => arr.concat(receivers), [])\n      .filter((recv, idx, array) => array.indexOf(recv) === idx)\n      .filter((recv) => boardUnitNames.indexOf(recv) === -1)\n      .map((recv) => new BoardUnit(recv));\n\n    this.boardUnits = this.boardUnits.concat(missingBoardUnits);\n  }\n\n  text() {\n    this.updateBoardUnits();\n\n    let txt = 'VERSION \"\"\\n\\n\\n';\n    txt += `NS_ :${this._newSymbols()}`;\n    txt += '\\n\\nBS_:\\n';\n\n    const boardUnitsText = this.boardUnits.map((bu) => bu.text()).join(' ');\n    txt += `\\nBU_: ${boardUnitsText}\\n\\n\\n`;\n\n    const frames = [];\n    for (const frame of this.messages.values()) {\n      frames.push(frame);\n    }\n    txt += `${frames.map((f) => f.text()).join('\\n\\n')}\\n\\n`;\n\n    const messageTxs = frames\n      .map((f) => [f.id, f.transmitters.slice(1)])\n      .filter(([addr, txs]) => txs.length > 0);\n    txt += `${messageTxs\n      .map(([addr, txs]) => `BO_TX_BU_ ${addr} : ${txs.join(',')};`)\n      .join('\\n')}\\n\\n\\n`;\n\n    txt += this.boardUnits\n      .filter((bu) => bu.comment !== null)\n      .map((bu) => `CM_ BU_ ${bu.name} \"${bu.comment}\";`)\n      .join('\\n');\n\n    txt += frames\n      .filter((f) => f.comment !== null)\n      .map((msg) => `CM_ BO_ ${msg.address} \"${msg.comment}\";`)\n      .join('\\n');\n\n    const signalsByMsgId = frames\n      .map((f) => Object.values(f.signals).map((sig) => [f.id, sig]))\n      .reduce((s1, s2) => s1.concat(s2), []);\n\n    txt += `${signalsByMsgId\n      .filter(([msgAddr, sig]) => sig.comment !== null)\n      .map(\n        ([msgAddr, sig]) => `CM_ SG_ ${msgAddr} ${sig.name} \"${sig.comment}\";`\n      )\n      .join('\\n')}\\n`;\n\n    txt += `${signalsByMsgId\n      .filter(([msgAddr, sig]) => sig.valueDescriptions.size > 0)\n      .map(([msgAddr, sig]) => sig.valueDescriptionText(msgAddr))\n      .join('\\n')}\\n`;\n\n    txt += this.comments.map((comment) => `CM_ \"${comment}\";`).join('\\n');\n\n    return `${txt.trim()}\\n`;\n  }\n\n  getMessageName(msgId) {\n    const msg = this.getMessageFrame(msgId);\n    if (msg && msg.frame) return msg.frame.name;\n    return null;\n  }\n\n  getSignals(msgId) {\n    const msg = this.getMessageFrame(msgId);\n    if (msg) return msg.signals;\n    return {};\n  }\n\n  createFrame(msgId) {\n    const msg = new Frame({\n      name: this.nextNewFrameName(),\n      id: msgId,\n      size: 8\n    });\n\n    this.messages.set(msgId, msg);\n    return msg;\n  }\n\n  setSignals(msgId, signals) {\n    const msg = this.getMessageFrame(msgId);\n    if (msg) {\n      const newMsg = Object.assign(Object.create(msg), msg);\n      newMsg.signals = signals;\n      this.messages.set(msgId, newMsg);\n    } else {\n      const msg = this.createFrame(msgId);\n      msg.signals = signals;\n\n      this.messages.set(msgId, msg);\n      this.updateBoardUnits();\n    }\n  }\n\n  addSignal(msgId, signal) {\n    const msg = this.getMessageFrame(msgId);\n\n    if (msg) {\n      msg.signals[signal.name] = signal;\n      this.updateBoardUnits();\n    }\n  }\n\n  importDbcString(dbcString) {\n    const warnings = [];\n    const messages = new Map();\n    let boardUnits = [];\n    const valueTables = new Map();\n    let id = 0;\n    let followUp = null;\n\n    const lines = dbcString.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n      let line = lines[i].trim();\n\n      if (line.length === 0) continue;\n\n      if (followUp != null) {\n        const { type, data } = followUp;\n        line = line.replace(/\" *;/, '');\n        let followUpLine = `\\n${line.substr(0, line.length)}`;\n        if (line.indexOf('\"') !== -1) {\n          followUp = null;\n          followUpLine = followUpLine.substr(0, followUpLine.length - 1);\n        }\n        if (type === FOLLOW_UP_SIGNAL_COMMENT) {\n          const signal = data;\n          signal.comment += followUpLine;\n        } else if (type === FOLLOW_UP_MSG_COMMENT) {\n          const msg = data;\n          msg.comment += followUpLine;\n        } else if (type === FOLLOW_UP_BOARD_UNIT_COMMENT) {\n          const boardUnit = data;\n          boardUnit.comment += followUpLine;\n        } else if (type === FOLLOW_UP_DBC_COMMENT) {\n          //          const comment = data;\n          const partialComment = this.comments[this.comments.length - 1];\n          this.comments[this.comments.length - 1] = partialComment + followUpLine;\n        }\n      }\n\n      if (line.indexOf('BO_ ') === 0) {\n        const matches = line.match(MSG_RE);\n        if (matches === null) {\n          warnings.push(\n            `failed to parse message definition on line ${i + 1} -- ${line}`\n          );\n          continue;\n        }\n        let [idString, name, size, transmitter] = matches.slice(1);\n        id = parseInt(idString, 0); // 0 radix parses hex or dec\n        size = parseInt(size, 10);\n        const frame = new Frame({\n          name,\n          id,\n          size,\n          transmitters: [transmitter]\n        });\n        messages.set(id, frame);\n      } else if (line.indexOf('SG_') === 0) {\n        let matches = line.match(SIGNAL_RE);\n\n        if (matches === null) {\n          matches = line.match(MP_SIGNAL_RE);\n          if (matches === null) {\n            warnings.push(\n              `failed to parse signal definition on line ${i + 1} -- ${line}`\n            );\n            continue;\n          }\n          // for now, ignore multiplex which is matches[1]\n          matches = matches[1] + matches.slice(3);\n        } else {\n          matches = matches.slice(1);\n        }\n\n        let [\n          name,\n          startBit,\n          size,\n          isLittleEndian,\n          isSigned,\n          factor,\n          offset,\n          min,\n          max,\n          unit,\n          receiverStr\n        ] = matches;\n        startBit = parseInt(startBit, 10);\n        size = parseInt(size, 10);\n        isLittleEndian = parseInt(isLittleEndian, 10) === 1;\n        isSigned = isSigned === '-';\n        factor = floatOrInt(factor);\n        offset = floatOrInt(offset);\n        min = floatOrInt(min);\n        max = floatOrInt(max);\n        const receiver = receiverStr.split(',').map((s) => s.trim());\n\n        const signalProperties = {\n          name,\n          startBit,\n          size,\n          isLittleEndian,\n          isSigned,\n          factor,\n          offset,\n          unit,\n          min,\n          max,\n          receiver\n        };\n        const signal = new Signal(signalProperties);\n\n        if (messages.get(id) !== undefined) {\n          messages.get(id).signals[name] = signal;\n        } else {\n          CloudLog.warn(\n            `importDbcString: could not add signal: ${name} due to missing message: ${id}`\n          );\n        }\n      } else if (line.indexOf('VAL_ ') === 0) {\n        const matches = line.match(VAL_RE);\n\n        if (matches !== null) {\n          let [messageId, signalName, vals] = matches.slice(1);\n          vals = vals\n            .split('\"')\n            .map((s) => s.trim())\n            .filter((s) => s.length > 0);\n\n          messageId = parseInt(messageId, 10);\n          const msg = messages.get(messageId);\n          const signal = msg.signals[signalName];\n          if (signal === undefined) {\n            warnings.push(\n              `could not find signal for value description on line ${i\n                + 1} -- ${line}`\n            );\n            continue;\n          }\n          for (let i = 0; i < vals.length; i += 2) {\n            const value = vals[i].trim();\n            const description = vals[i + 1].trim();\n            signal.valueDescriptions.set(value, description);\n          }\n        } else {\n          warnings.push(\n            `failed to parse value description on line ${i + 1} -- ${line}`\n          );\n        }\n      } else if (line.indexOf('VAL_TABLE_ ') === 0) {\n        const matches = line.match(VAL_TABLE_RE);\n\n        if (matches !== null) {\n          const table = new Map();\n          let [tableName, items] = matches.slice(1);\n          items = items\n            .split('\"')\n            .map((s) => s.trim())\n            .filter((s) => s.length > 0);\n\n          for (let i = 0; i < items.length; i += 2) {\n            const key = items[i];\n            const value = items[i + 1];\n            table.set(key, value);\n          }\n          valueTables.set(tableName, table);\n        } else {\n          warnings.push(\n            `failed to parse value table on line ${i + 1} -- ${line}`\n          );\n        }\n      } else if (line.indexOf('BO_TX_BU_ ') === 0) {\n        const matches = line.match(MSG_TRANSMITTER_RE);\n\n        if (matches !== null) {\n          let [messageId, transmitter] = matches.slice(1);\n          messageId = parseInt(messageId, 10);\n\n          const msg = messages.get(messageId);\n          msg.transmitters.push(transmitter);\n          messages.set(messageId, msg);\n        } else {\n          warnings.push(\n            `failed to parse message transmitter definition on line ${i\n              + 1} -- ${line}`\n          );\n        }\n      } else if (line.indexOf('CM_ SG_ ') === 0) {\n        let matches = line.match(SIGNAL_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(SIGNAL_COMMENT_MULTI_LINE_RE);\n          hasFollowUp = true;\n        }\n        if (matches === null) {\n          warnings.push(\n            `failed to parse signal comment on line ${i + 1} -- ${line}`\n          );\n          continue;\n        }\n\n        let [messageId, signalName, comment] = matches.slice(1);\n\n        messageId = parseInt(messageId, 10);\n        const msg = messages.get(messageId);\n        if (msg === undefined) {\n          warnings.push(`failed to parse signal comment on line ${i\n            + 1} -- ${line}:\n                                    message id ${messageId} does not exist prior to this line`);\n          continue;\n        }\n        const signal = msg.signals[signalName];\n        if (signal === undefined) {\n          warnings.push(\n            `failed to parse signal comment on line ${i + 1} -- ${line}`\n          );\n          continue;\n        } else {\n          signal.comment = comment;\n          messages.set(messageId, msg);\n        }\n\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_SIGNAL_COMMENT, data: signal };\n        }\n      } else if (line.indexOf('CM_ BO_ ') === 0) {\n        let matches = line.match(MESSAGE_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(MESSAGE_COMMENT_MULTI_LINE_RE);\n          hasFollowUp = true;\n          if (matches === null) {\n            warnings.push(\n              `failed to message comment on line ${i + 1} -- ${line}`\n            );\n            continue;\n          }\n        }\n\n        let [messageId, comment] = matches.slice(1);\n        messageId = parseInt(messageId, 10);\n        const msg = messages.get(messageId);\n        msg.comment = comment;\n\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_MSG_COMMENT, data: msg };\n        }\n      } else if (line.indexOf('BU_: ') === 0) {\n        const matches = line.match(BOARD_UNIT_RE);\n\n        if (matches !== null) {\n          const [boardUnitNameStr] = matches.slice(1);\n          const newBoardUnits = boardUnitNameStr\n            .split(' ')\n            .map((s) => s.trim())\n            .filter((s) => s.length > 0)\n            .map((name) => new BoardUnit(name));\n\n          boardUnits = boardUnits.concat(newBoardUnits);\n        } else {\n          warnings.push(\n            `failed to parse board unit definition on line ${i + 1} -- ${line}`\n          );\n          continue;\n        }\n      } else if (line.indexOf('CM_ BU_ ') === 0) {\n        let matches = line.match(BOARD_UNIT_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(BOARD_UNIT_COMMENT_MULTI_LINE_RE);\n          hasFollowUp = true;\n          if (matches === null) {\n            warnings.push(\n              `failed to parse board unit comment on line ${i + 1} -- ${line}`\n            );\n            continue;\n          }\n        }\n\n        const [boardUnitName, comment] = matches.slice(1);\n        const boardUnit = boardUnits.find((bu) => bu.name === boardUnitName);\n        if (boardUnit) {\n          boardUnit.comment = comment;\n        }\n\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_BOARD_UNIT_COMMENT, data: boardUnit };\n        }\n      } else if (line.indexOf('CM_ ') === 0) {\n        let matches = line.match(DBC_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(DBC_COMMENT_MULTI_LINE_RE);\n          if (matches === null) {\n            warnings.push(\n              `failed to parse dbc comment on line ${i + 1} -- ${line}`\n            );\n            continue;\n          } else {\n            hasFollowUp = true;\n          }\n        }\n\n        const [comment] = matches.slice(1);\n        this.comments.push(comment);\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_DBC_COMMENT, data: comment };\n        }\n      }\n    }\n\n    // Disabled b/c live mode frequently calls this function\n    // and executes way too many network requests\n    if (warnings.length > 0) {\n      // warnings.forEach((warning) => CloudLog.warn('importDbcString: ' + warning));\n      // warnings.forEach((warning) => console.log('importDbcString: ' + warning));\n    }\n\n    this.messages = messages;\n    this.boardUnits = boardUnits;\n    this.valueTables = valueTables;\n  }\n\n  valueForInt64Signal(signalSpec, hexData) {\n    const blen = hexData.length * 4;\n    let value;\n    let startBit;\n    let dataBitPos;\n\n    if (signalSpec.isLittleEndian) {\n      value = UINT64(swapOrder(hexData, 16, 2), 16);\n      startBit = signalSpec.startBit;\n      dataBitPos = UINT64(startBit);\n    } else {\n      // big endian\n      value = UINT64(hexData, 16);\n\n      startBit = DbcUtils.bigEndianBitIndex(signalSpec.startBit);\n      dataBitPos = UINT64(blen - (startBit + signalSpec.size));\n    }\n    if (dataBitPos < 0) {\n      return null;\n    }\n\n    const rightHandAnd = UINT64(Math.pow(2, signalSpec.size) - 1);\n    let ival = value\n      .shiftr(dataBitPos)\n      .and(rightHandAnd)\n      .toNumber();\n\n    if (signalSpec.isSigned && ival & Math.pow(2, signalSpec.size - 1)) {\n      ival -= Math.pow(2, signalSpec.size);\n    }\n    ival = ival * signalSpec.factor + signalSpec.offset;\n    return ival;\n  }\n\n  valueForInt32Signal(signalSpec, buf) {\n    let startBit;\n    if (signalSpec.isLittleEndian) {\n      startBit = 64 - signalSpec.startBit - signalSpec.size;\n    } else {\n      let bitPos = (-signalSpec.startBit - 1) % 8;\n      if (bitPos < 0) {\n        bitPos += 8; // mimic python modulo behavior\n      }\n\n      startBit = Math.floor(signalSpec.startBit / 8) * 8 + bitPos;\n    }\n\n    let shiftAmount;\n    let signalValue;\n    const byteOffset = Math.min(4, Math.floor(signalSpec.startBit / 8));\n    if (signalSpec.isLittleEndian) {\n      signalValue = buf.readUInt32LE(byteOffset);\n      shiftAmount = signalSpec.startBit - 8 * byteOffset;\n    } else {\n      signalValue = buf.readUInt32BE(byteOffset);\n      shiftAmount = 32 - (startBit - 8 * byteOffset + signalSpec.size);\n    }\n\n    signalValue = (signalValue >>> shiftAmount) & ((1 << signalSpec.size) - 1);\n    if (signalSpec.isSigned && signalValue >>> (signalSpec.size - 1)) {\n      signalValue -= 1 << signalSpec.size;\n    }\n\n    return signalValue * signalSpec.factor + signalSpec.offset;\n  }\n\n  getSignalValues(messageId, data) {\n    if (!this.messages.has(messageId) && !LogSignals.isLogAddress(messageId)) {\n      return {};\n    }\n    const frame = this.getMessageFrame(messageId);\n\n    const buffer = Buffer.from(data);\n    let paddedBuffer = buffer;\n    if (buffer.length !== 8) {\n      // pad data it's 64 bits long\n      const paddedDataHex = rightPad(buffer.toString('hex'), 16, '0');\n      paddedBuffer = Buffer.from(paddedDataHex, 'hex');\n    }\n    const hexData = paddedBuffer.toString('hex');\n\n    const signalValuesByName = {};\n    Object.values(frame.signals).forEach((signalSpec) => {\n      let value;\n      if (signalSpec.size > 32) {\n        value = this.valueForInt64Signal(signalSpec, hexData);\n      } else {\n        value = this.valueForInt32Signal(signalSpec, paddedBuffer);\n      }\n      signalValuesByName[signalSpec.name] = value;\n    });\n\n    return signalValuesByName;\n  }\n\n  getChffrMetricMappings() {\n    const metricComment = this.comments.find(\n      (comment) => comment.indexOf('CHFFR_METRIC') === 0\n    );\n    if (!metricComment) {\n      return null;\n    }\n\n    return metricComment\n      .split(';')\n      .map((metric) => metric.trim().split(' '))\n      .reduce(\n        (metrics, [_, messageId, signalName, metricName, factor, offset]) => {\n          metrics[metricName] = {\n            messageId: parseInt(messageId, 10),\n            signalName,\n            factor: parseFloat(factor),\n            offset: parseFloat(offset)\n          };\n          return metrics;\n        },\n        {}\n      );\n  }\n\n  _newSymbols() {\n    return `\n    NS_DESC_\n    CM_\n    BA_DEF_\n    BA_\n    VAL_\n    CAT_DEF_\n    CAT_\n    FILTER\n    BA_DEF_DEF_\n    EV_DATA_\n    ENVVAR_DATA_\n    SGTYPE_\n    SGTYPE_VAL_\n    BA_DEF_SGTYPE_\n    BA_SGTYPE_\n    SIG_TYPE_REF_\n    VAL_TABLE_\n    SIG_GROUP_\n    SIG_VALTYPE_\n    SIGTYPE_VALTYPE_\n    BO_TX_BU_\n    BA_DEF_REL_\n    BA_REL_\n    BA_DEF_DEF_REL_\n    BU_SG_REL_\n    BU_EV_REL_\n    BU_BO_REL_\n    SG_MUL_VAL_`;\n  }\n}\n","import DbcUtils from '../../utils/dbc';\n\nexport default class Signal {\n  constructor({\n    name,\n    startBit = 0,\n    size = 0,\n    isLittleEndian = true,\n    isSigned = false,\n    isFloat = false,\n    factor = 1,\n    offset = 0,\n    unit = '',\n    receiver = ['XXX'],\n    comment = null,\n    multiplex = null,\n    min = null,\n    max = null,\n    valueDescriptions = new Map()\n  }) {\n    Object.assign(this, {\n      name,\n      startBit,\n      size,\n      isLittleEndian,\n      isSigned,\n      isFloat,\n      factor,\n      offset,\n      unit,\n      receiver,\n      comment,\n      multiplex,\n      valueDescriptions\n    });\n\n    const uid = Math.random().toString(36);\n\n    if (min == null) {\n      min = this.calculateMin();\n    }\n    if (max == null) {\n      max = this.calculateMax();\n    }\n\n    const colors = this.generateColors();\n\n    Object.assign(this, {\n      min,\n      max,\n      uid,\n      colors\n    });\n  }\n\n  text() {\n    const multiplex = this.multiplex ? ` ${this.multiplex}` : '';\n    const byteOrder = this.isLittleEndian ? 1 : 0;\n    const signedChar = this.isSigned ? '-' : '+';\n\n    return (\n      `SG_ ${this.name}${multiplex} : `\n      + `${this.startBit}|${this.size}@${byteOrder}${signedChar}`\n      + ` (${this.factor},${this.offset})`\n      + ` [${this.min}|${this.max}]`\n      + ` \"${this.unit}\" ${this.receiver}`\n    );\n  }\n\n  valueDescriptionText(msgId) {\n    const entryPairs = Array.from(this.valueDescriptions.entries());\n    const values = entryPairs.reduce(\n      (str, [value, desc]) => `${str + value} \"${desc}\" `,\n      ''\n    );\n    return `VAL_ ${msgId} ${this.name} ${values};`;\n  }\n\n  lsbBitIndex() {\n    // Returns LSB bit index in matrix order (see AddSignals.js)\n\n    if (this.isLittleEndian) {\n      return this.startBit;\n    }\n    const lsbBitNumber = this.lsbBitNumber();\n\n    return DbcUtils.matrixBitNumber(lsbBitNumber);\n  }\n\n  lsbBitNumber() {\n    // Returns LSB bit number in big endian ordering\n\n    return DbcUtils.bigEndianBitIndex(this.startBit) + this.size - 1;\n  }\n\n  msbBitIndex() {\n    if (this.isLittleEndian) {\n      return this.startBit + this.size - 1;\n    }\n    return this.startBit;\n  }\n\n  littleEndianBitDescription(bitIndex) {\n    const bitRange = [this.startBit, this.startBit + this.size - 1];\n    if (bitIndex < bitRange[0] || bitIndex > bitRange[1]) {\n      return null;\n    }\n    const bitNumber = bitIndex - bitRange[0];\n    const isLsb = bitIndex === bitRange[0];\n    const isMsb = bitIndex === bitRange[1];\n    return { bitNumber, isLsb, isMsb };\n  }\n\n  bigEndianBitDescription(bitIndex) {\n    const start = DbcUtils.bigEndianBitIndex(this.startBit);\n    const range = [start, start + this.size - 1];\n    const bitNumber = DbcUtils.bigEndianBitIndex(bitIndex);\n\n    if (bitNumber < range[0] || bitNumber > range[1]) {\n      return null;\n    }\n\n    const isLsb = bitNumber === range[1];\n    const isMsb = bitIndex === this.startBit;\n    return {\n      bitNumber,\n      isLsb,\n      isMsb,\n      range\n    };\n  }\n\n  bitDescription(bitIndex) {\n    if (this.isLittleEndian) {\n      return this.littleEndianBitDescription(bitIndex);\n    }\n    return this.bigEndianBitDescription(bitIndex);\n  }\n\n  calculateRawRange() {\n    let rawRange = Math.pow(2, this.size);\n    if (this.isSigned) {\n      rawRange /= 2;\n    }\n    return [this.isSigned ? -1 * rawRange : 0, rawRange - 1];\n  }\n\n  calculateMin() {\n    const rawMin = this.calculateRawRange()[0];\n    return this.offset + rawMin * this.factor;\n  }\n\n  calculateMax() {\n    const rawMax = this.calculateRawRange()[1];\n    return this.offset + rawMax * this.factor;\n  }\n\n  generateColors() {\n    const colors = Array(3);\n    for (let i = 0; i < 3; i++) {\n      colors[i] = Math.floor(Math.random() * 211);\n    }\n\n    return colors;\n  }\n\n  equals(otherSignal) {\n    return (\n      otherSignal.name === this.name\n      && otherSignal.startBit === this.startBit\n      && otherSignal.size === this.size\n      && otherSignal.isLittleEndian === this.isLittleEndian\n      && otherSignal.isSigned === this.isSigned\n      && otherSignal.isFloat === this.isFloat\n      && otherSignal.factor === this.factor\n      && otherSignal.offset === this.offset\n      && otherSignal.unit === this.unit\n      && otherSignal.receiver.length === this.receiver.length\n      && otherSignal.receiver.every((v, i) => v === this.receiver[i])\n      && otherSignal.comment === this.comment\n      && otherSignal.multiplex === this.multiplex\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/webusb-enable-experimental-features.e5a08e76.png\";","module.exports = __webpack_public_path__ + \"static/media/webusb-enable-webusb.aceef6a0.png\";","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"accd81dc56e9d36aaf1d.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"66fe2b555037a721fc00.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"2230dc70a222dea0ae3f.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"e7675832c8a57bacd7e3.worker.js\");\n};","import Raven from 'raven-js';\n\nfunction init() {\n  if (process.env.NODE_ENV === 'production') {\n    const opts = {};\n\n    if (typeof __webpack_hash__ !== 'undefined') { // eslint-disable-line camelcase\n      opts.release = __webpack_hash__; // eslint-disable-line no-undef, camelcase\n    }\n\n    Raven.config(\n      'https://50006e5d91894f508dd288bbbf4585a6@sentry.io/185303',\n      opts\n    ).install();\n  }\n}\n\nexport default { init };\n","import { GITHUB_CLIENT_ID, GITHUB_REDIRECT_URL } from '../config';\nimport { objToQuery } from '../utils/url';\n\nexport function authorizeUrl(route) {\n  const params = {\n    client_id: GITHUB_CLIENT_ID,\n    redirect_uri: GITHUB_REDIRECT_URL,\n    scope: 'user:email public_repo',\n    state: JSON.stringify({ route })\n  };\n\n  return `http://github.com/login/oauth/authorize?${objToQuery(params)}`;\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class MessageBytes extends Component {\n  static propTypes = {\n    seekTime: PropTypes.number.isRequired,\n    message: PropTypes.object.isRequired,\n    seekIndex: PropTypes.number,\n    live: PropTypes.bool.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isVisible: true,\n      lastMessageIndex: 0,\n      lastSeekTime: 0\n    };\n\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.onCanvasRefAvailable = this.onCanvasRefAvailable.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.live) {\n      const nextLastEntry = nextProps.message.entries[nextProps.message.entries.length - 1];\n      const curLastEntry = this.props.message.entries[\n        this.props.message.entries.length - 1\n      ];\n\n      return nextLastEntry.hexData !== curLastEntry.hexData;\n    }\n    return nextProps.seekTime !== this.props.seekTime;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      this.props.seekIndex !== nextProps.seekIndex\n      || frameForTime(this.props.seekTime) !== frameForTime(nextProps.seekTime)\n    ) {\n      this.updateCanvas(nextProps);\n    }\n\n    function frameForTime(t) {\n      return ~~(t * 60);\n    }\n  }\n\n  findMostRecentMessage(seekTime) {\n    const { message } = this.props;\n    const { lastMessageIndex, lastSeekTime } = this.state;\n    let mostRecentMessageIndex = null;\n    if (seekTime >= lastSeekTime) {\n      for (let i = lastMessageIndex; i < message.entries.length; ++i) {\n        const msg = message.entries[i];\n        if (msg && msg.relTime >= seekTime) {\n          mostRecentMessageIndex = i;\n          break;\n        }\n      }\n    }\n\n    if (!mostRecentMessageIndex) {\n      // TODO this can be faster with binary search, not currently a bottleneck though.\n\n      mostRecentMessageIndex = message.entries.findIndex(\n        (e) => e.relTime >= seekTime\n      );\n    }\n\n    if (mostRecentMessageIndex) {\n      this.setState({\n        lastMessageIndex: mostRecentMessageIndex,\n        lastSeekTime: seekTime\n      });\n      return message.entries[mostRecentMessageIndex];\n    }\n  }\n\n  updateCanvas(props) {\n    const { message, live, seekTime } = props;\n    if (!this.canvas || message.entries.length === 0) return;\n\n    let mostRecentMsg = message.entries[message.entries.length - 1];\n    if (!live) {\n      mostRecentMsg = this.findMostRecentMessage(seekTime);\n\n      if (!mostRecentMsg) {\n        mostRecentMsg = message.entries[0];\n      }\n    }\n\n    const ctx = this.canvas.getContext('2d');\n    // ctx.clearRect(0, 0, 180, 15);\n\n    for (let i = 0; i < message.byteStateChangeCounts.length; ++i) {\n      const hexData = mostRecentMsg.hexData.substr(i * 2, 2);\n      ctx.fillStyle = message.byteColors[i];\n\n      ctx.fillRect(i * 20, 0, 20, 15);\n\n      ctx.font = '12px Courier';\n      ctx.fillStyle = 'white';\n      if (hexData) {\n        ctx.fillText(hexData, i * 20 + 2, 12);\n      } else {\n        ctx.fillText('-', i * 20 + 7, 12);\n      }\n    }\n  }\n\n  onVisibilityChange(isVisible) {\n    if (isVisible !== this.state.isVisible) {\n      this.setState({ isVisible });\n    }\n  }\n\n  onCanvasRefAvailable(ref) {\n    if (!ref) return;\n\n    this.canvas = ref;\n    this.canvas.width = 160 * window.devicePixelRatio;\n    this.canvas.height = 15 * window.devicePixelRatio;\n    const ctx = this.canvas.getContext('2d');\n    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n  }\n\n  render() {\n    return (\n      <canvas\n        ref={this.onCanvasRefAvailable}\n        className=\"cabana-meta-messages-list-item-bytes-canvas\"\n      />\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport Clipboard from 'clipboard';\n\nimport MessageBytes from './MessageBytes';\n\nconst { ckmeans } = require('simple-statistics');\n\nexport default class Meta extends Component {\n  static propTypes = {\n    onMessageSelected: PropTypes.func,\n    onMessageUnselected: PropTypes.func,\n    dongleId: PropTypes.string,\n    name: PropTypes.string,\n    messages: PropTypes.objectOf(PropTypes.object),\n    selectedMessages: PropTypes.array,\n    onPartChanged: PropTypes.func,\n    partsCount: PropTypes.number,\n    showLoadDbc: PropTypes.func,\n    showSaveDbc: PropTypes.func,\n    dbcFilename: PropTypes.string,\n    dbcLastSaved: PropTypes.object, // moment.js object,\n    showEditMessageModal: PropTypes.func,\n    route: PropTypes.object,\n    partsLoaded: PropTypes.number,\n    currentParts: PropTypes.array,\n    seekTime: PropTypes.number,\n    loginWithGithub: PropTypes.element,\n    isDemo: PropTypes.bool,\n    live: PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.onFilterChanged = this.onFilterChanged.bind(this);\n    this.onFilterFocus = this.onFilterFocus.bind(this);\n    this.onFilterUnfocus = this.onFilterUnfocus.bind(this);\n    this.canMsgFilter = this.canMsgFilter.bind(this);\n    this.logEventMsgFilter = this.logEventMsgFilter.bind(this);\n    this.renderMessageBytes = this.renderMessageBytes.bind(this);\n    this.toggleShowLogEvents = this.toggleShowLogEvents.bind(this);\n\n    const { dbcLastSaved } = props;\n\n    this.state = {\n      filterText: 'Filter',\n      lastSaved:\n        dbcLastSaved !== null ? this.props.dbcLastSaved.fromNow() : null,\n      hoveredMessages: [],\n      orderedMessageKeys: [],\n      showLogEvents: false\n    };\n  }\n\n  componentDidMount() {\n    this.lastSavedTimer = setInterval(() => {\n      if (this.props.dbcLastSaved !== null) {\n        this.setState({ lastSaved: this.props.dbcLastSaved.fromNow() });\n      }\n    }, 30000);\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.lastSavedTimer);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.lastSaved !== this.props.lastSaved\n      && typeof nextProps === 'object'\n    ) {\n      this.setState({ lastSaved: nextProps.dbcLastSaved.fromNow() });\n    }\n\n    const nextMsgKeys = Object.keys(nextProps.messages);\n    if (\n      JSON.stringify(nextMsgKeys)\n      !== JSON.stringify(Object.keys(this.props.messages))\n    ) {\n      const orderedMessageKeys = this.sortMessages(nextProps.messages);\n      this.setState({ hoveredMessages: [], orderedMessageKeys });\n    } else if (\n      this.state.orderedMessageKeys.length === 0\n      || (!this.props.live\n        && this.props.messages\n        && nextProps.messages\n        && this.byteCountsDidUpdate(this.props.messages, nextProps.messages))\n    ) {\n      const orderedMessageKeys = this.sortMessages(nextProps.messages);\n      this.setState({ orderedMessageKeys });\n    }\n  }\n\n  byteCountsDidUpdate(prevMessages, nextMessages) {\n    return Object.entries(nextMessages).some(\n      ([msgId, msg]) => JSON.stringify(msg.byteStateChangeCounts)\n        !== JSON.stringify(prevMessages[msgId].byteStateChangeCounts)\n    );\n  }\n\n  sortMessages(messages) {\n    // Returns list of message keys, ordered as follows:\n    // messages are binned into at most 10 bins based on entry count\n    // each bin is sorted by message CAN address\n    // then the list of bins is flattened and reversed to\n    // yield a count-descending, address-ascending order.\n\n    if (Object.keys(messages).length === 0) return [];\n    const messagesByEntryCount = Object.entries(messages).reduce(\n      (partialMapping, [msgId, msg]) => {\n        const entryCountKey = msg.entries.length.toString(); // js object keys are strings\n        if (!partialMapping[entryCountKey]) {\n          partialMapping[entryCountKey] = [msg];\n        } else {\n          partialMapping[entryCountKey].push(msg);\n        }\n        return partialMapping;\n      },\n      {}\n    );\n\n    const entryCounts = Object.keys(messagesByEntryCount).map((count) => parseInt(count, 10));\n    const binnedEntryCounts = ckmeans(\n      entryCounts,\n      Math.min(entryCounts.length, 10)\n    );\n    const sortedKeys = binnedEntryCounts\n      .map((bin) => bin\n        .map((entryCount) => messagesByEntryCount[entryCount.toString()])\n        .reduce((messages, partial) => messages.concat(partial), [])\n        .sort((msg1, msg2) => {\n          if (msg1.address < msg2.address) {\n            return 1;\n          }\n          return -1;\n        })\n        .map((msg) => msg.id))\n      .reduce((keys, bin) => keys.concat(bin), [])\n      .reverse();\n\n    return sortedKeys;\n  }\n\n  toggleShowLogEvents() {\n    this.setState({\n      showLogEvents: !this.state.showLogEvents\n    });\n  }\n\n  onFilterChanged(e) {\n    let val = e.target.value;\n    if (val.trim() === 'Filter') val = '';\n\n    this.setState({ filterText: val });\n  }\n\n  onFilterFocus(e) {\n    if (this.state.filterText.trim() === 'Filter') {\n      this.setState({ filterText: '' });\n    }\n  }\n\n  onFilterUnfocus(e) {\n    if (this.state.filterText.trim() === '') {\n      this.setState({ filterText: 'Filter' });\n    }\n  }\n\n  canMsgFilter(msg) {\n    if (msg.isLogEvent) {\n      return;\n    }\n    const { filterText } = this.state;\n    const msgName = msg.frame ? msg.frame.name : '';\n\n    return (\n      filterText === 'Filter'\n      || filterText === ''\n      || msg.id.toLowerCase().indexOf(filterText.toLowerCase()) !== -1\n      || msgName.toLowerCase().indexOf(filterText.toLowerCase()) !== -1\n    );\n  }\n\n  logEventMsgFilter(msg) {\n    if (!msg.isLogEvent) {\n      return;\n    }\n    const { filterText } = this.state;\n    const msgName = msg.frame ? msg.frame.name : '';\n\n    return (\n      filterText === 'Filter'\n      || filterText === ''\n      || msg.id.toLowerCase().indexOf(filterText.toLowerCase()) !== -1\n      || msgName.toLowerCase().indexOf(filterText.toLowerCase()) !== -1\n    );\n  }\n\n  lastSavedPretty() {\n    const { dbcLastSaved } = this.props;\n    return dbcLastSaved.fromNow();\n  }\n\n  onMessageHover(key) {\n    const { hoveredMessages } = this.state;\n    if (hoveredMessages.indexOf(key) !== -1) return;\n\n    hoveredMessages.push(key);\n    this.setState({ hoveredMessages });\n  }\n\n  onMessageHoverEnd(key) {\n    let { hoveredMessages } = this.state;\n    hoveredMessages = hoveredMessages.filter((m) => m !== key);\n    this.setState({ hoveredMessages });\n  }\n\n  onMsgRemoveClick(key) {\n    let { selectedMessages } = this.state;\n    selectedMessages = selectedMessages.filter((m) => m !== key);\n    this.props.onMessageUnselected(key);\n    this.setState({ selectedMessages });\n  }\n\n  onMessageSelected(key) {\n    // uncomment when we support multiple messages\n    // const selectedMessages = this.state.selectedMessages.filter((m) => m !== key);\n    const selectedMessages = [];\n    selectedMessages.push(key);\n    this.props.updateSelectedMessages(selectedMessages);\n    this.props.onMessageSelected(key);\n  }\n\n  orderedMessages() {\n    const { orderedMessageKeys } = this.state;\n    const { messages } = this.props;\n    return orderedMessageKeys.map((key) => messages[key]);\n  }\n\n  selectedMessageClass(messageId) {\n    return this.props.selectedMessages.includes(messageId)\n      ? 'is-selected'\n      : null;\n  }\n\n  renderMessageBytes(msg) {\n    return (\n      <tr\n        onClick={() => {\n          this.onMessageSelected(msg.id);\n        }}\n        key={msg.id}\n        className={cx(\n          'cabana-meta-messages-list-item',\n          this.selectedMessageClass(msg.id)\n        )}\n      >\n        {msg.isLogEvent ? (\n          <td colSpan=\"2\">{msg.id}</td>\n        ) : (\n          <>\n            <td>{msg.frame ? msg.frame.name : 'untitled'}</td>\n            <td>{msg.id}</td>\n          </>\n        )}\n        <td>{msg.entries.length}</td>\n        <td>\n          <div className=\"cabana-meta-messages-list-item-bytes\">\n            <MessageBytes\n              key={msg.id}\n              message={msg}\n              seekIndex={this.props.seekIndex}\n              seekTime={this.props.seekTime}\n              live={this.props.live}\n            />\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  renderCanMessages() {\n    return this.orderedMessages()\n      .filter(this.canMsgFilter)\n      .map(this.renderMessageBytes);\n  }\n\n  renderLogEventMessages() {\n    return this.orderedMessages()\n      .filter(this.logEventMsgFilter)\n      .map(this.renderMessageBytes);\n  }\n\n  renderAvailableMessagesList() {\n    if (Object.keys(this.props.messages).length === 0) {\n      return <p>Loading messages...</p>;\n    }\n    return (\n      <>\n        <table cellPadding=\"5\">\n          {this.state.showLogEvents && (\n            <>\n              <thead>\n                <tr>\n                  <td colSpan=\"2\">Name</td>\n                  <td>Count</td>\n                  <td>Bytes</td>\n                </tr>\n              </thead>\n              <tbody>\n                {this.renderLogEventMessages()}\n                <tr>\n                  <td colSpan=\"4\">\n                    <hr />\n                  </td>\n                </tr>\n              </tbody>\n            </>\n          )}\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>ID</td>\n              <td>Count</td>\n              <td>Bytes</td>\n            </tr>\n          </thead>\n          <tbody>{this.renderCanMessages()}</tbody>\n        </table>\n      </>\n    );\n  }\n\n  saveable() {\n    try {\n      // eslint-disable-next-line\n      \"serviceWorker\" in navigator &&\n        !!new ReadableStream()\n        && !!new WritableStream(); // eslint-disable-line no-undef\n      return 'saveable';\n    } catch (e) {\n      return false;\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"cabana-meta\">\n        <div className=\"cabana-meta-header\">\n          <h5 className=\"cabana-meta-header-label t-capline\">\n            Currently editing:\n          </h5>\n          <strong className=\"cabana-meta-header-filename\">\n            {this.props.dbcFilename}\n          </strong>\n          {this.props.dbcLastSaved !== null ? (\n            <div className=\"cabana-meta-header-last-saved\">\n              <p>\n                Last saved:\n                {this.lastSavedPretty()}\n              </p>\n            </div>\n          ) : null}\n          <div className={`cabana-meta-header-actions ${this.saveable()}`}>\n            <div className=\"cabana-meta-header-action\">\n              <button onClick={this.props.showLoadDbc}>Load DBC</button>\n            </div>\n            {this.saveable() && (\n              <div className=\"cabana-meta-header-action\">\n                <button onClick={this.props.saveLog}>Save Log</button>\n              </div>\n            )}\n            {this.props.shareUrl ? (\n              <div\n                className=\"cabana-meta-header-action special-wide\"\n                data-clipboard-text={this.props.shareUrl}\n                data-clipboard-action=\"copy\"\n                ref={(ref) => (ref ? new Clipboard(ref) : null)}\n              >\n                <a\n                  className=\"button\"\n                  href={this.props.shareUrl}\n                  onClick={(e) => e.preventDefault()}\n                >\n                  Copy Share Link\n                </a>\n              </div>\n            ) : null}\n            <div className=\"cabana-meta-header-action\">\n              <button onClick={this.props.showSaveDbc}>Save DBC</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"cabana-meta-messages\">\n          <div className=\"cabana-meta-messages-header\">\n            <div\n              style={{\n                display: 'inline-block',\n                float: 'right'\n              }}\n            >\n              <h5 className=\"t-capline\">\n                Show log events\n                <input\n                  type=\"checkbox\"\n                  onChange={this.toggleShowLogEvents}\n                  checked={!!this.state.showLogEvents}\n                />\n              </h5>\n            </div>\n            <h5 className=\"t-capline\">Available messages</h5>\n          </div>\n          <div className=\"cabana-meta-messages-window\">\n            <div className=\"cabana-meta-messages-filter\">\n              <div className=\"form-field form-field--small\">\n                <input\n                  type=\"text\"\n                  value={this.state.filterText}\n                  onFocus={this.onFilterFocus}\n                  onBlur={this.onFilterUnfocus}\n                  onChange={this.onFilterChanged}\n                />\n              </div>\n            </div>\n            <div className=\"cabana-meta-messages-list\">\n              {this.renderAvailableMessagesList()}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","function elementWiseEquals(arr1, arr2) {\n  return (\n    arr1.length === arr2.length && arr1.every((ele, idx) => arr2[idx] === ele)\n  );\n}\n\nfunction findIndexRight(arr, condition) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    if (condition(arr[i])) {\n      return i;\n    }\n  }\n}\n\nexport default { elementWiseEquals, findIndexRight };\n","import ArrayUtils from '../utils/array';\nimport { CAN_GRAPH_MAX_POINTS } from '../config';\n\nfunction _calcGraphData(msg, signalUid, firstCanTime) {\n  if (!msg) return null;\n\n  const signal = Object.values(msg.frame.signals).find(\n    (s) => s.uid === signalUid\n  );\n  if (!signal) {\n    console.warn('_calcGraphData: no signal', signalUid, msg);\n    return null;\n  }\n  let samples = [];\n  const skip = Math.floor(msg.entries.length / CAN_GRAPH_MAX_POINTS);\n\n  if (skip === 0) {\n    samples = msg.entries;\n  } else {\n    for (let i = 0; i < msg.entries.length; i += skip) {\n      samples.push(msg.entries[i]);\n    }\n    // Always include last message entry, which faciliates graphData comparison\n    samples.push(msg.entries[msg.entries.length - 1]);\n  }\n  if (!samples.length) {\n    return [];\n  }\n  // sorting these doesn't fix the phantom lines\n  let lastEntry = samples[0].relTime;\n  return samples\n    .filter((e) => e.signals[signal.name] !== undefined)\n    .map((entry) => {\n      if (entry.relTime - lastEntry > 2) {\n        signalUid = Math.random().toString(36);\n      }\n      lastEntry = entry.relTime;\n      // console.log(entry.relTime - lastEntry);\n      return {\n        x: entry.time,\n        relTime: entry.relTime,\n        y: entry.signals[signal.name],\n        unit: signal.unit,\n        color: `rgba(${signal.colors.join(',')}, 0.5)`,\n        signalName: signal.name,\n        signalUid\n      };\n    });\n}\n\nfunction appendNewGraphData(plottedSignals, graphData, messages, firstCanTime) {\n  const messagesPerPlot = plottedSignals.map((plottedMessages) => plottedMessages.reduce((messages, { messageId, signalUid }) => {\n    messages.push(messageId);\n    return messages;\n  }, []));\n\n  const extendedPlots = messagesPerPlot\n    .map((plottedMessageIds, index) => ({ plottedMessageIds, index })) // preserve index so we can look up graphData\n    .filter(({ plottedMessageIds, index }) => {\n      if (index < graphData.length) {\n        let maxGraphTime = 0;\n        const { series } = graphData[index];\n        if (series.length > 0) {\n          maxGraphTime = series[graphData[index].series.length - 1].relTime;\n        }\n\n        return plottedMessageIds.some(\n          (messageId) => (messages[messageId].entries.length > 0 && series.length === 0)\n            || messages[messageId].entries.some((e) => e.relTime > maxGraphTime)\n        );\n      }\n      return false;\n    })\n    .map(({ plottedMessageIds, index }) => {\n      plottedMessageIds = plottedMessageIds.reduce((arr, messageId) => {\n        if (arr.indexOf(messageId) === -1) {\n          arr.push(messageId);\n        }\n        return arr;\n      }, []);\n      return { plottedMessageIds, index };\n    });\n\n  extendedPlots.forEach(({ plottedMessageIds, index }) => {\n    const signalUidsByMessageId = plottedSignals[index].reduce(\n      (obj, { messageId, signalUid }) => {\n        if (!obj[messageId]) {\n          obj[messageId] = [];\n        }\n        obj[messageId].push(signalUid);\n        return obj;\n      },\n      {}\n    );\n    const { series } = graphData[index];\n    const graphDataMaxMessageTimes = plottedMessageIds.reduce(\n      (obj, messageId) => {\n        const signalUids = signalUidsByMessageId[messageId];\n        const maxIndex = ArrayUtils.findIndexRight(\n          series,\n          (entry) => signalUids.indexOf(entry.signalUid) !== -1\n        );\n        if (maxIndex) {\n          obj[messageId] = series[maxIndex].relTime;\n        } else if (series.length > 0) {\n          obj[messageId] = series[series.length - 1].relTime;\n        } else {\n          // Graph data is empty\n          obj[messageId] = -1;\n        }\n\n        return obj;\n      },\n      {}\n    );\n\n    let newGraphData = [];\n    plottedMessageIds\n      .map((messageId) => ({ messageId, entries: messages[messageId].entries }))\n      .filter(\n        (\n          { messageId, entries } // Filter to only messages with stale graphData\n        ) => entries[entries.length - 1].relTime\n          > graphDataMaxMessageTimes[messageId]\n      )\n      .forEach(({ messageId, entries }) => {\n        // Compute and append new graphData\n        const firstNewEntryIdx = entries.findIndex(\n          (entry) => entry.relTime > graphDataMaxMessageTimes[messageId]\n        );\n\n        const newEntries = entries.slice(firstNewEntryIdx);\n        signalUidsByMessageId[messageId].forEach((signalUid) => {\n          const signalGraphData = _calcGraphData(\n            {\n              ...messages[messageId],\n              entries: newEntries\n            },\n            signalUid,\n            firstCanTime\n          );\n\n          newGraphData = newGraphData.concat(signalGraphData);\n        });\n      });\n\n    const messageIdOutOfBounds = series.length > 0\n      && plottedMessageIds.find(\n        (messageId) => messages[messageId].entries.length > 0\n          && series[0].relTime < messages[messageId].entries[0].relTime\n      );\n    graphData[index] = {\n      series: graphData[index].series.concat(newGraphData),\n      updated: Date.now()\n    };\n\n    if (messageIdOutOfBounds) {\n      const graphDataLowerBound = graphData[index].series.findIndex(\n        (e) => e.relTime > messages[messageIdOutOfBounds].entries[0].relTime\n      );\n\n      if (graphDataLowerBound) {\n        graphData[index].series = graphData[index].series.slice(\n          graphDataLowerBound\n        );\n      }\n    }\n  });\n\n  return [...graphData];\n}\n\nexport default { _calcGraphData, appendNewGraphData };\n","export default {\n  $schema: 'https://vega.github.io/schema/vega/v5.6.json',\n  width: 400,\n  height: 200,\n  padding: {\n    top: 5,\n    left: 30,\n    right: 5,\n    bottom: 10\n  },\n  signals: [\n    {\n      name: 'tipTime',\n      on: [\n        {\n          events: 'mousemove',\n          update: \"invert('xrelscale', x())\"\n        }\n      ]\n    },\n    {\n      name: 'clickTime',\n      on: [\n        {\n          events: 'click',\n          update: \"invert('xrelscale', x())\"\n        }\n      ]\n    },\n    { name: 'videoTime' },\n    {\n      name: 'segment',\n      value: { data: 'table', field: 'relTime' }\n    }\n  ],\n  data: [\n    {\n      name: 'table'\n    },\n    {\n      name: 'segment'\n    },\n    {\n      name: 'tooltip',\n      source: 'table',\n      transform: [\n        {\n          type: 'filter',\n          expr: 'abs(datum.relTime - tipTime) <= 0.01'\n        },\n        {\n          type: 'aggregate',\n          fields: ['relTime', 'y', 'unit'],\n          ops: ['min', 'argmin', 'argmin'],\n          as: ['min', 'argmin', 'argmin']\n        }\n      ]\n    },\n    {\n      name: 'ySegmentScale',\n      source: 'table',\n      transform: [\n        {\n          type: 'filter',\n          expr:\n            'length(segment) != 2 || (datum.relTime >= segment[0] && datum.relTime <= segment[1])'\n        },\n        { type: 'extent', field: 'y', signal: 'ySegment' }\n      ]\n    }\n  ],\n  scales: [\n    {\n      name: 'xscale',\n      type: 'linear',\n      range: 'width',\n      domain: { data: 'table', field: 'x' },\n      zero: false\n    },\n    {\n      name: 'xrelscale',\n      type: 'linear',\n      range: 'width',\n      domain: { data: 'table', field: 'relTime' },\n      zero: false,\n      clamp: true,\n      domainRaw: { signal: 'segment' }\n    },\n    {\n      name: 'yscale',\n      type: 'linear',\n      range: 'height',\n      clamp: true,\n      zero: false,\n      domain: { signal: 'ySegment' }\n    },\n    {\n      name: 'color',\n      type: 'ordinal',\n      domain: { data: 'table', field: 'color' },\n      range: { data: 'table', field: 'color' }\n    }\n  ],\n  axes: [\n    { orient: 'bottom', scale: 'xrelscale', labelOverlap: true },\n    { orient: 'left', scale: 'yscale' }\n  ],\n  marks: [\n    {\n      type: 'group',\n      name: 'plot',\n      interactive: true,\n      encode: {\n        enter: {\n          width: { signal: 'width' },\n          height: { signal: 'height' },\n          fill: { value: 'transparent' }\n        }\n      },\n      signals: [\n        {\n          name: 'brush',\n          value: 0,\n          on: [\n            {\n              events: '@boundingRect:mousedown',\n              update: '[x(), x()]'\n            },\n            {\n              events:\n                '[@boundingRect:mousedown, window:mouseup] > window:mousemove!',\n              update: '[brush[0], clamp(x(), 0, width)]'\n            },\n            {\n              events: { signal: 'delta' },\n              update:\n                'clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)'\n            }\n          ]\n        },\n        {\n          name: 'anchor',\n          value: null,\n          on: [{ events: '@brush:mousedown', update: 'slice(brush)' }]\n        },\n        {\n          name: 'xdown',\n          value: 0,\n          on: [{ events: '@brush:mousedown', update: 'x()' }]\n        },\n        {\n          name: 'xup',\n          value: 0,\n          on: [{ events: '@brush:mouseup', update: 'x()' }]\n        },\n        {\n          name: 'delta',\n          value: 0,\n          on: [\n            {\n              events: '[@brush:mousedown, window:mouseup] > window:mousemove!',\n              update: 'x() - xdown'\n            }\n          ]\n        },\n\n        {\n          name: 'segment',\n          push: 'outer',\n          on: [\n            {\n              events: 'window:mouseup',\n              update:\n                \"span(brush) && span(brush) > 15 ? invert('xrelscale', brush) : segment\"\n            }\n          ]\n        }\n      ],\n      marks: [\n        {\n          type: 'group',\n          from: {\n            facet: {\n              name: 'series',\n              data: 'table',\n              groupby: 'signalUid'\n            }\n          },\n          marks: {\n            type: 'line',\n            name: 'lineMark',\n            from: { data: 'series' },\n            interactive: true,\n            encode: {\n              update: {\n                interpolate: { value: 'step' },\n                x: { scale: 'xrelscale', field: 'relTime' },\n                y: { scale: 'yscale', field: 'y' }\n              },\n              hover: {\n                fillOpacity: { value: 0.5 }\n              },\n              enter: {\n                clip: { value: true },\n                stroke: { scale: 'color', field: 'color' },\n                strokeWidth: { value: 2 }\n              }\n            }\n          }\n        },\n        {\n          type: 'rect',\n          interactive: true,\n          name: 'brush',\n          encode: {\n            enter: {\n              y: { value: 0 },\n              height: { signal: 'height' },\n              fill: { value: '#333' },\n              fillOpacity: { value: 0.2 }\n            },\n            update: {\n              x: { signal: 'brush[0]' },\n              x2: { signal: 'brush[1]' }\n            }\n          }\n        },\n        // {\n        //   \"type\": \"rect\",\n        //   \"interactive\": false,\n        //   \"encode\": {\n        //     \"enter\": {\n        //       \"y\": {\"value\": 0},\n        //       \"height\": {\"value\": 200},\n        //       \"width\": {\"value\": 2},\n        //       \"fill\": {\"value\": \"firebrick\"}\n        //     },\n        //     \"update\": {\n        //       \"x\": {\"signal\": \"brush[0]\"}\n        //     }\n        //   }\n        // },\n        // {\n        //   \"type\": \"rect\",\n        //   \"interactive\": false,\n        //   \"encode\": {\n        //     \"enter\": {\n        //       \"y\": {\"value\": 0},\n        //       \"height\": {\"value\": 200},\n        //       \"width\": {\"value\": 2},\n        //       \"fill\": {\"value\": \"firebrick\"}\n        //     },\n        //     \"update\": {\n        //       \"x\": {\"signal\": \"brush[1]\"}\n        //     }\n        //   }\n        // },\n        {\n          type: 'rule',\n          encode: {\n            update: {\n              y: { value: 0 },\n              y2: { field: { group: 'height' } },\n              stroke: { value: '#000' },\n              strokeWidth: { value: 2 },\n              x: {\n                scale: 'xrelscale',\n                signal: 'videoTime',\n                offset: 0.5\n              }\n            }\n          }\n        },\n        {\n          type: 'symbol',\n          from: { data: 'tooltip' },\n          encode: {\n            update: {\n              x: { scale: 'xrelscale', field: 'argmin.relTime' },\n              y: { scale: 'yscale', field: 'argmin.y' },\n              size: { value: 50 },\n              fill: { value: 'black' }\n            }\n          }\n        },\n        {\n          type: 'group',\n          from: { data: 'tooltip' },\n          interactive: false,\n          name: 'tooltipGroup',\n          encode: {\n            update: {\n              x: [\n                {\n                  test:\n                    \"inrange(datum.argmin.relTime + 80, domain('xrelscale'))\",\n                  scale: 'xrelscale',\n                  field: 'argmin.relTime'\n                },\n                { scale: 'xrelscale', field: 'argmin.relTime', offset: -80 }\n              ],\n              y: { scale: 'yscale', field: 'argmin.y' },\n              height: { value: 20 },\n              width: { value: 80 },\n              fill: { value: '#fff' },\n              fillOpacity: { value: 0.85 },\n              stroke: { value: '#aaa' },\n              strokeWidth: { value: 0.5 }\n            }\n          },\n          marks: [\n            {\n              type: 'text',\n              interactive: false,\n              encode: {\n                update: {\n                  text: {\n                    signal:\n                      \"format(parent.argmin.relTime, ',.2f') + ': ' + format(parent.argmin.y, ',.2f') + ' ' + parent.argmin.unit\"\n                  },\n                  fill: { value: 'black' },\n                  fontWeight: { value: 'bold' },\n                  y: { value: 20 }\n                }\n              }\n            }\n          ]\n        },\n        {\n          type: 'rect',\n          name: 'boundingRect',\n          interactive: true,\n          encode: {\n            enter: {\n              width: { signal: 'width' },\n              height: { signal: 'height' },\n              fill: { value: 'transparent' }\n            }\n          }\n        }\n      ]\n    }\n  ]\n};\n","export default function debounce(func, wait, immediate) {\n  let timeout;\n  return function () {\n    const context = this;\n    const args = arguments;\n    const later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import React, { Component } from 'react';\nimport Measure from 'react-measure';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { Vega } from 'react-vega';\n\nimport Signal from '../models/can/signal';\nimport GraphData from '../models/graph-data';\nimport CanPlotSpec from '../vega/CanPlot';\nimport debounce from '../utils/debounce';\n\nconst DefaultPlotInnerStyle = {\n  position: 'absolute',\n  top: 0,\n  left: 0\n};\n\nexport default class CanGraph extends Component {\n  static emptyTable = [];\n\n  static propTypes = {\n    plottedSignal: PropTypes.string,\n    messages: PropTypes.object,\n    messageId: PropTypes.string,\n    messageName: PropTypes.string,\n    signalSpec: PropTypes.instanceOf(Signal),\n    segment: PropTypes.array,\n    unplot: PropTypes.func,\n    onRelativeTimeClick: PropTypes.func,\n    currentTime: PropTypes.number,\n    onSegmentChanged: PropTypes.func,\n    onDragStart: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    container: PropTypes.node,\n    dragPos: PropTypes.object,\n    canReceiveGraphDrop: PropTypes.bool,\n    onGraphRefAvailable: PropTypes.func,\n    plottedSignals: PropTypes.array\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      plotInnerStyle: null,\n      shiftX: 0,\n      shiftY: 0,\n      bounds: null,\n      isDataInserted: false,\n      data: this.getGraphData(props),\n      spec: this.getGraphSpec(props)\n    };\n    this.onNewView = this.onNewView.bind(this);\n    this.onSignalClickTime = this.onSignalClickTime.bind(this);\n    this.onSignalSegment = this.onSignalSegment.bind(this);\n    this.onDragAnchorMouseDown = this.onDragAnchorMouseDown.bind(this);\n    this.onDragAnchorMouseUp = this.onDragAnchorMouseUp.bind(this);\n    this.onDragStart = this.onDragStart.bind(this);\n    this.onPlotResize = this.onPlotResize.bind(this);\n    this.insertData = this.insertData.bind(this);\n  }\n\n  getGraphData(props) {\n    let firstRelTime = -1;\n    let lastRelTime = -1;\n    const series = props.plottedSignals\n      .map((signals) => {\n        const { messageId, signalUid } = signals;\n        const { entries } = props.messages[messageId];\n        if (entries.length) {\n          let messageRelTime = entries[0].relTime;\n          if (firstRelTime === -1) {\n            firstRelTime = messageRelTime;\n          } else {\n            firstRelTime = Math.min(firstRelTime, messageRelTime);\n          }\n          messageRelTime = entries[entries.length - 1].relTime;\n          lastRelTime = Math.max(lastRelTime, messageRelTime);\n        }\n        return GraphData._calcGraphData(\n          props.messages[messageId],\n          signalUid,\n          0\n        );\n      })\n      .reduce((m, v) => m.concat(v), []);\n\n    return {\n      updated: Date.now(),\n      series,\n      firstRelTime,\n      lastRelTime\n    };\n  }\n\n  getGraphSpec(props) {\n    return {\n      ...CanPlotSpec,\n      scales: [\n        {\n          ...CanPlotSpec.scales[0],\n          domainMin: props.segment[0],\n          domainMax: props.segment[1]\n        },\n        ...CanPlotSpec.scales.slice(1)\n      ]\n    };\n  }\n\n  segmentIsNew(newSegment) {\n    return (\n      newSegment.length !== this.props.segment.length\n      || !newSegment.every((val, idx) => this.props.segment[idx] === val)\n    );\n  }\n\n  visualChanged(prevProps, nextProps) {\n    return (\n      prevProps.canReceiveGraphDrop !== nextProps.canReceiveGraphDrop\n      || JSON.stringify(prevProps.dragPos) !== JSON.stringify(nextProps.dragPos)\n    );\n  }\n\n  onPlotResize(options) {\n    if (!this.view) {\n      return;\n    }\n\n    let bounds = null;\n    if (options && options.bounds) {\n      this.setState({ bounds: options.bounds });\n      bounds = options.bounds;\n    } else {\n      bounds = this.state.bounds;\n    }\n\n    this.view.runAfter(this.updateBounds);\n  }\n\n  updateBounds = debounce(() => {\n    this.view.signal('width', this.state.bounds.width - 70);\n    this.view.signal('height', 0.4 * (this.state.bounds.width - 70)); // 5:2 aspect ratio\n    this.view.run();\n  }, 100);\n\n  insertData = debounce(() => {\n    if (!this.view) {\n      console.log('Cannot insertData');\n      return;\n    }\n\n    // adding plot points by diff isn't faster since it basically has to be n^2\n    // out-of-order events make it so that you can't just check the bounds\n    const { series } = this.state.data;\n    const changeset = this.view\n      .changeset()\n      .remove((v) => true)\n      .insert(series);\n    this.view.change('table', changeset);\n    this.view.run();\n  }, 250);\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.dragPos\n      && JSON.stringify(nextProps.dragPos) !== JSON.stringify(this.props.dragPos)\n    ) {\n      this.updateStyleFromDragPos(nextProps.dragPos);\n    } else if (!nextProps.dragPos && this.state.plotInnerStyle !== null) {\n      this.setState({ plotInnerStyle: null });\n    }\n    if (\n      this.props.messages !== nextProps.messages\n      || this.props.plottedSignal !== nextProps.plottedSignal\n    ) {\n      const data = this.getGraphData(nextProps);\n      if (\n        data.series.length === this.state.data.series.length\n        && data.firstRelTime === this.state.data.firstRelTime\n        && data.lastRelTime === this.state.data.lastRelTime\n      ) {\n        // do nothing, the data didn't *actually* change\n      } else {\n        this.setState({ data });\n      }\n    }\n    if (this.segmentIsNew(nextProps.segment)) {\n      this.setState({ spec: this.getGraphSpec(nextProps) });\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!this.view) {\n      return true;\n    }\n    if (this.state.spec !== nextState.spec) {\n      return true;\n    }\n    if (this.state.data !== nextState.data) {\n      this.insertData();\n    }\n    if (this.props.currentTime !== nextProps.currentTime) {\n      this.view.signal('videoTime', nextProps.currentTime);\n    }\n    if (this.segmentIsNew(nextProps.segment)) {\n      if (nextProps.segment.length > 0) {\n        // Set segmented domain\n        this.view.signal('segment', nextProps.segment);\n      } else {\n        // Reset segment to full domain\n        this.view.signal('segment', 0);\n      }\n    }\n    this.view.runAsync();\n    return false;\n  }\n\n  componentDidUpdate(oldProps, oldState) {\n    if (this.view) {\n      if (this.props.segment.length > 0) {\n        // Set segmented domain\n        this.view.signal('segment', this.props.segment);\n      } else {\n        // Reset segment to full domain\n        this.view.signal('segment', 0);\n      }\n      this.view.signal('videoTime', this.props.currentTime);\n      this.view.runAsync();\n    }\n  }\n\n  updateStyleFromDragPos({ left, top }) {\n    const plotInnerStyle = { ...this.state.plotInnerStyle };\n    plotInnerStyle.left = left;\n    plotInnerStyle.top = top;\n    this.setState({ plotInnerStyle });\n  }\n\n  onNewView(view) {\n    this.view = view;\n\n    if (this.state.bounds) {\n      this.onPlotResize();\n    }\n    if (this.props.segment.length > 0) {\n      view.signal('segment', this.props.segment);\n    }\n    view.signal('videoTime', this.props.currentTime);\n\n    this.insertData();\n  }\n\n  onSignalClickTime(signal, clickTime) {\n    // console.log('onSignalClickTime', signal, clickTime);\n    if (clickTime !== undefined) {\n      this.props.onRelativeTimeClick(this.props.messageId, clickTime);\n    }\n  }\n\n  onSignalSegment(signal, segment) {\n    // console.log('onSignalSegment', signal, segment);\n    if (!Array.isArray(segment)) {\n      return;\n    }\n\n    this.props.onSegmentChanged(this.props.messageId, segment);\n\n    if (!this.view) {\n      return;\n    }\n\n    this.view.runAfter(() => {\n      const state = this.view.getState();\n      state.subcontext[0].signals.brush = 0;\n      this.view.setState(state);\n      this.insertData();\n    });\n  }\n\n  plotInnerStyleFromMouseEvent(e) {\n    const { shiftX, shiftY } = this.state;\n    const plotInnerStyle = { ...DefaultPlotInnerStyle };\n    const rect = this.props.container.getBoundingClientRect();\n\n    const x = e.clientX - rect.left - shiftX;\n    const y = e.clientY - rect.top - shiftY;\n    plotInnerStyle.left = x;\n    plotInnerStyle.top = y;\n    return plotInnerStyle;\n  }\n\n  onDragAnchorMouseDown(e) {\n    e.persist();\n    const shiftX = e.clientX - e.target.getBoundingClientRect().left;\n    const shiftY = e.clientY - e.target.getBoundingClientRect().top;\n    this.setState({ shiftX, shiftY }, () => {\n      this.setState({ plotInnerStyle: this.plotInnerStyleFromMouseEvent(e) });\n    });\n    this.props.onDragStart(\n      this.props.messageId,\n      this.props.signalSpec.uid,\n      shiftX,\n      shiftY\n    );\n  }\n\n  onDragAnchorMouseUp(e) {\n    this.props.onDragEnd();\n    this.setState({\n      plotInnerStyle: null,\n      shiftX: 0,\n      shiftY: 0\n    });\n  }\n\n  onDragStart(e) {\n    e.preventDefault();\n    return false;\n  }\n\n  render() {\n    const { plotInnerStyle } = this.state;\n    const canReceiveDropClass = this.props.canReceiveGraphDrop\n      ? 'is-droppable'\n      : null;\n\n    return (\n      <div\n        className=\"cabana-explorer-visuals-plot\"\n        ref={this.props.onGraphRefAvailable}\n      >\n        <div\n          className={cx(\n            'cabana-explorer-visuals-plot-inner',\n            canReceiveDropClass\n          )}\n          style={plotInnerStyle || null}\n        >\n          <div\n            className=\"cabana-explorer-visuals-plot-draganchor\"\n            onMouseDown={this.onDragAnchorMouseDown}\n          >\n            <span className=\"fa fa-bars\" />\n          </div>\n          {this.props.plottedSignals.map(\n            ({ messageId, signalUid, messageName }) => {\n              const signal = Object.values(\n                this.props.messages[messageId].frame.signals\n              ).find((s) => s.uid === signalUid);\n              const { colors } = signal;\n\n              return (\n                <div\n                  className=\"cabana-explorer-visuals-plot-header\"\n                  key={`${messageId}_${signal.uid}`}\n                >\n                  <div className=\"cabana-explorer-visuals-plot-header-toggle\">\n                    <button\n                      className=\"button--tiny\"\n                      onClick={() => this.props.unplot(messageId, signalUid)}\n                    >\n                      <span>Hide Plot</span>\n                    </button>\n                  </div>\n                  <div className=\"cabana-explorer-visuals-plot-header-copy\">\n                    <div className=\"cabana-explorer-visuals-plot-message\">\n                      <span>{messageName}</span>\n                    </div>\n                    <div className=\"cabana-explorer-visuals-plot-signal\">\n                      <div\n                        className=\"cabana-explorer-visuals-plot-signal-color\"\n                        style={{ background: `rgb(${colors}` }}\n                      />\n                      <strong>{signal.name}</strong>\n                    </div>\n                  </div>\n                </div>\n              );\n            }\n          )}\n          <Measure bounds onResize={this.onPlotResize}>\n            {({ measureRef }) => (\n              <div\n                ref={measureRef}\n                className=\"cabana-explorer-visuals-plot-container\"\n              >\n                <Vega\n                  onNewView={this.onNewView}\n                  logLevel={1}\n                  signalListeners={{\n                    clickTime: this.onSignalClickTime,\n                    segment: this.onSignalSegment\n                  }}\n                  renderer=\"canvas\"\n                  spec={this.state.spec}\n                  actions={false}\n                  data={{\n                    table: this.state.data.series\n                  }}\n                />\n              </div>\n            )}\n          </Measure>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport CanGraph from './CanGraph';\n\nrequire('element-closest');\n\nexport default class CanGraphList extends Component {\n  static propTypes = {\n    plottedSignals: PropTypes.array.isRequired,\n    messages: PropTypes.object.isRequired,\n    onGraphTimeClick: PropTypes.func.isRequired,\n    seekTime: PropTypes.number.isRequired,\n    onSegmentChanged: PropTypes.func.isRequired,\n    onSignalUnplotPressed: PropTypes.func.isRequired,\n    segment: PropTypes.array.isRequired,\n    mergePlots: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      draggingSignal: {},\n      dragPos: null,\n      dragShift: null,\n      graphToReceiveDrop: null\n    };\n\n    this.plotListRef = null;\n    this.plotRefs = [];\n    this.renderSignalPlot = this.renderSignalPlot.bind(this);\n    this.onPlotListRefReady = this.onPlotListRefReady.bind(this);\n    this.onGraphDragStart = this.onGraphDragStart.bind(this);\n    this.onGraphDragEnd = this.onGraphDragEnd.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n\n  onGraphDragStart(messageId, signalUid, shiftX, shiftY) {\n    this.setState({\n      draggingSignal: { messageId, signalUid },\n      dragShift: { x: shiftX, y: shiftY }\n    });\n  }\n\n  determineDraggingGraph() {\n    const { draggingSignal } = this.state;\n    return this.plotRefs.find(\n      ({ messageId, signalUid }) => draggingSignal.messageId === messageId\n        && draggingSignal.signalUid === signalUid\n    );\n  }\n\n  onMouseMove(e) {\n    const { dragShift } = this.state;\n    if (dragShift === null) {\n      if (this.state.graphToReceiveDrop !== null) {\n        this.setState({ graphToReceiveDrop: null });\n      }\n      return;\n    }\n    const rect = this.plotListRef.getBoundingClientRect();\n    const draggingGraph = this.determineDraggingGraph();\n    if (draggingGraph) {\n      draggingGraph.ref.hidden = true;\n      const ele = document.elementFromPoint(e.clientX, e.clientY);\n      draggingGraph.ref.hidden = false;\n      const closestPlot = ele.closest('.cabana-explorer-visuals-plot');\n      const closestPlotRef = this.plotRefs.find(\n        ({ ref, messageId, signalUid }) => !(\n          messageId === draggingGraph.messageId\n            && signalUid === draggingGraph.signalUid\n        ) && ref.isEqualNode(closestPlot)\n      );\n      if (closestPlotRef) {\n        this.setState({ graphToReceiveDrop: closestPlotRef });\n      } else {\n        this.setState({ graphToReceiveDrop: null });\n      }\n    }\n    const left = e.clientX - rect.left - dragShift.x;\n    const top = e.clientY - rect.top - dragShift.y;\n\n    this.setState({ dragPos: { left, top } });\n  }\n\n  onGraphDragEnd() {\n    if (this.state.graphToReceiveDrop !== null) {\n      this.props.mergePlots({\n        fromPlot: this.state.draggingSignal,\n        toPlot: this.state.graphToReceiveDrop\n      });\n    }\n\n    this.setState({\n      draggingSignal: {},\n      dragShift: null,\n      dragPos: null,\n      graphToReceiveDrop: null\n    });\n  }\n\n  addCanGraphRef(ref, messageId, signalUid) {\n    if (ref) {\n      let { plotRefs } = this;\n      plotRefs = plotRefs\n        .filter(\n          (ref) => !(ref.messageId === messageId && ref.signalUid === signalUid)\n        )\n        .concat([{ messageId, signalUid, ref }]);\n      this.plotRefs = plotRefs;\n    }\n  }\n\n  renderSignalPlot(plottedSignals, index) {\n    const { draggingSignal, graphToReceiveDrop } = this.state;\n    const { messageId, signalUid } = plottedSignals[0];\n    const msg = this.props.messages[messageId];\n    const signal = Object.values(msg.frame.signals).find(\n      (s) => s.uid === signalUid\n    );\n\n    if (!this.plotListRef) {\n      return [];\n    }\n\n    const isDragging = draggingSignal.signalUid === signalUid\n      && draggingSignal.messageId === messageId;\n    const canReceiveGraphDrop = graphToReceiveDrop\n      && graphToReceiveDrop.signalUid === signalUid\n      && graphToReceiveDrop.messageId === messageId;\n    plottedSignals = plottedSignals.map((plottedSignal) => ({\n      messageName: this.props.messages[plottedSignal.messageId].frame.name,\n      ...plottedSignal\n    }));\n    const key = plottedSignals.reduce(\n      (key, { messageId, signalUid }) => `${key + messageId}_${signalUid}`,\n      ''\n    );\n    return (\n      <CanGraph\n        onGraphRefAvailable={(ref) => {\n          this.addCanGraphRef(ref, messageId, signalUid);\n        }}\n        key={key}\n        unplot={this.props.onSignalUnplotPressed}\n        messages={this.props.messages}\n        messageId={messageId}\n        messageName={msg.frame ? msg.frame.name : null}\n        signalSpec={Object.assign(Object.create(signal), signal)}\n        onSegmentChanged={this.props.onSegmentChanged}\n        segment={this.props.segment}\n        onRelativeTimeClick={this.props.onGraphTimeClick}\n        currentTime={this.props.seekTime}\n        onDragStart={this.onGraphDragStart}\n        onDragEnd={this.onGraphDragEnd}\n        container={this.plotListRef}\n        dragPos={isDragging ? this.state.dragPos : null}\n        canReceiveGraphDrop={canReceiveGraphDrop}\n        plottedSignals={plottedSignals}\n        live={this.props.live}\n      />\n    );\n  }\n\n  onPlotListRefReady(ref) {\n    this.plotListRef = ref;\n  }\n\n  render() {\n    return (\n      <div\n        className=\"cabana-explorer-visuals-plots\"\n        ref={this.onPlotListRefReady}\n        onMouseMove={this.onMouseMove}\n        onMouseLeave={this.onGraphDragEnd}\n        onMouseUp={this.onGraphDragEnd}\n      >\n        {this.props.plottedSignals.map(this.renderSignalPlot)}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Hls from '@commaai/hls.js';\n\nexport default class HLS extends Component {\n  static propTypes = {\n    source: PropTypes.string.isRequired,\n    startTime: PropTypes.number.isRequired,\n    playbackSpeed: PropTypes.number.isRequired,\n    playing: PropTypes.bool.isRequired,\n    onVideoElementAvailable: PropTypes.func,\n    onClick: PropTypes.func,\n    onLoadStart: PropTypes.func,\n    onLoadEnd: PropTypes.func,\n    onPlaySeek: PropTypes.func,\n    segmentProgress: PropTypes.func,\n    shouldRestart: PropTypes.bool,\n    onRestart: PropTypes.func\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.videoElement.playbackRate = nextProps.playbackSpeed;\n\n    if (nextProps.source !== this.props.source) {\n      this.loadSource(nextProps.source);\n    }\n    if (nextProps.playing) {\n      if (\n        this.videoElement\n        && (this.videoElement.paused || this.videoElement.currentTime < 0.01)\n      ) {\n        this.videoElement.play();\n      }\n    } else {\n      this.videoElement.pause();\n    }\n  }\n\n  componentDidMount() {\n    this.player = new Hls({\n      enableWorker: false,\n      disablePtsDtsCorrectionInMp4Remux: true\n    });\n    this.loadSource();\n  }\n\n  onSeeking = () => {\n    if (!this.props.playing) {\n      this.props.onLoadStart();\n      this.props.onPlaySeek(this.videoElement.currentTime);\n    }\n  };\n\n  // legacy outer scope variable. Revisit this to see if putting in state\n  // makes more sense\n  shouldInitVideoTime = true;\n\n  onSeeked = () => {\n    if (!this.props.playing) {\n      if (this.shouldInitVideoTime) {\n        this.videoElement.currentTime = this.props.startTime;\n        this.shouldInitVideoTime = false;\n      }\n      this.props.onLoadEnd();\n    }\n  };\n\n  loadSource(source = this.props.source) {\n    if (this.videoElement) {\n      this.player.loadSource(source);\n      this.player.attachMedia(this.videoElement);\n      this.props.onVideoElementAvailable(this.videoElement);\n      this.videoElement.currentTime = this.props.startTime;\n    }\n  }\n\n  componentWillUnmount() {\n    // destroy hls video source\n    if (this.player) {\n      this.player.destroy();\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"cabana-explorer-visuals-camera-wrapper\"\n        onClick={this.props.onClick}\n      >\n        <video\n          ref={(video) => {\n            this.videoElement = video;\n          }}\n          autoPlay={this.props.playing}\n          muted\n          onWaiting={this.props.onLoadStart}\n          onPlaying={this.props.onLoadEnd}\n          onSeeking={this.onSeeking}\n          onSeeked={this.onSeeked}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class PlayButton extends Component {\n  static propTypes = {\n    onPlay: PropTypes.func,\n    onPause: PropTypes.func,\n    isPlaying: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { hover: false };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  imageSource() {\n    const { hover } = this.state;\n    const { isPlaying } = this.props;\n    if (isPlaying) {\n      if (hover) {\n        return `${process.env.PUBLIC_URL}/img/ic_pause_circle_filled_white_24px.svg`;\n      }\n      return `${process.env.PUBLIC_URL}/img/ic_pause_circle_outline_white_24px.svg`;\n    }\n    if (hover) {\n      return `${process.env.PUBLIC_URL}/img/ic_play_circle_filled_white_24px.svg`;\n    }\n    return `${process.env.PUBLIC_URL}/img/ic_play_circle_outline_white_24px.svg`;\n  }\n\n  onClick(e) {\n    const { isPlaying } = this.props;\n\n    if (!isPlaying) {\n      this.props.onPlay();\n    } else {\n      this.props.onPause();\n    }\n  }\n\n  render() {\n    return (\n      <img\n        src={this.imageSource()}\n        alt={this.props.isPlaying ? 'Pause' : 'Play'}\n        className={this.props.className}\n        onClick={this.onClick}\n        onMouseOver={() => this.setState({ hover: true })}\n        onMouseLeave={() => this.setState({ hover: false })}\n      />\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PlayButton from '../PlayButton';\nimport debounce from '../../utils/debounce';\n\nexport default class RouteSeeker extends Component {\n  static propTypes = {\n    videoLength: PropTypes.number.isRequired,\n    segmentIndices: PropTypes.arrayOf(PropTypes.number),\n    onUserSeek: PropTypes.func,\n    onPlaySeek: PropTypes.func,\n    video: PropTypes.node,\n    onPause: PropTypes.func,\n    onPlay: PropTypes.func,\n    playing: PropTypes.bool,\n    segmentProgress: PropTypes.func,\n    ratioTime: PropTypes.func,\n    nearestFrameTime: PropTypes.number\n  };\n\n  static hiddenMarkerStyle = { display: 'none', left: 0 };\n\n  static zeroSeekedBarStyle = { width: 0 };\n\n  static hiddenTooltipStyle = { display: 'none', left: 0 };\n\n  static markerWidth = 20;\n\n  static tooltipWidth = 50;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      seekedBarStyle: RouteSeeker.zeroSeekedBarStyle,\n      markerStyle: RouteSeeker.hiddenMarkerStyle,\n      tooltipStyle: RouteSeeker.hiddenTooltipStyle,\n      ratio: 0,\n      tooltipTime: '0:00',\n      isPlaying: false,\n      isDragging: false\n    };\n\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.onPlay = this.onPlay.bind(this);\n    this.onPause = this.onPause.bind(this);\n    this.executePlayTimer = this.executePlayTimer.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { ratio } = this.state;\n\n    if (\n      JSON.stringify(this.props.segmentIndices)\n      !== JSON.stringify(nextProps.segmentIndices)\n    ) {\n      this.setState({\n        seekedBarStyle: RouteSeeker.zeroSeekedBarStyle,\n        markerStyle: RouteSeeker.hiddenMarkerStyle,\n        ratio: 0\n      });\n    } else if (nextProps.videoLength !== this.props.videoLength) {\n      // adjust ratio in line with new videoLength\n      const secondsSeeked = ratio * this.props.videoLength;\n      const newRatio = secondsSeeked / nextProps.videoLength;\n      this.updateSeekedBar(newRatio);\n    }\n\n    if (this.props.nearestFrameTime !== nextProps.nearestFrameTime) {\n      const newRatio = this.props.segmentProgress(nextProps.nearestFrameTime);\n      this.updateSeekedBar(newRatio);\n    }\n\n    if (nextProps.playing && !this.state.isPlaying) {\n      this.onPlay();\n    } else if (!nextProps.playing && this.state.isPlaying) {\n      this.onPause();\n    }\n  }\n\n  componentWillUnmount() {\n    window.cancelAnimationFrame(this.playTimer);\n  }\n\n  mouseEventXOffsetPercent(e) {\n    const rect = this.progressBar.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n\n    return 100 * (x / this.progressBar.offsetWidth);\n  }\n\n  updateDraggingSeek = debounce((ratio) => this.props.onUserSeek(ratio), 250);\n\n  onMouseMove(e) {\n    const markerOffsetPct = this.mouseEventXOffsetPercent(e);\n    if (markerOffsetPct < 0) {\n      this.onMouseLeave();\n      return;\n    }\n    const { markerWidth } = RouteSeeker;\n\n    const markerLeft = `calc(${`${markerOffsetPct}%`} - ${markerWidth / 2}px)`;\n    const markerStyle = {\n      display: '',\n      left: markerLeft\n    };\n    const { tooltipWidth } = RouteSeeker;\n    const tooltipLeft = `calc(${`${markerOffsetPct}%`} - ${tooltipWidth\n      / 2}px)`;\n\n    const tooltipStyle = { display: 'flex', left: tooltipLeft };\n    const ratio = Math.max(0, markerOffsetPct / 100);\n    if (this.state.isDragging) {\n      this.updateSeekedBar(ratio);\n      this.updateDraggingSeek(ratio);\n    }\n\n    this.setState({\n      markerStyle,\n      tooltipStyle,\n      tooltipTime: this.props.ratioTime(ratio).toFixed(3)\n    });\n  }\n\n  onMouseLeave(e) {\n    this.setState({\n      markerStyle: RouteSeeker.hiddenMarkerStyle,\n      tooltipStyle: RouteSeeker.hiddenTooltipStyle,\n      isDragging: false\n    });\n  }\n\n  updateSeekedBar(ratio) {\n    const seekedBarStyle = { width: `${100 * ratio}%` };\n    this.setState({ seekedBarStyle, ratio });\n  }\n\n  onClick(e) {\n    let ratio = this.mouseEventXOffsetPercent(e) / 100;\n    ratio = Math.min(1, Math.max(0, ratio));\n    this.updateSeekedBar(ratio);\n    this.props.onUserSeek(ratio);\n  }\n\n  onPlay() {\n    this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n    let { ratio } = this.state;\n    if (ratio >= 1) {\n      ratio = 0;\n    }\n    this.setState({ isPlaying: true, ratio });\n    this.props.onPlay();\n  }\n\n  executePlayTimer() {\n    const { videoElement } = this.props;\n    if (videoElement === null) {\n      this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n      return;\n    }\n\n    let { videoLength, startTime } = this.props;\n    let { currentTime, duration } = videoElement;\n\n    currentTime = roundTime(currentTime);\n    startTime = roundTime(startTime);\n    videoLength = roundTime(videoLength);\n    duration = roundTime(duration);\n\n    let newRatio = (currentTime - startTime) / videoLength;\n\n    if (newRatio === this.state.ratio) {\n      this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n      return;\n    }\n\n    if (newRatio >= 1 || newRatio < 0) {\n      newRatio = 0;\n      currentTime = startTime;\n      this.props.onUserSeek(newRatio);\n    }\n\n    if (newRatio >= 0) {\n      this.updateSeekedBar(newRatio);\n      this.props.onPlaySeek(currentTime);\n    }\n\n    this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n  }\n\n  onPause() {\n    window.cancelAnimationFrame(this.playTimer);\n    this.setState({ isPlaying: false });\n    this.props.onPause();\n  }\n\n  onMouseDown() {\n    if (!this.state.isDragging) {\n      this.setState({ isDragging: true });\n    }\n  }\n\n  onMouseUp() {\n    if (this.state.isDragging) {\n      this.setState({ isDragging: false });\n    }\n  }\n\n  render() {\n    const { seekedBarStyle, markerStyle, tooltipStyle } = this.state;\n    return (\n      <div className=\"cabana-explorer-visuals-camera-seeker\">\n        <PlayButton\n          className=\"cabana-explorer-visuals-camera-seeker-playbutton\"\n          onPlay={this.onPlay}\n          onPause={this.onPause}\n          isPlaying={this.state.isPlaying}\n        />\n        <div\n          className=\"cabana-explorer-visuals-camera-seeker-progress\"\n          onMouseMove={this.onMouseMove}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onMouseDown}\n          onMouseUp={this.onMouseUp}\n          onClick={this.onClick}\n          ref={(ref) => (this.progressBar = ref)}\n        >\n          <div\n            className=\"cabana-explorer-visuals-camera-seeker-progress-tooltip\"\n            style={tooltipStyle}\n          >\n            {this.state.tooltipTime}\n          </div>\n          <div\n            className=\"cabana-explorer-visuals-camera-seeker-progress-marker\"\n            style={markerStyle}\n          />\n          <div\n            className=\"cabana-explorer-visuals-camera-seeker-progress-inner\"\n            style={seekedBarStyle}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction roundTime(time) {\n  return Math.round(time * 1000) / 1000;\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { StyleSheet, css } from 'aphrodite/no-important';\nimport { derived as RouteApi, video as VideoApi } from '@commaai/comma-api';\n\nimport HLS from './HLS';\nimport RouteSeeker from './RouteSeeker/RouteSeeker';\n\nconst Styles = StyleSheet.create({\n  loadingOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 3\n  },\n  loadingSpinner: {\n    width: '25%',\n    height: '25%',\n    display: 'block'\n  },\n  img: {\n    height: 480,\n    display: 'block',\n    position: 'absolute',\n    zIndex: 2\n  },\n  hls: {\n    zIndex: 1,\n    height: 480,\n    backgroundColor: 'rgba(0,0,0,0.9)'\n  },\n  seekBar: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    width: '100%',\n    zIndex: 4\n  }\n});\n\nexport default class RouteVideoSync extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shouldShowJpeg: true,\n      isLoading: true,\n      videoElement: null,\n      shouldRestartHls: false\n    };\n\n    this.onLoadStart = this.onLoadStart.bind(this);\n    this.onLoadEnd = this.onLoadEnd.bind(this);\n    this.segmentProgress = this.segmentProgress.bind(this);\n    this.onVideoElementAvailable = this.onVideoElementAvailable.bind(this);\n    this.onUserSeek = this.onUserSeek.bind(this);\n    this.onPlaySeek = this.onPlaySeek.bind(this);\n    this.onHlsRestart = this.onHlsRestart.bind(this);\n    this.ratioTime = this.ratioTime.bind(this);\n  }\n\n  componentDidUpdate(nextProps) {\n    const {\n      userSeekIndex,\n      message,\n      canFrameOffset,\n      userSeekTime\n    } = this.props;\n    const { videoElement } = this.state;\n    if (\n      userSeekIndex !== nextProps.userSeekIndex\n      || canFrameOffset !== nextProps.canFrameOffset\n      || (message\n        && nextProps.message\n        && message.entries.length !== nextProps.message.entries.length)\n    ) {\n      this.setState({ shouldRestartHls: true });\n    }\n    if (\n      nextProps.userSeekTime\n      && userSeekTime !== nextProps.userSeekTime\n    ) {\n      if (videoElement) {\n        videoElement.currentTime = nextProps.userSeekTime;\n      }\n    }\n  }\n\n  onVideoElementAvailable(videoElement) {\n    this.setState({ videoElement });\n  }\n\n  onUserSeek(ratio) {\n    /* ratio in [0,1] */\n\n    const { videoElement } = this.state;\n    const { onUserSeek } = this.props;\n    const seekTime = this.ratioTime(ratio);\n    const funcSeekToRatio = () => onUserSeek(seekTime);\n\n    if (Number.isNaN(videoElement.duration)) {\n      this.setState({ shouldRestartHls: true }, funcSeekToRatio);\n      return;\n    }\n    videoElement.currentTime = seekTime;\n\n    if (ratio === 0) {\n      this.setState({ shouldRestartHls: true }, funcSeekToRatio);\n    } else {\n      funcSeekToRatio();\n    }\n  }\n\n  onHlsRestart() {\n    this.setState({ shouldRestartHls: false });\n  }\n\n  onPlaySeek(offset) {\n    const { onPlaySeek } = this.props;\n    this.seekTime = offset;\n    onPlaySeek(offset);\n  }\n\n  onLoadStart() {\n    this.setState({\n      shouldShowJpeg: true,\n      isLoading: true\n    });\n  }\n\n  onLoadEnd() {\n    this.setState({\n      shouldShowJpeg: false,\n      isLoading: false\n    });\n  }\n\n  loadingOverlay() {\n    return (\n      <div className={css(Styles.loadingOverlay)}>\n        <img\n          className={css(Styles.loadingSpinner)}\n          src={`${process.env.PUBLIC_URL}/img/loading.svg`}\n          alt=\"Loading video\"\n        />\n      </div>\n    );\n  }\n\n  videoLength() {\n    if (this.props.segment.length) {\n      return this.props.segment[1] - this.props.segment[0];\n    }\n\n    if (this.state.videoElement) {\n      return this.state.videoElement.duration;\n    }\n\n    return 0;\n  }\n\n  startTime() {\n    if (this.props.segment.length) {\n      return this.props.segment[0];\n    }\n\n    return 0;\n  }\n\n  segmentProgress(currentTime) {\n    // returns progress as number in [0,1]\n    const startTime = this.startTime();\n\n    if (currentTime < startTime) {\n      currentTime = startTime;\n    }\n\n    const ratio = (currentTime - startTime) / this.videoLength();\n    return Math.max(0, Math.min(1, ratio));\n  }\n\n  ratioTime(ratio) {\n    return ratio * this.videoLength() + this.startTime();\n  }\n\n  nearestFrameUrl() {\n    const { thumbnails } = this.props;\n    if (!this.seekTime) {\n      return '';\n    }\n    for (let i = 0, l = thumbnails.length; i < l; ++i) {\n      if (Math.abs(thumbnails[i].monoTime - this.seekTime) < 5) {\n        const data = btoa(String.fromCharCode(...thumbnails[i].data));\n        return `data:image/jpeg;base64,${data}`;\n      }\n    }\n    return '';\n  }\n\n  render() {\n    const {\n      isLoading,\n      shouldRestartHls,\n      shouldShowJpeg,\n      videoElement\n    } = this.state;\n    const {\n      userSeekTime,\n      url,\n      playSpeed,\n      playing,\n      onVideoClick,\n      segmentIndices,\n      startTime\n    } = this.props;\n    return (\n      <div className=\"cabana-explorer-visuals-camera\">\n        {isLoading ? this.loadingOverlay() : null}\n        {shouldShowJpeg ? (\n          <img\n            src={this.nearestFrameUrl()}\n            className={css(Styles.img)}\n            alt={`Camera preview at t = ${Math.round(userSeekTime)}`}\n          />\n        ) : null}\n        <HLS\n          className={css(Styles.hls)}\n          source={VideoApi(\n            url,\n            process.env.REACT_APP_VIDEO_CDN\n          ).getRearCameraStreamIndexUrl()}\n          startTime={startTime || 0}\n          videoLength={this.videoLength()}\n          playbackSpeed={playSpeed}\n          onVideoElementAvailable={this.onVideoElementAvailable}\n          playing={playing}\n          onClick={onVideoClick}\n          onLoadStart={this.onLoadStart}\n          onLoadEnd={this.onLoadEnd}\n          onUserSeek={this.onUserSeek}\n          onPlaySeek={this.onPlaySeek}\n          segmentProgress={this.segmentProgress}\n          shouldRestart={shouldRestartHls}\n          onRestart={this.onHlsRestart}\n        />\n        <RouteSeeker\n          className={css(Styles.seekBar)}\n          nearestFrameTime={userSeekTime}\n          segmentProgress={this.segmentProgress}\n          startTime={this.startTime()}\n          videoLength={this.videoLength()}\n          segmentIndices={segmentIndices}\n          onUserSeek={this.onUserSeek}\n          onPlaySeek={this.onPlaySeek}\n          videoElement={videoElement}\n          onPlay={this.props.onPlay}\n          onPause={this.props.onPause}\n          playing={this.props.playing}\n          ratioTime={this.ratioTime}\n        />\n      </div>\n    );\n  }\n}\n\nRouteVideoSync.propTypes = {\n  userSeekIndex: PropTypes.number.isRequired,\n  segment: PropTypes.array.isRequired,\n  message: PropTypes.object,\n  thumbnails: PropTypes.array,\n  canFrameOffset: PropTypes.number.isRequired,\n  url: PropTypes.string.isRequired,\n  playing: PropTypes.bool.isRequired,\n  onPlaySeek: PropTypes.func.isRequired,\n  onUserSeek: PropTypes.func.isRequired,\n  onPlay: PropTypes.func.isRequired,\n  onPause: PropTypes.func.isRequired,\n  userSeekTime: PropTypes.number.isRequired,\n  playSpeed: PropTypes.number.isRequired,\n  onVideoClick: PropTypes.func,\n  segmentIndices: PropTypes.array,\n  startTime: PropTypes.number\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactList from 'react-list';\n\nimport cx from 'classnames';\n\nexport default class CanLog extends Component {\n  static ITEMS_PER_PAGE = 50;\n\n  static propTypes = {\n    plottedSignals: PropTypes.array,\n    segmentIndices: PropTypes.array,\n    onSignalUnplotPressed: PropTypes.func,\n    onSignalPlotPressed: PropTypes.func,\n    message: PropTypes.object,\n    messageIndex: PropTypes.number,\n    onMessageExpanded: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    // only want to display up to length elements at a time\n    // offset, length\n\n    this.state = {\n      length: 0,\n      expandedMessages: [],\n      messageHeights: [],\n      allPacketsExpanded: false\n    };\n\n    this.renderLogListItemMessage = this.renderLogListItemMessage.bind(this);\n    this.addDisplayedMessages = this.addDisplayedMessages.bind(this);\n    this.renderLogListItem = this.renderLogListItem.bind(this);\n    this.renderLogList = this.renderLogList.bind(this);\n    this.onExpandAllChanged = this.onExpandAllChanged.bind(this);\n    this.toggleExpandAllPackets = this.toggleExpandAllPackets.bind(this);\n    this.toggleSignalPlot = this.toggleSignalPlot.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.message && !this.props.message) {\n      this.addDisplayedMessages();\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const curMessageLength = this.props.message\n      ? this.props.message.entries.length\n      : 0;\n    const nextMessageLength = nextProps.message\n      ? nextProps.message.entries.length\n      : 0;\n\n    const shouldUpdate = this.props.message !== nextProps.message\n      || nextMessageLength !== curMessageLength\n      || nextProps.messageIndex !== this.props.messageIndex\n      || nextProps.plottedSignals.length !== this.props.plottedSignals.length\n      || JSON.stringify(nextProps.segmentIndices)\n        !== JSON.stringify(this.props.segmentIndices)\n      || JSON.stringify(nextState) !== JSON.stringify(this.state)\n      || this.props.message !== nextProps.message\n      || (this.props.message !== undefined\n        && nextProps.message !== undefined\n        && this.props.message.frame !== undefined\n        && nextProps.message.frame !== undefined\n        && JSON.stringify(this.props.message.frame)\n          !== JSON.stringify(nextProps.message.frame));\n\n    return shouldUpdate;\n  }\n\n  addDisplayedMessages() {\n    const { length } = this.state;\n    const newLength = length + CanLog.ITEMS_PER_PAGE;\n\n    this.setState({ length: newLength });\n  }\n\n  expandMessage(msg, msgIdx) {\n    this.setState({\n      expandedMessages: this.state.expandedMessages.concat([msg.time])\n    });\n    this.props.onMessageExpanded();\n  }\n\n  collapseMessage(msg, msgIdx) {\n    this.setState({\n      expandedMessages: this.state.expandedMessages.filter(\n        (expMsgTime) => expMsgTime !== msg.time\n      )\n    });\n  }\n\n  isSignalPlotted(msgId, signalUid) {\n    const plottedSignal = this.props.plottedSignals.find((plot) => plot.some(\n      (signal) => signal.messageId === msgId && signal.signalUid === signalUid\n    ));\n    return plottedSignal !== undefined;\n  }\n\n  signalValuePretty(signal, value) {\n    if (signal.isFloat) {\n      return value.toFixed(3);\n    }\n    return value;\n  }\n\n  isMessageExpanded(msg) {\n    return this.state.expandedMessages.indexOf(msg.time) !== -1;\n  }\n\n  toggleSignalPlot(msg, signalUid, plotted) {\n    if (!plotted) {\n      this.props.onSignalPlotPressed(msg, signalUid);\n    } else {\n      this.props.onSignalUnplotPressed(msg, signalUid);\n    }\n  }\n\n  toggleExpandPacketSignals(msgEntry) {\n    if (!this.props.message.frame) {\n      return;\n    }\n    const msgIsExpanded = this.state.allPacketsExpanded || this.isMessageExpanded(msgEntry);\n\n    const msgHasSignals = Object.keys(this.props.message.frame.signals).length > 0;\n    if (msgIsExpanded && msgHasSignals) {\n      this.setState({\n        expandedMessages: this.state.expandedMessages.filter(\n          (expMsgTime) => expMsgTime !== msgEntry.time\n        )\n      });\n    } else if (msgHasSignals) {\n      this.setState({\n        expandedMessages: this.state.expandedMessages.concat([msgEntry.time])\n      });\n      this.props.onMessageExpanded();\n    } else {\n    }\n  }\n\n  renderLogListItemSignals(msgEntry) {\n    const { message } = this.props;\n    return (\n      <div className=\"signals-log-list-signals\">\n        {Object.entries(msgEntry.signals).map(([name, value]) => {\n          const signal = message.frame.signals[name];\n          if (signal === undefined) {\n            // Signal removed?\n            return null;\n          }\n          const unit = signal.unit.length > 0 ? signal.unit : 'units';\n          const isPlotted = this.isSignalPlotted(message.id, signal.uid);\n          const plottedButtonClass = isPlotted ? null : 'button--alpha';\n          const plottedButtonText = isPlotted ? 'Hide Plot' : 'Show Plot';\n          return (\n            <div key={name} className=\"signals-log-list-signal\">\n              <div className=\"signals-log-list-signal-message\">\n                <span>{name}</span>\n              </div>\n              <div className=\"signals-log-list-signal-value\">\n                <span>\n                  (\n                  <strong>{this.signalValuePretty(signal, value)}</strong>\n                  {' '}\n                  {unit}\n)\n                </span>\n              </div>\n              <div\n                className=\"signals-log-list-signal-action\"\n                onClick={() => {\n                  this.toggleSignalPlot(message.id, signal.uid, isPlotted);\n                }}\n              >\n                <button className={cx('button--tiny', plottedButtonClass)}>\n                  <span>{plottedButtonText}</span>\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  renderLogListItemMessage(msgEntry, key) {\n    const { message } = this.props;\n    const msgIsExpanded = this.state.allPacketsExpanded || this.isMessageExpanded(msgEntry);\n    const msgHasSignals = Object.keys(msgEntry.signals).length > 0;\n    const hasSignalsClass = msgHasSignals ? 'has-signals' : null;\n    const expandedClass = msgIsExpanded ? 'is-expanded' : null;\n    const row = (\n      <div\n        key={key}\n        className={cx('signals-log-list-item', hasSignalsClass, expandedClass)}\n      >\n        <div\n          className=\"signals-log-list-item-header\"\n          onClick={() => {\n            this.toggleExpandPacketSignals(msgEntry);\n          }}\n        >\n          <div className=\"signals-log-list-message\">\n            <strong>\n              {(message.frame ? message.frame.name : null) || message.id}\n            </strong>\n          </div>\n          <div className=\"signals-log-list-time\">\n            <span>\n[\n              {msgEntry.relTime.toFixed(3)}\n]\n            </span>\n          </div>\n          <div className=\"signals-log-list-bytes\">\n            <span className=\"t-mono\">{msgEntry.hexData}</span>\n          </div>\n        </div>\n        <div className=\"signals-log-list-item-body\">\n          {msgIsExpanded ? this.renderLogListItemSignals(msgEntry) : null}\n        </div>\n      </div>\n    );\n\n    return row;\n  }\n\n  renderLogListItem(index, key) {\n    let offset = this.props.messageIndex;\n    if (offset === 0 && this.props.segmentIndices.length === 2) {\n      offset = this.props.segmentIndices[0];\n    }\n    if (offset + index < 0) {\n      debugger;\n    }\n    if (offset + index < this.props.message.entries.length) {\n      return this.renderLogListItemMessage(\n        this.props.message.entries[offset + index],\n        key\n      );\n    }\n    return null;\n  }\n\n  renderLogList(items, ref) {\n    return (\n      <div className=\"signals-log-list\">\n        <div className=\"signals-log-list-header\">\n          <div className=\"signals-log-list-message\">Message</div>\n          <div className=\"signals-log-list-time\">Time</div>\n          <div className=\"signals-log-list-bytes\">Bytes</div>\n        </div>\n        <div className=\"signals-log-list-items\" ref={ref}>\n          {items}\n        </div>\n      </div>\n    );\n  }\n\n  listLength() {\n    const { segmentIndices, messageIndex } = this.props;\n    if (messageIndex > 0) {\n      return this.props.message.entries.length - messageIndex;\n    }\n    if (segmentIndices.length === 2) {\n      return segmentIndices[1] - segmentIndices[0];\n    }\n    if (this.props.message) {\n      return this.props.message.entries.length;\n    }\n    // no message yet\n    return 0;\n  }\n\n  onExpandAllChanged(e) {\n    this.setState({ allPacketsExpanded: e.target.checked });\n  }\n\n  toggleExpandAllPackets() {\n    this.setState({ allPacketsExpanded: !this.state.allPacketsExpanded });\n  }\n\n  render() {\n    const expandAllText = this.state.allPacketsExpanded\n      ? 'Collapse All'\n      : 'Expand All';\n    const expandAllClass = this.state.allPacketsExpanded\n      ? null\n      : 'button--alpha';\n    return (\n      <div className=\"cabana-explorer-signals-log\">\n        <div className=\"cabana-explorer-signals-log-header\">\n          <strong>Message Packets</strong>\n          <button\n            className={cx('button--tiny', expandAllClass)}\n            onClick={this.toggleExpandAllPackets}\n          >\n            {expandAllText}\n          </button>\n        </div>\n        <div className=\"cabana-explorer-signals-log-body\">\n          <ReactList\n            itemRenderer={this.renderLogListItem}\n            itemsRenderer={this.renderLogList}\n            length={this.listLength()}\n            pageSize={50}\n            updateWhenThisValueChanges={this.props.messageIndex}\n            type=\"variable\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","function findTimeIndex(entries, time) {\n  return entries.findIndex((e) => e.time >= time);\n}\n\nfunction findRelativeTimeIndex(entries, relTime) {\n  return entries.findIndex((e) => e.relTime >= relTime);\n}\n\nfunction findSegmentIndices(\n  entries,\n  [segmentTimeLow, segmentTimeHi],\n  isRelative\n) {\n  /*\n    Finds pair of indices (inclusive, exclusive) within entries array\n    whose timestamps match segmentTimeLow and segmentTimeHi.\n    if isRelative === true, then the segment times\n    are assumed to correspond to the `relTime` field of each entry.\n\n    Returns `[segmentIdxLow, segmentIdxHigh]`\n             (inclusive, exclusive)\n    */\n  const timeIndexFunc = isRelative === true ? findRelativeTimeIndex : findTimeIndex;\n\n  const segmentIdxLow = Math.max(0, timeIndexFunc(entries, segmentTimeLow));\n\n  const upperSegments = entries.slice(segmentIdxLow);\n  const upperSegmentIdxHi = timeIndexFunc(upperSegments, segmentTimeHi);\n  const segmentIdxHi = upperSegmentIdxHi >= 0\n    ? upperSegmentIdxHi + segmentIdxLow + 1\n    : entries.length - 1;\n\n  return [\n    segmentIdxLow,\n    Math.max(0, Math.min(segmentIdxHi, entries.length - 1))\n  ];\n}\n\nexport default { findTimeIndex, findRelativeTimeIndex, findSegmentIndices };\n","import React, { Component } from 'react';\n\nexport default class PlaySpeedSelector extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(value) {\n    if (this.props.onPlaySpeedChanged) {\n      this.props.onPlaySpeedChanged(Number(value.currentTarget.value));\n    }\n  }\n\n  render() {\n    return (\n      <div\n        style={{\n          display: 'inline-block',\n          float: 'right',\n          margin: 10\n        }}\n      >\n        <label>Play speed:&nbsp;</label>\n        <select\n          id=\"playSpeed\"\n          style={{\n            width: 70\n          }}\n          onChange={this.onChange}\n          value={this.props.playSpeed}\n        >\n          <option value=\"0.1\">0.1x</option>\n          <option value=\"0.5\">0.5x</option>\n          <option value=\"1\">1x</option>\n          <option value=\"2\">2x</option>\n        </select>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport cx from 'classnames';\n\nimport AddSignals from './AddSignals';\nimport CanGraphList from './CanGraphList';\nimport RouteVideoSync from './RouteVideoSync';\nimport CanLog from './CanLog';\nimport Entries from '../models/can/entries';\nimport debounce from '../utils/debounce';\nimport PlaySpeedSelector from './PlaySpeedSelector';\n\nfunction clipSegment(_segment, _segmentIndices, nextMessage) {\n  let segment = _segment;\n  let segmentIndices = _segmentIndices;\n  if (segment.length === 2) {\n    const segmentStartIdx = nextMessage.entries.findIndex(\n      (e) => e.relTime >= segment[0]\n    );\n    let segmentEndIdx = nextMessage.entries.findIndex(\n      (e) => e.relTime >= segment[1]\n    );\n    if (segmentStartIdx !== -1) {\n      if (segmentEndIdx === -1) {\n        // previous segment end is past bounds of this message\n        segmentEndIdx = nextMessage.entries.length - 1;\n      }\n      const segmentStartTime = nextMessage.entries[segmentStartIdx].relTime;\n      const segmentEndTime = nextMessage.entries[segmentEndIdx].relTime;\n\n      segment = [segmentStartTime, segmentEndTime];\n      segmentIndices = [segmentStartIdx, segmentEndIdx];\n    } else {\n      // segment times are out of boudns for this message\n      segment = [];\n      segmentIndices = [];\n    }\n  }\n\n  return { segment, segmentIndices };\n}\n\nexport default class Explorer extends Component {\n  updateSegment = debounce((messageId, _segment) => {\n    let segment = _segment;\n    const { messages, selectedMessage, currentParts } = this.props;\n    const { entries } = messages[selectedMessage];\n    let segmentIndices = Entries.findSegmentIndices(entries, segment, true);\n\n    // console.log(this.state.segment, '->', segment, segmentIndices);\n    if (\n      segment[0] === currentParts[0] * 60\n      && segment[1] === (currentParts[1] + 1) * 60\n    ) {\n      segment = [];\n      segmentIndices = [];\n    }\n    this.setState({\n      segment,\n      segmentIndices,\n      userSeekIndex: segmentIndices[0],\n      userSeekTime: segment[0] || 0\n    });\n  }, 250);\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      plottedSignals: [],\n      segment: props.startSegments || [],\n      segmentIndices: [],\n      shouldShowAddSignal: true,\n      userSeekIndex: 0,\n      userSeekTime: 0,\n      playing: props.autoplay,\n      playSpeed: 1\n    };\n\n    this.onSignalPlotPressed = this.onSignalPlotPressed.bind(this);\n    this.onSignalUnplotPressed = this.onSignalUnplotPressed.bind(this);\n    this.onSegmentChanged = this.onSegmentChanged.bind(this);\n    this.showAddSignal = this.showAddSignal.bind(this);\n    this.onGraphTimeClick = this.onGraphTimeClick.bind(this);\n    this.onUserSeek = this.onUserSeek.bind(this);\n    this.onPlaySeek = this.onPlaySeek.bind(this);\n    this.onPlay = this.onPlay.bind(this);\n    this.onPause = this.onPause.bind(this);\n    this.onVideoClick = this.onVideoClick.bind(this);\n    this.onSignalPlotChange = this.onSignalPlotChange.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.mergePlots = this.mergePlots.bind(this);\n    this.toggleShouldShowAddSignal = this.toggleShouldShowAddSignal.bind(this);\n    this.changePlaySpeed = this.changePlaySpeed.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (e.keyCode === 27) {\n      // escape\n      this.resetSegment();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextMessage = nextProps.messages[nextProps.selectedMessage];\n    const curMessage = this.props.messages[this.props.selectedMessage];\n    let { plottedSignals } = this.state;\n\n    if (Object.keys(nextProps.messages).length === 0 && Object.keys(this.props.messages).length !== 0) {\n      this.resetSegment();\n    }\n    if (nextMessage && nextMessage.frame && nextMessage !== curMessage) {\n      const nextSignalNames = Object.keys(nextMessage.frame.signals);\n\n      if (nextSignalNames.length === 0) {\n        this.setState({ shouldShowAddSignal: true });\n      }\n    }\n\n    // remove plottedSignals that no longer exist\n    plottedSignals = plottedSignals\n      .map((plot) => plot.filter(({ messageId, signalUid }, index) => {\n        const messageExists = !!nextProps.messages[messageId];\n        let signalExists = true;\n        if (messageExists) {\n          signalExists = Object.values(\n            nextProps.messages[messageId].frame.signals\n          ).some((signal) => signal.uid === signalUid);\n        }\n\n        return messageExists && signalExists;\n      }))\n      .filter((plot) => plot.length > 0);\n\n    this.setState({ plottedSignals });\n\n    if (\n      nextProps.selectedMessage\n      && nextProps.selectedMessage !== this.props.selectedMessage\n    ) {\n      // Update segment and seek state\n      // by finding a entry indices\n      // corresponding to old message segment/seek times.\n\n      const { segment, segmentIndices } = clipSegment(\n        this.state.segment,\n        this.state.segmentIndices,\n        nextMessage\n      );\n\n      const nextSeekMsgEntry = nextMessage.entries[nextProps.seekIndex];\n      let nextSeekTime;\n      if (nextSeekMsgEntry) {\n        nextSeekTime = nextSeekMsgEntry.relTime;\n      } else if (segment.length === 2) {\n        nextSeekTime = segment[0];\n      } else {\n        nextSeekTime = nextMessage.entries[0];\n      }\n      // console.log(this.state.segment, '->', segment, segmentIndices, nextSeekTime);\n      this.setState({\n        segment,\n        segmentIndices,\n        userSeekIndex: nextProps.seekIndex,\n        userSeekTime: nextSeekTime\n      });\n    }\n\n    if (\n      nextMessage\n      && curMessage\n      && nextMessage.entries.length !== curMessage.entries.length\n    ) {\n      const { segment, segmentIndices } = clipSegment(\n        this.state.segment,\n        this.state.segmentIndices,\n        nextMessage\n      );\n      // console.log(this.state.segment, '->', segment, segmentIndices);\n      this.setState({ segment, segmentIndices });\n    }\n  }\n\n  changePlaySpeed(value) {\n    this.setState({\n      playSpeed: value\n    });\n  }\n\n  timeWindow() {\n    const { routeStartTime, currentParts } = this.props;\n\n    if (routeStartTime) {\n      const partStartOffset = currentParts[0] * 60;\n      const partEndOffset = (currentParts[1] + 1) * 60;\n\n      const windowStartTime = routeStartTime\n        .clone()\n        .add(partStartOffset, 's')\n        .format('HH:mm:ss');\n      const windowEndTime = routeStartTime\n        .clone()\n        .add(partEndOffset, 's')\n        .format('HH:mm:ss');\n\n      return `${windowStartTime} - ${windowEndTime}`;\n    }\n    return '';\n  }\n\n  onSignalPlotPressed(messageId, signalUid) {\n    let { plottedSignals } = this.state;\n\n    plottedSignals = [[{ messageId, signalUid }], ...plottedSignals];\n\n    this.setState({ plottedSignals });\n  }\n\n  onSignalUnplotPressed(messageId, signalUid) {\n    const { plottedSignals } = this.state;\n    const newPlottedSignals = plottedSignals\n      .map((plot) => plot.filter(\n        (signal) => !(signal.messageId === messageId && signal.signalUid === signalUid)\n      ))\n      .filter((plot) => plot.length > 0);\n\n    this.setState({ plottedSignals: newPlottedSignals });\n  }\n\n  onSegmentChanged(messageId, segment) {\n    if (Array.isArray(segment)) {\n      this.updateSegment(messageId, segment);\n    }\n  }\n\n  resetSegment() {\n    const { segment, segmentIndices } = this.state;\n    if (segment.length > 0 || segmentIndices.length > 0) {\n      // console.log(this.state.segment, '->', segment, segmentIndices);\n      this.setState({\n        segment: [],\n        segmentIndices: [],\n        userSeekIndex: 0\n      });\n    }\n  }\n\n  showAddSignal() {\n    this.setState({ shouldShowAddSignal: true });\n  }\n\n  toggleShouldShowAddSignal() {\n    this.setState({ shouldShowAddSignal: !this.state.shouldShowAddSignal });\n  }\n\n  indexFromSeekTime(time) {\n    // returns index guaranteed to be in [0, entries.length - 1]\n\n    const { entries } = this.props.messages[this.props.selectedMessage];\n    if (entries.length === 0) return null;\n\n    const { segmentIndices } = this.state;\n    if (segmentIndices.length === 2 && segmentIndices[0] >= 0) {\n      for (\n        let i = segmentIndices[0],\n          l = Math.min(entries.length - 1, segmentIndices[1]);\n        i <= l;\n        i++\n      ) {\n        if (entries[i].relTime >= time) {\n          return i;\n        }\n      }\n      return segmentIndices[1];\n    }\n    for (let i = 0; i < entries.length; i++) {\n      if (entries[i].relTime >= time) {\n        return i;\n      }\n    }\n    return entries.length - 1;\n  }\n\n  onUserSeek(time) {\n    this.setState({ userSeekTime: time });\n    const message = this.props.messages[this.props.selectedMessage];\n\n    this.props.onUserSeek(time);\n    this.setState({ userSeekTime: time });\n  }\n\n  onPlaySeek(time) {\n    const message = this.props.messages[this.props.selectedMessage];\n    if (!message || message.entries.length === 0) {\n      this.props.onSeek(0, time);\n      return;\n    }\n\n    const seekIndex = this.indexFromSeekTime(time);\n    const seekTime = time;\n    this.props.onSeek(seekIndex, seekTime);\n  }\n\n  onGraphTimeClick(messageId, time) {\n    this.onUserSeek(time);\n  }\n\n  onPlay() {\n    this.setState({ playing: true });\n  }\n\n  onPause() {\n    this.setState({ playing: false });\n  }\n\n  secondsLoadedRouteRelative(currentParts) {\n    return (currentParts[1] - currentParts[0] + 1) * 60;\n  }\n\n  secondsLoaded() {\n    return this.props.partsCount * 60;\n  }\n\n  onVideoClick() {\n    const playing = !this.state.playing;\n    this.setState({ playing });\n  }\n\n  seekTime() {\n    const { userSeekIndex } = this.state;\n    const msg = this.props.messages[this.props.selectedMessage];\n    return msg.entries[userSeekIndex].time;\n  }\n\n  onSignalPlotChange(shouldPlot, messageId, signalUid) {\n    if (shouldPlot) {\n      this.onSignalPlotPressed(messageId, signalUid);\n    } else {\n      this.onSignalUnplotPressed(messageId, signalUid);\n    }\n  }\n\n  renderSelectMessagePrompt() {\n    return (\n      <div className=\"cabana-explorer-select-prompt\">\n        <h1>Select a message</h1>\n      </div>\n    );\n  }\n\n  selectedMessagePlottedSignalUids() {\n    const { plottedSignals } = this.state;\n    return plottedSignals\n      .map((plot) => plot\n        .filter(\n          ({ messageId, signalUid }) => messageId === this.props.selectedMessage\n        )\n        .map(({ signalUid }) => signalUid))\n      .reduce((arr, signalUid) => arr.concat(signalUid), []);\n  }\n\n  renderExplorerSignals() {\n    const selectedMessageKey = this.props.selectedMessage;\n    const selectedMessage = this.props.messages[selectedMessageKey];\n    const selectedMessageName = selectedMessage.frame !== undefined\n      ? selectedMessage.frame.name\n      : 'undefined';\n    return (\n      <div className=\"cabana-explorer-signals-wrapper\">\n        <div className=\"cabana-explorer-signals-header\">\n          <div className=\"cabana-explorer-signals-header-context\">\n            <h5 className=\"t-capline\">Selected Message:</h5>\n            <h3>{selectedMessageName}</h3>\n          </div>\n          <div className=\"cabana-explorer-signals-header-action\">\n            <button\n              className=\"button--small\"\n              onClick={() => this.props.showEditMessageModal(selectedMessageKey)}\n            >\n              Edit\n            </button>\n          </div>\n        </div>\n        <div\n          className=\"cabana-explorer-signals-subheader\"\n          onClick={this.toggleShouldShowAddSignal}\n        >\n          <strong>Edit Signals</strong>\n        </div>\n        <div className=\"cabana-explorer-signals-window\">\n          {this.state.shouldShowAddSignal ? (\n            <AddSignals\n              onConfirmedSignalChange={this.props.onConfirmedSignalChange}\n              message={this.props.messages[this.props.selectedMessage]}\n              onClose={() => {\n                this.setState({ shouldShowAddSignal: false });\n              }}\n              messageIndex={this.props.seekIndex}\n              onSignalPlotChange={this.onSignalPlotChange}\n              plottedSignalUids={this.selectedMessagePlottedSignalUids()}\n            />\n          ) : null}\n          <CanLog\n            message={this.props.messages[this.props.selectedMessage]}\n            messageIndex={this.props.seekIndex}\n            segmentIndices={this.state.segmentIndices}\n            plottedSignals={this.state.plottedSignals}\n            onSignalPlotPressed={this.onSignalPlotPressed}\n            onSignalUnplotPressed={this.onSignalUnplotPressed}\n            showAddSignal={this.showAddSignal}\n            onMessageExpanded={this.onPause}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  mergePlots({ fromPlot, toPlot }) {\n    const { plottedSignals } = this.state;\n\n    // remove fromPlot from plottedSignals\n    const fromPlotIdx = plottedSignals.findIndex((plot) => plot.some(\n      (signal) => signal.signalUid === fromPlot.signalUid\n          && signal.messageId === fromPlot.messageId\n    ));\n    plottedSignals.splice(fromPlotIdx, 1);\n\n    const toPlotIdx = plottedSignals.findIndex((plot) => plot.some(\n      (signal) => signal.signalUid === toPlot.signalUid\n          && signal.messageId === toPlot.messageId\n    ));\n    plottedSignals[toPlotIdx] = [fromPlot, toPlot];\n\n    this.setState({ plottedSignals });\n  }\n\n  render() {\n    const signalsExpandedClass = this.state.shouldShowAddSignal\n      ? 'is-expanded'\n      : null;\n\n    const { thumbnails, messages, startTime } = this.props;\n\n    let graphSegment = this.state.segment;\n    if (!graphSegment.length && this.props.currentParts) {\n      graphSegment = [\n        this.props.currentParts[0] * 60,\n        (this.props.currentParts[1] + 1) * 60\n      ];\n    }\n\n    return (\n      <div className=\"cabana-explorer\">\n        <div className={cx('cabana-explorer-signals', signalsExpandedClass)}>\n          {messages[this.props.selectedMessage]\n            ? this.renderExplorerSignals()\n            : this.renderSelectMessagePrompt()}\n        </div>\n        <div className=\"cabana-explorer-visuals\">\n          {this.props.live === false ? (\n            <div>\n              <PlaySpeedSelector\n                playSpeed={this.state.playSpeed}\n                onPlaySpeedChanged={this.changePlaySpeed}\n              />\n              <div className=\"cabana-explorer-visuals-header g-row\" />\n              <br />\n              <RouteVideoSync\n                message={messages[this.props.selectedMessage]}\n                segment={this.state.segment}\n                startTime={startTime}\n                seekIndex={this.props.seekIndex}\n                userSeekIndex={this.state.userSeekIndex}\n                playing={this.state.playing}\n                url={this.props.url}\n                canFrameOffset={this.props.canFrameOffset}\n                firstCanTime={this.props.firstCanTime}\n                onVideoClick={this.onVideoClick}\n                onPlaySeek={this.onPlaySeek}\n                onUserSeek={this.onUserSeek}\n                onPlay={this.onPlay}\n                onPause={this.onPause}\n                userSeekTime={this.state.userSeekTime}\n                playSpeed={this.state.playSpeed}\n                thumbnails={thumbnails}\n              />\n            </div>\n          ) : null}\n          {this.state.segment.length > 0 ? (\n            <div\n              className=\"cabana-explorer-visuals-segmentreset\"\n              onClick={() => {\n                this.resetSegment();\n              }}\n            >\n              <p>Reset Segment</p>\n            </div>\n          ) : null}\n          <CanGraphList\n            plottedSignals={this.state.plottedSignals}\n            messages={messages}\n            onGraphTimeClick={this.onGraphTimeClick}\n            seekTime={this.props.seekTime}\n            onSegmentChanged={this.onSegmentChanged}\n            onSignalUnplotPressed={this.onSignalUnplotPressed}\n            segment={graphSegment}\n            mergePlots={this.mergePlots}\n            live={this.props.live}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nExplorer.propTypes = {\n  selectedMessage: PropTypes.string,\n  url: PropTypes.string,\n  live: PropTypes.bool.isRequired,\n  messages: PropTypes.objectOf(PropTypes.object),\n  thumbnails: PropTypes.array.isRequired,\n  onConfirmedSignalChange: PropTypes.func.isRequired,\n  canFrameOffset: PropTypes.number,\n  firstCanTime: PropTypes.number,\n  onSeek: PropTypes.func.isRequired,\n  autoplay: PropTypes.bool.isRequired,\n  currentParts: PropTypes.array.isRequired,\n  partsCount: PropTypes.number,\n  startTime: PropTypes.number,\n  startSegments: PropTypes.array\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Measure from 'react-measure';\n\nexport default class Modal extends Component {\n  static propTypes = {\n    variations: PropTypes.array,\n    disableClose: PropTypes.bool,\n    handleClose: PropTypes.func,\n    handleSave: PropTypes.func,\n    title: PropTypes.string,\n    subtitle: PropTypes.string,\n    navigation: PropTypes.node,\n    actions: PropTypes.node,\n    footer: PropTypes.node\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      windowHeight: {},\n      modalHeight: {}\n    };\n\n    this.updateHeights = this.updateHeights.bind(this);\n  }\n\n  updateHeights(contentRect) {\n    this.setState({ windowHeight: window.innerHeight });\n    this.setState({ modalHeight: contentRect.bounds.height });\n  }\n\n  readVariationClasses() {\n    if (this.props.variations) {\n      const { variations } = this.props;\n      const classes = variations.reduce(\n        (classes, variation) => `${classes}cabana-modal--${variation} `,\n        ''\n      );\n      return classes;\n    }\n  }\n\n  checkClosability() {\n    return this.props.disableClose || false;\n  }\n\n  checkYScrollability() {\n    return this.state.modalHeight > this.state.windowHeight;\n  }\n\n  render() {\n    return (\n      <div\n        className={cx('cabana-modal', this.readVariationClasses(), {\n          'cabana-modal--not-closable': this.checkClosability(),\n          'cabana-modal--scrollable-y': this.checkYScrollability()\n        })}\n      >\n        <Measure\n          bounds\n          onResize={(contentRect) => {\n            this.updateHeights(contentRect);\n          }}\n        >\n          {({ measureRef }) => (\n            <div ref={measureRef} className=\"cabana-modal-container\">\n              <div\n                className=\"cabana-modal-close-icon\"\n                onClick={this.props.handleClose}\n              />\n              <div className=\"cabana-modal-header\">\n                <h1>{this.props.title}</h1>\n                <p>{this.props.subtitle}</p>\n              </div>\n              <div className=\"cabana-modal-navigation\">\n                {this.props.navigation}\n              </div>\n              <div className=\"cabana-modal-body\">\n                <div className=\"cabana-modal-body-window\">\n                  {this.props.children}\n                </div>\n                <div className=\"cabana-modal-body-gradient\" />\n              </div>\n              <div className=\"cabana-modal-actions\">{this.props.actions}</div>\n              <div className=\"cabana-modal-footer\">{this.props.footer}</div>\n            </div>\n          )}\n        </Measure>\n        <div\n          className=\"cabana-modal-backdrop\"\n          onClick={this.props.handleClose}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Moment from 'moment';\nimport _ from 'lodash';\nimport cx from 'classnames';\nimport CommaAuth from '@commaai/my-comma-auth';\n\nimport { EXPLORER_URL } from '../../config';\nimport Modal from './baseModal';\n\nexport default class OnboardingModal extends Component {\n  static propTypes = {\n    handlePandaConnect: PropTypes.func,\n    routes: PropTypes.array\n  };\n\n  static instructionalImages = {\n    step2: require('../../images/webusb-enable-experimental-features.png'),\n    step3: require('../../images/webusb-enable-webusb.png')\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      webUsbEnabled: !!navigator.usb,\n      viewingUsbInstructions: false,\n      pandaConnected: false\n    };\n\n    this.attemptPandaConnection = this.attemptPandaConnection.bind(this);\n    this.toggleUsbInstructions = this.toggleUsbInstructions.bind(this);\n    this.navigateToExplorer = this.navigateToExplorer.bind(this);\n  }\n\n  attemptPandaConnection() {\n    if (!this.state.webUsbEnabled) {\n      return;\n    }\n    this.props.handlePandaConnect();\n  }\n\n  toggleUsbInstructions() {\n    this.setState({\n      viewingUsbInstructions: !this.state.viewingUsbInstructions\n    });\n  }\n\n  navigateToExplorer() {\n    window.location.href = EXPLORER_URL;\n  }\n\n  filterRoutesWithCan(drive) {\n    return drive.can === true;\n  }\n\n  renderPandaEligibility() {\n    const { webUsbEnabled, pandaConnected } = this.state;\n    const { attemptingPandaConnection } = this.props;\n    if (!webUsbEnabled) {\n      return (\n        <p>\n          <i className=\"fa fa-exclamation-triangle\" />\n          <a onClick={this.toggleUsbInstructions}>\n            <span>WebUSB is not enabled in your Chrome settings</span>\n          </a>\n        </p>\n      );\n    }\n    if (!pandaConnected && attemptingPandaConnection) {\n      return (\n        <p>\n          <i className=\"fa fa-spinner animate-spin\" />\n          <span className=\"animate-pulse-opacity\">\n            Waiting for panda USB connection\n          </span>\n        </p>\n      );\n    }\n  }\n\n  renderLogin() {\n    return (\n      <button\n        onClick={this.navigateToExplorer}\n        className=\"button--primary button--kiosk\"\n      >\n        <i className=\"fa fa-video-camera\" />\n        <strong>\n          {CommaAuth.isAuthenticated()\n            ? 'Find a drive in Explorer'\n            : 'Log in with Explorer'}\n        </strong>\n        <sup>Click \"View CAN Data\" while replaying a drive</sup>\n      </button>\n    );\n  }\n\n  renderOnboardingOptions() {\n    return (\n      <div className=\"cabana-onboarding-modes\">\n        <div className=\"cabana-onboarding-mode\">{this.renderLogin()}</div>\n        <div className=\"cabana-onboarding-mode\">\n          <button\n            className={cx('button--secondary button--kiosk', {\n              'is-disabled':\n                !this.state.webUsbEnabled\n                || this.props.attemptingPandaConnection\n            })}\n            onClick={this.attemptPandaConnection}\n          >\n            <i className=\"fa fa-bolt\" />\n            <strong>Launch Realtime Streaming</strong>\n            <sup>\n              Interactively stream car data over USB with\n              {' '}\n              <em>panda</em>\n            </sup>\n            {this.renderPandaEligibility()}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  renderUsbInstructions() {\n    return (\n      <div className=\"cabana-onboarding-instructions\">\n        <button\n          className=\"button--small button--inverted\"\n          onClick={this.toggleUsbInstructions}\n        >\n          <i className=\"fa fa-chevron-left\" />\n          <span> Go back</span>\n        </button>\n        <h3>Follow these directions to enable WebUSB:</h3>\n        <ol className=\"cabana-onboarding-instructions-list list--bubbled\">\n          <li>\n            <p>\n              <strong>Open your Chrome settings:</strong>\n            </p>\n            <div className=\"inset\">\n              <span>\n                chrome://flags/#enable-experimental-web-platform-features\n              </span>\n            </div>\n          </li>\n          <li>\n            <p>\n              <strong>Enable Experimental Platform features:</strong>\n            </p>\n            <img\n              alt=\"Screenshot of Google Chrome Experimental Platform features\"\n              src={OnboardingModal.instructionalImages.step2}\n            />\n          </li>\n          <li>\n            <p>\n              <strong>Enable WebUSB:</strong>\n            </p>\n            <img\n              alt=\"Screenshot of Google Chrome enable WebUSB\"\n              src={OnboardingModal.instructionalImages.step3}\n            />\n          </li>\n          <li>\n            <p>\n              <strong>\n                Relaunch your Chrome browser and try enabling live mode again.\n              </strong>\n            </p>\n          </li>\n        </ol>\n      </div>\n    );\n  }\n\n  renderModalContent() {\n    if (this.state.viewingUsbInstructions) {\n      return this.renderUsbInstructions();\n    }\n    return this.renderOnboardingOptions();\n  }\n\n  renderModalFooter() {\n    return (\n      <p>\n        <span>\n          Don't have a\n          {' '}\n          <a\n            href=\"https://panda.comma.ai\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            panda\n          </a>\n          ?\n          {' '}\n        </span>\n        <span>\n          <a\n            href=\"https://panda.comma.ai\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Get one here\n          </a>\n          {' '}\n        </span>\n        <span>\n          or\n          {' '}\n          <a href={`${window.location.href}?demo=1`}>try the demo</a>\n.\n        </span>\n      </p>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Welcome to Cabana\"\n        subtitle=\"Get started by selecting a drive from Explorer or enabling live mode\"\n        footer={this.renderModalFooter()}\n        disableClose\n        variations={['wide', 'dark']}\n      >\n        {this.renderModalContent()}\n      </Modal>\n    );\n  }\n}\n","import GitHub from 'github-api';\n\nimport { OPENDBC_SOURCE_REPO } from '../config';\n\nexport default class OpenDBC {\n  constructor(token) {\n    this.token = token;\n    this.github = new GitHub({ token });\n    this.sourceRepo = this.github.getRepo('commaai', 'opendbc');\n    this.githubUsername = null;\n  }\n\n  hasAuth() {\n    return this.token !== null;\n  }\n\n  async getGithubUsername() {\n    if (this.githubUsername) {\n      return this.githubUsername;\n    }\n    const githubUsername = await this.fetchGithubUsername();\n    if (githubUsername) {\n      return githubUsername;\n    }\n  }\n\n  async fetchGithubUsername() {\n    try {\n      const user = await this.github.getUser();\n      if (user) {\n        const profile = await user.getProfile();\n        if (profile) {\n          return profile.data.login;\n        }\n      }\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async list(repoFullName) {\n    /*\n    Lists files in a github repository.\n    If no argument provided, assumes OpenDBC source repo\n    (commaai/opendbc)\n    */\n\n    let repo;\n    if (repoFullName === undefined) {\n      repo = this.sourceRepo;\n    } else {\n      const [username, repoName] = repoFullName.split('/');\n      repo = this.github.getRepo(username, repoName);\n    }\n    try {\n      const response = await repo.getContents('master', '');\n\n      return response.data.map((content) => content.path);\n    } catch (e) {\n      return [];\n    }\n  }\n\n  async getDbcContents(dbcPath, repoFullName) {\n    let repo;\n    if (repoFullName === undefined) {\n      repo = this.sourceRepo;\n    } else {\n      const [username, repoName] = repoFullName.split('/');\n      repo = this.github.getRepo(username, repoName);\n    }\n\n    const fileContents = await repo.getContents('master', dbcPath);\n\n    const rawContentsUrl = fileContents.data.download_url;\n\n    const resp = await fetch(rawContentsUrl, { cache: 'no-cache' });\n\n    return resp.text();\n  }\n\n  repoSourceIsOpenDbc(repoDetails) {\n    return (\n      repoDetails.source && repoDetails.source.full_name === OPENDBC_SOURCE_REPO\n    );\n  }\n\n  async getUserOpenDbcFork() {\n    const githubUsername = await this.getGithubUsername();\n    if (!githubUsername) return null;\n\n    const openDbcFork = this.github.getRepo(githubUsername, 'opendbc');\n    const repoDetailResp = await openDbcFork.getDetails();\n    const repoDetails = repoDetailResp.data;\n\n    if (this.repoSourceIsOpenDbc(repoDetails)) {\n      return repoDetails.full_name;\n    }\n    return null;\n  }\n\n  async fork() {\n    const forkResponse = await this.sourceRepo.fork();\n    if (forkResponse.status === 202) {\n      return true;\n    }\n    return false;\n  }\n\n  async commitFile(repoFullName, path, contents, commitMessage) {\n    /*\n      repo is of format username/reponame\n      authenciated user must have write access to repo\n      */\n    const [user, repoName] = repoFullName.split('/');\n    const repo = this.github.getRepo(user, repoName);\n\n    // get HEAD reference\n    const refResp = await repo.getRef('heads/master');\n    const ref = refResp.data;\n\n    // get HEAD commit sha\n    const headCommitResp = await repo.getCommit(ref.object.sha);\n    const headCommit = headCommitResp.data;\n\n    // get HEAD tree\n    const headTreeResp = await repo.getTree(headCommit.tree.sha);\n    const headTree = headTreeResp.data;\n\n    // create new tree\n    const tree = [\n      {\n        mode: '100644',\n        path,\n        type: 'blob',\n        content: contents\n      }\n    ];\n\n    const createTreeResp = await repo.createTree(tree, headTree.sha);\n    const createdTree = createTreeResp.data;\n\n    // commit\n    const commitResp = await repo.commit(\n      headCommit.sha,\n      createdTree.sha,\n      commitMessage || 'OpenDBC updates'\n    );\n    const commit = commitResp.data;\n\n    // update HEAD\n    const updateHeadResp = await repo.updateHead(\n      'heads/master',\n      commit.sha,\n      false\n    );\n\n    return updateHeadResp.status === 200;\n  }\n}\n","import React, { Component } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport FileSaver from 'file-saver';\n\nimport OpenDbc from '../api/OpenDbc';\nimport DBC from '../models/can/dbc';\nimport Modal from './Modals/baseModal';\n// import TabStyles from '../styles/modal-tabs';\n\nexport default class SaveDbcModal extends Component {\n  static propTypes = {\n    dbc: PropTypes.instanceOf(DBC).isRequired,\n    sourceDbcFilename: PropTypes.string.isRequired,\n    handleClose: PropTypes.func.isRequired,\n    onDbcSaved: PropTypes.func.isRequired,\n    openDbcClient: PropTypes.instanceOf(OpenDbc).isRequired,\n    hasGithubAuth: PropTypes.bool.isRequired,\n    loginWithGithub: PropTypes.element.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tab: 'GitHub',\n      openDbcFork: null,\n      dbcFilename: this.props.sourceDbcFilename,\n      tabs: ['GitHub', 'Download'],\n      commitMessage: 'OpenDBC updates'\n    };\n\n    this.commitToGitHub = this.commitToGitHub.bind(this);\n    this.downloadDbcFile = this.downloadDbcFile.bind(this);\n    this.forkOpenDbcAndWait = this.forkOpenDbcAndWait.bind(this);\n    this.renderForkButton = this.renderForkButton.bind(this);\n    this.renderTabNavigation = this.renderTabNavigation.bind(this);\n    this.renderActions = this.renderActions.bind(this);\n  }\n\n  async componentWillMount() {\n    const openDbcFork = await this.props.openDbcClient.getUserOpenDbcFork();\n    this.setState({ openDbcFork });\n  }\n\n  async commitToGitHub() {\n    const { openDbcFork, dbcFilename } = this.state;\n    const filename = `${dbcFilename.replace(/\\.dbc/g, '')}.dbc`;\n    const success = await this.props.openDbcClient.commitFile(\n      openDbcFork,\n      filename,\n      this.props.dbc.text(),\n      this.state.commitMessage\n    );\n    if (success) {\n      this.props.onDbcSaved(filename);\n    }\n  }\n\n  async downloadDbcFile() {\n    const blob = new Blob([this.props.dbc.text()], {\n      type: 'text/plain;charset=utf-8'\n    });\n    const filename = `${this.state.dbcFilename.replace(/\\.dbc/g, '')}.dbc`;\n    FileSaver.saveAs(blob, filename, true);\n  }\n\n  async forkOpenDbcAndWait() {\n    const forkResponseSuccess = await this.props.openDbcClient.fork();\n    if (forkResponseSuccess) {\n      let isTimedOut = false;\n      const timeout = window.setTimeout(() => {\n        isTimedOut = true;\n      }, 30000);\n\n      const interval = window.setInterval(() => {\n        if (!isTimedOut) {\n          this.props.openDbcClient.getUserOpenDbcFork().then((openDbcFork) => {\n            if (openDbcFork !== null) {\n              this.setState({ openDbcFork });\n              window.clearInterval(interval);\n              window.clearTimeout(timeout);\n            }\n          });\n        } else {\n          window.clearInterval(interval);\n        }\n      }, 3000);\n    } else {\n      // fork failed\n    }\n  }\n\n  primaryActionDisabled() {\n    const { tab } = this.state;\n    if (tab === 'GitHub') {\n      return (\n        this.state.openDbcFork != null && this.state.dbcFilename.length > 0\n      );\n    }\n    if (tab === 'Download') {\n      return true;\n    }\n  }\n\n  renderForkButton() {\n    return (\n      <button onClick={this.forkOpenDbcAndWait}>\n        <i className=\"fa fa-code-fork\" />\n        <span> Fork OpenDBC</span>\n      </button>\n    );\n  }\n\n  renderForkStep() {\n    const { openDbcFork } = this.state;\n    let content;\n    if (openDbcFork !== null) {\n      content = (\n        <button disabled>\n          <i className=\"fa fa-code-fork\" />\n          <span>\n            {' '}\n            Forked:\n            {openDbcFork}\n          </span>\n        </button>\n      );\n    } else if (this.props.hasGithubAuth) {\n      content = this.renderForkButton();\n    } else {\n      content = this.props.loginWithGithub;\n    }\n    return (\n      <div>\n        {openDbcFork !== null ? this.renderForkButton() : null}\n        {content}\n        <hr />\n      </div>\n    );\n  }\n\n  renderFilenameField() {\n    return (\n      <div className=\"form-field\" data-extension=\".dbc\">\n        <label htmlFor=\"filename\">\n          <span>Choose a filename:</span>\n          <sup>Pick a unique name for your car DBC file</sup>\n        </label>\n        <input\n          type=\"text\"\n          id=\"filename\"\n          value={this.state.dbcFilename.replace(/\\.dbc/g, '')}\n          size={this.state.dbcFilename.length + 2}\n          onChange={(e) => this.setState({ dbcFilename: e.target.value })}\n        />\n      </div>\n    );\n  }\n\n  renderTabNavigation() {\n    return (\n      <div className=\"cabana-tabs-navigation\">\n        {this.state.tabs.map((tab) => (\n          <a\n            className={cx({ 'is-active': this.state.tab === tab })}\n            onClick={() => {\n              this.setState({ tab });\n            }}\n            key={tab}\n          >\n            <span>{tab}</span>\n          </a>\n        ))}\n      </div>\n    );\n  }\n\n  renderCommitMessage() {\n    return (\n      <div className=\"form-field\">\n        <label htmlFor=\"commit-message\">\n          <span>Commit Message:</span>\n          <sup>Message appears in git logs</sup>\n        </label>\n        <input\n          type=\"text\"\n          id=\"commit-message\"\n          value={this.state.commitMessage}\n          onChange={(e) => this.setState({ commitMessage: e.target.value })}\n        />\n      </div>\n    );\n  }\n\n  renderTabContent() {\n    const { tab } = this.state;\n    if (tab === 'GitHub') {\n      return (\n        <div>\n          {this.renderForkStep()}\n          {this.renderFilenameField()}\n          {this.renderCommitMessage()}\n        </div>\n      );\n    }\n    if (tab === 'Download') {\n      return <div>{this.renderFilenameField()}</div>;\n    }\n  }\n\n  renderActions() {\n    const { tab } = this.state;\n    if (tab === 'GitHub') {\n      return (\n        <div>\n          <button className=\"button--inverted\" onClick={this.props.handleClose}>\n            <span>Cancel</span>\n          </button>\n          <button className=\"button--primary\" onClick={this.commitToGitHub}>\n            <span>Commit to GitHub</span>\n          </button>\n        </div>\n      );\n    }\n    if (tab === 'Download') {\n      return (\n        <div>\n          <button className=\"button--inverted\" onClick={this.props.handleClose}>\n            <span>Cancel</span>\n          </button>\n          <button className=\"button--primary\" onClick={this.downloadDbcFile}>\n            <span>Download</span>\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Save DBC File\"\n        subtitle=\"Save your progress and output to a DBC file\"\n        handleClose={this.props.handleClose}\n        navigation={this.renderTabNavigation()}\n        actions={this.renderActions()}\n      >\n        {this.renderTabContent()}\n      </Modal>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport OpenDbc from '../api/OpenDbc';\n\nexport default class GithubDbcList extends Component {\n  static propTypes = {\n    onDbcLoaded: PropTypes.func.isRequired,\n    repo: PropTypes.string.isRequired,\n    openDbcClient: PropTypes.instanceOf(OpenDbc).isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      paths: [],\n      selectedPath: null,\n      pathQuery: ''\n    };\n\n    this.updatePathQuery = this.updatePathQuery.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.repo !== this.props.repo) {\n      this.props.openDbcClient.list(nextProps.repo).then((paths) => {\n        this.setState({ paths, selectedPath: null });\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.props.openDbcClient.list(this.props.repo).then((paths) => {\n      paths = paths.filter((path) => path.indexOf('.dbc') !== -1);\n      this.setState({ paths });\n    });\n  }\n\n  updatePathQuery(e) {\n    this.setState({\n      pathQuery: e.target.value\n    });\n  }\n\n  selectPath(path) {\n    this.setState({ selectedPath: path });\n    this.props.openDbcClient\n      .getDbcContents(path, this.props.repo)\n      .then((dbcContents) => {\n        this.props.onDbcLoaded(path, dbcContents);\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"cabana-dbc-list\">\n        <div className=\"cabana-dbc-list-header\">\n          <a href={`https://github.com/${this.props.repo}`} target=\"_blank\">\n            <i className=\"fa fa-github\" />\n            <span>{this.props.repo}</span>\n          </a>\n          <div className=\"form-field form-field--small\">\n            <input\n              type=\"text\"\n              placeholder=\"Search DBC Files\"\n              onChange={this.updatePathQuery}\n            />\n          </div>\n        </div>\n        <div className=\"cabana-dbc-list-files\">\n          {this.state.paths\n            .filter(\n              (p) => (this.state.pathQuery === '') | p.includes(this.state.pathQuery)\n            )\n            .map((path) => (\n              <div\n                className={cx('cabana-dbc-list-file', {\n                  'is-selected': this.state.selectedPath === path\n                })}\n                onClick={() => {\n                  this.selectPath(path);\n                }}\n                key={path}\n              >\n                <span>{path}</span>\n              </div>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class DbcUpload extends Component {\n  static propTypes = {\n    onDbcLoaded: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dbcText: ''\n    };\n\n    this.onTextChanged = this.onTextChanged.bind(this);\n  }\n\n  onTextChanged(e) {\n    const dbcText = e.target.value;\n    this.setState({ dbcText });\n    this.props.onDbcLoaded('from paste', dbcText);\n  }\n\n  render() {\n    return (\n      <div className=\"cabana-dbc-upload-raw\">\n        <div className=\"form-field\">\n          <label htmlFor=\"raw_dbc_upload\">\n            <span>Raw DBC File:</span>\n            <sup>Paste your DBC text output within this box</sup>\n          </label>\n          <textarea\n            value={this.state.dbcText}\n            id=\"raw_dbc_upload\"\n            className=\"t-mono\"\n            placeholder=\"PASTE DBC FILE HERE\"\n            onChange={this.onTextChanged}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport DBC from '../models/can/dbc';\nimport OpenDbc from '../api/OpenDbc';\nimport Modal from './Modals/baseModal';\nimport GithubDbcList from './GithubDbcList';\nimport DbcUpload from './DbcUpload';\n\nexport default class LoadDbcModal extends Component {\n  static propTypes = {\n    handleClose: PropTypes.func.isRequired,\n    onDbcSelected: PropTypes.func.isRequired,\n    openDbcClient: PropTypes.instanceOf(OpenDbc).isRequired,\n    loginWithGithub: PropTypes.element.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tab: 'OpenDBC',\n      tabs: ['OpenDBC', 'GitHub', 'Upload'],\n      dbc: null,\n      dbcSource: null,\n      userOpenDbcRepo: null\n    };\n\n    this.onDbcLoaded = this.onDbcLoaded.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.renderTabNavigation = this.renderTabNavigation.bind(this);\n    this.renderTabContent = this.renderTabContent.bind(this);\n    this.renderActions = this.renderActions.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.openDbcClient.getUserOpenDbcFork().then((userOpenDbcRepo) => {\n      this.setState({ userOpenDbcRepo });\n    });\n  }\n\n  onDbcLoaded(dbcSource, dbcText) {\n    const dbc = new DBC(dbcText);\n    this.setState({ dbcSource, dbc });\n  }\n\n  handleSave() {\n    const { dbc, dbcSource } = this.state;\n    if (dbc !== null) {\n      this.props.onDbcSelected(dbcSource, dbc);\n    }\n  }\n\n  renderTabNavigation() {\n    return (\n      <div className=\"cabana-tabs-navigation\">\n        {this.state.tabs.map((tab) => (\n          <a\n            className={cx({ 'is-active': this.state.tab === tab })}\n            onClick={() => {\n              this.setState({ tab });\n            }}\n            key={tab}\n          >\n            <span>{tab}</span>\n          </a>\n        ))}\n      </div>\n    );\n  }\n\n  renderTabContent() {\n    const { tab } = this.state;\n    if (tab === 'OpenDBC') {\n      return (\n        <GithubDbcList\n          onDbcLoaded={this.onDbcLoaded}\n          repo=\"commaai/opendbc\"\n          openDbcClient={this.props.openDbcClient}\n        />\n      );\n    }\n    if (tab === 'GitHub') {\n      if (!this.props.openDbcClient.hasAuth()) {\n        return this.props.loginWithGithub;\n      }\n      if (this.state.userOpenDbcRepo === null) {\n        return <div>Fork it</div>;\n      }\n      return (\n        <GithubDbcList\n          onDbcLoaded={this.onDbcLoaded}\n          repo={this.state.userOpenDbcRepo}\n          openDbcClient={this.props.openDbcClient}\n        />\n      );\n    }\n    if (tab === 'Upload') {\n      return <DbcUpload onDbcLoaded={this.onDbcLoaded} />;\n    }\n  }\n\n  renderActions() {\n    return (\n      <div>\n        <button className=\"button--inverted\" onClick={this.props.handleClose}>\n          <span>Cancel</span>\n        </button>\n        <button className=\"button--primary\" onClick={this.handleSave}>\n          <span>Load DBC</span>\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Load DBC File\"\n        subtitle=\"Modify an existing DBC file with Cabana\"\n        handleClose={this.props.handleClose}\n        navigation={this.renderTabNavigation()}\n        actions={this.renderActions()}\n      >\n        {this.renderTabContent()}\n      </Modal>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Modal from './Modals/baseModal';\n\nexport default class EditMessageModal extends Component {\n  static propTypes = {\n    handleClose: PropTypes.func.isRequired,\n    handleSave: PropTypes.func.isRequired,\n    message: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      messageFrame: props.message.frame.copy()\n    };\n    this.handleSave = this.handleSave.bind(this);\n    this.editTransmitter = this.editTransmitter.bind(this);\n    this.addTransmitter = this.addTransmitter.bind(this);\n    this.renderActions = this.renderActions.bind(this);\n  }\n\n  handleSave() {\n    this.props.handleSave(this.state.messageFrame);\n  }\n\n  addTransmitter() {\n    const { messageFrame } = this.state;\n    messageFrame.addTransmitter();\n    this.setState({ messageFrame });\n  }\n\n  editTransmitter(transmitter) {}\n\n  renderActions() {\n    return (\n      <div>\n        <button className=\"button--inverted\" onClick={this.props.handleClose}>\n          Cancel\n        </button>\n        <button className=\"button--primary\" onClick={this.handleSave}>\n          Save Message\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        title={`Edit Message: (${this.props.message.id})`}\n        subtitle=\"Make changes and update defaults of this message\"\n        handleClose={this.props.handleClose}\n        handleSave={this.handleSave}\n        actions={this.renderActions()}\n      >\n        <div className=\"form-field\">\n          <label htmlFor=\"message_name\">\n            <span>Name</span>\n            <sup>Customize the name of this message</sup>\n          </label>\n          <input\n            type=\"text\"\n            id=\"message_name\"\n            value={this.state.messageFrame.name}\n            onChange={(e) => {\n              const { messageFrame } = this.state;\n              messageFrame.name = e.target.value;\n              this.setState({ messageFrame });\n            }}\n          />\n        </div>\n        <div className=\"form-field\">\n          <label htmlFor=\"message_size\">\n            <span>Size</span>\n            <sup>Add a size parameter to this message</sup>\n          </label>\n          <input\n            type=\"number\"\n            id=\"message_size\"\n            value={this.state.messageFrame.size}\n            onChange={(e) => {\n              const { messageFrame } = this.state;\n              if (e.target.value > 8) {\n                return;\n              }\n              messageFrame.size = parseInt(e.target.value, 10);\n              this.setState({ messageFrame });\n            }}\n          />\n        </div>\n        <div className=\"form-field u-hidden\">\n          <label htmlFor=\"message_transmitters\">\n            <span>Transmitters</span>\n            <sup>\n              Add the physical ECU units that this message is coming from.\n            </sup>\n          </label>\n          <div className=\"form-field-inset\">\n            <ul className=\"form-field-inset-list\">\n              {this.state.messageFrame.transmitters.map((transmitter) => (\n                <li className=\"form-field-inset-list-item\" key={transmitter}>\n                  <div className=\"form-field-inset-list-item-title\">\n                    <span>{transmitter}</span>\n                  </div>\n                  <div className=\"form-field-inset-list-item-action\">\n                    <button className=\"button--tiny button--alpha\">Edit</button>\n                  </div>\n                </li>\n              ))}\n              <button className=\"button--tiny button--alpha\">\n                <span>\n                  <i className=\"fa fa-plus\" />\n                  {' '}\nAdd Transmitter\n                </span>\n              </button>\n            </ul>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n","import styled, { keyframes } from 'react-emotion';\n\nconst frames = keyframes`\n  0% {\n    transform: translateX(0)\n  }\n  to {\n    transform: translateX(-400px)\n  }\n`;\nconst animationColor1 = 'rgba(74, 242, 161, 1.00)';\nconst animationColor2 = 'rgba(140, 169, 197, 1.00)';\n\nexport default styled('div')`\n  display: block;\n  animation-name: ${frames};\n  animation-duration: 2s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n  background-color: ${animationColor1};\n  background-image: linear-gradient(\n    to right,\n    ${animationColor2} 0,\n    ${animationColor2} 50%,\n    ${animationColor1} 50%,\n    ${animationColor1} 100%\n  );\n  background-repeat: repeat-x;\n  background-size: 25pc 25pc;\n  width: 200%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 2;\n`;\n","import DBC from '../models/can/dbc';\n\nexport function fetchPersistedDbc(routeName) {\n  const maybeDbc = window.localStorage.getItem(routeName);\n  if (maybeDbc !== null) {\n    const { dbcFilename, dbcText } = JSON.parse(maybeDbc);\n    const dbc = new DBC(dbcText);\n\n    return { dbc, dbcText, dbcFilename };\n  }\n  return null;\n}\n\nexport function persistDbc(routeName, { dbcFilename, dbc }) {\n  const dbcJson = JSON.stringify({\n    dbcFilename,\n    dbcText: dbc.text()\n  });\n  window.localStorage.setItem(routeName, dbcJson);\n}\n\nconst GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY = 'gh_auth_token';\nexport function fetchPersistedGithubAuthToken() {\n  return window.localStorage.getItem(GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY);\n}\n\nexport function unpersistGithubAuthToken() {\n  window.localStorage.removeItem(GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY);\n}\n\nexport function persistGithubAuthToken(token) {\n  return window.localStorage.setItem(GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY, token);\n}\n","import SocketIO from 'socket.io-client';\nimport { UNLOGGER_HOST } from '../config';\n\nexport default class UnloggerClient {\n  constructor() {\n    this.socket = SocketIO(UNLOGGER_HOST);\n  }\n\n  seek(dongleId, baseTime, seekSeconds) {\n    this.socket.emit('seek', dongleId, baseTime, seekSeconds);\n  }\n}\n","import React, { Component } from 'react';\nimport Moment from 'moment';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { createWriteStream } from 'streamsaver';\nimport Panda from '@commaai/pandajs';\nimport CommaAuth from '@commaai/my-comma-auth';\nimport { raw as RawDataApi, drives as DrivesApi } from '@commaai/comma-api';\nimport {\n  USE_UNLOGGER,\n  PART_SEGMENT_LENGTH,\n  STREAMING_WINDOW,\n  GITHUB_AUTH_TOKEN_KEY\n} from './config';\nimport * as GithubAuth from './api/github-auth';\n\nimport DBC from './models/can/dbc';\nimport Meta from './components/Meta';\nimport Explorer from './components/Explorer';\nimport OnboardingModal from './components/Modals/OnboardingModal';\nimport SaveDbcModal from './components/SaveDbcModal';\nimport LoadDbcModal from './components/LoadDbcModal';\nimport debounce from './utils/debounce';\nimport EditMessageModal from './components/EditMessageModal';\nimport LoadingBar from './components/LoadingBar';\nimport {\n  persistDbc,\n  fetchPersistedDbc,\n  unpersistGithubAuthToken\n} from './api/localstorage';\nimport OpenDbc from './api/OpenDbc';\nimport UnloggerClient from './api/unlogger';\nimport * as ObjectUtils from './utils/object';\nimport { hash } from './utils/string';\nimport { modifyQueryParameters } from './utils/url';\n\nconst RLogDownloader = require('./workers/rlog-downloader.worker');\nconst LogCSVDownloader = require('./workers/dbc-csv-downloader.worker');\nconst MessageParser = require('./workers/message-parser.worker');\nconst CanStreamerWorker = require('./workers/CanStreamerWorker.worker');\n\nexport default class CanExplorer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: {},\n      thumbnails: [],\n      selectedMessages: [],\n      route: null,\n      canFrameOffset: 0,\n      firstCanTime: null,\n      lastBusTime: null,\n      selectedMessage: null,\n      currentParts: [0, 0],\n      currentPart: 0,\n      currentWorkers: {},\n      loadingParts: [],\n      loadedParts: [],\n      showOnboarding: false,\n      showLoadDbc: false,\n      showSaveDbc: false,\n      showEditMessageModal: false,\n      editMessageModalMessage: null,\n      dbc: props.dbc ? props.dbc : new DBC(),\n      dbcText: props.dbc ? props.dbc.text() : new DBC().text(),\n      dbcFilename: props.dbcFilename ? props.dbcFilename : 'New_DBC',\n      dbcLastSaved: null,\n      seekTime: props.seekTime || 0,\n      seekIndex: 0,\n      maxByteStateChangeCount: 0,\n      isLoading: true,\n      partsLoaded: 0,\n      spawnWorkerHash: null,\n      attemptingPandaConnection: false,\n      pandaNoDeviceSelected: false,\n      live: false,\n      isGithubAuthenticated:\n        props.githubAuthToken !== null && props.githubAuthToken !== undefined,\n      shareUrl: null,\n      logUrls: null\n    };\n\n    this.openDbcClient = new OpenDbc(props.githubAuthToken);\n    if (USE_UNLOGGER) {\n      this.unloggerClient = new UnloggerClient();\n    }\n\n    this.showOnboarding = this.showOnboarding.bind(this);\n    this.hideOnboarding = this.hideOnboarding.bind(this);\n    this.showLoadDbc = this.showLoadDbc.bind(this);\n    this.hideLoadDbc = this.hideLoadDbc.bind(this);\n    this.showSaveDbc = this.showSaveDbc.bind(this);\n    this.hideSaveDbc = this.hideSaveDbc.bind(this);\n    this.showEditMessageModal = this.showEditMessageModal.bind(this);\n    this.hideEditMessageModal = this.hideEditMessageModal.bind(this);\n    this.onDbcSelected = this.onDbcSelected.bind(this);\n    this.onDbcSaved = this.onDbcSaved.bind(this);\n    this.onConfirmedSignalChange = this.onConfirmedSignalChange.bind(this);\n    this.onPartChange = this.onPartChange.bind(this);\n    this.onMessageFrameEdited = this.onMessageFrameEdited.bind(this);\n    this.onSeek = this.onSeek.bind(this);\n    this.onUserSeek = this.onUserSeek.bind(this);\n    this.onMessageSelected = this.onMessageSelected.bind(this);\n    this.onMessageUnselected = this.onMessageUnselected.bind(this);\n    this.initCanData = this.initCanData.bind(this);\n    this.updateSelectedMessages = this.updateSelectedMessages.bind(this);\n    this.handlePandaConnect = this.handlePandaConnect.bind(this);\n    this.processStreamedCanMessages = this.processStreamedCanMessages.bind(\n      this\n    );\n    this.onStreamedCanMessagesProcessed = this.onStreamedCanMessagesProcessed.bind(\n      this\n    );\n    this.showingModal = this.showingModal.bind(this);\n    this.lastMessageEntriesById = this.lastMessageEntriesById.bind(this);\n    this.githubSignOut = this.githubSignOut.bind(this);\n    this.downloadLogAsCSV = this.downloadLogAsCSV.bind(this);\n\n    this.pandaReader = new Panda();\n    this.pandaReader.onMessage(this.processStreamedCanMessages);\n  }\n\n  componentDidMount() {\n    const { dongleId, name } = this.props;\n    if (CommaAuth.isAuthenticated() && !name) {\n      this.showOnboarding();\n    } else if (\n      this.props.max\n      && this.props.url\n      && !this.props.exp\n      && !this.props.sig\n    ) {\n      // probably the demo!\n      const { max, url } = this.props;\n      const startTime = Moment(name, 'YYYY-MM-DD--H-m-s');\n\n      const route = {\n        fullname: `${dongleId}|${name}`,\n        proclog: max,\n        url,\n        start_time: startTime\n      };\n      this.setState(\n        {\n          route,\n          currentParts: [0, Math.min(max, PART_SEGMENT_LENGTH - 1)]\n        },\n        this.initCanData\n      );\n    } else if (dongleId && name) {\n      const routeName = `${dongleId}|${name}`;\n      let urlPromise;\n      let logUrlsPromise;\n\n      if (this.props.url) {\n        urlPromise = Promise.resolve(this.props.url);\n      } else {\n        urlPromise = DrivesApi.getRouteInfo(routeName).then((route) => route.url);\n      }\n\n      if (this.props.sig && this.props.exp) {\n        logUrlsPromise = RawDataApi.getLogUrls(routeName, {\n          sig: this.props.sig,\n          exp: this.props.exp\n        });\n      } else {\n        logUrlsPromise = RawDataApi.getLogUrls(routeName);\n      }\n      Promise.all([urlPromise, logUrlsPromise])\n        .then((initData) => {\n          const [url, logUrls] = initData;\n          const newState = {\n            route: {\n              fullname: routeName,\n              proclog: logUrls.length - 1,\n              start_time: Moment(name, 'YYYY-MM-DD--H-m-s'),\n              url\n            },\n            currentParts: [\n              0,\n              Math.min(logUrls.length - 1, PART_SEGMENT_LENGTH - 1)\n            ],\n            logUrls\n          };\n          this.setState(newState, this.initCanData);\n\n          DrivesApi.getShareSignature(routeName).then((shareSignature) => this.setState({\n            shareUrl: modifyQueryParameters({\n              add: {\n                exp: shareSignature.exp,\n                sig: shareSignature.sig,\n                max: logUrls.length - 1,\n                url\n              },\n              remove: [GITHUB_AUTH_TOKEN_KEY]\n            })\n          }));\n        })\n        .catch((err) => {\n          console.error(err);\n          this.showOnboarding();\n        });\n    } else {\n      this.showOnboarding();\n    }\n  }\n\n  initCanData() {\n    const { route } = this.state;\n\n    this.spawnWorker(this.state.currentParts);\n  }\n\n  onDbcSelected(dbcFilename, dbc) {\n    const { route } = this.state;\n    this.hideLoadDbc();\n    this.persistDbc({ dbcFilename, dbc });\n\n    if (route) {\n      this.setState(\n        {\n          dbc,\n          dbcFilename,\n          dbcText: dbc.text(),\n          partsLoaded: 0,\n          selectedMessage: null,\n          messages: {}\n        },\n        () => {\n          // Pass DBC text to webworker b/c can't pass instance of es6 class\n          this.spawnWorker();\n        }\n      );\n    } else {\n      this.setState({\n        dbc,\n        dbcFilename,\n        dbcText: dbc.text(),\n        messages: {}\n      });\n    }\n  }\n\n  onDbcSaved(dbcFilename) {\n    const dbcLastSaved = Moment();\n    this.setState({ dbcLastSaved, dbcFilename });\n    this.hideSaveDbc();\n  }\n\n  // async downloadDbcFile() {\n  //   const blob = new Blob([this.props.dbc.text()], {type: \"text/plain;charset=utf-8\"});\n  //   const filename = this.state.dbcFilename.replace(/\\.dbc/g, '') + '.dbc';\n  //   FileSaver.saveAs(blob, filename, true);\n  // }\n\n  downloadLogAsCSV() {\n    console.log('downloadLogAsCSV:start');\n    const { dbcFilename } = this.state;\n    const fileStream = createWriteStream(\n      `${dbcFilename.replace(/\\.dbc/g, '-')}${+new Date()}.csv`\n    );\n    const writer = fileStream.getWriter();\n    const encoder = new TextEncoder();\n\n    if (this.state.live) {\n      return this.downloadLiveLogAsCSV(dataHandler);\n    }\n    return this.downloadRawLogAsCSV(dataHandler);\n\n    function dataHandler(e) {\n      const { logData, shouldClose, progress } = e.data;\n      if (shouldClose) {\n        console.log('downloadLogAsCSV:close');\n        writer.close();\n        return;\n      }\n      console.log('CSV export progress:', progress);\n      const uint8array = encoder.encode(`${logData}\\n`);\n      writer.write(uint8array);\n    }\n  }\n\n  downloadRawLogAsCSV(handler) {\n    return this.downloadLiveLogAsCSV(handler);\n  }\n\n  downloadLiveLogAsCSV(handler) {\n    // Trigger processing of in-memory data in worker\n    // this method *could* just fetch the data needed for the worked, but\n    // eventually this might be in it's own worker instead of the shared one\n    const { firstCanTime, canFrameOffset } = this.state;\n    const worker = new LogCSVDownloader();\n\n    worker.onmessage = handler;\n\n    worker.postMessage({\n      data: Object.keys(this.state.messages).map((sourceId) => {\n        const source = this.state.messages[sourceId];\n        return {\n          id: source.id,\n          bus: source.bus,\n          address: source.address,\n          entries: source.entries.slice()\n        };\n      }),\n      canStartTime: firstCanTime - canFrameOffset\n    });\n  }\n\n  mergeThumbnails(newThumbnails) {\n    const { thumbnails } = this.state;\n    if (!newThumbnails || !newThumbnails.length) {\n      return thumbnails;\n    }\n    if (!thumbnails.length) {\n      return newThumbnails;\n    }\n\n    let oldIndex = 0;\n    let newIndex = 0;\n\n    // is old immediately after new?\n    if (newThumbnails[0].monoTime > thumbnails[thumbnails.length - 1]) {\n      return thumbnails.concat(newThumbnails);\n    }\n    // is new immediately after old?\n    if (newThumbnails[newThumbnails.length - 1] < thumbnails[0]) {\n      return newThumbnails.concat(thumbnails);\n    }\n    let result = [];\n    while (oldIndex < thumbnails.length && newIndex < newThumbnails.length) {\n      if (thumbnails[oldIndex].monoTime < newThumbnails[newIndex].monoTime) {\n        result.push(thumbnails[oldIndex]);\n        oldIndex += 1;\n      } else {\n        result.push(newThumbnails[newIndex]);\n        newIndex += 1;\n      }\n    }\n    if (oldIndex < thumbnails.length) {\n      result = result.concat(thumbnails.slice(oldIndex));\n    } else if (newIndex < newThumbnails.length) {\n      result = result.concat(newThumbnails.slice(newIndex));\n    }\n\n    return result;\n  }\n\n  addAndRehydrateMessages(newMessages, options) {\n    // Adds new message entries to messages state\n    // and \"rehydrates\" ES6 classes (message frame)\n    // lost from JSON serialization in webworker data cloning.\n    options = options || {};\n\n    const messages = { ...this.state.messages };\n    for (const key in newMessages) {\n      // add message\n      if (options.replace !== true && key in messages) {\n        // should merge here instead of concat\n        // assumes messages are always sequential\n        const msgEntries = messages[key].entries;\n        const newMsgEntries = newMessages[key].entries;\n        const msgLength = msgEntries.length;\n        const newMsgLength = newMsgEntries.length;\n        const entryLength = msgLength + newMsgLength;\n        messages[key].entries = Array(entryLength);\n\n        let msgIndex = 0;\n        let newMsgIndex = 0;\n\n        for (let i = 0; i < entryLength; ++i) {\n          if (newMsgIndex >= newMsgLength) {\n            messages[key].entries[i] = msgEntries[msgIndex++];\n          } else if (msgIndex >= msgLength) {\n            messages[key].entries[i] = newMsgEntries[newMsgIndex++];\n          } else if (\n            msgEntries[msgIndex].relTime <= newMsgEntries[newMsgIndex].relTime\n          ) {\n            messages[key].entries[i] = msgEntries[msgIndex++];\n          } else if (\n            msgEntries[msgIndex].relTime >= newMsgEntries[newMsgIndex].relTime\n          ) {\n            messages[key].entries[i] = newMsgEntries[newMsgIndex++];\n          }\n        }\n        messages[key].byteStateChangeCounts = newMessages[key].byteStateChangeCounts;\n      } else {\n        messages[key] = newMessages[key];\n        messages[key].frame = this.state.dbc.getMessageFrame(\n          messages[key].address\n        );\n      }\n    }\n\n    return messages;\n  }\n\n  cancelWorker(workerHash) {\n    const currentWorkers = { ...this.state.currentWorkers };\n    const { worker, part } = currentWorkers[workerHash];\n    const loadingParts = this.state.loadingParts.filter((p) => p !== part);\n    const loadedParts = this.state.loadedParts.filter((p) => p !== part);\n    delete currentWorkers[workerHash];\n\n    console.log('Stoping worker', workerHash, 'for part', part);\n    worker.postMessage({\n      action: 'terminate'\n    });\n\n    this.setState({\n      currentWorkers,\n      loadingParts,\n      loadedParts\n    });\n  }\n\n  spawnWorker(options) {\n    let { currentParts, currentWorkers } = this.state;\n    console.log('Checking worker for', currentParts);\n    if (!this.state.isLoading) {\n      this.setState({ isLoading: true });\n    }\n    const [minPart, maxPart] = currentParts;\n    // cancel old workers that are still loading data no longer inside the window\n    Object.keys(currentWorkers).forEach((workerHash) => {\n      if (\n        currentWorkers[workerHash].part < minPart\n        || currentWorkers[workerHash].part > maxPart\n      ) {\n        this.cancelWorker(workerHash);\n      }\n    });\n    // updated worker list (post canceling, and this time a copy)\n    currentWorkers = { ...this.state.currentWorkers };\n\n    let { loadingParts, loadedParts, currentPart } = this.state;\n\n    // clean this up just in case, the cancel process above *should* have already done this\n    // they have at most 4 entries so it's trivial\n    loadingParts = loadingParts.filter((p) => p >= minPart && p <= maxPart);\n    loadedParts = loadedParts.filter((p) => p >= minPart && p <= maxPart);\n\n    let part = -1;\n    const allWorkerParts = Object.keys(currentWorkers).map(\n      (i) => currentWorkers[i].part\n    );\n\n    for (let partOffset = 0; partOffset <= maxPart - minPart; ++partOffset) {\n      let tempPart = currentPart + partOffset;\n      if (tempPart > maxPart) {\n        tempPart = minPart + ((tempPart - minPart) % (maxPart - minPart + 1));\n      }\n      if (allWorkerParts.indexOf(tempPart) === -1) {\n        part = tempPart;\n        break;\n      }\n    }\n    if (part === -1) {\n      console.log('Loading complete');\n      this.setState({ isLoading: false });\n      return;\n    }\n    console.log('Starting worker for part', part);\n    // options is object of {part, prevMsgEntries, spawnWorkerHash, prepend}\n    options = options || {};\n    let { prevMsgEntries } = options;\n    const prepend = false;\n\n    const {\n      dbc,\n      dbcFilename,\n      route,\n      firstCanTime,\n      canFrameOffset\n    } = this.state;\n    let { maxByteStateChangeCount } = this.state;\n\n    if (!prevMsgEntries) {\n      // we have previous messages loaded\n      const { messages } = this.state;\n      prevMsgEntries = {};\n      Object.keys(messages).forEach((key) => {\n        const { entries } = messages[key];\n        prevMsgEntries[key] = entries[entries.length - 1];\n      });\n    }\n\n    // var worker = new CanFetcher();\n    const worker = new RLogDownloader();\n\n    const spawnWorkerHash = hash(Math.random().toString(16));\n    currentWorkers[spawnWorkerHash] = {\n      part,\n      worker\n    };\n\n    loadingParts = [part, ...loadingParts];\n\n    this.setState({\n      currentWorkers,\n      loadingParts\n    });\n\n    worker.onmessage = (e) => {\n      if (this.state.currentWorkers[spawnWorkerHash] === undefined) {\n        console.log('Worker was canceled');\n        return;\n      }\n\n      if (this.state.dbcFilename !== dbcFilename) {\n        // DBC changed while this worker was running\n        // -- don't update messages and halt recursion.\n        return;\n      }\n\n      maxByteStateChangeCount = e.data.maxByteStateChangeCount;\n      const { newMessages, newThumbnails, isFinished } = e.data;\n      if (maxByteStateChangeCount > this.state.maxByteStateChangeCount) {\n        this.setState({ maxByteStateChangeCount });\n      } else {\n        maxByteStateChangeCount = this.state.maxByteStateChangeCount;\n      }\n\n      const messages = this.addAndRehydrateMessages(\n        newMessages,\n        maxByteStateChangeCount\n      );\n      const prevMsgEntries = {};\n      Object.keys(newMessages).forEach((key) => {\n        prevMsgEntries[key] = newMessages[key].entries[newMessages[key].entries.length - 1];\n      });\n\n      const thumbnails = this.mergeThumbnails(newThumbnails);\n\n      if (!isFinished) {\n        this.setState({ messages, thumbnails });\n      } else {\n        const loadingParts = this.state.loadingParts.filter((p) => p !== part);\n        const loadedParts = [part, ...this.state.loadedParts];\n\n        this.setState(\n          {\n            messages,\n            thumbnails,\n            partsLoaded: this.state.partsLoaded + 1,\n            loadingParts,\n            loadedParts\n          },\n          () => {\n            this.spawnWorker({\n              prevMsgEntries,\n              spawnWorkerHash,\n              prepend\n            });\n          }\n        );\n      }\n    };\n\n    worker.postMessage({\n      // old stuff for reverse compatibility for easier testing\n      base: route.url,\n      num: part,\n\n      // so that we don't try to read metadata about it...\n      isDemo: this.props.isDemo,\n      isLegacyShare: this.props.isLegacyShare,\n      logUrls: this.state.logUrls,\n\n      // data that is used\n      dbcText: dbc.text(),\n      route: route.fullname,\n      part,\n      canStartTime: firstCanTime != null ? firstCanTime - canFrameOffset : null,\n      prevMsgEntries,\n      maxByteStateChangeCount\n    });\n  }\n\n  showingModal() {\n    const {\n      showOnboarding,\n      showLoadDbc,\n      showSaveDbc,\n      showAddSignal,\n      showEditMessageModal\n    } = this.state;\n    return (\n      showOnboarding\n      || showLoadDbc\n      || showSaveDbc\n      || showAddSignal\n      || showEditMessageModal\n    );\n  }\n\n  showOnboarding() {\n    this.setState({ showOnboarding: true });\n  }\n\n  hideOnboarding() {\n    this.setState({ showOnboarding: false });\n  }\n\n  showLoadDbc() {\n    this.setState({ showLoadDbc: true });\n  }\n\n  hideLoadDbc() {\n    this.setState({ showLoadDbc: false });\n  }\n\n  showSaveDbc() {\n    this.setState({ showSaveDbc: true });\n  }\n\n  hideSaveDbc() {\n    this.setState({ showSaveDbc: false });\n  }\n\n  reparseMessages(messages) {\n    this.setState({ isLoading: true });\n\n    const { dbc } = this.state;\n    const worker = new MessageParser();\n    worker.onmessage = (e) => {\n      let messages = e.data;\n      messages = this.addAndRehydrateMessages(messages, { replace: true });\n\n      this.setState({ messages, isLoading: false });\n    };\n\n    worker.postMessage({\n      messages,\n      dbcText: dbc.text(),\n      canStartTime: this.state.firstCanTime\n    });\n  }\n\n  updateMessageFrame(messageId, frame) {\n    const { messages } = this.state;\n\n    messages[messageId].frame = frame;\n    this.setState({ messages });\n  }\n\n  persistDbc({ dbcFilename, dbc }) {\n    const { route } = this.state;\n    if (route) {\n      persistDbc(route.fullname, { dbcFilename, dbc });\n    } else {\n      persistDbc('live', { dbcFilename, dbc });\n    }\n  }\n\n  onConfirmedSignalChange(message, signals) {\n    const { dbc, dbcFilename } = this.state;\n    dbc.setSignals(message.address, { ...signals });\n\n    this.updateMessageFrame(message.id, dbc.getMessageFrame(message.address));\n\n    this.persistDbc({ dbcFilename, dbc });\n\n    const messages = {};\n    const newMessage = { ...message };\n    const frame = dbc.getMessageFrame(message.address);\n    newMessage.frame = frame;\n\n    messages[message.id] = newMessage;\n\n    this.setState({ dbc, dbcText: dbc.text() }, () => this.reparseMessages(messages));\n  }\n\n  partChangeDebounced = debounce(() => {\n    const [minPart, maxPart] = this.state.currentParts;\n    const messages = { ...this.state.messages };\n    // update messages to only preserve entries in new part range\n    const minTime = minPart * 60;\n    const maxTime = maxPart * 60 + 60;\n    Object.keys(messages).forEach((key) => {\n      const { entries } = messages[key];\n      let minIndex = 0;\n      let maxIndex = entries.length - 1;\n      while (minIndex < entries.length && entries[minIndex].relTime < minTime) {\n        minIndex++;\n      }\n      while (maxIndex > minIndex && entries[maxIndex].relTime > maxTime) {\n        maxIndex--;\n      }\n      if (minIndex > 0 || maxIndex < entries.length - 1) {\n        messages[key].entries = entries.slice(minIndex, maxIndex + 1);\n      }\n    });\n\n    this.setState({\n      messages\n    });\n\n    this.spawnWorker();\n  }, 500);\n\n  onPartChange(part) {\n    let {\n      currentParts, currentPart, canFrameOffset, route\n    } = this.state;\n    if (canFrameOffset === -1 || part === currentPart) {\n      return;\n    }\n\n    // determine new parts to load, whether to prepend or append\n    let maxPart = Math.min(route.proclog, part + 1);\n    const minPart = Math.max(0, maxPart - PART_SEGMENT_LENGTH + 1);\n    if (minPart === 0) {\n      maxPart = Math.min(route.proclog, 2);\n    }\n    const currentPartSpan = currentParts[1] - currentParts[0] + 1;\n\n    // update current parts\n    currentParts = [minPart, maxPart];\n    currentPart = part;\n\n    if (\n      currentPart !== this.state.currentPart\n      || currentParts[0] !== this.state.currentParts[0]\n      || currentParts[1] !== this.state.currentParts[1]\n    ) {\n      // update state then load new parts\n      this.setState({ currentParts, currentPart }, this.partChangeDebounced);\n    }\n  }\n\n  showEditMessageModal(msgKey) {\n    const msg = this.state.messages[msgKey];\n    if (!msg.frame) {\n      msg.frame = this.state.dbc.createFrame(msg.address);\n    }\n\n    this.setState({\n      showEditMessageModal: true,\n      editMessageModalMessage: msgKey,\n      messages: this.state.messages,\n      dbcText: this.state.dbc.text()\n    });\n  }\n\n  hideEditMessageModal() {\n    this.setState({ showEditMessageModal: false });\n  }\n\n  onMessageFrameEdited(messageFrame) {\n    const {\n      messages, dbcFilename, dbc, editMessageModalMessage\n    } = this.state;\n\n    const message = { ...messages[editMessageModalMessage] };\n    message.frame = messageFrame;\n    dbc.messages.set(messageFrame.id, messageFrame);\n    this.persistDbc({ dbcFilename, dbc });\n\n    messages[editMessageModalMessage] = message;\n    this.setState({ messages, dbc, dbcText: dbc.text() });\n    this.hideEditMessageModal();\n  }\n\n  onSeek(seekIndex, seekTime) {\n    this.setState({ seekIndex, seekTime });\n\n    const { currentPart } = this.state;\n    const part = ~~(seekTime / 60);\n    if (part !== currentPart) {\n      this.onPartChange(part);\n    }\n  }\n\n  onUserSeek(seekTime) {\n    if (USE_UNLOGGER) {\n      this.unloggerClient.seek(this.props.dongleId, this.props.name, seekTime);\n    }\n\n    const msg = this.state.messages[this.state.selectedMessage];\n    let seekIndex;\n    if (msg) {\n      seekIndex = msg.entries.findIndex((e) => e.relTime >= seekTime);\n      if (seekIndex === -1) {\n        seekIndex = 0;\n      }\n    } else {\n      seekIndex = 0;\n    }\n\n    this.onSeek(seekIndex, seekTime);\n  }\n\n  onMessageSelected(msgKey) {\n    let { seekTime, seekIndex, messages } = this.state;\n    const msg = messages[msgKey];\n\n    if (seekTime > 0 && msg.entries.length > 0) {\n      seekIndex = msg.entries.findIndex((e) => e.relTime >= seekTime);\n      if (seekIndex === -1) {\n        seekIndex = 0;\n      }\n\n      seekTime = msg.entries[seekIndex].relTime;\n    }\n\n    this.setState({ seekTime, seekIndex, selectedMessage: msgKey });\n  }\n\n  updateSelectedMessages(selectedMessages) {\n    this.setState({ selectedMessages });\n  }\n\n  onMessageUnselected(msgKey) {\n    this.setState({ selectedMessage: null });\n  }\n\n  loginWithGithub() {\n    const { route } = this.state;\n    return (\n      <a\n        href={GithubAuth.authorizeUrl(\n          route && route.fullname ? route.fullname : ''\n        )}\n        className=\"button button--dark button--inline\"\n      >\n        <i className=\"fa fa-github\" />\n        <span> Log in with Github</span>\n      </a>\n    );\n  }\n\n  lastMessageEntriesById(obj, [msgId, message]) {\n    obj[msgId] = message.entries[message.entries.length - 1];\n    return obj;\n  }\n\n  processStreamedCanMessages(newCanMessages) {\n    const { dbcText } = this.state;\n    const {\n      firstCanTime,\n      lastBusTime,\n      messages,\n      maxByteStateChangeCount\n    } = this.state;\n    // map msg id to arrays\n    const prevMsgEntries = Object.entries(messages).reduce(\n      this.lastMessageEntriesById,\n      {}\n    );\n\n    const byteStateChangeCountsByMessage = Object.entries(messages).reduce(\n      (obj, [msgId, msg]) => {\n        obj[msgId] = msg.byteStateChangeCounts;\n        return obj;\n      },\n      {}\n    );\n\n    this.canStreamerWorker.postMessage({\n      newCanMessages,\n      prevMsgEntries,\n      firstCanTime,\n      dbcText,\n      lastBusTime,\n      byteStateChangeCountsByMessage,\n      maxByteStateChangeCount\n    });\n  }\n\n  firstEntryIndexInsideStreamingWindow(entries) {\n    const lastEntryTime = entries[entries.length - 1].relTime;\n    const windowFloor = lastEntryTime - STREAMING_WINDOW;\n\n    for (let i = 0; i < entries.length; i++) {\n      if (entries[i].relTime > windowFloor) {\n        return i;\n      }\n    }\n\n    return 0;\n  }\n\n  enforceStreamingMessageWindow(messages) {\n    const messageIds = Object.keys(messages);\n    for (let i = 0; i < messageIds.length; i++) {\n      const messageId = messageIds[i];\n      const message = messages[messageId];\n      if (message.entries.length < 2) {\n        continue;\n      }\n\n      const lastEntryTime = message.entries[message.entries.length - 1].relTime;\n      const entrySpan = lastEntryTime - message.entries[0].relTime;\n      if (entrySpan > STREAMING_WINDOW) {\n        const newEntryFloor = this.firstEntryIndexInsideStreamingWindow(\n          message.entries\n        );\n        message.entries = message.entries.slice(newEntryFloor);\n        messages[messageId] = message;\n      }\n    }\n\n    return messages;\n  }\n\n  _onStreamedCanMessagesProcessed(data) {\n    let {\n      newMessages,\n      seekTime,\n      lastBusTime,\n      firstCanTime,\n      maxByteStateChangeCount\n    } = data;\n\n    if (maxByteStateChangeCount < this.state.maxByteStateChangeCount) {\n      maxByteStateChangeCount = this.state.maxByteStateChangeCount;\n    }\n\n    let messages = this.addAndRehydrateMessages(newMessages);\n    messages = this.enforceStreamingMessageWindow(messages);\n    let { seekIndex, selectedMessages } = this.state;\n    if (\n      selectedMessages.length > 0\n      && messages[selectedMessages[0]] !== undefined\n    ) {\n      seekIndex = Math.max(0, messages[selectedMessages[0]].entries.length - 1);\n    }\n    this.setState({\n      messages,\n      seekTime,\n      seekIndex,\n      lastBusTime,\n      firstCanTime,\n      maxByteStateChangeCount\n    });\n  }\n\n  onStreamedCanMessagesProcessed(e) {\n    this._onStreamedCanMessagesProcessed(e.data);\n  }\n\n  async handlePandaConnect(e) {\n    this.setState({ attemptingPandaConnection: true, live: true });\n\n    const persistedDbc = fetchPersistedDbc('live');\n    if (persistedDbc) {\n      const { dbc, dbcText } = persistedDbc;\n      this.setState({ dbc, dbcText });\n    }\n    this.canStreamerWorker = new CanStreamerWorker();\n    this.canStreamerWorker.onmessage = this.onStreamedCanMessagesProcessed;\n\n    // if any errors go off during connection, mark as not trying to connect anymore...\n    const unlisten = this.pandaReader.onError((err) => {\n      console.error(err.stack || err);\n      this.setState({ attemptingPandaConnection: false });\n    });\n    try {\n      await this.pandaReader.start();\n      this.setState({\n        showOnboarding: false,\n        showLoadDbc: true\n      });\n    } catch (e) {}\n    this.setState({ attemptingPandaConnection: false });\n    unlisten();\n  }\n\n  githubSignOut(e, dataArray) {\n    unpersistGithubAuthToken();\n    this.setState({ isGithubAuthenticated: false });\n\n    e.preventDefault();\n  }\n\n  render() {\n    const {\n      route,\n      messages,\n      selectedMessages,\n      currentParts,\n      dbcFilename,\n      dbcLastSaved,\n      seekTime,\n      seekIndex,\n      shareUrl,\n      maxByteStateChangeCount,\n      live,\n      thumbnails,\n      selectedMessage,\n      canFrameOffset,\n      firstCanTime,\n      currentPart,\n      partsLoaded\n    } = this.state;\n\n    const { startTime, segments } = this.props;\n\n    return (\n      <div\n        id=\"cabana\"\n        className={cx({ 'is-showing-modal': this.showingModal() })}\n      >\n        {this.state.isLoading ? (\n          <LoadingBar isLoading={this.state.isLoading} />\n        ) : null}\n        <div className=\"cabana-header\">\n          <a className=\"cabana-header-logo\" href=\"\">\n            Comma Cabana\n          </a>\n          <div className=\"cabana-header-account\">\n            {this.state.isGithubAuthenticated ? (\n              <div>\n                <p>GitHub Authenticated</p>\n                <p\n                  className=\"cabana-header-account-signout\"\n                  onClick={this.githubSignOut}\n                >\n                  Sign out\n                </p>\n              </div>\n            ) : (\n              this.loginWithGithub()\n            )}\n          </div>\n        </div>\n        <div className=\"cabana-window\">\n          <Meta\n            url={this.state.route ? route.url : null}\n            messages={messages}\n            selectedMessages={selectedMessages}\n            updateSelectedMessages={this.updateSelectedMessages}\n            showEditMessageModal={this.showEditMessageModal}\n            currentParts={currentParts}\n            onMessageSelected={this.onMessageSelected}\n            onMessageUnselected={this.onMessageUnselected}\n            showLoadDbc={this.showLoadDbc}\n            showSaveDbc={this.showSaveDbc}\n            dbcFilename={dbcFilename}\n            dbcLastSaved={dbcLastSaved}\n            dongleId={this.props.dongleId}\n            name={this.props.name}\n            route={route}\n            seekTime={seekTime}\n            seekIndex={seekIndex}\n            shareUrl={shareUrl}\n            maxByteStateChangeCount={maxByteStateChangeCount}\n            isDemo={this.props.isDemo}\n            live={live}\n            saveLog={debounce(this.downloadLogAsCSV, 500)}\n          />\n          {route || live ? (\n            <Explorer\n              url={route ? route.url : null}\n              live={live}\n              messages={messages}\n              thumbnails={thumbnails}\n              selectedMessage={selectedMessage}\n              onConfirmedSignalChange={this.onConfirmedSignalChange}\n              onSeek={this.onSeek}\n              onUserSeek={this.onUserSeek}\n              canFrameOffset={canFrameOffset}\n              firstCanTime={firstCanTime}\n              seekTime={seekTime}\n              startTime={startTime}\n              startSegments={segments}\n              seekIndex={seekIndex}\n              currentParts={currentParts}\n              selectedPart={currentPart}\n              partsLoaded={partsLoaded}\n              autoplay={this.props.autoplay}\n              showEditMessageModal={this.showEditMessageModal}\n              onPartChange={this.onPartChange}\n              routeStartTime={\n                route ? route.start_time : Moment()\n              }\n              partsCount={route ? route.proclog : 0}\n            />\n          ) : null}\n        </div>\n\n        {this.state.showOnboarding ? (\n          <OnboardingModal\n            handlePandaConnect={this.handlePandaConnect}\n            attemptingPandaConnection={this.state.attemptingPandaConnection}\n            routes={this.state.routes}\n          />\n        ) : null}\n\n        {this.state.showLoadDbc ? (\n          <LoadDbcModal\n            onDbcSelected={this.onDbcSelected}\n            handleClose={this.hideLoadDbc}\n            openDbcClient={this.openDbcClient}\n            loginWithGithub={this.loginWithGithub()}\n          />\n        ) : null}\n\n        {this.state.showSaveDbc ? (\n          <SaveDbcModal\n            dbc={this.state.dbc}\n            sourceDbcFilename={this.state.dbcFilename}\n            onDbcSaved={this.onDbcSaved}\n            handleClose={this.hideSaveDbc}\n            openDbcClient={this.openDbcClient}\n            hasGithubAuth={this.props.githubAuthToken !== null}\n            loginWithGithub={this.loginWithGithub()}\n          />\n        ) : null}\n\n        {this.state.showEditMessageModal ? (\n          <EditMessageModal\n            handleClose={this.hideEditMessageModal}\n            handleSave={this.onMessageFrameEdited}\n            message={this.state.messages[this.state.editMessageModalMessage]}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n\nCanExplorer.propTypes = {\n  dongleId: PropTypes.string,\n  name: PropTypes.string,\n  dbc: PropTypes.instanceOf(DBC),\n  dbcFilename: PropTypes.string,\n  githubAuthToken: PropTypes.string,\n  autoplay: PropTypes.bool,\n  max: PropTypes.number,\n  url: PropTypes.string,\n  startTime: PropTypes.number,\n  segments: PropTypes.array\n};\n","export function hash(str) {\n  let hash = 5381;\n  let i = str.length;\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  // to positive number\n  return (hash >>> 0).toString(16);\n}\n","import DBC from './models/can/dbc';\n\nconst AcuraDbc = new DBC(`\nVERSION \"\"\n\n\nNS_ :\n    NS_DESC_\n    CM_\n    BA_DEF_\n    BA_\n    VAL_\n    CAT_DEF_\n    CAT_\n    FILTER\n    BA_DEF_DEF_\n    EV_DATA_\n    ENVVAR_DATA_\n    SGTYPE_\n    SGTYPE_VAL_\n    BA_DEF_SGTYPE_\n    BA_SGTYPE_\n    SIG_TYPE_REF_\n    VAL_TABLE_\n    SIG_GROUP_\n    SIG_VALTYPE_\n    SIGTYPE_VALTYPE_\n    BO_TX_BU_\n    BA_DEF_REL_\n    BA_REL_\n    BA_DEF_DEF_REL_\n    BU_SG_REL_\n    BU_EV_REL_\n    BU_BO_REL_\n    SG_MUL_VAL_\n\nBS_:\n\nBU_: INTERCEPTOR EBCM NEO ADAS PCM EPS VSA SCM BDY XXX\n\n\nBO_ 57 XXX_1: 3 XXX\n\nBO_ 145 XXX_2: 8 XXX\n SG_ LAT_ACCEL : 7|10@0+ (0.02,-512) [-20|20] \"m/s2\" NEO\n\nBO_ 228 STEERING_CONTROL: 5 ADAS\n SG_ STEER_TORQUE : 7|16@0- (1,0) [-3840|3840] \"\" EPS\n SG_ STEER_TORQUE_REQUEST : 23|1@0+ (1,0) [0|1] \"\" EPS\n SG_ SET_ME_X00 : 31|8@0+ (1,0) [0|0] \"\" EPS\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] \"\" EPS\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] \"\" EPS\n\nBO_ 304 GAS_PEDAL2: 8 PCM\n SG_ ENGINE_TORQUE_ESTIMATE : 7|16@0- (1,0) [-1000|1000] \"Nm\" NEO\n SG_ ENGINE_TORQUE_REQUEST : 23|16@0- (1,0) [-1000|1000] \"Nm\" NEO\n SG_ CAR_GAS : 39|8@0+ (1,0) [0|255] \"\" NEO\n\nBO_ 316 GAS_PEDAL: 8 PCM\n SG_ CAR_GAS : 39|8@0+ (1,0) [0|255] \"\" NEO\n\nBO_ 342 STEERING_SENSORS: 6 EPS\n SG_ STEER_ANGLE : 7|16@0- (-0.1,0) [-500|500] \"deg\" NEO\n SG_ STEER_ANGLE_RATE : 23|16@0- (1,0) [-3000|3000] \"deg/s\" NEO\n SG_ COUNTER : 45|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 43|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 344 POWERTRAIN_DATA: 8 PCM\n SG_ XMISSION_SPEED : 7|16@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ ENGINE_RPM : 23|16@0+ (1,0) [0|15000] \"rpm\" NEO\n SG_ XMISSION_SPEED2 : 39|16@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n SG_ ODOMETER : 55|8@0+ (1,0) [0|255] \"\" XXX\n\nBO_ 380 POWERTRAIN_DATA2: 8 PCM\n SG_ PEDAL_GAS : 7|8@0+ (1,0) [0|255] \"\" NEO\n SG_ ENGINE_RPM : 23|16@0+ (1,0) [0|15000] \"rpm\" NEO\n SG_ GAS_PRESSED : 39|1@0+ (1,0) [0|1] \"\" NEO\n SG_ ACC_STATUS : 38|1@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BOH_17C : 37|5@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BRAKE_SWITCH : 32|1@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BOH2_17C : 47|10@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BRAKE_PRESSED : 53|1@0+ (1,0) [0|1] \"\" NEO\n SG_ BOH3_17C : 52|5@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 398 XXX_3: 3 XXX\n\nBO_ 399 STEER_STATUS: 7 EPS\n SG_ STEER_TORQUE_SENSOR : 7|16@0- (1,0) [-31000|31000] \"tbd\" NEO\n SG_ STEER_TORQUE_MOTOR : 23|16@0- (1,0) [-31000|31000] \"tbd\" NEO\n SG_ STEER_STATUS : 39|4@0+ (1,0) [0|15] \"\" NEO\n SG_ STEER_CONTROL_ACTIVE : 35|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 419 GEARBOX: 8 PCM\n SG_ GEAR : 7|8@0+ (1,0) [0|256] \"\" NEO\n SG_ GEAR_SHIFTER : 35|4@0+ (1,0) [0|15] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 420 VSA_STATUS: 8 VSA\n SG_ USER_BRAKE : 7|16@0+ (0.015625,-1.609375) [0|1000] \"\" NEO\n SG_ ESP_DISABLED : 28|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 422 SCM_BUTTONS: 8 SCM\n SG_ CRUISE_BUTTONS : 7|3@0+ (1,0) [0|7] \"\" NEO\n SG_ LIGHTS_SETTING : 1|2@0+ (1,0) [0|3] \"\" NEO\n SG_ MAIN_ON : 47|1@0+ (1,0) [0|1] \"\" NEO\n SG_ CRUISE_SETTING : 43|2@0+ (1,0) [0|3] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 428 XXX_4: 8 XXX\n\nBO_ 432 STANDSTILL: 7 VSA\n SG_ WHEELS_MOVING : 12|1@0+ (1,0) [0|1] \"\" NEO\n SG_ BRAKE_ERROR_1 : 11|1@0+ (1,0) [0|1] \"\" NEO\n SG_ BRAKE_ERROR_2 : 9|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 464 WHEEL_SPEEDS: 8 VSA\n SG_ WHEEL_SPEED_FL : 7|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ WHEEL_SPEED_FR : 8|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ WHEEL_SPEED_RL : 25|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ WHEEL_SPEED_RR : 42|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 476 XXX_5: 4 XXX\n\nBO_ 490 VEHICLE_DYNAMICS: 8 VSA\n SG_ LONG_ACCEL : 23|16@0- (0.0015384,0) [-20|20] \"m/s2\" NEO\n\nBO_ 506 BRAKE_COMMAND: 8 ADAS\n SG_ COMPUTER_BRAKE : 7|10@0+ (0.003906248,0) [0|1] \"\" EBCM\n SG_ ZEROS_BOH : 13|5@0+ (1,0) [0|1] \"\" EBCM\n SG_ COMPUTER_BRAKE_REQUEST : 8|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH2 : 23|3@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_OVERRIDE : 20|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH3 : 19|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_FAULT_CMD : 18|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_CANCEL_CMD : 17|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ COMPUTER_BRAKE_REQUEST_2 : 16|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH4 : 31|8@0+ (1,0) [0|1] \"\" EBCM\n SG_ BRAKE_LIGHTS : 39|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH5 : 38|7@0+ (1,0) [0|1] \"\" EBCM\n SG_ CHIME : 47|3@0+ (1,0) [0|7] \"\" EBCM\n SG_ CRUISE_BOH6 : 44|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ FCW : 43|2@0+ (1,0) [0|3] \"\" EBCM\n SG_ CRUISE_BOH7 : 41|10@0+ (1,0) [0|0] \"\" EBCM\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" EBCM\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" EBCM\n\nBO_ 512 GAS_COMMAND: 3 NEO\n SG_ GAS_COMMAND : 7|16@0+ (0.253984064,-83.3) [0|1] \"\" INTERCEPTOR\n SG_ COUNTER : 21|2@0+ (1,0) [0|3] \"\" INTERCEPTOR\n SG_ CHECKSUM : 19|4@0+ (1,0) [0|3] \"\" INTERCEPTOR\n\nBO_ 513 GAS_SENSOR: 5 INTERCEPTOR\n SG_ INTERCEPTOR_GAS : 7|16@0+ (0.253984064,-83.3) [0|1] \"\" NEO\n SG_ INTERCEPTOR_GAS2 : 23|16@0+ (0.126992032,-83.3) [0|1] \"\" NEO\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 542 XXX_6: 7 XXX\n\nBO_ 545 XXX_7: 4 XXX\n\nBO_ 597 ROUGH_WHEEL_SPEED: 8 VSA\n SG_ WHEEL_SPEED_FL : 7|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ WHEEL_SPEED_FR : 15|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ WHEEL_SPEED_RL : 23|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ WHEEL_SPEED_RR : 31|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ SET_TO_X55 : 47|8@0+ (1,0) [0|255] \"\" NEO\n\nBO_ 660 SCM_COMMANDS: 8 SCM\n SG_ RIGHT_BLINKER : 6|1@0+ (1,0) [0|1] \"\" NEO\n SG_ LEFT_BLINKER : 5|1@0+ (1,0) [0|1] \"\" NEO\n SG_ WIPERS_SPEED : 4|2@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 773 SEATBELT_STATUS: 7 BDY\n SG_ SEATBELT_DRIVER_LAMP : 7|1@0+ (1,0) [0|1] \"\" NEO\n SG_ SEATBELT_DRIVER_LATCHED : 13|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 777 XXX_8: 8 XXX\n\nBO_ 780 ACC_HUD: 8 ADAS\n SG_ PCM_SPEED : 7|16@0+ (0.002763889,0) [0|100] \"m/s\" BDY\n SG_ PCM_GAS : 23|7@0+ (1,0) [0|127] \"\" BDY\n SG_ ZEROS_BOH : 16|1@0+ (1,0) [0|255] \"\" BDY\n SG_ CRUISE_SPEED : 31|8@0+ (1,0) [0|255] \"\" BDY\n SG_ DTC_MODE : 39|1@0+ (1,0) [0|1] \"\" BDY\n SG_ BOH : 38|1@0+ (1,0) [0|1] \"\" BDY\n SG_ ACC_PROBLEM : 37|1@0+ (1,0) [0|1] \"\" BDY\n SG_ FCM_OFF : 36|1@0+ (1,0) [0|1] \"\" BDY\n SG_ BOH_2 : 35|1@0+ (1,0) [0|1] \"\" BDY\n SG_ FCM_PROBLEM : 34|1@0+ (1,0) [0|1] \"\" BDY\n SG_ RADAR_OBSTRUCTED : 33|1@0+ (1,0) [0|1] \"\" BDY\n SG_ ENABLE_MINI_CAR : 32|1@0+ (1,0) [0|1] \"\" BDY\n SG_ SET_ME_X03 : 47|2@0+ (1,0) [0|3] \"\" BDY\n SG_ HUD_LEAD : 45|2@0+ (1,0) [0|3] \"\" BDY\n SG_ BOH_3 : 43|1@0+ (1,0) [0|3] \"\" BDY\n SG_ BOH_4 : 42|1@0+ (1,0) [0|3] \"\" BDY\n SG_ BOH_5 : 41|1@0+ (1,0) [0|3] \"\" BDY\n SG_ CRUISE_CONTROL_LABEL : 40|1@0+ (1,0) [0|3] \"\" BDY\n SG_ HUD_DISTANCE_3 : 52|1@0+ (1,0) [0|1] \"\" BDY\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" BDY\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" BDY\n\nBO_ 800 XXX_9: 8 XXX\n\nBO_ 804 CRUISE: 8 PCM\n SG_ HUD_SPEED_KPH : 7|8@0+ (1,0) [0|255] \"kph\"  NEO\n SG_ HUD_SPEED_MPH : 15|8@0+ (1,0) [0|255] \"mph\"  NEO\n SG_ TRIP_FUEL_CONSUMED : 23|16@0+ (1,0) [0|255] \"\" NEO\n SG_ CRUISE_SPEED_PCM : 39|8@0+ (1,0) [0|255] \"\" NEO\n SG_ BOH2 : 47|8@0- (1,0) [0|255] \"\" NEO\n SG_ BOH3 : 55|8@0+ (1,0) [0|255] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 808 XXX_10: 8 XXX\n\nBO_ 819 XXX_11: 7 XXX\n\nBO_ 821 XXX_12: 5 XXX\n\nBO_ 829 LKAS_HUD_2: 5 ADAS\n SG_ CAM_TEMP_HIGH : 7|1@0+ (1,0) [0|255] \"\" BDY\n SG_ BOH : 23|2@0+ (1,0) [0|4] \"\" BDY\n SG_ DASHED_LANES : 14|1@0+ (1,0) [0|1] \"\" BDY\n SG_ DTC : 13|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LKAS_PROBLEM : 12|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LKAS_OFF : 11|1@0+ (1,0) [0|1] \"\" BDY\n SG_ SOLID_LANES : 10|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_RIGHT : 9|1@0+ (1,0) [0|1] \"\" BDY\n SG_ STEERING_REQUIRED : 8|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_PROBLEM : 21|1@0+ (1,0) [0|1] \"\" BDY\n SG_ BEEP : 17|2@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_ON : 28|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_OFF : 27|1@0+ (1,0) [0|1] \"\" BDY\n SG_ CLEAN_WINDSHIELD : 26|1@0+ (1,0) [0|1] \"\" BDY\n SG_ SET_ME_X48 : 31|8@0+ (1,0) [0|255] \"\" BDY\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] \"\" BDY\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] \"\" BDY\n\nBO_ 882 XXX_13: 2 XXX\n\nBO_ 884 XXX_14: 7 XXX\n\nBO_ 887 XXX_15: 8 XXX\n\nBO_ 888 XXX_16: 8 XXX\n\nBO_ 892 CRUISE_PARAMS: 8 PCM\n SG_ CRUISE_SPEED_OFFSET : 31|8@0- (0.1,0) [-128|127] \"kph\"  NEO\n\nBO_ 923 XXX_18: 2 XXX\n\nBO_ 929 XXX_19: 4 XXX\n\nBO_ 983 XXX_20: 8 XXX\n\nBO_ 985 XXX_21: 3 XXX\n\nBO_ 1024 XXX_22: 5 XXX\n\nBO_ 1027 XXX_23: 5 XXX\n\nBO_ 1029 DOORS_STATUS: 8 BDY\n SG_ DOOR_OPEN_FL : 37|1@0+ (1,0) [0|1] \"\" NEO\n SG_ DOOR_OPEN_FR : 38|1@0+ (1,0) [0|1] \"\" NEO\n SG_ DOOR_OPEN_RL : 39|1@0+ (1,0) [0|1] \"\" NEO\n SG_ DOOR_OPEN_RR : 40|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 1030 XXX_24: 5 VSA\n\nBO_ 1034 XXX_25: 5 XXX\n\nBO_ 1036 XXX_26: 8 XXX\n\nBO_ 1039 XXX_27: 8 XXX\n\nBO_ 1057 XXX_28: 5 EPS\n\nBO_ 1064 XXX_29: 7 XXX\n\nBO_ 1108 XXX_30: 8 XXX\n\nBO_ 1365 XXX_31: 5 XXX\n\nBO_ 1600 XXX_32: 5 XXX\n\nBO_ 1601 XXX_33: 8 XXX\n\nBO_TX_BU_ 228 : NEO,ADAS;\nBO_TX_BU_ 506 : NEO,ADAS;\nBO_TX_BU_ 780 : NEO,ADAS;\nBO_TX_BU_ 829 : NEO,ADAS;\n\nCM_ SG_ 419 GEAR \"10 = reverse, 11 = transition\";\nCM_ SG_ 490 LONG_ACCEL \"wheel speed derivative, noisy and zero snapping\";\nCM_ SG_ 780 CRUISE_SPEED \"255 = no speed\";\nCM_ SG_ 804 CRUISE_SPEED_PCM \"255 = no speed\";\nCM_ SG_ 829 BEEP \"beeps are pleasant, chimes are for warnngs etc...\";\nVAL_ 399 STEER_STATUS 5 \"fault\" 4 \"no_torque_alert_2\" 2 \"no_torque_alert_1\" 0 \"normal\" ;\nVAL_ 419 GEAR_SHIFTER 10 \"S\" 4 \"D\" 3 \"N\" 2 \"R\" 1 \"P\" ;\nVAL_ 422 CRUISE_BUTTONS 7 \"tbd\" 6 \"tbd\" 5 \"tbd\" 4 \"accel_res\" 3 \"decel_set\" 2 \"cancel\" 1 \"main\" 0 \"none\" ;\nVAL_ 422 LIGHTS_SETTING 3 \"high_beam\" 2 \"low_beam\" 1 \"position\" 0 \"no_lights\" ;\nVAL_ 422 CRUISE_SETTING 3 \"distance_adj\" 2 \"tbd\" 1 \"lkas_button\" 0 \"none\" ;\nVAL_ 506 CHIME 4 \"double_chime\" 3 \"single_chime\" 2 \"continuous_chime\" 1 \"repeating_chime\" 0 \"no_chime\" ;\nVAL_ 506 FCW 3 \"fcw\" 2 \"fcw\" 1 \"fcw\" 0 \"no_fcw\" ;\nVAL_ 780 HUD_LEAD 3 \"no_car\" 2 \"solid_car\" 1 \"dashed_car\" 0 \"no_car\" ;\nVAL_ 829 BEEP 3 \"single_beep\" 2 \"triple_beep\" 1 \"repeated_beep\" 0 \"no_beep\" ;\n\nCM_ \"CHFFR_METRIC 342 STEER_ANGLE STEER_ANGLE 0.36 180; CHFFR_METRIC 380 ENGINE_RPM ENGINE_RPM 1 0; CHFFR_METRIC 804 ENGINE_TEMPERATURE ENGINE_TEMPERATURE 1 0\";\n`);\n\nexport default AcuraDbc;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CommaAuth from '@commaai/my-comma-auth';\nimport { request as Request } from '@commaai/comma-api';\nimport Sentry from './logging/Sentry';\nimport CanExplorer from './CanExplorer';\nimport AcuraDbc from './acura-dbc';\nimport { getUrlParameter, modifyQueryParameters } from './utils/url';\nimport { GITHUB_AUTH_TOKEN_KEY } from './config';\nimport {\n  fetchPersistedDbc,\n  fetchPersistedGithubAuthToken,\n  persistGithubAuthToken\n} from './api/localstorage';\nimport './index.css';\n\nSentry.init();\n\nconst routeFullName = getUrlParameter('route');\nconst isDemo = !routeFullName;\nlet segments = getUrlParameter('segments');\nif (segments && segments.length) {\n  segments = segments.split(',').map(Number);\n\n  if (segments.length !== 2) {\n    segments = undefined;\n  }\n}\nconst props = {\n  autoplay: true,\n  startTime: Number(getUrlParameter('seekTime') || 0),\n  segments,\n  isDemo\n};\nlet persistedDbc = null;\n\nif (routeFullName) {\n  const [dongleId, route] = routeFullName.split('|');\n  props.dongleId = dongleId;\n  props.name = route;\n\n  persistedDbc = fetchPersistedDbc(routeFullName);\n\n  const max = getUrlParameter('max');\n  const url = getUrlParameter('url');\n  const exp = getUrlParameter('exp');\n  const sig = getUrlParameter('sig');\n\n  if (max) {\n    props.max = max;\n  }\n  if (url) {\n    props.url = url;\n  }\n  if (exp) {\n    props.exp = exp;\n  }\n  if (sig) {\n    props.sig = sig;\n  }\n  props.isLegacyShare = max && url && !exp && !sig;\n  props.isShare = max && url && exp && sig;\n} else if (getUrlParameter('demo')) {\n  props.max = 12;\n  props.url = 'https://chffrprivate.blob.core.windows.net/chffrprivate3-permanent/v2/cb38263377b873ee/78392b99580c5920227cc5b43dff8a70_2017-06-12--18-51-47';\n  props.name = '2017-06-12--18-51-47';\n  props.dongleId = 'cb38263377b873ee';\n  props.dbc = AcuraDbc;\n  props.isDemo = true;\n  props.dbcFilename = 'acura_ilx_2016_can.dbc';\n\n  // lots of 404s on this one\n  // props.max = 752;\n  // props.url = 'https://chffrprivate.blob.core.windows.net/chffrprivate3/v2/07e243287e48432a/d97fcc321a58e660a14de72b749269ba_2017-09-09--22-00-00';\n  // props.name = '2017-09-09--22-00-00';\n  // props.dongleId = '07e243287e48432a';\n  // props.dbc = AcuraDbc;\n  // props.dbcFilename = 'acura_ilx_2016_can.dbc';\n\n  // really long one with real content\n  // props.max = 597;\n  // props.url = 'https://chffrprivate.blob.core.windows.net/chffrprivate3/v2/0c249898b339e978/957935e6a75bc2bf6f626fcbe6db93ba_2017-08-11--04-47-54';\n  // props.name = '2017-08-11--04-47-54';\n  // props.dongleId = '0c249898b339e978';\n  // props.dbc = AcuraDbc;\n  // props.dbcFilename = 'acura_ilx_2016_can.dbc';\n}\n\nif (persistedDbc) {\n  const { dbcFilename, dbc } = persistedDbc;\n  props.dbc = dbc;\n  props.dbcFilename = dbcFilename;\n}\n\nconst authTokenQueryParam = getUrlParameter(GITHUB_AUTH_TOKEN_KEY);\nif (authTokenQueryParam !== null) {\n  props.githubAuthToken = authTokenQueryParam;\n  persistGithubAuthToken(authTokenQueryParam);\n  const urlNoAuthToken = modifyQueryParameters({\n    remove: [GITHUB_AUTH_TOKEN_KEY]\n  });\n  window.location.href = urlNoAuthToken;\n} else {\n  props.githubAuthToken = fetchPersistedGithubAuthToken();\n}\n\nasync function init() {\n  const token = await CommaAuth.init();\n  if (token) {\n    Request.configure(token);\n  }\n  ReactDOM.render(<CanExplorer {...props} />, document.getElementById('root')); // eslint-disable-line react/jsx-props-no-spreading\n}\n\nif (routeFullName || isDemo) {\n  init();\n} else {\n  const img = document.createElement('img');\n  img.src = `${process.env.PUBLIC_URL}/img/cabana.jpg`;\n  img.style.width = '100%';\n  const comment = document.createComment('7/6/17');\n\n  document.getElementById('root').appendChild(img);\n  document.getElementById('root').appendChild(comment);\n}\n","export default class Frame {\n  constructor({\n    name,\n    id = 0,\n    size = 0,\n    transmitters = [],\n    extended = 0,\n    comment = null,\n    signals = {}\n  }) {\n    Object.assign(this, {\n      name,\n      id,\n      size,\n      transmitters,\n      extended,\n      comment,\n      signals\n    });\n  }\n\n  nextNewTransmitterName() {\n    let txNum = 1;\n    let txName;\n    do {\n      txName = `NEW_TRANSMITTER_${txNum}`;\n      txNum++;\n    } while (this.transmitters.indexOf(txName) !== -1);\n\n    return txName;\n  }\n\n  addTransmitter() {\n    const txName = this.nextNewTransmitterName();\n    this.transmitters.push(txName);\n    return txName;\n  }\n\n  header() {\n    return (\n      `BO_ ${this.id} ${this.name}: ${this.size} `\n      + `${this.transmitters[0] || 'XXX'}`\n    );\n  }\n\n  text() {\n    const signals = Object.values(this.signals)\n      .map((signal) => ` ${signal.text()}`) // indent\n      .join('\\n');\n\n    if (signals.length > 0) {\n      return `${this.header()}\\n${signals}`;\n    }\n    return this.header();\n  }\n\n  copy() {\n    const copy = Object.assign(Object.create(this), this);\n\n    return copy;\n  }\n}\n","// Vendored from https://github.com/rapid7/le_js, which is broken with webpack.\n/* eslint-disable */\n\nif (typeof window === \"undefined\") {\n  // eslint-disable-line no-use-before-define\n  var window = self;\n}\nvar _indexOf = function(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (obj === array[i]) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n// Obtain a browser-specific XHR object\nvar _getAjaxObject = function() {\n  if (typeof XDomainRequest !== \"undefined\") {\n    // We're using IE8/9\n    return new XDomainRequest();\n  }\n  return new XMLHttpRequest();\n};\n\n/**\n * A single log event stream.\n * @constructor\n * @param {Object} options\n */\nfunction LogStream(options) {\n  /**\n   * @const\n   * @type {string} */\n  var _traceCode = options.trace\n    ? (Math.random() + Math.PI).toString(36).substring(2, 10)\n    : null;\n  /** @type {string} */\n  var _pageInfo = options.page_info;\n  /** @type {string} */\n  var _token = options.token;\n  /** @type {boolean} */\n  var _print = options.print;\n  /** @type {boolean} */\n  var _noFormat = options.no_format;\n  /** @type {boolean} */\n  var _SSL = (function() {\n    if (typeof XDomainRequest === \"undefined\") {\n      return options.ssl;\n    }\n    // If we're relying on XDomainRequest, we\n    // must adhere to the page's encryption scheme.\n    return window.location.protocol === \"https:\" ? true : false;\n  })();\n  /** @type {string} */\n  var _endpoint;\n  if (window.LEENDPOINT) {\n    _endpoint = window.LEENDPOINT;\n  } else if (_noFormat) {\n    _endpoint = \"webhook.logentries.com/noformat\";\n  } else {\n    _endpoint = \"js.logentries.com/v1\";\n  }\n  _endpoint = (_SSL ? \"https://\" : \"http://\") + _endpoint + \"/logs/\" + _token;\n\n  /**\n   * Flag to prevent further invocations on network err\n   ** @type {boolean} */\n  var _shouldCall = true;\n  /** @type {Array.<string>} */\n  var _backlog = [];\n  /** @type {boolean} */\n  var _active = false;\n  /** @type {boolean} */\n  var _sentPageInfo = false;\n\n  var _apiCall = function(token, data) {\n    _active = true;\n\n    var request = _getAjaxObject();\n\n    if (_shouldCall) {\n      if (request.constructor === XMLHttpRequest) {\n        // Currently we don't support fine-grained error\n        // handling in older versions of IE\n        request.onreadystatechange = function() {\n          if (request.readyState === 4) {\n            // Handle any errors\n            if (request.status >= 400) {\n              console.error(\"Couldn't submit events.\");\n              if (request.status === 410) {\n                // This API version has been phased out\n                console.warn(\"This version of le_js is no longer supported!\");\n              }\n            } else {\n              if (request.status === 301) {\n                // Server issued a deprecation warning\n                console.warn(\n                  \"This version of le_js is deprecated! Consider upgrading.\"\n                );\n              }\n              if (_backlog.length > 0) {\n                // Submit the next event in the backlog\n                _apiCall(token, _backlog.shift());\n              } else {\n                _active = false;\n              }\n            }\n          }\n        };\n      } else {\n        request.onload = function() {\n          if (_backlog.length > 0) {\n            // Submit the next event in the backlog\n            _apiCall(token, _backlog.shift());\n          } else {\n            _active = false;\n          }\n        };\n      }\n\n      request.open(\"POST\", _endpoint, true);\n      if (request.constructor === XMLHttpRequest) {\n        request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        request.setRequestHeader(\"Content-type\", \"application/json\");\n      }\n\n      if (request.overrideMimeType) {\n        request.overrideMimeType(\"text\");\n      }\n\n      request.send(data);\n    }\n  };\n\n  var _getEvent = function() {\n    var raw = null;\n    var args = Array.prototype.slice.call(arguments);\n    if (args.length === 0) {\n      throw new Error(\"No arguments!\");\n    } else if (args.length === 1) {\n      raw = args[0];\n    } else {\n      // Handle a variadic overload,\n      // e.g. _rawLog(\"some text \", x, \" ...\", 1);\n      raw = args;\n    }\n    return raw;\n  };\n\n  var _agentInfo = function() {\n    var nav = window.navigator || { doNotTrack: undefined };\n    var screen = window.screen || {};\n    var location = window.location || {};\n\n    return {\n      url: location.pathname,\n      referrer: document.referrer,\n      screen: {\n        width: screen.width,\n        height: screen.height\n      },\n      window: {\n        width: window.innerWidth,\n        height: window.innerHeight\n      },\n      browser: {\n        name: nav.appName,\n        version: nav.appVersion,\n        cookie_enabled: nav.cookieEnabled,\n        do_not_track: nav.doNotTrack\n      },\n      platform: nav.platform\n    };\n  };\n\n  // Single arg stops the compiler arity warning\n  var _rawLog = function(msg) {\n    var event = _getEvent.apply(this, arguments);\n\n    var data = { event: event };\n\n    // Add agent info if required\n    if (_pageInfo !== \"never\") {\n      if (!_sentPageInfo || _pageInfo === \"per-entry\") {\n        _sentPageInfo = true;\n        if (\n          typeof event.screen === \"undefined\" &&\n          typeof event.browser === \"undefined\"\n        )\n          _rawLog(_agentInfo())\n            .level(\"PAGE\")\n            .send();\n      }\n    }\n\n    if (_traceCode) {\n      data.trace = _traceCode;\n    }\n\n    return {\n      level: function(l) {\n        // Don't log PAGE events to console\n        // PAGE events are generated for the agentInfo function\n        if (_print && typeof console !== \"undefined\" && l !== \"PAGE\") {\n          var serialized = null;\n          if (typeof XDomainRequest !== \"undefined\") {\n            // We're using IE8/9\n            serialized = data.trace + \" \" + data.event;\n          }\n          try {\n            console[l.toLowerCase()].call(console, serialized || data);\n          } catch (ex) {\n            // IE compat fix\n            console.log(serialized || data);\n          }\n        }\n        data.level = l;\n\n        return {\n          send: function() {\n            var cache = [];\n            var serialized = JSON.stringify(data, function(key, value) {\n              if (typeof value === \"undefined\") {\n                return \"undefined\";\n              } else if (typeof value === \"object\" && value !== null) {\n                if (_indexOf(cache, value) !== -1) {\n                  // We've seen this object before;\n                  // return a placeholder instead to prevent\n                  // cycles\n                  return \"<?>\";\n                }\n                cache.push(value);\n              }\n              return value;\n            });\n\n            if (_active) {\n              _backlog.push(serialized);\n            } else {\n              _apiCall(_token, serialized);\n            }\n          }\n        };\n      }\n    };\n  };\n\n  if (options.catchall) {\n    var oldHandler = window.onerror;\n    var newHandler = function(msg, url, line) {\n      _rawLog({ error: msg, line: line, location: url })\n        .level(\"ERROR\")\n        .send();\n      if (oldHandler) {\n        return oldHandler(msg, url, line);\n      } else {\n        return false;\n      }\n    };\n    window.onerror = newHandler;\n  }\n\n  /** @expose */\n  this.log = _rawLog;\n}\n\n/**\n * A single log object\n * @constructor\n * @param {Object} options\n */\nfunction Logger(options) {\n  var logger;\n\n  // Default values\n  var dict = {\n    ssl: true,\n    catchall: false,\n    trace: true,\n    page_info: \"never\",\n    print: false,\n    endpoint: null,\n    token: null\n  };\n\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];\n  else throw new Error(\"Invalid parameters for createLogStream()\");\n\n  if (dict.token === null) {\n    throw new Error(\"Token not present.\");\n  } else {\n    logger = new LogStream(dict);\n  }\n\n  var _log = function(msg) {\n    if (logger) {\n      return logger.log.apply(this, arguments);\n    } else throw new Error(\"You must call LE.init(...) first.\");\n  };\n\n  // The public interface\n  return {\n    log: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"LOG\")\n        .send();\n    },\n    warn: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"WARN\")\n        .send();\n    },\n    error: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"ERROR\")\n        .send();\n    },\n    info: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"INFO\")\n        .send();\n    }\n  };\n}\n\n// Array of Logger elements\nvar loggers = {};\n\nvar _getLogger = function(name) {\n  if (!loggers.hasOwnProperty(name))\n    throw new Error(\"Invalid name for logStream\");\n\n  return loggers[name];\n};\n\nvar _createLogStream = function(options) {\n  if (typeof options.name !== \"string\") throw new Error(\"Name not present.\");\n  else if (loggers.hasOwnProperty(options.name))\n    throw new Error(\"A logger with that name already exists!\");\n  loggers[options.name] = new Logger(options);\n\n  return true;\n};\n\nvar _deprecatedInit = function(options) {\n  var dict = {\n    name: \"default\"\n  };\n\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];\n  else if (typeof options === \"string\") dict.token = options;\n  else throw new Error(\"Invalid parameters for init()\");\n\n  return _createLogStream(dict);\n};\n\nvar _destroyLogStream = function(name) {\n  if (typeof name === \"undefined\") {\n    name = \"default\";\n  }\n\n  delete loggers[name];\n};\n\n// The public interface\nexport default {\n  init: _deprecatedInit,\n  createLogStream: _createLogStream,\n  to: _getLogger,\n  destroy: _destroyLogStream,\n  log: function() {\n    for (var k in loggers) loggers[k].log.apply(this, arguments);\n  },\n  warn: function() {\n    for (var k in loggers) loggers[k].warn.apply(this, arguments);\n  },\n  error: function() {\n    for (var k in loggers) loggers[k].error.apply(this, arguments);\n  },\n  info: function() {\n    for (var k in loggers) loggers[k].info.apply(this, arguments);\n  }\n};\n","import Frame from './frame';\nimport Signal from './signal';\n\nexport const wheelSpeeds = {\n  FrontLeftWheel: shortSignal({\n    index: 0,\n    factor: 0.001\n  }),\n  FrontRightWheel: shortSignal({\n    index: 1,\n    factor: 0.001\n  }),\n  RearLeftWheel: shortSignal({\n    index: 2,\n    factor: 0.001\n  }),\n  RearRightWheel: shortSignal({\n    index: 3,\n    factor: 0.001\n  })\n};\n\nexport const ego = {\n  VEgo: shortSignal({\n    index: 0,\n    factor: 0.001\n  }),\n  AEgo: shortSignal({\n    index: 1,\n    factor: 0.001\n  }),\n  VEgoRaw: shortSignal({\n    index: 2,\n    factor: 0.001\n  }),\n  YawRate: shortSignal({\n    index: 3,\n    factor: 0.001\n  })\n};\n\nexport const controls = {\n  SteeringAngle: longSignal({\n    index: 0,\n    factor: 0.001\n  }),\n  Brake: shortSignal({\n    index: 2,\n    factor: 0.001\n  }),\n  Gas: shortSignal({\n    index: 3,\n    factor: 0.001\n  })\n};\n\nexport const flags = {\n  LeftBlinker: boolSignal({\n    index: 0\n  }),\n  RightBlinker: boolSignal({\n    index: 1\n  }),\n  GenericToggle: boolSignal({\n    index: 2\n  }),\n  DoorOpen: boolSignal({\n    index: 3\n  }),\n  SeatbeltUnlatched: boolSignal({\n    index: 4\n  }),\n  GasPressed: boolSignal({\n    index: 5\n  }),\n  BrakeLights: boolSignal({\n    index: 6\n  }),\n  SteeringPressed: boolSignal({\n    index: 7\n  }),\n  Standstill: boolSignal({\n    index: 8\n  }),\n  'CruiseState.Enabled': boolSignal({\n    index: 9\n  }),\n  'CruiseState.Available': boolSignal({\n    index: 10\n  }),\n  'CruiseState.Standstill': boolSignal({\n    index: 11\n  }),\n  GearShifter: {\n    startBit: 15,\n    size: 4,\n    unsigned: true\n  },\n  'CruiseState.Speed': charSignal({\n    index: 2\n  })\n};\n\nexport const ubloxGnss = {\n  RcvTow: longSignal({\n    index: 0\n  }),\n  GpsWeek: shortSignal({\n    index: 2\n  }),\n  LeapSeconds: {\n    startBit: 55,\n    size: 8\n  },\n  NumMeas: {\n    startBit: 63,\n    size: 8\n  }\n};\n\nexport const health = {\n  Voltage: shortSignal({\n    index: 0\n  }),\n  Current: charSignal({\n    index: 2\n  }),\n  Started: boolSignal({\n    index: 24\n  }),\n  ControlsAllowed: boolSignal({\n    index: 25\n  }),\n  GasInterceptorDetected: boolSignal({\n    index: 26\n  }),\n  StartedSignalDetected: boolSignal({\n    index: 27\n  })\n};\n\nexport const thermalCPU = {\n  Cpu0: shortSignal({\n    index: 0,\n    unsigned: true\n  }),\n  Cpu1: shortSignal({\n    index: 1,\n    unsigned: true\n  }),\n  Cpu2: shortSignal({\n    index: 2,\n    unsigned: true\n  }),\n  Cpu3: shortSignal({\n    index: 3,\n    unsigned: true\n  })\n};\n\nexport const thermalData = {\n  Mem: shortSignal({\n    index: 0,\n    unsigned: true\n  }),\n  Gpu: shortSignal({\n    index: 1,\n    unsigned: true\n  }),\n  FanSpeed: shortSignal({\n    index: 2,\n    unsigned: true\n  }),\n  BatteryPercent: charSignal({\n    index: 6,\n    unsigned: true\n  }),\n  UsbOnline: boolSignal({\n    index: 56\n  }),\n  Started: boolSignal({\n    index: 57\n  })\n};\n\nexport const thermalFreeSpace = {\n  FreeSpace: longSignal({\n    index: 0,\n    unsigned: true,\n    factor: 0.000000001\n  })\n};\n\nexport const signalMap = {\n  'CarState:WheelSpeeds': wheelSpeeds,\n  'CarState:Ego': ego,\n  'CarState:Controls': controls,\n  'CarState:Flags': flags,\n  'UbloxGnss:MeasurementReport': ubloxGnss,\n  'Health:Data': health,\n  'Thermal:CPU': thermalCPU,\n  'Thermal:Data': thermalData,\n  'Thermal:FreeSpace': thermalFreeSpace\n};\n\nconst ADDRESS_LIST = [];\n\nObject.keys(signalMap).forEach((name) => {\n  Object.keys(signalMap[name]).forEach((signal) => {\n    signalMap[name][signal] = createSignalEntry({\n      name: signal,\n      ...signalMap[name][signal]\n    });\n  });\n  addressForName(name);\n});\n\nfunction createSignalEntry(options) {\n  return new Signal({\n    name: options.name,\n    startBit: options.startBit,\n    size: options.size,\n    isLittleEndian: false,\n    isSigned: !options.unsigned,\n    factor: options.factor || 1,\n    offset: options.offset || 0,\n    unit: options.unit || ''\n  });\n}\n\nfunction longSignal(options) {\n  return {\n    ...options,\n    size: 32,\n    startBit: options.index * 32 + 7\n  };\n}\n\nfunction shortSignal(options) {\n  return {\n    ...options,\n    size: 16,\n    startBit: options.index * 16 + 7\n  };\n}\n\nfunction charSignal(options) {\n  return {\n    ...options,\n    size: 8,\n    startBit: options.index * 8 + 7\n  };\n}\n\nfunction boolSignal(options) {\n  return {\n    ...options,\n    size: 1,\n    startBit: options.index,\n    unsigned: true\n  };\n}\n\nexport function addressForName(name) {\n  const i = ADDRESS_LIST.indexOf(name);\n  if (i === -1) {\n    ADDRESS_LIST.push(name);\n    return ADDRESS_LIST.indexOf(name) + 0x1000;\n  }\n  return i + 0x1000;\n}\n\nexport function nameForAddress(address) {\n  if (address >= 0x1000) {\n    return ADDRESS_LIST[address - 0x1000];\n  }\n  return null;\n}\n\nexport function isLogAddress(address) {\n  return !!nameForAddress(address);\n}\n\nexport function frameForAddress(address) {\n  const name = nameForAddress(address);\n  return new Frame({\n    id: name,\n    name,\n    size: 8,\n    signals: signalMap[name]\n  });\n}\n"],"sourceRoot":""}