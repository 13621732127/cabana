(this["webpackJsonpcan-explorer"]=this["webpackJsonpcan-explorer"]||[]).push([[2],[function(t,e,n){"use strict";var r=function(t,e,n){return t.fields=e||[],t.fname=n,t};function i(t){return null==t?null:t.fname}function a(t){return null==t?null:t.fields}var o=function(t){throw Error(t)},s=function(t){var e,n,r,i=[],a=null,s=0,u=t.length,c="";function l(){i.push(c+t.substring(e,n)),c="",e=n+1}for(t+="",e=n=0;n<u;++n)if("\\"===(r=t[n]))c+=t.substring(e,n),e=++n;else if(r===a)l(),a=null,s=-1;else{if(a)continue;e===s&&'"'===r?(e=n+1,a=r):e===s&&"'"===r?(e=n+1,a=r):"."!==r||s?"["===r?(n>e&&l(),s=e=n+1):"]"===r&&(s||o("Access path missing open bracket: "+t),s>0&&l(),s=0,e=n+1):n>e?l():e=n+1}return s&&o("Access path missing closing bracket: "+t),a&&o("Access path missing closing quote: "+t),n>e&&(n++,l()),i},u=Array.isArray,c=function(t){return t===Object(t)},l=function(t){return"string"===typeof t};function f(t){return u(t)?"["+t.map(f)+"]":c(t)||l(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var h=function(t,e){var n=s(t),i="return _["+n.map(f).join("][")+"];";return r(Function("_",i),[t=1===n.length?n[0]:t],e||t)},d=[],p=h("id"),v=r((function(t){return t}),d,"identity"),g=r((function(){return 0}),d,"zero"),m=r((function(){return 1}),d,"one"),y=r((function(){return!0}),d,"true"),b=r((function(){return!1}),d,"false");function _(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}var w=function(t,e){var n=t||0;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=1&&_(e||"error","ERROR",arguments),this},warn:function(){return n>=2&&_(e||"warn","WARN",arguments),this},info:function(){return n>=3&&_(e||"log","INFO",arguments),this},debug:function(){return n>=4&&_(e||"log","DEBUG",arguments),this}}},x=function(t){return t[t.length-1]},k=function(t){return null==t||""===t?null:+t};function E(t){return function(e){return t*Math.exp(e)}}function S(t){return function(e){return Math.log(t*e)}}function O(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function A(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function T(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function C(t,e,n,r){var i=n(t[0]),a=n(x(t)),o=(a-i)*e;return[r(i-o),r(a-o)]}function j(t,e){return C(t,e,k,v)}function D(t,e){var n=Math.sign(t[0]);return C(t,e,S(n),E(n))}function R(t,e,n){return C(t,e,T(n),T(1/n))}function M(t,e,n){return C(t,e,O(n),A(n))}function P(t,e,n,r,i){var a=r(t[0]),o=r(x(t)),s=null!=e?r(e):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function F(t,e,n){return P(t,e,n,k,v)}function N(t,e,n){var r=Math.sign(t[0]);return P(t,e,n,S(r),E(r))}function L(t,e,n,r){return P(t,e,n,T(r),T(1/r))}function I(t,e,n,r){return P(t,e,n,O(r),A(r))}function B(t){return 1+~~(new Date(t).getMonth()/3)}function U(t){return 1+~~(new Date(t).getUTCMonth()/3)}var z=function(t){return null!=t?u(t)?t:[t]:[]},q=function(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-r),i+r]},W=function(t){return"function"===typeof t},H=function(t,e){var n,i,o,u,c,l,h,d,p,v=[],g=(t=z(t)).map((function(t,e){return null==t?null:(v.push(e),W(t)?t:s(t).map(f).join("]["))})),m=v.length-1,y=z(e),b="var u,v;return ";if(m<0)return null;for(i=0;i<=m;++i)o=g[n=v[i]],W(o)?(u="(u=this."+(l="f"+n)+"(a))",c="(v=this."+l+"(b))",(h=h||{})[l]=o):(u="(u=a["+o+"])",c="(v=b["+o+"])"),l="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==y[n]?(p=1,d=-1):(p=-1,d=1),b+="("+u+"<"+c+"||u==null)&&v!=null?"+d+":(u>v||v==null)&&u!=null?"+p+":"+l+"!==u&&v===v?"+d+":v!==v&&u===u?"+p+(n<m?":":":0");return o=Function("a","b",b+";"),h&&(o=o.bind(h)),t=t.reduce((function(t,e){return W(e)?(a(e)||[]).forEach((function(e){t[e]=1})):null!=e&&(t[e+""]=1),t}),{}),r(o,Object.keys(t))},G=function(t){return W(t)?t:function(){return t}},Y=function(t,e){var n,r;function i(){e(r),n=r=null}return function(e){r=e,n&&clearTimeout(n),n=setTimeout(i,t)}},V=function(t){for(var e,n,r=1,i=arguments.length;r<i;++r)for(n in e=arguments[r])t[n]=e[n];return t},$=function(t,e){var n,r,i,a,o=0;if(t&&(n=t.length))if(null==e){for(r=t[o];null==r||r!==r;r=t[++o]);for(i=a=r;o<n;++o)null!=(r=t[o])&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=e(t[o]);null==r||r!==r;r=e(t[++o]));for(i=a=r;o<n;++o)null!=(r=e(t[o]))&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]},X=function(t,e){var n,r,i,a,o,s=-1,u=t.length;if(null==e){for(;++s<u;)if(null!=(r=t[s])&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=t[s])&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{for(;++s<u;)if(null!=(r=e(t[s],s,t))&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=e(t[s],s,t))&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]},K=Object.prototype.hasOwnProperty,J=function(t,e){return K.call(t,e)},Z={},Q=function(t){var e,n,r={};function i(t){return J(r,t)&&r[t]!==Z}return e={size:0,empty:0,object:r,has:i,get:function(t){return i(t)?r[t]:void 0},set:function(t,n){return i(t)||(++e.size,r[t]===Z&&--e.empty),r[t]=n,this},delete:function(t){return i(t)&&(--e.size,++e.empty,r[t]=Z),this},clear:function(){e.size=e.empty=0,e.object=r={}},test:function(t){return arguments.length?(n=t,e):n},clean:function(){var t,i,a={},o=0;for(t in r)(i=r[t])===Z||n&&n(i)||(a[t]=i,++o);e.size=o,e.empty=0,e.object=r=a}},t&&Object.keys(t).forEach((function(n){e.set(n,t[n])})),e},tt=function(t,e,n,r,i,a){if(!n&&0!==n)return a;var o,s,u=t[0],c=x(t),l=+n;return c<u&&(o=u,u=c,c=o),(o=Math.abs(e-u))<(s=Math.abs(c-e))&&o<=l?r:s<=l?i:a},et=function(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n},nt=function(t,e,n,r){var i,a=e[0],o=e[e.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=t:a<t)&&(r?t<=o:t<o)},rt=function(t){return"boolean"===typeof t},it=function(t){return"[object Date]"===Object.prototype.toString.call(t)},at=function(t){return"number"===typeof t},ot=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},st=function(t,e){t&&(t=e?z(t).map((function(t){return t.replace(/\\(.)/g,"$1")})):z(t));var n=t&&t.length?Function("_","return ''+"+t.map((function(t){return"_["+(e?f(t):s(t).map(f).join("]["))+"]"})).join("+'|'+")+";"):function(){return""};return r(n,t,"key")},ut=function(t,e){var n=t[0],r=x(t),i=+e;return i?1===i?r:n+i*(r-n):n},ct=function(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),s=0,u=0,c=0;s<i&&u<a;++c)o[c]=t(e[s],n[u])>0?n[u++]:e[s++];for(;s<i;++s,++c)o[c]=e[s];for(;u<a;++u,++c)o[c]=n[u];return o},lt=function(t,e){for(var n="";--e>=0;)n+=t;return n},ft=function(t,e,n,r){var i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?lt(i,o)+a:"center"===r?lt(i,~~(o/2))+a+lt(i,Math.ceil(o/2)):a+lt(i,o)},ht=function(t){return t&&x(t)-t[0]||0},dt=function(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t)&&!!t};function pt(t){return at(t)?t:it(t)?t:Date.parse(t)}var vt=function(t,e){return e=e||pt,null==t||""===t?null:e(t)},gt=function(t){return null==t||""===t?null:t+""},mt=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},yt=function(t,e,n,r){var i=null!=r?r:"\u2026",a=t+"",o=a.length,s=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i},bt=function(t,e,n){if(t){var r,i=0,a=t.length;if(e)for(;i<a;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}};n.d(e,"f",(function(){return r})),n.d(e,"h",(function(){return i})),n.d(e,"g",(function(){return a})),n.d(e,"w",(function(){return p})),n.d(e,"x",(function(){return v})),n.d(e,"hb",(function(){return g})),n.d(e,"M",(function(){return m})),n.d(e,"eb",(function(){return y})),n.d(e,"r",(function(){return b})),n.d(e,"K",(function(){return w})),n.d(e,"d",(function(){return 0})),n.d(e,"b",(function(){return 1})),n.d(e,"e",(function(){return 2})),n.d(e,"c",(function(){return 3})),n.d(e,"a",(function(){return 4})),n.d(e,"O",(function(){return j})),n.d(e,"P",(function(){return D})),n.d(e,"Q",(function(){return R})),n.d(e,"R",(function(){return M})),n.d(e,"ib",(function(){return F})),n.d(e,"jb",(function(){return N})),n.d(e,"kb",(function(){return L})),n.d(e,"lb",(function(){return I})),n.d(e,"T",(function(){return B})),n.d(e,"fb",(function(){return U})),n.d(e,"i",(function(){return z})),n.d(e,"j",(function(){return q})),n.d(e,"k",(function(){return H})),n.d(e,"l",(function(){return G})),n.d(e,"m",(function(){return Y})),n.d(e,"n",(function(){return o})),n.d(e,"o",(function(){return V})),n.d(e,"p",(function(){return $})),n.d(e,"q",(function(){return X})),n.d(e,"s",(function(){return Q})),n.d(e,"t",(function(){return h})),n.d(e,"u",(function(){return tt})),n.d(e,"v",(function(){return J})),n.d(e,"y",(function(){return et})),n.d(e,"z",(function(){return nt})),n.d(e,"A",(function(){return u})),n.d(e,"B",(function(){return rt})),n.d(e,"C",(function(){return it})),n.d(e,"D",(function(){return W})),n.d(e,"E",(function(){return at})),n.d(e,"F",(function(){return c})),n.d(e,"G",(function(){return ot})),n.d(e,"H",(function(){return l})),n.d(e,"I",(function(){return st})),n.d(e,"J",(function(){return ut})),n.d(e,"L",(function(){return ct})),n.d(e,"N",(function(){return ft})),n.d(e,"S",(function(){return x})),n.d(e,"U",(function(){return lt})),n.d(e,"V",(function(){return ht})),n.d(e,"W",(function(){return s})),n.d(e,"X",(function(){return f})),n.d(e,"Y",(function(){return dt})),n.d(e,"Z",(function(){return vt})),n.d(e,"ab",(function(){return k})),n.d(e,"cb",(function(){return gt})),n.d(e,"bb",(function(){return mt})),n.d(e,"db",(function(){return yt})),n.d(e,"gb",(function(){return bt}))},function(t,e,n){"use strict";t.exports=n(239)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(78);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||Object(r.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}var a=n(5);function o(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(a.a)(t):e}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){t.exports=n(233)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(76);var i=n(77);function a(t,e){return Object(r.a)(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(t,e)||Object(i.a)()}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";function r(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},,function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var a=typeof r;if("string"===a||"number"===a)t.push(r);else if(Array.isArray(r)&&r.length){var o=i.apply(null,r);o&&t.push(o)}else if("object"===a)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){t.exports=n(461)()},,,function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var r=n(344),i=n(345),a=n(346);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&a(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(t,a+h)!==c(e,h)){f=!1;break}if(f)return a}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function _(t,e,n,r){return W(z(e,t.length-n),t,n,r)}function w(t,e,n,r){return W(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function k(t,e,n,r){return W(q(e),t,n,r)}function E(t,e,n,r){return W(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function j(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=U(t[a]);return i}function D(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,a){return a||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,a){return a||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:z(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function q(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(19))},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,function(t,e,n){var r=n(99)("wks"),i=n(64),a=n(21).Symbol,o="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=o&&a[t]||(o?a:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";var r=n(187),i=n(472),a=Object.prototype.toString;function o(t){return"[object Array]"===a.call(t)}function s(t){return null!==t&&"object"===typeof t}function u(t){return"[object Function]"===a.call(t)}function c(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===a.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!==typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:s,isUndefined:function(t){return"undefined"===typeof t},isDate:function(t){return"[object Date]"===a.call(t)},isFile:function(t){return"[object File]"===a.call(t)},isBlob:function(t){return"[object Blob]"===a.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function t(){var e={};function n(n,r){"object"===typeof e[r]&&"object"===typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"===typeof e[r]&&"object"===typeof n?e[r]=t(e[r],n):e[r]="object"===typeof n?t({},n):n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,(function(e,i){t[i]=n&&"function"===typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){t.exports=n(243)},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(61),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new a.default((function(t,n){return function r(i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}if(!s.done)return a.default.resolve(u).then((function(t){r("next",t)}),(function(t){r("throw",t)}));t(u)}("next")}))}}},function(t,e,n){var r=n(21),i=n(18),a=n(43),o=n(39),s=n(40),u=function t(e,n,u){var c,l,f,h=e&t.F,d=e&t.G,p=e&t.S,v=e&t.P,g=e&t.B,m=e&t.W,y=d?i:i[n]||(i[n]={}),b=y.prototype,_=d?r:p?r[n]:(r[n]||{}).prototype;for(c in d&&(u=n),u)(l=!h&&_&&void 0!==_[c])&&s(y,c)||(f=l?_[c]:u[c],y[c]=d&&"function"!=typeof _[c]?u[c]:g&&l?a(f,r):m&&_[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?a(Function.call,f):f,v&&((y.virtual||(y.virtual={}))[c]=f,e&t.R&&b&&!b[c]&&o(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(35);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=u(n(470)),o=u(n(55)),s=n(196);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=(0,o.default)("github:request"),f=function(t){function e(t,n,r){c(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.path=n,i.request=r.config,i.response=(r||{}).response||r,i.status=r.status,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}(),h=function(){function t(e,n,r){c(this,t),this.__apiBase=n||"https://api.github.com",this.__auth={token:e.token,username:e.username,password:e.password},this.__AcceptHeader=r||"v3",e.token?this.__authorizationHeader="token "+e.token:e.username&&e.password&&(this.__authorizationHeader="Basic "+s.Base64.encode(e.username+":"+e.password))}return i(t,[{key:"__getURL",value:function(t){var e=t;-1===t.indexOf("//")&&(e=this.__apiBase+t);var n="timestamp="+(new Date).getTime();return e.replace(/(timestamp=\d+)/,n)}},{key:"__getRequestHeaders",value:function(t,e){var n={"Content-Type":"application/json;charset=UTF-8",Accept:"application/vnd.github."+(e||this.__AcceptHeader)};return t&&(n.Accept+=".raw"),n.Accept+="+json",this.__authorizationHeader&&(n.Authorization=this.__authorizationHeader),n}},{key:"_getOptionsWithDefaults",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.visibility||t.affiliation||(t.type=t.type||"all"),t.sort=t.sort||"updated",t.per_page=t.per_page||"100",t}},{key:"_dateToISO",value:function(t){return t&&t instanceof Date&&(t=t.toISOString()),t}},{key:"_request",value:function(t,e,n,i,o){var s=this.__getURL(e),u=(n||{}).AcceptHeader;u&&delete n.AcceptHeader;var c=this.__getRequestHeaders(o,u),f={};n&&"object"===("undefined"===typeof n?"undefined":r(n))&&function(t){return-1!==d.indexOf(t)}(t)&&(f=n,n=void 0);var h={url:s,method:t,headers:c,params:f,data:n,responseType:o?"text":"json"};l(h.method+" to "+h.url);var v=(0,a.default)(h).catch(p(i,e));return i&&v.then((function(t){t.data&&Object.keys(t.data).length>0?i(null,t.data,t):"GET"!==h.method&&Object.keys(t.data).length<1?i(null,t.status<300,t):i(null,t.data,t)})),v}},{key:"_request204or404",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET";return this._request(r,t,e).then((function(t){return n&&n(null,!0,t),!0}),(function(t){if(404===t.response.status)return n&&n(null,!1,t),!1;throw n&&n(t),t}))}},{key:"_requestAllPages",value:function(t,e,n,r){var i=this;return r=r||[],this._request("GET",t,e).then((function(a){var o,s=void 0;if(a.data instanceof Array)s=a.data;else{if(!(a.data.items instanceof Array)){var u="cannot figure out how to append "+a.data+" to the result set";throw new f(u,t,a)}s=a.data.items}(o=r).push.apply(o,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(s));var c=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s*,\s*/).reduce((function(t,e){return-1!==e.search(/rel="next"/)?(e.match(/<(.*)>/)||[])[1]:t}),void 0)}(a.headers.link);return c&&(e||(e={}),e.page=parseInt(c.match(/(page=[0-9]*)/g).shift().split("=").pop()),!e||"number"===typeof e.page)?(l("getting next page: "+c),i._requestAllPages(c,e,n,r)):(n&&n(null,r,a),a.data=r,a)})).catch(p(n,t))}}]),t}();t.exports=h;var d=["GET","HEAD","DELETE"];function p(t,e){return function(n){var r=void 0;if(n.hasOwnProperty("config")){var i=n.response,a=i.status,o=i.statusText,s=n.config,u=a+" error making request "+s.method+" "+s.url+': "'+o+'"';r=new f(u,e,n),l(u+" "+JSON.stringify(n.data))}else r=n;if(!t)throw l("throwing error"),r;l("going to error callback"),t(r)}}},,function(t,e,n){"use strict";var r=m(n(270)),i=m(n(316)),a=m(n(321)),o=m(n(322)),s=m(n(323)),u=g(n(326)),c=g(n(70)),l=m(n(327)),f=m(n(333)),h=m(n(334)),d=m(n(34)),p=m(n(335)),v=g(n(336));function g(t){return t&&t.__esModule?t:{default:t}}function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}t.exports={account:r,annotations:i,athena:a,auth:o,devices:s,derived:u.default,drives:l,errorHandler:c.default,leaderboard:f,raw:h,request:d,vehicles:p,video:v.default}},function(t,e,n){t.exports=n(436)},function(t,e,n){var r=n(28),i=n(135),a=n(94),o=Object.defineProperty;e.f=n(36)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patch=e.postForm=e.post=e.get=void 0;var r=l(n(25)),i=l(n(26)),a=l(n(61));e.get=function(){var t=(0,i.default)(r.default.mark((function t(e,n){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.abrupt("return",new a.default((function(t,r){h.get(e,{query:n,json:!0},d(t,r))})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.post=function(){var t=(0,i.default)(r.default.mark((function t(e,n){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.abrupt("return",new a.default((function(t,r){h.post(e,{body:n,json:!0},d(t,r))})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.postForm=function(){var t=(0,i.default)(r.default.mark((function t(e,n){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.abrupt("return",new a.default((function(t,r){h.post(e,{body:s.default.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}},d(t,r))})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.patch=function(){var t=(0,i.default)(r.default.mark((function t(e,n){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.abrupt("return",new a.default((function(t,r){h.patch(e,{body:n,json:!0},d(t,r))})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}();e.configure=v;var o=l(n(106)),s=l(n(105)),u=l(n(70)),c=n(110);function l(t){return t&&t.__esModule?t:{default:t}}var f,h=(0,o.default)(),d=u.default;function p(){return f||(f=v()),f}function v(t,e){var n={baseUrl:c.COMMA_URL_ROOT,jwt:!1,parse:null};return t&&(n.token="JWT "+t),d=e||u.default,h.configure(n),f=a.default.resolve()}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e,n){t.exports=!n(63)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";var r=n(169);t.exports=function(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}},,function(t,e,n){var r=n(33),i=n(53);t.exports=n(36)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(t,e,n){var r=n(62);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,n){var r=n(249),i=n(92);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"string"===typeof t&&r.test(t)};var r=/-webkit-|-moz-|-ms-/;t.exports=e.default},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){var r,i=n(511),a=n(204),o=n(513),s=n(514),u=n(515);"undefined"!==typeof ArrayBuffer&&(r=n(516));var c="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;e.protocol=3;var h=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=i(h),p={type:"error",data:"parser error"},v=n(517);function g(t,e,n){for(var r=new Array(t.length),i=s(t.length,n),a=function(t,n,i){e(n,(function(e,n){r[t]=n,i(e,r)}))},o=0;o<t.length;o++)a(o,t[o],i)}e.encodePacket=function(t,n,r,i){"function"===typeof n&&(i=n,n=!1),"function"===typeof r&&(i=r,r=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=t.data,a=new Uint8Array(i),o=new Uint8Array(1+i.byteLength);o[0]=h[t.type];for(var s=0;s<a.length;s++)o[s+1]=a[s];return r(o.buffer)}(t,n,i);if("undefined"!==typeof v&&a instanceof v)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(f)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){e.encodePacket({type:t.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(t.data)}(t,n,r);var i=new Uint8Array(1);i[0]=h[t.type];var a=new v([i.buffer,t.data]);return r(a)}(t,n,i);if(a&&a.base64)return function(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}(t,i);var o=h[t.type];return void 0!==t.data&&(o+=r?u.encode(String(t.data),{strict:!1}):String(t.data)),i(""+o)},e.encodeBase64Packet=function(t,n){var r,i="b"+e.packets[t.type];if("undefined"!==typeof v&&t.data instanceof v){var a=new FileReader;return a.onload=function(){var t=a.result.split(",")[1];n(i+t)},a.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(c){for(var o=new Uint8Array(t.data),s=new Array(o.length),u=0;u<o.length;u++)s[u]=o[u];r=String.fromCharCode.apply(null,s)}return i+=btoa(r),n(i)},e.decodePacket=function(t,n,r){if(void 0===t)return p;if("string"===typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(e){return!1}return t}(t)))return p;var i=t.charAt(0);return Number(i)==i&&d[i]?t.length>1?{type:d[i],data:t.substring(1)}:{type:d[i]}:p}i=new Uint8Array(t)[0];var a=o(t,1);return v&&"blob"===n&&(a=new v([a])),{type:d[i],data:a}},e.decodeBase64Packet=function(t,e){var n=d[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=r.decode(t.substr(1));return"blob"===e&&v&&(i=new v([i])),{type:n,data:i}},e.encodePayload=function(t,n,r){"function"===typeof n&&(r=n,n=null);var i=a(t);if(n&&i)return v&&!f?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");g(t,(function(t,r){e.encodePacket(t,!!i&&n,!1,(function(t){r(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return r(e.join(""))}))},e.decodePayload=function(t,n,r){if("string"!==typeof t)return e.decodePayloadAsBinary(t,n,r);var i;if("function"===typeof n&&(r=n,n=null),""===t)return r(p,0,1);for(var a,o,s="",u=0,c=t.length;u<c;u++){var l=t.charAt(u);if(":"===l){if(""===s||s!=(a=Number(s)))return r(p,0,1);if(s!=(o=t.substr(u+1,a)).length)return r(p,0,1);if(o.length){if(i=e.decodePacket(o,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,u+a,c))return}u+=a,s=""}else s+=l}return""!==s?r(p,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));g(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){return n(null,t)}))}),(function(t,e){var r=e.reduce((function(t,e){var n;return t+(n="string"===typeof e?e.length:e.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),a=0;return e.forEach((function(t){var e="string"===typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);n=r.buffer}i[a++]=e?0:1;var s=n.byteLength.toString();for(o=0;o<s.length;o++)i[a++]=parseInt(s[o]);i[a++]=255;for(r=new Uint8Array(n),o=0;o<r.length;o++)i[a++]=r[o]})),n(i.buffer)}))},e.encodePayloadAsBlob=function(t,n){g(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"===typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}var a=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(a.length+1);for(i=0;i<a.length;i++)o[i]=parseInt(a[i]);if(o[a.length]=255,v){var s=new v([e.buffer,o.buffer,t]);n(null,s)}}))}),(function(t,e){return n(new v(e))}))},e.decodePayloadAsBinary=function(t,n,r){"function"===typeof n&&(r=n,n=null);for(var i=t,a=[];i.byteLength>0;){for(var s=new Uint8Array(i),u=0===s[0],c="",l=1;255!==s[l];l++){if(c.length>310)return r(p,0,1);c+=s[l]}i=o(i,2+c.length),c=parseInt(c);var f=o(i,0,c);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(v){var h=new Uint8Array(f);f="";for(l=0;l<h.length;l++)f+=String.fromCharCode(h[l])}a.push(f),i=o(i,c)}var d=a.length;a.forEach((function(t,i){r(e.decodePacket(t,n,!0),i,d)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.config=e.storage=void 0;var r=f(n(25)),i=f(n(26)),a=function(){var t=(0,i.default)(r.default.mark((function t(){var e;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getCommaAccessToken();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o=function(){var t=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.logOut();case 2:s.default.location.href=s.default.location.origin;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s=f(n(146)),u=l(n(267)),c=l(n(269));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}e.storage=u,e.config=c,e.default={init:a,logOut:o,isAuthenticated:function(){return u.isAuthed}}},function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){return void 0===t}function s(t){return"number"===typeof t||"[object Number]"===Object.prototype.toString.call(t)}function u(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function c(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,r){return Re(t,e,n,r,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){if(null==t._isValid){var e=d(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function v(t){var e=h(NaN);return null!=t?f(d(e),t):d(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var g=r.momentProperties=[];function m(t,e){var n,r,i;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=d(e)),o(e._locale)||(t._locale=e._locale),g.length>0)for(n=0;n<g.length;n++)o(i=e[r=g[n]])||(t[r]=i);return t}var y=!1;function b(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function _(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function x(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=w(e)),n}function k(t,e,n){var r,i=Math.min(t.length,e.length),a=Math.abs(t.length-e.length),o=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&x(t[r])!==x(e[r]))&&o++;return o+a}function E(t){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,e){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,a=[],o=0;o<arguments.length;o++){if(i="","object"===typeof arguments[o]){for(var s in i+="\n["+o+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[o];a.push(i)}E(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var O,A={};function T(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),A[t]||(E(e),A[t]=!0)}function C(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function j(t,e){var n,r=f({},t);for(n in e)l(e,n)&&(a(t[n])&&a(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)l(t,n)&&!l(e,n)&&a(t[n])&&(r[n]=f({},r[n]));return r}function D(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,O=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var R={};function M(t,e){var n=t.toLowerCase();R[n]=R[n+"s"]=R[e]=t}function P(t){return"string"===typeof t?R[t]||R[t.toLowerCase()]:void 0}function F(t){var e,n,r={};for(n in t)l(t,n)&&(e=P(n))&&(r[e]=t[n]);return r}var N={};function L(t,e){N[t]=e}function I(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var B=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},q={};function W(t,e,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),t&&(q[t]=i),e&&(q[e[0]]=function(){return I(i.apply(this,arguments),e[1],e[2])}),n&&(q[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function H(t,e){return t.isValid()?(e=G(e,t.localeData()),z[e]=z[e]||function(t){var e,n,r,i=t.match(B);for(e=0,n=i.length;e<n;e++)q[i[e]]?i[e]=q[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,a="";for(r=0;r<n;r++)a+=C(i[r])?i[r].call(e,t):i[r];return a}}(e),z[e](t)):t.localeData().invalidDate()}function G(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(U.lastIndex=0;n>=0&&U.test(t);)t=t.replace(U,r),U.lastIndex=0,n-=1;return t}var Y=/\d/,V=/\d\d/,$=/\d{3}/,X=/\d{4}/,K=/[+-]?\d{6}/,J=/\d\d?/,Z=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,et=/\d{1,4}/,nt=/[+-]?\d{1,6}/,rt=/\d+/,it=/[+-]?\d+/,at=/Z|[+-]\d\d:?\d\d/gi,ot=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ut={};function ct(t,e,n){ut[t]=C(e)?e:function(t,r){return t&&n?n:e}}function lt(t,e){return l(ut,t)?ut[t](e._strict,e._locale):new RegExp(ft(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function ft(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ht={};function dt(t,e){var n,r=e;for("string"===typeof t&&(t=[t]),s(e)&&(r=function(t,n){n[e]=x(t)}),n=0;n<t.length;n++)ht[t[n]]=r}function pt(t,e){dt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function vt(t,e,n){null!=e&&l(ht,t)&&ht[t](e,n._a,n,t)}var gt=0,mt=1,yt=2,bt=3,_t=4,wt=5,xt=6,kt=7,Et=8;function St(t){return Ot(t)?366:365}function Ot(t){return t%4===0&&t%100!==0||t%400===0}W("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),W(0,["YY",2],0,(function(){return this.year()%100})),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),M("year","y"),L("year",1),ct("Y",it),ct("YY",J,V),ct("YYYY",et,X),ct("YYYYY",nt,K),ct("YYYYYY",nt,K),dt(["YYYYY","YYYYYY"],gt),dt("YYYY",(function(t,e){e[gt]=2===t.length?r.parseTwoDigitYear(t):x(t)})),dt("YY",(function(t,e){e[gt]=r.parseTwoDigitYear(t)})),dt("Y",(function(t,e){e[gt]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return x(t)+(x(t)>68?1900:2e3)};var At,Tt=Ct("FullYear",!0);function Ct(t,e){return function(n){return null!=n?(Dt(this,t,n),r.updateOffset(this,e),this):jt(this,t)}}function jt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Dt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&Ot(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Rt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Rt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,r=(e%(n=12)+n)%n;return t+=(e-r)/12,1===r?Ot(t)?29:28:31-r%7%2}At=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},W("M",["MM",2],"Mo",(function(){return this.month()+1})),W("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),W("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),M("month","M"),L("month",8),ct("M",J),ct("MM",J,V),ct("MMM",(function(t,e){return e.monthsShortRegex(t)})),ct("MMMM",(function(t,e){return e.monthsRegex(t)})),dt(["M","MM"],(function(t,e){e[mt]=x(t)-1})),dt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[mt]=i:d(n).invalidMonth=t}));var Mt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ft="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Nt(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=At.call(this._shortMonthsParse,o))?i:null:-1!==(i=At.call(this._longMonthsParse,o))?i:null:"MMM"===e?-1!==(i=At.call(this._shortMonthsParse,o))?i:-1!==(i=At.call(this._longMonthsParse,o))?i:null:-1!==(i=At.call(this._longMonthsParse,o))?i:-1!==(i=At.call(this._shortMonthsParse,o))?i:null}function Lt(t,e){var n;if(!t.isValid())return t;if("string"===typeof e)if(/^\d+$/.test(e))e=x(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Rt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function It(t){return null!=t?(Lt(this,t),r.updateOffset(this,!0),this):jt(this,"Month")}var Bt=st,Ut=st;function zt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],a=[];for(e=0;e<12;e++)n=h([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),a.sort(t),e=0;e<12;e++)r[e]=ft(r[e]),i[e]=ft(i[e]);for(e=0;e<24;e++)a[e]=ft(a[e]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function qt(t,e,n,r,i,a,o){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,a,o),s}function Wt(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Ht(t,e,n){var r=7+e-n;return-(7+Wt(t,0,r).getUTCDay()-e)%7+r-1}function Gt(t,e,n,r,i){var a,o,s=1+7*(e-1)+(7+n-r)%7+Ht(t,r,i);return s<=0?o=St(a=t-1)+s:s>St(t)?(a=t+1,o=s-St(t)):(a=t,o=s),{year:a,dayOfYear:o}}function Yt(t,e,n){var r,i,a=Ht(t.year(),e,n),o=Math.floor((t.dayOfYear()-a-1)/7)+1;return o<1?r=o+Vt(i=t.year()-1,e,n):o>Vt(t.year(),e,n)?(r=o-Vt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=o),{week:r,year:i}}function Vt(t,e,n){var r=Ht(t,e,n),i=Ht(t+1,e,n);return(St(t)-r+i)/7}function $t(t,e){return t.slice(e,7).concat(t.slice(0,e))}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),M("week","w"),M("isoWeek","W"),L("week",5),L("isoWeek",5),ct("w",J),ct("ww",J,V),ct("W",J),ct("WW",J,V),pt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=x(t)})),W("d",0,"do","day"),W("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),W("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),W("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),M("day","d"),M("weekday","e"),M("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),ct("d",J),ct("e",J),ct("E",J),ct("dd",(function(t,e){return e.weekdaysMinRegex(t)})),ct("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),ct("dddd",(function(t,e){return e.weekdaysRegex(t)})),pt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:d(n).invalidWeekday=t})),pt(["d","e","E"],(function(t,e,n,r){e[r]=x(t)}));var Xt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Kt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Zt(t,e,n){var r,i,a,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=At.call(this._weekdaysParse,o))?i:null:"ddd"===e?-1!==(i=At.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=At.call(this._minWeekdaysParse,o))?i:null:"dddd"===e?-1!==(i=At.call(this._weekdaysParse,o))?i:-1!==(i=At.call(this._shortWeekdaysParse,o))?i:-1!==(i=At.call(this._minWeekdaysParse,o))?i:null:"ddd"===e?-1!==(i=At.call(this._shortWeekdaysParse,o))?i:-1!==(i=At.call(this._weekdaysParse,o))?i:-1!==(i=At.call(this._minWeekdaysParse,o))?i:null:-1!==(i=At.call(this._minWeekdaysParse,o))?i:-1!==(i=At.call(this._weekdaysParse,o))?i:-1!==(i=At.call(this._shortWeekdaysParse,o))?i:null}var Qt=st,te=st,ee=st;function ne(){function t(t,e){return e.length-t.length}var e,n,r,i,a,o=[],s=[],u=[],c=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),a=this.weekdays(n,""),o.push(r),s.push(i),u.push(a),c.push(r),c.push(i),c.push(a);for(o.sort(t),s.sort(t),u.sort(t),c.sort(t),e=0;e<7;e++)s[e]=ft(s[e]),u[e]=ft(u[e]),c[e]=ft(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function re(){return this.hours()%12||12}function ie(t,e){W(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ae(t,e){return e._meridiemParse}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,re),W("k",["kk",2],0,(function(){return this.hours()||24})),W("hmm",0,0,(function(){return""+re.apply(this)+I(this.minutes(),2)})),W("hmmss",0,0,(function(){return""+re.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),W("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),W("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),ie("a",!0),ie("A",!1),M("hour","h"),L("hour",13),ct("a",ae),ct("A",ae),ct("H",J),ct("h",J),ct("k",J),ct("HH",J,V),ct("hh",J,V),ct("kk",J,V),ct("hmm",Z),ct("hmmss",Q),ct("Hmm",Z),ct("Hmmss",Q),dt(["H","HH"],bt),dt(["k","kk"],(function(t,e,n){var r=x(t);e[bt]=24===r?0:r})),dt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),dt(["h","hh"],(function(t,e,n){e[bt]=x(t),d(n).bigHour=!0})),dt("hmm",(function(t,e,n){var r=t.length-2;e[bt]=x(t.substr(0,r)),e[_t]=x(t.substr(r)),d(n).bigHour=!0})),dt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[bt]=x(t.substr(0,r)),e[_t]=x(t.substr(r,2)),e[wt]=x(t.substr(i)),d(n).bigHour=!0})),dt("Hmm",(function(t,e,n){var r=t.length-2;e[bt]=x(t.substr(0,r)),e[_t]=x(t.substr(r))})),dt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[bt]=x(t.substr(0,r)),e[_t]=x(t.substr(r,2)),e[wt]=x(t.substr(i))}));var oe,se=Ct("Hours",!0),ue={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Pt,monthsShort:Ft,week:{dow:0,doy:6},weekdays:Xt,weekdaysMin:Jt,weekdaysShort:Kt,meridiemParse:/[ap]\.?m?\.?/i},ce={},le={};function fe(t){return t?t.toLowerCase().replace("_","-"):t}function he(e){var n=null;if(!ce[e]&&"undefined"!==typeof t&&t&&t.exports)try{n=oe._abbr,!function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),de(n)}catch(r){}return ce[e]}function de(t,e){var n;return t&&((n=o(e)?ve(t):pe(t,e))?oe=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),oe._abbr}function pe(t,e){if(null!==e){var n,r=ue;if(e.abbr=t,null!=ce[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ce[t]._config;else if(null!=e.parentLocale)if(null!=ce[e.parentLocale])r=ce[e.parentLocale]._config;else{if(null==(n=he(e.parentLocale)))return le[e.parentLocale]||(le[e.parentLocale]=[]),le[e.parentLocale].push({name:t,config:e}),null;r=n._config}return ce[t]=new D(j(r,e)),le[t]&&le[t].forEach((function(t){pe(t.name,t.config)})),de(t),ce[t]}return delete ce[t],null}function ve(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return oe;if(!i(t)){if(e=he(t))return e;t=[t]}return function(t){for(var e,n,r,i,a=0;a<t.length;){for(e=(i=fe(t[a]).split("-")).length,n=(n=fe(t[a+1]))?n.split("-"):null;e>0;){if(r=he(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&k(i,n,!0)>=e-1)break;e--}a++}return oe}(t)}function ge(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[mt]<0||n[mt]>11?mt:n[yt]<1||n[yt]>Rt(n[gt],n[mt])?yt:n[bt]<0||n[bt]>24||24===n[bt]&&(0!==n[_t]||0!==n[wt]||0!==n[xt])?bt:n[_t]<0||n[_t]>59?_t:n[wt]<0||n[wt]>59?wt:n[xt]<0||n[xt]>999?xt:-1,d(t)._overflowDayOfYear&&(e<gt||e>yt)&&(e=yt),d(t)._overflowWeeks&&-1===e&&(e=kt),d(t)._overflowWeekday&&-1===e&&(e=Et),d(t).overflow=e),t}function me(t,e,n){return null!=t?t:null!=e?e:n}function ye(t){var e,n,i,a,o,s=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[yt]&&null==t._a[mt]&&function(t){var e,n,r,i,a,o,s,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)a=1,o=4,n=me(e.GG,t._a[gt],Yt(Me(),1,4).year),r=me(e.W,1),((i=me(e.E,1))<1||i>7)&&(u=!0);else{a=t._locale._week.dow,o=t._locale._week.doy;var c=Yt(Me(),a,o);n=me(e.gg,t._a[gt],c.year),r=me(e.w,c.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+a,(e.e<0||e.e>6)&&(u=!0)):i=a}r<1||r>Vt(n,a,o)?d(t)._overflowWeeks=!0:null!=u?d(t)._overflowWeekday=!0:(s=Gt(n,r,i,a,o),t._a[gt]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=me(t._a[gt],i[gt]),(t._dayOfYear>St(o)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),n=Wt(o,0,t._dayOfYear),t._a[mt]=n.getUTCMonth(),t._a[yt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[bt]&&0===t._a[_t]&&0===t._a[wt]&&0===t._a[xt]&&(t._nextDay=!0,t._a[bt]=0),t._d=(t._useUTC?Wt:qt).apply(null,s),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[bt]=24),t._w&&"undefined"!==typeof t._w.d&&t._w.d!==a&&(d(t).weekdayMismatch=!0)}}var be=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_e=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,we=/Z|[+-]\d\d(?::?\d\d)?/,xe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ke=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ee=/^\/?Date\((\-?\d+)/i;function Se(t){var e,n,r,i,a,o,s=t._i,u=be.exec(s)||_e.exec(s);if(u){for(d(t).iso=!0,e=0,n=xe.length;e<n;e++)if(xe[e][1].exec(u[1])){i=xe[e][0],r=!1!==xe[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=ke.length;e<n;e++)if(ke[e][1].exec(u[3])){a=(u[2]||" ")+ke[e][0];break}if(null==a)return void(t._isValid=!1)}if(!r&&null!=a)return void(t._isValid=!1);if(u[4]){if(!we.exec(u[4]))return void(t._isValid=!1);o="Z"}t._f=i+(a||"")+(o||""),je(t)}else t._isValid=!1}var Oe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Ae(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var Te={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ce(t){var e=Oe.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(e){var n=function(t,e,n,r,i,a){var o=[Ae(t),Ft.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}(e[4],e[3],e[2],e[5],e[6],e[7]);if(!function(t,e,n){return!t||Kt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(d(n).weekdayMismatch=!0,n._isValid=!1,!1)}(e[1],n,t))return;t._a=n,t._tzm=function(t,e,n){if(t)return Te[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(e[8],e[9],e[10]),t._d=Wt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function je(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],d(t).empty=!0;var e,n,i,a,o,s=""+t._i,u=s.length,c=0;for(i=G(t._f,t._locale).match(B)||[],e=0;e<i.length;e++)a=i[e],(n=(s.match(lt(a,t))||[])[0])&&((o=s.substr(0,s.indexOf(n))).length>0&&d(t).unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),c+=n.length),q[a]?(n?d(t).empty=!1:d(t).unusedTokens.push(a),vt(a,n,t)):t._strict&&!n&&d(t).unusedTokens.push(a);d(t).charsLeftOver=u-c,s.length>0&&d(t).unusedInput.push(s),t._a[bt]<=12&&!0===d(t).bigHour&&t._a[bt]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[bt]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[bt],t._meridiem),ye(t),ge(t)}else Ce(t);else Se(t)}function De(t){var e=t._i,n=t._f;return t._locale=t._locale||ve(t._l),null===e||void 0===n&&""===e?v({nullInput:!0}):("string"===typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new b(ge(e)):(u(e)?t._d=e:i(n)?function(t){var e,n,r,i,a;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)a=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],je(e),p(e)&&(a+=d(e).charsLeftOver,a+=10*d(e).unusedTokens.length,d(e).score=a,(null==r||a<r)&&(r=a,n=e));f(t,n||e)}(t):n?je(t):function(t){var e=t._i;o(e)?t._d=new Date(r.now()):u(e)?t._d=new Date(e.valueOf()):"string"===typeof e?function(t){var e=Ee.exec(t._i);null===e?(Se(t),!1===t._isValid&&(delete t._isValid,Ce(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=c(e.slice(0),(function(t){return parseInt(t,10)})),ye(t)):a(e)?function(t){if(!t._d){var e=F(t._i);t._a=c([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),ye(t)}}(t):s(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),p(t)||(t._d=null),t))}function Re(t,e,n,r,o){var s={};return!0!==n&&!1!==n||(r=n,n=void 0),(a(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||i(t)&&0===t.length)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=t,s._f=e,s._strict=r,function(t){var e=new b(ge(De(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}(s)}function Me(t,e,n,r){return Re(t,e,n,r,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Pe=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Me.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:v()})),Fe=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Me.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:v()}));function Ne(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Me();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Le=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ie(t){var e=F(t),n=e.year||0,r=e.quarter||0,i=e.month||0,a=e.week||e.isoWeek||0,o=e.day||0,s=e.hour||0,u=e.minute||0,c=e.second||0,l=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===At.call(Le,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Le.length;++r)if(t[Le[r]]){if(n)return!1;parseFloat(t[Le[r]])!==x(t[Le[r]])&&(n=!0)}return!0}(e),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=ve(),this._bubble()}function Be(t){return t instanceof Ie}function Ue(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ze(t,e){W(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+I(~~(t/60),2)+e+I(~~t%60,2)}))}ze("Z",":"),ze("ZZ",""),ct("Z",ot),ct("ZZ",ot),dt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=We(ot,t)}));var qe=/([\+\-]|\d\d)/gi;function We(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(qe)||["-",0,0],i=60*r[1]+x(r[2]);return 0===i?0:"+"===r[0]?i:-i}function He(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(_(t)||u(t)?t.valueOf():Me(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Me(t).local()}function Ge(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ye(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ve=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,$e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Xe(t,e){var n,r,i,a=t,o=null;return Be(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(a={},e?a[e]=t:a.milliseconds=t):(o=Ve.exec(t))?(n="-"===o[1]?-1:1,a={y:0,d:x(o[yt])*n,h:x(o[bt])*n,m:x(o[_t])*n,s:x(o[wt])*n,ms:x(Ue(1e3*o[xt]))*n}):(o=$e.exec(t))?(n="-"===o[1]?-1:1,a={y:Ke(o[2],n),M:Ke(o[3],n),w:Ke(o[4],n),d:Ke(o[5],n),h:Ke(o[6],n),m:Ke(o[7],n),s:Ke(o[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=function(t,e){var n;return t.isValid()&&e.isValid()?(e=He(e,t),t.isBefore(e)?n=Je(t,e):((n=Je(e,t)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(Me(a.from),Me(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new Ie(a),Be(t)&&l(t,"_locale")&&(r._locale=t._locale),r}function Ke(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Je(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ze(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Qe(this,Xe(n="string"===typeof n?+n:n,r),t),this}}function Qe(t,e,n,i){var a=e._milliseconds,o=Ue(e._days),s=Ue(e._months);t.isValid()&&(i=null==i||i,s&&Lt(t,jt(t,"Month")+s*n),o&&Dt(t,"Date",jt(t,"Date")+o*n),a&&t._d.setTime(t._d.valueOf()+a*n),i&&r.updateOffset(t,o||s))}Xe.fn=Ie.prototype,Xe.invalid=function(){return Xe(NaN)};var tn=Ze(1,"add"),en=Ze(-1,"subtract");function nn(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function rn(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ve(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var an=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function on(){return this._locale}var sn=1e3,un=60*sn,cn=60*un,ln=3506328*cn;function fn(t,e){return(t%e+e)%e}function hn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-ln:new Date(t,e,n).valueOf()}function dn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-ln:Date.UTC(t,e,n)}function pn(t,e){W(0,[t,t.length],0,e)}function vn(t,e,n,r,i){var a;return null==t?Yt(this,r,i).year:(e>(a=Vt(t,r,i))&&(e=a),gn.call(this,t,e,n,r,i))}function gn(t,e,n,r,i){var a=Gt(t,e,n,r,i),o=Wt(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}W(0,["gg",2],0,(function(){return this.weekYear()%100})),W(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),pn("gggg","weekYear"),pn("ggggg","weekYear"),pn("GGGG","isoWeekYear"),pn("GGGGG","isoWeekYear"),M("weekYear","gg"),M("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),ct("G",it),ct("g",it),ct("GG",J,V),ct("gg",J,V),ct("GGGG",et,X),ct("gggg",et,X),ct("GGGGG",nt,K),ct("ggggg",nt,K),pt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=x(t)})),pt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),W("Q",0,"Qo","quarter"),M("quarter","Q"),L("quarter",7),ct("Q",Y),dt("Q",(function(t,e){e[mt]=3*(x(t)-1)})),W("D",["DD",2],"Do","date"),M("date","D"),L("date",9),ct("D",J),ct("DD",J,V),ct("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),dt(["D","DD"],yt),dt("Do",(function(t,e){e[yt]=x(t.match(J)[0])}));var mn=Ct("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),M("dayOfYear","DDD"),L("dayOfYear",4),ct("DDD",tt),ct("DDDD",$),dt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=x(t)})),W("m",["mm",2],0,"minute"),M("minute","m"),L("minute",14),ct("m",J),ct("mm",J,V),dt(["m","mm"],_t);var yn=Ct("Minutes",!1);W("s",["ss",2],0,"second"),M("second","s"),L("second",15),ct("s",J),ct("ss",J,V),dt(["s","ss"],wt);var bn,_n=Ct("Seconds",!1);for(W("S",0,0,(function(){return~~(this.millisecond()/100)})),W(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),W(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),W(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),W(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),W(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),W(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),M("millisecond","ms"),L("millisecond",16),ct("S",tt,Y),ct("SS",tt,V),ct("SSS",tt,$),bn="SSSS";bn.length<=9;bn+="S")ct(bn,rt);function wn(t,e){e[xt]=x(1e3*("0."+t))}for(bn="S";bn.length<=9;bn+="S")dt(bn,wn);var xn=Ct("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var kn=b.prototype;function En(t){return t}kn.add=tn,kn.calendar=function(t,e){var n=t||Me(),i=He(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse",o=e&&(C(e[a])?e[a].call(this,n):e[a]);return this.format(o||this.localeData().calendar(a,this,Me(n)))},kn.clone=function(){return new b(this)},kn.diff=function(t,e,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=He(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=P(e)){case"year":a=nn(this,r)/12;break;case"month":a=nn(this,r);break;case"quarter":a=nn(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:w(a)},kn.endOf=function(t){var e;if(void 0===(t=P(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?dn:hn;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=cn-fn(e+(this._isUTC?0:this.utcOffset()*un),cn)-1;break;case"minute":e=this._d.valueOf(),e+=un-fn(e,un)-1;break;case"second":e=this._d.valueOf(),e+=sn-fn(e,sn)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},kn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=H(this,t);return this.localeData().postformat(e)},kn.from=function(t,e){return this.isValid()&&(_(t)&&t.isValid()||Me(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},kn.fromNow=function(t){return this.from(Me(),t)},kn.to=function(t,e){return this.isValid()&&(_(t)&&t.isValid()||Me(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},kn.toNow=function(t){return this.to(Me(),t)},kn.get=function(t){return C(this[t=P(t)])?this[t]():this},kn.invalidAt=function(){return d(this).overflow},kn.isAfter=function(t,e){var n=_(t)?t:Me(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=P(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},kn.isBefore=function(t,e){var n=_(t)?t:Me(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=P(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},kn.isBetween=function(t,e,n,r){var i=_(t)?t:Me(t),a=_(e)?e:Me(e);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))},kn.isSame=function(t,e){var n,r=_(t)?t:Me(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=P(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},kn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},kn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},kn.isValid=function(){return p(this)},kn.lang=an,kn.locale=rn,kn.localeData=on,kn.max=Fe,kn.min=Pe,kn.parsingFlags=function(){return f({},d(this))},kn.set=function(t,e){if("object"===typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:N[n]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=F(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(C(this[t=P(t)]))return this[t](e);return this},kn.startOf=function(t){var e;if(void 0===(t=P(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?dn:hn;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=fn(e+(this._isUTC?0:this.utcOffset()*un),cn);break;case"minute":e=this._d.valueOf(),e-=fn(e,un);break;case"second":e=this._d.valueOf(),e-=fn(e,sn)}return this._d.setTime(e),r.updateOffset(this,!0),this},kn.subtract=en,kn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},kn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},kn.toDate=function(){return new Date(this.valueOf())},kn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},kn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},kn.toJSON=function(){return this.isValid()?this.toISOString():null},kn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},kn.unix=function(){return Math.floor(this.valueOf()/1e3)},kn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},kn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},kn.year=Tt,kn.isLeapYear=function(){return Ot(this.year())},kn.weekYear=function(t){return vn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},kn.isoWeekYear=function(t){return vn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},kn.quarter=kn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},kn.month=It,kn.daysInMonth=function(){return Rt(this.year(),this.month())},kn.week=kn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},kn.isoWeek=kn.isoWeeks=function(t){var e=Yt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},kn.weeksInYear=function(){var t=this.localeData()._week;return Vt(this.year(),t.dow,t.doy)},kn.isoWeeksInYear=function(){return Vt(this.year(),1,4)},kn.date=mn,kn.day=kn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!==typeof t?t:isNaN(t)?"number"===typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},kn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},kn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"===typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},kn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},kn.hour=kn.hours=se,kn.minute=kn.minutes=yn,kn.second=kn.seconds=_n,kn.millisecond=kn.milliseconds=xn,kn.utcOffset=function(t,e,n){var i,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"===typeof t){if(null===(t=We(ot,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Ge(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!e||this._changeInProgress?Qe(this,Xe(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Ge(this)},kn.utc=function(t){return this.utcOffset(0,t)},kn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ge(this),"m")),this},kn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var t=We(at,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},kn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Me(t).utcOffset():0,(this.utcOffset()-t)%60===0)},kn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},kn.isLocal=function(){return!!this.isValid()&&!this._isUTC},kn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},kn.isUtc=Ye,kn.isUTC=Ye,kn.zoneAbbr=function(){return this._isUTC?"UTC":""},kn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},kn.dates=S("dates accessor is deprecated. Use date instead.",mn),kn.months=S("months accessor is deprecated. Use month instead",It),kn.years=S("years accessor is deprecated. Use year instead",Tt),kn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!==typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),kn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),(t=De(t))._a){var e=t._isUTC?h(t._a):Me(t._a);this._isDSTShifted=this.isValid()&&k(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var Sn=D.prototype;function On(t,e,n,r){var i=ve(),a=h().set(r,e);return i[n](a,t)}function An(t,e,n){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return On(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=On(t,r,n,"month");return i}function Tn(t,e,n,r){"boolean"===typeof t?(s(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,s(e)&&(n=e,e=void 0),e=e||"");var i,a=ve(),o=t?a._week.dow:0;if(null!=n)return On(e,(n+o)%7,r,"day");var u=[];for(i=0;i<7;i++)u[i]=On(e,(i+o)%7,r,"day");return u}Sn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return C(r)?r.call(e,n):r},Sn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},Sn.invalidDate=function(){return this._invalidDate},Sn.ordinal=function(t){return this._ordinal.replace("%d",t)},Sn.preparse=En,Sn.postformat=En,Sn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return C(i)?i(t,e,n,r):i.replace(/%d/i,t)},Sn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return C(n)?n(e):n.replace(/%s/i,e)},Sn.set=function(t){var e,n;for(n in t)C(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Sn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Mt).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},Sn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Mt.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Sn.monthsParse=function(t,e,n){var r,i,a;if(this._monthsParseExact)return Nt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},Sn.monthsRegex=function(t){return this._monthsParseExact?(l(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Ut),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},Sn.monthsShortRegex=function(t){return this._monthsParseExact?(l(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Bt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},Sn.week=function(t){return Yt(t,this._week.dow,this._week.doy).week},Sn.firstDayOfYear=function(){return this._week.doy},Sn.firstDayOfWeek=function(){return this._week.dow},Sn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?$t(n,this._week.dow):t?n[t.day()]:n},Sn.weekdaysMin=function(t){return!0===t?$t(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},Sn.weekdaysShort=function(t){return!0===t?$t(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},Sn.weekdaysParse=function(t,e,n){var r,i,a;if(this._weekdaysParseExact)return Zt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},Sn.weekdaysRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ne.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Qt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},Sn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ne.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=te),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Sn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||ne.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ee),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Sn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},Sn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},de("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===x(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",de),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ve);var Cn=Math.abs;function jn(t,e,n,r){var i=Xe(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Dn(t){return t<0?Math.floor(t):Math.ceil(t)}function Rn(t){return 4800*t/146097}function Mn(t){return 146097*t/4800}function Pn(t){return function(){return this.as(t)}}var Fn=Pn("ms"),Nn=Pn("s"),Ln=Pn("m"),In=Pn("h"),Bn=Pn("d"),Un=Pn("w"),zn=Pn("M"),qn=Pn("Q"),Wn=Pn("y");function Hn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Gn=Hn("milliseconds"),Yn=Hn("seconds"),Vn=Hn("minutes"),$n=Hn("hours"),Xn=Hn("days"),Kn=Hn("months"),Jn=Hn("years"),Zn=Math.round,Qn={ss:44,s:45,m:45,h:22,d:26,M:11};function tr(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var er=Math.abs;function nr(t){return(t>0)-(t<0)||+t}function rr(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=er(this._milliseconds)/1e3,r=er(this._days),i=er(this._months);t=w(n/60),e=w(t/60),n%=60,t%=60;var a=w(i/12),o=i%=12,s=r,u=e,c=t,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var h=f<0?"-":"",d=nr(this._months)!==nr(f)?"-":"",p=nr(this._days)!==nr(f)?"-":"",v=nr(this._milliseconds)!==nr(f)?"-":"";return h+"P"+(a?d+a+"Y":"")+(o?d+o+"M":"")+(s?p+s+"D":"")+(u||c||l?"T":"")+(u?v+u+"H":"")+(c?v+c+"M":"")+(l?v+l+"S":"")}var ir=Ie.prototype;return ir.isValid=function(){return this._isValid},ir.abs=function(){var t=this._data;return this._milliseconds=Cn(this._milliseconds),this._days=Cn(this._days),this._months=Cn(this._months),t.milliseconds=Cn(t.milliseconds),t.seconds=Cn(t.seconds),t.minutes=Cn(t.minutes),t.hours=Cn(t.hours),t.months=Cn(t.months),t.years=Cn(t.years),this},ir.add=function(t,e){return jn(this,t,e,1)},ir.subtract=function(t,e){return jn(this,t,e,-1)},ir.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=P(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Rn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Mn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},ir.asMilliseconds=Fn,ir.asSeconds=Nn,ir.asMinutes=Ln,ir.asHours=In,ir.asDays=Bn,ir.asWeeks=Un,ir.asMonths=zn,ir.asQuarters=qn,ir.asYears=Wn,ir.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12):NaN},ir._bubble=function(){var t,e,n,r,i,a=this._milliseconds,o=this._days,s=this._months,u=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Dn(Mn(s)+o),o=0,s=0),u.milliseconds=a%1e3,t=w(a/1e3),u.seconds=t%60,e=w(t/60),u.minutes=e%60,n=w(e/60),u.hours=n%24,o+=w(n/24),i=w(Rn(o)),s+=i,o-=Dn(Mn(i)),r=w(s/12),s%=12,u.days=o,u.months=s,u.years=r,this},ir.clone=function(){return Xe(this)},ir.get=function(t){return t=P(t),this.isValid()?this[t+"s"]():NaN},ir.milliseconds=Gn,ir.seconds=Yn,ir.minutes=Vn,ir.hours=$n,ir.days=Xn,ir.weeks=function(){return w(this.days()/7)},ir.months=Kn,ir.years=Jn,ir.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=function(t,e,n){var r=Xe(t).abs(),i=Zn(r.as("s")),a=Zn(r.as("m")),o=Zn(r.as("h")),s=Zn(r.as("d")),u=Zn(r.as("M")),c=Zn(r.as("y")),l=i<=Qn.ss&&["s",i]||i<Qn.s&&["ss",i]||a<=1&&["m"]||a<Qn.m&&["mm",a]||o<=1&&["h"]||o<Qn.h&&["hh",o]||s<=1&&["d"]||s<Qn.d&&["dd",s]||u<=1&&["M"]||u<Qn.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=e,l[3]=+t>0,l[4]=n,tr.apply(null,l)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},ir.toISOString=rr,ir.toString=rr,ir.toJSON=rr,ir.locale=rn,ir.localeData=on,ir.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rr),ir.lang=an,W("X",0,0,"unix"),W("x",0,0,"valueOf"),ct("x",it),ct("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),dt("x",(function(t,e,n){n._d=new Date(x(t))})),r.version="2.24.0",e=Me,r.fn=kn,r.min=function(){return Ne("isBefore",[].slice.call(arguments,0))},r.max=function(){return Ne("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=h,r.unix=function(t){return Me(1e3*t)},r.months=function(t,e){return An(t,e,"months")},r.isDate=u,r.locale=de,r.invalid=v,r.duration=Xe,r.isMoment=_,r.weekdays=function(t,e,n){return Tn(t,e,n,"weekdays")},r.parseZone=function(){return Me.apply(null,arguments).parseZone()},r.localeData=ve,r.isDuration=Be,r.monthsShort=function(t,e){return An(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return Tn(t,e,n,"weekdaysMin")},r.defineLocale=pe,r.updateLocale=function(t,e){if(null!=e){var n,r,i=ue;null!=(r=he(t))&&(i=r._config),e=j(i,e),(n=new D(e)).parentLocale=ce[t],ce[t]=n,de(t)}else null!=ce[t]&&(null!=ce[t].parentLocale?ce[t]=ce[t].parentLocale:null!=ce[t]&&delete ce[t]);return ce[t]},r.locales=function(){return O(ce)},r.weekdaysShort=function(t,e,n){return Tn(t,e,n,"weekdaysShort")},r.normalizeUnits=P,r.relativeTimeRounding=function(t){return void 0===t?Zn:"function"===typeof t&&(Zn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Qn[t]&&(void 0===e?Qn[t]:(Qn[t]=e,"s"===t&&(Qn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=kn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(111)(t))},function(t,e,n){"use strict";var r=n(246)(!0);n(134)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e){t.exports=!0},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!==typeof r&&"env"in r&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG),t}(e=t.exports=n(487)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(a=i))})),t.splice(a,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}},e.load=i,e.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(i())}).call(this,n(41))},,function(t,e,n){"use strict";function r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(1);function i(t){return function(t,e){var n=1540483477,r=e^t.length,i=t.length,u=0;for(;i>=4;){var c=a(t,u);c=s(c,n),c=s(c^=c>>>24,n),r=s(r,n),r^=c,u+=4,i-=4}switch(i){case 3:r^=o(t,u),r=s(r^=t.charCodeAt(u+2)<<16,n);break;case 2:r=s(r^=o(t,u),n);break;case 1:r=s(r^=t.charCodeAt(u),n)}return r=s(r^=r>>>13,n),(r^=r>>>15)>>>0}(t,t.length).toString(36)}function a(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)+(t.charCodeAt(e++)<<16)+(t.charCodeAt(e)<<24)}function o(t,e){return t.charCodeAt(e++)+(t.charCodeAt(e++)<<8)}function s(t,e){return(65535&(t|=0))*(e|=0)+(((t>>>16)*e&65535)<<16)|0}function u(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var c="__emotion_styles",l="__emotion_target",f={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},h=n(219),d=n.n(h);function p(){var t=document.createElement("style");return t.type="text/css",t.setAttribute("data-emotion",""),t.appendChild(document.createTextNode("")),document.head.appendChild(t),t}var v=new(function(){function t(){this.isBrowser="undefined"!==typeof window,this.isSpeedy=!0,this.tags=[],this.ctr=0}var e=t.prototype;return e.inject=function(){if(this.injected)throw new Error("already injected!");this.isBrowser?this.tags[0]=p():this.sheet=[],this.injected=!0},e.speedy=function(t){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!t},e.insert=function(t,e){if(this.isBrowser){if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(this.tags[this.tags.length-1]);try{n.insertRule(t,n.cssRules.length)}catch(i){0}}else{var r=p();this.tags.push(r),r.appendChild(document.createTextNode(t+(e||"")))}this.ctr++,this.ctr%65e3===0&&this.tags.push(p())}else this.sheet.push(t)},e.flush=function(){this.isBrowser?(this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0):this.sheet=[],this.injected=!1},t}());v.inject();var g=new function t(e){function n(t,e,n){var i=e.trim().split(y);e=i;var a=i.length,o=t.length;switch(o){case 0:case 1:var s=0;for(t=0===o?"":t[0]+" ";s<a;++s)e[s]=r(t,e[s],n,o).trim();break;default:var u=s=0;for(e=[];s<a;++s)for(var c=0;c<o;++c)e[u++]=r(t[c]+" ",i[s],n,o).trim()}return e}function r(t,e,n,r){var i=e.charCodeAt(0);switch(33>i&&(i=(e=e.trim()).charCodeAt(0)),i){case 38:switch(I+r){case 0:case 1:if(0===t.trim().length)break;default:return e.replace(b,"$1"+t.trim())}break;case 58:switch(e.charCodeAt(1)){case 103:if(0<U&&0<I)return e.replace(_,"$1").replace(b,"$1"+Z);break;default:return t.trim()+e}default:if(0<n*I&&0<e.indexOf("\f"))return e.replace(b,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function i(t,e,n,r){var i=0,o=t+";";if(944===(e=2*e+3*n+4*r)){switch(i=o.length,t=o.indexOf(":",9)+1,n=o.substring(0,t).trim(),r=o.substring(t,i-1).trim(),o.charCodeAt(9)*X){case 0:break;case 45:if(110!==o.charCodeAt(10))break;default:for(t=e=0,i=(o=r.split((r="",v))).length;e<i;t=0,++e){for(var s=o[e],u=s.split(g);s=u[t];){var c=s.charCodeAt(0);if(1===X&&(64<c&&90>c||96<c&&123>c||95===c||45===c&&45!==s.charCodeAt(1)))switch(isNaN(parseFloat(s))+(-1!==s.indexOf("("))){case 1:switch(s){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:s+=K}}u[t++]=s}r+=(0===e?"":",")+u.join(" ")}}return r=n+r+";",1===B||2===B&&a(r,1)?"-webkit-"+r+r:r}if(0===B||2===B&&!a(o,1))return o;switch(e){case 1015:return 45===o.charCodeAt(9)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:return 45===o.charCodeAt(8)?"-webkit-"+o+o:o;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(t=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+t+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(i=(t=o.substring(13).trim()).indexOf("-")+1,t.charCodeAt(0)+t.charCodeAt(i)){case 226:t=o.replace(j,"tb");break;case 232:t=o.replace(j,"tb-rl");break;case 220:t=o.replace(j,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+t+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(i=(o=t).length-10,e=(t=(33===o.charCodeAt(i)?o.substring(0,i):o).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|t.charCodeAt(7))){case 203:if(111>t.charCodeAt(8))break;case 115:o=o.replace(t,"-webkit-"+t)+";"+o;break;case 207:case 102:o=o.replace(t,"-webkit-"+(102<e?"inline-":"")+"box")+";"+o.replace(t,"-webkit-"+t)+";"+o.replace(t,"-ms-"+t+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return t=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+t+"-ms-flex-"+t+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(M,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","")+o}break;case 953:if(0<(i=o.indexOf("-content",9))&&109===o.charCodeAt(i-3)&&45!==o.charCodeAt(i-4))return"width:-webkit-"+(t=o.substring(i-3))+"width:-moz-"+t+"width:"+t;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),V(2!==e?r:r.replace(P,"$1"),n,e)}function o(t,e){var n=i(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(R," or ($1)").substring(4):"("+e+")"}function s(t,e,n,r,i,a,o,s,u){for(var l,f=0,h=e;f<Y;++f)switch(l=G[f].call(c,t,h,n,r,i,a,o,s,u)){case void 0:case!1:case!0:case null:break;default:h=l}switch(h){case void 0:case!1:case!0:case null:case e:break;default:return h}}function u(t){for(var e in t){var n=t[e];switch(e){case"keyframe":X=0|n;break;case"global":U=0|n;break;case"cascade":I=0|n;break;case"compress":z=0|n;break;case"semicolon":q=0|n;break;case"preserve":W=0|n;break;case"prefix":V=null,n?"function"!==typeof n?B=1:(B=2,V=n):B=0}}return u}function c(e,r){if(void 0!==this&&this.constructor===c)return t(e);var u=e,h=u.charCodeAt(0);if(33>h&&(h=(u=u.trim()).charCodeAt(0)),0<X&&(K=u.replace(w,91===h?"":"-")),h=1,1===I?Z=u:J=u,u=[Z],0<Y){var d=s(-1,r,u,u,N,F,0,0,0);void 0!==d&&"string"===typeof d&&(r=d)}var p=function t(e,r,u,c,h){for(var d,p,v,g,y=0,b=0,_=0,w=0,S=0,O=0,A=0,T=0,j=0,R=0,M=0,P=0,z=p=0,G=0,V=0,Q=u.length,tt=Q-1,et="",nt="",rt="",it="";P<Q;){if(v=u.charCodeAt(P),P===tt&&0!==b+w+_+y&&(0!==b&&(v=47===b?10:47),w=_=y=0,Q++,tt++),0===b+w+_+y){if(P===tt&&(0<p&&(et=et.replace(f,"")),0<et.trim().length)){switch(v){case 32:case 9:case 59:case 13:case 10:break;default:et+=u.charAt(P)}v=59}if(1===z)switch(v){case 123:case 125:case 59:case 34:case 39:case 40:case 41:case 44:z=0;case 9:case 13:case 10:case 32:break;default:for(z=0,V=P,d=v,P--,v=59;V<Q;)switch(u.charCodeAt(++V)){case 10:case 13:case 59:P++,v=d;case 58:case 123:V=Q}}switch(v){case 123:for(d=(et=et.trim()).charCodeAt(0),T=1,V=++P;P<Q;){switch(v=u.charCodeAt(P)){case 123:T++;break;case 125:T--}if(0===T)break;P++}switch(R=u.substring(V,P),0===d&&(d=(et=et.replace(l,"").trim()).charCodeAt(0)),d){case 64:switch(0<p&&(et=et.replace(f,"")),p=et.charCodeAt(1)){case 100:case 109:case 115:case 45:d=r;break;default:d=H}if(V=(R=t(r,d,R,p,h+1)).length,0<W&&0===V&&(V=et.length),0<Y&&(g=s(3,R,d=n(H,et,G),r,N,F,V,p,h),et=d.join(""),void 0!==g&&0===(V=(R=g.trim()).length)&&(p=0,R="")),0<V)switch(p){case 115:et=et.replace(D,o);case 100:case 109:case 45:R=et+"{"+R+"}";break;case 107:R=(et=et.replace(x,"$1 $2"+(0<X?K:"")))+"{"+R+"}",R=1===B||2===B&&a("@"+R,3)?"@-webkit-"+R+"@"+R:"@"+R;break;default:R=et+R,112===c&&(nt+=R,R="")}else R="";break;default:R=t(r,n(r,et,G),R,c,h+1)}rt+=R,R=G=p=M=z=j=0,et="",v=u.charCodeAt(++P);break;case 125:case 59:if(1<(V=(et=(0<p?et.replace(f,""):et).trim()).length))switch(0===M&&(d=et.charCodeAt(0),45===d||96<d&&123>d)&&(V=(et=et.replace(" ",":")).length),0<Y&&void 0!==(g=s(1,et,r,e,N,F,nt.length,c,h))&&0===(V=(et=g.trim()).length)&&(et="\0\0"),d=et.charCodeAt(0),p=et.charCodeAt(1),d+p){case 0:break;case 169:case 163:it+=et+u.charAt(P);break;default:58!==et.charCodeAt(V-1)&&(nt+=i(et,d,p,et.charCodeAt(2)))}G=p=M=z=j=0,et="",v=u.charCodeAt(++P)}}switch(v){case 13:case 10:if(0===b+w+_+y+q)switch(A){case 41:case 39:case 34:case 64:case 126:case 62:case 42:case 43:case 47:case 45:case 58:case 44:case 59:case 123:case 125:break;default:0<M&&(z=1)}47===b?b=0:0===I+j&&(p=1,et+="\0"),0<Y*$&&s(0,et,r,e,N,F,nt.length,c,h),F=1,N++;break;case 59:case 125:if(0===b+w+_+y){F++;break}default:switch(F++,d=u.charAt(P),v){case 9:case 32:if(0===w+y+b)switch(S){case 44:case 58:case 9:case 32:d="";break;default:32!==v&&(d=" ")}break;case 0:d="\\0";break;case 12:d="\\f";break;case 11:d="\\v";break;case 38:0===w+b+y&&0<I&&(p=G=1,d="\f"+d);break;case 108:if(0===w+b+y+L&&0<M)switch(P-M){case 2:112===S&&58===u.charCodeAt(P-3)&&(L=S);case 8:111===O&&(L=O)}break;case 58:0===w+b+y&&(M=P);break;case 44:0===b+_+w+y&&(p=1,d+="\r");break;case 34:case 39:0===b&&(w=w===v?0:0===w?v:w);break;case 91:0===w+b+_&&y++;break;case 93:0===w+b+_&&y--;break;case 41:0===w+b+y&&_--;break;case 40:if(0===w+b+y){if(0===j)switch(2*S+3*O){case 533:break;default:T=0,j=1}_++}break;case 64:0===b+_+w+y+M+R&&(R=1);break;case 42:case 47:if(!(0<w+y+_))switch(b){case 0:switch(2*v+3*u.charCodeAt(P+1)){case 235:b=47;break;case 220:V=P,b=42}break;case 42:47===v&&42===S&&(33===u.charCodeAt(V+2)&&(nt+=u.substring(V,P+1)),d="",b=0)}}if(0===b){if(0===I+w+y+R&&107!==c&&59!==v)switch(v){case 44:case 126:case 62:case 43:case 41:case 40:if(0===j){switch(S){case 9:case 32:case 10:case 13:d+="\0";break;default:d="\0"+d+(44===v?"":"\0")}p=1}else switch(v){case 40:j=++T;break;case 41:0===(j=--T)&&(p=1,d+="\0")}break;case 9:case 32:switch(S){case 0:case 123:case 125:case 59:case 44:case 12:case 9:case 32:case 10:case 13:break;default:0===j&&(p=1,d+="\0")}}et+=d,32!==v&&9!==v&&(A=v)}}O=S,S=v,P++}if(V=nt.length,0<W&&0===V&&0===rt.length&&0===r[0].length===!1&&(109!==c||1===r.length&&(0<I?J:Z)===r[0])&&(V=r.join(",").length+2),0<V){if(0===I&&107!==c){for(u=0,y=r.length,b=Array(y);u<y;++u){for(O="",A=0,Q=(S=r[u].split(m)).length;A<Q;++A)if(!(0===(T=(w=S[A]).length)&&1<Q)){if(P=O.charCodeAt(O.length-1),G=w.charCodeAt(0),_="",0!==A)switch(P){case 42:case 126:case 62:case 43:case 32:case 40:break;default:_=" "}switch(G){case 38:w=_+J;case 126:case 62:case 43:case 32:case 41:case 40:break;case 91:w=_+w+J;break;case 58:switch(2*w.charCodeAt(1)+3*w.charCodeAt(2)){case 530:if(0<U){w=_+w.substring(8,T-1);break}default:(1>A||1>S[A-1].length)&&(w=_+J+w)}break;case 44:_="";default:w=1<T&&0<w.indexOf(":")?_+w.replace(C,"$1"+J+"$2"):_+w+J}O+=w}b[u]=O.replace(f,"").trim()}r=b}if(d=r,0<Y&&(void 0!==(g=s(2,nt,d,e,N,F,V,c,h))&&0===(nt=g).length))return it+nt+rt;if(nt=d.join(",")+"{"+nt+"}",0!==B*L){switch(2!==B||a(nt,2)||(L=0),L){case 111:nt=nt.replace(E,":-moz-$1")+nt;break;case 112:nt=nt.replace(k,"::-webkit-input-$1")+nt.replace(k,"::-moz-$1")+nt.replace(k,":-ms-input-$1")+nt}L=0}}return it+nt+rt}(H,u,r,0,0);return 0<Y&&(void 0!==(d=s(-2,p,u,u,N,F,p.length,0,0))&&"string"!==typeof(p=d)&&(h=0)),J=Z=K="",L=0,F=N=1,0===z*h?p:p.replace(f,"").replace(S,"").replace(O,"$1").replace(A,"$1").replace(T," ")}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,+\s*(?![^(]*[)])/g,g=/ +\s*(?![^(]*[)])/g,m=/ *[\0] */g,y=/,\r+?/g,b=/([\t\r\n ])*\f?&/g,_=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,w=/\W+/g,x=/@(k\w+)\s*(\S*)\s*/,k=/::(place)/g,E=/:(read-only)/g,S=/\s+(?=[{\];=:>])/g,O=/([[}=:>])\s+/g,A=/(\{[^{]+?);(?=\})/g,T=/\s{2,}/g,C=/([^\(])(:+) */g,j=/[svh]\w+-[tblr]{2}/,D=/\(\s*(.*)\s*\)/g,R=/([^]*?);/g,M=/-self|flex-/g,P=/[^]*?(:[rp][el]a[\w-]+)[^]*/,F=1,N=1,L=0,I=1,B=1,U=1,z=0,q=0,W=0,H=[],G=[],Y=0,V=null,$=0,X=1,K="",J="",Z="";return c.use=function t(e){switch(e){case void 0:case null:Y=G.length=0;break;default:switch(e.constructor){case Array:for(var n=0,r=e.length;n<r;++n)t(e[n]);break;case Function:G[Y++]=e;break;case Boolean:$=0|!!e}}return t},c.set=u,void 0!==e&&u(e),c}({keyframe:!1});g.use;var m=d()((function(t){v.insert(t,_)})),y={},b={},_="";function w(t,e){if(null==t)return"";switch(typeof t){case"boolean":return"";case"function":return void 0!==t[c]?"."+t[l]:w.call(this,void 0===this?t():t(this.mergedProps,this.context),e);case"object":return T.call(this,t);default:var n=y[t];return!1===e&&void 0!==n?n:t}}g.use(m);var x,k,E=/[A-Z]|^ms/g,S=u((function(t){return t.replace(E,"-$&").toLowerCase()})),O=function(t,e){return void 0===e||null===e||"boolean"===typeof e?"":1===f[t]||45===t.charCodeAt(1)||isNaN(e)||0===e?e:e+"px"},A=new WeakMap;function T(t){if(A.has(t))return A.get(t);var e="";return Array.isArray(t)?t.forEach((function(t){e+=w.call(this,t,!1)}),this):Object.keys(t).forEach((function(n){"object"!==typeof t[n]?void 0!==y[t[n]]?e+=n+"{"+y[t[n]]+"}":e+=S(n)+":"+O(n,t[n])+";":e+=n+"{"+w.call(this,t[n],!1)+"}"}),this),A.set(t,e),e}var C=/label:\s*([^\s;\n]+)\s*[;\n]/g;function j(t){var e=!0,n="",r="";null==t||void 0===t.raw?(e=!1,n=w.call(this,t,!1)):n=t[0];for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return o.forEach((function(r,i){var a;n+=w.call(this,r,46===(a=n).charCodeAt(a.length-1)),!0===e&&void 0!==t[i+1]&&(n+=t[i+1])}),this),n=n.replace(C,(function(t,e){return r+="-"+e,""})),x=i(n+r),k=x+r,n}function D(){var t=j.apply(this,arguments),e="css-"+k;return void 0===y[e]&&(y[e]=t),void 0===b[x]&&(g("."+e,t),b[x]=!0),e}function R(){var t=j.apply(this,arguments),e="animation-"+k;return void 0===b[x]&&(g("","@keyframes "+e+"{"+t+"}"),b[x]=!0),e}function M(t,e){var n="";return e.split(" ").forEach((function(e){void 0!==y[e]?t.push(e):n+=e+" "})),n}var P,F=n(15),N=n.n(F);function L(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"b",(function(){return R}));var I="__EMOTION_THEMING__",B=((P={})[I]=N.a.object,P);function U(t){this.setState({theme:t})}function z(){void 0!==this.context[I]&&(this.unsubscribe=this.context[I].subscribe(U.bind(this)))}function q(){void 0!==this.unsubscribe&&this.context[I].unsubscribe(this.unsubscribe)}var W=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|accept|acceptCharset|accessKey|action|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan)|(on[A-Z].*)|((data|aria)-.*))$/,H=u((function(t){return W.test(t)})),G=function(t){return"theme"!==t&&"innerRef"!==t},Y=function(){return!0},V=function(t,e){for(var n=2,r=arguments.length;n<r;n++){var i=arguments[n],a=void 0;for(a in i)t(a)&&(e[a]=i[a])}return e};e.a=function t(e,n){var i,a,o;void 0!==n&&(i=n.label,a=n.target,o=n.e);var s=e.__emotion_real===e,u=void 0===o&&s&&e.__emotion_base||e,f="string"===typeof u&&u.charAt(0)===u.charAt(0).toLowerCase()?H:G;return function(h){var d=s&&e[c]||[];if(void 0!==i&&(d=d.concat("label:"+i+";")),void 0===o){for(var p=arguments.length,v=new Array(p>1?p-1:0),g=1;g<p;g++)v[g-1]=arguments[g];d=null==h||void 0===h.raw?d.concat(h,v):v.reduce((function(t,e,n){return t.concat(e,h[n+1])}),d.concat(h[0]))}var m=function(t){function e(){return t.apply(this,arguments)||this}return L(e,t),e.prototype.render=function(){var t=this.props,e=this.state;this.mergedProps=V(Y,{},t,{theme:null!==e&&e.theme||t.theme||{}});var n="",i=[];return t.className&&(n+=void 0===o?M(i,t.className):t.className+" "),n+=void 0===o?D.apply(this,d.concat(i)):o,void 0!==a&&(n+=" "+a),Object(r.createElement)(u,V(f,{},t,{className:n,ref:t.innerRef}))},e}(r.Component);return m.prototype.componentWillMount=z,m.prototype.componentWillUnmount=q,m.displayName=void 0!==i?i:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",m.contextTypes=B,m[c]=d,m.__emotion_base=u,m.__emotion_real=m,m[l]=a,m.withComponent=function(e,r){return t(e,void 0!==r?V(Y,{},n,r):n)(d)},m}}},,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=o(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e,n){t.exports={default:n(245),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(33).f,i=n(40),a=n(23)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){n(253);for(var r=n(21),i=n(39),a=n(44),o=n(23)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[o]&&i(f,o,c),a[c]=a.Array}},function(t,e,n){"use strict";var r=n(281);t.exports=Function.prototype.bind||r},function(t,e,n){"use strict";var r=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator,a=Object.getPrototypeOf||function(t){return t.__proto__},o=void 0,s="undefined"===typeof Uint8Array?void 0:a(Uint8Array),u={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":i?a([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":o&&i&&Symbol.asyncIterator?o[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"===typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"===typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"===typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"===typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"===typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"===typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"===typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":i?a(a([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"===typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!==typeof Map&&i?a((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"===typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"===typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"===typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"===typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"===typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"===typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"===typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"===typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!==typeof Set&&i?a((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"===typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":i?a(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":i?Symbol:void 0,"$ %SymbolPrototype%":i?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":r,"$ %TypedArray%":s,"$ %TypedArrayPrototype%":s?s.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"===typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"===typeof WeakSet?void 0:WeakSet.prototype};t.exports=function(t,e){if(arguments.length>1&&"boolean"!==typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+t;if(!(n in u))throw new SyntaxError("intrinsic "+t+" does not exist!");if("undefined"===typeof u[n]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return u[n]}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return function(n,r,i){if(n)return 0===n.statusCode&&(n=new Error("There was an unexpected server error, please try again later.")),e(n);t(r)}}},function(t,e,n){"use strict";t.exports=1e-4},function(t,e,n){(function(r){e.log=function(){var t;return"object"===typeof console&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}!t&&"undefined"!==typeof r&&"env"in r&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG);return t},e.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(499)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(41))},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(r){e.log=function(){var t;return"object"===typeof console&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}!t&&"undefined"!==typeof r&&"env"in r&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG);return t},e.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(518)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(41))},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(0);function i(e,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?a(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(a(e))}i.responseType="json"}).call(this,n(20).Buffer)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(0);function i(e,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?a(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(a(e))}i.responseType="json"}).call(this,n(20).Buffer)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(0);function i(e,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?a(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(a(e))}i.responseType="json"}).call(this,n(20).Buffer)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(0);function i(e,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?a(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(a(e))}i.responseType="json"}).call(this,n(20).Buffer)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r=n(0);function i(e,n){var i,a=n&&n.property?Object(r.t)(n.property):r.x;return!Object(r.F)(e)||(i=e,"function"===typeof t&&Object(r.D)(t.isBuffer)&&t.isBuffer(i))?a(JSON.parse(e)):function(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}(a(e))}i.responseType="json"}).call(this,n(20).Buffer)},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var i=n(1),a=n(15),o=n.n(a),s=n(220),u=["client","offset","scroll","bounds","margin"];function c(t){var e=[];return u.forEach((function(n){t[n]&&e.push(n)})),e}function l(t,e){var n={};if(e.indexOf("client")>-1&&(n.client={top:t.clientTop,left:t.clientLeft,width:t.clientWidth,height:t.clientHeight}),e.indexOf("offset")>-1&&(n.offset={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}),e.indexOf("scroll")>-1&&(n.scroll={top:t.scrollTop,left:t.scrollLeft,width:t.scrollWidth,height:t.scrollHeight}),e.indexOf("bounds")>-1){var r=t.getBoundingClientRect();n.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(e.indexOf("margin")>-1){var i=getComputedStyle(t);n.margin={top:i?parseInt(i.marginTop):0,right:i?parseInt(i.marginRight):0,bottom:i?parseInt(i.marginBottom):0,left:i?parseInt(i.marginLeft):0}}return n}var f,h=function(t){var e,n;return n=e=function(e){var n,a;function o(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},t._animationFrameID=null,t._resizeObserver=null,t._node=null,t.measure=function(e){var n=l(t._node,f||c(t.props));e&&(n.entry=e[0].contentRect),t._animationFrameID=window.requestAnimationFrame((function(){null!==t._resizeObserver&&(t.setState({contentRect:n}),"function"===typeof t.props.onResize&&t.props.onResize(n))}))},t._handleRef=function(e){null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.unobserve(t._node),t._node=e,null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.observe(t._node);var n=t.props.innerRef;n&&("function"===typeof n?n(t._node):n.current=t._node)},t}a=e,(n=o).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var u=o.prototype;return u.componentDidMount=function(){this._resizeObserver=new s.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(l(this._node,f||c(this.props))))},u.componentWillUnmount=function(){null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),window.cancelAnimationFrame(this._animationFrameID)},u.render=function(){var e=this.props,n=(e.innerRef,e.onResize,function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["innerRef","onResize"]));return Object(i.createElement)(t,r({},n,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(i.Component),e.propTypes={client:o.a.bool,offset:o.a.bool,scroll:o.a.bool,bounds:o.a.bool,margin:o.a.bool,innerRef:o.a.oneOfType([o.a.object,o.a.func]),onResize:o.a.func},n}((function(t){var e=t.measure,n=t.measureRef,r=t.contentRect;return(0,t.children)({measure:e,measureRef:n,contentRect:r})}));h.displayName="Measure",h.propTypes.children=o.a.func;e.a=h},,function(t,e,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,e){var n,i,a;return e=e||{},n=JSON.stringify([1],void 0,void 0===e.indent?2:e.indent).slice(2,-3),i=""===n?1/0:void 0===e.maxLength?80:e.maxLength,a=e.replacer,function t(e,o,s){var u,c,l,f,h,d,p,v,g,m,y,b;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0===(y=JSON.stringify(e,a)))return y;if(p=i-o.length-s,y.length<=p&&(g=y.replace(r,(function(t,e){return e||t+" "}))).length<=p)return g;if(null!=a&&(e=JSON.parse(y),a=void 0),"object"===typeof e&&null!==e){if(v=o+n,l=[],c=0,Array.isArray(e))for(m="[",u="]",p=e.length;c<p;c++)l.push(t(e[c],v,c===p-1?0:1)||"null");else for(m="{",u="}",p=(d=Object.keys(e)).length;c<p;c++)f=d[c],h=JSON.stringify(f)+": ",void 0!==(b=t(e[f],v,h.length+(c===p-1?0:1)))&&l.push(h+b);if(l.length>0)return[m,n+l.join(",\n"+v),u].join("\n"+o)}return y}(t,"",0)}},function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"===typeof e&&(e={cmp:e});var n,r="boolean"===typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},a={key:r,value:t[r]};return n(i,a)}}),a=[];return function t(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var n,o;if(Array.isArray(e)){for(o="[",n=0;n<e.length;n++)n&&(o+=","),o+=t(e[n])||"null";return o+"]"}if(null===e)return"null";if(-1!==a.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=a.push(e)-1,u=Object.keys(e).sort(i&&i(e));for(o="",n=0;n<u.length;n++){var c=u[n],l=t(e[c]);l&&(o&&(o+=","),o+=JSON.stringify(c)+":"+l)}return a.splice(s,1),"{"+o+"}"}}(t)}},,,function(t,e,n){(function(e){var r=n(132),i="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function a(t){return void 0===t}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function s(t){return"[object String]"===Object.prototype.toString.call(t)}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(){if(!("fetch"in i))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function l(t,e){var n,r;if(a(t.length))for(n in t)h(t,n)&&e.call(null,n,t[n]);else if(r=t.length)for(n=0;n<r;n++)e.call(null,n,t[n])}function f(t,e){if("number"!==typeof e)throw new Error("2nd argument to `truncate` function should be a number");return"string"!==typeof t||0===e?t:t.length<=e?t:t.substr(0,e)+"\u2026"}function h(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function d(t){for(var e,n=[],r=0,i=t.length;r<i;r++)s(e=t[r])?n.push(e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):e&&e.source&&n.push(e.source);return new RegExp(n.join("|"),"i")}function p(t){var e,n,r,i,a,o=[];if(!t||!t.tagName)return"";if(o.push(t.tagName.toLowerCase()),t.id&&o.push("#"+t.id),(e=t.className)&&s(e))for(n=e.split(/\s+/),a=0;a<n.length;a++)o.push("."+n[a]);var u=["type","name","title","alt"];for(a=0;a<u.length;a++)r=u[a],(i=t.getAttribute(r))&&o.push("["+r+'="'+i+'"]');return o.join("")}function v(t,e){return!!(!!t^!!e)}function g(t,e){if(v(t,e))return!1;var n,r,i=t.frames,a=e.frames;if(void 0===i||void 0===a)return!1;if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++)if(n=i[o],r=a[o],n.filename!==r.filename||n.lineno!==r.lineno||n.colno!==r.colno||n.function!==r.function)return!1;return!0}var m=3,y=51200,b=40;function _(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function w(t){if("string"===typeof t){return f(t,40)}if("number"===typeof t||"boolean"===typeof t||"undefined"===typeof t)return t;var e=Object.prototype.toString.call(t);return"[object Object]"===e?"[Object]":"[object Array]"===e?"[Array]":"[object Function]"===e?t.name?"[Function: "+t.name+"]":"[Function]":t}t.exports={isObject:function(t){return"object"===typeof t&&null!==t},isError:function(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}},isErrorEvent:function(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)},isDOMError:function(t){return"[object DOMError]"===Object.prototype.toString.call(t)},isDOMException:function(t){return"[object DOMException]"===Object.prototype.toString.call(t)},isUndefined:a,isFunction:function(t){return"function"===typeof t},isPlainObject:o,isString:s,isArray:u,isEmptyObject:function(t){if(!o(t))return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},supportsErrorEvent:function(){try{return new ErrorEvent(""),!0}catch(t){return!1}},supportsDOMError:function(){try{return new DOMError(""),!0}catch(t){return!1}},supportsDOMException:function(){try{return new DOMException(""),!0}catch(t){return!1}},supportsFetch:c,supportsReferrerPolicy:function(){if(!c())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(t){return!1}},supportsPromiseRejectionEvent:function(){return"function"===typeof PromiseRejectionEvent},wrappedCallback:function(t){return function(e,n){var r=t(e)||e;return n&&n(r)||r}},each:l,objectMerge:function(t,e){return e?(l(e,(function(e,n){t[e]=n})),t):t},truncate:f,objectFrozen:function(t){return!!Object.isFrozen&&Object.isFrozen(t)},hasKey:h,joinRegExp:d,urlencode:function(t){var e=[];return l(t,(function(t,n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})),e.join("&")},uuid4:function(){var t=i.crypto||i.msCrypto;if(!a(t)&&t.getRandomValues){var e=new Uint16Array(8);t.getRandomValues(e),e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;var n=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return n(e[0])+n(e[1])+n(e[2])+n(e[3])+n(e[4])+n(e[5])+n(e[6])+n(e[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},htmlTreeAsString:function(t){for(var e,n=[],r=0,i=0,a=" > ".length;t&&r++<5&&!("html"===(e=p(t))||r>1&&i+n.length*a+e.length>=80);)n.push(e),i+=e.length,t=t.parentNode;return n.reverse().join(" > ")},htmlElementAsString:p,isSameException:function(t,e){return!v(t,e)&&(t=t.values[0],e=e.values[0],t.type===e.type&&t.value===e.value&&(n=t.stacktrace,r=e.stacktrace,(!a(n)||!a(r))&&g(t.stacktrace,e.stacktrace)));var n,r},isSameStacktrace:g,parseUrl:function(t){if("string"!==typeof t)return{};var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=e[6]||"",r=e[8]||"";return{protocol:e[2],host:e[4],path:e[5],relative:e[5]+n+r}},fill:function(t,e,n,r){if(null!=t){var i=t[e];t[e]=n(i),t[e].__raven__=!0,t[e].__orig__=i,r&&r.push([t,e,i])}},safeJoin:function(t,e){if(!u(t))return"";for(var n=[],r=0;r<t.length;r++)try{n.push(String(t[r]))}catch(i){n.push("[value cannot be serialized]")}return n.join(e)},serializeException:function t(e,n,i){if(!o(e))return e;i="number"!==typeof(n="number"!==typeof n?m:n)?y:i;var a=function t(e,n){return 0===n?w(e):o(e)?Object.keys(e).reduce((function(r,i){return r[i]=t(e[i],n-1),r}),{}):Array.isArray(e)?e.map((function(e){return t(e,n-1)})):w(e)}(e,n);return _(r(a))>i?t(e,n-1):a},serializeKeysForMessage:function(t,e){if("number"===typeof t||"string"===typeof t)return t.toString();if(!Array.isArray(t))return"";if(0===(t=t.filter((function(t){return"string"===typeof t}))).length)return"[object has no keys]";if(e="number"!==typeof e?b:e,t[0].length>=e)return t[0];for(var n=t.length;n>0;n--){var r=t.slice(0,n).join(", ");if(!(r.length>e))return n===t.length?r:r+"\u2026"}return""},sanitize:function(t,e){if(!u(e)||u(e)&&0===e.length)return t;var n,i=d(e),a="********";try{n=JSON.parse(r(t))}catch(s){return t}return function t(e){return u(e)?e.map((function(e){return t(e)})):o(e)?Object.keys(e).reduce((function(n,r){return i.test(r)?n[r]=a:n[r]=t(e[r]),n}),{}):e}(n)}}}).call(this,n(19))},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(35),i=n(21).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(35);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(28),i=n(248),a=n(100),o=n(98)("IE_PROTO"),s=function(){},u=function(){var t,e=n(93)("iframe"),r=a.length;for(e.style.display="none",n(138).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[a[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(137),i=n(100);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(91),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(99)("keys"),i=n(64);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(18),i=n(21),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(52)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(92);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(54),i=n(23)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:a?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){var r=n(102),i=n(23)("iterator"),a=n(44);t.exports=n(18).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[r(t)]}},function(t,e,n){"use strict";var r=n(62);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r,i=Object.prototype.hasOwnProperty;function a(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}e.stringify=function(t,e){e=e||"";var n,a,o=[];for(a in"string"!==typeof e&&(e="?"),t)if(i.call(t,a)){if((n=t[a])||null!==n&&n!==r&&!isNaN(n)||(n=""),a=encodeURIComponent(a),n=encodeURIComponent(n),null===a||null===n)continue;o.push(a+"="+n)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);){var i=a(e[1]),o=a(e[2]);null===i||null===o||i in r||(r[i]=o)}return r}},function(t,e,n){var r=n(271),i=n(109),a=n(69),o=n(153),s=n(148),u=n(297),c=n(154),l=n(300),f=n(301),h=n(302);t.exports=function(t){return t=a(p,t=t||{}),e.configure=function(e){o(t,e)},e.config=t,function(t){return d.forEach((function(e){t[e]=function(n,r,i){return"function"===typeof r&&(i=r,r={}),r.method=e,t(n,r,i)}})),t}(e);function e(e,n,d){e=e||"",s(n)&&(d=n,n={}),function(t){var e=t.query;if(!e)return;t.query=("string"===typeof e?String:h)(e)}(n=a(t.options,n)),function(e){if(!e.token&&!t.token)return;e.headers=e.headers||{};var n=e.authorization||t.authorization||"Authorization",r=e.token||t.token;(e.jwt||t.jwt)&&(r="Bearer "+r);e.headers[n]=r,delete e.token}(n);var p=i(t.baseUrl,e);return r(p,n,function(e,n){return function(r,i,a){if(r)return e(r,null,a);if(c(a.statusCode))return function(t,e,n){var r=u(e.statusCode);if(!t)return n(r);if(t){if(Array.isArray(t)&&(t=t[0]),f(t))return n(o(r,t));l(t,(function(t,e){if(t)return n(t);n(o(r,e))}))}}(i,a,(function(t){e(t,null,a)}));var h=n.parse||t.parse;i=s(h)?h(i,a):i,e(null,i,a)}}(d,{url:p,method:n.method}))}};var d=["get","post","put","patch","head","delete"],p={baseUrl:"http://localhost:8000",jwt:!1,token:null,options:{}}},function(t,e,n){"use strict";var r=n(67);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,a=function(t){try{var e=r.call(t);return i.test(e)}catch(n){return!1}},o=Object.prototype.toString,s="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!==typeof t&&"object"!==typeof t)return!1;if("function"===typeof t&&!t.prototype)return!0;if(s)return function(t){try{return!a(t)&&(r.call(t),!0)}catch(e){return!1}}(t);if(a(t))return!1;var e=o.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){var r,i,a;a=function(){function t(t,e){return t=(t=(t=(t=t.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|&|#[^!])/g,"$1")).replace(/(\?.+)\?/g,"$1&")}return function(){var e=arguments;"object"===typeof arguments[0]&&(e=arguments[0],arguments[1]);var n=[].slice.call(e,0).join("/");return t(n)}},t.exports?t.exports=a():void 0===(i="function"===typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.COMMA_URL_ROOT="https://api.commadotai.com/",e.ATHENA_URL_ROOT="https://athena.comma.ai/";var r=e.VIDEO_HOST=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).COMMA_VIDEO_CDN;r||(e.VIDEO_HOST=r="https://my-comma-video.azureedge.net")},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){(function(e){(function(){var n,r,i,a,o,s;"undefined"!==typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!==typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,a=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),s=1e9*e.uptime(),o=a-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(41))},function(t,e,n){e.f=n(23)},function(t,e,n){var r=n(21),i=n(18),a=n(52),o=n(114),s=n(33).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=n(37);t.exports=function(t,e){var n,i,a=r(t),o=0;if(2===e)for(i=0;i<t.length;i++)o+=(n=t[i]-a)*n;else for(i=0;i<t.length;i++)o+=Math.pow(t[i]-a,e);return o}},function(t,e,n){"use strict";var r=n(119),i=n(399);function a(t,e,n,r){e%1===0?i(t,e,n,r):(e=Math.floor(e),i(t,e,n,r),i(t,e+1,e+1,r))}function o(t,e){return t-e}function s(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}t.exports=function(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(s(t.length,e[r]));n.push(t.length-1),n.sort(o);var i=[0,n.length-1];for(;i.length;){var u=Math.ceil(i.pop()),c=Math.floor(i.pop());if(!(u-c<=1)){var l=Math.floor((c+u)/2);a(t,n[l],n[c],n[u]),i.push(c,l,l,u)}}}(n,e);for(var i=[],u=0;u<e.length;u++)i[u]=r(n,e[u]);return i}return a(n,s(n.length,e),0,n.length-1),r(n,e)}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}},function(t,e,n){"use strict";var r=n(117);t.exports=function(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return r(t,2)/(t.length-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t){return t&&t.__esModule?t:{default:t}}var a=i(n(437)),o=i(n(442)),s=i(n(184)),u=n(122),c=(0,a.default)(o.default);e.defaultSelectorHandlers=[function(t,e,n){return":"!==t[0]?null:n(e+t)},function(t,e,n){return"@"!==t[0]?null:t+"{"+n(e)+"}"}];e.generateCSS=function t(e,n,r,i,a){for(var o=new s.default,u=0;u<n.length;u++)o.addStyleType(n[u]);var c=new s.default,l="";return o.forEach((function(n,o){r.some((function(s){var u=s(o,e,(function(e){return t(e,[n],r,i,a)}));if(null!=u)return l+=u,!0}))||c.set(o,n,!0)})),f(e,c,i,a,r)+l};var l=function(t,e,n){return(0,u.kebabifyStyleName)(t)+":"+n(t,e)+";"},f=function(t,e,n,i,a){!function(t,e,n){if(e)for(var r=Object.keys(e),i=0;i<r.length;i++){var a=r[i];t.has(a)&&t.set(a,e[a](t.get(a),n),!1)}}(e,n,a);var o=r({},e.elements),s=c(e.elements),f=Object.keys(s);if(f.length!==e.keyOrder.length)for(var h=0;h<f.length;h++)if(!o.hasOwnProperty(f[h])){var d=void 0;if((d="W"===f[h][0]?f[h][6].toLowerCase()+f[h].slice(7):"o"===f[h][1]?f[h][3].toLowerCase()+f[h].slice(4):f[h][2].toLowerCase()+f[h].slice(3))&&o.hasOwnProperty(d)){var p=e.keyOrder.indexOf(d);e.keyOrder.splice(p,0,f[h])}else e.keyOrder.unshift(f[h])}var v=!1===i?u.stringifyValue:u.stringifyAndImportantifyValue,g=[];for(h=0;h<e.keyOrder.length;h++){var m=e.keyOrder[h],y=s[m];if(Array.isArray(y))for(var b=0;b<y.length;b++)g.push(l(m,y[b],v));else g.push(l(m,y,v))}return g.length?t+"{"+g.join("")+"}":""};e.generateCSSRuleset=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var i,a=n(457),o=(i=a)&&i.__esModule?i:{default:i};e.mapObj=function(t,e){for(var n=Object.keys(t),i={},a=0;a<n.length;a+=1){var o=e([n[a],t[n[a]]]),s=r(o,2),u=s[0],c=s[1];i[u]=c}return i};var s=/([A-Z])/g,u=function(t){return"-"+t.toLowerCase()};e.kebabifyStyleName=function(t){var e=t.replace(s,u);return"m"===e[0]&&"s"===e[1]&&"-"===e[2]?"-"+e:e};var c={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var l=["Webkit","ms","Moz","O"];Object.keys(c).forEach((function(t){l.forEach((function(e){c[function(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}(e,t)]=c[t]}))}));var f=function(t,e){return"number"===typeof e?c[t]?""+e:e+"px":""+e};e.stringifyValue=f;e.stringifyAndImportantifyValue=function(t,e){return d(f(t,e))};var h=function(t){return(0,o.default)(t).toString(36)};e.hashString=h;e.hashObject=function(t){return h(JSON.stringify(t))};var d=function(t){return"!"===t[t.length-10]&&" !important"===t.slice(-11)?t:t+" !important"}},function(t,e,n){var r=n(504)("socket.io-parser"),i=n(47),a=n(506),o=n(199),s=n(200);function u(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=f;var c=e.ERROR+'"encode error"';function l(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(e){return!1}}(t.data);if(!1===i)return c;n+=i}return r("encoded %j as %s",t,n),n}function f(){this.reconstructor=null}function h(t){this.reconPack=t,this.buffers=[]}function d(t){return{type:e.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,n){(r("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){a.removeBlobs(t,(function(t){var n=a.deconstructPacket(t),r=l(n.packet),i=n.buffers;i.unshift(r),e(i)}))}(t,n):n([l(t)])},i(f.prototype),f.prototype.add=function(t){var n;if("string"===typeof t)n=function(t){var n=0,i={type:Number(t.charAt(0))};if(null==e.types[i.type])return d("unknown packet type "+i.type);if(e.BINARY_EVENT===i.type||e.BINARY_ACK===i.type){for(var a="";"-"!==t.charAt(++n)&&(a+=t.charAt(n),n!=t.length););if(a!=Number(a)||"-"!==t.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===t.charAt(n+1))for(i.nsp="";++n;){if(","===(u=t.charAt(n)))break;if(i.nsp+=u,n===t.length)break}else i.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var u;if(null==(u=t.charAt(n))||Number(u)!=u){--n;break}if(i.id+=t.charAt(n),n===t.length)break}i.id=Number(i.id)}if(t.charAt(++n)){var c=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(n));if(!(!1!==c&&(i.type===e.ERROR||o(c))))return d("invalid payload");i.data=c}return r("decoded %s as %j",t,i),i}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new h(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){var r=n(509);t.exports=function(t){var e=t.xdomain,n=t.xscheme,i=t.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(a){}if(!e)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}}},function(t,e,n){var r=n(48),i=n(47);function a(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=a,i(a.prototype),a.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},a.prototype.onPacket=function(t){this.emit("packet",t)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},,,,,function(t,e,n){(function(n){var r;e=t.exports=d,r="object"===typeof n&&Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"})&&Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,o=e.re=[],s=e.src=[],u=e.tokens={},c=0;function l(t){u[t]=c++}l("NUMERICIDENTIFIER"),s[u.NUMERICIDENTIFIER]="0|[1-9]\\d*",l("NUMERICIDENTIFIERLOOSE"),s[u.NUMERICIDENTIFIERLOOSE]="[0-9]+",l("NONNUMERICIDENTIFIER"),s[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",l("MAINVERSION"),s[u.MAINVERSION]="("+s[u.NUMERICIDENTIFIER]+")\\.("+s[u.NUMERICIDENTIFIER]+")\\.("+s[u.NUMERICIDENTIFIER]+")",l("MAINVERSIONLOOSE"),s[u.MAINVERSIONLOOSE]="("+s[u.NUMERICIDENTIFIERLOOSE]+")\\.("+s[u.NUMERICIDENTIFIERLOOSE]+")\\.("+s[u.NUMERICIDENTIFIERLOOSE]+")",l("PRERELEASEIDENTIFIER"),s[u.PRERELEASEIDENTIFIER]="(?:"+s[u.NUMERICIDENTIFIER]+"|"+s[u.NONNUMERICIDENTIFIER]+")",l("PRERELEASEIDENTIFIERLOOSE"),s[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+s[u.NUMERICIDENTIFIERLOOSE]+"|"+s[u.NONNUMERICIDENTIFIER]+")",l("PRERELEASE"),s[u.PRERELEASE]="(?:-("+s[u.PRERELEASEIDENTIFIER]+"(?:\\."+s[u.PRERELEASEIDENTIFIER]+")*))",l("PRERELEASELOOSE"),s[u.PRERELEASELOOSE]="(?:-?("+s[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+s[u.PRERELEASEIDENTIFIERLOOSE]+")*))",l("BUILDIDENTIFIER"),s[u.BUILDIDENTIFIER]="[0-9A-Za-z-]+",l("BUILD"),s[u.BUILD]="(?:\\+("+s[u.BUILDIDENTIFIER]+"(?:\\."+s[u.BUILDIDENTIFIER]+")*))",l("FULL"),l("FULLPLAIN"),s[u.FULLPLAIN]="v?"+s[u.MAINVERSION]+s[u.PRERELEASE]+"?"+s[u.BUILD]+"?",s[u.FULL]="^"+s[u.FULLPLAIN]+"$",l("LOOSEPLAIN"),s[u.LOOSEPLAIN]="[v=\\s]*"+s[u.MAINVERSIONLOOSE]+s[u.PRERELEASELOOSE]+"?"+s[u.BUILD]+"?",l("LOOSE"),s[u.LOOSE]="^"+s[u.LOOSEPLAIN]+"$",l("GTLT"),s[u.GTLT]="((?:<|>)?=?)",l("XRANGEIDENTIFIERLOOSE"),s[u.XRANGEIDENTIFIERLOOSE]=s[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",l("XRANGEIDENTIFIER"),s[u.XRANGEIDENTIFIER]=s[u.NUMERICIDENTIFIER]+"|x|X|\\*",l("XRANGEPLAIN"),s[u.XRANGEPLAIN]="[v=\\s]*("+s[u.XRANGEIDENTIFIER]+")(?:\\.("+s[u.XRANGEIDENTIFIER]+")(?:\\.("+s[u.XRANGEIDENTIFIER]+")(?:"+s[u.PRERELEASE]+")?"+s[u.BUILD]+"?)?)?",l("XRANGEPLAINLOOSE"),s[u.XRANGEPLAINLOOSE]="[v=\\s]*("+s[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[u.XRANGEIDENTIFIERLOOSE]+")(?:"+s[u.PRERELEASELOOSE]+")?"+s[u.BUILD]+"?)?)?",l("XRANGE"),s[u.XRANGE]="^"+s[u.GTLT]+"\\s*"+s[u.XRANGEPLAIN]+"$",l("XRANGELOOSE"),s[u.XRANGELOOSE]="^"+s[u.GTLT]+"\\s*"+s[u.XRANGEPLAINLOOSE]+"$",l("COERCE"),s[u.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",l("COERCERTL"),o[u.COERCERTL]=new RegExp(s[u.COERCE],"g"),l("LONETILDE"),s[u.LONETILDE]="(?:~>?)",l("TILDETRIM"),s[u.TILDETRIM]="(\\s*)"+s[u.LONETILDE]+"\\s+",o[u.TILDETRIM]=new RegExp(s[u.TILDETRIM],"g");l("TILDE"),s[u.TILDE]="^"+s[u.LONETILDE]+s[u.XRANGEPLAIN]+"$",l("TILDELOOSE"),s[u.TILDELOOSE]="^"+s[u.LONETILDE]+s[u.XRANGEPLAINLOOSE]+"$",l("LONECARET"),s[u.LONECARET]="(?:\\^)",l("CARETTRIM"),s[u.CARETTRIM]="(\\s*)"+s[u.LONECARET]+"\\s+",o[u.CARETTRIM]=new RegExp(s[u.CARETTRIM],"g");l("CARET"),s[u.CARET]="^"+s[u.LONECARET]+s[u.XRANGEPLAIN]+"$",l("CARETLOOSE"),s[u.CARETLOOSE]="^"+s[u.LONECARET]+s[u.XRANGEPLAINLOOSE]+"$",l("COMPARATORLOOSE"),s[u.COMPARATORLOOSE]="^"+s[u.GTLT]+"\\s*("+s[u.LOOSEPLAIN]+")$|^$",l("COMPARATOR"),s[u.COMPARATOR]="^"+s[u.GTLT]+"\\s*("+s[u.FULLPLAIN]+")$|^$",l("COMPARATORTRIM"),s[u.COMPARATORTRIM]="(\\s*)"+s[u.GTLT]+"\\s*("+s[u.LOOSEPLAIN]+"|"+s[u.XRANGEPLAIN]+")",o[u.COMPARATORTRIM]=new RegExp(s[u.COMPARATORTRIM],"g");l("HYPHENRANGE"),s[u.HYPHENRANGE]="^\\s*("+s[u.XRANGEPLAIN]+")\\s+-\\s+("+s[u.XRANGEPLAIN]+")\\s*$",l("HYPHENRANGELOOSE"),s[u.HYPHENRANGELOOSE]="^\\s*("+s[u.XRANGEPLAINLOOSE]+")\\s+-\\s+("+s[u.XRANGEPLAINLOOSE]+")\\s*$",l("STAR"),s[u.STAR]="(<|>)?=?\\s*\\*";for(var f=0;f<c;f++)r(f,s[f]),o[f]||(o[f]=new RegExp(s[f]));function h(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof d)return t;if("string"!==typeof t)return null;if(t.length>i)return null;if(!(e.loose?o[u.LOOSE]:o[u.FULL]).test(t))return null;try{return new d(t,e)}catch(n){return null}}function d(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof d){if(t.loose===e.loose)return t;t=t.version}else if("string"!==typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof d))return new d(t,e);r("SemVer",t,e),this.options=e,this.loose=!!e.loose;var n=t.trim().match(e.loose?o[u.LOOSE]:o[u.FULL]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<a)return e}return t})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}e.parse=h,e.valid=function(t,e){var n=h(t,e);return n?n.version:null},e.clean=function(t,e){var n=h(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null},e.SemVer=d,d.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},d.prototype.toString=function(){return this.version},d.prototype.compare=function(t){return r("SemVer.compare",this.version,this.options,t),t instanceof d||(t=new d(t,this.options)),this.compareMain(t)||this.comparePre(t)},d.prototype.compareMain=function(t){return t instanceof d||(t=new d(t,this.options)),v(this.major,t.major)||v(this.minor,t.minor)||v(this.patch,t.patch)},d.prototype.comparePre=function(t){if(t instanceof d||(t=new d(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var n=this.prerelease[e],i=t.prerelease[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return v(n,i)}while(++e)},d.prototype.compareBuild=function(t){t instanceof d||(t=new d(t,this.options));var e=0;do{var n=this.build[e],i=t.build[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return v(n,i)}while(++e)},d.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this},e.inc=function(t,e,n,r){"string"===typeof n&&(r=n,n=void 0);try{return new d(t,n).inc(e,r).version}catch(i){return null}},e.diff=function(t,e){if(b(t,e))return null;var n=h(t),r=h(e),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var a="prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return i+o;return a},e.compareIdentifiers=v;var p=/^[0-9]+$/;function v(t,e){var n=p.test(t),r=p.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1}function g(t,e,n){return new d(t,n).compare(new d(e,n))}function m(t,e,n){return g(t,e,n)>0}function y(t,e,n){return g(t,e,n)<0}function b(t,e,n){return 0===g(t,e,n)}function _(t,e,n){return 0!==g(t,e,n)}function w(t,e,n){return g(t,e,n)>=0}function x(t,e,n){return g(t,e,n)<=0}function k(t,e,n,r){switch(e){case"===":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t===n;case"!==":return"object"===typeof t&&(t=t.version),"object"===typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return b(t,n,r);case"!=":return _(t,n,r);case">":return m(t,n,r);case">=":return w(t,n,r);case"<":return y(t,n,r);case"<=":return x(t,n,r);default:throw new TypeError("Invalid operator: "+e)}}function E(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof E){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof E))return new E(t,e);r("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===S?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(t,e){return v(e,t)},e.major=function(t,e){return new d(t,e).major},e.minor=function(t,e){return new d(t,e).minor},e.patch=function(t,e){return new d(t,e).patch},e.compare=g,e.compareLoose=function(t,e){return g(t,e,!0)},e.compareBuild=function(t,e,n){var r=new d(t,n),i=new d(e,n);return r.compare(i)||r.compareBuild(i)},e.rcompare=function(t,e,n){return g(e,t,n)},e.sort=function(t,n){return t.sort((function(t,r){return e.compareBuild(t,r,n)}))},e.rsort=function(t,n){return t.sort((function(t,r){return e.compareBuild(r,t,n)}))},e.gt=m,e.lt=y,e.eq=b,e.neq=_,e.gte=w,e.lte=x,e.cmp=k,e.Comparator=E;var S={};function O(t,e){if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof O)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new O(t.raw,e);if(t instanceof E)return new O(t.value,e);if(!(this instanceof O))return new O(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map((function(t){return this.parseRange(t.trim())}),this).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}function A(t,e){for(var n=!0,r=t.slice(),i=r.pop();n&&r.length;)n=r.every((function(t){return i.intersects(t,e)})),i=r.pop();return n}function T(t){return!t||"x"===t.toLowerCase()||"*"===t}function C(t,e,n,r,i,a,o,s,u,c,l,f,h){return((e=T(n)?"":T(r)?">="+n+".0.0":T(i)?">="+n+"."+r+".0":">="+e)+" "+(s=T(u)?"":T(c)?"<"+(+u+1)+".0.0":T(l)?"<"+u+"."+(+c+1)+".0":f?"<="+u+"."+c+"."+l+"-"+f:"<="+s)).trim()}function j(t,e,n){for(var i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(i=0;i<t.length;i++)if(r(t[i].semver),t[i].semver!==S&&t[i].semver.prerelease.length>0){var a=t[i].semver;if(a.major===e.major&&a.minor===e.minor&&a.patch===e.patch)return!0}return!1}return!0}function D(t,e,n){try{e=new O(e,n)}catch(r){return!1}return e.test(t)}function R(t,e,n,r){var i,a,o,s,u;switch(t=new d(t,r),e=new O(e,r),n){case">":i=m,a=x,o=y,s=">",u=">=";break;case"<":i=y,a=w,o=m,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(D(t,e,r))return!1;for(var c=0;c<e.set.length;++c){var l=e.set[c],f=null,h=null;if(l.forEach((function(t){t.semver===S&&(t=new E(">=0.0.0")),f=f||t,h=h||t,i(t.semver,f.semver,r)?f=t:o(t.semver,h.semver,r)&&(h=t)})),f.operator===s||f.operator===u)return!1;if((!h.operator||h.operator===s)&&a(t,h.semver))return!1;if(h.operator===u&&o(t,h.semver))return!1}return!0}E.prototype.parse=function(t){var e=this.options.loose?o[u.COMPARATORLOOSE]:o[u.COMPARATOR],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new d(n[2],this.options.loose):this.semver=S},E.prototype.toString=function(){return this.value},E.prototype.test=function(t){if(r("Comparator.test",t,this.options.loose),this.semver===S||t===S)return!0;if("string"===typeof t)try{t=new d(t,this.options)}catch(e){return!1}return k(t,this.operator,this.semver,this.options)},E.prototype.intersects=function(t,e){if(!(t instanceof E))throw new TypeError("a Comparator is required");var n;if(e&&"object"===typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new O(t.value,e),D(this.value,n,e));if(""===t.operator)return""===t.value||(n=new O(this.value,e),D(t.semver,n,e));var r=(">="===this.operator||">"===this.operator)&&(">="===t.operator||">"===t.operator),i=("<="===this.operator||"<"===this.operator)&&("<="===t.operator||"<"===t.operator),a=this.semver.version===t.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===t.operator||"<="===t.operator),s=k(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),u=k(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||i||a&&o||s||u},e.Range=O,O.prototype.format=function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range},O.prototype.toString=function(){return this.range},O.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var n=e?o[u.HYPHENRANGELOOSE]:o[u.HYPHENRANGE];t=t.replace(n,C),r("hyphen replace",t),t=t.replace(o[u.COMPARATORTRIM],"$1$2$3"),r("comparator trim",t,o[u.COMPARATORTRIM]),t=(t=(t=t.replace(o[u.TILDETRIM],"$1~")).replace(o[u.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=e?o[u.COMPARATORLOOSE]:o[u.COMPARATOR],a=t.split(" ").map((function(t){return function(t,e){return r("comp",t,e),t=function(t,e){return t.trim().split(/\s+/).map((function(t){return function(t,e){r("caret",t,e);var n=e.loose?o[u.CARETLOOSE]:o[u.CARET];return t.replace(n,(function(e,n,i,a,o){var s;return r("caret",t,e,n,i,a,o),T(n)?s="":T(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":T(a)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":o?(r("replaceCaret pr",o),s="0"===n?"0"===i?">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+i+"."+(+a+1):">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+a+"-"+o+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+a+" <"+n+"."+i+"."+(+a+1):">="+n+"."+i+"."+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+a+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(t,e)})).join(" ")}(t,e),r("caret",t),t=function(t,e){return t.trim().split(/\s+/).map((function(t){return function(t,e){var n=e.loose?o[u.TILDELOOSE]:o[u.TILDE];return t.replace(n,(function(e,n,i,a,o){var s;return r("tilde",t,e,n,i,a,o),T(n)?s="":T(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":T(a)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":o?(r("replaceTilde pr",o),s=">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+a+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s}))}(t,e)})).join(" ")}(t,e),r("tildes",t),t=function(t,e){return r("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return function(t,e){t=t.trim();var n=e.loose?o[u.XRANGELOOSE]:o[u.XRANGE];return t.replace(n,(function(n,i,a,o,s,u){r("xRange",t,n,i,a,o,s,u);var c=T(a),l=c||T(o),f=l||T(s),h=f;return"="===i&&h&&(i=""),u=e.includePrerelease?"-0":"",c?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(l&&(o=0),s=0,">"===i?(i=">=",l?(a=+a+1,o=0,s=0):(o=+o+1,s=0)):"<="===i&&(i="<",l?a=+a+1:o=+o+1),n=i+a+"."+o+"."+s+u):l?n=">="+a+".0.0"+u+" <"+(+a+1)+".0.0"+u:f&&(n=">="+a+"."+o+".0"+u+" <"+a+"."+(+o+1)+".0"+u),r("xRange return",n),n}))}(t,e)})).join(" ")}(t,e),r("xrange",t),t=function(t,e){return r("replaceStars",t,e),t.trim().replace(o[u.STAR],"")}(t,e),r("stars",t),t}(t,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(t){return!!t.match(i)}))),a=a.map((function(t){return new E(t,this.options)}),this)},O.prototype.intersects=function(t,e){if(!(t instanceof O))throw new TypeError("a Range is required");return this.set.some((function(n){return A(n,e)&&t.set.some((function(t){return A(t,e)&&n.every((function(n){return t.every((function(t){return n.intersects(t,e)}))}))}))}))},e.toComparators=function(t,e){return new O(t,e).set.map((function(t){return t.map((function(t){return t.value})).join(" ").trim().split(" ")}))},O.prototype.test=function(t){if(!t)return!1;if("string"===typeof t)try{t=new d(t,this.options)}catch(n){return!1}for(var e=0;e<this.set.length;e++)if(j(this.set[e],t,this.options))return!0;return!1},e.satisfies=D,e.maxSatisfying=function(t,e,n){var r=null,i=null;try{var a=new O(e,n)}catch(o){return null}return t.forEach((function(t){a.test(t)&&(r&&-1!==i.compare(t)||(i=new d(r=t,n)))})),r},e.minSatisfying=function(t,e,n){var r=null,i=null;try{var a=new O(e,n)}catch(o){return null}return t.forEach((function(t){a.test(t)&&(r&&1!==i.compare(t)||(i=new d(r=t,n)))})),r},e.minVersion=function(t,e){t=new O(t,e);var n=new d("0.0.0");if(t.test(n))return n;if(n=new d("0.0.0-0"),t.test(n))return n;n=null;for(var r=0;r<t.set.length;++r){t.set[r].forEach((function(t){var e=new d(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":n&&!m(n,e)||(n=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}}))}if(n&&t.test(n))return n;return null},e.validRange=function(t,e){try{return new O(t,e).range||"*"}catch(n){return null}},e.ltr=function(t,e,n){return R(t,e,"<",n)},e.gtr=function(t,e,n){return R(t,e,">",n)},e.outside=R,e.prerelease=function(t,e){var n=h(t,e);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(t,e,n){return t=new O(t,n),e=new O(e,n),t.intersects(e)},e.coerce=function(t,e){if(t instanceof d)return t;"number"===typeof t&&(t=String(t));if("string"!==typeof t)return null;var n=null;if((e=e||{}).rtl){for(var r;(r=o[u.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),o[u.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;o[u.COERCERTL].lastIndex=-1}else n=t.match(o[u.COERCE]);if(null===n)return null;return h(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),e)}}).call(this,n(41))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e[0],version:e[1]}}},function(t,e){function n(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function r(t,e){var r=[],i=[];return null==e&&(e=function(t,e){return r[0]===e?"[Circular ~]":"[Circular ~."+i.slice(0,n(r,e)).join(".")+"]"}),function(a,o){if(r.length>0){var s=n(r,this);~s?r.splice(s+1):r.push(this),~s?i.splice(s,1/0,a):i.push(a),~n(r,o)&&(o=e.call(this,a,o))}else r.push(o);return null==t?o instanceof Error?function(t){var e={stack:t.stack,message:t.message,name:t.name};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(o):o:t.call(this,a,o)}}(t.exports=function(t,e,n,i){return JSON.stringify(t,r(e,i),n)}).getSerialize=r},function(t,e){},function(t,e,n){"use strict";var r=n(52),i=n(27),a=n(136),o=n(39),s=n(44),u=n(247),c=n(65),l=n(252),f=n(23)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,p,v,g,m){u(n,e,p);var y,b,_,w=function(t){if(!h&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},x=e+" Iterator",k="values"==v,E=!1,S=t.prototype,O=S[f]||S["@@iterator"]||v&&S[v],A=O||w(v),T=v?k?w("entries"):A:void 0,C="Array"==e&&S.entries||O;if(C&&(_=l(C.call(new t)))!==Object.prototype&&_.next&&(c(_,x,!0),r||"function"==typeof _[f]||o(_,f,d)),k&&O&&"values"!==O.name&&(E=!0,A=function(){return O.call(this)}),r&&!m||!h&&!E&&S[f]||o(S,f,A),s[e]=A,s[x]=d,v)if(y={values:k?A:w("values"),keys:g?A:w("keys"),entries:T},m)for(b in y)b in S||a(S,b,y[b]);else i(i.P+i.F*(h||E),e,y);return y}},function(t,e,n){t.exports=!n(36)&&!n(63)((function(){return 7!=Object.defineProperty(n(93)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){t.exports=n(39)},function(t,e,n){var r=n(40),i=n(45),a=n(250)(!1),o=n(98)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=o&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(c,n)||c.push(n));return c}},function(t,e,n){var r=n(21).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(28);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t.return;throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(44),i=n(23)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},function(t,e,n){var r=n(28),i=n(62),a=n(23)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},function(t,e,n){var r,i,a,o=n(43),s=n(259),u=n(138),c=n(93),l=n(21),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,g=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){y.call(t.data)};h&&d||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},d=function(t){delete m[t]},"process"==n(54)(f)?r=function(t){f.nextTick(o(y,t,1))}:v&&v.now?r=function(t){v.now(o(y,t,1))}:p?(a=(i=new p).port2,i.port1.onmessage=b,r=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(o(y,t,1),0)}),t.exports={set:h,clear:d}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){var r=n(28),i=n(35),a=n(104);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(23)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(o){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},t(a)}catch(o){}return n}},function(t,e,n){(function(e){var r,i="undefined"!==typeof e?e:"undefined"!==typeof window?window:{},a=n(266);"undefined"!==typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),t.exports=r}).call(this,n(19))},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}},function(t,e){t.exports=function(t){var e=n.call(t);return"[object Function]"===e||"function"===typeof t&&"[object RegExp]"!==e||"undefined"!==typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},function(t,e,n){"use strict";var r=n(282),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var t={};try{for(var e in s(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(n){return!1}}(),c=function(t,e,n,r){var i;e in t&&("function"!==typeof(i=r)||"[object Function]"!==a.call(i)||!r())||(u?s(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},a=r(e);i&&(a=o.call(a,Object.getOwnPropertySymbols(e)));for(var s=0;s<a.length;s+=1)c(t,a[s],e[a[s]],n[a[s]])};l.supportsDescriptors=!!u,t.exports=l},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"===typeof t&&"number"===typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){"use strict";var r=n(67),i=n(284),a=r.call(Function.call,String.prototype.replace),o=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=i.ToString(i.CheckObjectCoercible(this));return a(a(t,o,""),s,"")}},function(t,e,n){"use strict";var r=n(151);t.exports=function(){return String.prototype.trim&&"\u200b"==="\u200b".trim()?String.prototype.trim:r}},function(t,e){t.exports=function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";t.exports=function(t){return t<200||t>=400}},function(t,e,n){t.exports={default:n(317),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(61));e.default=function(){var t=(0,i.default)();t.get,t.post,t.patch;return t.get=s(t.get.bind(t)),t.post=s(t.post.bind(t)),t.patch=s(t.patch.bind(t)),t};var i=o(n(106)),a=o(n(70));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){return function(e,n){return new r.default((function(r,i){t(e,n||{},(0,a.default)(r,i))}))}}},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(337)),i=a(n(340));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return function(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var s,u=(0,i.default)(t);!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(c){a=!0,o=c}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(347),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.unpackCAN=function(e){if(e.byteLength%i!==0){throw new Error("can-message.unpackCAN: byteLength must be a multiple of "+i)}for(var n=[],a=0;a<e.byteLength;a+=i){var o=e.slice(a,a+i),s=t.from(o),u=s.readInt32LE(0),c=s.readInt32LE(4),l=void 0;l=(u&r)>>>0?u>>>3:u>>>21;var f=c>>>16,h=new t(o.slice(8,8+(15&c))),d={address:l,busTime:f,data:h,bus:15&c>>4};n.push(d)}return n},e.packCAN=function(e){var i=e.address,a=e.data,o=e.bus;if(a.byteLength>8){throw new Error("can-message.packCAN: byteLength cannot be greater than 8")}i=i>=2048?(i<<3|n|r)>>>0:(i<<21|n)>>>0;var s=t.alloc(16);return s.writeUInt32LE(i),s.writeUInt32LE((a.byteLength|o<<4)>>>0,4),a.copy(s,8),s};var n=e.CAN_TRANSMIT=1,r=e.CAN_EXTENDED=4,i=16}).call(this,n(20).Buffer)},function(t,e,n){"use strict";var r=n(350),i=n(351),a=n(353),o=n(354);t.exports=function(){var t=i();return e.toHash=a(e),e.toArray=o(e),{broadcast:function(t,e){if(1===arguments.length)throw new Error("WeakmapEvent#broadcast expects arguments (obj, value)");return n(t).broadcast(e,t)},listen:e};function e(t,e){if(1===arguments.length)throw new Error("WeakmapEvent#listen expects arguments (obj, listen)");return n(t).listen(e)}function n(e){var n=t(e);return n.event=n.event||r(),n.event}}},function(t,e){function n(t,e){return function(){var n=[].slice.call(arguments),r=t.slice();return r.push.apply(r,n),e.apply(this,r)}}function r(t,e){return function(){var n=[].slice.call(arguments);return n.push.apply(n,t),e.apply(this,n)}}function i(t){return n([].slice.call(arguments,1),t)}function a(t){return r([].slice.call(arguments,1),t)}(e=t.exports=n).pa=r,e.apa=function(t,e,n){return function(){return n.apply(this,t.concat.apply(t,arguments).concat(e))}},e.partial=i,e.partialRight=a,e.curry=function(t){return i(i,t)},e.curryRight=function(t){return i(a,t)}},function(t,e,n){"use strict";var r=o(n(112)),i=o(n(355)),a=o(n(367));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t){(0,r.default)(this,e);var n=(0,i.default)(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name="CancelError",n}return(0,a.default)(e,t),e}(Error),u=function(t){return function(e,n){var r=void 0,i=void 0,a=new Promise((function(a,o){i=o,r=setTimeout((function(){(t?a:o)(n)}),e)}));return a.cancel=function(){r&&(clearTimeout(r),r=null,i(new s("Delay canceled")))},a}};t.exports=u(!0),t.exports.reject=u(!1),t.exports.CancelError=s},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(356)),i=o(n(358)),a="function"===typeof i.default&&"symbol"===typeof r.default?function(t){return typeof t}:function(t){return t&&"function"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"===typeof i.default&&"symbol"===a(r.default)?function(t){return"undefined"===typeof t?"undefined":a(t)}:function(t){return t&&"function"===typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":"undefined"===typeof t?"undefined":a(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(137),i=n(100).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(116),i=n(53),a=n(45),o=n(94),s=n(40),u=n(135),c=Object.getOwnPropertyDescriptor;e.f=n(36)?c:function(t,e){if(t=a(t),e=o(e,!0),u)try{return c(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";var r=n(168);t.exports=function(t){if(1===t.length)return 0;var e=r(t);return Math.sqrt(e)}},function(t,e,n){"use strict";var r=n(117);t.exports=function(t){if(0===t.length)throw new Error("variance requires at least one data point");return r(t,2)/t.length}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+r}},function(t,e,n){"use strict";t.exports=function(t){return t.slice().sort((function(t,e){return t-e}))}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],n=NaN,r=0,i=1,a=1;a<t.length+1;a++)t[a]!==e?(i>r&&(r=i,n=e),i=1,e=t[a]):i++;return n}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}},function(t,e,n){"use strict";var r=n(118);t.exports=function(t){return+r(t,.5)}},function(t,e,n){"use strict";var r=n(176);t.exports=function(t,e){var n=t.slice();return r(n.slice(),e)}},function(t,e,n){"use strict";t.exports=function(t,e){e=e||Math.random;for(var n,r,i=t.length;i>0;)r=Math.floor(e()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}},function(t,e,n){"use strict";t.exports=function(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}},function(t,e,n){"use strict";var r=n(37);t.exports=function(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(t),i=r(e),a=0,o=0;o<t.length;o++)a+=(t[o]-n)*(e[o]-i);return a/(t.length-1)}},function(t,e,n){"use strict";var r=n(120);t.exports=function(t){var e=r(t);return Math.sqrt(e)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){return(t*e+n*r)/(e+r)}},function(t,e,n){"use strict";var r=Math.sqrt(2*Math.PI);function i(t){for(var e=t,n=t,i=1;i<15;i++)e+=n*=t*t/(2*i+1);return Math.round(1e4*(.5+e/r*Math.exp(-t*t/2)))/1e4}for(var a=[],o=0;o<=3.09;o+=.01)a.push(i(o));t.exports=a},function(t,e,n){"use strict";t.exports=function(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return t>=0?n:-n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i="undefined"!==typeof Map,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.keyOrder=[]}return r(t,[{key:"forEach",value:function(t){for(var e=0;e<this.keyOrder.length;e++)t(this.elements[this.keyOrder[e]],this.keyOrder[e])}},{key:"set",value:function(e,n,r){var a=this;if(this.elements.hasOwnProperty(e)){if(r){var o=this.keyOrder.indexOf(e);this.keyOrder.splice(o,1),this.keyOrder.push(e)}}else this.keyOrder.push(e);if(null!=n){if(i&&n instanceof Map||n instanceof t){var s=function(){var i=a.elements.hasOwnProperty(e)?a.elements[e]:new t;return n.forEach((function(t,e){i.set(e,t,r)})),a.elements[e]=i,{v:void 0}}();if("object"===typeof s)return s.v}if(Array.isArray(n)||"object"!==typeof n)this.elements[e]=n;else{for(var u=this.elements.hasOwnProperty(e)?this.elements[e]:new t,c=Object.keys(n),l=0;l<c.length;l+=1)u.set(c[l],n[c[l]],r);this.elements[e]=u}}else this.elements[e]=n}},{key:"get",value:function(t){return this.elements[t]}},{key:"has",value:function(t){return this.elements.hasOwnProperty(t)}},{key:"addStyleType",value:function(e){var n=this;if(i&&e instanceof Map||e instanceof t)e.forEach((function(t,e){n.set(e,t,!0)}));else for(var r=Object.keys(e),a=0;a<r.length;a++)this.set(r[a],e[r[a]],!0)}}]),t}();e.default=a,t.exports=e.default},function(t,e,n){"use strict";var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(122),o=n(458),s={create:function(t){return(0,a.mapObj)(t,(function(t){var e=r(t,2),n=e[0],i=e[1],o=JSON.stringify(i);return[n,{_len:o.length,_name:(0,a.hashString)(o),_definition:i}]}))},rehydrate:function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o.addRenderedClassNames)(t)}},u={renderStatic:function(t){return(0,o.reset)(),(0,o.startBuffering)(),{html:t(),css:{content:(0,o.flushToString)(),renderedClassNames:(0,o.getRenderedClassNames)()}}}},c={suppressStyleInjection:function(){(0,o.reset)(),(0,o.startBuffering)()},clearBufferAndResumeStyleInjection:function(){(0,o.reset)()}};t.exports=function t(e,n){return{StyleSheet:i({},s,{extend:function(r){var i=r.map((function(t){return t.selectorHandler})).filter((function(t){return t}));return t(e,n.concat(i))}}),StyleSheetServer:u,StyleSheetTestUtils:c,css:function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return(0,o.injectAndGetClassName)(e,r,n)}}}},function(t){t.exports=JSON.parse('{"a":"5.6.0"}')},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(24);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(r.isURLSearchParams(e))a=e.toString();else{var o=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))})))})),a=o.join("&")}if(a){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";(function(e){var r=n(24),i=n(477),a={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e)?t=n(191):"undefined"!==typeof XMLHttpRequest&&(t=n(191)),t}(),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){s.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){s.headers[t]=r.merge(a)})),t.exports=s}).call(this,n(41))},function(t,e,n){"use strict";var r=n(24),i=n(478),a=n(188),o=n(480),s=n(481),u=n(192);t.exports=function(t){return new Promise((function(e,c){var l=t.data,f=t.headers;r.isFormData(l)&&delete f["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",p=t.auth.password||"";f.Authorization="Basic "+btoa(d+":"+p)}if(h.open(t.method.toUpperCase(),a(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?o(h.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:t,request:h};i(e,c,r),h=null}},h.onabort=function(){h&&(c(u("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){c(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var v=n(482),g=(t.withCredentials||s(t.url))&&t.xsrfCookieName?v.read(t.xsrfCookieName):void 0;g&&(f[t.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(f,(function(t,e){"undefined"===typeof l&&"content-type"===e.toLowerCase()?delete f[e]:h.setRequestHeader(e,t)})),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(m){if("json"!==t.responseType)throw m}"function"===typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),c(t),h=null)})),void 0===l&&(l=null),h.send(l)}))}},function(t,e,n){"use strict";var r=n(479);t.exports=function(t,e,n,i,a){var o=new Error(t);return r(o,e,n,i,a)}},function(t,e,n){"use strict";var r=n(24);t.exports=function(t,e){e=e||{};var n={};return r.forEach(["url","method","params","data"],(function(t){"undefined"!==typeof e[t]&&(n[t]=e[t])})),r.forEach(["headers","auth","proxy"],(function(i){r.isObject(e[i])?n[i]=r.deepMerge(t[i],e[i]):"undefined"!==typeof e[i]?n[i]=e[i]:r.isObject(t[i])?n[i]=r.deepMerge(t[i]):"undefined"!==typeof t[i]&&(n[i]=t[i])})),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){"undefined"!==typeof e[r]?n[r]=e[r]:"undefined"!==typeof t[r]&&(n[r]=t[r])})),n}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e){var n=1e3,r=60*n,i=60*r,a=24*i,o=365.25*a;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u,c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*a;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===c&&!1===isNaN(t))return e.long?s(u=t,a,"day")||s(u,i,"hour")||s(u,r,"minute")||s(u,n,"second")||u+" ms":function(t){if(t>=a)return Math.round(t/a)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=r)return Math.round(t/r)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){module.exports=e(t)}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:this,(function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),e>=2?"=":b64chars.charAt(n>>>6&63),e>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(e>>>10))+fromCharCode(56320+(1023&e));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,n=e%4,r=(e>0?b64tab[t.charAt(0)]<<18:0)|(e>1?b64tab[t.charAt(1)]<<12:0)|(e>2?b64tab[t.charAt(2)]<<6:0)|(e>3?b64tab[t.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"===typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(t){return encode(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}}))}).call(this,__webpack_require__(19))},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),a=t.indexOf("]");-1!=i&&-1!=a&&(t=t.substring(0,i)+t.substring(i,a).replace(/:/g,";")+t.substring(a,t.length));for(var o=n.exec(t||""),s={},u=14;u--;)s[r[u]]=o[u]||"";return-1!=i&&-1!=a&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(t,e,n){var r=n(500),i=n(501),a=n(502);t.exports=function(t){return r(t)||i(t)||a()}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e){t.exports=function(t){return n&&e.isBuffer(t)||r&&(t instanceof ArrayBuffer||i(t))};var n="function"===typeof e&&"function"===typeof e.isBuffer,r="function"===typeof ArrayBuffer,i=function(t){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}).call(this,n(20).Buffer)},function(t,e,n){var r=n(507),i=n(207),a=n(47),o=n(123),s=n(208),u=n(209),c=n(72)("socket.io-client:manager"),l=n(206),f=n(524),h=Object.prototype.hasOwnProperty;function d(t,e){if(!(this instanceof d))return new d(t,e);t&&"object"===typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},d.prototype.updateSocketIds=function(){for(var t in this.nsps)h.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},d.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(d.prototype),d.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},d.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},d.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(t,e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var a=s(n,"open",(function(){i.onopen(),t&&t()})),o=s(n,"error",(function(e){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u);var l=setTimeout((function(){c("connect attempt timed out after %d",u),a.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(o),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(s(t,"data",u(this,"ondata"))),this.subs.push(s(t,"ping",u(this,"onping"))),this.subs.push(s(t,"pong",u(this,"onpong"))),this.subs.push(s(t,"error",u(this,"onerror"))),this.subs.push(s(t,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(t){this.decoder.add(t)},d.prototype.ondecoded=function(t){this.emit("packet",t)},d.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},d.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new i(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",a),n.on("connect",(function(){n.id=r.generateId(t)})),this.autoConnect&&a()}function a(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},d.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},d.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){var r=n(124),i=n(510),a=n(520),o=n(521);e.polling=function(t){var e=!1,n=!1,o=!1!==t.jsonp;if("undefined"!==typeof location){var s="https:"===location.protocol,u=location.port;u||(u=s?443:80),e=t.hostname!==location.hostname||u!==t.port,n=t.secure!==s}if(t.xdomain=e,t.xscheme=n,"open"in new r(t)&&!t.forceJSONP)return new i(t);if(!o)throw new Error("JSONP disabled");return new a(t)},e.websocket=o},function(t,e,n){var r=n(125),i=n(73),a=n(48),o=n(74),s=n(205),u=n(75)("engine.io-client:polling");t.exports=l;var c=null!=new(n(124))({xdomain:!1}).responseType;function l(t){var e=t&&t.forceBase64;c&&!e||(this.supportsBinary=!1),r.call(this,t)}o(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--r||n()}))),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){u("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;u("polling got data %s",t);a.decodePayload(t,this.socket.binaryType,(function(t,n,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};a.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,n)}))},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){(function(e){var r=n(512),i=Object.prototype.toString,a="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function t(n){if(!n||"object"!==typeof n)return!1;if(r(n)){for(var i=0,s=n.length;i<s;i++)if(t(n[i]))return!0;return!1}if("function"===typeof e&&e.isBuffer&&e.isBuffer(n)||"function"===typeof ArrayBuffer&&n instanceof ArrayBuffer||a&&n instanceof Blob||o&&n instanceof File)return!0;if(n.toJSON&&"function"===typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&t(n[u]))return!0;return!1}}).call(this,n(20).Buffer)},function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,o={},s=0,u=0;function c(t){var e="";do{e=i[t%a]+e,t=Math.floor(t/a)}while(t>0);return e}function l(){var t=c(+new Date);return t!==r?(s=0,r=t):t+"."+c(s++)}for(;u<a;u++)o[i[u]]=u;l.encode=c,l.decode=function(t){var e=0;for(u=0;u<t.length;u++)e=e*a+o[t.charAt(u)];return e},t.exports=l},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(123),i=n(47),a=n(523),o=n(208),s=n(209),u=n(72)("socket.io-client:socket"),c=n(73),l=n(204);t.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function d(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[o(t,"open",s(this,"onopen")),o(t,"packet",s(this,"onpacket")),o(t,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},d.prototype.emit=function(t){if(f.hasOwnProperty(t))return h.apply(this,arguments),this;var e=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},d.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"===typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},d.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===r.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},d.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?h.apply(this,e):this.receiveBuffer.push(e)},d.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);u("sending ack %j",i),e.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:t,data:i})}}},d.prototype.onack=function(t){var e=this.acks[t.id];"function"===typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)h.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(t){return this.flags.compress=t,this},d.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e,n){(function(e){var r=n(234),i="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},a=i.Raven,o=new r;o.noConflict=function(){return i.Raven=a,o},o.afterLoad(),t.exports=o,t.exports.Client=r}).call(this,n(19))},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(240)},function(t,e,n){t.exports=function(){"use strict";var t,e,n="https:"===location.protocol||"chrome-extension:"===location.protocol||"localhost"===location.hostname,r=!1,i={createWriteStream:function(a,o,s){if(Number.isFinite(o)){var u=[o,s];s=u[0],o=u[1]}var c,l=new MessageChannel,f=function(r){return new Promise((function(o){var u,f,h=[{filename:a,size:s},"*",[l.port2]];r&&(h[0].readableStream=r,h[2].push(r)),l.port1.onmessage=function(t){t.data.download&&(o(),n||c.close(),window.chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window?chrome.tabs.create({url:t.data.download,active:!1}):window.location=t.data.download,r&&(l.port1.close(),l.port2.close()),l.port1.onmessage=null)},n&&!t&&((t=document.createElement("iframe")).src=i.mitm,t.hidden=!0,document.body.appendChild(t)),n&&!e&&t.addEventListener("load",u=function(){var n;e=!0,t.removeEventListener("load",u),(n=t.contentWindow).postMessage.apply(n,h)}),n&&e&&(f=t.contentWindow).postMessage.apply(f,h),n||(c=window.open(i.mitm,Math.random()),window.addEventListener("message",(function t(e){var n;e.source===c&&((n=c).postMessage.apply(n,h),window.removeEventListener("message",t))})))}))};if(r){var h=new TransformStream({start:function(){return new Promise((function(t){return setTimeout((function(){return f(h.readable).then(t)}))}))}},o);return h.writable}return new WritableStream({start:function(){return f()},write:function(t){l.port1.postMessage(t)},close:function(){l.port1.postMessage("end")},abort:function(){l.port1.postMessage("abort")}},o)},supported:!1,version:{full:"1.2.0",major:1,minor:2,dot:0}};i.mitm="https://jimmywarting.github.io/StreamSaver.js/mitm.html?version="+i.version.full;try{i.supported="serviceWorker"in navigator&&!!new ReadableStream&&!!new WritableStream}catch(s){}try{var a=(new TransformStream).readable,o=new MessageChannel;o.port1.postMessage(a,[a]),o.port1.close(),o.port2.close(),r=!0===a.locked}catch(s){}return i}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SAFETY_ELM327=e.SAFETY_ALLOUTPUT=e.SAFETY_TOYOTA_NOLIMITS=e.SAFETY_HONDA_BOSCH=e.SAFETY_TOYOTA=e.SAFETY_HONDA=e.SAFETY_NOOUTPUT=void 0,e.default=function(t){t=t||{};var e=new r.default(t,navigator.usb);return t.device=e,new i.default(t)};var r=a(n(343)),i=a(n(375));function a(t){return t&&t.__esModule?t:{default:t}}e.SAFETY_NOOUTPUT=0,e.SAFETY_HONDA=1,e.SAFETY_TOYOTA=2,e.SAFETY_HONDA_BOSCH=4,e.SAFETY_TOYOTA_NOLIMITS=4918,e.SAFETY_ALLOUTPUT=4919,e.SAFETY_ELM327=58151},function(t,e,n){"use strict";t.exports=function(t,e,n){if("string"!==typeof t)throw new Error("The string parameter must be a string.");if(t.length<1)throw new Error("The string parameter must be 1 character or longer.");if("number"!==typeof e)throw new Error("The length parameter must be a number.");if("string"!==typeof n&&n)throw new Error("The character parameter must be a string.");var r=-1;for(e-=t.length,n||0===n||(n=" ");++r<e;)t+=n;return t}},,function(t,e,n){var r,i,a;i=[t,n(382),n(384),n(385)],void 0===(a="function"===typeof(r=function(t,e,n,r){"use strict";var i=s(e),a=s(n),o=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),c(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof t.action?t.action:this.defaultAction,this.target="function"===typeof t.target?t.target:this.defaultTarget,this.text="function"===typeof t.text?t.text:this.defaultText,this.container="object"===u(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,o.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return f("action",t)}},{key:"defaultTarget",value:function(t){var e=f("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return f("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"===typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}]),e}(a.default);function f(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=l})?r.apply(e,i):r)||(t.exports=a)},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(121),a=n(185),o=(r=a)&&r.__esModule?r:{default:r};e.default=(0,o.default)(!0,i.defaultSelectorHandlers),t.exports=e.default},function(t,e,n){t.exports=function(){"use strict";return function(t){function e(e){if(e)try{t(e+"}")}catch(n){}}return function(n,r,i,a,o,s,u,c,l){switch(n){case 1:0===l&&64===r.charCodeAt(0)&&t(r);break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(i[0]+r),"";default:return r+"/*|*/"}case-2:r.split("/*|*/}").forEach(e)}}}}()},function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},o=2;var s=20,u=["top","right","bottom","left","width","height","size","weight"],c="undefined"!==typeof MutationObserver,l=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&c()}function u(){a(s)}function c(){var t=Date.now();if(n){if(t-i<o)return;r=!0}else n=!0,r=!1,setTimeout(u,e);i=t}return c}(this.refresh.bind(this),s)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;u.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),f=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},h=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},d=b(0,0,0,0);function p(t){return parseFloat(t)||0}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+p(t["border-"+n+"-width"])}),0)}function g(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return d;var r=h(t).getComputedStyle(t),i=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=t["padding-"+i];e[i]=p(a)}return e}(r),a=i.left+i.right,o=i.top+i.bottom,s=p(r.width),u=p(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==e&&(s-=v(r,"left","right")+a),Math.round(u+o)!==n&&(u-=v(r,"top","bottom")+o)),!function(t){return t===h(t).document.documentElement}(t)){var c=Math.round(s+a)-e,l=Math.round(u+o)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return b(i.left,i.top,s,u)}var m="undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof h(t).SVGGraphicsElement}:function(t){return t instanceof h(t).SVGElement&&"function"===typeof t.getBBox};function y(t){return r?m(t)?function(t){var e=t.getBBox();return b(0,0,e.width,e.height)}(t):g(t):d}function b(t,e,n,r){return{x:t,y:e,width:n,height:r}}var _=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=y(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),w=function(){return function(t,e){var n=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return f(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}(e);f(this,{target:t,contentRect:n})}}(),x=function(){function t(t,e,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=r}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new _(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new w(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),k="undefined"!==typeof WeakMap?new WeakMap:new n,E=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new x(e,n,this);k.set(this,r)}}();["observe","unobserve","disconnect"].forEach((function(t){E.prototype[t]=function(){var e;return(e=k.get(this))[t].apply(e,arguments)}}));var S="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:E;e.a=S}).call(this,n(19))},function(t){t.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"3.4.0","collaborators":["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com/)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"build":"npm run build:only","build:only":"npm run tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run build:only","postbuild:examples":"npm run data && TZ=America/Los_Angeles scripts/build-examples.sh","build:examples-full":"npm run build:only","postbuild:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"npm run data && bundle exec jekyll build -q && scripts/generate-toc","build:site":"npm run tsc:site && rollup -c site/rollup.config.js","build:versions":"scripts/update-version.sh","clean":"rm -rf build && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' -type f -delete","data":"rsync -r node_modules/vega-datasets/data/* data","deploy":"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh","schema":"mkdir -p build && ts-json-schema-generator -c -f tsconfig.json -t TopLevelSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/","renameschema":"scripts/rename-schema.sh","presite":"npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages","site":"bundle exec jekyll serve --incremental","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'{src,test,test-runtime,site,typings}/**/*.{md,css}\'","eslintbase":"eslint \'{src,test,test-runtime,site,typings}/**/*.{ts,js}\'","format":"npm run eslintbase -- --fix && npm run prettierbase -- --write","lint":"npm run eslintbase && npm run prettierbase -- --check","test":"jest test/ && npm run lint && npm run schema && jest examples/ && npm run test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","watch:build":"npm run build:only && concurrently --kill-others -n Typescript,Rollup \'npm run tsc:src -- -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'npm run tsc:site -- -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@types/chai":"^4.1.7","@types/d3":"^5.7.2","@types/highlight.js":"^9.12.3","@types/jest":"^24.0.15","@types/jest-environment-puppeteer":"^4.0.0","@types/mkdirp":"^0.5.2","@types/node":"^12.6.8","@types/puppeteer":"^1.12.4","@typescript-eslint/eslint-plugin":"^1.13.0","@typescript-eslint/parser":"^1.13.0","ajv":"^6.10.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.2","codecov":"^3.5.0","concurrently":"^4.1.1","d3":"^5.9.7","eslint":"^5.16.0","eslint-config-prettier":"^6.0.0","eslint-plugin-prettier":"^3.1.0","highlight.js":"^9.15.8","http-server":"^0.11.1","jest":"^24.8.0","jest-puppeteer":"^4.3.0","mkdirp":"^0.5.1","prettier":"^1.18.2","puppeteer":"^1.19.0","rollup":"^1.17.0","rollup-plugin-commonjs":"^10.0.1","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^5.1.1","svg2png-many":"^0.0.7","terser":"^4.1.2","ts-jest":"^24.0.2","ts-json-schema-generator":"^0.52.14","typescript":"~3.4.5","vega-cli":"^5.4.0","vega-datasets":"^1.25.0","vega-embed":"^4.2.1","vega-tooltip":"^0.18.1","yaml-front-matter":"^4.0.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","clone":"~2.1.2","fast-deep-equal":"~2.0.1","fast-json-stable-stringify":"~2.0.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~1.10.0","vega-event-selector":"~2.0.0","vega-expression":"~2.6.0","vega-typings":"0.7.2","vega-util":"~1.10.0","yargs":"~13.3.0"},"peerDependencies":{"vega":"^5.4.0"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(u){n=function(){}}try{r=Set}catch(u){r=function(){}}try{i=Promise}catch(u){i=function(){}}function a(o,u,c,l,f){"object"===typeof u&&(c=u.depth,l=u.prototype,f=u.includeNonEnumerable,u=u.circular);var h=[],d=[],p="undefined"!=typeof e;return"undefined"==typeof u&&(u=!0),"undefined"==typeof c&&(c=1/0),function o(c,v){if(null===c)return null;if(0===v)return c;var g,m;if("object"!=typeof c)return c;if(t(c,n))g=new n;else if(t(c,r))g=new r;else if(t(c,i))g=new i((function(t,e){c.then((function(e){t(o(e,v-1))}),(function(t){e(o(t,v-1))}))}));else if(a.__isArray(c))g=[];else if(a.__isRegExp(c))g=new RegExp(c.source,s(c)),c.lastIndex&&(g.lastIndex=c.lastIndex);else if(a.__isDate(c))g=new Date(c.getTime());else{if(p&&e.isBuffer(c))return g=e.allocUnsafe?e.allocUnsafe(c.length):new e(c.length),c.copy(g),g;t(c,Error)?g=Object.create(c):"undefined"==typeof l?(m=Object.getPrototypeOf(c),g=Object.create(m)):(g=Object.create(l),m=l)}if(u){var y=h.indexOf(c);if(-1!=y)return d[y];h.push(c),d.push(g)}for(var b in t(c,n)&&c.forEach((function(t,e){var n=o(e,v-1),r=o(t,v-1);g.set(n,r)})),t(c,r)&&c.forEach((function(t){var e=o(t,v-1);g.add(e)})),c){var _;m&&(_=Object.getOwnPropertyDescriptor(m,b)),_&&null==_.set||(g[b]=o(c[b],v-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(c);for(b=0;b<w.length;b++){var x=w[b];(!(E=Object.getOwnPropertyDescriptor(c,x))||E.enumerable||f)&&(g[x]=o(c[x],v-1),E.enumerable||Object.defineProperty(g,x,{enumerable:!1}))}}if(f){var k=Object.getOwnPropertyNames(c);for(b=0;b<k.length;b++){var E,S=k[b];(E=Object.getOwnPropertyDescriptor(c,S))&&E.enumerable||(g[S]=o(c[S],v-1),Object.defineProperty(g,S,{enumerable:!1}))}}return g}(o,c)}function o(t){return Object.prototype.toString.call(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return a.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},a.__objToStr=o,a.__isDate=function(t){return"object"===typeof t&&"[object Date]"===o(t)},a.__isArray=function(t){return"object"===typeof t&&"[object Array]"===o(t)},a.__isRegExp=function(t){return"object"===typeof t&&"[object RegExp]"===o(t)},a.__getRegExpFlags=s,a}();t.exports&&(t.exports=n)}).call(this,n(20).Buffer)},function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var o,s,u,c=r(e),l=r(n);if(c&&l){if((s=e.length)!=n.length)return!1;for(o=s;0!==o--;)if(!t(e[o],n[o]))return!1;return!0}if(c!=l)return!1;var f=e instanceof Date,h=n instanceof Date;if(f!=h)return!1;if(f&&h)return e.getTime()==n.getTime();var d=e instanceof RegExp,p=n instanceof RegExp;if(d!=p)return!1;if(d&&p)return e.toString()==n.toString();var v=i(e);if((s=v.length)!==i(n).length)return!1;for(o=s;0!==o--;)if(!a.call(n,v[o]))return!1;for(o=s;0!==o--;)if(!t(e[u=v[o]],n[u]))return!1;return!0}return e!==e&&n!==n}},function(t){t.exports=JSON.parse('{"name":"vega-themes","version":"2.4.0","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"http://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'src/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","rollup":"^1.20.3","rollup-plugin-json":"^4.0.0","terser":"^4.2.1","typescript":"~3.5.3","vega":"^5.5.2","vega-lite":"^4.0.0-beta.1","vega-lite-dev-config":"^0.2.5"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},function(t){t.exports=JSON.parse('{"name":"vega-tooltip","version":"0.18.1","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","build":"rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts && mkdir build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'{src,test,typings}/**/*.ts\' \'*.js\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"yarn clean && yarn copy:data && ./build-style.sh && tsc","prepublishOnly":"yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'tsc -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@types/jest":"^24.0.15","@types/node":"^12.6.8","browser-sync":"^2.26.7","concurrently":"^4.1.1","gh-pages":"^2.0.1","jest":"^24.8.0","node-sass":"^4.12.0","path":"^0.12.7","rollup":"^1.17.0","rollup-plugin-commonjs":"^10.0.1","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","terser":"^4.1.2","ts-jest":"^24.0.2","typescript":"^3.5.3","vega-datasets":"^1.25.0","vega-lite-dev-config":"^0.1.16","vega-typings":"^0.7.2"},"dependencies":{"vega-util":"^1.10.0"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},function(t,e,n){var r;"undefined"!==typeof window&&(r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,a),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new a:delete t._events[e]}function c(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,a,o){var s=i?i+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,a),!0;case 6:return l.fn.call(l.context,e,n,r,a,o),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,c=[],l=o.length;s<l;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&c.push(o[s]);c.length?this._events[a]=1===c.length?c[0]:c:u(this,a)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,n){!function(e){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=r.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(c.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var l=s.path,f=l.substring(0,l.lastIndexOf("/")+1)+a.path;c.path=o.normalizePath(f)}else c.path=s.path,a.params||(c.params=s.params,a.query||(c.query=s.query));return null===c.path&&(c.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(c)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=o}()},"./node_modules/webworkify-webpack/index.js":function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function o(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,r){var s={};s[r]=[];var u=e.toString(),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return s;for(var l,f=c[1],h=new RegExp("(\\\\n|\\W)"+o(f)+a,"g");l=h.exec(u);)"dll-reference"!==l[3]&&s[r].push(l[3]);for(h=new RegExp("\\("+o(f)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");l=h.exec(u);)t[l[2]]||(s[r].push(l[1]),t[l[2]]=n(l[1]).m),s[l[2]]=s[l[2]]||[],s[l[2]].push(l[4]);for(var d,p=Object.keys(s),v=0;v<p.length;v++)for(var g=0;g<s[p[v]].length;g++)d=s[p[v]][g],isNaN(1*d)||(s[p[v]][g]=1*s[p[v]][g]);return s}function u(t){return Object.keys(t).reduce((function(e,n){return e||t[n].length>0}),!1)}t.exports=function(t,e){e=e||{};var i={main:n.m},a=e.all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};u(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var c=a[o],l=n[c].pop();if(i[c]=i[c]||{},!i[c][l]&&t[c][l]){i[c][l]=!0,r[c]=r[c]||[],r[c].push(l);for(var f=s(t,t[c][l],c),h=Object.keys(f),d=0;d<h.length;d++)n[h[d]]=n[h[d]]||[],n[h[d]]=n[h[d]].concat(f[h[d]])}}return r}(i,t),o="";Object.keys(a).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;a[t][e];)e++;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var c=new window.Blob([o],{type:"text/javascript"});if(e.bare)return c;var l=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),f=new window.Worker(l);return f.objectURL=l,f}},"./src/crypt/decrypter.js":function(t,e,n){"use strict";var r=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),i=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],c=s[1],l=s[2],f=s[3],h=new Uint32Array(256),d=0,p=0,v=0;for(v=0;v<256;v++)h[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[d]=g,e[g]=d;var m=h[d],y=h[m],b=h[y],_=257*h[g]^16843008*g;r[d]=_<<24|_>>>8,i[d]=_<<16|_>>>16,a[d]=_<<8|_>>>24,o[d]=_,_=16843009*b^65537*y^257*m^16843008*d,u[g]=_<<24|_>>>8,c[g]=_<<16|_>>>16,l[g]=_<<8|_>>>24,f[g]=_,d?(d=m^h[h[h[b^m]]],p^=h[h[p]]):d=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,c=this.ksRows=4*(i+6+1),l=this.keySchedule=new Uint32Array(c),f=this.invKeySchedule=new Uint32Array(c),h=this.sBox,d=this.rcon,p=this.invSubMix,v=p[0],g=p[1],m=p[2],y=p[3];for(a=0;a<c;a++)a<i?s=l[a]=e[a]:(u=s,a%i===0?(u=h[(u=u<<8|u>>>24)>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u],u^=d[a/i|0]<<24):i>6&&a%i===4&&(u=h[u>>>24]<<24|h[u>>>16&255]<<16|h[u>>>8&255]<<8|h[255&u]),l[a]=s=(l[a-i]^u)>>>0);for(o=0;o<c;o++)a=c-o,u=3&o?l[a]:l[a-4],f[o]=o<4||a<=4?u:v[h[u>>>24]]^g[h[u>>>16&255]]^m[h[u>>>8&255]]^y[h[255&u]],f[o]=f[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n,r){for(var i,a,o,s,u,c,l,f,h,d,p,v,g,m,y=this.keySize+6,b=this.invKeySchedule,_=this.invSBox,w=this.invSubMix,x=w[0],k=w[1],E=w[2],S=w[3],O=this.uint8ArrayToUint32Array_(n),A=O[0],T=O[1],C=O[2],j=O[3],D=new Int32Array(t),R=new Int32Array(D.length),M=this.networkToHostOrderSwap;e<D.length;){for(h=M(D[e]),d=M(D[e+1]),p=M(D[e+2]),v=M(D[e+3]),u=h^b[0],c=v^b[1],l=p^b[2],f=d^b[3],g=4,m=1;m<y;m++)i=x[u>>>24]^k[c>>16&255]^E[l>>8&255]^S[255&f]^b[g],a=x[c>>>24]^k[l>>16&255]^E[f>>8&255]^S[255&u]^b[g+1],o=x[l>>>24]^k[f>>16&255]^E[u>>8&255]^S[255&c]^b[g+2],s=x[f>>>24]^k[u>>16&255]^E[c>>8&255]^S[255&l]^b[g+3],u=i,c=a,l=o,f=s,g+=4;i=_[u>>>24]<<24^_[c>>16&255]<<16^_[l>>8&255]<<8^_[255&f]^b[g],a=_[c>>>24]<<24^_[l>>16&255]<<16^_[f>>8&255]<<8^_[255&u]^b[g+1],o=_[l>>>24]<<24^_[f>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^b[g+2],s=_[f>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&l]^b[g+3],g+=3,R[e]=M(i^A),R[e+1]=M(s^T),R[e+2]=M(o^C),R[e+3]=M(a^j),A=h,T=d,C=p,j=v,e+=4}return r?function(t){var e=t.byteLength,n=e&&new DataView(t).getUint8(e-1);return n?t.slice(0,e-n):t}(R.buffer):R.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=n("./src/errors.js"),s=n("./src/utils/logger.js"),u=n("./src/events.js"),c=n("./src/utils/get-self-scope.js"),l=Object(c.getSelfScope)(),f=function(){function t(t,e,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var a=l.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(o){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,n,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new a),c.expandKey(e),o(c.decrypt(t,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var l=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i(l,e)),this.fastAesKey.expandKey().then((function(i){new r(l,n).decrypt(t,i).catch((function(r){u.onWebCryptoError(r,t,e,n,o)})).then((function(t){o(t)}))})).catch((function(r){u.onWebCryptoError(r,t,e,n,o)}))}},e.onWebCryptoError=function(t,e,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,r,i)):(s.logger.error("decrypting error : "+t.message),this.observer.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=f},"./src/demux/demuxer-inline.js":function(t,e,n){"use strict";var r=n("./src/events.js"),i=n("./src/errors.js"),a=n("./src/crypt/decrypter.js"),o=n("./src/polyfills/number-isFinite.js"),s=n("./src/utils/logger.js"),u=n("./src/utils/get-self-scope.js");function c(t,e){return 255===t[e]&&240===(246&t[e+1])}function l(t,e){return 1&t[e+1]?7:9}function f(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function h(t,e){return!!(e+1<t.length&&c(t,e))}function d(t,e){if(h(t,e)){var n=l(t,e);e+5<t.length&&(n=f(t,e));var r=e+n;if(r===t.length||r+1<t.length&&c(t,r))return!0}return!1}function p(t,e,n,a,o){if(!t.samplerate){var u=function(t,e,n,a){var o,u,c,l,f,h=navigator.userAgent.toLowerCase(),d=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&e[n+2])>>>6),!((u=(60&e[n+2])>>>2)>p.length-1))return l=(1&e[n+2])<<2,l|=(192&e[n+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+u+"["+p[u]+"Hz],channelConfig:"+l),/firefox/i.test(h)?u>=6?(o=5,f=new Array(4),c=u-3):(o=2,f=new Array(2),c=u):-1!==h.indexOf("android")?(o=2,f=new Array(2),c=u):(o=5,f=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&u>=6?c=u-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(u>=6&&1===l||/vivaldi/i.test(h))||!a&&1===l)&&(o=2,f=new Array(2)),c=u)),f[0]=o<<3,f[0]|=(14&u)>>1,f[1]|=(1&u)<<7,f[1]|=l<<3,5===o&&(f[1]|=(14&c)>>1,f[2]=(1&c)<<7,f[2]|=8,f[3]=0),{config:f,samplerate:p[u],channelCount:l,codec:"mp4a.40."+o,manifestCodec:d};t.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}(e,n,a,o);t.config=u.config,t.samplerate=u.samplerate,t.channelCount=u.channelCount,t.codec=u.codec,t.manifestCodec=u.manifestCodec,s.logger.log("parsed codec:"+t.codec+",rate:"+u.samplerate+",nb channel:"+u.channelCount)}}function v(t){return 9216e4/t}function g(t,e,n,r,i){var a=function(t,e,n,r,i){var a,o,s=t.length;if(a=l(t,e),o=f(t,e),(o-=a)>0&&e+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(e,n,r,i,v(t.samplerate));if(a){var o=a.stamp,s=a.headerLength,u=a.frameLength,c={unit:e.subarray(n+s,n+s+u),pts:o,dts:o};return t.samples.push(c),{sample:c,length:u+s}}}var m,y=n("./src/demux/id3.js"),b=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(y.default.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(d(t,e))return s.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,n,r){for(var i=this._audioTrack,a=y.default.getID3Data(t,0)||[],u=y.default.getTimeStamp(a),c=Object(o.isFiniteNumber)(u)?90*u:9e4*e,l=0,f=c,d=t.length,v=a.length,m=[{pts:f,dts:f,data:a}];v<d-1;)if(h(t,v)&&v+5<d){p(i,this.observer,t,v,i.manifestCodec);var b=g(i,t,v,c,l);if(!b){s.logger.log("Unable to parse AAC frame");break}v+=b.length,f=b.sample.pts,l++}else y.default.isHeader(t,v)?(a=y.default.getID3Data(t,v),m.push({pts:f,dts:f,data:a}),v+=a.length):v++;this.remuxer.remux(i,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},e,n,r)},e.destroy=function(){},t}(),_=n("./src/demux/mp4demuxer.js"),w={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,r,i){if(!(n+24>e.length)){var a=this.parseHeader(e,n);if(a&&n+a.frameLength<=e.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==a){var s=3===n?3-r:3===r?3:4,u=1e3*w.BitratesMap[14*s+i-1],c=3===n?0:2===n?1:2,l=w.SamplingRateMap[3*c+a],f=t[e+3]>>6===3?1:2,h=w.SamplesCoefficients[n][r],d=w.BytesInSlot[r],p=8*h*d;return{sampleRate:l,channelCount:f,frameLength:parseInt(h*u/l+o,10)*d,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224===(224&t[e+1])&&0!==(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),r=4;n&&n.frameLength&&(r=n.frameLength);var i=e+r;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}},x=w,k=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,n=8,r=8;for(e=0;e<t;e++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.readSPS=function(){var t,e,n,r,i,a,o,s=0,u=0,c=0,l=0,f=this.readUByte.bind(this),h=this.readBits.bind(this),d=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(f(),t=f(),h(5),v(3),f(),m(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=d();if(3===b&&v(1),m(),m(),v(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}m();var _=d();if(0===_)d();else if(1===_)for(v(1),g(),g(),e=d(),o=0;o<e;o++)g();m(),v(1),n=d(),r=d(),0===(i=h(1))&&v(1),v(1),p()&&(s=d(),u=d(),c=d(),l=d());var w=[1,1];if(p()&&p())switch(f()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-i)*(r+1)*16-(i?2:4)*(c+l),pixelRatio:w}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),E=function(){function t(t,e,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,n,r){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<=t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,r=32;r<=t.length-16;r+=160,n+=16)t.set(e.subarray(n,n+16),r);return t},e.decryptAvcSample=function(t,e,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,(function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(t,e,n+1,r)}))},e.decryptAvcSamples=function(t,e,n,r){for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,a,o),!o)return}}}},t}(),S={video:1,audio:2,id3:3,text:4},O=function(){function t(t,e,n,r){this.observer=t,this.config=n,this.typeSupported=r,this.remuxer=e,this.sampleAes=null}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new E(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0)&&(n&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:S[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.resetTimeStamp=function(){},e.append=function(e,n,a,o){var u,c,l,f,h,d=e.length,p=!1;this.contiguous=a;var v=this.pmtParsed,g=this._avcTrack,m=this._audioTrack,y=this._id3Track,b=g.pid,_=m.pid,w=y.pid,x=this._pmtId,k=g.pesData,E=m.pesData,S=y.pesData,O=this._parsePAT,A=this._parsePMT,T=this._parsePES,C=this._parseAVCPES.bind(this),j=this._parseAACPES.bind(this),D=this._parseMPEGPES.bind(this),R=this._parseID3PES.bind(this),M=t._syncOffset(e);for(d-=(d+M)%188,u=M;u<d;u+=188)if(71===e[u]){if(c=!!(64&e[u+1]),l=((31&e[u+1])<<8)+e[u+2],(48&e[u+3])>>4>1){if((f=u+5+e[u+4])===u+188)continue}else f=u+4;switch(l){case b:c&&(k&&(h=T(k))&&void 0!==h.pts&&C(h,!1),k={data:[],size:0}),k&&(k.data.push(e.subarray(f,u+188)),k.size+=u+188-f);break;case _:c&&(E&&(h=T(E))&&void 0!==h.pts&&(m.isAAC?j(h):D(h)),E={data:[],size:0}),E&&(E.data.push(e.subarray(f,u+188)),E.size+=u+188-f);break;case w:c&&(S&&(h=T(S))&&void 0!==h.pts&&R(h),S={data:[],size:0}),S&&(S.data.push(e.subarray(f,u+188)),S.size+=u+188-f);break;case 0:c&&(f+=e[f]+1),x=this._pmtId=O(e,f);break;case x:c&&(f+=e[f]+1);var P=A(e,f,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=P.avc)>0&&(g.pid=b),(_=P.audio)>0&&(m.pid=_,m.isAAC=P.isAAC),(w=P.id3)>0&&(y.pid=w),p&&!v&&(s.logger.log("reparse from beginning"),p=!1,u=M-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});k&&(h=T(k))&&void 0!==h.pts?(C(h,!0),g.pesData=null):g.pesData=k,E&&(h=T(E))&&void 0!==h.pts?(m.isAAC?j(h):D(h),m.pesData=null):(E&&E.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=E),S&&(h=T(S))&&void 0!==h.pts?(R(h),y.pesData=null):y.pesData=S,null==this.sampleAes?this.remuxer.remux(m,g,y,this._txtTrack,n,a,o):this.decryptAndRemux(m,g,y,this._txtTrack,n,a,o)},e.decryptAndRemux=function(t,e,n,r,i,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){s.decryptAndRemuxAvc(t,e,n,r,i,a,o)}))}else this.decryptAndRemuxAvc(t,e,n,r,i,a,o)},e.decryptAndRemuxAvc=function(t,e,n,r,i,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,(function(){s.remuxer.remux(t,e,n,r,i,a,o)}))}else this.remuxer.remux(t,e,n,r,i,a,o)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._parsePMT=function(t,e,n,r){var i,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!r){s.logger.log("unkown stream type:"+t[e]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){s.logger.log("unkown stream type:"+t[e]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},e._parsePES=function(t){var e,n,r,i,a,o,u,c,l=0,f=t.data;if(!t||0===t.size)return null;for(;f[0].length<19&&f.length>1;){var h=new Uint8Array(f[0].length+f[1].length);h.set(f[0]),h.set(f[1],f[0].length),f[0]=h,f.splice(1,1)}if(1===((e=f[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;192&(n=e[7])&&((o=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)>4294967295&&(o-=8589934592),64&n?((u=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>4294967295&&(u-=8589934592),o-u>54e5&&(s.logger.warn(Math.round((o-u)/9e4)+"s delta between PTS and DTS, align them"),o=u)):u=o),c=(i=e[8])+9,t.size-=c,a=new Uint8Array(t.size);for(var d=0,p=f.length;d<p;d++){var v=(e=f[d]).byteLength;if(c){if(c>v){c-=v;continue}e=e.subarray(c),v-=c,c=0}a.set(e,l),l+=v}return r&&(r-=i+3),{data:a,pts:o,dts:u,len:r}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(r||this.contiguous)?(t.id=r,n.push(t)):e.dropped++}t.debug.length&&s.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(t.data),u=this.avcSample,c=!1,l=this.pushAccesUnit.bind(this),f=function(t,e,n,r){return{key:t,pts:e,dts:n,units:[],debug:r}};t.data=null,u&&s.length&&!o.audFound&&(l(u,o),u=this.avcSample=f(!1,t.pts,t.dts,"")),s.forEach((function(e){switch(e.type){case 1:r=!0,u||(u=a.avcSample=f(!0,t.pts,t.dts,"")),u.frame=!0;var s=e.data;if(c&&s.length>4){var h=new k(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(u.key=!0)}break;case 5:r=!0,u||(u=a.avcSample=f(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(n=new k(a.discardEPB(e.data))).readUByte();for(var d=0,p=0,v=!1,g=0;!v&&n.bytesAvailable>1;){d=0;do{d+=g=n.readUByte()}while(255===g);p=0;do{p+=g=n.readUByte()}while(255===g);if(4===d&&0!==n.bytesAvailable){if(v=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var m=n.readUByte(),y=31&m,b=[m,n.readUByte()];for(i=0;i<y;i++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(p<n.bytesAvailable)for(i=0;i<p;i++)n.readUByte()}break;case 7:if(r=!0,c=!0,!o.sps){var _=(n=new k(e.data)).readSPS();o.width=_.width,o.height=_.height,o.pixelRatio=_.pixelRatio,o.sps=[e.data],o.duration=a._duration;var w=e.data.subarray(1,4),x="avc1.";for(i=0;i<3;i++){var E=w[i].toString(16);E.length<2&&(E="0"+E),x+=E}o.codec=x}break;case 8:r=!0,o.pps||(o.pps=[e.data]);break;case 9:r=!1,o.audFound=!0,u&&l(u,o),u=a.avcSample=f(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}u&&r&&u.units.push(e)})),e&&u&&(l(u,o),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e._parseAVCNALu=function(t){var e,n,r,i,a=0,o=t.byteLength,s=this._avcTrack,u=s.naluState||0,c=u,l=[],f=-1;for(-1===u&&(f=0,i=31&t[0],u=0,a=1);a<o;)if(e=t[a++],u)if(1!==u)if(e)if(1===e){if(f>=0)r={data:t.subarray(f,a-u-1),type:i},l.push(r);else{var h=this._getLastNalUnit();if(h&&(c&&a<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),(n=a-u-1)>0)){var d=new Uint8Array(h.data.byteLength+n);d.set(h.data,0),d.set(t.subarray(0,n),h.data.byteLength),h.data=d}}a<o?(f=a,i=31&t[a],u=0):u=-1}else u=0;else u=3;else u=e?0:2;else u=e?0:1;if(f>=0&&u>=0&&(r={data:t.subarray(f,o),type:i,state:u},l.push(r)),0===l.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+t.byteLength);v.set(p.data,0),v.set(t,p.data.byteLength),p.data=v}}return s.naluState=u,l},e.discardEPB=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},e._parseAACPES=function(t){var e,n,a,o,u,c,l,f=this._audioTrack,d=t.data,m=t.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var _=new Uint8Array(y.byteLength+d.byteLength);_.set(y,0),_.set(d,y.byteLength),d=_}for(a=0,u=d.length;a<u-1&&!h(d,a);a++);if(!a||(a<u-1?(c="AAC PES did not start with ADTS header,offset:"+a,l=!1):(c="no ADTS header found in AAC PES",l=!0),s.logger.warn("parsing error:"+c),this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:l,reason:c}),!l)){if(p(f,this.observer,d,a,this.audioCodec),n=0,e=v(f.samplerate),y&&b){var w=b+e;Math.abs(w-m)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-m)/90)),m=w)}for(;a<u;)if(h(d,a)&&a+5<u){var x=g(f,d,a,m,n);if(!x)break;a+=x.length,o=x.sample.pts,n++}else a++;y=a<u?d.subarray(a,u):null,this.aacOverFlow=y,this.aacLastPTS=o}},e._parseMPEGPES=function(t){for(var e=t.data,n=e.length,r=0,i=0,a=t.pts;i<n;)if(x.isHeader(e,i)){var o=x.appendFrame(this._audioTrack,e,i,a,r);if(!o)break;i+=o.length,r++}else i++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),A=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,n,r=y.default.getID3Data(t,0);if(r&&void 0!==y.default.getTimeStamp(r))for(e=r.length,n=Math.min(t.length-1,e+100);e<n;e++)if(x.probe(t,e))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,n,r){for(var i=y.default.getID3Data(t,0),a=y.default.getTimeStamp(i),o=a?90*a:9e4*e,s=i.length,u=t.length,c=0,l=0,f=this._audioTrack,h=[{pts:o,dts:o,data:i}];s<u;)if(x.isHeader(t,s)){var d=x.appendFrame(f,t,s,o,c);if(!d)break;s+=d.length,l=d.sample.pts,c++}else y.default.isHeader(t,s)?(i=y.default.getID3Data(t,s),h.push({pts:l,dts:l,data:i}),s+=i.length):s++;this.remuxer.remux(f,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,n,r)},e.destroy=function(){},t}(),T=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),C=Math.pow(2,32)-1,j=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,u,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for((e=new Uint8Array(r))[0]=r>>24&255,e[1]=r>>16&255,e[2]=r>>8&255,e[3]=255&r,e.set(t,4),i=0,r=8;i<a;i++)e.set(n[i],r),r+=n[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var r=Math.floor(n/(C+1)),i=Math.floor(n%(C+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var r=Math.floor(n/(C+1)),i=Math.floor(n%(C+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,a=[],o=[];for(n=0;n<e.sps.length;n++)i=(r=e.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)i=(r=e.pps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),u=e.width,c=e.height,l=e.pixelRatio[0],f=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,f>>24,f>>16&255,f>>8&255,255&f])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,a=e.height,o=Math.floor(r/(C+1)),s=Math.floor(r%(C+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,n){var r=t.sdtp(e),i=e.id,a=Math.floor(n/(C+1)),o=Math.floor(n%(C+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,r.length+16+20+8+16+8+8),r)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,a,o,s,u,c=e.samples||[],l=c.length,f=12+16*l,h=new Uint8Array(f);for(n+=8+f,h.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<l;r++)a=(i=c[r]).duration,o=i.size,s=i.flags,u=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var n,r=t.moov(e);return(n=new Uint8Array(t.FTYP.byteLength+r.byteLength)).set(t.FTYP),n.set(r,t.FTYP.byteLength),n},t}(),D=function(){function t(t,e,n,r){this.observer=t,this.config=e,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.remux=function(t,e,n,i,a,o,u){if(this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated){var c=t.samples.length,l=e.samples.length,f=a,h=a;if(c&&l){var d=(t.samples[0].pts-e.samples[0].pts)/e.inputTimeScale;f+=Math.max(0,d),h+=Math.max(0,-d)}if(c){t.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a));var p,v=this.remuxAudio(t,f,o,u);l&&(v&&(p=v.endPTS-v.startPTS),e.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,h,o,p,u))}else if(l){var g=this.remuxVideo(e,h,o,0,u);g&&t.codec&&this.remuxEmptyAudio(t,f,o,g)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(r.default.FRAG_PARSED)},e.generateIS=function(t,e,n){var a,o,u=this.observer,c=t.samples,l=e.samples,f=this.typeSupported,h="audio/mp4",d={},p={tracks:d},v=void 0===this._initPTS;if(v&&(a=o=1/0),t.config&&c.length&&(t.timescale=t.samplerate,s.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(f.mpeg?(h="audio/mpeg",t.codec=""):f.mp3&&(t.codec="mp3")),d.audio={container:h,codec:t.codec,initSegment:!t.isAAC&&f.mpeg?new Uint8Array:j.initSegment([t]),metadata:{channelCount:t.channelCount}},v&&(a=o=c[0].pts-t.inputTimeScale*n)),e.sps&&e.pps&&l.length){var g=e.inputTimeScale;e.timescale=g,d.video={container:"video/mp4",codec:e.codec,initSegment:j.initSegment([e]),metadata:{width:e.width,height:e.height}},v&&(a=Math.min(a,l[0].pts-g*n),o=Math.min(o,l[0].dts-g*n),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(d).length?(u.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,v&&(this._initPTS=a,this._initDTS=o)):u.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,n,a,o){var u,c,l,f,h,d,p,v=8,g=t.timescale,m=t.samples,y=[],b=m.length,_=this._PTSNormalize,w=this._initPTS,x=this.nextAvcDts,k=this.isSafari;if(0!==b){k&&(n|=m.length&&x&&(o&&Math.abs(e-x/g)<.1||Math.abs(m[0].pts-x-w)<g/5)),n||(x=e*g),m.forEach((function(t){t.pts=_(t.pts-w,x),t.dts=_(t.dts-w,x)})),m.sort((function(t,e){var n=t.dts-e.dts,r=t.pts-e.pts;return n||r||t.id-e.id}));var E=m.reduce((function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)}),0);if(E<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(E/90)+" ms to overcome this issue");for(var S=0;S<m.length;S++)m[S].dts+=E}var O=m[0];h=Math.max(O.dts,0),f=Math.max(O.pts,0);var A=Math.round((h-x)/90);n&&A&&(A>1?s.logger.log("AVC:"+A+" ms hole between fragments detected,filling it"):A<-1&&s.logger.log("AVC:"+-A+" ms overlapping between fragments detected"),h=x,m[0].dts=h,f=Math.max(f-A,x),m[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(h/90)+",delta:"+A+" ms")),O=m[m.length-1],p=Math.max(O.dts,0),d=Math.max(O.pts,0,p),k&&(u=Math.round((p-h)/(m.length-1)));for(var T=0,C=0,D=0;D<b;D++){for(var R=m[D],M=R.units,P=M.length,F=0,N=0;N<P;N++)F+=M[N].data.length;C+=F,T+=P,R.length=F,R.dts=k?h+D*u:Math.max(R.dts,h),R.pts=Math.max(R.pts,R.dts)}var L=C+4*T+8;try{c=new Uint8Array(L)}catch(rt){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating video mdat "+L})}var I=new DataView(c.buffer);I.setUint32(0,L),c.set(j.types.mdat,4);for(var B=0;B<b;B++){for(var U=m[B],z=U.units,q=0,W=void 0,H=0,G=z.length;H<G;H++){var Y=z[H],V=Y.data,$=Y.data.byteLength;I.setUint32(v,$),v+=4,c.set(V,v),v+=$,q+=4+$}if(k)W=Math.max(0,u*Math.round((U.pts-U.dts)/u));else{if(B<b-1)u=m[B+1].dts-U.dts;else{var X=this.config,K=U.dts-m[B>0?B-1:B].dts;if(X.stretchShortVideoTrack){var J=X.maxBufferHole,Z=Math.floor(J*g),Q=(a?f+a*g:this.nextAudioPts)-U.pts;Q>Z?((u=Q-K)<0&&(u=K),s.logger.log("It is approximately "+Q/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=K}else u=K}W=Math.round(U.pts-U.dts)}y.push({size:q,duration:u,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=p+u;var tt=t.dropped;if(t.nbNalu=0,t.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var et=y[0].flags;et.dependsOn=2,et.isNonSync=0}t.samples=y,l=j.moof(t.sequenceNumber++,h,t),t.samples=[];var nt={data1:l,data2:c,startPTS:f/g,endPTS:(d+u)/g,startDTS:h/g,endDTS:this.nextAvcDts/g,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:tt};return this.observer.trigger(r.default.FRAG_PARSING_DATA,nt),nt}},e.remuxAudio=function(t,e,n,a){var o,u,c,l,f,h,d=t.inputTimeScale,p=t.timescale,v=d/p,g=(t.isAAC?1024:1152)*v,m=this._PTSNormalize,y=this._initPTS,b=!t.isAAC&&this.typeSupported.mpeg,_=b?0:8,w=t.samples,x=[],k=this.nextAudioPts;if(n|=w.length&&k&&(a&&Math.abs(e-k/d)<.1||Math.abs(w[0].pts-k-y)<20*g),w.forEach((function(t){t.pts=t.dts=m(t.pts-y,e*d)})),0!==(w=w.filter((function(t){return t.pts>=0}))).length){if(n||(k=a?e*d:w[0].pts),t.isAAC)for(var E=this.config.maxAudioFramesDrift,S=0,O=k;S<w.length;){var A,C=w[S];A=C.pts-O;var D=Math.abs(1e3*A/d);if(A<=-E*g)s.logger.warn("Dropping 1 audio frame @ "+(O/d).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),w.splice(S,1);else if(A>=E*g&&D<1e4&&O){var R=Math.round(A/g);s.logger.warn("Injecting "+R+" audio frame @ "+(O/d).toFixed(3)+"s due to "+Math.round(1e3*A/d)+" ms gap.");for(var M=0;M<R;M++){var P=Math.max(O,0);(u=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=C.unit.subarray()),w.splice(S,0,{unit:u,pts:P,dts:P}),O+=g,S++}C.pts=C.dts=O,O+=g,S++}else Math.abs(A),C.pts=C.dts=O,O+=g,S++}for(var F=w.length,N=0;F--;)N+=w[F].unit.byteLength;for(var L=0,I=w.length;L<I;L++){var B=w[L],U=B.unit,z=B.pts;if(void 0!==h)o.duration=Math.round((z-h)/v);else{var q=Math.round(1e3*(z-k)/d),W=0;if(n&&t.isAAC&&q){if(q>0&&q<1e4)W=Math.round((z-k)/g),s.logger.log(q+" ms hole between AAC samples detected,filling it"),W>0&&((u=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(u=U.subarray()),N+=W*u.length);else if(q<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(k/d).toFixed(3)+"s/"+(z/d).toFixed(3)+"s/"+-q+"ms"),N-=U.byteLength;continue}z=k}if(f=z,!(N>0))return;N+=_;try{c=new Uint8Array(N)}catch(K){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating audio mdat "+N})}b||(new DataView(c.buffer).setUint32(0,N),c.set(j.types.mdat,4));for(var H=0;H<W;H++)(u=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=U.subarray()),c.set(u,_),_+=u.byteLength,o={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},x.push(o)}c.set(U,_);var G=U.byteLength;_+=G,o={size:G,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},x.push(o),h=z}var Y=0;if((F=x.length)>=2&&(Y=x[F-2].duration,o.duration=Y),F){this.nextAudioPts=k=h+v*Y,t.samples=x,l=b?new Uint8Array:j.moof(t.sequenceNumber++,f/v,t),t.samples=[];var V=f/d,$=k/d,X={data1:l,data2:c,startPTS:V,endPTS:$,startDTS:V,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(r.default.FRAG_PARSING_DATA,X),X}return null}},e.remuxEmptyAudio=function(t,e,n,r){var i=t.inputTimeScale,a=i/(t.samplerate?t.samplerate:i),o=this.nextAudioPts,u=(void 0!==o?o:r.startDTS*i)+this._initDTS,c=r.endDTS*i+this._initDTS,l=1024*a,f=Math.ceil((c-u)/l),h=T.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var d=[],p=0;p<f;p++){var v=u+p*l;d.push({unit:h,pts:v,dts:v})}t.samples=d,this.remuxAudio(t,e,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function(t){var e,n=t.samples.length,i=t.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(e=t.samples[s]).pts=(e.pts-a)/i,e.dts=(e.dts-o)/i;this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},e.remuxText=function(t){t.samples.sort((function(t,e){return t.pts-e.pts}));var e,n=t.samples.length,i=t.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(e=t.samples[o]).pts=(e.pts-a)/i;this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},e._PTSNormalize=function(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t},t}(),R=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,n,i,a,o,s,u){var c=this.observer,l="";t&&(l+="audio"),e&&(l+="video"),c.trigger(r.default.FRAG_PARSING_DATA,{data1:u,startPTS:a,startDTS:a,type:l,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),c.trigger(r.default.FRAG_PARSED)},t}(),M=Object(u.getSelfScope)();try{m=M.performance.now.bind(M.performance)}catch(F){s.logger.debug("Unable to use Performance API on this environment"),m=M.Date.now}var P=function(){function t(t,e,n,r){this.observer=t,this.typeSupported=e,this.config=n,this.vendor=r}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,n,i,o,s,u,c,l,f,h,d){var p=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var v=this.decrypter;null==v&&(v=this.decrypter=new a.default(this.observer,this.config));var g=m();v.decrypt(t,e.key.buffer,e.iv.buffer,(function(t){var a=m();p.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,o,s,u,c,l,f,h,d)}))}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,o,s,u,c,l,f,h,d)},e.pushDecrypted=function(t,e,n,a,o,s,u,c,l,f,h,d){var p=this.demuxer;if(!p||(u||c)&&!this.probe(t)){for(var v=this.observer,g=this.typeSupported,m=this.config,y=[{demux:O,remux:D},{demux:_.default,remux:R},{demux:b,remux:D},{demux:A,remux:D}],w=0,x=y.length;w<x;w++){var k=y[w],E=k.demux.probe;if(E(t)){var S=this.remuxer=new k.remux(v,m,g,this.vendor);p=new k.demux(v,S,m,g),this.probe=E;break}}if(!p)return void v.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var T=this.remuxer;(u||c)&&(p.resetInitSegment(n,a,o,f),T.resetInitSegment()),u&&(p.resetTimeStamp(d),T.resetTimeStamp(d)),"function"===typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,s,l,h)},t}();e.default=P},"./src/demux/demuxer-worker.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),a=n("./src/utils/logger.js"),o=n("./node_modules/eventemitter3/index.js");e.default=function(t){var e=new o.EventEmitter;e.trigger=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(r))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new r.default(e,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),e.on(i.default.FRAG_DECRYPTED,n),e.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(i.default.FRAG_PARSED,n),e.on(i.default.ERROR,n),e.on(i.default.FRAG_PARSING_METADATA,n),e.on(i.default.FRAG_PARSING_USERDATA,n),e.on(i.default.INIT_PTS_FOUND,n),e.on(i.default.FRAG_PARSING_DATA,(function(e,n){var r=[],i={event:e,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),t.postMessage(i,r)}))}},"./src/demux/id3.js":function(t,e,n){"use strict";n.r(e),n.d(e,"utf8ArrayToStr",(function(){return s}));var r,i=n("./src/utils/get-self-scope.js"),a=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var r=n,i=0;t.isHeader(e,n);)i+=10,i+=t._readSize(e,n+6),t.isFooter(e,n+10)&&(i+=10),n+=i;if(i>0)return e.subarray(r,r+i)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),r=0;r<n.length;r++){var i=n[r];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),r=t._readSize(e,4);return{type:n,size:r,data:e.subarray(10,10+r)}},t.getID3Frames=function(e){for(var n=0,r=[];t.isHeader(e,n);){for(var i=t._readSize(e,n+6),a=(n+=10)+i;n+8<a;){var o=t._getFrameData(e.subarray(n)),s=t._decodeFrame(o);s&&r.push(s),n+=o.size+10}t.isFooter(e,n)&&(n+=10)}return r},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:r.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,r=t._utf8ArrayToStr(e.data.subarray(n));n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,r=t._utf8ArrayToStr(e.data.subarray(n));n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var n=o();if(n){var r=n.decode(t);if(e){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,s,u,c=t.length,l="",f=0;f<c;){if(0===(a=t[f++])&&e)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:s=t[f++],l+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[f++],u=t[f++],l+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&u)<<0)}}return l},t}();function o(){var t=Object(i.getSelfScope)();return r||"undefined"===typeof t.TextDecoder||(r=new t.TextDecoder("utf-8")),r}var s=a._utf8ArrayToStr;e.default=a},"./src/demux/mp4demuxer.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/logger.js"),i=n("./src/events.js"),a=Math.pow(2,32)-1,o=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,n,r,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:r,initSegment:a?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var r,i,a,o,s,u,c=[];if(e.data?(s=e.start,a=e.end,e=e.data):(s=0,a=e.byteLength),!n.length)return null;for(r=s;r<a;)u=(i=t.readUint32(e,r))>1?r+i:a,t.bin2str(e.subarray(r+4,r+8))===n[0]&&(1===n.length?c.push({data:e,start:r+8,end:u}):(o=t.findBox({data:e,start:r+8,end:u},n.slice(1))).length&&(c=c.concat(o))),r=u;return c},t.parseSegmentIndex=function(e){var n,r=t.findBox(e,["moov"])[0],i=r?r.end:null,a=0,o=t.findBox(e,["sidx"]);if(!o||!o[0])return null;n=[];var s=(o=o[0]).data[0];a=0===s?8:16;var u=t.readUint32(o,a);a+=4,a+=0===s?8:16,a+=2;var c=o.end+0,l=t.readUint16(o,a);a+=2;for(var f=0;f<l;f++){var h=a,d=t.readUint32(o,h);h+=4;var p=2147483647&d;if(1===(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=t.readUint32(o,h);h+=4,n.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/u,start:c,end:c+p-1}}),c+=p,a=h+=4}return{earliestPresentationTime:0,timescale:u,version:s,referencesCount:l,references:n,moovEndOffset:i}},t.parseInitSegment=function(e){var n=[];return t.findBox(e,["moov","trak"]).forEach((function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=t.readUint32(i,o),u=t.findBox(e,["mdia","mdhd"])[0];if(u){o=0===(a=u.data[u.start])?12:20;var c=t.readUint32(u,o),l=t.findBox(e,["mdia","hdlr"])[0];if(l){var f={soun:"audio",vide:"video"}[t.bin2str(l.data.subarray(l.start+8,l.start+12))];if(f){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var d=t.bin2str(h.data.subarray(h.start+12,h.start+16));r.logger.log("MP4Demuxer:"+f+":"+d+" found")}n[s]={timescale:c,type:f},n[f]={timescale:c,id:s}}}}}})),n},t.getStartDTS=function(e,n){var r,i,a;return r=t.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map((function(n){return t.findBox(n,["tfhd"]).map((function(r){var i,a;return i=t.readUint32(r,4),a=e[i].timescale||9e4,t.findBox(n,["tfdt"]).map((function(e){var n,r;return n=e.data[e.start],r=t.readUint32(e,4),1===n&&(r*=Math.pow(2,32),r+=t.readUint32(e,8)),r}))[0]/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},t.offsetStartDTS=function(e,n,r){t.findBox(n,["moof","traf"]).map((function(n){return t.findBox(n,["tfhd"]).map((function(i){var o=t.readUint32(i,4),s=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map((function(e){var n=e.data[e.start],i=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,i-r*s);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=r*s,i=Math.max(i,0);var o=Math.floor(i/(a+1)),u=Math.floor(i%(a+1));t.writeUint32(e,4,o),t.writeUint32(e,8,u)}}))}))}))},e.append=function(e,n,r,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,u=this.initPTS;if(void 0===u){var c=t.getStartDTS(o,e);this.initPTS=u=c-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:u})}t.offsetStartDTS(o,e,u),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,r,a,e)},e.destroy=function(){},t}();e.default=o},"./src/errors.js":function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorTypes",(function(){return r})),n.d(e,"ErrorDetails",(function(){return i}));var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/events.js":function(t,e,n){"use strict";n.r(e),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"newCue",(function(){return re}));var i,a,o=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/errors.js"),u=n("./src/polyfills/number-isFinite.js"),c=n("./src/events.js"),l=n("./src/utils/logger.js"),f={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"===typeof this.handledEvents&&this.handledEvents.length&&"function"===typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){if(f[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)}),this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){this.hls.off(t,this.onEvent)}),this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){try{(function(t,e){var n="on"+t.replace("hls","");if("function"!==typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)}).call(this,t,e).call()}catch(n){l.logger.error("An internal error happened while handling event "+t+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:n})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(a||(a={}));var d=n("./src/demux/mp4demuxer.js");function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v,g=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}var e,n,r;return e=t,(n=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&p(e.prototype,n),r&&p(e,r),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t.AUDIO="audio",t.VIDEO="video"}(v||(v={}));var y=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((t={})[v.AUDIO]=!1,t[v.VIDEO]=!1,t),this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.sn=0,this.levelkey=void 0}var e,n,r,i=t.prototype;return i.setByteRange=function(t,e){var n=t.split("@",2),r=[];1===n.length?r[0]=e?e.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},i.addElementaryStream=function(t){this._elementaryStreams[t]=!0},i.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},i.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},i.setDecryptDataFromLevelKey=function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&((n=new g(t.baseuri,t.reluri)).method=t.method,n.iv=this.createInitializationVector(e)),n},e=t,(n=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!==typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&l.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(u.isFiniteNumber)(this.programDateTime))return null;var t=Object(u.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&m(e.prototype,n),r&&m(e,r),t}();function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var e,n,r;return e=t,(n=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(u.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&b(e.prototype,n),r&&b(e,r),t}(),w=/^(\d+)x(\d+)$/,x=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,k=function(){function t(e){for(var n in"string"===typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=w.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(x.lastIndex=0;null!==(e=x.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}(),E={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function S(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var O=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,A=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),C=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,j=/\.(mp4|m4s|m4v|m4a)$/i,D=function(){function t(){}return t.findGroup=function(t,e){if(!t)return null;for(var n=null,r=0;r<t.length;r++){var i=t[r];i.id===e&&(n=i)}return n},t.convertAVC1ToAVCOTI=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return o.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[];function a(t,e){["video","audio"].forEach((function(n){var r=t.filter((function(t){return function(t,e){var n=E[e];return!!n&&!0===n[t.slice(0,4)]}(t,n)}));if(r.length){var i=r.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=i.length>0?i[0]:r[0],t=t.filter((function(t){return-1===r.indexOf(t)}))}})),e.unknownCodecs=t}for(O.lastIndex=0;null!=(r=O.exec(e));){var o={},s=o.attrs=new k(r[1]);o.url=t.resolve(r[2],n);var u=s.decimalResolution("RESOLUTION");u&&(o.width=u.width,o.height=u.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,a([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),i.push(o)}return i},t.parseMasterPlaylistMedia=function(e,n,r,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(A.lastIndex=0;null!==(a=A.exec(e));){var u={},c=new k(a[1]);if(c.TYPE===r){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=r,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=t.resolve(c.URI,n)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var l=t.findGroup(i,u.groupId);u.audioCodec=l?l.codec:i[0].codec}u.id=s++,o.push(u)}}return o},t.parseLevelPlaylist=function(t,e,n,r,i){var a,o,s=0,c=0,f=new _(e),h=new g,d=0,p=null,v=new y,m=null;for(T.lastIndex=0;null!==(a=T.exec(t));){var b=a[1];if(b){v.duration=parseFloat(b);var w=(" "+a[2]).slice(1);v.title=w||null,v.tagList.push(w?["INF",b,w]:["INF",b])}else if(a[3]){if(Object(u.isFiniteNumber)(v.duration)){var x=s++;v.type=r,v.start=c,v.levelkey=h,v.sn=x,v.level=n,v.cc=d,v.urlId=i,v.baseurl=e,v.relurl=(" "+a[3]).slice(1),R(v,p),f.fragments.push(v),p=v,c+=v.duration,v=new y}}else if(a[4]){var E=(" "+a[4]).slice(1);p?v.setByteRange(E,p):v.setByteRange(E)}else if(a[5])v.rawProgramDateTime=(" "+a[5]).slice(1),v.tagList.push(["PROGRAM-DATE-TIME",v.rawProgramDateTime]),null===m&&(m=f.fragments.length);else{for(a=a[0].match(C),o=1;o<a.length&&"undefined"===typeof a[o];o++);var S=(" "+a[o+1]).slice(1),O=(" "+a[o+2]).slice(1);switch(a[o]){case"#":v.tagList.push(O?[S,O]:[S]);break;case"PLAYLIST-TYPE":f.type=S.toUpperCase();break;case"MEDIA-SEQUENCE":s=f.startSN=parseInt(S);break;case"TARGETDURATION":f.targetduration=parseFloat(S);break;case"VERSION":f.version=parseInt(S);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":d++,v.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(S);break;case"KEY":var A=new k(S),D=A.enumeratedString("METHOD"),M=A.URI,P=A.hexadecimalInteger("IV");D&&(h=new g,M&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(h.method=D,h.baseuri=e,h.reluri=M,h.key=null,h.iv=P));break;case"START":var F=new k(S).decimalFloatingPoint("TIME-OFFSET");Object(u.isFiniteNumber)(F)&&(f.startTimeOffset=F);break;case"MAP":var N=new k(S);v.relurl=N.URI,N.BYTERANGE&&v.setByteRange(N.BYTERANGE),v.baseurl=e,v.level=n,v.type=r,v.sn="initSegment",f.initSegment=v,(v=new y).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+a)}}}return(v=p)&&!v.relurl&&(f.fragments.pop(),c-=v.duration),f.totalduration=c,f.averagetargetduration=c/f.fragments.length,f.endSN=s-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=d,!f.initSegment&&f.fragments.length&&f.fragments.every((function(t){return j.test(t.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(v=new y).relurl=f.fragments[0].relurl,v.baseurl=e,v.level=n,v.type=r,v.sn="initSegment",f.initSegment=v,f.needSidxRanges=!0),m&&function(t,e){for(var n=t[e],r=e-1;r>=0;r--){var i=t[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(f.fragments,m),f},t}();function R(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(u.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var M=window.performance,P=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MANIFEST_LOADING,c.default.LEVEL_LOADING,c.default.AUDIO_TRACK_LOADING,c.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.canHaveQualityLevels=function(t){return t!==i.AUDIO_TRACK&&t!==i.SUBTITLE_TRACK},r.mapContextToLevelType=function(t){switch(t.type){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},r.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n};var o=r.prototype;return o.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,r=e.loader,i=new(n||r)(e);return t.loader=i,this.loaders[t.type]=i,i},o.getInternalLoader=function(t){return this.loaders[t.type]},o.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},o.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},o.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},o.onManifestLoading=function(t){this.load({url:t.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(t){this.load({url:t.url,type:i.LEVEL,level:t.level,id:t.id,responseType:"text"})},o.onAudioTrackLoading=function(t){this.load({url:t.url,type:i.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},o.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:i.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},o.load=function(t){var e=this.hls.config;l.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,r,a,o,s=this.getInternalLoader(t);if(s){var u=s.context;if(u&&u.url===t.url)return l.logger.trace("playlist request ongoing"),!1;l.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case i.MANIFEST:n=e.manifestLoadingMaxRetry,r=e.manifestLoadingTimeOut,a=e.manifestLoadingRetryDelay,o=e.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:n=0,o=0,a=0,r=e.levelLoadingTimeOut;break;default:n=e.levelLoadingMaxRetry,r=e.levelLoadingTimeOut,a=e.levelLoadingRetryDelay,o=e.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t);var c={timeout:r,maxRetry:n,retryDelay:a,maxRetryDelay:o},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return l.logger.debug("Calling internal loader delegate for URL: "+t.url),s.load(t,c,f),!0},o.loadsuccess=function(t,e,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,r);if(this.resetInternalLoader(n.type),"string"!==typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=t.data;e.tload=M.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,n,r):this._handleMasterPlaylist(t,e,n,r):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},o.loaderror=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!1,t)},o.loadtimeout=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!0)},o._handleMasterPlaylist=function(t,e,n,i){var a=this.hls,o=t.data,s=r.getResponseUrl(t,n),u=D.parseMasterPlaylist(o,s);if(u.length){var f=u.map((function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}})),h=D.parseMasterPlaylistMedia(o,s,"AUDIO",f),d=D.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(h.length){var p=!1;h.forEach((function(t){t.url||(p=!0)})),!1===p&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(l.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}a.trigger(c.default.MANIFEST_LOADED,{levels:u,audioTracks:h,subtitles:d,url:s,stats:e,networkDetails:i})}else this._handleManifestParsingError(t,n,"no level found in manifest",i)},o._handleTrackOrLevelPlaylist=function(t,e,n,a){var o=this.hls,s=n.id,l=n.level,f=n.type,h=r.getResponseUrl(t,n),d=Object(u.isFiniteNumber)(s)?s:0,p=Object(u.isFiniteNumber)(l)?l:d,v=r.mapContextToLevelType(n),g=D.parseLevelPlaylist(t.data,h,p,v,d);if(g.tload=e.tload,f===i.MANIFEST){var m={url:h,details:g};o.trigger(c.default.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:h,stats:e,networkDetails:a})}if(e.tparsed=M.now(),g.needSidxRanges){var y=g.initSegment.url;this.load({url:y,isSidxRequest:!0,type:f,level:l,levelDetails:g,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=g,this._handlePlaylistLoaded(t,e,n,a)},o._handleSidxRequest=function(t,e){if("string"===typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=d.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var r=n.references,i=e.levelDetails;r.forEach((function(t,e){var n=t.info;if(i){var r=i.fragments[e];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(t,e,n,r){this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:r})},o._handleNetworkError=function(t,e,n,r){var a,o;void 0===n&&(n=!1),void 0===r&&(r=null),l.logger.info("A network error occured while loading a "+t.type+"-type playlist");var u=this.getInternalLoader(t);switch(t.type){case i.MANIFEST:a=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}u&&(u.abort(),this.resetInternalLoader(t.type));var f={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:t.url,loader:u,context:t,networkDetails:e};r&&(f.response=r),this.hls.trigger(c.default.ERROR,f)},o._handlePlaylistLoaded=function(t,e,n,a){var o=n.type,s=n.level,u=n.id,l=n.levelDetails;if(l&&l.targetduration)if(r.canHaveQualityLevels(n.type))this.hls.trigger(c.default.LEVEL_LOADED,{details:l,level:s||0,id:u||0,stats:e,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(c.default.AUDIO_TRACK_LOADED,{details:l,id:u,stats:e,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(c.default.SUBTITLE_TRACK_LOADED,{details:l,id:u,stats:e,networkDetails:a})}else this._handleManifestParsingError(t,n,"invalid target duration",a)},r}(h),F=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.FRAG_LOADING)||this).loaders={},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){var e=this.loaders;for(var n in e){var r=e[n];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onFragLoading=function(t){var e=t.frag,n=e.type,r=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;e.loaded=0;var s,c,f,h=r[n];h&&(l.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=r[n]=e.loader=i.fLoader?new a(i):new o(i),s={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var d=e.byteRangeStartOffset,p=e.byteRangeEndOffset;Object(u.isFiniteNumber)(d)&&Object(u.isFiniteNumber)(p)&&(s.rangeStart=d,s.rangeEnd=p),c={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,c,f)},i.loadsuccess=function(t,e,n,r){void 0===r&&(r=null);var i=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(c.default.FRAG_LOADED,{payload:i,frag:a,stats:e,networkDetails:r})},i.loaderror=function(t,e,n){void 0===n&&(n=null);var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},i.loadtimeout=function(t,e,n){void 0===n&&(n=null);var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},i.loadprogress=function(t,e,n,r){void 0===r&&(r=null);var i=e.frag;i.loaded=t.loaded,this.hls.trigger(c.default.FRAG_LOAD_PROGRESS,{frag:i,stats:t,networkDetails:r})},r}(h),N=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},h.prototype.destroy.call(this)},i.onKeyLoading=function(t){var e=t.frag,n=e.type,r=this.loaders[n],i=e.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o,s,u,f=this.hls.config;r&&(l.logger.warn("abort previous key loader for type:"+n),r.abort()),e.loader=this.loaders[n]=new f.loader(f),this.decrypturl=a,this.decryptkey=null,o={url:a,frag:e,responseType:"arraybuffer"},s={timeout:f.fragLoadingTimeOut,maxRetry:0,retryDelay:f.fragLoadingRetryDelay,maxRetryDelay:f.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(o,s,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(c.default.KEY_LOADED,{frag:e}))},i.loadsuccess=function(t,e,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(t.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(c.default.KEY_LOADED,{frag:r})},i.loaderror=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},i.loadtimeout=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},r}(h),L="NOT_LOADED",I="APPENDING",B="PARTIAL",U="OK",z=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.BUFFER_APPENDED,c.default.FRAG_BUFFERED,c.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=e.config,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),t.prototype.destroy.call(this)},i.getBufferedFrag=function(t,e){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=t&&t<=a.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},i.detectEvictedFragments=function(t,e){var n,r,i=this;Object.keys(this.fragments).forEach((function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[t];if(s){n=s.time;for(var u=0;u<n.length;u++)if(r=n[u],!1===i.isTimeBuffered(r.startPTS,r.endPTS,e)){i.removeFragment(o.body);break}}}}))},i.detectPartialFragments=function(t){var e=this,n=this.getFragmentKey(t),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(t.hasElementaryStream(n)){var i=e.timeRanges[n];r.range[n]=e.getBufferedTimes(t.startPTS,t.endPTS,i)}})))},i.getBufferedTimes=function(t,e,n){for(var r,i,a=[],o=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,t>=r&&e<=i){a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<i&&e>r)a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),o=!0;else if(e<=r)break}return{time:a,partial:o}},i.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},i.getPartialFragment=function(t){var e,n,r,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var u=i.fragments[s];i.isPartial(u)&&(n=u.body.startPTS-i.bufferPadding,r=u.body.endPTS+i.bufferPadding,t>=n&&t<=r&&(e=Math.min(t-n,r-t),o<=e&&(a=u.body,o=e)))})),a},i.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],r=L;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?B:U:I),r},i.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},i.isTimeBuffered=function(t,e,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,t>=r&&e<=i)return!0;if(e<=r)return!1}return!1},i.onFragLoaded=function(t){var e=t.frag;Object(u.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(t){var n=e.timeRanges[t];e.detectEvictedFragments(t,n)}))},i.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},i.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},i.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},i.removeAllFragments=function(){this.fragments=Object.create(null)},r}(h),q={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){var o=e(a=t[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}},W=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,r=0;r<n.length;r++)if(e>=n.start(r)&&e<=n.end(r))return!0}catch(i){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var r,i=t.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,e,n)}}catch(o){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){var r,i,a,o,s,u=[];for(t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end})),s=0;s<t.length;s++){var c=u.length;if(c){var l=u[c-1].end;t[s].start-l<n?t[s].end>l&&(u[c-1].end=t[s].end):u.push(t[s])}else u.push(t[s])}for(s=0,r=0,i=a=e;s<u.length;s++){var f=u[s].start,h=u[s].end;if(e+n>=f&&e<h)i=f,r=(a=h)-e;else if(e+n<f){o=f;break}}return{len:r,start:i,end:a,nextStart:o}},t}(),H=n("./node_modules/eventemitter3/index.js"),G=n("./node_modules/webworkify-webpack/index.js"),Y=n("./src/demux/demuxer-inline.js");function V(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}var $=n("./src/utils/get-self-scope.js"),X=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.trigger=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(n))},r}(H.EventEmitter),K=Object($.getSelfScope)(),J=V(),Z=function(){function t(t,e){var n=this;this.hls=t,this.id=e;var r=this.observer=new X,i=t.config,a=function(e,r){(r=r||{}).frag=n.frag,r.id=n.id,t.trigger(e,r)};r.on(c.default.FRAG_DECRYPTED,a),r.on(c.default.FRAG_PARSING_INIT_SEGMENT,a),r.on(c.default.FRAG_PARSING_DATA,a),r.on(c.default.FRAG_PARSED,a),r.on(c.default.ERROR,a),r.on(c.default.FRAG_PARSING_METADATA,a),r.on(c.default.FRAG_PARSING_USERDATA,a),r.on(c.default.INIT_PTS_FOUND,a);var o={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(i.enableWorker&&"undefined"!==typeof Worker){var f;l.logger.log("demuxing in webworker");try{f=this.w=G("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(e){t.trigger(c.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},f.postMessage({cmd:"init",typeSupported:o,vendor:u,id:e,config:JSON.stringify(i)})}catch(h){l.logger.warn("Error in worker:",h),l.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),f&&K.URL.revokeObjectURL(f.objectURL),this.demuxer=new Y.default(r,o,i,u),this.w=void 0}}else this.demuxer=new Y.default(r,o,i,u)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function(t,e,n,r,i,a,o,s){var c=this.w,f=Object(u.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,d=this.frag,p=!(d&&i.cc===d.cc),v=!(d&&i.level===d.level),g=d&&i.sn===d.sn+1,m=!v&&g;if(p&&l.logger.log(this.id+":discontinuity detected"),v&&l.logger.log(this.id+":switch detected"),this.frag=i,c)c.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:e,audioCodec:n,videoCodec:r,timeOffset:f,discontinuity:p,trackSwitch:v,contiguous:m,duration:a,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,h,e,n,r,f,p,v,m,a,o,s)}},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":K.URL.revokeObjectURL(this.w.objectURL);break;case c.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}();function Q(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function tt(t,e,n){var r=t[e],i=t[n],a=i.startPTS;Object(u.isFiniteNumber)(a)?n>e?(r.duration=a-r.start,r.duration<0&&l.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&l.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=n>e?r.start+r.duration:Math.max(r.start-i.duration,0)}function et(t,e,n,r,i,a){var o=n;if(Object(u.isFiniteNumber)(e.startPTS)){var s=Math.abs(e.startPTS-n);Object(u.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(s,e.deltaPTS):e.deltaPTS=s,o=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),r=Math.max(r,e.endPTS),i=Math.min(i,e.startDTS),a=Math.max(a,e.endDTS)}var c=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=o,e.endPTS=r,e.startDTS=i,e.endDTS=a,e.duration=r-n;var l,f,h,d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;for(l=d-t.startSN,(f=t.fragments)[l]=e,h=l;h>0;h--)tt(f,h,h-1);for(h=l;h<f.length-1;h++)tt(f,h,h+1);return t.PTSKnown=!0,c}function nt(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var n,r=0;if(rt(t,e,(function(t,i){r=t.cc-i.cc,Object(u.isFiniteNumber)(t.startPTS)&&(i.start=i.startPTS=t.startPTS,i.endPTS=t.endPTS,i.duration=t.duration,i.backtracked=t.backtracked,i.dropped=t.dropped,n=i),e.PTSKnown=!0})),e.PTSKnown){if(r){l.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=e.fragments,a=0;a<i.length;a++)i[a].cc+=r}n?et(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(t,e){var n=e.startSN-t.startSN,r=t.fragments,i=e.fragments;if(!(n<0||n>r.length))for(var a=0;a<i.length;a++)i[a].start+=r[n].start}(t,e),e.PTSKnown=t.PTSKnown}}function rt(t,e,n){if(t&&e)for(var r=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=r;o<=i;o++){var s=t.fragments[a+o],u=e.fragments[o];if(!s||!u)break;n(s,u,o)}}function it(t,e,n){var r=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),i=r/2;return t&&e.endSN===t.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var at={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}};function ot(t,e){e.fragments.forEach((function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}})),e.PTSKnown=!0}function st(t,e,n){!function(t,e,n){if(function(t,e,n){var r=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(r=!0),r}(t,n,e)){var r=function(t,e){var n=t.fragments,r=e.fragments;if(r.length&&n.length){var i=function(t,e){for(var n=null,r=0;r<t.length;r+=1){var i=t[r];if(i&&i.cc===e){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;l.logger.log("No frag in previous level to align on")}else l.logger.log("No fragments to align")}(n.details,e);r&&(l.logger.log("Adjusting PTS using last level due to CC increase within current level"),ot(r.start,e))}}(t,n,e),!n.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e.fragments[0].programDateTime,r=(t.fragments[0].programDateTime-n)/1e3+e.fragments[0].start;Object(u.isFiniteNumber)(r)&&(l.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),ot(r,t))}}(n,e.details)}function ut(t,e,n){if(!Array.isArray(t)||!t.length||!Object(u.isFiniteNumber)(e))return null;if(e<t[0].programDateTime)return null;if(e>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var r=0;r<t.length;++r){var i=t[r];if(ft(e,n,i))return i}return null}function ct(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=t?e[t.sn-e[0].sn+1]:null;return i&&!lt(n,r,i)?i:q.search(e,lt.bind(null,n,r))}function lt(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function ft(t,e,n){var r=1e3*Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.endProgramDateTime-r>t}var ht=function(){function t(t,e,n,r){this.config=t,this.media=e,this.fragmentTracker=n,this.hls=r,this.stallReported=!1}var e=t.prototype;return e.poll=function(t,e){var n=this.config,r=this.media,i=r.currentTime,a=window.performance.now();if(i!==t)return this.stallReported&&(l.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(a-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(r.ended||!r.buffered.length||r.readyState>2)&&(!r.seeking||!W.isBuffered(r,i))){var o=a-this.stalled,s=W.bufferInfo(r,i,n.maxBufferHole);this.stalled?(o>=1e3&&this._reportStall(s.len),this._tryFixBufferStall(s,o)):this.stalled=a}},e._tryFixBufferStall=function(t,e){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);a&&this._trySkipBufferHole(a),t.len>.5&&e>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,l.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),e.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.hls,n=this.media,r=n.currentTime,i=0,a=0;a<n.buffered.length;a++){var o=n.buffered.start(a);if(r>=i&&r<o)return n.currentTime=Math.max(o,n.currentTime+.1),l.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+n.currentTime),this.stalled=null,void e.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+n.currentTime,frag:t});i=n.buffered.end(a)}},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<t.nudgeMaxRetry){var a=r+i*t.nudgeOffset;l.logger.log("adjust currentTime from "+r+" to "+a),n.currentTime=a,e.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else l.logger.error("still stuck in high buffer @"+r+" after "+t.nudgeMaxRetry+", raise fatal error"),e.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}();function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pt=function(t){var e,n;function r(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=t.call.apply(t,[this,e].concat(i))||this)._tickInterval=null,n._tickTimer=null,n._tickCallCount=0,n._boundTick=n.tick.bind(dt(dt(n))),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)})),i.clearInterval=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)})),i.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},r}(h),vt={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},gt=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=vt.STOPPED},i._streamEnded=function(t,e){var n=this.fragCurrent,r=this.fragmentTracker;if(!e.live&&n&&!n.backtracked&&n.sn===e.endSN&&!t.nextStart){var i=r.getState(n);return i===B||i===U}return!1},i.onMediaSeeking=function(){var t=this.config,e=this.media,n=this.mediaBuffer,r=this.state,i=e?e.currentTime:null,a=W.bufferInfo(n||e,i,this.config.maxBufferHole);if(Object(u.isFiniteNumber)(i)&&l.logger.log("media seeking to "+i.toFixed(3)),r===vt.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&&o){var s=t.maxFragLookUpTolerance,c=o.start-s,f=o.start+o.duration+s;i<c||i>f?(o.loader&&(l.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=vt.IDLE):l.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===vt.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=vt.IDLE);e&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=vt.STOPPED,this.fragmentTracker=null},r}(pt);function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yt=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADING,c.default.MANIFEST_PARSED,c.default.LEVEL_LOADED,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.FRAG_LOAD_EMERGENCY_ABORTED,c.default.FRAG_PARSING_INIT_SEGMENT,c.default.FRAG_PARSING_DATA,c.default.FRAG_PARSED,c.default.ERROR,c.default.AUDIO_TRACK_SWITCHING,c.default.AUDIO_TRACK_SWITCHED,c.default.BUFFER_CREATED,c.default.BUFFER_APPENDED,c.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=vt.STOPPED,r.stallReported=!1,r.gapController=null,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,o,f,h=r.prototype;return h.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&-1===t&&(l.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=vt.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=vt.STOPPED},h.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},h.doTick=function(){switch(this.state){case vt.BUFFER_FLUSHING:this.fragLoadError=0;break;case vt.IDLE:this._doTickIdle();break;case vt.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=vt.IDLE);break;case vt.FRAG_LOADING_WAITING_RETRY:var e=window.performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(l.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=vt.IDLE);break;case vt.ERROR:case vt.STOPPED:case vt.FRAG_LOADING:case vt.PARSING:case vt.PARSED:case vt.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},h._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,o=Math.min(o,e.maxMaxBufferLength);var u=W.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,e.maxBufferHole),f=u.len;if(!(f>=o)){l.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var h=a.details;if(!h||h.live&&this.levelLastLoaded!==i)this.state=vt.WAITING_LEVEL;else{if(this._streamEnded(u,h)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(c.default.BUFFER_EOS,d),void(this.state=vt.ENDED)}this._fetchPayloadOrEos(r,u,h)}}}}},h._fetchPayloadOrEos=function(t,e,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s,u=a[0].start,c=a[o-1].start+a[o-1].duration,f=e.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(o<h)return void l.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(s=this._ensureFragmentAtLivePoint(n,f,u,c,r,a,o)))return}else f<u&&(s=a[0]);s||(s=this._findFragment(u,r,o,a,f,c,n)),s&&(s.encrypted?(l.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(l.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+t.toFixed(3)+",bufferEnd:"+f.toFixed(3)),this._loadFragment(s)))}},h._ensureFragmentAtLivePoint=function(t,e,n,r,i,a,o){var s,u=this.hls.config,c=this.media,f=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-u.maxFragLookUpTolerance,r-f)){var h=this.liveSyncPosition=this.computeLivePosition(n,t);l.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,c&&c.readyState&&c.duration>h&&(c.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>r&&c&&c.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(i)if(t.hasProgramDateTime)l.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=ut(a,i.endProgramDateTime,u.maxFragLookUpTolerance);else{var d=i.sn+1;if(d>=t.startSN&&d<=t.endSN){var p=a[d-t.startSN];i.cc===p.cc&&(s=p,l.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=q.search(a,(function(t){return i.cc-t.cc})))&&l.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=a[Math.min(o-1,Math.round(o/2))],l.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},h._findFragment=function(t,e,n,r,i,a,o){var s,u=this.hls.config;if(s=i<a?ct(e,r,i,i>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance):r[n-1]){var c=s.sn-o.startSN,f=e&&s.level===e.level,h=r[c-1],d=r[c+1];if(e&&s.sn===e.sn)if(f&&!s.backtracked)if(s.sn<o.endSN){var p=e.deltaPTS;p&&p>u.maxBufferHole&&e.dropped&&c?(s=h,l.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=d,l.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(d&&d.backtracked?(l.logger.warn("Already backtracked from fragment "+d.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+d.sn),s=d):(l.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:c&&(s=null)))}return s},h._loadKey=function(t){this.state=vt.KEY_LOADING,this.hls.trigger(c.default.KEY_LOADING,{frag:t})},h._loadFragment=function(t){var e=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,Object(u.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||e===L||e===B?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(c.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new Z(this.hls,"main")),this.state=vt.FRAG_LOADING):e===I&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},h.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,a.MAIN)},h.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},h._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),W.isBuffered(n,e)?t=this.getBufferedFrag(e):W.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var r=t;if(r!==this.fragPlaying){this.hls.trigger(c.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(c.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},h.immediateLevelSwitch=function(){if(l.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},h.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,W.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},h.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,n,r;if((n=this.getBufferedFrag(t.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;e=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(t.currentTime+e))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},h.flushMainBuffer=function(t,e){this.state=vt.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(c.default.BUFFER_FLUSHING,n)},h.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new ht(n,e,this.fragmentTracker,this.hls)},h.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(l.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},h.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(u.isFiniteNumber)(e)&&l.logger.log("media seeked to "+e.toFixed(3)),this.tick()},h.onManifestLoading=function(){l.logger.log("trigger BUFFER_RESET"),this.hls.trigger(c.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},h.onManifestParsed=function(t){var e,n=!1,r=!1;t.levels.forEach((function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&l.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},h.onLevelLoaded=function(t){var e=t.details,n=t.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=e.totalduration,o=0;if(l.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var s=i.details;s&&e.fragments.length>0?(nt(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&Object(u.isFiniteNumber)(o)?l.logger.log("live playlist sliding:"+o.toFixed(3)):(l.logger.log("live playlist - outdated PTS, unknown sliding"),st(this.fragPrevious,r,e))):(l.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,st(this.fragPrevious,r,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=n,this.hls.trigger(c.default.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var f=e.startTimeOffset;Object(u.isFiniteNumber)(f)?(f<0&&(l.logger.log("negative start time offset "+f+", count from end of last fragment"),f=o+a+f),l.logger.log("start time offset found in playlist, adjust startPosition to "+f),this.startPosition=f):e.live?(this.startPosition=this.computeLivePosition(o,e),l.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===vt.WAITING_LEVEL&&(this.state=vt.IDLE),this.tick()},h.onKeyLoaded=function(){this.state===vt.KEY_LOADING&&(this.state=vt.IDLE,this.tick())},h.onFragLoaded=function(t){var e=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,a=t.frag;if(this.state===vt.FRAG_LOADING&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var o=t.stats,s=r[e.level],u=s.details;if(this.bitrateTest=!1,this.stats=o,l.logger.log("Loaded "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level),a.bitrateTest&&n.nextLoadLevel)this.state=vt.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(c.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=vt.IDLE,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=t.payload,n.trigger(c.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{l.logger.log("Parsing "+e.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+e.level+", cc "+e.cc),this.state=vt.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var f=!(i&&i.seeking)&&(u.PTSKnown||!u.live),h=u.initSegment?u.initSegment.data:[],d=this._getAudioCodec(s);(this.demuxer=this.demuxer||new Z(this.hls,"main")).push(t.payload,h,d,s.videoCodec,e,u.totalduration,f)}}this.fragLoadError=0},h.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===vt.PARSING){var r,i,a=t.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(l.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",l.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=t.id}for(r in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(c.default.BUFFER_CODECS,a),a){i=a[r],l.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(c.default.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}},h.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"main"===t.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===vt.PARSING){var i=this.levels[this.level],a=n;if(Object(u.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(v.AUDIO),!0===t.hasVideo&&a.addElementaryStream(v.VIDEO),l.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)l.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return l.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=vt.IDLE,this.fragPrevious=a,void this.tick();l.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=et(i.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),f=this.hls;f.trigger(c.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(n){n&&n.length&&e.state===vt.PARSING&&(e.appended=!0,e.pendingBuffering=!0,f.trigger(c.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))})),this.tick()}},h.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===vt.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=vt.PARSED,this._checkAppendedParsed())},h.onAudioTrackSwitching=function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){l.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(l.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=vt.IDLE}var i=this.hls;i.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},h.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(l.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},h.onBufferCreated=function(t){var e,n,r=t.tracks,i=!1;for(var a in r){var o=r[a];"main"===o.id?(n=a,e=o,"video"===a&&(this.videoBuffer=r[a].buffer)):i=!0}i&&e?(l.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},h.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==vt.PARSING&&e!==vt.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},h._checkAppendedParsed=function(){if(this.state===vt.PARSED&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;l.logger.log("main buffered : "+at.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(c.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=vt.IDLE}this.tick()}},h.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&W.isBuffered(this.media,this.media.currentTime)&&W.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);l.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=vt.FRAG_LOADING_WAITING_RETRY}else l.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=vt.ERROR;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==vt.ERROR&&(t.fatal?(this.state=vt.ERROR,l.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==vt.WAITING_LEVEL||(this.state=vt.IDLE));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==vt.PARSING&&this.state!==vt.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=vt.IDLE):(l.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},h._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,l.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},h._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},h.onFragLoadEmergencyAborted=function(){this.state=vt.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},h.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(v.VIDEO,t.buffered),this.state=vt.IDLE,this.fragPrevious=null},h.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},h.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},h._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=t.seeking?e:this.startPosition;e!==n&&(l.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+e+" "),t.currentTime=n)},h._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(l.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},i=r,(o=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,l.logger.log("main stream:"+e+"->"+t),this.hls.trigger(c.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}])&&mt(i.prototype,o),f&&mt(i,f),r}(gt);function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}window.performance;var _t,wt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MANIFEST_LOADED,c.default.LEVEL_LOADED,c.default.AUDIO_TRACK_SWITCHED,c.default.FRAG_LOADED,c.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,_t=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,u=r.prototype;return u.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},u.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},u.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)})),null!==this.timer&&this.loadLevel()},u.stopLoad=function(){this.canload=!1},u.onManifestLoaded=function(t){var e,n=[],r=[],i={},a=null,o=!1,u=!1;if(t.levels.forEach((function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,u=u||!!t.audioCodec,_t&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(a=i[t.bitrate])?a.url.push(t.url):(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,n.push(t)),e&&(e.AUDIO&&(u=!0,Q(a||t,"audio",e.AUDIO)),e.SUBTITLES&&Q(a||t,"text",e.SUBTITLES))})),o&&u&&(n=n.filter((function(t){return!!t.videoCodec}))),n=n.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||S(e,"audio"))&&(!n||S(n,"video"))})),t.audioTracks&&(r=t.audioTracks.filter((function(t){return!t.audioCodec||S(t.audioCodec,"audio")}))).forEach((function(t,e){t.id=e})),n.length>0){e=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var f=0;f<n.length;f++)if(n[f].bitrate===e){this._firstLevel=f,l.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(c.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:t.stats,audio:u,video:o,altAudio:r.some((function(t){return!!t.url}))})}else this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},u.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){l.logger.log("switching to level "+t),this.currentLevelIndex=t;var r=e[t];r.level=t,n.trigger(c.default.LEVEL_SWITCHING,r)}var i=e[t],a=i.details;if(!a||a.live){var o=i.urlId;n.trigger(c.default.LEVEL_LOADING,{url:i.url[o],level:t,id:o})}}else n.trigger(c.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},u.onError=function(t){if(t.fatal)t.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,n=!1,r=!1;switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,r=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,n=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,n=!0}void 0!==e&&this.recoverLevel(t,e,n,r)}},u.recoverLevel=function(t,e,n,r){var i,a,o,s=this,u=this.hls.config,c=t.details,f=this._levels[e];if(f.loadError++,f.fragmentError=r,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return l.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),t.levelRetry=!0,this.levelRetryCount++,l.logger.warn("level controller, "+c+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=f.url.length)>1&&f.loadError<i?(f.urlId=(f.urlId+1)%i,f.details=void 0,l.logger.warn("level controller, "+c+" for level "+e+": switching to redundant URL-id "+f.urlId)):-1===this.manualLevelIndex?(o=0===e?this._levels.length-1:e-1,l.logger.warn("level controller, "+c+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):r&&(l.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},u.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},u.onLevelLoaded=function(t){var e=this,n=t.level,r=t.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var a=it(i.details,r,t.stats.trequest);l.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return e.loadLevel()}),a)}else this.clearTimer()}},u.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===e){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},u.loadLevel=function(){if(l.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"===typeof t&&t.url.length>0){var e=this.currentLevelIndex,n=t.urlId,r=t.url[n];l.logger.log("Attempt loading level index "+e+" with URL-id "+n),this.hls.trigger(c.default.LEVEL_LOADING,{url:r,level:e,id:n})}}},i=r,(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&bt(i.prototype,a),o&&bt(i,o),r}(h),xt=n("./src/demux/id3.js");function kt(t,e){var n=null;try{n=new window.Event("addtrack")}catch(r){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function Et(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}var St=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_METADATA)||this).id3Track=void 0,n.media=void 0,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){h.prototype.destroy.call(this)},i.onMediaAttached=function(t){this.media=t.media,this.media},i.onMediaDetaching=function(){Et(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return kt(n,this.media),n}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=xt.default.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:e.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var c=a[u];if(!xt.default.isTimeStampFrame(c)){var l=new r(o,s,"");l.value=c,this.id3Track.addCue(l)}}}}},r}(h),Ot=function(){function t(t){this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),At=function(){function t(t,e,n,r){this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ot(e),this.fast_=new Ot(n)}var e=t.prototype;return e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,r=8*e/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jt=window.performance,Dt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.FRAG_LOADING,c.default.FRAG_LOADED,c.default.FRAG_BUFFERED,c.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(Ct(Ct(n))),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,f=r.prototype;return f.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},f.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,a=i.config,o=e.level;i.levels[o].details.live?(n=a.abrEwmaFastLive,r=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,r=a.abrEwmaSlowVoD),this._bwEstimator=new At(i,r,n,a.abrEwmaDefaultEstimate)}},f._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(n){var r=n.loader,i=t.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(e&&a&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var o=jt.now()-a.trequest,s=Math.abs(e.playbackRate);if(o>500*n.duration/s){var u=t.levels,f=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),h=u[n.level],d=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*d/8)),v=e.currentTime,g=(p-a.loaded)/f,m=(W.bufferInfo(e,v,t.config.maxBufferHole).end-v)/s;if(m<2*n.duration/s&&g>m){var y;for(y=n.level-1;y>i;y--){var b=u[y].realBitrate?Math.max(u[y].realBitrate,u[y].bitrate):u[y].bitrate;if(n.duration*b/(6.4*f)<m)break}void 0<g&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),t.trigger(c.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},f.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(u.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],r=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,i=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},f.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!0!==e.aborted&&"main"===n.type&&Object(u.isFiniteNumber)(n.sn)&&(!n.bitrateTest||e.tload===e.tbuffered)){var r=e.tparsed-e.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(r,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},f.onError=function(t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},f.clearTimer=function(){clearInterval(this.timer),this.timer=null},f._findBestLevel=function(t,e,n,r,i,a,o,s,u){for(var c=i;c>=r;c--){var f=u[c];if(f){var h=f.details,d=h?h.totalduration/h.fragments.length:e,p=!!h&&h.live,v=void 0;v=c<=t?o*n:s*n;var g=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,m=g*d/v;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(v)+"/"+g+"/"+d+"/"+a+"/"+m),v>g&&(!m||p&&!this.bitrateTestDelay||m<a))return c}}return-1},i=r,(a=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(-1!==t&&(!e||!e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,r=t.config,i=t.minAutoLevel,a=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,c=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(W.bufferInfo(a,u,r.maxBufferHole).end-u)/c,d=this._findBestLevel(o,s,f,i,e,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(d>=0)return d;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,v=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,l.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=g=1)}return d=this._findBestLevel(o,s,f,i,e,h+p,v,g,n),Math.max(d,0)}}])&&Tt(i.prototype,a),o&&Tt(i,o),r}(h),Rt=V(),Mt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.MANIFEST_PARSED,c.default.BUFFER_RESET,c.default.BUFFER_APPENDING,c.default.BUFFER_CODECS,c.default.BUFFER_EOS,c.default.BUFFER_FLUSHING,c.default.LEVEL_PTS_UPDATED,c.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){l.logger.log("media source opened"),n.hls.trigger(c.default.MEDIA_ATTACHED,{media:n.media});var t=n.mediaSource;t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){l.logger.log("media source closed")},n._onMediaSourceEnded=function(){l.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var t=n.sourceBuffer.audio;l.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.audioTimestampOffset),t.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var e=n.parent,r=n.segments.reduce((function(t,n){return n.parent===e?t+1:t}),0),i={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}n.hls.trigger(c.default.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(t){l.logger.error("sourceBuffer error:",t),n.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){h.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-t.start)>.1){var i=r.updating;try{r.abort()}catch(a){l.logger.warn("can not abort audio buffer: "+a)}i?this.audioTimestampOffset=t.start:(l.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+t.start),r.timestampOffset=t.start)}}},i.onManifestParsed=function(t){this.bufferCodecEventsExpected=t.altAudio?2:1,l.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new Rt;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(n),this._objectUrl=e.src}},i.onMediaDetaching=function(){l.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(e){l.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):l.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(c.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,n=Object.keys(e).length;(n&&!t||2===n)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(r){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach((function(n){e.pendingTracks[n]=t[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in t)if(!e[r]){var i=t[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;l.logger.log("creating sourceBuffer("+o+")");try{var u=e[r]=n.addSourceBuffer(o);u.addEventListener("updateend",this._onSBUpdateEnd),u.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:u,codec:a,container:i.container,levelCodec:i.levelCodec}}catch(f){l.logger.error("error while trying to add sourceBuffer:"+f.message),this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:f,mimeType:o})}}this.hls.trigger(c.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},i.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var n=this.sourceBuffer[e];n&&!n.ended&&(n.ended=!0,l.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var r=t[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}l.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(i){l.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(!this.media)throw Error("flushLiveBackBuffer called without attaching media");if(this._live){var t=this.hls.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))for(var e=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=e-Math.max(t,this._levelTargetDuration),a=r.length-1;a>=0;a--){var o=r[a],s=n[o];if(s){var u=s.buffered;u.length>0&&i>u.start(0)&&this.removeBufferRange(o,s,0,i)}}}},i.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var t,e=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(l.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(u.isFiniteNumber)(t))&&(l.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(e+=i.buffered.length)}}catch(a){l.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(c.default.BUFFER_FLUSHED)}},i.doAppending=function(){var t=this.hls,e=this.segments,n=this.sourceBuffer;if(this.media,Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void l.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=e.shift();if(r)try{var i=n[r.type];if(!i)return void this._onSBUpdateEnd();if(i.updating)return void e.unshift(r);i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(o){l.logger.error("error while trying to append buffer:"+o.message),e.unshift(r);var a={type:s.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===o.code?(this.segments=[],a.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,a.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry&&(l.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),t.trigger(c.default.ERROR,a)}}}},i.flushBuffer=function(t,e,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),l.logger.log("flushBuffer,pos/start/end: "+i+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return l.logger.warn("abort flushing too many retries"),!0;var a=r[n];if(a){if(a.ended=!1,a.updating)return l.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,t,e))return this.flushBufferCounter++,!1}return l.logger.log("buffer flushed"),!0},i.removeBufferRange=function(t,e,n,r){try{for(var i=0;i<e.buffered.length;i++){var a=e.buffered.start(i),o=e.buffered.end(i),s=Math.max(a,n),u=Math.min(o,r);if(Math.min(u,o)-s>.5){var c="null";return this.media&&(c=this.media.currentTime.toString()),l.logger.log("sb remove "+t+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+c),e.remove(s,u),!0}}}catch(f){l.logger.warn("removeBufferRange failed",f)}return!1},r}(h);function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ft=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.FPS_DROP_LEVEL_CAPPING,c.default.MEDIA_ATTACHING,c.default.MANIFEST_PARSED,c.default.BUFFER_CODECS,c.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,s=r.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},s.onFpsDropLevelCapping=function(t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},s.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},s.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onLevelsUpdated=function(t){this.levels=t.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},s.getMaxLevel=function(t){var e=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,i){return r.isLevelAllowed(i,e.restrictedLevels)&&i<=t}));return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},r.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},r.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var r,i,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=n)&&(r=s,!(i=t[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},i=r,o=[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(e){}return t}}],(a=[{key:"mediaWidth",get:function(){var t,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=r.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=r.contentScaleFactor),t}}])&&Pt(i.prototype,a),o&&Pt(i,o),r}(h),Nt=window.performance,Lt=function(t){var e,n;function r(e){return t.call(this,e,c.default.MEDIA_ATTACHING)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"===typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},i.checkFPS=function(t,e,n){var r=Nt.now();if(e){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(c.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var f=u.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=f)&&(f-=1,u.trigger(c.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:u.currentLevel}),u.autoLevelCapping=f,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},i.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},r}(h),It=window,Bt=It.performance,Ut=It.XMLHttpRequest,zt=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:Bt.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new Ut;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(i){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(Bt.now(),r.trequest)),4===n){var o=e.status;if(o>=200&&o<300){var s,u;r.tload=Math.max(r.tfirst,Bt.now()),u="arraybuffer"===i.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=u;var c={url:e.responseURL,data:s};this.callbacks.onSuccess(c,r,i,e)}else r.retry>=a.maxRetry||o>=400&&o<499?(l.logger.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:e.statusText},i,e)):(l.logger.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function(){l.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,e)},t}();function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Wt=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MANIFEST_LOADING,c.default.MANIFEST_PARSED,c.default.AUDIO_TRACK_LOADED,c.default.AUDIO_TRACK_SWITCHED,c.default.LEVEL_LOADED,c.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,u=r.prototype;return u.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},u.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(c.default.AUDIO_TRACKS_UPDATED,{audioTracks:e})},u.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)l.logger.warn("Invalid audio track id:",t.id);else{if(l.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},u.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},u.onLevelLoaded=function(t){var e=this.hls.levels[t.level];if(e.audioGroupIds){var n=e.audioGroupIds[e.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},u.onError=function(t){t.type===s.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(l.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},u._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)l.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)l.logger.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];l.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=e.url,r=e.type,i=e.id;this.hls.trigger(c.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(e)}},u.doTick=function(){this._updateTrack(this._trackId)},u._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=e.filter((function(t){return t.default}));i.length?e=i:l.logger.warn("No default audio tracks defined")}var a=!1,o=function(){e.forEach((function(e){a||t.audioGroupId&&e.groupId!==t.audioGroupId||r&&r!==e.name||(t._setAudioTrack(e.id),a=!0)}))};o(),a||(r=null,o()),a||(l.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},u._needsTrackLoading=function(t){var e=t.details,n=t.url;return!(e&&!e.live)&&!!n},u._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,n=t.id;l.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(c.default.AUDIO_TRACK_LOADING,{url:e,id:n})}},u._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,l.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},u._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],n=e.name,r=e.language,i=e.groupId;l.logger.warn("Loading failed on audio track id: "+t+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var a=t,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){a=o;break}a!==t?(l.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):l.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},i=r,(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}])&&qt(i.prototype,a),o&&qt(i,o),r}(pt);function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Gt=window.performance,Yt=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.AUDIO_TRACKS_UPDATED,c.default.AUDIO_TRACK_SWITCHING,c.default.AUDIO_TRACK_LOADED,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.FRAG_PARSING_INIT_SEGMENT,c.default.FRAG_PARSING_DATA,c.default.FRAG_PARSED,c.default.ERROR,c.default.BUFFER_RESET,c.default.BUFFER_CREATED,c.default.BUFFER_APPENDED,c.default.BUFFER_FLUSHED,c.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=vt.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,f=r.prototype;return f.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,r=t.initPTS;"main"===e&&(this.initPTS[n]=r,this.videoTrackCC=n,l.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===vt.WAITING_INIT_PTS&&this.tick())},f.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(l.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=vt.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=vt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=vt.STOPPED},f.doTick=function(){var t,e,n,r=this.hls,i=r.config;switch(this.state){case vt.ERROR:case vt.PAUSED:case vt.BUFFER_FLUSHING:break;case vt.STARTING:this.state=vt.WAITING_TRACK,this.loadedmetadata=!1;break;case vt.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,f=W.bufferInfo(o,t,i.maxBufferHole),h=W.bufferInfo(s,t,i.maxBufferHole),d=f.len,p=f.end,v=this.fragPrevious,g=Math.min(i.maxBufferLength,i.maxMaxBufferLength),m=Math.max(g,h.len),y=this.audioSwitch,b=this.trackId;if((d<m||y)&&b<a.length){if("undefined"===typeof(n=a[b].details)){this.state=vt.WAITING_TRACK;break}if(!y&&this._streamEnded(f,n))return this.hls.trigger(c.default.BUFFER_EOS,{type:"audio"}),void(this.state=vt.ENDED);var _,w=n.fragments,x=w.length,k=w[0].start,E=w[x-1].start+w[x-1].duration;if(y)if(n.live&&!n.PTSKnown)l.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=t,n.PTSKnown&&t<k){if(!(f.end>k||f.nextStart))return;l.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=k+.05}if(n.initSegment&&!n.initSegment.data)_=n.initSegment;else if(p<=k){if(_=w[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=function(t,e){return q.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(w,this.videoTrackCC)),n.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var S=f.nextStart?f.nextStart:k;return l.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var O,A=i.maxFragLookUpTolerance,T=v?w[v.sn-w[0].sn+1]:void 0,C=function(t){var e=Math.min(A,t.duration);return t.start+t.duration-e<=p?1:t.start-e>p&&t.start?-1:0};p<E?(p>E-A&&(A=0),O=T&&!C(T)?T:q.search(w,C)):O=w[x-1],O&&(_=O,k=O.start,v&&_.level===v.level&&_.sn===v.sn&&(_.sn<n.endSN?(_=w[_.sn+1-n.startSN],l.logger.log("SN just loaded, load next one: "+_.sn)):_=null))}_&&(_.encrypted?(l.logger.log("Loading key for "+_.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+b),this.state=vt.KEY_LOADING,r.trigger(c.default.KEY_LOADING,{frag:_})):(l.logger.log("Loading "+_.sn+", cc: "+_.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+b+", currentTime:"+t+",bufferEnd:"+p.toFixed(3)),this.fragCurrent=_,(y||this.fragmentTracker.getState(_)===L)&&(this.startFragRequested=!0,Object(u.isFiniteNumber)(_.sn)&&(this.nextLoadPosition=_.start+_.duration),r.trigger(c.default.FRAG_LOADING,{frag:_}),this.state=vt.FRAG_LOADING)))}break;case vt.WAITING_TRACK:(e=this.tracks[this.trackId])&&e.details&&(this.state=vt.IDLE);break;case vt.FRAG_LOADING_WAITING_RETRY:var j=Gt.now(),D=this.retryDate,R=(o=this.media)&&o.seeking;(!D||j>=D||R)&&(l.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=vt.IDLE);break;case vt.WAITING_INIT_PTS:var M=this.videoTrackCC;if(void 0===this.initPTS[M])break;var P=this.waitingFragment;if(P){var F=P.frag.cc;M!==F?(e=this.tracks[this.trackId]).details&&e.details.live&&(l.logger.warn("Waiting fragment CC ("+F+") does not match video track CC ("+M+")"),this.waitingFragment=null,this.state=vt.IDLE):(this.state=vt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=vt.IDLE;break;case vt.STOPPED:case vt.FRAG_LOADING:case vt.PARSING:case vt.PARSED:case vt.ENDED:}},f.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},f.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(l.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},f.onAudioTracksUpdated=function(t){l.logger.log("audio tracks updated"),this.tracks=t.audioTracks},f.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=vt.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=vt.IDLE),this.tick()},f.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,r=this.tracks[n],i=e.totalduration,a=0;if(l.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live){var o=r.details;o&&e.fragments.length>0?(nt(o,e),a=e.fragments[0].start,e.PTSKnown?l.logger.log("live audio playlist sliding:"+a.toFixed(3)):l.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,l.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(r.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;Object(u.isFiniteNumber)(s)?(l.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===vt.WAITING_TRACK&&(this.state=vt.IDLE),this.tick()},f.onKeyLoaded=function(){this.state===vt.KEY_LOADING&&(this.state=vt.IDLE,this.tick())},f.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===vt.FRAG_LOADING&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=e.level,s=e.sn,u=e.cc,f=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===s)this.state=vt.IDLE,h.tparsed=h.tbuffered=Gt.now(),i.initSegment.data=t.payload,this.hls.trigger(c.default.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state=vt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new Z(this.hls,"audio"));var d=this.initPTS[u],p=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==d?(this.pendingBuffering=!0,l.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.demuxer.push(t.payload,p,f,null,e,a,!1,d)):(l.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=t,this.state=vt.WAITING_INIT_PTS)}}this.fragLoadError=0},f.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===vt.PARSING){var r,i=t.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(c.default.BUFFER_CODECS,i),l.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(c.default.BUFFER_APPENDING,o))}this.tick()}}},f.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&r.sn===n.sn&&r.level===n.level&&this.state===vt.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(u.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(v.AUDIO),l.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),et(a.details,n,t.startPTS,t.endPTS);var f=this.audioSwitch,h=this.media,d=!1;if(f&&h)if(h.readyState){var p=h.currentTime;l.logger.log("switching audio track : currentTime:"+p),p>=t.startPTS&&(l.logger.log("switching audio track : flushing all audio"),this.state=vt.BUFFER_FLUSHING,o.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,o.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:i});var g=this.pendingData;if(!g)return l.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(c.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&g.push({type:t.type,data:e,parent:"audio",content:"data"})})),!d&&g.length&&(g.forEach((function(t){e.state===vt.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(c.default.BUFFER_APPENDING,t))})),this.pendingData=[],this.appended=!0)),this.tick()}},f.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===vt.PARSING&&(this.stats.tparsed=Gt.now(),this.state=vt.PARSED,this._checkAppendedParsed())},f.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},f.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},f.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==vt.PARSING&&e!==vt.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},f._checkAppendedParsed=function(){if(this.state===vt.PARSED&&(!this.appended||!this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=Gt.now(),n.trigger(c.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;l.logger.log("audio buffered : "+at.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=vt.IDLE}this.tick()}},f.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);l.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=Gt.now()+a,this.state=vt.FRAG_LOADING_WAITING_RETRY}else l.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=vt.ERROR}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==vt.ERROR&&(this.state=t.fatal?vt.ERROR:vt.IDLE,l.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===vt.PARSING||this.state===vt.PARSED)){var o=this.mediaBuffer,u=this.media.currentTime;if(o&&W.isBuffered(o,u)&&W.isBuffered(o,u+.5)){var f=this.config;f.maxMaxBufferLength>=f.maxBufferLength&&(f.maxMaxBufferLength/=2,l.logger.warn("AudioStreamController: reduce max buffer length to "+f.maxMaxBufferLength+"s")),this.state=vt.IDLE}else l.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=vt.BUFFER_FLUSHING,this.hls.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},f.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(l.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach((function(e){t.hls.trigger(c.default.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=vt.PARSED):(this.state=vt.IDLE,this.fragPrevious=null,this.tick())},i=r,(a=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,l.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}])&&Ht(i.prototype,a),o&&Ht(i,o),r}(gt),Vt=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var t="auto",e={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(t){return"string"===typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function a(n,a,o){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var c="",l=!1,f=n,h=a,d=o,p=null,v="",g=!0,m="auto",y="start",b=50,_="middle",w=50,x="middle";Object.defineProperty(s,"id",i({},u,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return l},set:function(t){l=!!t}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(t){if("number"!==typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return h},set:function(t){if("number"!==typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return d},set:function(t){d=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return v},set:function(t){var n=function(t){return"string"===typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");v=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return m},set:function(e){if("number"!==typeof e&&e!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return _},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return w},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return x},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");x=e,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),$t=function(){return{decode:function(t){if(!t)return"";if("string"!==typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function Xt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new $t,this.regionList=[]}function Kt(){this.values=Object.create(null)}function Jt(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"===typeof i[a]){var o=i[a].split(n);2===o.length&&e(o[0],o[1])}}Kt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Zt=new Vt(0,0,0),Qt="middle"===Zt.align?"middle":"center";function te(t,e,n){var r=t;function i(){var e=function(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+(0|r)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),a(),e.endTime=i(),a(),function(t,e){var r=new Kt;Jt(t,(function(t,e){switch(t){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===e){r.set(t,n[i].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];r.integer(t,o),r.percent(t,o)&&r.set("snapToLines",!1),r.alt(t,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",Qt,"end"]);break;case"position":a=e.split(","),r.percent(t,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",Qt,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",Qt,"end","left","right"])}}),/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===Zt.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",Qt);var a=r.get("position","auto");"auto"===a&&50===Zt.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function ee(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Xt.prototype={parse:function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=ee(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var i=(r=n()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:r=n(),e.state){case"HEADER":/:/.test(r)?Jt(r,(function(t,e){}),/:/):r||(e.state="ID");continue;case"NOTE":r||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){e.state="NOTE";break}if(!r)continue;if(e.cue=new Vt(0,0,""),e.state="CUE",-1===r.indexOf("--\x3e")){e.cue.id=r;continue}case"CUE":try{te(r,e.cue,e.regionList)}catch(s){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(a=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=r;continue;case"BADCUE":r||(e.state="ID");continue}}}catch(s){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}};var ne=Xt;function re(t,e,n,r){for(var i,a,o,s,u,c=window.VTTCue||window.TextTrackCue,l=0;l<r.rows.length;l++)if(o=!0,s=0,u="",!(i=r.rows[l]).isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&o?s++:(u+=i.chars[f].uchar,o=!1);i.cueStartTime=e,e===n&&(n+=1e-4),a=new c(e,n,ee(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=l+1:a.line=l>7?l-2:l+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(a)}}var ie={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},ae=function(t){var e=t;return ie.hasOwnProperty(t)&&(e=ie[t]),String.fromCharCode(e)},oe=15,se=100,ue={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ce={17:2,18:4,21:6,22:8,23:10,19:13,20:15},le={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},fe={25:2,26:4,29:6,30:8,31:10,27:13,28:15},he=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],de={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseFilter[t],this.verboseLevel}},pe=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},ve=function(){function t(t,e,n,r,i){this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),ge=function(){function t(t,e,n,r,i,a){this.uchar=t||" ",this.penState=new ve(e,n,r,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),me=function(){function t(){this.chars=[];for(var t=0;t<se;t++)this.chars.push(new ge);this.pos=0,this.currPenState=new ve}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<se;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<se;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<se;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(de.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>se&&(de.log("ERROR","Too large cursor position "+this.pos),this.pos=se)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=ae(t);this.pos>=se?de.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<se;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<se;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),ye=function(){function t(){this.rows=[];for(var t=0;t<oe;t++)this.rows.push(new me);this.currRow=oe-1,this.nrRollUpRows=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<oe;t++)this.rows[t].clear();this.currRow=oe-1},e.equals=function(t){for(var e=!0,n=0;n<oe;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<oe;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<oe;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){de.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){de.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<oe;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<de.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,c=Math.max(u-1,0);s.setCursor(t.indent),t.color=s.chars[c].penState.foreground}var l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)},e.setBkgData=function(t){de.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){de.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),de.log("INFO","Rolling up")}else de.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=-1,i=0;i<oe;i++){var a=this.rows[i].getTextString();a&&(r=i+1,t?e.push("Row "+r+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),be=function(){function t(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new ye,this.nonDisplayedMemory=new ye,this.lastOutputScreen=new ye,this.currRollUpRow=this.displayedMemory.rows[oe-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[oe-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,de.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";de.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(de.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){de.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){de.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){de.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){de.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){de.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){de.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){de.log("INFO","TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){de.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){de.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){de.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){de.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(de.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,de.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){de.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}de.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=de.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),_e=function(){function t(t,e,n){this.field=t||1,this.outputs=[e,n],this.channels=[new be(1,e),new be(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,r,i,a=!1;this.lastTime=t,de.setTime(t);for(var o=0;o<e.length;o+=2)r=127&e[o],i=127&e[o+1],0!==r||0!==i?(de.log("DATA","["+pe([e[o],e[o+1]])+"] -> ("+pe([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(a=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):de.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,de.log("WARNING","Couldn't parse cleaned data "+pe([r,i])+" orig: "+pe([e[o],e[o+1]])))):this.dataCounters.padding+=2},e.parseCmd=function(t,e){var n=null;if(!((20===t||28===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=33&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,de.log("DEBUG","Repeated command ("+pe([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var r=this.channels[n-1];return 20===t||28===t?32===e?r.ccRCL():33===e?r.ccBS():34===e?r.ccAOF():35===e?r.ccAON():36===e?r.ccDER():37===e?r.ccRU(2):38===e?r.ccRU(3):39===e?r.ccRU(4):40===e?r.ccFON():41===e?r.ccRDC():42===e?r.ccTR():43===e?r.ccRTD():44===e?r.ccEDM():45===e?r.ccCR():46===e?r.ccENM():47===e&&r.ccEOC():r.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},e.parseMidrow=function(t,e){var n=null;return(17===t||25===t)&&e>=32&&e<=47&&((n=17===t?1:2)!==this.currChNr?(de.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(e),de.log("DEBUG","MIDROW ("+pe([t,e])+")"),!0))},e.parsePAC=function(t,e){var n,r=null;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127)&&!((16===t||24===t)&&e>=64&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=t<=23?1:2,r=e>=64&&e<=95?1===n?ue[t]:le[t]:1===n?ce[t]:fe[t];var i=this.interpretPAC(r,e);return this.channels[n-1].setPAC(i),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},e.interpretPAC=function(t,e){var n=e,r={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function(t,e){var n=null,r=null,i=null;if(t>=25?(n=2,i=t-8):(n=1,i=t),i>=17&&i<=19){var a=e;a=17===i?e+80:18===i?e+112:e+144,de.log("INFO","Special char '"+ae(a)+"' in channel "+n),r=[a]}else t>=32&&t<=127&&(r=0===e?[t]:[t,e]);if(r){var o=pe(r);de.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.parseBackgroundAttributes=function(t,e){var n,r,i;return((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47)&&(n={},16===t||24===t?(r=Math.floor((e-32)/2),n.background=he[r],e%2===1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),i=t<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},e.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),we=function(){function t(t,e){this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t}(),xe=function(t,e,n){return t.substr(n||0,e.length)===e},ke=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},Ee={parse:function(t,e,n,r,i,a){var o,s=Object(xt.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),c="00:00.000",l=0,f=0,h=0,d=[],p=!0,v=new ne;v.oncue=function(t){var e=n[r],i=n.ccOffset;e&&e.new&&(void 0!==f?i=n.ccOffset=e.start:function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC];t.presentationOffset=n}(n,r,h)),h&&(i=h-n.presentationOffset),t.startTime+=i-f,t.endTime+=i-f,t.id=ke(t.startTime.toString())+ke(t.endTime.toString())+ke(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&d.push(t)},v.onparsingerror=function(t){o=t},v.onflush=function(){o&&a?a(o):i(d)},s.forEach((function(t){if(p){if(xe(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach((function(t){xe(t,"LOCAL:")?c=t.substr(6):xe(t,"MPEGTS:")&&(l=parseInt(t.substr(7)))}));try{e+(9e4*n[r].start||0)<0&&(e+=8589934592),l-=e,f=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),r=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return Object(u.isFiniteNumber)(e)&&Object(u.isFiniteNumber)(n)&&Object(u.isFiniteNumber)(r)&&Object(u.isFiniteNumber)(i)?(e+=1e3*n,e+=6e4*r,e+=36e5*i):-1}(c)/1e3,h=l/9e4,-1===f&&(o=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(i){o=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}v.parse(t+"\n")})),v.flush()}};function Se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var Ae=function(t){var e,n;function r(e){var n;if((n=t.call(this,e,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.FRAG_DECRYPTED,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.FRAG_LOADED,c.default.LEVEL_SWITCHING,c.default.INIT_PTS_FOUND)||this).hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new we(Se(Se(n)),"textTrack1"),i=new we(Se(Se(n)),"textTrack2");n.cea608Parser=new _e(0,r,i)}return n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.addCues=function(t,e,n,r){for(var i,a,o,s,u=this.cueRanges,c=!1,l=u.length;l--;){var f=u[l],h=(i=f[0],a=f[1],o=e,s=n,Math.min(a,s)-Math.max(i,o));if(h>=0&&(f[0]=Math.min(f[0],e),f[1]=Math.max(f[1],n),c=!0,h/(n-e)>.5))return}c||u.push([e,n]),this.Cues.newCue(this.captionsTracks[t],e,n,r)},i.onInitPtsFound=function(t){var e=this;if("main"===t.id&&(this.initPTS[t.frag.cc]=t.initPTS),this.unparsedVttFrags.length){var n=this.unparsedVttFrags;this.unparsedVttFrags=[],n.forEach((function(t){e.onFragLoaded(t)}))}},i.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];if(r[t])return r}return null},i.createCaptionsTrack=function(t){var e=this.captionsProperties[t],n=e.label,r=e.languageCode,i=this.captionsTracks;if(!i[t]){var a=this.getExistingTrack(t);if(a)i[t]=a,Et(i[t]),kt(i[t],this.media);else{var o=this.createTextTrack("captions",n,r);o&&(o[t]=!0,i[t]=o)}}},i.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},i.destroy=function(){h.prototype.destroy.call(this)},i.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},i.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Et(t[e]),delete t[e]}))},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},i._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Et(e[n])}},i.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,r){var i;if(r<n.length){for(var a=null,o=0;o<n.length;o++)if(Oe(n[o],t)){a=n[o];break}a&&(i=a)}i||(i=e.createTextTrack("subtitles",t.name,t.lang)),t.default?i.mode=e.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",e.textTracks.push(i)}))}},i.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},i.onFragLoaded=function(t){var e=t.frag,n=t.payload;if("main"===e.type){var r=e.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===e.type)if(n.byteLength){if(!Object(u.isFiniteNumber)(this.initPTS[e.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var a=e.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(e,n)}else this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},i._parseVTTs=function(t,e){var n=this.vttCCs;n[t.cc]||(n[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var r=this.textTracks,i=this.hls;Ee.parse(e,this.initPTS[t.cc],n,t.cc,(function(e){var n=r[t.level];"disabled"!==n.mode?(e.forEach((function(t){if(!n.cues.getCueById(t.id))try{n.addCue(t)}catch(r){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,n.addCue(e)}})),i.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})):i.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}),(function(e){l.logger.log("Failed to parse VTT cue: "+e),i.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))},i.onFragDecrypted=function(t){var e=t.payload,n=t.frag;if("subtitle"===n.type){if(!Object(u.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(n,e)}},i.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var n=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,n)}},i.extractCea608Data=function(t){for(var e,n,r,i=31&t[0],a=2,o=[],s=0;s<i;s++)e=t[a++],n=127&t[a++],r=127&t[a++],0===n&&0===r||0!==(4&e)&&0===(3&e)&&(o.push(n),o.push(r));return o},r}(h);function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"subtitles"===r.kind&&r.label&&e.push(t[n])}return e}var je=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADED,c.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,s=r.prototype;return s.destroy=function(){h.prototype.destroy.call(this)},s.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){e.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},s.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(c.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)}))},s.onSubtitleTrackLoaded=function(t){var e=this,n=t.id,r=t.details,i=this.trackId,a=this.tracks,o=a[i];if(n>=a.length||n!==i||!o||this.stopped)this._clearReloadTimer();else if(l.logger.log("subtitle track "+n+" loaded"),r.live){var s=it(o.details,r,t.stats.trequest);l.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){e._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,n=this.hls,r=e[t];t<0||!r||r.details&&!r.details.live||(l.logger.log("Loading subtitle track "+t),n.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))},s._toggleTrackModes=function(t){var e=this.media,n=this.subtitleDisplay,r=this.trackId;if(e){var i=Ce(e.textTracks);if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var a=i[r];a&&(a.mode="disabled")}var o=i[t];o&&(o.mode=n?"showing":"hidden")}},s._setSubtitleTrackInternal=function(t){var e=this.hls,n=this.tracks;!Object(u.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,l.logger.log("Switching to subtitle track "+t),e.trigger(c.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=Ce(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},i=r,(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}])&&Te(i.prototype,a),o&&Te(i,o),r}(h),De=n("./src/crypt/decrypter.js");function Re(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Me,Pe=window.performance,Fe=function(t){var e,n;function r(e,n){var r;return(r=t.call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.ERROR,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.SUBTITLE_TRACKS_UPDATED,c.default.SUBTITLE_TRACK_SWITCH,c.default.SUBTITLE_TRACK_LOADED,c.default.SUBTITLE_FRAG_PROCESSED,c.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=e.config,r.state=vt.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new De.default(e,e.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(Re(Re(r))),r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.onSubtitleFragProcessed=function(t){var e=t.frag,n=t.success;if(this.fragPrevious=e,this.state=vt.IDLE,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,a=e.start,o=0;o<r.length;o++)if(a>=r[o].start&&a<=r[o].end){i=r[o];break}var s=e.start+e.duration;i?i.end=s:(i={start:a,end:s},r.push(i))}}},i.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state=vt.IDLE},i.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=vt.STOPPED},i.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=vt.IDLE)},i.onSubtitleTracksUpdated=function(t){var e=this;l.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]}))},i.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(t){var e=t.id,n=t.details,r=this.currentTrackId,i=this.tracks,a=i[r];e>=i.length||e!==r||!a||(n.live&&function(t,e,n){void 0===n&&(n=0);var r=-1;rt(t,e,(function(t,e,n){e.start=t.start,r=n}));var i=e.fragments;if(r<0)i.forEach((function(t){t.start+=n}));else for(var a=r+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},i.onKeyLoaded=function(){this.state===vt.KEY_LOADING&&(this.state=vt.IDLE)},i.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,r=t.frag,i=this.hls;if(this.state===vt.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=Pe.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,(function(t){var e=Pe.now();i.trigger(c.default.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:a,tdecrypt:e}})}))}},i.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},i.doTick=function(){if(this.media)switch(this.state){case vt.IDLE:var t=this.config,e=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[e]||!i[e].details)break;var a,o=t.maxBufferHole,s=t.maxFragLookUpTolerance,u=Math.min(t.maxBufferLength,t.maxMaxBufferLength),f=W.bufferedInfo(this._getBuffered(),r.currentTime,o),h=f.end,d=f.len,p=i[e].details,v=p.fragments,g=v.length,m=v[g-1].start+v[g-1].duration;if(d>u)return;var y=this.fragPrevious;h<m?(y&&p.hasProgramDateTime&&(a=ut(v,y.endProgramDateTime,s)),a||(a=ct(y,v,h,s))):a=v[g-1],a&&a.encrypted?(l.logger.log("Loading key for "+a.sn),this.state=vt.KEY_LOADING,this.hls.trigger(c.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===L&&(this.fragCurrent=a,this.state=vt.FRAG_LOADING,this.hls.trigger(c.default.FRAG_LOADING,{frag:a}))}else this.state=vt.IDLE},i.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){this.fragPrevious=null},r}(gt);function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(Me||(Me={}));var Le=function(t){var e,n;function r(e){var n;return(n=t.call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHED,c.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(t){l.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData)},n._widevineLicenseUrl=e.config.widevineLicenseUrl,n._licenseXhrSetup=e.config.licenseXhrSetup,n._emeEnabled=e.config.emeEnabled,n._requestMediaKeySystemAccess=e.config.requestMediaKeySystemAccessFunc,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i,a,o,u=r.prototype;return u.getLicenseServerUrl=function(t){switch(t){case Me.WIDEVINE:return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},u._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(t,e,n){switch(t){case Me.WIDEVINE:return function(t,e){var n={videoCapabilities:[]};return e.forEach((function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})})),[n]}(0,n);default:throw new Error("Unknown key-system: "+t)}}(t,0,n);l.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,i).then((function(e){r._onMediaKeySystemAccessObtained(t,e)})).catch((function(e){l.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},u._onMediaKeySystemAccessObtained=function(t,e){var n=this;l.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r),e.createMediaKeys().then((function(e){r.mediaKeys=e,l.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated()})).catch((function(t){l.logger.error("Failed to create media-keys:",t)}))},u._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},u._onNewMediaKeySession=function(t){var e=this;l.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},u._onKeySessionMessage=function(t,e){l.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){l.logger.log("Received license data, updating key-session"),t.update(e)}))},u._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},u._generateRequestWithPreferredKeySession=function(t,e){var n=this,r=this._mediaKeysList[0];if(!r)return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)l.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return l.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});l.logger.log('Generating key-session request for "'+t+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(t,e).then((function(){l.logger.debug("Key-session generation succeeded")})).catch((function(t){l.logger.error("Error generating key-session request:",t),n.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},u._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,t)}catch(a){r.open("POST",t,!0),i(r,t)}r.readyState||r.open("POST",t,!0)}catch(a){throw new Error("issue setting up KeySystem license XHR "+a)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n),r},u._onLicenseRequestReadyStageChange=function(t,e,n,r){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,l.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&l.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(t.response);else{if(l.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;l.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},u._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case Me.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},u._requestLicense=function(t,e){l.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,t,e);l.logger.log("Sending license request to URL: "+r);var a=this._generateLicenseRequestChallenge(n,t);i.send(a)}catch(o){l.logger.error("Failure requesting DRM license: "+o),this.hls.trigger(c.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},u.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},u.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},u.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map((function(t){return t.audioCodec})),n=t.levels.map((function(t){return t.videoCodec}));this._attemptKeySystemAccess(Me.WIDEVINE,e,n)}},i=r,(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Ne(i.prototype,a),o&&Ne(i,o),r}(h),Ie={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:zt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Dt,bufferController:Mt,capLevelController:Ft,fpsController:Lt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:"undefined"!==typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null};function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e,n){return e&&Be(t.prototype,e),n&&Be(t,n),t}function ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Ie.subtitleStreamController=Fe,Ie.subtitleTrackController=je,Ie.timelineController=Ae,Ie.cueHandler=r,Ie.enableCEA708Captions=!0,Ie.enableWebVTT=!0,Ie.captionsTextTrack1Label="English",Ie.captionsTextTrack1LanguageCode="en",Ie.captionsTextTrack2Label="Spanish",Ie.captionsTextTrack2LanguageCode="es",Ie.audioStreamController=Yt,Ie.audioTrackController=Wt,Ie.emeController=Le,n.d(e,"default",(function(){return qe}));var qe=function(t){var e,n;function r(e){var n;void 0===e&&(e={}),n=t.call(this)||this;var i=r.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var a in i)a in e||(e[a]=i[a]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(l.enableLogs)(e.debug),n.config=e,n._autoLevelCapping=-1;var o=n.abrController=new e.abrController(ze(ze(n))),s=new e.bufferController(ze(ze(n))),u=n.capLevelController=new e.capLevelController(ze(ze(n))),c=new e.fpsController(ze(ze(n))),f=new P(ze(ze(n))),h=new F(ze(ze(n))),d=new N(ze(ze(n))),p=new St(ze(ze(n))),v=n.levelController=new wt(ze(ze(n))),g=new z(ze(ze(n))),m=[v,n.streamController=new yt(ze(ze(n)),g)],y=e.audioStreamController;y&&m.push(new y(ze(ze(n)),g)),n.networkControllers=m;var b=[f,h,d,o,s,u,c,p,g];if(y=e.audioTrackController){var _=new y(ze(ze(n)));n.audioTrackController=_,b.push(_)}if(y=e.subtitleTrackController){var w=new y(ze(ze(n)));n.subtitleTrackController=w,m.push(w)}if(y=e.emeController){var x=new y(ze(ze(n)));n.emeController=x,b.push(x)}return(y=e.subtitleStreamController)&&m.push(new y(ze(ze(n)),g)),(y=e.timelineController)&&b.push(new y(ze(ze(n)))),n.coreComponents=b,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.isSupported=function(){return function(){var t=V(),e=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"===typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!e||e.prototype&&"function"===typeof e.prototype.appendBuffer&&"function"===typeof e.prototype.remove;return!!n&&!!r}()},Ue(r,null,[{key:"version",get:function(){return"0.12.3-canary.4258"}},{key:"Events",get:function(){return c.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return r.defaultConfig?r.defaultConfig:Ie},set:function(t){r.defaultConfig=t}}]);var i=r.prototype;return i.destroy=function(){l.logger.log("destroy"),this.trigger(c.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(t){t.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(t){l.logger.log("attachMedia"),this.media=t,this.trigger(c.default.MEDIA_ATTACHING,{media:t})},i.detachMedia=function(){l.logger.log("detachMedia"),this.trigger(c.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(t){t=o.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),l.logger.log("loadSource:"+t),this.url=t,this.trigger(c.default.MANIFEST_LOADING,{url:t})},i.startLoad=function(t){void 0===t&&(t=-1),l.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},i.stopLoad=function(){l.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},i.swapAudioCodec=function(){l.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){l.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Ue(r,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){l.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){l.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){l.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){l.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){l.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){l.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,n=t?t.length:0,r=0;r<n;r++)if((t[r].realBitrate?Math.max(t[r].realBitrate,t[r].bitrate):t[r].bitrate)>e)return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),r}(X)},"./src/polyfills/number-isFinite.js":function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",(function(){return r}));var r=Number.isFinite||function(t){return"number"===typeof t&&isFinite(t)}},"./src/utils/get-self-scope.js":function(t,e,n){"use strict";function r(){return"undefined"===typeof window?self:window}n.r(e),n.d(e,"getSelfScope",(function(){return r}))},"./src/utils/logger.js":function(t,e,n){"use strict";n.r(e),n.d(e,"enableLogs",(function(){return l})),n.d(e,"logger",(function(){return f}));var r=n("./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a;function s(t,e){return e="["+t+"] > "+e}var u=Object(r.getSelfScope)();function c(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){o[e]=t[e]?t[e].bind(t):function(t){var e=u.console[t];return e?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=s(t,r[0])),e.apply(u.console,r)}:i}(e)}))}var l=function(t){if(u.console&&!0===t||"object"===typeof t){c(t,"debug","log","info","warn","error");try{o.log()}catch(e){o=a}}else o=a},f=o}}).default},t.exports=r())},function(t,e,n){var r,i,a;i=[n(1),n(15)],void 0===(a="function"===typeof(r=function(e,n){"use strict";var r,i,a;function o(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return!e||"object"!==s(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e=function(t){if(t&&t.__esModule)return t;var e=o();if(e&&e.has(t))return e.get(t);var n={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=r?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}}return n.default=t,e&&e.set(t,n),n}(e),n=(a=n)&&a.__esModule?a:{default:a};var v={x:"clientWidth",y:"clientHeight"},g={x:"clientTop",y:"clientLeft"},m={x:"innerWidth",y:"innerHeight"},y={x:"offsetWidth",y:"offsetHeight"},b={x:"offsetLeft",y:"offsetTop"},_={x:"overflowX",y:"overflowY"},w={x:"scrollWidth",y:"scrollHeight"},x={x:"scrollLeft",y:"scrollTop"},k={x:"width",y:"height"},E=function(){},S=!!function(){if("undefined"===typeof window)return!1;var t=!1;try{document.createElement("div").addEventListener("test",E,{get passive(){return t=!0,!1}})}catch(e){}return t}()&&{passive:!0},O=function(t,e){var n=t.length,r=t.minSize,i=t.type,a=e.from,o=e.size,s=e.itemsPerRow,u=(o=Math.max(o,r))%s;return u&&(o+=s-u),o>n&&(o=n),(u=(a="simple"!==i&&a?Math.max(Math.min(a,n-o),0):0)%s)&&(a-=u,o+=u),a===e.from&&o==e.size?e:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{from:a,size:o})};t.exports=(i=r=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=u(this,c(n).call(this,t))).state=O(t,{itemsPerRow:1,from:t.initialIndex,size:0}),e.cache={},e.cachedScrollPosition=null,e.prevPrevState={},e.unstable=!1,e.updateCounter=0,e}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,t),f(n,null,[{key:"getDerivedStateFromProps",value:function(t,e){var n=O(t,e);return n===e?null:n}}]),f(n,[{key:"componentDidMount",value:function(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function(t){var e=this;if(this.props.axis!==t.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>50)return this.unstable=!0,console.error("ReactList failed to reach a stable state.");this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout((function(){e.updateCounter=0,delete e.updateCounterTimeoutId}),0)),this.updateFrame()}}},{key:"maybeSetState",value:function(t,e){if(function(t,e){for(var n in e)if(t[n]!==e[n])return!1;return!0}(this.state,t))return e();this.setState(t,e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,S),this.scrollParent.removeEventListener("mousewheel",E,S)}},{key:"getOffset",value:function(t){var e=this.props.axis,n=t[g[e]]||0,r=b[e];do{n+=t[r]||0}while(t=t.offsetParent);return n}},{key:"getEl",value:function(){return this.el||this.items}},{key:"getScrollPosition",value:function(){if("number"===typeof this.cachedScrollPosition)return this.cachedScrollPosition;var t=this.scrollParent,e=this.props.axis,n=x[e],r=t===window?document.body[n]||document.documentElement[n]:t[n],i=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),a=Math.max(0,Math.min(r,i)),o=this.getEl();return this.cachedScrollPosition=this.getOffset(t)+a-this.getOffset(o),this.cachedScrollPosition}},{key:"setScroll",value:function(t){var e=this.scrollParent,n=this.props.axis;if(t+=this.getOffset(this.getEl()),e===window)return window.scrollTo(0,t);t-=this.getOffset(this.scrollParent),e[x[n]]=t}},{key:"getScrollSize",value:function(){var t=this.scrollParent,e=document,n=e.body,r=e.documentElement,i=w[this.props.axis];return t===window?Math.max(n[i],r[i]):t[i]}},{key:"hasDeterminateSize",value:function(){var t=this.props,e=t.itemSizeGetter;return"uniform"===t.type||e}},{key:"getStartAndEnd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,e=this.getScrollPosition(),n=Math.max(0,e-t),r=e+this.props.scrollParentViewportSizeGetter(this)+t;return this.hasDeterminateSize()&&(r=Math.min(r,this.getSpaceBefore(this.props.length))),{start:n,end:r}}},{key:"getItemSizeAndItemsPerRow",value:function(){var t=this.props,e=t.axis,n=t.useStaticSize,r=this.state,i=r.itemSize,a=r.itemsPerRow;if(n&&i&&a)return{itemSize:i,itemsPerRow:a};var o=this.items.children;if(!o.length)return{};var s=o[0],u=s[y[e]],c=Math.abs(u-i);if((isNaN(c)||c>=1)&&(i=u),!i)return{};for(var l=b[e],f=s[l],h=o[a=1];h&&h[l]===f;h=o[a])++a;return{itemSize:i,itemsPerRow:a}}},{key:"clearSizeCache",value:function(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function(t){return this.clearSizeCache(),this.updateFrame(t)}},{key:"updateFrame",value:function(t){switch(this.updateScrollParent(),"function"!=typeof t&&(t=E),this.props.type){case"simple":return this.updateSimpleFrame(t);case"variable":return this.updateVariableFrame(t);case"uniform":return this.updateUniformFrame(t)}}},{key:"updateScrollParent",value:function(){var t=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),t!==this.scrollParent&&(t&&(t.removeEventListener("scroll",this.updateFrameAndClearCache),t.removeEventListener("mousewheel",E)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,S),this.scrollParent.addEventListener("mousewheel",E,S))}},{key:"updateSimpleFrame",value:function(t){var e=this.getStartAndEnd().end,n=this.items.children,r=0;if(n.length){var i=this.props.axis,a=n[0],o=n[n.length-1];r=this.getOffset(o)+o[y[i]]-this.getOffset(a)}if(r>e)return t();var s=this.props,u=s.pageSize,c=s.length,l=Math.min(this.state.size+u,c);this.maybeSetState({size:l},t)}},{key:"updateVariableFrame",value:function(t){this.props.itemSizeGetter||this.cacheSizes();for(var e=this.getStartAndEnd(),n=e.start,r=e.end,i=this.props,a=i.length,o=i.pageSize,s=0,u=0,c=0,l=a-1;u<l;){var f=this.getSizeOfItem(u);if(null==f||s+f>n)break;s+=f,++u}for(var h=a-u;c<h&&s<r;){var d=this.getSizeOfItem(u+c);if(null==d){c=Math.min(c+o,h);break}s+=d,++c}this.maybeSetState({from:u,size:c},t)}},{key:"updateUniformFrame",value:function(t){var e=this.getItemSizeAndItemsPerRow(),n=e.itemSize,r=e.itemsPerRow;if(!n||!r)return t();var i=this.getStartAndEnd(),a=i.start,o=i.end,s=O(this.props,{from:Math.floor(a/n)*r,size:(Math.ceil((o-a)/n)+1)*r,itemsPerRow:r}),u=s.from,c=s.size;return this.maybeSetState({itemsPerRow:r,from:u,itemSize:n,size:c},t)}},{key:"getSpaceBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e[t])return e[t];var n=this.state,r=n.itemSize,i=n.itemsPerRow;if(r)return e[t]=Math.floor(t/i)*r;for(var a=t;a>0&&null==e[--a];);for(var o=e[a]||0,s=a;s<t;++s){e[s]=o;var u=this.getSizeOfItem(s);if(null==u)break;o+=u}return e[t]=o}},{key:"cacheSizes",value:function(){for(var t=this.cache,e=this.state.from,n=this.items.children,r=y[this.props.axis],i=0,a=n.length;i<a;++i)t[e+i]=n[i][r]}},{key:"getSizeOfItem",value:function(t){var e=this.cache,n=this.items,r=this.props,i=r.axis,a=r.itemSizeGetter,o=r.itemSizeEstimator,s=r.type,u=this.state,c=u.from,l=u.itemSize,f=u.size;if(l)return l;if(a)return a(t);if(t in e)return e[t];if("simple"===s&&t>=c&&t<c+f&&n){var h=n.children[t-c];if(h)return h[y[i]]}return o?o(t,e):void 0}},{key:"scrollTo",value:function(t){null!=t&&this.setScroll(this.getSpaceBefore(t))}},{key:"scrollAround",value:function(t){var e=this.getScrollPosition(),n=this.getSpaceBefore(t),r=n-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(t),i=Math.min(r,n),a=Math.max(r,n);return e<=i?this.setScroll(i):e>a?this.setScroll(a):void 0}},{key:"getVisibleRange",value:function(){for(var t,e,n=this.state,r=n.from,i=n.size,a=this.getStartAndEnd(0),o=a.start,s=a.end,u={},c=r;c<r+i;++c){var l=this.getSpaceBefore(c,u),f=l+this.getSizeOfItem(c);null==t&&f>o&&(t=c),null!=t&&l<s&&(e=c)}return[t,e]}},{key:"renderItems",value:function(){for(var t=this,e=this.props,n=e.itemRenderer,r=e.itemsRenderer,i=this.state,a=i.from,o=i.size,s=[],u=0;u<o;++u)s.push(n(a+u,u));return r(s,(function(e){return t.items=e}))}},{key:"render",value:function(){var t=this,n=this.props,r=n.axis,i=n.length,a=n.type,o=n.useTranslate3d,s=this.state,u=s.from,c=s.itemsPerRow,l=this.renderItems();if("simple"===a)return l;var f={position:"relative"},h={},d=Math.ceil(i/c)*c,p=this.getSpaceBefore(d,h);p&&(f[k[r]]=p,"x"===r&&(f.overflowX="hidden"));var v=this.getSpaceBefore(u,h),g="x"===r?v:0,m="y"===r?v:0,y=o?"translate3d(".concat(g,"px, ").concat(m,"px, 0)"):"translate(".concat(g,"px, ").concat(m,"px)"),b={msTransform:y,WebkitTransform:y,transform:y};return e.default.createElement("div",{style:f,ref:function(e){return t.el=e}},e.default.createElement("div",{style:b},l))}}]),n}(e.Component),p(r,"displayName","ReactList"),p(r,"propTypes",{axis:n.default.oneOf(["x","y"]),initialIndex:n.default.number,itemRenderer:n.default.func,itemSizeEstimator:n.default.func,itemSizeGetter:n.default.func,itemsRenderer:n.default.func,length:n.default.number,minSize:n.default.number,pageSize:n.default.number,scrollParentGetter:n.default.func,scrollParentViewportSizeGetter:n.default.func,threshold:n.default.number,type:n.default.oneOf(["simple","variable","uniform"]),useStaticSize:n.default.bool,useTranslate3d:n.default.bool}),p(r,"defaultProps",{axis:"y",itemRenderer:function(t,n){return e.default.createElement("div",{key:n},t)},itemsRenderer:function(t,n){return e.default.createElement("div",{ref:n},t)},length:0,minSize:1,pageSize:10,scrollParentGetter:function(t){for(var e=t.props.axis,n=t.getEl(),r=_[e];n=n.parentElement;)switch(window.getComputedStyle(n)[r]){case"auto":case"scroll":case"overlay":return n}return window},scrollParentViewportSizeGetter:function(t){var e=t.props.axis,n=t.scrollParent;return n===window?window[m[e]]:n[v[e]]},threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1}),i)})?r.apply(e,i):r)||(t.exports=a)},function(t,e,n){var r,i=i||function(t){"use strict";if(!("undefined"===typeof t||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,a=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},u=function(t){setTimeout((function(){"string"===typeof t?n().revokeObjectURL(t):t.remove()}),4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,f){f||(e=c(e));var h,d=this,p="application/octet-stream"===e.type,v=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"===typeof i)try{i.call(t,n||t)}catch(a){s(a)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,i)return h=n().createObjectURL(e),void setTimeout((function(){r.href=h,r.download=l,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(r),v(),u(h),d.readyState=d.DONE}));!function(){if((o||p&&a)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=o?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,d.readyState=d.DONE,v()},r.readAsDataURL(e),void(d.readyState=d.INIT)}(h||(h=n().createObjectURL(e)),p)?t.location.href=h:t.open(h,"_blank")||(t.location.href=h);d.readyState=d.DONE,v(),u(h)}()},f=l.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,n){return new l(t,e||t.name||"download",n)})}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);t.exports?t.exports.saveAs=i:null!==n(467)&&null!==n(468)&&(void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r))},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=p(n(469)),a=p(n(488)),o=p(n(489)),s=p(n(490)),u=p(n(491)),c=p(n(492)),l=p(n(494)),f=p(n(495)),h=p(n(496)),d=p(n(497));function p(t){return t&&t.__esModule?t:{default:t}}var v=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.github.com";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__apiBase=n,this.__auth=e||{}}return r(t,[{key:"getGist",value:function(t){return new i.default(t,this.__auth,this.__apiBase)}},{key:"getUser",value:function(t){return new a.default(t,this.__auth,this.__apiBase)}},{key:"getOrganization",value:function(t){return new l.default(t,this.__auth,this.__apiBase)}},{key:"getTeam",value:function(t){return new f.default(t,this.__auth,this.__apiBase)}},{key:"getRepo",value:function(t,e){return new c.default(this._getFullName(t,e),this.__auth,this.__apiBase)}},{key:"getIssues",value:function(t,e){return new o.default(this._getFullName(t,e),this.__auth,this.__apiBase)}},{key:"search",value:function(t){return new s.default(t,this.__auth,this.__apiBase)}},{key:"getRateLimit",value:function(){return new u.default(this.__auth,this.__apiBase)}},{key:"getMarkdown",value:function(){return new h.default(this.__auth,this.__apiBase)}},{key:"getProject",value:function(t){return new d.default(t,this.__auth,this.__apiBase)}},{key:"_getFullName",value:function(t,e){var n=t;return e&&(n=t+"/"+e),n}}]),t}();t.exports=v},function(t,e,n){var r=n(498),i=n(123),a=n(201),o=n(72)("socket.io-client");t.exports=e=u;var s=e.managers={};function u(t,e){"object"===typeof t&&(e=t,t=void 0),e=e||{};var n,i=r(t),u=i.source,c=i.id,l=i.path,f=s[c]&&l in s[c].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||f?(o("ignoring socket cache for %s",u),n=a(u,e)):(s[c]||(o("new io instance for %s",u),s[c]=a(u,e)),n=s[c]),i.query&&!e.query&&(e.query=i.query),n.socket(i.path,e)}e.protocol=i.protocol,e.connect=u,e.Manager=n(201),e.Socket=n(207)},,,function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(t,e,n){var r=l;return function(i,a){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",p={};function v(){}function g(){}function m(){}var y={};y[a]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(T([])));_&&_!==n&&r.call(_,a)&&(y=_);var w=m.prototype=v.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t){var e;this._invoke=function(n,i){function a(){return new Promise((function(e,a){!function e(n,i,a,o){var s=c(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return e("throw",t,a,o)}))}o(s.arg)}(n,i,e,a)}))}return e=e?e.then(a,a):a()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:C}}function C(){return{value:e,done:!0}}return g.prototype=w.constructor=m,m.constructor=g,m[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i){var a=new k(u(e,n,r,i));return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){(function(e){var r=n(235),i=n(132),a=n(236),o=n(237),s=n(90),u=s.isErrorEvent,c=s.isDOMError,l=s.isDOMException,f=s.isError,h=s.isObject,d=s.isPlainObject,p=s.isUndefined,v=s.isFunction,g=s.isString,m=s.isArray,y=s.isEmptyObject,b=s.each,_=s.objectMerge,w=s.truncate,x=s.objectFrozen,k=s.hasKey,E=s.joinRegExp,S=s.urlencode,O=s.uuid4,A=s.htmlTreeAsString,T=s.isSameException,C=s.isSameStacktrace,j=s.parseUrl,D=s.fill,R=s.supportsFetch,M=s.supportsReferrerPolicy,P=s.serializeKeysForMessage,F=s.serializeException,N=s.sanitize,L=n(238).wrapMethod,I="source protocol user pass host port path".split(" "),B=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function U(){return+new Date}var z="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},q=z.document,W=z.navigator;function H(t,e){return v(e)?function(n){return e(n,t)}:e}function G(){for(var t in this._hasJSON=!("object"!==typeof JSON||!JSON.stringify),this._hasDocument=!p(q),this._hasNavigator=!p(W),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:z.SENTRY_RELEASE&&z.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:M()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=z.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=U(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=z.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[t]=this._originalConsole[t]}G.prototype={VERSION:"3.27.2",debug:!1,TraceKit:r,config:function(t,e){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!t)return n;var i=n._globalOptions;e&&b(e,(function(t,e){"tags"===t||"extra"===t||"user"===t?n._globalContext[t]=e:i[t]=e})),n.setDSN(t),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=E(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&E(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&E(i.whitelistUrls),i.includePaths=E(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var a={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},o=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=_(a,o):!1!==o&&(o=a),i.autoBreadcrumbs=o;var s={tryCatch:!0},u=i.instrument;return"[object Object]"==={}.toString.call(u)?u=_(s,u):!1!==u&&(u=s),i.instrument=u,r.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var t=this;return t.isSetup()&&!t._isRavenInstalled&&(r.report.subscribe((function(){t._handleOnErrorStackInfo.apply(t,arguments)})),t._globalOptions.captureUnhandledRejections&&t._attachPromiseRejectionHandler(),t._patchFunctionToString(),t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch&&t._instrumentTryCatch(),t._globalOptions.autoBreadcrumbs&&t._instrumentBreadcrumbs(),t._drainPlugins(),t._isRavenInstalled=!0),Error.stackTraceLimit=t._globalOptions.stackTraceLimit,this},setDSN:function(t){var e=this._parseDSN(t),n=e.path.lastIndexOf("/"),r=e.path.substr(1,n);this._dsn=t,this._globalKey=e.user,this._globalSecret=e.pass&&e.pass.substr(1),this._globalProject=e.path.substr(n+1),this._globalServer=this._getGlobalServer(e),this._globalEndpoint=this._globalServer+"/"+r+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function(t,e,n){return v(t)&&(n=e||[],e=t,t={}),this.wrap(t,e).apply(this,n)},wrap:function(t,e,n){var r=this;if(p(e)&&!v(t))return t;if(v(t)&&(e=t,t=void 0),!v(e))return e;try{if(e.__raven__)return e;if(e.__raven_wrapper__)return e.__raven_wrapper__}catch(o){return e}function i(){var i=[],a=arguments.length,s=!t||t&&!1!==t.deep;for(n&&v(n)&&n.apply(this,arguments);a--;)i[a]=s?r.wrap(t,arguments[a]):arguments[a];try{return e.apply(this,i)}catch(o){throw r._ignoreNextOnError(),r.captureException(o,t),o}}for(var a in e)k(e,a)&&(i[a]=e[a]);return i.prototype=e.prototype,e.__raven_wrapper__=i,i.__raven__=!0,i.__orig__=e,i},uninstall:function(){return r.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(t){this._logDebug("debug","Raven caught unhandled promise rejection:",t),this.captureException(t.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),z.addEventListener&&z.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return z.removeEventListener&&z.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(t,e){if(e=_({trimHeadFrames:0},e||{}),u(t)&&t.error)t=t.error;else{if(c(t)||l(t)){var n=t.name||(c(t)?"DOMError":"DOMException"),i=t.message?n+": "+t.message:n;return this.captureMessage(i,_(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}))}if(f(t))t=t;else{if(!d(t))return this.captureMessage(t,_(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}));e=this._getCaptureExceptionOptionsFromPlainObject(e,t),t=new Error(e.message)}}this._lastCapturedException=t;try{var a=r.computeStackTrace(t);this._handleStackInfo(a,e)}catch(o){if(t!==o)throw o}return this},_getCaptureExceptionOptionsFromPlainObject:function(t,e){var n=Object.keys(e).sort(),r=_(t,{message:"Non-Error exception captured with keys: "+P(n),fingerprint:[a(n)],extra:t.extra||{}});return r.extra.__serialized__=F(e),r},captureMessage:function(t,e){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)){var n,i=_({message:t+=""},e=e||{});try{throw new Error(t)}catch(c){n=c}n.name=null;var a=r.computeStackTrace(n),o=m(a.stack)&&a.stack[1];o&&"Raven.captureException"===o.func&&(o=a.stack[2]);var s=o&&o.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||e.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?t:i.fingerprint,(e=_({trimHeadFrames:0},e)).trimHeadFrames+=1;var u=this._prepareFrames(a,e);i.stacktrace={frames:u.reverse()}}return i.fingerprint&&(i.fingerprint=m(i.fingerprint)?i.fingerprint:[i.fingerprint]),this._send(i),this}}},captureBreadcrumb:function(t){var e=_({timestamp:U()/1e3},t);if(v(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(e);if(h(n)&&!y(n))e=n;else if(!1===n)return this}return this._breadcrumbs.push(e),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(t){var e=[].slice.call(arguments,1);return this._plugins.push([t,e]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(t){return this._globalContext.user=t,this},setExtraContext:function(t){return this._mergeContext("extra",t),this},setTagsContext:function(t){return this._mergeContext("tags",t),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(i(this._globalContext))},setEnvironment:function(t){return this._globalOptions.environment=t,this},setRelease:function(t){return this._globalOptions.release=t,this},setDataCallback:function(t){var e=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=H(e,t),this},setBreadcrumbCallback:function(t){var e=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=H(e,t),this},setShouldSendCallback:function(t){var e=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=H(e,t),this},setTransport:function(t){return this._globalOptions.transport=t,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var t=z.RavenConfig;t&&this.config(t.dsn,t.config).install()},showReportDialog:function(t){if(q){if(!(t=_({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},t)).eventId)throw new o("Missing eventId");if(!t.dsn)throw new o("Missing DSN");var e=encodeURIComponent,n=[];for(var r in t)if("user"===r){var i=t.user;i.name&&n.push("name="+e(i.name)),i.email&&n.push("email="+e(i.email))}else n.push(e(r)+"="+e(t[r]));var a=this._getGlobalServer(this._parseDSN(t.dsn)),s=q.createElement("script");s.async=!0,s.src=a+"/api/embed/error-page/?"+n.join("&"),(q.head||q.body).appendChild(s)}},_ignoreNextOnError:function(){var t=this;this._ignoreOnError+=1,setTimeout((function(){t._ignoreOnError-=1}))},_triggerEvent:function(t,e){var n,r;if(this._hasDocument){for(r in e=e||{},t="raven"+t.substr(0,1).toUpperCase()+t.substr(1),q.createEvent?(n=q.createEvent("HTMLEvents")).initEvent(t,!0,!0):(n=q.createEventObject()).eventType=t,e)k(e,r)&&(n[r]=e[r]);if(q.createEvent)q.dispatchEvent(n);else try{q.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(i){}}},_breadcrumbEventHandler:function(t){var e=this;return function(n){if(e._keypressTimeout=null,e._lastCapturedEvent!==n){var r;e._lastCapturedEvent=n;try{r=A(n.target)}catch(i){r="<unknown>"}e.captureBreadcrumb({category:"ui."+t,message:r})}}},_keypressEventHandler:function(){var t=this;return function(e){var n;try{n=e.target}catch(a){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var i=t._keypressTimeout;i||t._breadcrumbEventHandler("input")(e),clearTimeout(i),t._keypressTimeout=setTimeout((function(){t._keypressTimeout=null}),1e3)}}},_captureUrlChange:function(t,e){var n=j(this._location.href),r=j(e),i=j(t);this._lastHref=e,n.protocol===r.protocol&&n.host===r.host&&(e=r.relative),n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:e,from:t}})},_patchFunctionToString:function(){var t=this;t._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"===typeof this&&this.__raven__?t._originalFunctionToString.apply(this.__orig__,arguments):t._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var t=this,e=t._wrappedBuiltIns;function n(e){return function(n,r){for(var i=new Array(arguments.length),a=0;a<i.length;++a)i[a]=arguments[a];var o=i[0];return v(o)&&(i[0]=t.wrap({mechanism:{type:"instrument",data:{function:e.name||"<anonymous>"}}},o)),e.apply?e.apply(this,i):e(i[0],i[1])}}var r=this._globalOptions.autoBreadcrumbs;function i(n){var i=z[n]&&z[n].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(D(i,"addEventListener",(function(e){return function(i,a,o,s){try{a&&a.handleEvent&&(a.handleEvent=t.wrap({mechanism:{type:"instrument",data:{target:n,function:"handleEvent",handler:a&&a.name||"<anonymous>"}}},a.handleEvent))}catch(f){}var u,c,l;return r&&r.dom&&("EventTarget"===n||"Node"===n)&&(c=t._breadcrumbEventHandler("click"),l=t._keypressEventHandler(),u=function(t){if(t){var e;try{e=t.type}catch(n){return}return"click"===e?c(t):"keypress"===e?l(t):void 0}}),e.call(this,i,t.wrap({mechanism:{type:"instrument",data:{target:n,function:"addEventListener",handler:a&&a.name||"<anonymous>"}}},a,u),o,s)}}),e),D(i,"removeEventListener",(function(t){return function(e,n,r,i){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(a){}return t.call(this,e,n,r,i)}}),e))}D(z,"setTimeout",n,e),D(z,"setInterval",n,e),z.requestAnimationFrame&&D(z,"requestAnimationFrame",(function(e){return function(n){return e(t.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:e&&e.name||"<anonymous>"}}},n))}}),e);for(var a=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],o=0;o<a.length;o++)i(a[o])},_instrumentBreadcrumbs:function(){var t=this,e=this._globalOptions.autoBreadcrumbs,n=t._wrappedBuiltIns;function r(e,n){e in n&&v(n[e])&&D(n,e,(function(n){return t.wrap({mechanism:{type:"instrument",data:{function:e,handler:n&&n.name||"<anonymous>"}}},n)}))}if(e.xhr&&"XMLHttpRequest"in z){var i=z.XMLHttpRequest&&z.XMLHttpRequest.prototype;D(i,"open",(function(e){return function(n,r){return g(r)&&-1===r.indexOf(t._globalKey)&&(this.__raven_xhr={method:n,url:r,status_code:null}),e.apply(this,arguments)}}),n),D(i,"send",(function(e){return function(){var n=this;function i(){if(n.__raven_xhr&&4===n.readyState){try{n.__raven_xhr.status_code=n.status}catch(e){}t.captureBreadcrumb({type:"http",category:"xhr",data:n.__raven_xhr})}}for(var a=["onload","onerror","onprogress"],o=0;o<a.length;o++)r(a[o],n);return"onreadystatechange"in n&&v(n.onreadystatechange)?D(n,"onreadystatechange",(function(e){return t.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:e&&e.name||"<anonymous>"}}},e,i)})):n.onreadystatechange=i,e.apply(this,arguments)}}),n)}e.xhr&&R()&&D(z,"fetch",(function(e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var i,a=n[0],o="GET";if("string"===typeof a?i=a:"Request"in z&&a instanceof z.Request?(i=a.url,a.method&&(o=a.method)):i=""+a,-1!==i.indexOf(t._globalKey))return e.apply(this,n);n[1]&&n[1].method&&(o=n[1].method);var s={method:o,url:i,status_code:null};return e.apply(this,n).then((function(e){return s.status_code=e.status,t.captureBreadcrumb({type:"http",category:"fetch",data:s}),e})).catch((function(e){throw t.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),e}))}}),n),e.dom&&this._hasDocument&&(q.addEventListener?(q.addEventListener("click",t._breadcrumbEventHandler("click"),!1),q.addEventListener("keypress",t._keypressEventHandler(),!1)):q.attachEvent&&(q.attachEvent("onclick",t._breadcrumbEventHandler("click")),q.attachEvent("onkeypress",t._keypressEventHandler())));var a=z.chrome,o=!(a&&a.app&&a.app.runtime)&&z.history&&z.history.pushState&&z.history.replaceState;if(e.location&&o){var s=z.onpopstate;z.onpopstate=function(){var e=t._location.href;if(t._captureUrlChange(t._lastHref,e),s)return s.apply(this,arguments)};var u=function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t._captureUrlChange(t._lastHref,n+""),e.apply(this,arguments)}};D(z.history,"pushState",u,n),D(z.history,"replaceState",u,n)}if(e.console&&"console"in z&&console.log){var c=function(e,n){t.captureBreadcrumb({message:e,level:n.level,category:"console"})};b(["debug","info","warn","error","log"],(function(t,e){L(console,e,c)}))}},_restoreBuiltIns:function(){for(var t;this._wrappedBuiltIns.length;){var e=(t=this._wrappedBuiltIns.shift())[0],n=t[1],r=t[2];e[n]=r}},_restoreConsole:function(){for(var t in this._originalConsoleMethods)this._originalConsole[t]=this._originalConsoleMethods[t]},_drainPlugins:function(){var t=this;b(this._plugins,(function(e,n){var r=n[0],i=n[1];r.apply(t,[t].concat(i))}))},_parseDSN:function(t){var e=B.exec(t),n={},r=7;try{for(;r--;)n[I[r]]=e[r]||""}catch(i){throw new o("Invalid DSN: "+t)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new o("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(t){var e="//"+t.host+(t.port?":"+t.port:"");return t.protocol&&(e=t.protocol+":"+e),e},_handleOnErrorStackInfo:function(t,e){(e=e||{}).mechanism=e.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(t,e)},_handleStackInfo:function(t,e){var n=this._prepareFrames(t,e);this._triggerEvent("handle",{stackInfo:t,options:e}),this._processException(t.name,t.message,t.url,t.lineno,n,e)},_prepareFrames:function(t,e){var n=this,r=[];if(t.stack&&t.stack.length&&(b(t.stack,(function(e,i){var a=n._normalizeFrame(i,t.url);a&&r.push(a)})),e&&e.trimHeadFrames))for(var i=0;i<e.trimHeadFrames&&i<r.length;i++)r[i].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(t,e){var n={filename:t.url,lineno:t.line,colno:t.column,function:t.func||"?"};return t.url||(n.filename=e),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(t,e,n,r,i,a){var o,s=(t?t+": ":"")+(e||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)&&!this._globalOptions.ignoreErrors.test(s))&&(i&&i.length?(n=i[0].filename||n,i.reverse(),o={frames:i}):n&&(o={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var u=_({exception:{values:[{type:t,value:e,stacktrace:o}]},transaction:n},a),c=u.exception.values[0];null==c.type&&""===c.value&&(c.value="Unrecoverable error caught"),!u.exception.mechanism&&u.mechanism&&(u.exception.mechanism=u.mechanism,delete u.mechanism),u.exception.mechanism=_({type:"generic",handled:!0},u.exception.mechanism||{}),this._send(u)}},_trimPacket:function(t){var e=this._globalOptions.maxMessageLength;if(t.message&&(t.message=w(t.message,e)),t.exception){var n=t.exception.values[0];n.value=w(n.value,e)}var r=t.request;return r&&(r.url&&(r.url=w(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=w(r.Referer,this._globalOptions.maxUrlLength))),t.breadcrumbs&&t.breadcrumbs.values&&this._trimBreadcrumbs(t.breadcrumbs),t},_trimBreadcrumbs:function(t){for(var e,n,r,i=["to","from","url"],a=0;a<t.values.length;++a)if((n=t.values[a]).hasOwnProperty("data")&&h(n.data)&&!x(n.data)){r=_({},n.data);for(var o=0;o<i.length;++o)e=i[o],r.hasOwnProperty(e)&&r[e]&&(r[e]=w(r[e],this._globalOptions.maxUrlLength));t.values[a].data=r}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var t={};return this._hasNavigator&&W.userAgent&&(t.headers={"User-Agent":W.userAgent}),z.location&&z.location.href&&(t.url=z.location.href),this._hasDocument&&q.referrer&&(t.headers||(t.headers={}),t.headers.Referer=q.referrer),t}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&U()-this._backoffStart<this._backoffDuration},_isRepeatData:function(t){var e=this._lastData;return!(!e||t.message!==e.message||t.transaction!==e.transaction)&&(t.stacktrace||e.stacktrace?C(t.stacktrace,e.stacktrace):t.exception||e.exception?T(t.exception,e.exception):!t.fingerprint&&!e.fingerprint||Boolean(t.fingerprint&&e.fingerprint)&&JSON.stringify(t.fingerprint)===JSON.stringify(e.fingerprint))},_setBackoffState:function(t){if(!this._shouldBackoff()){var e=t.status;if(400===e||401===e||429===e){var n;try{n=R()?t.headers.get("Retry-After"):t.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(r){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=U()}}},_send:function(t){var e=this._globalOptions,n={project:this._globalProject,logger:e.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),t.trimHeadFrames&&delete t.trimHeadFrames,(t=_(n,t)).tags=_(_({},this._globalContext.tags),t.tags),t.extra=_(_({},this._globalContext.extra),t.extra),t.extra["session:duration"]=U()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(t.user=this._globalContext.user),e.environment&&(t.environment=e.environment),e.release&&(t.release=e.release),e.serverName&&(t.server_name=e.serverName),t=this._sanitizeData(t),Object.keys(t).forEach((function(e){(null==t[e]||""===t[e]||y(t[e]))&&delete t[e]})),v(e.dataCallback)&&(t=e.dataCallback(t)||t),t&&!y(t)&&(v(e.shouldSendCallback)&&!e.shouldSendCallback(t)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",t):"number"===typeof e.sampleRate?Math.random()<e.sampleRate&&this._sendProcessedPayload(t):this._sendProcessedPayload(t)))},_sanitizeData:function(t){return N(t,this._globalOptions.sanitizeKeys)},_getUuid:function(){return O()},_sendProcessedPayload:function(t,e){var n=this,r=this._globalOptions;if(this.isSetup())if(t=this._trimPacket(t),this._globalOptions.allowDuplicates||!this._isRepeatData(t)){this._lastEventId=t.event_id||(t.event_id=this._getUuid()),this._lastData=t,this._logDebug("debug","Raven about to send:",t);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var a=t.exception&&t.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:a?(a.type?a.type+": ":"")+a.value:t.message,event_id:t.event_id,level:t.level||"error"});var o=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:o,auth:i,data:t,options:r,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:t,src:o}),e&&e()},onError:function(r){n._logDebug("error","Raven transport failed to send: ",r),r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:t,src:o}),r=r||new Error("Raven send failed (no additional details provided)"),e&&e(r)}})}else this._logDebug("warn","Raven dropped repeat event: ",t)},_makeRequest:function(t){var e=t.url+"?"+S(t.auth),n=null,r={};if(t.options.headers&&(n=this._evaluateHash(t.options.headers)),t.options.fetchParameters&&(r=this._evaluateHash(t.options.fetchParameters)),R()){r.body=i(t.data);var a=_({},this._fetchDefaults),o=_(a,r);return n&&(o.headers=n),z.fetch(e,o).then((function(e){if(e.ok)t.onSuccess&&t.onSuccess();else{var n=new Error("Sentry error code: "+e.status);n.request=e,t.onError&&t.onError(n)}})).catch((function(){t.onError&&t.onError(new Error("Sentry error code: network unavailable"))}))}var s=z.XMLHttpRequest&&new z.XMLHttpRequest;s&&(("withCredentials"in s||"undefined"!==typeof XDomainRequest)&&("withCredentials"in s?s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)t.onSuccess&&t.onSuccess();else if(t.onError){var e=new Error("Sentry error code: "+s.status);e.request=s,t.onError(e)}}:(s=new XDomainRequest,e=e.replace(/^https?:/,""),t.onSuccess&&(s.onload=t.onSuccess),t.onError&&(s.onerror=function(){var e=new Error("Sentry error code: XDomainRequest");e.request=s,t.onError(e)})),s.open("POST",e),n&&b(n,(function(t,e){s.setRequestHeader(t,e)})),s.send(i(t.data))))},_evaluateHash:function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e[n]="function"===typeof r?r():r}return e},_logDebug:function(t){this._originalConsoleMethods[t]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[t],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(t,e){p(e)?delete this._globalContext[t]:this._globalContext[t]=_(this._globalContext[t]||{},e)}},G.prototype.setUser=G.prototype.setUserContext,G.prototype.setReleaseContext=G.prototype.setRelease,t.exports=G}).call(this,n(19))},function(t,e,n){(function(e){var r=n(90),i={collectWindowErrors:!0,debug:!1},a="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},o=[].slice,s="?",u=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function c(){return"undefined"===typeof document||null==document.location?"":document.location.href}i.report=function(){var t,e,n=[],l=null,f=null,h=null;function d(t,e){var r=null;if(!e||i.collectWindowErrors){for(var a in n)if(n.hasOwnProperty(a))try{n[a].apply(null,[t].concat(o.call(arguments,2)))}catch(s){r=s}if(r)throw r}}function p(e,n,a,o,l){var f=r.isErrorEvent(l)?l.error:l,p=r.isErrorEvent(e)?e.message:e;if(h)i.computeStackTrace.augmentStackTraceWithInitialElement(h,n,a,p),v();else if(f&&r.isError(f))d(i.computeStackTrace(f),!0);else{var g,m={url:n,line:a,column:o},y=void 0;if("[object String]"==={}.toString.call(p))(g=p.match(u))&&(y=g[1],p=g[2]);m.func=s,d({name:y,message:p,url:c(),stack:[m]},!0)}return!!t&&t.apply(this,arguments)}function v(){var t=h,e=l;l=null,h=null,f=null,d.apply(null,[t,!1].concat(e))}function g(t,e){var n=o.call(arguments,1);if(h){if(f===t)return;v()}var r=i.computeStackTrace(t);if(h=r,f=t,l=n,setTimeout((function(){f===t&&v()}),r.incomplete?2e3:0),!1!==e)throw t}return g.subscribe=function(r){!function(){if(e)return;t=a.onerror,a.onerror=p,e=!0}(),n.push(r)},g.unsubscribe=function(t){for(var e=n.length-1;e>=0;--e)n[e]===t&&n.splice(e,1)},g.uninstall=function(){!function(){if(!e)return;a.onerror=t,e=!1,t=void 0}(),n=[]},g}(),i.computeStackTrace=function(){function t(t){if("undefined"!==typeof t.stack&&t.stack){for(var e,n,r,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=t.stack.split("\n"),h=[],d=(/^(.*) is undefined$/.exec(t.message),0),p=f.length;d<p;++d){if(n=i.exec(f[d])){var v=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=l.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:v?null:n[2],func:n[1]||s,args:v?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=a.exec(f[d]))r={url:n[2],func:n[1]||s,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=o.exec(f[d])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=u.exec(n[3]))?(n[3]=e[1],n[4]=e[2],n[5]=null):0!==d||n[5]||"undefined"===typeof t.columnNumber||(h[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||s,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!r.func&&r.line&&(r.func=s),r.url&&"blob:"===r.url.substr(0,5)){var g=new XMLHttpRequest;if(g.open("GET",r.url,!1),g.send(null),200===g.status){var m=g.responseText||"",y=(m=m.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(y){var b=y[1];"~"===b.charAt(0)&&(b=("undefined"===typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+b.slice(1)),r.url=b.slice(0,-4)}}}h.push(r)}return h.length?{name:t.name,message:t.message,url:c(),stack:h}:null}}function e(t,e,n,r){var i={url:e,line:n};if(i.url&&i.line){if(t.incomplete=!1,i.func||(i.func=s),t.stack.length>0&&t.stack[0].url===i.url){if(t.stack[0].line===i.line)return!1;if(!t.stack[0].line&&t.stack[0].func===i.func)return t.stack[0].line=i.line,!1}return t.stack.unshift(i),t.partial=!0,!0}return t.incomplete=!0,!1}function n(t,a){for(var o,u,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,f=[],h={},d=!1,p=n.caller;p&&!d;p=p.caller)if(p!==r&&p!==i.report){if(u={url:null,func:s,line:null,column:null},p.name?u.func=p.name:(o=l.exec(p.toString()))&&(u.func=o[1]),"undefined"===typeof u.func)try{u.func=o.input.substring(0,o.input.indexOf("{"))}catch(g){}h[""+p]?d=!0:h[""+p]=!0,f.push(u)}a&&f.splice(0,a);var v={name:t.name,message:t.message,url:c(),stack:f};return e(v,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),v}function r(e,r){var a=null;r=null==r?0:+r;try{if(a=t(e))return a}catch(o){if(i.debug)throw o}try{if(a=n(e,r+1))return a}catch(o){if(i.debug)throw o}return{name:e.name,message:e.message,url:c()}}return r.augmentStackTraceWithInitialElement=e,r.computeStackTraceFromStackProp=t,r}(),t.exports=i}).call(this,n(19))},function(t,e){function n(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function r(t,e,r,i,a,o){return n((s=n(n(e,t),n(i,o)))<<(u=a)|s>>>32-u,r);var s,u}function i(t,e,n,i,a,o,s){return r(e&n|~e&i,t,e,a,o,s)}function a(t,e,n,i,a,o,s){return r(e&i|n&~i,t,e,a,o,s)}function o(t,e,n,i,a,o,s){return r(e^n^i,t,e,a,o,s)}function s(t,e,n,i,a,o,s){return r(n^(e|~i),t,e,a,o,s)}function u(t,e){var r,u,c,l,f;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var h=1732584193,d=-271733879,p=-1732584194,v=271733878;for(r=0;r<t.length;r+=16)u=h,c=d,l=p,f=v,h=i(h,d,p,v,t[r],7,-680876936),v=i(v,h,d,p,t[r+1],12,-389564586),p=i(p,v,h,d,t[r+2],17,606105819),d=i(d,p,v,h,t[r+3],22,-1044525330),h=i(h,d,p,v,t[r+4],7,-176418897),v=i(v,h,d,p,t[r+5],12,1200080426),p=i(p,v,h,d,t[r+6],17,-1473231341),d=i(d,p,v,h,t[r+7],22,-45705983),h=i(h,d,p,v,t[r+8],7,1770035416),v=i(v,h,d,p,t[r+9],12,-1958414417),p=i(p,v,h,d,t[r+10],17,-42063),d=i(d,p,v,h,t[r+11],22,-1990404162),h=i(h,d,p,v,t[r+12],7,1804603682),v=i(v,h,d,p,t[r+13],12,-40341101),p=i(p,v,h,d,t[r+14],17,-1502002290),h=a(h,d=i(d,p,v,h,t[r+15],22,1236535329),p,v,t[r+1],5,-165796510),v=a(v,h,d,p,t[r+6],9,-1069501632),p=a(p,v,h,d,t[r+11],14,643717713),d=a(d,p,v,h,t[r],20,-373897302),h=a(h,d,p,v,t[r+5],5,-701558691),v=a(v,h,d,p,t[r+10],9,38016083),p=a(p,v,h,d,t[r+15],14,-660478335),d=a(d,p,v,h,t[r+4],20,-405537848),h=a(h,d,p,v,t[r+9],5,568446438),v=a(v,h,d,p,t[r+14],9,-1019803690),p=a(p,v,h,d,t[r+3],14,-187363961),d=a(d,p,v,h,t[r+8],20,1163531501),h=a(h,d,p,v,t[r+13],5,-1444681467),v=a(v,h,d,p,t[r+2],9,-51403784),p=a(p,v,h,d,t[r+7],14,1735328473),h=o(h,d=a(d,p,v,h,t[r+12],20,-1926607734),p,v,t[r+5],4,-378558),v=o(v,h,d,p,t[r+8],11,-2022574463),p=o(p,v,h,d,t[r+11],16,1839030562),d=o(d,p,v,h,t[r+14],23,-35309556),h=o(h,d,p,v,t[r+1],4,-1530992060),v=o(v,h,d,p,t[r+4],11,1272893353),p=o(p,v,h,d,t[r+7],16,-155497632),d=o(d,p,v,h,t[r+10],23,-1094730640),h=o(h,d,p,v,t[r+13],4,681279174),v=o(v,h,d,p,t[r],11,-358537222),p=o(p,v,h,d,t[r+3],16,-722521979),d=o(d,p,v,h,t[r+6],23,76029189),h=o(h,d,p,v,t[r+9],4,-640364487),v=o(v,h,d,p,t[r+12],11,-421815835),p=o(p,v,h,d,t[r+15],16,530742520),h=s(h,d=o(d,p,v,h,t[r+2],23,-995338651),p,v,t[r],6,-198630844),v=s(v,h,d,p,t[r+7],10,1126891415),p=s(p,v,h,d,t[r+14],15,-1416354905),d=s(d,p,v,h,t[r+5],21,-57434055),h=s(h,d,p,v,t[r+12],6,1700485571),v=s(v,h,d,p,t[r+3],10,-1894986606),p=s(p,v,h,d,t[r+10],15,-1051523),d=s(d,p,v,h,t[r+1],21,-2054922799),h=s(h,d,p,v,t[r+8],6,1873313359),v=s(v,h,d,p,t[r+15],10,-30611744),p=s(p,v,h,d,t[r+6],15,-1560198380),d=s(d,p,v,h,t[r+13],21,1309151649),h=s(h,d,p,v,t[r+4],6,-145523070),v=s(v,h,d,p,t[r+11],10,-1120210379),p=s(p,v,h,d,t[r+2],15,718787259),d=s(d,p,v,h,t[r+9],21,-343485551),h=n(h,u),d=n(d,c),p=n(p,l),v=n(v,f);return[h,d,p,v]}function c(t){var e,n="",r=32*t.length;for(e=0;e<r;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function l(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var r=8*t.length;for(e=0;e<r;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function f(t){var e,n,r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return r}function h(t){return unescape(encodeURIComponent(t))}function d(t){return function(t){return c(u(l(t),8*t.length))}(h(t))}function p(t,e){return function(t,e){var n,r,i=l(t),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=u(i,8*t.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=u(a.concat(l(e)),512+8*e.length),c(u(o.concat(r),640))}(h(t),h(e))}t.exports=function(t,e,n){return e?n?p(e,t):f(p(e,t)):n?d(t):f(d(t))}},function(t,e){function n(t){this.name="RavenConfigError",this.message=t}n.prototype=new Error,n.prototype.constructor=n,t.exports=n},function(t,e,n){var r=n(90);t.exports={wrapMethod:function(t,e,n){var i=t[e],a=t;if(e in t){var o="warn"===e?"warning":e;t[e]=function(){var t=[].slice.call(arguments),s=r.safeJoin(t," "),u={level:o,logger:"console",extra:{arguments:t}};"assert"===e?!1===t[0]&&(s="Assertion failed: "+(r.safeJoin(t.slice(1)," ")||"console.assert"),u.extra.arguments=t.slice(1),n&&n(s,u)):n&&n(s,u),i&&Function.prototype.apply.call(i,a,t)}}}}},function(t,e,n){"use strict";var r=n(60),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,v=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder");var m="function"===typeof Symbol&&Symbol.iterator;function y(t){for(var e=t.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return t.message="Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function w(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}function x(){}function k(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw y(Error(85));this.updater.enqueueSetState(this,t,e,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=w.prototype;var E=k.prototype=new x;E.constructor=k,r(E,w.prototype),E.isPureReactComponent=!0;var S={current:null},O={suspense:null},A={current:null},T=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function j(t,e,n){var r=void 0,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)T.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:t,key:o,ref:s,props:i,_owner:A.current}}function D(t){return"object"===typeof t&&null!==t&&t.$$typeof===a}var R=/\/+/g,M=[];function P(t,e,n,r){if(M.length){var i=M.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function F(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function N(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return r(i,e,""===n?"."+L(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+L(s=e[c],c);u+=t(s,l,r,i)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=m&&e[m]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=t(s=s.value,l=n+L(s,c++),r,i);else if("object"===s)throw r=""+e,y(Error(31),"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return u}(t,"",e,n)}function L(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function I(t,e){t.func.call(t.context,e,t.count++)}function B(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?U(t,r,n,(function(t){return t})):null!=t&&(D(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(R,"$&/")+"/")+n)),r.push(t))}function U(t,e,n,r,i){var a="";null!=n&&(a=(""+n).replace(R,"$&/")+"/"),N(t,B,e=P(e,a,r,i)),F(e)}function z(){var t=S.current;if(null===t)throw y(Error(321));return t}var q={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return U(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;N(t,I,e=P(null,null,e,n)),F(e)},count:function(t){return N(t,(function(){return null}),null)},toArray:function(t){var e=[];return U(t,e,null,(function(t){return t})),e},only:function(t){if(!D(t))throw y(Error(143));return t}},createRef:function(){return{current:null}},Component:w,PureComponent:k,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:h,render:t}},lazy:function(t){return{$$typeof:g,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:v,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return z().useCallback(t,e)},useContext:function(t,e){return z().useContext(t,e)},useEffect:function(t,e){return z().useEffect(t,e)},useImperativeHandle:function(t,e,n){return z().useImperativeHandle(t,e,n)},useDebugValue:function(){},useLayoutEffect:function(t,e){return z().useLayoutEffect(t,e)},useMemo:function(t,e){return z().useMemo(t,e)},useReducer:function(t,e,n){return z().useReducer(t,e,n)},useRef:function(t){return z().useRef(t)},useState:function(t){return z().useState(t)},Fragment:s,Profiler:c,StrictMode:u,Suspense:d,unstable_SuspenseList:p,createElement:j,cloneElement:function(t,e,n){if(null===t||void 0===t)throw y(Error(267),t);var i=void 0,o=r({},t.props),s=t.key,u=t.ref,c=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,c=A.current),void 0!==e.key&&(s=""+e.key);var l=void 0;for(i in t.type&&t.type.defaultProps&&(l=t.type.defaultProps),e)T.call(e,i)&&!C.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==l?l[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var f=0;f<i;f++)l[f]=arguments[f+2];o.children=l}return{$$typeof:a,type:t.type,key:s,ref:u,props:o,_owner:c}},createFactory:function(t){var e=j.bind(null,t);return e.type=t,e},isValidElement:D,version:"16.9.0",unstable_withSuspenseConfig:function(t,e){var n=O.suspense;O.suspense=void 0===e?null:e;try{t()}finally{O.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentBatchConfig:O,ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:r}},W={default:q},H=W&&q||W;t.exports=H.default||H},function(t,e,n){"use strict";var r=n(1),i=n(60),a=n(241);function o(t){for(var e=t.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return t.message="Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",t}if(!r)throw o(Error(227));var s=null,u={};function c(){if(s)for(var t in u){var e=u[t],n=s.indexOf(t);if(!(-1<n))throw o(Error(96),t);if(!f[n]){if(!e.extractEvents)throw o(Error(97),t);for(var r in f[n]=e,n=e.eventTypes){var i=void 0,a=n[r],c=e,d=r;if(h.hasOwnProperty(d))throw o(Error(99),d);h[d]=a;var p=a.phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],c,d);i=!0}else a.registrationName?(l(a.registrationName,c,d),i=!0):i=!1;if(!i)throw o(Error(98),r,t)}}}}function l(t,e,n){if(d[t])throw o(Error(100),t);d[t]=e,p[t]=e.eventTypes[n].dependencies}var f=[],h={},d={},p={};function v(t,e,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var g=!1,m=null,y=!1,b=null,_={onError:function(t){g=!0,m=t}};function w(t,e,n,r,i,a,o,s,u){g=!1,m=null,v.apply(_,arguments)}var x=null,k=null,E=null;function S(t,e,n){var r=t.type||"unknown-event";t.currentTarget=E(n),function(t,e,n,r,i,a,s,u,c){if(w.apply(this,arguments),g){if(!g)throw o(Error(198));var l=m;g=!1,m=null,y||(y=!0,b=l)}}(r,e,void 0,t),t.currentTarget=null}function O(t,e){if(null==e)throw o(Error(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function A(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var T=null;function C(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)S(t,e[r],n[r]);else e&&S(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function j(t){if(null!==t&&(T=O(T,t)),t=T,T=null,t){if(A(t,C),T)throw o(Error(95));if(y)throw t=b,y=!1,b=null,t}}var D={injectEventPluginOrder:function(t){if(s)throw o(Error(101));s=Array.prototype.slice.call(t),c()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!u.hasOwnProperty(e)||u[e]!==r){if(u[e])throw o(Error(102),e);u[e]=r,n=!0}}n&&c()}};function R(t,e){var n=t.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw o(Error(231),e,typeof n);return n}var M=Math.random().toString(36).slice(2),P="__reactInternalInstance$"+M,F="__reactEventHandlers$"+M;function N(t){if(t[P])return t[P];for(;!t[P];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[P]).tag||6===t.tag?t:null}function L(t){return!(t=t[P])||5!==t.tag&&6!==t.tag?null:t}function I(t){if(5===t.tag||6===t.tag)return t.stateNode;throw o(Error(33))}function B(t){return t[F]||null}function U(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function z(t,e,n){(e=R(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=O(n._dispatchListeners,e),n._dispatchInstances=O(n._dispatchInstances,t))}function q(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=U(e);for(e=n.length;0<e--;)z(n[e],"captured",t);for(e=0;e<n.length;e++)z(n[e],"bubbled",t)}}function W(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=R(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=O(n._dispatchListeners,e),n._dispatchInstances=O(n._dispatchInstances,t))}function H(t){t&&t.dispatchConfig.registrationName&&W(t._targetInst,null,t)}function G(t){A(t,q)}var Y=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement);function V(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $={animationend:V("Animation","AnimationEnd"),animationiteration:V("Animation","AnimationIteration"),animationstart:V("Animation","AnimationStart"),transitionend:V("Transition","TransitionEnd")},X={},K={};function J(t){if(X[t])return X[t];if(!$[t])return t;var e,n=$[t];for(e in n)if(n.hasOwnProperty(e)&&e in K)return X[t]=n[e];return t}Y&&(K=document.createElement("div").style,"AnimationEvent"in window||(delete $.animationend.animation,delete $.animationiteration.animation,delete $.animationstart.animation),"TransitionEvent"in window||delete $.transitionend.transition);var Z=J("animationend"),Q=J("animationiteration"),tt=J("animationstart"),et=J("transitionend"),nt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rt=null,it=null,at=null;function ot(){if(at)return at;var t,e,n=it,r=n.length,i="value"in rt?rt.value:rt.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return at=i.slice(t,1<e?1-e:void 0)}function st(){return!0}function ut(){return!1}function ct(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?st:ut,this.isPropagationStopped=ut,this}function lt(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ft(t){if(!(t instanceof this))throw o(Error(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function ht(t){t.eventPool=[],t.getPooled=lt,t.release=ft}i(ct.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=st)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=st)},persist:function(){this.isPersistent=st},isPersistent:ut,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ut,this._dispatchInstances=this._dispatchListeners=null}}),ct.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ct.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var a=new e;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,ht(n),n},ht(ct);var dt=ct.extend({data:null}),pt=ct.extend({data:null}),vt=[9,13,27,32],gt=Y&&"CompositionEvent"in window,mt=null;Y&&"documentMode"in document&&(mt=document.documentMode);var yt=Y&&"TextEvent"in window&&!mt,bt=Y&&(!gt||mt&&8<mt&&11>=mt),_t=String.fromCharCode(32),wt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},xt=!1;function kt(t,e){switch(t){case"keyup":return-1!==vt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Et(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var St=!1;var Ot={eventTypes:wt,extractEvents:function(t,e,n,r){var i=void 0,a=void 0;if(gt)t:{switch(t){case"compositionstart":i=wt.compositionStart;break t;case"compositionend":i=wt.compositionEnd;break t;case"compositionupdate":i=wt.compositionUpdate;break t}i=void 0}else St?kt(t,n)&&(i=wt.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=wt.compositionStart);return i?(bt&&"ko"!==n.locale&&(St||i!==wt.compositionStart?i===wt.compositionEnd&&St&&(a=ot()):(it="value"in(rt=r)?rt.value:rt.textContent,St=!0)),i=dt.getPooled(i,e,n,r),a?i.data=a:null!==(a=Et(n))&&(i.data=a),G(i),a=i):a=null,(t=yt?function(t,e){switch(t){case"compositionend":return Et(e);case"keypress":return 32!==e.which?null:(xt=!0,_t);case"textInput":return(t=e.data)===_t&&xt?null:t;default:return null}}(t,n):function(t,e){if(St)return"compositionend"===t||!gt&&kt(t,e)?(t=ot(),at=it=rt=null,St=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=pt.getPooled(wt.beforeInput,e,n,r)).data=t,G(e)):e=null,null===a?e:null===e?a:[a,e]}},At=null,Tt=null,Ct=null;function jt(t){if(t=k(t)){if("function"!==typeof At)throw o(Error(280));var e=x(t.stateNode);At(t.stateNode,t.type,e)}}function Dt(t){Tt?Ct?Ct.push(t):Ct=[t]:Tt=t}function Rt(){if(Tt){var t=Tt,e=Ct;if(Ct=Tt=null,jt(t),e)for(t=0;t<e.length;t++)jt(e[t])}}function Mt(t,e){return t(e)}function Pt(t,e,n,r){return t(e,n,r)}function Ft(){}var Nt=Mt,Lt=!1;function It(){null===Tt&&null===Ct||(Ft(),Rt())}var Bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bt[t.type]:"textarea"===e}function zt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function qt(t){if(!Y)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}function Wt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Ht(t){t._valueTracker||(t._valueTracker=function(t){var e=Wt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Gt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Yt=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Yt.hasOwnProperty("ReactCurrentDispatcher")||(Yt.ReactCurrentDispatcher={current:null}),Yt.hasOwnProperty("ReactCurrentBatchConfig")||(Yt.ReactCurrentBatchConfig={suspense:null});var Vt=/^(.*)[\\\/]/,$t="function"===typeof Symbol&&Symbol.for,Xt=$t?Symbol.for("react.element"):60103,Kt=$t?Symbol.for("react.portal"):60106,Jt=$t?Symbol.for("react.fragment"):60107,Zt=$t?Symbol.for("react.strict_mode"):60108,Qt=$t?Symbol.for("react.profiler"):60114,te=$t?Symbol.for("react.provider"):60109,ee=$t?Symbol.for("react.context"):60110,ne=$t?Symbol.for("react.concurrent_mode"):60111,re=$t?Symbol.for("react.forward_ref"):60112,ie=$t?Symbol.for("react.suspense"):60113,ae=$t?Symbol.for("react.suspense_list"):60120,oe=$t?Symbol.for("react.memo"):60115,se=$t?Symbol.for("react.lazy"):60116;$t&&Symbol.for("react.fundamental"),$t&&Symbol.for("react.responder");var ue="function"===typeof Symbol&&Symbol.iterator;function ce(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=ue&&t[ue]||t["@@iterator"])?t:null}function le(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case Jt:return"Fragment";case Kt:return"Portal";case Qt:return"Profiler";case Zt:return"StrictMode";case ie:return"Suspense";case ae:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case ee:return"Context.Consumer";case te:return"Context.Provider";case re:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case oe:return le(t.type);case se:if(t=1===t._status?t._result:null)return le(t)}return null}function fe(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,a=le(t.type);n=null,r&&(n=le(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(Vt,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}e+=n,t=t.return}while(t);return e}var he=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de=Object.prototype.hasOwnProperty,pe={},ve={};function ge(t,e,n,r,i,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){me[t]=new ge(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];me[e]=new ge(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){me[t]=new ge(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){me[t]=new ge(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){me[t]=new ge(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){me[t]=new ge(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){me[t]=new ge(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){me[t]=new ge(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){me[t]=new ge(t,5,!1,t.toLowerCase(),null,!1)}));var ye=/[\-:]([a-z])/g;function be(t){return t[1].toUpperCase()}function _e(t,e,n,r){var i=me.hasOwnProperty(e)?me[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!de.call(ve,t)||!de.call(pe,t)&&(he.test(t)?ve[t]=!0:(pe[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function we(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function xe(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function ke(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=we(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ee(t,e){null!=(e=e.checked)&&_e(t,"checked",e,!1)}function Se(t,e){Ee(t,e);var n=we(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ae(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ae(t,e.type,we(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Oe(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ae(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(ye,be);me[e]=new ge(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(ye,be);me[e]=new ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(ye,be);me[e]=new ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){me[t]=new ge(t,1,!1,t.toLowerCase(),null,!1)})),me.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){me[t]=new ge(t,1,!1,t.toLowerCase(),null,!0)}));var Te={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ce(t,e,n){return(t=ct.getPooled(Te.change,t,e,n)).type="change",Dt(n),G(t),t}var je=null,De=null;function Re(t){j(t)}function Me(t){if(Gt(I(t)))return t}function Pe(t,e){if("change"===t)return e}var Fe=!1;function Ne(){je&&(je.detachEvent("onpropertychange",Le),De=je=null)}function Le(t){if("value"===t.propertyName&&Me(De))if(t=Ce(De,t,zt(t)),Lt)j(t);else{Lt=!0;try{Mt(Re,t)}finally{Lt=!1,It()}}}function Ie(t,e,n){"focus"===t?(Ne(),De=n,(je=e).attachEvent("onpropertychange",Le)):"blur"===t&&Ne()}function Be(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Me(De)}function Ue(t,e){if("click"===t)return Me(e)}function ze(t,e){if("input"===t||"change"===t)return Me(e)}Y&&(Fe=qt("input")&&(!document.documentMode||9<document.documentMode));var qe={eventTypes:Te,_isInputEventSupported:Fe,extractEvents:function(t,e,n,r){var i=e?I(e):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=Pe:Ut(i)?Fe?a=ze:(a=Be,o=Ie):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Ue),a&&(a=a(t,e)))return Ce(a,n,r);o&&o(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Ae(i,"number",i.value)}},We=ct.extend({view:null,detail:null}),He={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ge(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=He[t])&&!!e[t]}function Ye(){return Ge}var Ve=0,$e=0,Xe=!1,Ke=!1,Je=We.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ye,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ve;return Ve=t.screenX,Xe?"mousemove"===t.type?t.screenX-e:0:(Xe=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=$e;return $e=t.screenY,Ke?"mousemove"===t.type?t.screenY-e:0:(Ke=!0,0)}}),Ze=Je.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Qe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},tn={eventTypes:Qe,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=e,e=(e=n.relatedTarget||n.toElement)?N(e):null):a=null,a===e)return null;var o=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===t||"mouseover"===t?(o=Je,s=Qe.mouseLeave,u=Qe.mouseEnter,c="mouse"):"pointerout"!==t&&"pointerover"!==t||(o=Ze,s=Qe.pointerLeave,u=Qe.pointerEnter,c="pointer");var l=null==a?i:I(a);if(i=null==e?i:I(e),(t=o.getPooled(s,a,n,r)).type=c+"leave",t.target=l,t.relatedTarget=i,(n=o.getPooled(u,e,n,r)).type=c+"enter",n.target=i,n.relatedTarget=l,r=e,a&&r)t:{for(i=r,c=0,o=e=a;o;o=U(o))c++;for(o=0,u=i;u;u=U(u))o++;for(;0<c-o;)e=U(e),c--;for(;0<o-c;)i=U(i),o--;for(;c--;){if(e===i||e===i.alternate)break t;e=U(e),i=U(i)}e=null}else e=null;for(i=e,e=[];a&&a!==i&&(null===(c=a.alternate)||c!==i);)e.push(a),a=U(a);for(a=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)a.push(r),r=U(r);for(r=0;r<e.length;r++)W(e[r],"bubbled",t);for(r=a.length;0<r--;)W(a[r],"captured",n);return[t,n]}};function en(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}var nn=Object.prototype.hasOwnProperty;function rn(t,e){if(en(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!nn.call(e,n[r])||!en(t[n[r]],e[n[r]]))return!1;return!0}function an(t,e){return{responder:t,props:e}}function on(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(0!==(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function sn(t){if(2!==on(t))throw o(Error(188))}function un(t){if(!(t=function(t){var e=t.alternate;if(!e){if(3===(e=on(t)))throw o(Error(188));return 1===e?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return sn(i),t;if(a===r)return sn(i),e;a=a.sibling}throw o(Error(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw o(Error(189))}}if(n.alternate!==r)throw o(Error(190))}if(3!==n.tag)throw o(Error(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}new Map,new Map,new Set,new Map;var cn=ct.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ln=ct.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fn=We.extend({relatedTarget:null});function hn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}for(var dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vn=We.extend({key:function(t){if(t.key){var e=dn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=hn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?pn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ye,charCode:function(t){return"keypress"===t.type?hn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?hn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),gn=Je.extend({dataTransfer:null}),mn=We.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ye}),yn=ct.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),bn=Je.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),_n=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Z,"animationEnd",2],[Q,"animationIteration",2],[tt,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[et,"transitionEnd",2],["waiting","waiting",2]],wn={},xn={},kn=0;kn<_n.length;kn++){var En=_n[kn],Sn=En[0],On=En[1],An=En[2],Tn="on"+(On[0].toUpperCase()+On.slice(1)),Cn={phasedRegistrationNames:{bubbled:Tn,captured:Tn+"Capture"},dependencies:[Sn],eventPriority:An};wn[On]=Cn,xn[Sn]=Cn}var jn={eventTypes:wn,getEventPriority:function(t){return void 0!==(t=xn[t])?t.eventPriority:2},extractEvents:function(t,e,n,r){var i=xn[t];if(!i)return null;switch(t){case"keypress":if(0===hn(n))return null;case"keydown":case"keyup":t=vn;break;case"blur":case"focus":t=fn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=mn;break;case Z:case Q:case tt:t=cn;break;case et:t=yn;break;case"scroll":t=We;break;case"wheel":t=bn;break;case"copy":case"cut":case"paste":t=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ze;break;default:t=ct}return G(e=t.getPooled(i,e,n,r)),e}},Dn=jn.getEventPriority,Rn=[];function Mn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=N(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=zt(t.nativeEvent);r=t.topLevelType;for(var a=t.nativeEvent,o=null,s=0;s<f.length;s++){var u=f[s];u&&(u=u.extractEvents(r,e,a,i))&&(o=O(o,u))}j(o)}}var Pn=!0;function Fn(t,e){Nn(e,t,!1)}function Nn(t,e,n){switch(Dn(e)){case 0:var r=Ln.bind(null,e,1);break;case 1:r=In.bind(null,e,1);break;default:r=Bn.bind(null,e,1)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ln(t,e,n){Lt||Ft();var r=Bn,i=Lt;Lt=!0;try{Pt(r,t,e,n)}finally{(Lt=i)||It()}}function In(t,e,n){Bn(t,e,n)}function Bn(t,e,n){if(Pn){if(null===(e=N(e=zt(n)))||"number"!==typeof e.tag||2===on(e)||(e=null),Rn.length){var r=Rn.pop();r.topLevelType=t,r.nativeEvent=n,r.targetInst=e,t=r}else t={topLevelType:t,nativeEvent:n,targetInst:e,ancestors:[]};try{if(n=t,Lt)Mn(n);else{Lt=!0;try{Nt(Mn,n,void 0)}finally{Lt=!1,It()}}}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Rn.length&&Rn.push(t)}}}var Un=new("function"===typeof WeakMap?WeakMap:Map);function zn(t){var e=Un.get(t);return void 0===e&&(e=new Set,Un.set(t,e)),e}function qn(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Wn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hn(t,e){var n,r=Wn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Wn(r)}}function Gn(){for(var t=window,e=qn();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=qn((t=e.contentWindow).document)}return e}function Yn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Vn=Y&&"documentMode"in document&&11>=document.documentMode,$n={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Xn=null,Kn=null,Jn=null,Zn=!1;function Qn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Zn||null==Xn||Xn!==qn(n)?null:("selectionStart"in(n=Xn)&&Yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Jn&&rn(Jn,n)?null:(Jn=n,(t=ct.getPooled($n.select,Kn,t,e)).type="select",t.target=Xn,G(t),t))}var tr={eventTypes:$n,extractEvents:function(t,e,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){t:{a=zn(a),i=p.onSelect;for(var o=0;o<i.length;o++)if(!a.has(i[o])){a=!1;break t}a=!0}i=!a}if(i)return null;switch(a=e?I(e):window,t){case"focus":(Ut(a)||"true"===a.contentEditable)&&(Xn=a,Kn=e,Jn=null);break;case"blur":Jn=Kn=Xn=null;break;case"mousedown":Zn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Zn=!1,Qn(n,r);case"selectionchange":if(Vn)break;case"keydown":case"keyup":return Qn(n,r)}return null}};function er(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function nr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+we(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rr(t,e){if(null!=e.dangerouslySetInnerHTML)throw o(Error(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ir(t,e){var n=e.value;if(null==n){if(n=e.defaultValue,null!=(e=e.children)){if(null!=n)throw o(Error(92));if(Array.isArray(e)){if(!(1>=e.length))throw o(Error(93));e=e[0]}n=e}null==n&&(n="")}t._wrapperState={initialValue:we(n)}}function ar(t,e){var n=we(e.value),r=we(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function or(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}D.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=B,k=L,E=I,D.injectEventPluginsByName({SimpleEventPlugin:jn,EnterLeaveEventPlugin:tn,ChangeEventPlugin:qe,SelectEventPlugin:tr,BeforeInputEventPlugin:Ot});var sr={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ur(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cr(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?ur(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var lr=void 0,fr=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==sr.svg||"innerHTML"in t)t.innerHTML=e;else{for((lr=lr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=lr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function hr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var dr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];function vr(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||dr.hasOwnProperty(t)&&dr[t]?(""+e).trim():e+"px"}function gr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=vr(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(dr).forEach((function(t){pr.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dr[e]=dr[t]}))}));var mr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yr(t,e){if(e){if(mr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw o(Error(137),t,"");if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw o(Error(60));if(!("object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML))throw o(Error(61))}if(null!=e.style&&"object"!==typeof e.style)throw o(Error(62),"")}}function br(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function _r(t,e){var n=zn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=p[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.has(i)){switch(i){case"scroll":Nn(t,"scroll",!0);break;case"focus":case"blur":Nn(t,"focus",!0),Nn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":qt(i)&&Nn(t,i,!0);break;case"invalid":case"submit":case"reset":break;default:-1===nt.indexOf(i)&&Fn(i,t)}n.add(i)}}}function wr(){}var xr=null,kr=null;function Er(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Sr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Or="function"===typeof setTimeout?setTimeout:void 0,Ar="function"===typeof clearTimeout?clearTimeout:void 0;function Tr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}new Set;var Cr=[],jr=-1;function Dr(t){0>jr||(t.current=Cr[jr],Cr[jr]=null,jr--)}function Rr(t,e){Cr[++jr]=t.current,t.current=e}var Mr={},Pr={current:Mr},Fr={current:!1},Nr=Mr;function Lr(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Br(t){Dr(Fr),Dr(Pr)}function Ur(t){Dr(Fr),Dr(Pr)}function zr(t,e,n){if(Pr.current!==Mr)throw o(Error(168));Rr(Pr,e),Rr(Fr,n)}function qr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw o(Error(108),le(e)||"Unknown",a);return i({},n,r)}function Wr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Mr,Nr=Pr.current,Rr(Pr,e),Rr(Fr,Fr.current),!0}function Hr(t,e,n){var r=t.stateNode;if(!r)throw o(Error(169));n?(e=qr(t,e,Nr),r.__reactInternalMemoizedMergedChildContext=e,Dr(Fr),Dr(Pr),Rr(Pr,e)):Dr(Fr),Rr(Fr,n)}var Gr=a.unstable_runWithPriority,Yr=a.unstable_scheduleCallback,Vr=a.unstable_cancelCallback,$r=a.unstable_shouldYield,Xr=a.unstable_requestPaint,Kr=a.unstable_now,Jr=a.unstable_getCurrentPriorityLevel,Zr=a.unstable_ImmediatePriority,Qr=a.unstable_UserBlockingPriority,ti=a.unstable_NormalPriority,ei=a.unstable_LowPriority,ni=a.unstable_IdlePriority,ri={},ii=void 0!==Xr?Xr:function(){},ai=null,oi=null,si=!1,ui=Kr(),ci=1e4>ui?Kr:function(){return Kr()-ui};function li(){switch(Jr()){case Zr:return 99;case Qr:return 98;case ti:return 97;case ei:return 96;case ni:return 95;default:throw o(Error(332))}}function fi(t){switch(t){case 99:return Zr;case 98:return Qr;case 97:return ti;case 96:return ei;case 95:return ni;default:throw o(Error(332))}}function hi(t,e){return t=fi(t),Gr(t,e)}function di(t,e,n){return t=fi(t),Yr(t,e,n)}function pi(t){return null===ai?(ai=[t],oi=Yr(Zr,gi)):ai.push(t),ri}function vi(){null!==oi&&Vr(oi),gi()}function gi(){if(!si&&null!==ai){si=!0;var t=0;try{var e=ai;hi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),ai=null}catch(n){throw null!==ai&&(ai=ai.slice(t+1)),Yr(Zr,vi),n}finally{si=!1}}}function mi(t,e){return 1073741823===e?99:1===e?95:0>=(t=10*(1073741821-e)-10*(1073741821-t))?99:250>=t?98:5250>=t?97:95}function yi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var bi={current:null},_i=null,wi=null,xi=null;function ki(){xi=wi=_i=null}function Ei(t,e){var n=t.type._context;Rr(bi,n._currentValue),n._currentValue=e}function Si(t){var e=bi.current;Dr(bi),t.type._context._currentValue=e}function Oi(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function Ai(t,e){_i=t,xi=wi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(lo=!0),t.firstContext=null)}function Ti(t,e){if(xi!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(xi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===wi){if(null===_i)throw o(Error(308));wi=e,_i.dependencies={expirationTime:0,firstContext:e,responders:null}}else wi=wi.next=e;return t._currentValue}var Ci=!1;function ji(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Di(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ri(t,e){return{expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Mi(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Pi(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=ji(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=ji(t.memoizedState),i=n.updateQueue=ji(n.memoizedState)):r=t.updateQueue=Di(i):null===i&&(i=n.updateQueue=Di(r));null===i||r===i?Mi(r,e):null===r.lastUpdate||null===i.lastUpdate?(Mi(r,e),Mi(i,e)):(Mi(r,e),i.lastUpdate=e)}function Fi(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=ji(t.memoizedState):Ni(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function Ni(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Di(e)),e}function Li(t,e,n,r,a,o){switch(n.tag){case 1:return"function"===typeof(t=n.payload)?t.call(o,r,a):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null===(a="function"===typeof(t=n.payload)?t.call(o,r,a):t)||void 0===a)break;return i({},r,a);case 2:Ci=!0}return r}function Ii(t,e,n,r,i){Ci=!1;for(var a=(e=Ni(t,e)).baseState,o=null,s=0,u=e.firstUpdate,c=a;null!==u;){var l=u.expirationTime;l<i?(null===o&&(o=u,a=c),s<l&&(s=l)):(qs(l,u.suspenseConfig),c=Li(t,0,u,c,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(l=null,u=e.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<i?(null===l&&(l=u,null===o&&(a=c)),s<f&&(s=f)):(c=Li(t,0,u,c,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===o&&(e.lastUpdate=null),null===l?e.lastCapturedUpdate=null:t.effectTag|=32,null===o&&null===l&&(a=c),e.baseState=a,e.firstUpdate=o,e.firstCapturedUpdate=l,t.expirationTime=s,t.memoizedState=c}function Bi(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),Ui(e.firstEffect,n),e.firstEffect=e.lastEffect=null,Ui(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function Ui(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;if("function"!==typeof n)throw o(Error(191),n);n.call(r)}t=t.nextEffect}}var zi=Yt.ReactCurrentBatchConfig,qi=(new r.Component).refs;function Wi(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var Hi={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===on(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Cs(),i=zi.suspense;(i=Ri(r=js(r,t,i),i)).payload=e,void 0!==n&&null!==n&&(i.callback=n),Pi(t,i),Rs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Cs(),i=zi.suspense;(i=Ri(r=js(r,t,i),i)).tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Pi(t,i),Rs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Cs(),r=zi.suspense;(r=Ri(n=js(n,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),Pi(t,r),Rs(t,n)}};function Gi(t,e,n,r,i,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!rn(n,r)||!rn(i,a))}function Yi(t,e,n){var r=!1,i=Mr,a=e.contextType;return"object"===typeof a&&null!==a?a=Ti(a):(i=Ir(e)?Nr:Pr.current,a=(r=null!==(r=e.contextTypes)&&void 0!==r)?Lr(t,i):Mr),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Hi,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Vi(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hi.enqueueReplaceState(e,e.state,null)}function $i(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=qi;var a=e.contextType;"object"===typeof a&&null!==a?i.context=Ti(a):(a=Ir(e)?Nr:Pr.current,i.context=Lr(t,a)),null!==(a=t.updateQueue)&&(Ii(t,a,n,i,r),i.state=t.memoizedState),"function"===typeof(a=e.getDerivedStateFromProps)&&(Wi(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Hi.enqueueReplaceState(i,i.state,null),null!==(a=t.updateQueue)&&(Ii(t,a,n,i,r),i.state=t.memoizedState)),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var Xi=Array.isArray;function Ki(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var r=void 0;if(n){if(1!==n.tag)throw o(Error(309));r=n.stateNode}if(!r)throw o(Error(147),t);var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===qi&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw o(Error(284));if(!n._owner)throw o(Error(290),t)}return t}function Ji(t,e){if("textarea"!==t.type)throw o(Error(31),"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function Zi(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=au(t,e)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=uu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Ki(t,e,n),r.return=t,r):((r=ou(n.type,n.key,n.props,null,t.mode,r)).ref=Ki(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=cu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function f(t,e,n,r,a){return null===e||7!==e.tag?((e=su(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=uu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Xt:return(n=ou(e.type,e.key,e.props,null,t.mode,n)).ref=Ki(t,null,e),n.return=t,n;case Kt:return(e=cu(e,t.mode,n)).return=t,e}if(Xi(e)||ce(e))return(e=su(e,t.mode,n,null)).return=t,e;Ji(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===i?n.type===Jt?f(t,e,n.props.children,r,i):c(t,e,n,r):null;case Kt:return n.key===i?l(t,e,n,r):null}if(Xi(n)||ce(n))return null!==i?null:f(t,e,n,r,null);Ji(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Xt:return t=t.get(null===r.key?n:r.key)||null,r.type===Jt?f(e,t,r.props.children,i,r.key):c(e,t,r,i);case Kt:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Xi(r)||ce(r))return f(e,t=t.get(n)||null,r,i,null);Ji(e,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,g=null;null!==f&&v<s.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=g);break}t&&f&&null===m.alternate&&e(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=g}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(g=p(f,i,v,s[v],u))&&(t&&null!==g.alternate&&f.delete(null===g.key?v:g.key),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g);return t&&f.forEach((function(t){return e(i,t)})),c}function g(i,s,u,c){var l=ce(u);if("function"!==typeof l)throw o(Error(150));if(null==(u=l.call(u)))throw o(Error(151));for(var f=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=d(i,v,y.value,c);if(null===b){null===v&&(v=m);break}t&&v&&null===b.alternate&&e(i,v),s=a(b,s,g),null===f?l=b:f.sibling=b,f=b,v=m}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=h(i,y.value,c))&&(s=a(y,s,g),null===f?l=y:f.sibling=y,f=y);return l}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,c))&&(t&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===f?l=y:f.sibling=y,f=y);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,a,u){var c="object"===typeof a&&null!==a&&a.type===Jt&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case Xt:t:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?a.type===Jt:c.elementType===a.type){n(t,c.sibling),(r=i(c,a.type===Jt?a.props.children:a.props)).ref=Ki(t,c,a),r.return=t,t=r;break t}n(t,c);break}e(t,c),c=c.sibling}a.type===Jt?((r=su(a.props.children,t.mode,u,a.key)).return=t,t=r):((u=ou(a.type,a.key,a.props,null,t.mode,u)).ref=Ki(t,r,a),u.return=t,t=u)}return s(t);case Kt:t:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(t,r.sibling),(r=i(r,a.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=cu(a,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,a)).return=t,t=r):(n(t,r),(r=uu(a,t.mode,u)).return=t,t=r),s(t);if(Xi(a))return v(t,r,a,u);if(ce(a))return g(t,r,a,u);if(l&&Ji(t,a),"undefined"===typeof a&&!c)switch(t.tag){case 1:case 0:throw t=t.type,o(Error(152),t.displayName||t.name||"Component")}return n(t,r)}}var Qi=Zi(!0),ta=Zi(!1),ea={},na={current:ea},ra={current:ea},ia={current:ea};function aa(t){if(t===ea)throw o(Error(174));return t}function oa(t,e){Rr(ia,e),Rr(ra,t),Rr(na,ea);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cr(null,"");break;default:e=cr(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}Dr(na),Rr(na,e)}function sa(t){Dr(na),Dr(ra),Dr(ia)}function ua(t){aa(ia.current);var e=aa(na.current),n=cr(e,t.type);e!==n&&(Rr(ra,t),Rr(na,n))}function ca(t){ra.current===t&&(Dr(na),Dr(ra))}var la=1,fa=1,ha=2,da={current:0};function pa(t){for(var e=t;null!==e;){if(13===e.tag){if(null!==e.memoizedState)return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var va=0,ga=2,ma=4,ya=8,ba=16,_a=32,wa=64,xa=128,ka=Yt.ReactCurrentDispatcher,Ea=0,Sa=null,Oa=null,Aa=null,Ta=null,Ca=null,ja=null,Da=0,Ra=null,Ma=0,Pa=!1,Fa=null,Na=0;function La(){throw o(Error(321))}function Ia(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Ba(t,e,n,r,i,a){if(Ea=a,Sa=e,Aa=null!==t?t.memoizedState:null,ka.current=null===Aa?Za:Qa,e=n(r,i),Pa){do{Pa=!1,Na+=1,Aa=null!==t?t.memoizedState:null,ja=Ta,Ra=Ca=Oa=null,ka.current=Qa,e=n(r,i)}while(Pa);Fa=null,Na=0}if(ka.current=Ja,(t=Sa).memoizedState=Ta,t.expirationTime=Da,t.updateQueue=Ra,t.effectTag|=Ma,t=null!==Oa&&null!==Oa.next,Ea=0,ja=Ca=Ta=Aa=Oa=Sa=null,Da=0,Ra=null,Ma=0,t)throw o(Error(300));return e}function Ua(){ka.current=Ja,Ea=0,ja=Ca=Ta=Aa=Oa=Sa=null,Da=0,Ra=null,Ma=0,Pa=!1,Fa=null,Na=0}function za(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Ca?Ta=Ca=t:Ca=Ca.next=t,Ca}function qa(){if(null!==ja)ja=(Ca=ja).next,Aa=null!==(Oa=Aa)?Oa.next:null;else{if(null===Aa)throw o(Error(310));var t={memoizedState:(Oa=Aa).memoizedState,baseState:Oa.baseState,queue:Oa.queue,baseUpdate:Oa.baseUpdate,next:null};Ca=null===Ca?Ta=t:Ca.next=t,Aa=Oa.next}return Ca}function Wa(t,e){return"function"===typeof e?e(t):e}function Ha(t){var e=qa(),n=e.queue;if(null===n)throw o(Error(311));if(n.lastRenderedReducer=t,0<Na){var r=n.dispatch;if(null!==Fa){var i=Fa.get(n);if(void 0!==i){Fa.delete(n);var a=e.memoizedState;do{a=t(a,i.action),i=i.next}while(null!==i);return en(a,e.memoizedState)||(lo=!0),e.memoizedState=a,e.baseUpdate===n.last&&(e.baseState=a),n.lastRenderedState=a,[a,r]}}return[e.memoizedState,r]}r=n.last;var s=e.baseUpdate;if(a=e.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var f=c.expirationTime;f<Ea?(l||(l=!0,u=s,i=a),f>Da&&(Da=f)):(qs(f,c.suspenseConfig),a=c.eagerReducer===t?c.eagerState:t(a,c.action)),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=a),en(a,e.memoizedState)||(lo=!0),e.memoizedState=a,e.baseUpdate=u,e.baseState=i,n.lastRenderedState=a}return[e.memoizedState,n.dispatch]}function Ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===Ra?(Ra={lastEffect:null}).lastEffect=t.next=t:null===(e=Ra.lastEffect)?Ra.lastEffect=t.next=t:(n=e.next,e.next=t,t.next=n,Ra.lastEffect=t),t}function Ya(t,e,n,r){var i=za();Ma|=t,i.memoizedState=Ga(e,n,void 0,void 0===r?null:r)}function Va(t,e,n,r){var i=qa();r=void 0===r?null:r;var a=void 0;if(null!==Oa){var o=Oa.memoizedState;if(a=o.destroy,null!==r&&Ia(r,o.deps))return void Ga(va,n,a,r)}Ma|=t,i.memoizedState=Ga(e,n,a,r)}function $a(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Xa(){}function Ka(t,e,n){if(!(25>Na))throw o(Error(301));var r=t.alternate;if(t===Sa||null!==r&&r===Sa)if(Pa=!0,t={expirationTime:Ea,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===Fa&&(Fa=new Map),void 0===(n=Fa.get(e)))Fa.set(e,t);else{for(e=n;null!==e.next;)e=e.next;e.next=t}else{var i=Cs(),a=zi.suspense;a={expirationTime:i=js(i,t,a),suspenseConfig:a,action:n,eagerReducer:null,eagerState:null,next:null};var s=e.last;if(null===s)a.next=a;else{var u=s.next;null!==u&&(a.next=u),s.next=a}if(e.last=a,0===t.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=e.lastRenderedReducer))try{var c=e.lastRenderedState,l=r(c,n);if(a.eagerReducer=r,a.eagerState=l,en(l,c))return}catch(f){}Rs(t,i)}}var Ja={readContext:Ti,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useLayoutEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useResponder:La},Za={readContext:Ti,useCallback:function(t,e){return za().memoizedState=[t,void 0===e?null:e],t},useContext:Ti,useEffect:function(t,e){return Ya(516,xa|wa,t,e)},useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ya(4,ma|_a,$a.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ya(4,ma|_a,t,e)},useMemo:function(t,e){var n=za();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=za();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ka.bind(null,Sa,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},za().memoizedState=t},useState:function(t){var e=za();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:t}).dispatch=Ka.bind(null,Sa,t),[e.memoizedState,t]},useDebugValue:Xa,useResponder:an},Qa={readContext:Ti,useCallback:function(t,e){var n=qa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ia(e,r[1])?r[0]:(n.memoizedState=[t,e],t)},useContext:Ti,useEffect:function(t,e){return Va(516,xa|wa,t,e)},useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Va(4,ma|_a,$a.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Va(4,ma|_a,t,e)},useMemo:function(t,e){var n=qa();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ia(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)},useReducer:Ha,useRef:function(){return qa().memoizedState},useState:function(t){return Ha(Wa)},useDebugValue:Xa,useResponder:an},to=null,eo=null,no=!1;function ro(t,e){var n=ru(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function io(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function ao(t){if(no){var e=eo;if(e){var n=e;if(!io(t,e)){if(!(e=Tr(n.nextSibling))||!io(t,e))return t.effectTag|=2,no=!1,void(to=t);ro(to,n)}to=t,eo=Tr(e.firstChild)}else t.effectTag|=2,no=!1,to=t}}function oo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;to=t}function so(t){if(t!==to)return!1;if(!no)return oo(t),no=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Sr(e,t.memoizedProps))for(e=eo;e;)ro(t,e),e=Tr(e.nextSibling);return oo(t),eo=to?Tr(t.stateNode.nextSibling):null,!0}function uo(){eo=to=null,no=!1}var co=Yt.ReactCurrentOwner,lo=!1;function fo(t,e,n,r){e.child=null===t?ta(e,null,n,r):Qi(e,t.child,n,r)}function ho(t,e,n,r,i){n=n.render;var a=e.ref;return Ai(e,i),r=Ba(t,e,n,r,a,i),null===t||lo?(e.effectTag|=1,fo(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),So(t,e,i))}function po(t,e,n,r,i,a){if(null===t){var o=n.type;return"function"!==typeof o||iu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=ou(n.type,null,r,null,e.mode,a)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,vo(t,e,o,r,i,a))}return o=t.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:rn)(i,r)&&t.ref===e.ref)?So(t,e,a):(e.effectTag|=1,(t=au(o,r)).ref=e.ref,t.return=e,e.child=t)}function vo(t,e,n,r,i,a){return null!==t&&rn(t.memoizedProps,r)&&t.ref===e.ref&&(lo=!1,i<a)?So(t,e,a):mo(t,e,n,r,a)}function go(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function mo(t,e,n,r,i){var a=Ir(n)?Nr:Pr.current;return a=Lr(e,a),Ai(e,i),n=Ba(t,e,n,r,a,i),null===t||lo?(e.effectTag|=1,fo(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),So(t,e,i))}function yo(t,e,n,r,i){if(Ir(n)){var a=!0;Wr(e)}else a=!1;if(Ai(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Yi(e,n,r),$i(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ti(c):c=Lr(e,c=Ir(n)?Nr:Pr.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Vi(e,o,r,c),Ci=!1;var h=e.memoizedState;u=o.state=h;var d=e.updateQueue;null!==d&&(Ii(e,d,r,o,i),u=e.memoizedState),s!==r||h!==u||Fr.current||Ci?("function"===typeof l&&(Wi(e,n,l,r),u=e.memoizedState),(s=Ci||Gi(e,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.effectTag|=4)):("function"===typeof o.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(e.effectTag|=4),r=!1)}else o=e.stateNode,s=e.memoizedProps,o.props=e.type===e.elementType?s:yi(e.type,s),u=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ti(c):c=Lr(e,c=Ir(n)?Nr:Pr.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Vi(e,o,r,c),Ci=!1,u=e.memoizedState,h=o.state=u,null!==(d=e.updateQueue)&&(Ii(e,d,r,o,i),h=e.memoizedState),s!==r||u!==h||Fr.current||Ci?("function"===typeof l&&(Wi(e,n,l,r),h=e.memoizedState),(l=Ci||Gi(e,n,s,r,u,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(e.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return bo(t,e,n,r,a,i)}function bo(t,e,n,r,i,a){go(t,e);var o=0!==(64&e.effectTag);if(!r&&!o)return i&&Hr(e,n,!1),So(t,e,a);r=e.stateNode,co.current=e;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&o?(e.child=Qi(e,t.child,null,a),e.child=Qi(e,null,s,a)):fo(t,e,s,a),e.memoizedState=r.state,i&&Hr(e,n,!0),e.child}function _o(t){var e=t.stateNode;e.pendingContext?zr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&zr(0,e.context,!1),oa(t,e.containerInfo)}var wo={};function xo(t,e,n){var r,i=e.mode,a=e.pendingProps,o=da.current,s=null,u=!1;if((r=0!==(64&e.effectTag))||(r=0!==(o&ha)&&(null===t||null!==t.memoizedState)),r?(s=wo,u=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=fa),Rr(da,o&=la),null===t)if(u){if(a=a.fallback,(t=su(null,i,0,null)).return=e,0===(2&e.mode))for(u=null!==e.memoizedState?e.child.child:e.child,t.child=u;null!==u;)u.return=t,u=u.sibling;(n=su(a,i,n,null)).return=e,t.sibling=n,i=t}else i=n=ta(e,null,a.children,n);else{if(null!==t.memoizedState)if(i=(o=t.child).sibling,u){if(a=a.fallback,(n=au(o,o.pendingProps)).return=e,0===(2&e.mode)&&(u=null!==e.memoizedState?e.child.child:e.child)!==o.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;(a=au(i,a,i.expirationTime)).return=e,n.sibling=a,i=n,n.childExpirationTime=0,n=a}else i=n=Qi(e,o.child,a.children,n);else if(o=t.child,u){if(u=a.fallback,(a=su(null,i,0,null)).return=e,a.child=o,null!==o&&(o.return=a),0===(2&e.mode))for(o=null!==e.memoizedState?e.child.child:e.child,a.child=o;null!==o;)o.return=a,o=o.sibling;(n=su(u,i,n,null)).return=e,a.sibling=n,n.effectTag|=2,i=a,a.childExpirationTime=0}else n=i=Qi(e,o,a.children,n);e.stateNode=t.stateNode}return e.memoizedState=s,e.child=i,n}function ko(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i)}function Eo(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(fo(t,e,r.children,n),0!==((r=da.current)&ha))r=r&la|ha,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag){if(null!==t.memoizedState){t.expirationTime<n&&(t.expirationTime=n);var o=t.alternate;null!==o&&o.expirationTime<n&&(o.expirationTime=n),Oi(t.return,n)}}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=la}if(Rr(da,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(r=n.alternate)&&null===pa(r)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ko(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(r=i.alternate)&&null===pa(r)){e.child=i;break}r=i.sibling,i.sibling=n,n=i,i=r}ko(e,!0,n,null,a);break;case"together":ko(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function So(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw o(Error(153));if(null!==e.child){for(n=au(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=au(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function Oo(t){t.effectTag|=4}var Ao=void 0,To=void 0,Co=void 0,jo=void 0;function Do(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ro(t){switch(t.tag){case 1:Ir(t.type)&&Br();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:if(sa(),Ur(),0!==(64&(e=t.effectTag)))throw o(Error(285));return t.effectTag=-2049&e|64,t;case 5:return ca(t),null;case 13:return Dr(da),2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 19:return Dr(da),null;case 4:return sa(),null;case 10:return Si(t),null;default:return null}}function Mo(t,e){return{value:t,source:e,stack:fe(e)}}Ao=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(20===n.tag)t.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(){},Co=function(t,e,n,r,a){var o=t.memoizedProps;if(o!==r){var s=e.stateNode;switch(aa(na.current),t=null,n){case"input":o=xe(s,o),r=xe(s,r),t=[];break;case"option":o=er(s,o),r=er(s,r),t=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":o=rr(s,o),r=rr(s,r),t=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(s.onclick=wr)}yr(n,r),s=n=void 0;var u=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var c=o[n];for(s in c)c.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(d.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var l=r[n];if(c=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&l!==c&&(null!=l||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(u||(u={}),u[s]=l[s])}else u||(t||(t=[]),t.push(n,u)),u=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(n,""+l)):"children"===n?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(d.hasOwnProperty(n)?(null!=l&&_r(a,n),t||c===l||(t=[])):(t=t||[]).push(n,l))}u&&(t=t||[]).push("style",u),a=t,(e.updateQueue=a)&&Oo(e)}},jo=function(t,e,n,r){n!==r&&Oo(e)};var Po="function"===typeof WeakSet?WeakSet:Set;function Fo(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=fe(n)),null!==n&&le(n.type),e=e.value,null!==t&&1===t.tag&&le(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function No(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Ks(t,n)}else e.current=null}function Lo(t,e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&t)!==va){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&e)!==va&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function Io(t,e){switch("function"===typeof eu&&eu(t),t.tag){case 0:case 11:case 14:case 15:var n=t.updateQueue;if(null!==n&&null!==(n=n.lastEffect)){var r=n.next;hi(97<e?97:e,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Ks(i,a)}}e=e.next}while(e!==r)}))}break;case 1:No(t),"function"===typeof(e=t.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){Ks(t,n)}}(t,e);break;case 5:No(t);break;case 4:qo(t,e)}}function Bo(t,e){for(var n=t;;)if(Io(n,e),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Uo(t){return 5===t.tag||3===t.tag||4===t.tag}function zo(t){t:{for(var e=t.return;null!==e;){if(Uo(e)){var n=e;break t}e=e.return}throw o(Error(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw o(Error(161))}16&n.effectTag&&(hr(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||Uo(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){var a=5===i.tag||6===i.tag;if(a||20===i.tag){var s=a?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(a=e).nodeType?a.parentNode.insertBefore(u,s):a.insertBefore(u,s)}else e.insertBefore(s,n);else r?(8===(u=e).nodeType?(a=u.parentNode).insertBefore(s,u):(a=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==a.onclick||(a.onclick=wr)):e.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function qo(t,e){for(var n=t,r=!1,i=void 0,a=void 0;;){if(!r){r=n.return;t:for(;;){if(null===r)throw o(Error(160));switch(i=r.stateNode,r.tag){case 5:a=!1;break t;case 3:case 4:i=i.containerInfo,a=!0;break t}r=r.return}r=!0}if(5===n.tag||6===n.tag)if(Bo(n,e),a){var s=i,u=n.stateNode;8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)}else i.removeChild(n.stateNode);else if(20===n.tag)u=n.stateNode.instance,Bo(n,e),a?8===(s=i).nodeType?s.parentNode.removeChild(u):s.removeChild(u):i.removeChild(u);else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(Io(n,e),null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;4===(n=n.return).tag&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Wo(t,e){switch(e.tag){case 0:case 11:case 14:case 15:Lo(ma,ya,e);break;case 1:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[F]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Ee(n,r),br(t,i),e=br(t,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?gr(n,u):"dangerouslySetInnerHTML"===s?fr(n,u):"children"===s?hr(n,u):_e(n,s,u,e)}switch(t){case"input":Se(n,r);break;case"textarea":ar(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?nr(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?nr(n,!!r.multiple,r.defaultValue,!0):nr(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===e.stateNode)throw o(Error(162));e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,vs=ci()),null!==n)t:for(t=n;;){if(5===t.tag)a=t.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=t.stateNode,i=void 0!==(i=t.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=vr("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState){(a=t.child.sibling).return=t,t=a;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break t;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}Ho(e);break;case 19:Ho(e);break;case 17:case 20:break;default:throw o(Error(163))}}function Ho(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Po),e.forEach((function(e){var r=Zs.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Go="function"===typeof WeakMap?WeakMap:Map;function Yo(t,e,n){(n=Ri(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ys||(ys=!0,bs=r),Fo(t,e)},n}function Vo(t,e,n){(n=Ri(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return Fo(t,e),r(i)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===_s?_s=new Set([this]):_s.add(this),Fo(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var $o=Math.ceil,Xo=Yt.ReactCurrentDispatcher,Ko=Yt.ReactCurrentOwner,Jo=0,Zo=8,Qo=16,ts=32,es=0,ns=1,rs=2,is=3,as=4,os=Jo,ss=null,us=null,cs=0,ls=es,fs=1073741823,hs=1073741823,ds=null,ps=!1,vs=0,gs=500,ms=null,ys=!1,bs=null,_s=null,ws=!1,xs=null,ks=90,Es=0,Ss=null,Os=0,As=null,Ts=0;function Cs(){return(os&(Qo|ts))!==Jo?1073741821-(ci()/10|0):0!==Ts?Ts:Ts=1073741821-(ci()/10|0)}function js(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var r=li();if(0===(4&e))return 99===r?1073741823:1073741822;if((os&Qo)!==Jo)return cs;if(null!==n)t=1073741821-25*(1+((1073741821-t+(0|n.timeoutMs||5e3)/10)/25|0));else switch(r){case 99:t=1073741823;break;case 98:t=1073741821-10*(1+((1073741821-t+15)/10|0));break;case 97:case 96:t=1073741821-25*(1+((1073741821-t+500)/25|0));break;case 95:t=1;break;default:throw o(Error(326))}return null!==ss&&t===cs&&--t,t}var Ds=0;function Rs(t,e){if(50<Os)throw Os=0,As=null,o(Error(185));if(null!==(t=Ms(t,e))){t.pingTime=0;var n=li();if(1073741823===e)if((os&Zo)!==Jo&&(os&(Qo|ts))===Jo)for(var r=zs(t,1073741823,!0);null!==r;)r=r(!0);else Ps(t,99,1073741823),os===Jo&&vi();else Ps(t,n,e);(4&os)===Jo||98!==n&&99!==n||(null===Ss?Ss=new Map([[t,e]]):(void 0===(n=Ss.get(t))||n>e)&&Ss.set(t,e))}}function Ms(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(e>i.firstPendingTime&&(i.firstPendingTime=e),0===(t=i.lastPendingTime)||e<t)&&(i.lastPendingTime=e),i}function Ps(t,e,n){if(t.callbackExpirationTime<n){var r=t.callbackNode;null!==r&&r!==ri&&Vr(r),t.callbackExpirationTime=n,1073741823===n?t.callbackNode=pi(Fs.bind(null,t,zs.bind(null,t,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-ci()}),t.callbackNode=di(e,Fs.bind(null,t,zs.bind(null,t,n)),r))}}function Fs(t,e,n){var r=t.callbackNode,i=null;try{return null!==(i=e(n))?Fs.bind(null,t,i):null}finally{null===i&&r===t.callbackNode&&(t.callbackNode=null,t.callbackExpirationTime=0)}}function Ns(){(os&(1|Qo|ts))===Jo&&(function(){if(null!==Ss){var t=Ss;Ss=null,t.forEach((function(t,e){pi(zs.bind(null,e,t))})),vi()}}(),Vs())}function Ls(t,e){var n=os;os|=1;try{return t(e)}finally{(os=n)===Jo&&vi()}}function Is(t,e,n,r){var i=os;os|=4;try{return hi(98,t.bind(null,e,n,r))}finally{(os=i)===Jo&&vi()}}function Bs(t,e){var n=os;os&=-2,os|=Zo;try{return t(e)}finally{(os=n)===Jo&&vi()}}function Us(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Ar(n)),null!==us)for(n=us.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&Br();break;case 3:sa(),Ur();break;case 5:ca(r);break;case 4:sa();break;case 13:case 19:Dr(da);break;case 10:Si(r)}n=n.return}ss=t,us=au(t.current,null),cs=e,ls=es,hs=fs=1073741823,ds=null,ps=!1}function zs(t,e,n){if((os&(Qo|ts))!==Jo)throw o(Error(327));if(t.firstPendingTime<e)return null;if(n&&t.finishedExpirationTime===e)return Gs.bind(null,t);if(Vs(),t!==ss||e!==cs)Us(t,e);else if(ls===is)if(ps)Us(t,e);else{var r=t.lastPendingTime;if(r<e)return zs.bind(null,t,r)}if(null!==us){r=os,os|=Qo;var i=Xo.current;if(null===i&&(i=Ja),Xo.current=Ja,n){if(1073741823!==e){var a=Cs();if(a<e)return os=r,ki(),Xo.current=i,zs.bind(null,t,a)}}else Ts=0;for(;;)try{if(n)for(;null!==us;)us=Ws(us);else for(;null!==us&&!$r();)us=Ws(us);break}catch(v){if(ki(),Ua(),null===(a=us)||null===a.return)throw Us(t,e),os=r,v;t:{var s=t,u=a.return,c=a,l=v,f=cs;if(c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var h=l,d=0!==(da.current&fa);l=u;do{var p;if((p=13===l.tag)&&(null!==l.memoizedState?p=!1:p=void 0!==(p=l.memoizedProps).fallback&&(!0!==p.unstable_avoidThisFallback||!d)),p){if(null===(u=l.updateQueue)?((u=new Set).add(h),l.updateQueue=u):u.add(h),0===(2&l.mode)){l.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((f=Ri(1073741823,null)).tag=2,Pi(c,f))),c.expirationTime=1073741823;break t}c=s,s=f,null===(d=c.pingCache)?(d=c.pingCache=new Go,u=new Set,d.set(h,u)):void 0===(u=d.get(h))&&(u=new Set,d.set(h,u)),u.has(s)||(u.add(s),c=Js.bind(null,c,h,s),h.then(c,c)),l.effectTag|=2048,l.expirationTime=f;break t}l=l.return}while(null!==l);l=Error((le(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+fe(c))}ls!==as&&(ls=ns),l=Mo(l,c),c=u;do{switch(c.tag){case 3:c.effectTag|=2048,c.expirationTime=f,Fi(c,f=Yo(c,l,f));break t;case 1:if(h=l,s=c.type,u=c.stateNode,0===(64&c.effectTag)&&("function"===typeof s.getDerivedStateFromError||null!==u&&"function"===typeof u.componentDidCatch&&(null===_s||!_s.has(u)))){c.effectTag|=2048,c.expirationTime=f,Fi(c,f=Vo(c,h,f));break t}}c=c.return}while(null!==c)}us=Hs(a)}if(os=r,ki(),Xo.current=i,null!==us)return zs.bind(null,t,e)}if(t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,function(t,e){var n=t.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=e)&&(di(97,(function(){return n._onComplete(),null})),!0)}(t,e))return null;switch(ss=null,ls){case es:throw o(Error(328));case ns:return(r=t.lastPendingTime)<e?zs.bind(null,t,r):n?Gs.bind(null,t):(Us(t,e),pi(zs.bind(null,t,e)),null);case rs:return 1073741823===fs&&!n&&10<(n=vs+gs-ci())?ps?(Us(t,e),zs.bind(null,t,e)):(r=t.lastPendingTime)<e?zs.bind(null,t,r):(t.timeoutHandle=Or(Gs.bind(null,t),n),null):Gs.bind(null,t);case is:if(!n){if(ps)return Us(t,e),zs.bind(null,t,e);if((n=t.lastPendingTime)<e)return zs.bind(null,t,n);if(1073741823!==hs?n=10*(1073741821-hs)-ci():1073741823===fs?n=0:(n=10*(1073741821-fs)-5e3,0>(n=(r=ci())-n)&&(n=0),(e=10*(1073741821-e)-r)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$o(n/1960))-n)&&(n=e)),10<n)return t.timeoutHandle=Or(Gs.bind(null,t),n),null}return Gs.bind(null,t);case as:return!n&&1073741823!==fs&&null!==ds&&(r=fs,0>=(e=0|(i=ds).busyMinDurationMs)?e=0:(n=0|i.busyDelayMs,e=(r=ci()-(10*(1073741821-r)-(0|i.timeoutMs||5e3)))<=n?0:n+e-r),10<e)?(t.timeoutHandle=Or(Gs.bind(null,t),e),null):Gs.bind(null,t);default:throw o(Error(329))}}function qs(t,e){t<fs&&1<t&&(fs=t),null!==e&&t<hs&&1<t&&(hs=t,ds=e)}function Ws(t){var e=Qs(t.alternate,t,cs);return t.memoizedProps=t.pendingProps,null===e&&(e=Hs(t)),Ko.current=null,e}function Hs(t){us=t;do{var e=us.alternate;if(t=us.return,0===(1024&us.effectTag)){t:{var n=e,r=cs,a=(e=us).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ir(e.type)&&Br();break;case 3:sa(),Ur(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==n&&null!==n.child||(so(e),e.effectTag&=-3),To(e);break;case 5:ca(e),r=aa(ia.current);var s=e.type;if(null!==n&&null!=e.stateNode)Co(n,e,s,a,r),n.ref!==e.ref&&(e.effectTag|=128);else if(a){var u=aa(na.current);if(so(e)){a=void 0,s=(n=e).stateNode;var c=n.type,l=n.memoizedProps;switch(s[P]=n,s[F]=l,c){case"iframe":case"object":case"embed":Fn("load",s);break;case"video":case"audio":for(var f=0;f<nt.length;f++)Fn(nt[f],s);break;case"source":Fn("error",s);break;case"img":case"image":case"link":Fn("error",s),Fn("load",s);break;case"form":Fn("reset",s),Fn("submit",s);break;case"details":Fn("toggle",s);break;case"input":ke(s,l),Fn("invalid",s),_r(r,"onChange");break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Fn("invalid",s),_r(r,"onChange");break;case"textarea":ir(s,l),Fn("invalid",s),_r(r,"onChange")}for(a in yr(c,l),f=null,l)l.hasOwnProperty(a)&&(u=l[a],"children"===a?"string"===typeof u?s.textContent!==u&&(f=["children",u]):"number"===typeof u&&s.textContent!==""+u&&(f=["children",""+u]):d.hasOwnProperty(a)&&null!=u&&_r(r,a));switch(c){case"input":Ht(s),Oe(s,l,!0);break;case"textarea":Ht(s),or(s);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(s.onclick=wr)}r=f,n.updateQueue=r,null!==r&&Oo(e)}else{l=s,n=a,c=e,f=9===r.nodeType?r:r.ownerDocument,u===sr.html&&(u=ur(l)),u===sr.html?"script"===l?((l=f.createElement("div")).innerHTML="<script><\/script>",f=l.removeChild(l.firstChild)):"string"===typeof n.is?f=f.createElement(l,{is:n.is}):(f=f.createElement(l),"select"===l&&(l=f,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):f=f.createElementNS(u,l),(l=f)[P]=c,l[F]=n,Ao(n=l,e,!1,!1),c=n;var h=r,p=br(s,a);switch(s){case"iframe":case"object":case"embed":Fn("load",c),r=a;break;case"video":case"audio":for(r=0;r<nt.length;r++)Fn(nt[r],c);r=a;break;case"source":Fn("error",c),r=a;break;case"img":case"image":case"link":Fn("error",c),Fn("load",c),r=a;break;case"form":Fn("reset",c),Fn("submit",c),r=a;break;case"details":Fn("toggle",c),r=a;break;case"input":ke(c,a),r=xe(c,a),Fn("invalid",c),_r(h,"onChange");break;case"option":r=er(c,a);break;case"select":c._wrapperState={wasMultiple:!!a.multiple},r=i({},a,{value:void 0}),Fn("invalid",c),_r(h,"onChange");break;case"textarea":ir(c,a),r=rr(c,a),Fn("invalid",c),_r(h,"onChange");break;default:r=a}yr(s,r),l=void 0,f=s,u=c;var v=r;for(l in v)if(v.hasOwnProperty(l)){var g=v[l];"style"===l?gr(u,g):"dangerouslySetInnerHTML"===l?null!=(g=g?g.__html:void 0)&&fr(u,g):"children"===l?"string"===typeof g?("textarea"!==f||""!==g)&&hr(u,g):"number"===typeof g&&hr(u,""+g):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(d.hasOwnProperty(l)?null!=g&&_r(h,l):null!=g&&_e(u,l,g,p))}switch(s){case"input":Ht(c),Oe(c,a,!1);break;case"textarea":Ht(c),or(c);break;case"option":null!=a.value&&c.setAttribute("value",""+we(a.value));break;case"select":r=c,c=a,r.multiple=!!c.multiple,null!=(l=c.value)?nr(r,!!c.multiple,l,!1):null!=c.defaultValue&&nr(r,!!c.multiple,c.defaultValue,!0);break;default:"function"===typeof r.onClick&&(c.onclick=wr)}Er(s,a)&&Oo(e),e.stateNode=n}null!==e.ref&&(e.effectTag|=128)}else if(null===e.stateNode)throw o(Error(166));break;case 6:if(n&&null!=e.stateNode)jo(n,e,n.memoizedProps,a);else{if("string"!==typeof a&&null===e.stateNode)throw o(Error(166));n=aa(ia.current),aa(na.current),so(e)?(r=e.stateNode,n=e.memoizedProps,r[P]=e,r.nodeValue!==n&&Oo(e)):(r=e,(n=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[P]=e,r.stateNode=n)}break;case 11:break;case 13:if(Dr(da),a=e.memoizedState,0!==(64&e.effectTag)){e.expirationTime=r;break t}r=null!==a,a=!1,null===n?so(e):(a=null!==(s=n.memoizedState),r||null===s||null!==(s=n.child.sibling)&&(null!==(c=e.firstEffect)?(e.firstEffect=s,s.nextEffect=c):(e.firstEffect=e.lastEffect=s,s.nextEffect=null),s.effectTag=8)),r&&!a&&0!==(2&e.mode)&&(null===n&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(da.current&fa)?ls===es&&(ls=rs):ls!==es&&ls!==rs||(ls=is)),(r||a)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:sa(),To(e);break;case 10:Si(e);break;case 9:case 14:break;case 17:Ir(e.type)&&Br();break;case 18:break;case 19:if(Dr(da),null===(a=e.memoizedState))break;if(s=0!==(64&e.effectTag),null===(c=a.rendering)){if(s)Do(a,!1);else if(ls!==es||null!==n&&0!==(64&n.effectTag))for(n=e.child;null!==n;){if(null!==(c=pa(n))){for(e.effectTag|=64,Do(a,!1),null!==(n=c.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),e.firstEffect=e.lastEffect=null,n=e.child;null!==n;)s=r,(a=n).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=c.childExpirationTime,a.expirationTime=c.expirationTime,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,s=c.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;Rr(da,da.current&la|ha),e=e.child;break t}n=n.sibling}}else{if(!s)if(null!==(n=pa(c))){if(e.effectTag|=64,s=!0,Do(a,!0),null===a.tail&&"hidden"===a.tailMode){null!==(r=n.updateQueue)&&(e.updateQueue=r,e.effectTag|=4),null!==(e=e.lastEffect=a.lastEffect)&&(e.nextEffect=null);break}}else ci()>a.tailExpiration&&1<r&&(e.effectTag|=64,s=!0,Do(a,!1),e.expirationTime=e.childExpirationTime=r-1);a.isBackwards?(c.sibling=e.child,e.child=c):(null!==(r=a.last)?r.sibling=c:e.child=c,a.last=c)}if(null!==a.tail){0===a.tailExpiration&&(a.tailExpiration=ci()+500),r=a.tail,a.rendering=r,a.tail=r.sibling,a.lastEffect=e.lastEffect,r.sibling=null,n=da.current,Rr(da,n=s?n&la|ha:n&la),e=r;break t}break;case 20:break;default:throw o(Error(156))}e=null}if(r=us,1===cs||1!==r.childExpirationTime){for(n=0,a=r.child;null!==a;)(s=a.expirationTime)>n&&(n=s),(c=a.childExpirationTime)>n&&(n=c),a=a.sibling;r.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(1024&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=us.firstEffect),null!==us.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=us.firstEffect),t.lastEffect=us.lastEffect),1<us.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=us:t.firstEffect=us,t.lastEffect=us))}else{if(null!==(e=Ro(us)))return e.effectTag&=1023,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=1024)}if(null!==(e=us.sibling))return e;us=t}while(null!==us);return ls===es&&(ls=as),null}function Gs(t){var e=li();return hi(99,Ys.bind(null,t,e)),null!==xs&&di(97,(function(){return Vs(),null})),null}function Ys(t,e){if(Vs(),(os&(Qo|ts))!==Jo)throw o(Error(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw o(Error(177));t.callbackNode=null,t.callbackExpirationTime=0;var i=n.expirationTime,a=n.childExpirationTime;if(i=a>i?a:i,t.firstPendingTime=i,i<t.lastPendingTime&&(t.lastPendingTime=i),t===ss&&(us=ss=null,cs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){a=os,os|=ts,Ko.current=null,xr=Pn;var s=Gn();if(Yn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{u.nodeType,f.nodeType}catch(B){u=null;break t}var h=0,d=-1,p=-1,v=0,g=0,m=s,y=null;e:for(;;){for(var b;m!==u||0!==l&&3!==m.nodeType||(d=h+l),m!==f||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(b=m.firstChild);)y=m,m=b;for(;;){if(m===s)break e;if(y===u&&++v===l&&(d=h),y===f&&++g===c&&(p=h),null!==(b=m.nextSibling))break;y=(m=y).parentNode}m=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;kr={focusedElem:s,selectionRange:u},Pn=!1,ms=i;do{try{for(;null!==ms;){if(0!==(256&ms.effectTag)){var _=ms.alternate;switch((s=ms).tag){case 0:case 11:case 15:Lo(ga,va,s);break;case 1:if(256&s.effectTag&&null!==_){var w=_.memoizedProps,x=_.memoizedState,k=s.stateNode,E=k.getSnapshotBeforeUpdate(s.elementType===s.type?w:yi(s.type,w),x);k.__reactInternalSnapshotBeforeUpdate=E}break;case 3:case 5:case 6:case 4:case 17:break;default:throw o(Error(163))}}ms=ms.nextEffect}}catch(B){if(null===ms)throw o(Error(330));Ks(ms,B),ms=ms.nextEffect}}while(null!==ms);ms=i;do{try{for(_=e;null!==ms;){var S=ms.effectTag;if(16&S&&hr(ms.stateNode,""),128&S){var O=ms.alternate;if(null!==O){var A=O.ref;null!==A&&("function"===typeof A?A(null):A.current=null)}}switch(14&S){case 2:zo(ms),ms.effectTag&=-3;break;case 6:zo(ms),ms.effectTag&=-3,Wo(ms.alternate,ms);break;case 4:Wo(ms.alternate,ms);break;case 8:qo(w=ms,_),w.return=null,w.child=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null;var T=w.alternate;null!==T&&(T.return=null,T.child=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null)}ms=ms.nextEffect}}catch(B){if(null===ms)throw o(Error(330));Ks(ms,B),ms=ms.nextEffect}}while(null!==ms);if(A=kr,O=Gn(),S=A.focusedElem,_=A.selectionRange,O!==S&&S&&S.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(S.ownerDocument.documentElement,S)){null!==_&&Yn(S)&&(O=_.start,void 0===(A=_.end)&&(A=O),"selectionStart"in S?(S.selectionStart=O,S.selectionEnd=Math.min(A,S.value.length)):(A=(O=S.ownerDocument||document)&&O.defaultView||window).getSelection&&(A=A.getSelection(),w=S.textContent.length,T=Math.min(_.start,w),_=void 0===_.end?T:Math.min(_.end,w),!A.extend&&T>_&&(w=_,_=T,T=w),w=Hn(S,T),x=Hn(S,_),w&&x&&(1!==A.rangeCount||A.anchorNode!==w.node||A.anchorOffset!==w.offset||A.focusNode!==x.node||A.focusOffset!==x.offset)&&((O=O.createRange()).setStart(w.node,w.offset),A.removeAllRanges(),T>_?(A.addRange(O),A.extend(x.node,x.offset)):(O.setEnd(x.node,x.offset),A.addRange(O))))),O=[];for(A=S;A=A.parentNode;)1===A.nodeType&&O.push({element:A,left:A.scrollLeft,top:A.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<O.length;S++)(A=O[S]).element.scrollLeft=A.left,A.element.scrollTop=A.top}kr=null,Pn=!!xr,xr=null,t.current=n,ms=i;do{try{for(S=r;null!==ms;){var C=ms.effectTag;if(36&C){var j=ms.alternate;switch(A=S,(O=ms).tag){case 0:case 11:case 15:Lo(ba,_a,O);break;case 1:var D=O.stateNode;if(4&O.effectTag)if(null===j)D.componentDidMount();else{var R=O.elementType===O.type?j.memoizedProps:yi(O.type,j.memoizedProps);D.componentDidUpdate(R,j.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var M=O.updateQueue;null!==M&&Bi(0,M,D);break;case 3:var P=O.updateQueue;if(null!==P){if(T=null,null!==O.child)switch(O.child.tag){case 5:T=O.child.stateNode;break;case 1:T=O.child.stateNode}Bi(0,P,T)}break;case 5:var F=O.stateNode;null===j&&4&O.effectTag&&(A=F,Er(O.type,O.memoizedProps)&&A.focus());break;case 6:case 4:case 12:break;case 13:case 19:case 17:case 20:break;default:throw o(Error(163))}}if(128&C){var N=ms.ref;if(null!==N){var L=ms.stateNode;switch(ms.tag){case 5:var I=L;break;default:I=L}"function"===typeof N?N(I):N.current=I}}512&C&&(ws=!0),ms=ms.nextEffect}}catch(B){if(null===ms)throw o(Error(330));Ks(ms,B),ms=ms.nextEffect}}while(null!==ms);ms=null,ii(),os=a}else t.current=n;if(ws)ws=!1,xs=t,Es=r,ks=e;else for(ms=i;null!==ms;)e=ms.nextEffect,ms.nextEffect=null,ms=e;if(0!==(e=t.firstPendingTime)?Ps(t,C=mi(C=Cs(),e),e):_s=null,"function"===typeof tu&&tu(n.stateNode,r),1073741823===e?t===As?Os++:(Os=0,As=t):Os=0,ys)throw ys=!1,t=bs,bs=null,t;return(os&Zo)!==Jo?null:(vi(),null)}function Vs(){if(null===xs)return!1;var t=xs,e=Es,n=ks;return xs=null,Es=0,ks=90,hi(97<n?97:n,$s.bind(null,t,e))}function $s(t){if((os&(Qo|ts))!==Jo)throw o(Error(331));var e=os;for(os|=ts,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:Lo(xa,va,n),Lo(va,wa,n)}}catch(r){if(null===t)throw o(Error(330));Ks(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return os=e,vi(),!0}function Xs(t,e,n){Pi(t,e=Yo(t,e=Mo(n,e),1073741823)),null!==(t=Ms(t,1073741823))&&Ps(t,99,1073741823)}function Ks(t,e){if(3===t.tag)Xs(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Xs(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===_s||!_s.has(r))){Pi(n,t=Vo(n,t=Mo(e,t),1073741823)),null!==(n=Ms(n,1073741823))&&Ps(n,99,1073741823);break}}n=n.return}}function Js(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),ss===t&&cs===n?ls===is||ls===rs&&1073741823===fs&&ci()-vs<gs?Us(t,cs):ps=!0:t.lastPendingTime<n||(0!==(e=t.pingTime)&&e<n||(t.pingTime=n,t.finishedExpirationTime===n&&(t.finishedExpirationTime=0,t.finishedWork=null),Ps(t,e=mi(e=Cs(),n),n)))}function Zs(t,e){var n=t.stateNode;null!==n&&n.delete(e),n=mi(n=Cs(),e=js(n,t,null)),null!==(t=Ms(t,e))&&Ps(t,n,e)}var Qs=void 0;Qs=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||Fr.current)lo=!0;else if(r<n){switch(lo=!1,e.tag){case 3:_o(e),uo();break;case 5:if(ua(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Ir(e.type)&&Wr(e);break;case 4:oa(e,e.stateNode.containerInfo);break;case 10:Ei(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?xo(t,e,n):(Rr(da,da.current&la),null!==(e=So(t,e,n))?e.sibling:null);Rr(da,da.current&la);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return Eo(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),Rr(da,da.current),!r)return null}return So(t,e,n)}}else lo=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=Lr(e,Pr.current),Ai(e,n),i=Ba(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,Ua(),Ir(r)){var a=!0;Wr(e)}else a=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&Wi(e,r,s,t),i.updater=Hi,e.stateNode=i,i._reactInternalFiber=e,$i(e,r,t,n),e=bo(null,e,r,!0,a,n)}else e.tag=0,fo(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)})),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(i),e.type=i,a=e.tag=function(t){if("function"===typeof t)return iu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===re)return 11;if(t===oe)return 14}return 2}(i),t=yi(i,t),a){case 0:e=mo(null,e,i,t,n);break;case 1:e=yo(null,e,i,t,n);break;case 11:e=ho(null,e,i,t,n);break;case 14:e=po(null,e,i,yi(i.type,t),r,n);break;default:throw o(Error(306),i,"")}return e;case 0:return r=e.type,i=e.pendingProps,mo(t,e,r,i=e.elementType===r?i:yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,yo(t,e,r,i=e.elementType===r?i:yi(r,i),n);case 3:if(_o(e),null===(r=e.updateQueue))throw o(Error(282));return i=null!==(i=e.memoizedState)?i.element:null,Ii(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(uo(),e=So(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(eo=Tr(e.stateNode.containerInfo.firstChild),to=e,i=no=!0),i?(e.effectTag|=2,e.child=ta(e,null,r,n)):(fo(t,e,r,n),uo()),e=e.child),e;case 5:return ua(e),null===t&&ao(e),r=e.type,i=e.pendingProps,a=null!==t?t.memoizedProps:null,s=i.children,Sr(r,i)?s=null:null!==a&&Sr(r,a)&&(e.effectTag|=16),go(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(fo(t,e,s,n),e=e.child),e;case 6:return null===t&&ao(e),null;case 13:return xo(t,e,n);case 4:return oa(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Qi(e,null,r,n):fo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ho(t,e,r,i=e.elementType===r?i:yi(r,i),n);case 7:return fo(t,e,e.pendingProps,n),e.child;case 8:case 12:return fo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,Ei(e,a=i.value),null!==s){var u=s.value;if(0===(a=en(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!Fr.current){e=So(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=Ri(n,null)).tag=2,Pi(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),Oi(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}fo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(a=e.pendingProps).children,Ai(e,n),r=r(i=Ti(i,a.unstable_observedBits)),e.effectTag|=1,fo(t,e,r,n),e.child;case 14:return a=yi(i=e.type,e.pendingProps),po(t,e,i,a=yi(i.type,a),r,n);case 15:return vo(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Ir(r)?(t=!0,Wr(e)):t=!1,Ai(e,n),Yi(e,r,i),$i(e,r,i,n),bo(null,e,r,!0,t,n);case 19:return Eo(t,e,n)}throw o(Error(156))};var tu=null,eu=null;function nu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ru(t,e,n,r){return new nu(t,e,n,r)}function iu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function au(t,e){var n=t.alternate;return null===n?((n=ru(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ou(t,e,n,r,i,a){var s=2;if(r=t,"function"===typeof t)iu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case Jt:return su(n.children,i,a,e);case ne:s=8,i|=7;break;case Zt:s=8,i|=1;break;case Qt:return(t=ru(12,n,e,8|i)).elementType=Qt,t.type=Qt,t.expirationTime=a,t;case ie:return(t=ru(13,n,e,i)).type=ie,t.elementType=ie,t.expirationTime=a,t;case ae:return(t=ru(19,n,e,i)).elementType=ae,t.expirationTime=a,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case te:s=10;break t;case ee:s=9;break t;case re:s=11;break t;case oe:s=14;break t;case se:s=16,r=null;break t}throw o(Error(130),null==t?t:typeof t,"")}return(e=ru(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=a,e}function su(t,e,n,r){return(t=ru(7,t,r,e)).expirationTime=n,t}function uu(t,e,n){return(t=ru(6,t,null,e)).expirationTime=n,t}function cu(t,e,n){return(e=ru(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function fu(t,e,n){return t=new lu(t,e,n),e=ru(3,null,null,2===e?7:1===e?3:0),t.current=e,e.stateNode=t}function hu(t,e,n,r,i,a){var s=e.current;t:if(n){e:{if(2!==on(n=n._reactInternalFiber)||1!==n.tag)throw o(Error(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ir(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw o(Error(171))}if(1===n.tag){var c=n.type;if(Ir(c)){n=qr(n,c,u);break t}}n=u}else n=Mr;return null===e.context?e.context=n:e.pendingContext=n,e=a,(i=Ri(r,i)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Pi(s,i),Rs(s,r),r}function du(t,e,n,r){var i=e.current,a=Cs(),o=zi.suspense;return hu(t,e,n,i=js(a,i,o),o,r)}function pu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function vu(t){var e=1073741821-25*(1+((1073741821-Cs()+500)/25|0));e<=Ds&&--e,this._expirationTime=Ds=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function gu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function mu(t,e,n){this._internalRoot=fu(t,e,n)}function yu(t,e){this._internalRoot=fu(t,2,e)}function bu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function _u(t,e,n,r,i){var a=n._reactRootContainer,o=void 0;if(a){if(o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var t=pu(o);s.call(t)}}du(e,o,t,i)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new mu(t,0,e)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var t=pu(o);u.call(t)}}Bs((function(){du(e,o,t,i)}))}return pu(o)}function wu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!bu(e))throw o(Error(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Kt,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}At=function(t,e,n){switch(e){case"input":if(Se(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=B(r);if(!i)throw o(Error(90));Gt(r),Se(r,i)}}}break;case"textarea":ar(t,n);break;case"select":null!=(e=n.value)&&nr(t,!!n.multiple,e,!1)}},vu.prototype.render=function(t){if(!this._defer)throw o(Error(250));this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new gu;return hu(t,e,null,n,null,r._onCommit),r},vu.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},vu.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(!this._defer||null===e)throw o(Error(251));if(this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;if(null===r)throw o(Error(251));r._next=i._next,this._next=e,t.firstBatch=this}if(this._defer=!1,e=n,(os&(Qo|ts))!==Jo)throw o(Error(253));pi(zs.bind(null,t,e)),vi(),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},vu.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},gu.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},gu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];if("function"!==typeof n)throw o(Error(191),n);n()}}},yu.prototype.render=mu.prototype.render=function(t,e){var n=this._internalRoot,r=new gu;return null!==(e=void 0===e?null:e)&&r.then(e),du(t,n,null,r._onCommit),r},yu.prototype.unmount=mu.prototype.unmount=function(t){var e=this._internalRoot,n=new gu;return null!==(t=void 0===t?null:t)&&n.then(t),du(null,e,null,n._onCommit),n},yu.prototype.createBatch=function(){var t=new vu(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},Mt=Ls,Pt=Is,Ft=Ns,Nt=function(t,e){var n=os;os|=2;try{return t(e)}finally{(os=n)===Jo&&vi()}};var xu={createPortal:wu,findDOMNode:function(t){if(null==t)t=null;else if(1!==t.nodeType){var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw o(Error(188));throw o(Error(268),Object.keys(t))}t=null===(t=un(e))?null:t.stateNode}return t},hydrate:function(t,e,n){if(!bu(e))throw o(Error(200));return _u(null,t,e,!0,n)},render:function(t,e,n){if(!bu(e))throw o(Error(200));return _u(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){if(!bu(n))throw o(Error(200));if(null==t||void 0===t._reactInternalFiber)throw o(Error(38));return _u(t,e,n,!1,r)},unmountComponentAtNode:function(t){if(!bu(t))throw o(Error(40));return!!t._reactRootContainer&&(Bs((function(){_u(null,null,t,!1,(function(){t._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return wu.apply(void 0,arguments)},unstable_batchedUpdates:Ls,unstable_interactiveUpdates:function(t,e,n,r){return Ns(),Is(t,e,n,r)},unstable_discreteUpdates:Is,unstable_flushDiscreteUpdates:Ns,flushSync:function(t,e){if((os&(Qo|ts))!==Jo)throw o(Error(187));var n=os;os|=1;try{return hi(99,t.bind(null,e))}finally{os=n,vi()}},unstable_createRoot:function(t,e){if(!bu(t))throw o(Error(299),"unstable_createRoot");return new yu(t,null!=e&&!0===e.hydrate)},unstable_createSyncRoot:function(t,e){if(!bu(t))throw o(Error(299),"unstable_createRoot");return new mu(t,1,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=os;os|=1;try{hi(99,t)}finally{(os=e)===Jo&&vi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[L,I,B,D.injectEventPluginsByName,h,G,function(t){A(t,H)},Dt,Rt,Bn,j,Vs,{current:!1}]}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);tu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},eu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}})(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=un(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:N,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var ku={default:xu},Eu=ku&&xu||ku;t.exports=Eu.default||Eu},function(t,e,n){"use strict";t.exports=n(242)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e.unstable_now=void 0,e.unstable_forceFrameRate=void 0,"undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}};e.unstable_now=function(){return Date.now()},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},a=function(){clearTimeout(c)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,d=window.setTimeout,p=window.clearTimeout,v=window.requestAnimationFrame,g=window.cancelAnimationFrame;"undefined"!==typeof console&&("function"!==typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),e.unstable_now="object"===typeof f&&"function"===typeof f.now?function(){return f.now()}:function(){return h.now()};var m=!1,y=null,b=-1,_=-1,w=33.33,x=-1,k=-1,E=0,S=!1;o=function(){return e.unstable_now()>=E},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<t?(w=Math.floor(1e3/t),S=!0):(w=33.33,S=!1)};var O=function(){if(null!==y){var t=e.unstable_now(),n=0<E-t;try{y(n,t)||(y=null)}catch(r){throw T.postMessage(null),r}}},A=new MessageChannel,T=A.port2;A.port1.onmessage=O;r=function(t){y=t,m||(m=!0,v((function(t){!function t(n){if(null===y)k=x=-1,m=!1;else{m=!0,v((function(e){p(b),t(e)}));if(b=d((function t(){E=e.unstable_now()+w/2,O(),b=d(t,3*w)}),3*w),-1!==x&&.1<n-x){var r=n-x;!S&&-1!==k&&r<w&&k<w&&(8.33>(w=r<k?k:r)&&(w=8.33)),k=r}x=n,E=n+w,T.postMessage(null)}}(t)})))},i=function(t,n){_=d((function(){t(e.unstable_now())}),n)},a=function(){p(_),_=-1}}var C=null,j=null,D=null,R=3,M=!1,P=!1,F=!1;function N(t,e){var n=t.next;if(n===t)C=null;else{t===C&&(C=n);var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,n=t.callback,r=R;var i=D;R=t.priorityLevel,D=t;try{var a=t.expirationTime<=e;switch(R){case 1:var o=n(a);break;case 2:case 3:case 4:o=n(a);break;case 5:o=n(a)}}catch(s){throw s}finally{R=r,D=i}if("function"===typeof o)if(e=t.expirationTime,t.callback=o,null===C)C=t.next=t.previous=t;else{o=null,a=C;do{if(e<=a.expirationTime){o=a;break}a=a.next}while(a!==C);null===o?o=C:o===C&&(C=t),(e=o.previous).next=o.previous=t,t.next=o,t.previous=e}}function L(t){if(null!==j&&j.startTime<=t)do{var e=j,n=e.next;if(e===n)j=null;else{j=n;var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,z(e,e.expirationTime)}while(null!==j&&j.startTime<=t)}function I(t){F=!1,L(t),P||(null!==C?(P=!0,r(B)):null!==j&&i(I,j.startTime-t))}function B(t,n){P=!1,F&&(F=!1,a()),L(n),M=!0;try{if(t){if(null!==C)do{N(C,n),L(n=e.unstable_now())}while(null!==C&&!o())}else for(;null!==C&&C.expirationTime<=n;)N(C,n),L(n=e.unstable_now());return null!==C||(null!==j&&i(I,j.startTime-n),!1)}finally{M=!1}}function U(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function z(t,e){if(null===C)C=t.next=t.previous=t;else{var n=null,r=C;do{if(e<r.expirationTime){n=r;break}r=r.next}while(r!==C);null===n?n=C:n===C&&(C=t),(e=n.previous).next=n.previous=t,t.next=n,t.previous=e}}var q=s;e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=R;R=t;try{return e()}finally{R=n}},e.unstable_next=function(t){switch(R){case 1:case 2:case 3:var e=3;break;default:e=R}var n=R;R=e;try{return t()}finally{R=n}},e.unstable_scheduleCallback=function(t,n,o){var s=e.unstable_now();if("object"===typeof o&&null!==o){var u=o.delay;u="number"===typeof u&&0<u?s+u:s,o="number"===typeof o.timeout?o.timeout:U(t)}else o=U(t),u=s;if(t={callback:n,priorityLevel:t,startTime:u,expirationTime:o=u+o,next:null,previous:null},u>s){if(o=u,null===j)j=t.next=t.previous=t;else{n=null;var c=j;do{if(o<c.startTime){n=c;break}c=c.next}while(c!==j);null===n?n=j:n===j&&(j=t),(o=n.previous).next=n.previous=t,t.next=n,t.previous=o}null===C&&j===t&&(F?a():F=!0,i(I,u-s))}else z(t,o),P||M||(P=!0,r(B));return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(t===e)t===C?C=null:t===j&&(j=null);else{t===C?C=e:t===j&&(j=e);var n=t.previous;n.next=e,e.previous=n}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var e=R;return function(){var n=R;R=e;try{return t.apply(this,arguments)}finally{R=n}}},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_shouldYield=function(){var t=e.unstable_now();return L(t),null!==D&&null!==C&&C.startTime<=t&&C.expirationTime<D.expirationTime||o()},e.unstable_requestPaint=q,e.unstable_continueExecution=function(){P||M||(P=!0,r(B))},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return C}},function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(244),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(o){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c="object"===typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={},g={};g[o]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(D([])));y&&y!==r&&i.call(y,o)&&(g=y);var b=E.prototype=x.prototype=Object.create(g);k.prototype=b.constructor=E,E.constructor=k,E[u]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},S(O.prototype),O.prototype[s]=function(){return this},l.AsyncIterator=O,l.async=function(t,e,n,r){var i=new O(_(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},S(b),b[u]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:D(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function _(t,e,n,r){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),o=new j(r||[]);return a._invoke=function(t,e,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=w(t,e,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function x(){}function k(){}function E(){}function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function O(t){var e;this._invoke=function(n,r){function a(){return new Promise((function(e,a){!function e(n,r,a,o){var s=w(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(c).then((function(t){u.value=t,a(u)}),o)}o(s.arg)}(n,r,e,a)}))}return e=e?e.then(a,a):a()}}function A(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,A(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=w(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function D(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){n(133),n(51),n(66),n(256),n(264),n(265),t.exports=n(18).Promise},function(t,e,n){var r=n(91),i=n(92);t.exports=function(t){return function(e,n){var a,o,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(95),i=n(53),a=n(65),o={};n(39)(o,n(23)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var r=n(33),i=n(28),a=n(96);t.exports=n(36)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,u=0;s>u;)r.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var r=n(54);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(45),i=n(97),a=n(251);t.exports=function(t){return function(e,n,o){var s,u=r(e),c=i(u.length),l=a(o,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(91),i=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):a(t,e)}},function(t,e,n){var r=n(40),i=n(101),a=n(98)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){"use strict";var r=n(254),i=n(255),a=n(44),o=n(45);t.exports=n(134)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,i,a,o,s=n(52),u=n(21),c=n(43),l=n(102),f=n(27),h=n(35),d=n(62),p=n(257),v=n(258),g=n(141),m=n(142).set,y=n(260)(),b=n(104),_=n(143),w=n(261),x=n(144),k=u.TypeError,E=u.process,S=E&&E.versions,O=S&&S.v8||"",A=u.Promise,T="process"==l(E),C=function(){},j=i=b.f,D=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(23)("species")]=function(t){t(C,C)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e&&0!==O.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(r){}}(),R=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},M=function(t,e){if(!t._n){t._n=!0;var n=t._c;y((function(){for(var r=t._v,i=1==t._s,a=0,o=function(e){var n,a,o,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&N(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),o=!0)),n===e.promise?c(k("Promise-chain cycle")):(a=R(n))?a.call(n,u,c):u(n)):c(r)}catch(f){l&&!o&&l.exit(),c(f)}};n.length>a;)o(n[a++]);t._c=[],t._n=!1,e&&!t._h&&P(t)}))}},P=function(t){m.call(u,(function(){var e,n,r,i=t._v,a=F(t);if(a&&(e=_((function(){T?E.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=T||F(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){m.call(u,(function(){var e;T?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},L=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),M(e,!0))},I=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(n=R(e))?y((function(){var i={_w:r,_d:!1};try{n.call(e,c(t,i,1),c(L,i,1))}catch(a){L.call(i,a)}})):(r._v=e,r._s=1,M(r,!1))}catch(i){L.call({_w:r,_d:!1},i)}}};D||(A=function(t){p(this,A,"Promise","_h"),d(t),r.call(this);try{t(c(I,this,1),c(L,this,1))}catch(e){L.call(this,e)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(262)(A.prototype,{then:function(t,e){var n=j(g(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new r;this.promise=t,this.resolve=c(I,t,1),this.reject=c(L,t,1)},b.f=j=function(t){return t===A||t===o?new a(t):i(t)}),f(f.G+f.W+f.F*!D,{Promise:A}),n(65)(A,"Promise"),n(263)("Promise"),o=n(18).Promise,f(f.S+f.F*!D,"Promise",{reject:function(t){var e=j(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!D),"Promise",{resolve:function(t){return x(s&&this===o?A:this,t)}}),f(f.S+f.F*!(D&&n(145)((function(t){A.all(t).catch(C)}))),"Promise",{all:function(t){var e=this,n=j(e),r=n.resolve,i=n.reject,a=_((function(){var n=[],a=0,o=1;v(t,!1,(function(t){var s=a++,u=!1;n.push(void 0),o++,e.resolve(t).then((function(t){u||(u=!0,n[s]=t,--o||r(n))}),i)})),--o||r(n)}));return a.e&&i(a.v),n.promise},race:function(t){var e=this,n=j(e),r=n.reject,i=_((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(43),i=n(139),a=n(140),o=n(28),s=n(97),u=n(103),c={},l={};(e=t.exports=function(t,e,n,f,h){var d,p,v,g,m=h?function(){return t}:u(t),y=r(n,f,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(a(m)){for(d=s(t.length);d>b;b++)if((g=e?y(o(p=t[b])[0],p[1]):y(t[b]))===c||g===l)return g}else for(v=m.call(t);!(p=v.next()).done;)if((g=i(v,y,p.value,e))===c||g===l)return g}).BREAK=c,e.RETURN=l},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(21),i=n(142).set,a=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,u="process"==n(54)(o);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=o.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(a){throw t?n():e=void 0,a}}e=void 0,r&&r.enter()};if(u)n=function(){o.nextTick(c)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,h=document.createTextNode("");new a(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(21).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){var r=n(39);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(21),i=n(18),a=n(33),o=n(36),s=n(23)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];o&&e&&!e[s]&&a.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(27),i=n(18),a=n(21),o=n(141),s=n(144);r(r.P+r.R,"Promise",{finally:function(t){var e=o(this,i.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var r=n(27),i=n(104),a=n(143);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCommaAccessToken=e.logOut=e.isAuthed=void 0;var r=s(n(25)),i=s(n(26)),a=(e.logOut=function(){var t=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.removeItem("authorization"),!u){t.next=4;break}return t.next=4,o.default.removeItem("authorization");case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getCommaAccessToken=function(){var t=(0,i.default)(r.default.mark((function t(){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c()){t.next=11;break}return t.prev=2,t.next=5,o.default.getItem("authorization");case 5:n=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),u=!1;case 11:if(!n){t.next=16;break}if(e.isAuthed=!0,!u){t.next=16;break}return t.next=16,o.default.setItem("authorization",n);case 16:return t.abrupt("return",n);case 17:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}());e.getTokenInternal=c,e.setCommaAccessToken=function(t){return localStorage.setItem("authorization",t),a()};var o=s(n(268));function s(t){return t&&t.__esModule?t:{default:t}}e.isAuthed=!1;var u=!0;function c(){return"undefined"!==typeof localStorage&&localStorage.authorization?localStorage.authorization:null}},function(t,e,n){(function(e){var n;t.exports=function t(e,r,i){function a(s,u){if(!r[s]){if(!e[s]){if(!u&&"function"==typeof n&&n)return n(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,(function(t){var n=e[s][1][t];return a(n||t)}),l,l.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(t,n,r){(function(t){"use strict";var e,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,o=new i(l),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),e=function(){s.data=a=++a%2}}else if(t.setImmediate||"undefined"===typeof t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,e=function(){u.port2.postMessage(0)}}var c=[];function l(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}n.exports=function(t){1!==c.push(t)||r||e()}}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function i(){}var a={},o=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(t){if("function"!==typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function l(t,e,n){this.promise=t,"function"===typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(t,e,n){r((function(){var r;try{r=e(n)}catch(i){return a.reject(t,i)}r===t?a.reject(t,new TypeError("Cannot resolve promise with itself")):a.resolve(t,r)}))}function h(t){var e=t&&t.then;if(t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,a.reject(t,e))}function i(e){n||(n=!0,a.resolve(t,e))}var o=p((function(){e(i,r)}));"error"===o.status&&r(o.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!==typeof t&&this.state===s||"function"!==typeof e&&this.state===o)return this;var n=new this.constructor(i);return this.state!==u?f(n,this.state===s?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){a.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){a.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},a.resolve=function(t,e){var n=p(h,e);if("error"===n.status)return a.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=s,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},a.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:a.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return a.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,u=-1,c=new this(i);++u<n;)l(t[u],u);return c;function l(t,i){e.resolve(t).then((function(t){o[i]=t,++s!==n||r||(r=!0,a.resolve(c,o))}),(function(t){r||(r=!0,a.reject(c,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o,s=-1,u=new this(i);++s<n;)o=t[s],e.resolve(o).then((function(t){r||(r=!0,a.resolve(u,t))}),(function(t){r||(r=!0,a.reject(u,t))}));return u}},{1:1}],3:[function(t,n,r){(function(e){"use strict";"function"!==typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function a(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"===typeof Promise&&t(3);var o=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function u(t,e,n){"function"===typeof e&&t.then(e),"function"===typeof n&&t.catch(n)}function c(t){return"string"!==typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function l(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",h=void 0,d={},p=Object.prototype.toString,v="readonly",g="readwrite";function m(t){return"boolean"===typeof h?o.resolve(h):function(t){return new o((function(e){var n=t.transaction(f,g),r=a([""]);n.objectStore(f).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return h=t}))}function y(t){var e=d[t.name],n={};n.promise=new o((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function b(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function _(t,e){var n=d[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function w(t,e){return new o((function(n,r){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);y(t),t.db.close()}var a=[t.name];e&&a.push(t.version);var o=i.open.apply(i,a);e&&(o.onupgradeneeded=function(e){var n=o.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(f)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(t){t.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),b(t)}}))}function x(t){return w(t,!1)}function k(t){return w(t,!0)}function E(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var a=t.db.version+1;a>t.version&&(t.version=a)}return!0}return!1}function S(t){return a([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}(atob(t.data))],{type:t.type})}function O(t){return t&&t.__local_forage_encoded_blob}function A(t){var e=this,n=e._initReady().then((function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return u(n,t,t),n}function T(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(a){if(r>0&&(!t.db||"InvalidStateError"===a.name||"NotFoundError"===a.name))return o.resolve().then((function(){if(!t.db||"NotFoundError"===a.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)})).then((function(){return function(t){y(t);for(var e=d[t.name],n=e.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,x(t).then((function(e){return t.db=e,E(t)?k(t):e})).then((function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(e){throw _(t,e),e}))}(t).then((function(){T(t,e,n,r-1)}))})).catch(n);n(a)}}var C={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=d[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=A);var a=[];function s(){return o.resolve()}for(var u=0;u<i.forages.length;u++){var c=i.forages[u];c!==e&&a.push(c._initReady().catch(s))}var l=i.forages.slice(0);return o.all(a).then((function(){return n.db=i.db,x(n)})).then((function(t){return n.db=t,E(n,e._defaultConfig.version)?k(n):t})).then((function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<l.length;r++){var a=l[r];a!==e&&(a._dbInfo.db=n.db,a._dbInfo.version=n.version)}}))},_support:function(){try{if(!i)return!1;var t="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}(),iterate:function(t,e){var n=this,r=new o((function(e,r){n.ready().then((function(){T(n._dbInfo,v,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;O(r)&&(r=S(r));var i=t(r,n.key,s++);void 0!==i?e(i):n.continue()}else e()},o.onerror=function(){r(o.error)}}catch(u){r(u)}}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=c(t);var r=new o((function(e,r){n.ready().then((function(){T(n._dbInfo,v,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),O(t)&&(t=S(t)),e(t)},o.onerror=function(){r(o.error)}}catch(s){r(s)}}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=c(t);var i=new o((function(n,i){var a;r.ready().then((function(){return a=r._dbInfo,"[object Blob]"===p.call(e)?m(a.db).then((function(t){return t?e:(n=e,new o((function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):e})).then((function(e){T(r._dbInfo,g,(function(a,o){if(a)return i(a);try{var s=o.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var u=s.put(e,t);o.oncomplete=function(){void 0===e&&(e=null),n(e)},o.onabort=o.onerror=function(){var t=u.error?u.error:u.transaction.error;i(t)}}catch(c){i(c)}}))})).catch(i)}));return s(i,n),i},removeItem:function(t,e){var n=this;t=c(t);var r=new o((function(e,r){n.ready().then((function(){T(n._dbInfo,g,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).delete(t);a.oncomplete=function(){e()},a.onerror=function(){r(o.error)},a.onabort=function(){var t=o.error?o.error:o.transaction.error;r(t)}}catch(s){r(s)}}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new o((function(t,n){e.ready().then((function(){T(e._dbInfo,g,(function(r,i){if(r)return n(r);try{var a=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(o){n(o)}}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new o((function(t,n){e.ready().then((function(){T(e._dbInfo,v,(function(r,i){if(r)return n(r);try{var a=i.objectStore(e._dbInfo.storeName).count();a.onsuccess=function(){t(a.result)},a.onerror=function(){n(a.error)}}catch(o){n(o)}}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new o((function(e,r){t<0?e(null):n.ready().then((function(){T(n._dbInfo,v,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName),s=!1,u=o.openCursor();u.onsuccess=function(){var n=u.result;n?0===t?e(n.key):s?e(n.key):(s=!0,n.advance(t)):e(null)},u.onerror=function(){r(u.error)}}catch(c){r(c)}}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new o((function(t,n){e.ready().then((function(){T(e._dbInfo,v,(function(r,i){if(r)return n(r);try{var a=i.objectStore(e._dbInfo.storeName).openCursor(),o=[];a.onsuccess=function(){var e=a.result;e?(o.push(e.key),e.continue()):t(o)},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=l.apply(this,arguments);var n,r=this.config();if((t="function"!==typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName),t.name){var a=t.name===r.name&&this._dbInfo.db?o.resolve(this._dbInfo.db):x(t).then((function(e){var n=d[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));n=t.storeName?a.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;y(t);var r=d[t.name],a=r.forages;e.close();for(var s=0;s<a.length;s++){var u=a[s];u._dbInfo.db=null,u._dbInfo.version=n}return new o((function(e,r){var a=i.open(t.name,n);a.onerror=function(t){a.result.close(),r(t)},a.onupgradeneeded=function(){a.result.deleteObjectStore(t.storeName)},a.onsuccess=function(){var t=a.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<a.length;e++){var n=a[e];n._dbInfo.db=t,b(n._dbInfo)}})).catch((function(e){throw(_(t,e)||o.resolve()).catch((function(){})),e}))}})):a.then((function(e){y(t);var n=d[t.name],r=n.forages;e.close();for(var a=0;a<r.length;a++)r[a]._dbInfo.db=null;return new o((function(e,n){var r=i.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)b(r[e]._dbInfo)})).catch((function(e){throw(_(t,e)||o.resolve()).catch((function(){})),e}))}))}else n=o.reject("Invalid arguments");return s(n,e),n}},j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D="~~local_forage_type~",R=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",P=M.length,F="arbf",N="blob",L="si08",I="ui08",B="uic8",U="si16",z="si32",q="ur16",W="ui32",H="fl32",G="fl64",Y=P+F.length,V=Object.prototype.toString;function $(t){var e,n,r,i,a,o=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(e=0;e<s;e+=4)n=j.indexOf(t[e]),r=j.indexOf(t[e+1]),i=j.indexOf(t[e+2]),a=j.indexOf(t[e+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&a;return c}function X(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=j[n[e]>>2],r+=j[(3&n[e])<<4|n[e+1]>>4],r+=j[(15&n[e+1])<<2|n[e+2]>>6],r+=j[63&n[e+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var K={serialize:function(t,e){var n="";if(t&&(n=V.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===V.call(t.buffer))){var r,i=M;t instanceof ArrayBuffer?(r=t,i+=F):(r=t.buffer,"[object Int8Array]"===n?i+=L:"[object Uint8Array]"===n?i+=I:"[object Uint8ClampedArray]"===n?i+=B:"[object Int16Array]"===n?i+=U:"[object Uint16Array]"===n?i+=q:"[object Int32Array]"===n?i+=z:"[object Uint32Array]"===n?i+=W:"[object Float32Array]"===n?i+=H:"[object Float64Array]"===n?i+=G:e(new Error("Failed to get type for BinaryArray"))),e(i+X(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=D+t.type+"~"+X(this.result);e(M+N+n)},a.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(o){console.error("Couldn't convert value into a JSON string: ",t),e(null,o)}},deserialize:function(t){if(t.substring(0,P)!==M)return JSON.parse(t);var e,n=t.substring(Y),r=t.substring(P,Y);if(r===N&&R.test(n)){var i=n.match(R);e=i[1],n=n.substring(i[0].length)}var o=$(n);switch(r){case F:return o;case N:return a([o],{type:e});case L:return new Int8Array(o);case I:return new Uint8Array(o);case B:return new Uint8ClampedArray(o);case U:return new Int16Array(o);case q:return new Uint16Array(o);case z:return new Int32Array(o);case W:return new Uint32Array(o);case H:return new Float32Array(o);case G:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:$,bufferToString:X};function J(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function Z(t,e,n,r,i,a){t.executeSql(n,r,i,(function(t,o){o.code===o.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?a(t,o):J(t,e,(function(){t.executeSql(n,r,i,a)}),a)}),a):a(t,o)}),a)}function Q(t,e,n,r){var i=this;t=c(t);var a=new o((function(a,o){i.ready().then((function(){void 0===e&&(e=null);var s=e,u=i._dbInfo;u.serializer.serialize(e,(function(e,c){c?o(c):u.db.transaction((function(n){Z(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){a(s)}),(function(t,e){o(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void a(Q.apply(i,[t,s,n,r-1]));o(e)}}))}))})).catch(o)}));return s(a,n),a}var tt={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!==typeof t[r]?t[r].toString():t[r];var i=new o((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction((function(i){J(i,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=K,i},_support:"function"===typeof openDatabase,iterate:function(t,e){var n=this,r=new o((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Z(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var a=r.rows,o=a.length,s=0;s<o;s++){var u=a.item(s),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=t(c,u.key,s+1)))return void e(c)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=c(t);var r=new o((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Z(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){return Q.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=c(t);var r=new o((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Z(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new o((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){Z(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new o((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){Z(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new o((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Z(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new o((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){Z(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=l.apply(this,arguments);var n=this.config();(t="function"!==typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return s(r=t.name?new o((function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(function(t){return new o((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],a=0;a<r.rows.length;a++)i.push(r.rows.item(a).name);e({db:t,storeNames:i})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}(r))})).then((function(t){return new o((function(e,n){t.db.transaction((function(r){function i(t){return new o((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var a=[],s=0,u=t.storeNames.length;s<u;s++)a.push(i(t.storeNames[s]));o.all(a).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):o.reject("Invalid arguments"),e),r}};function et(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function nt(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var rt={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=et(t,this._defaultConfig),nt()?(this._dbInfo=e,e.serializer=K,o.resolve()):o.reject()},_support:function(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,a=localStorage.length,o=1,s=0;s<a;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,u.substring(i),o++)))return c}}}));return s(r,e),r},getItem:function(t,e){var n=this;t=c(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=c(t);var i=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new o((function(i,a){var o=r._dbInfo;o.serializer.serialize(e,(function(e,r){if(r)a(r);else try{localStorage.setItem(o.keyPrefix+t,e),i(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||a(s),a(s)}}))}))}));return s(i,n),i},removeItem:function(t,e){var n=this;t=c(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(r,e),r},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(i){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return s(r,e),r},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var a=localStorage.key(i);0===a.indexOf(t.keyPrefix)&&r.push(a.substring(t.keyPrefix.length))}return r}));return s(n,t),n},dropInstance:function(t,e){if(e=l.apply(this,arguments),!(t="function"!==typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return s(r=t.name?new o((function(e){t.storeName?e(et(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):o.reject("Invalid arguments"),e),r}},it=function(t,e){for(var n,r,i=t.length,a=0;a<i;){if((n=t[a])===(r=e)||"number"===typeof n&&"number"===typeof r&&isNaN(n)&&isNaN(r))return!0;a++}return!1},at=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},ot={},st={},ut={INDEXEDDB:C,WEBSQL:tt,LOCALSTORAGE:rt},ct=[ut.INDEXEDDB._driver,ut.WEBSQL._driver,ut.LOCALSTORAGE._driver],lt=["dropInstance"],ft=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(lt),ht={description:"",driver:ct.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function dt(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function pt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(at(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var vt=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ut)if(ut.hasOwnProperty(n)){var r=ut[n],i=r._driver;this[n]=i,ot[i]||this.defineDriver(r)}this._defaultConfig=pt({},ht),this._config=pt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===("undefined"===typeof t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!==typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"===typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new o((function(e,n){try{var r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(i);for(var a=ft.concat("_initStorage"),u=0,c=a.length;u<c;u++){var l=a[u];if((!it(lt,l)||t[l])&&"function"!==typeof t[l])return void n(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=o.reject(e);return s(n,arguments[arguments.length-1]),n}},n=0,r=lt.length;n<r;n++){var i=lt[n];t[i]||(t[i]=e(i))}}();var f=function(n){ot[r]&&console.info("Redefining LocalForage driver: "+r),ot[r]=t,st[r]=n,e()};"_support"in t?t._support&&"function"===typeof t._support?t._support().then(f,n):f(!!t._support):f(!0)}catch(h){n(h)}}));return u(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=ot[t]?o.resolve(ot[t]):o.reject(new Error("Driver not found."));return u(r,e,n),r},t.prototype.getSerializer=function(t){var e=o.resolve(K);return u(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return u(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;at(t)||(t=[t]);var i=this._getSupportedDrivers(t);function a(){r._config.driver=r.driver()}function s(t){return r._extend(t),a(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return o.resolve()})):o.resolve();return this._driverSet=c.then((function(){var t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,a(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}a();var u=new Error("No available storage method found.");return r._driverSet=o.reject(u),r._driverSet}()}}(i)}))})).catch((function(){a();var t=new Error("No available storage method found.");return r._driverSet=o.reject(t),r._driverSet})),u(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!st[t]},t.prototype._extend=function(t){pt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ft.length;t<e;t++)dt(this,ft[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=vt},{3:3}]},{},[4])(4)}).call(this,n(19))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oauthRedirectLink=e.OAUTH_PARAMS=e.REDIRECT_URI=e.GOOGLE_URL_ROOT=e.GOOGLE_CLIENT_ID=e.GOOGLE_AUTH_ENDPOINT=void 0;var r=a(n(146)),i=a(n(105));function a(t){return t&&t.__esModule?t:{default:t}}var o=e.GOOGLE_AUTH_ENDPOINT="https://accounts.google.com/o/oauth2/auth",s=e.GOOGLE_CLIENT_ID="45471411055-ornt4svd2miog6dnopve7qtmh5mnu6id.apps.googleusercontent.com",u=(e.GOOGLE_URL_ROOT="https://www.googleapis.com/","http://127.0.0.1");r.default.location&&(u=r.default.location.origin);var c=e.REDIRECT_URI=u+"/auth/g/redirect",l=e.OAUTH_PARAMS={type:"web_server",client_id:s,redirect_uri:c,response_type:"code",scope:"https://www.googleapis.com/auth/userinfo.email",prompt:"select_account"};e.oauthRedirectLink=[o,i.default.stringify(l)].join("?")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getProfile=function(t){var e=t||"me";return r.get("v1/"+e+"/")};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34))},function(t,e,n){var r=n(272),i=n(274),a=n(60),o=n(275),s=n(276),u="application/json",c=function(){};t.exports=function(t,e,n){if(!t||"string"!==typeof t)throw new TypeError("must specify a URL");"function"===typeof e&&(n=e,e={});if(n&&"function"!==typeof n)throw new TypeError("expected cb to be undefined or a function");n=n||c;var l=(e=e||{}).json?"json":"text",f=(e=a({responseType:l},e)).headers||{},h=(e.method||"GET").toUpperCase(),d=e.query;d&&("string"!==typeof d&&(d=r.stringify(d)),t=i(t,d));"json"===e.responseType&&o(f,"Accept",u);e.json&&"GET"!==h&&"HEAD"!==h&&(o(f,"Content-Type",u),e.body=JSON.stringify(e.body));return e.method=h,e.url=t,e.headers=f,delete e.query,delete e.json,s(e,n)}},function(t,e,n){"use strict";var r=n(147),i=n(60),a=n(273);function o(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function s(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function u(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=i({arrayFormat:"none"},e)),r=Object.create(null);return"string"!==typeof t?r:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach((function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),o=e.length>0?e.join("="):void 0;o=void 0===o?null:a(o),n(a(i),o,r)})),Object.keys(r).sort().reduce((function(t,e){var n=r[e];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"===typeof e?t(Object.keys(e)).sort((function(t,e){return Number(t)-Number(e)})).map((function(t){return e[t]})):e}(n):t[e]=n,t}),Object.create(null))):r}e.extract=s,e.parse=u,e.stringify=function(t,e){!1===(e=i({encode:!0,strict:!0,arrayFormat:"none"},e)).sort&&(e.sort=function(){});var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[o(e,t),"[",r,"]"].join(""):[o(e,t),"[",o(r,t),"]=",o(n,t)].join("")};case"bracket":return function(e,n){return null===n?o(e,t):[o(e,t),"[]=",o(n,t)].join("")};default:return function(e,n){return null===n?o(e,t):[o(e,t),"=",o(n,t)].join("")}}}(e);return t?Object.keys(t).sort(e.sort).map((function(r){var i=t[r];if(void 0===i)return"";if(null===i)return o(r,e);if(Array.isArray(i)){var a=[];return i.slice().forEach((function(t){void 0!==t&&a.push(n(r,t,a.length))})),a.join("&")}return o(r,e)+"="+o(i,e)})).filter((function(t){return t.length>0})).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:u(s(t),e)}}},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function a(t,e){try{return decodeURIComponent(t.join(""))}catch(i){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],a(n),a(r))}function o(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=a(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=i.exec(t);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(e){var a=o(r[0]);a!==r[0]&&(n[r[0]]=a)}r=i.exec(t)}n["%C2"]="\ufffd";for(var s=Object.keys(n),u=0;u<s.length;u++){var c=s[u];t=t.replace(new RegExp(c,"g"),n[c])}return t}(t)}}},function(t,e){t.exports=function(t,e){if(e){e=(e=e.trim().replace(/^(\?|#|&)/,""))?"?"+e:e;var n=t.split(/[\?\#]/)[0];e&&/\:\/\/[^\/]*$/.test(n)&&(n+="/");var r=t.match(/(\#.*)$/);t=n+e,r&&(t+=r[0])}return t}},function(t,e){t.exports=function(t,e,n){var r=e.toLowerCase();t[e]||t[r]||(t[e]=n)}},function(t,e,n){var r=n(277),i=n(296),a=function(){};t.exports=function(t,e){delete t.uri;var n=!1;"json"===t.responseType&&(t.responseType="text",n=!0);var o=r(t,(function(r,o,s){if(n&&!r)try{var u=o.rawRequest.responseText;s=JSON.parse(u)}catch(c){r=c}o=i(t,o),e(r,r?null:s,o),e=a})),s=o.onabort;return o.onabort=function(){var t=s.apply(o,Array.prototype.slice.call(arguments));return e(new Error("XHR Aborted")),e=a,t},o}},function(t,e,n){"use strict";var r=n(278),i=n(148),a=n(279),o=n(69);function s(t,e,n){var r=t;return i(e)?(n=e,"string"===typeof t&&(r={uri:t})):r=o(e,{uri:t}),r.callback=n,r}function u(t,e,n){return c(e=s(t,e,n))}function c(t){if("undefined"===typeof t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,r,i){e||(e=!0,t.callback(n,r,i))};function r(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(n){}return null}(l),m)try{t=JSON.parse(t)}catch(e){}return t}function i(t){return clearTimeout(f),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,y)}function o(){if(!c){var e;clearTimeout(f),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=y,o=null;return 0!==e?(i={body:r(),statusCode:e,method:d,headers:{},url:h,rawRequest:l},l.getAllResponseHeaders&&(i.headers=a(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,i,i.body)}}var s,c,l=t.xhr||null;l||(l=t.cors||t.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var f,h=l.url=t.uri||t.url,d=l.method=t.method||"GET",p=t.body||t.data,v=l.headers=t.headers||{},g=!!t.sync,m=!1,y={body:void 0,headers:{},statusCode:0,method:d,url:h,rawRequest:l};if("json"in t&&!1!==t.json&&(m=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(o,0)},l.onload=o,l.onerror=i,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=i,l.open(d,h,!g,t.username,t.password),g||(l.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(f=setTimeout((function(){if(!c){c=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}}),t.timeout)),l.setRequestHeader)for(s in v)v.hasOwnProperty(s)&&l.setRequestHeader(s,v[s]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"===typeof t.beforeSend&&t.beforeSend(l),l.send(p||null),l}t.exports=u,t.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],(function(t){u["delete"===t?"del":t]=function(e,n,r){return(n=s(e,n,r)).method=t.toUpperCase(),c(n)}}))},function(t,e,n){(function(e){var n;n="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},t.exports=n}).call(this,n(19))},function(t,e,n){var r=n(280),i=n(295);t.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),(function(t){var n,i=t.indexOf(":"),a=r(t.slice(0,i)).toLowerCase(),o=r(t.slice(i+1));"undefined"===typeof e[a]?e[a]=o:(n=e[a],"[object Array]"===Object.prototype.toString.call(n)?e[a].push(o):e[a]=[e[a],o])})),e}},function(t,e,n){"use strict";var r=n(67),i=n(149),a=n(151),o=n(152),s=n(294),u=r.call(Function.call,o());i(u,{getPolyfill:o,implementation:a,shim:s}),t.exports=u},function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,a=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!==typeof e||"[object Function]"!==a.call(e))throw new TypeError(r+e);for(var n,o=i.call(arguments,1),s=function(){if(this instanceof n){var r=e.apply(this,o.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(t,o.concat(i.call(arguments)))},u=Math.max(0,e.length-o.length),c=[],l=0;l<u;l++)c.push("$"+l);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var f=function(){};f.prototype=e.prototype,n.prototype=new f,f.prototype=null}return n}},function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(150),a=Object.keys,o=a?function(t){return a(t)}:n(283),s=Object.keys;o.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return i(t)?s(r.call(t)):s(t)}):Object.keys=o;return Object.keys||o},t.exports=o},function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(150),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"===typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===typeof window[t])try{f(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var e=null!==t&&"object"===typeof t,n="[object Function]"===a.call(t),r=o(t),s=e&&"[object String]"===a.call(t),h=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=c&&n;if(s&&t.length>0&&!i.call(t,0))for(var v=0;v<t.length;++v)h.push(String(v));if(r&&t.length>0)for(var g=0;g<t.length;++g)h.push(String(g));else for(var m in t)p&&"prototype"===m||!i.call(t,m)||h.push(String(m));if(u)for(var y=function(t){if("undefined"===typeof window||!d)return f(t);try{return f(t)}catch(e){return!1}}(t),b=0;b<l.length;++b)y&&"constructor"===l[b]||!i.call(t,l[b])||h.push(l[b]);return h}}t.exports=r},function(t,e,n){"use strict";var r=n(68),i=r("%Object%"),a=r("%TypeError%"),o=r("%String%"),s=r("%Number%"),u=n(285),c=n(286),l=n(287),f=n(288),h=n(289),d=n(290),p=n(108),v=n(291),g=n(107),m=n(293)(o.prototype.slice),y=function(t,e){return t===e||!(t.length>e.length)&&m(e,0,t.length)===t},b={ToPrimitive:v,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return l(e)?0:0!==e&&f(e)?h(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(l(e)||0===e||!f(e))return 0;var n=h(e)*Math.floor(Math.abs(e));return d(n,65536)},ToString:function(t){return o(t)},ToObject:function(t){return this.CheckObjectCoercible(t),i(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new a(e||"Cannot call method on "+t);return t},IsCallable:p,SameValue:function(t,e){return t===e?0!==t||1/t===1/e:l(t)&&l(e)},Type:function(t){return null===t?"Null":"undefined"===typeof t?"Undefined":"function"===typeof t||"object"===typeof t?"Object":"number"===typeof t?"Number":"boolean"===typeof t?"Boolean":"string"===typeof t?"String":void 0},IsPropertyDescriptor:function(t){return c(this,t)},IsAccessorDescriptor:function(t){return"undefined"!==typeof t&&(u(this,"Property Descriptor","Desc",t),!(!g(t,"[[Get]]")&&!g(t,"[[Set]]")))},IsDataDescriptor:function(t){return"undefined"!==typeof t&&(u(this,"Property Descriptor","Desc",t),!(!g(t,"[[Value]]")&&!g(t,"[[Writable]]")))},IsGenericDescriptor:function(t){return"undefined"!==typeof t&&(u(this,"Property Descriptor","Desc",t),!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t))},FromPropertyDescriptor:function(t){if("undefined"===typeof t)return t;if(u(this,"Property Descriptor","Desc",t),this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new a("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new a("ToPropertyDescriptor requires an object");var e={};if(g(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),g(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),g(t,"value")&&(e["[[Value]]"]=t.value),g(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),g(t,"get")){var n=t.get;if("undefined"!==typeof n&&!this.IsCallable(n))throw new TypeError("getter must be a function");e["[[Get]]"]=n}if(g(t,"set")){var r=t.set;if("undefined"!==typeof r&&!this.IsCallable(r))throw new a("setter must be a function");e["[[Set]]"]=r}if((g(e,"[[Get]]")||g(e,"[[Set]]"))&&(g(e,"[[Value]]")||g(e,"[[Writable]]")))throw new a("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e},"Abstract Equality Comparison":function(t,e){var n=this.Type(t),r=this.Type(e);return n===r?t===e:null==t&&null==e||("Number"===n&&"String"===r?this["Abstract Equality Comparison"](t,this.ToNumber(e)):"String"===n&&"Number"===r?this["Abstract Equality Comparison"](this.ToNumber(t),e):"Boolean"===n?this["Abstract Equality Comparison"](this.ToNumber(t),e):"Boolean"===r?this["Abstract Equality Comparison"](t,this.ToNumber(e)):"String"!==n&&"Number"!==n||"Object"!==r?"Object"===n&&("String"===r||"Number"===r)&&this["Abstract Equality Comparison"](this.ToPrimitive(t),e):this["Abstract Equality Comparison"](t,this.ToPrimitive(e)))},"Strict Equality Comparison":function(t,e){var n=this.Type(t);return n===this.Type(e)&&("Undefined"===n||"Null"===n||t===e)},"Abstract Relational Comparison":function(t,e,n){if("Boolean"!==this.Type(n))throw new a("Assertion failed: LeftFirst argument must be a Boolean");var r,i;if(n?(r=this.ToPrimitive(t,s),i=this.ToPrimitive(e,s)):(i=this.ToPrimitive(e,s),r=this.ToPrimitive(t,s)),!("String"===this.Type(r)&&"String"===this.Type(i))){var o=this.ToNumber(r),u=this.ToNumber(i);if(l(o)||l(u))return;return(!f(o)||!f(u)||o!==u)&&((0!==o||0!==u)&&(o!==1/0&&(u===1/0||u!==-1/0&&(o===-1/0||o<u))))}return!y(i,r)&&(!!y(r,i)||r<i)}};t.exports=b},function(t,e,n){"use strict";var r=n(68),i=r("%TypeError%"),a=r("%SyntaxError%"),o=n(107),s={"Property Descriptor":function(t,e){if("Object"!==t.Type(e))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(o(e,r)&&!n[r])return!1;var a=o(e,"[[Value]]"),s=o(e,"[[Get]]")||o(e,"[[Set]]");if(a&&s)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}};t.exports=function(t,e,n,r){var o=s[e];if("function"!==typeof o)throw new a("unknown record type: "+e);if(!o(t,r))throw new i(n+" must be a "+e)}},function(t,e,n){"use strict";var r=n(68),i=n(107),a=r("%TypeError%");t.exports=function(t,e){if("Object"!==t.Type(e))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(i(e,r)&&!n[r])return!1;if(t.IsDataDescriptor(e)&&t.IsAccessorDescriptor(e))throw new a("Property Descriptors may not be both accessor and data descriptors");return!0}},function(t,e,n){"use strict";t.exports=Number.isNaN||function(t){return t!==t}},function(t,e,n){"use strict";var r=Number.isNaN||function(t){return t!==t};t.exports=Number.isFinite||function(t){return"number"===typeof t&&!r(t)&&t!==1/0&&t!==-1/0}},function(t,e,n){"use strict";t.exports=function(t){return t>=0?1:-1}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},function(t,e,n){"use strict";var r=Object.prototype.toString,i=n(292),a=n(108),o=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===r.call(t)?String:Number)===String||e===Number){var n,o,s=e===String?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<s.length;++o)if(a(t[s[o]])&&(n=t[s[o]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t){return i(t)?t:arguments.length>1?o(t,arguments[1]):o(t)}},function(t,e){t.exports=function(t){return null===t||"function"!==typeof t&&"object"!==typeof t}},function(t,e,n){"use strict";var r=n(67),i=n(68)("%Function%"),a=i.apply,o=i.call;t.exports=function(){return r.apply(o,arguments)},t.exports.apply=function(){return r.apply(a,arguments)}},function(t,e,n){"use strict";var r=n(149),i=n(152);t.exports=function(){var t=i();return r(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},function(t,e,n){"use strict";var r=n(108),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty,o=function(t,e,n){for(var r=0,i=t.length;r<i;r++)a.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))},s=function(t,e,n){for(var r=0,i=t.length;r<i;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)},u=function(t,e,n){for(var r in t)a.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))};t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(t)?o(t,e,a):"string"===typeof t?s(t,e,a):u(t,e,a)}},function(t,e){t.exports=function(t,e){return e?{statusCode:e.statusCode,headers:e.headers,method:t.method,url:t.url,rawRequest:e.rawRequest?e.rawRequest:e}:null}},function(t,e,n){"use strict";var r=n(298),i=n(299),a=n(154);t.exports=function(t){return r("number"===typeof t,"expected http status number"),a(t)?function(t){var e=new Error(i[t]+" ("+t+")");return e.statusCode=t,e}(t):null}},function(t,e,n){"use strict";t.exports=function(t,e){if(!t)throw new Error(e||"Expected true, got "+t)}},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e){t.exports=function(t,e,n){2===arguments.length&&(n=e,e=null);var r;try{r=JSON.parse(t,e)}catch(i){return n(i)}n(null,r)}},function(t,e,n){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},function(t,e,n){"use strict";var r=n(303),i=n(304),a=n(315);t.exports=a(i,r.stringify)},function(t,e,n){"use strict";var r=n(147);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t){return"string"!==typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""))?t.split("&").reduce((function(t,e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),i=n.length>0?n.join("="):void 0;return r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),t.hasOwnProperty(r)?Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i,t}),{}):{}},e.stringify=function(t){return t?Object.keys(t).sort().map((function(e){var n=t[e];return void 0===n?"":null===n?e:Array.isArray(n)?n.slice().sort().map((function(t){return r(e)+"="+r(t)})).join("&"):r(e)+"="+r(n)})).filter((function(t){return t.length>0})).join("&"):""}},function(t,e,n){"use strict";var r=n(305),i=n(306),a=n(309),o=n(310),s=n(153),u=n(311);function c(t,e){return a(e,(function(e,n){return[t+"["+e+"]",u(n)]}))}t.exports=function(t){return r(t)?function(t){return i(t,(function(t,e,n){var i=r(e)?c:o;return s(t,i(n,e))}),{})}(t):t}},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e,n){"use strict";var r=n(307);t.exports=function(t,e,n,i){var a=arguments.length>2;return!t||Object.keys(t).length||a?(r(t,(function(t,r,o){a?n=e.call(i,n,t,r,o):(n=t,a=!0)})),n):null}},function(t,e,n){"use strict";var r=n(308),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){r(t,(function(r,a){if(i.call(t,a))return e.call(n,t[a],a,t)}))}},function(t,e,n){"use strict";t.exports=function(t,e,n){for(var r in t)if(!1===e.call(n,t[r],r,t))break}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var a=r[i],o=e(a,t[a],t);n[o[0]]=o[1]}return n}},function(t,e,n){"use strict";t.exports=function(t,e){var n={};return n[t]=e,n}},function(t,e,n){"use strict";var r=n(312),i=n(314);function a(t){return i(t,null,"")}t.exports=function(t){return(function(t){return r(t)||Array.isArray(t)}(t)?a:String)(t)}},function(t,e,n){"use strict";var r=n(313);t.exports=function(t){return null!=t&&"object"===typeof t&&!r(t)}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){function n(t,e){var n=[],r=[];return null==e&&(e=function(t,e){return n[0]===e?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(e)).join(".")+"]"}),function(i,a){if(n.length>0){var o=n.indexOf(this);~o?n.splice(o+1):n.push(this),~o?r.splice(o,1/0,i):r.push(i),~n.indexOf(a)&&(a=e.call(this,i,a))}else n.push(a);return null==t?a:t.call(this,i,a)}}(t.exports=function(t,e,r,i){return JSON.stringify(t,n(e,i),r)}).getSerialize=n},function(t,e,n){"use strict";t.exports=function(t){if(!t)throw new TypeError("At least one function is required");Array.isArray(t)||(t=Array.prototype.slice.call(arguments));return function(e){for(var n=0;n<t.length;n++)e=t[n](e);return e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(155),a=(r=i)&&r.__esModule?r:{default:r};e.createAnnotation=function(t){if((t=s.AnnotationValidator.validate(t)).error)throw t.error;return t=t.value,o.post("v1/annotations/new",t)},e.getAnnotation=function(t){return o.get("v1/annotations/"+t)},e.updateAnnotation=function(t,e){return o.patch("v1/annotations/"+t,{data:e})},e.listAnnotations=function(t,e,n){if(!n.length)throw new Error("Invalid or empty dongleId");var r=u(t,e),i=r.start,a=r.end;return o.get("v1/devices/"+n+"/annotations/",{from:i,to:a})},e.listMyAnnotations=function(t,e){var n=u(t,e),r=n.start,i=n.end;return o.get("v1/me/annotations/",{from:r,to:i})};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34)),s=n(319);function u(t,e){if(t=Number(t),e=Number(e),!(0,a.default)(t))throw new Error("Invalid start time");if(!(0,a.default)(e))throw new Error("Invalid end time");return{start:t,end:e}}},function(t,e,n){n(318),t.exports=n(18).Number.isFinite},function(t,e,n){var r=n(27),i=n(21).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(320);e.AnnotationValidator=r.object().keys({canonical_segment_name:r.string().required(),offset_nanos_part:r.number().required(),offset_millis:r.number().required(),start_time_utc_millis:r.number().required(),end_time_utc_millis:r.number().required(),type:r.string().required(),data:r.object().keys({reason:r.string().required(),comment:r.string().allow("").optional()})})},function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=32)}([function(t,e,n){"use strict";(function(t,r){var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(17),o=n(15),s=n(37),u=n(16),c=n(18),l={};e.clone=function(n,r){if("object"!==("undefined"===typeof n?"undefined":i(n))||null===n)return n;var a=(r=r||new Map).get(n);if(a)return a;var o=void 0,s=!1;if(Array.isArray(n))o=[],s=!0;else if(t.isBuffer(n))o=t.from(n);else if(n instanceof Date)o=new Date(n.getTime());else if(n instanceof RegExp)o=new RegExp(n);else{var u=Object.getPrototypeOf(n);u&&u.isImmutable?o=n:(o=Object.create(u),s=!0)}if(r.set(n,o),s)for(var c=Object.getOwnPropertyNames(n),l=0;l<c.length;++l){var f=c[l],h=Object.getOwnPropertyDescriptor(n,f);h&&(h.get||h.set)?Object.defineProperty(o,f,h):o[f]=e.clone(n[f],r)}return o},e.merge=function(n,r,a,o){if(e.assert(n&&"object"===("undefined"===typeof n?"undefined":i(n)),"Invalid target value: must be an object"),e.assert(null===r||void 0===r||"object"===("undefined"===typeof r?"undefined":i(r)),"Invalid source value: must be null, undefined, or an object"),!r)return n;if(Array.isArray(r)){e.assert(Array.isArray(n),"Cannot merge array onto an object"),!1===o&&(n.length=0);for(var s=0;s<r.length;++s)n.push(e.clone(r[s]));return n}for(var u=Object.keys(r),c=0;c<u.length;++c){var l=u[c];if("__proto__"!==l){var f=r[l];f&&"object"===("undefined"===typeof f?"undefined":i(f))?!n[l]||"object"!==i(n[l])||Array.isArray(n[l])!==Array.isArray(f)||f instanceof Date||t.isBuffer(f)||f instanceof RegExp?n[l]=e.clone(f):e.merge(n[l],f,a,o):null!==f&&void 0!==f?n[l]=f:!1!==a&&(n[l]=f)}}return n},e.applyToDefaults=function(t,n,r){if(e.assert(t&&"object"===("undefined"===typeof t?"undefined":i(t)),"Invalid defaults value: must be an object"),e.assert(!n||!0===n||"object"===("undefined"===typeof n?"undefined":i(n)),"Invalid options value: must be true, falsy or an object"),!n)return null;var a=e.clone(t);return!0===n?a:e.merge(a,n,!0===r,!1)},e.cloneWithShallow=function(t,n){if(!t||"object"!==("undefined"===typeof t?"undefined":i(t)))return t;var r=l.store(t,n),a=e.clone(t);return l.restore(a,t,r),a},l.store=function(t,n){for(var r={},i=0;i<n.length;++i){var a=n[i],o=e.reach(t,a);void 0!==o&&(r[a]=o,l.reachSet(t,a,void 0))}return r},l.restore=function(t,e,n){for(var r=Object.keys(n),i=0;i<r.length;++i){var a=r[i];l.reachSet(t,a,n[a]),l.reachSet(e,a,n[a])}},l.reachSet=function(t,e,n){for(var r=e.split("."),i=t,a=0;a<r.length;++a){var o=r[a];a+1===r.length&&(i[o]=n),i=i[o]}},e.applyToDefaultsWithShallow=function(t,n,r){if(e.assert(t&&"object"===("undefined"===typeof t?"undefined":i(t)),"Invalid defaults value: must be an object"),e.assert(!n||!0===n||"object"===("undefined"===typeof n?"undefined":i(n)),"Invalid options value: must be true, falsy or an object"),e.assert(r&&Array.isArray(r),"Invalid keys"),!n)return null;var a=e.cloneWithShallow(t,r);if(!0===n)return a;var o=l.store(n,r);return e.merge(a,n,!1,!1),l.restore(a,n,o),a},e.deepEqual=function(n,r,a,o){a=a||{prototype:!0};var s="undefined"===typeof n?"undefined":i(n);if(s!==("undefined"===typeof r?"undefined":i(r)))return!1;if("object"!==s||null===n||null===r)return n===r?0!==n||1/n===1/r:n!==n&&r!==r;if(-1!==(o=o||[]).indexOf(n))return!0;if(o.push(n),Array.isArray(n)){if(!Array.isArray(r))return!1;if(!a.part&&n.length!==r.length)return!1;for(var u=0;u<n.length;++u){if(a.part){for(var c=!1,l=0;l<r.length;++l)if(e.deepEqual(n[u],r[l],a)){c=!0;break}return c}if(!e.deepEqual(n[u],r[u],a))return!1}return!0}if(t.isBuffer(n)){if(!t.isBuffer(r))return!1;if(n.length!==r.length)return!1;for(var f=0;f<n.length;++f)if(n[f]!==r[f])return!1;return!0}if(n instanceof Date)return r instanceof Date&&n.getTime()===r.getTime();if(n instanceof RegExp)return r instanceof RegExp&&n.toString()===r.toString();if(a.prototype&&Object.getPrototypeOf(n)!==Object.getPrototypeOf(r))return!1;var h=Object.getOwnPropertyNames(n);if(!a.part&&h.length!==Object.getOwnPropertyNames(r).length)return!1;for(var d=0;d<h.length;++d){var p=h[d],v=Object.getOwnPropertyDescriptor(n,p);if(v.get){if(!e.deepEqual(v,Object.getOwnPropertyDescriptor(r,p),a,o))return!1}else if(!e.deepEqual(n[p],r[p],a,o))return!1}return!0},e.unique=function(t,e){var n=void 0;if(e){n=[];var r=new Set;t.forEach((function(t){var i=t[e];r.has(i)||(r.add(i),n.push(t))}))}else n=Array.from(new Set(t));return n},e.mapToObject=function(t,e){if(!t)return null;for(var n={},r=0;r<t.length;++r)e?t[r][e]&&(n[t[r][e]]=!0):n[t[r]]=!0;return n},e.intersect=function(t,n,r){if(!t||!n)return[];for(var i=[],a=Array.isArray(t)?e.mapToObject(t):t,o={},s=0;s<n.length;++s)if(a[n[s]]&&!o[n[s]]){if(r)return n[s];i.push(n[s]),o[n[s]]=!0}return r?null:i},e.contain=function(t,n,r){var a=null;"object"!==("undefined"===typeof t?"undefined":i(t))||"object"!==("undefined"===typeof n?"undefined":i(n))||Array.isArray(t)||Array.isArray(n)?n=[].concat(n):(a=n,n=Object.keys(n)),r=r||{},e.assert("string"===typeof t||"object"===("undefined"===typeof t?"undefined":i(t)),"Reference must be string or an object"),e.assert(n.length,"Values array cannot be empty");var o=void 0,s=void 0;if(r.deep){o=e.deepEqual;var u=r.hasOwnProperty("only"),c=r.hasOwnProperty("part");s={prototype:u?r.only:!!c&&!r.part,part:u?!r.only:!c||r.part}}else o=function(t,e){return t===e};for(var l=!1,f=new Array(n.length),h=0;h<f.length;++h)f[h]=0;if("string"===typeof t){for(var d="(",p=0;p<n.length;++p){var v=n[p];e.assert("string"===typeof v,"Cannot compare string reference to non-string value"),d+=(p?"|":"")+e.escapeRegex(v)}var g=new RegExp(d+")","g");l=!!t.replace(g,(function(t,e){var r=n.indexOf(e);return++f[r],""}))}else if(Array.isArray(t))for(var m=0;m<t.length;++m){for(var y=!1,b=0;b<n.length&&!1===y;++b)y=o(n[b],t[m],s)&&b;!1!==y?++f[y]:l=!0}else for(var _=Object.getOwnPropertyNames(t),w=0;w<_.length;++w){var x=_[w],k=n.indexOf(x);if(-1!==k){if(a&&!o(a[x],t[x],s))return!1;++f[k]}else l=!0}for(var E=!1,S=0;S<f.length;++S)if(E=E||!!f[S],r.once&&f[S]>1||!r.part&&!f[S])return!1;return(!r.only||!l)&&E},e.flatten=function(t,n){for(var r=n||[],i=0;i<t.length;++i)Array.isArray(t[i])?e.flatten(t[i],r):r.push(t[i]);return r},e.reach=function(t,n,r){if(!1===n||null===n||"undefined"===typeof n)return t;"string"===typeof(r=r||{})&&(r={separator:r});for(var a=n.split(r.separator||"."),o=t,s=0;s<a.length;++s){var u=a[s];if("-"===u[0]&&Array.isArray(o)&&(u=u.slice(1,u.length),u=o.length-u),!o||"object"!==("undefined"===typeof o?"undefined":i(o))&&"function"!==typeof o||!(u in o)||"object"!==("undefined"===typeof o?"undefined":i(o))&&!1===r.functions){e.assert(!r.strict||s+1===a.length,"Missing segment",u,"in reach path ",n),e.assert("object"===("undefined"===typeof o?"undefined":i(o))||!0===r.functions||"function"!==typeof o,"Invalid segment",u,"in reach path ",n),o=r.default;break}o=o[u]}return o},e.reachTemplate=function(t,n,r){return n.replace(/{([^}]+)}/g,(function(n,i){var a=e.reach(t,i,r);return void 0===a||null===a?"":a}))},e.formatStack=function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push([r.getFileName(),r.getLineNumber(),r.getColumnNumber(),r.getFunctionName(),r.isConstructor()])}return e},e.formatTrace=function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push((r[4]?"new ":"")+r[3]+" ("+r[0]+":"+r[1]+":"+r[2]+")")}return e},e.callStack=function(t){var n=Error.prepareStackTrace;Error.prepareStackTrace=function(t,e){return e};var r={};Error.captureStackTrace(r,this);var i=r.stack;return Error.prepareStackTrace=n,e.formatStack(i).slice(1+t)},e.displayStack=function(t){var n=e.callStack(void 0===t?1:t+1);return e.formatTrace(n)},e.abortThrow=!1,e.abort=function(t,n){if("test"===r.env.NODE_ENV||!0===e.abortThrow)throw new Error(t||"Unknown error");var i="";n||(i=e.displayStack(1).join("\n\t")),console.log("ABORT: "+t+"\n\t"+i),r.exit(1)},e.assert=function(t){if(!t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(1===r.length&&r[0]instanceof Error)throw r[0];var o=r.filter((function(t){return""!==t})).map((function(t){return"string"===typeof t?t:t instanceof Error?t.message:e.stringify(t)}));throw new a.AssertionError({message:o.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:e.assert})}},e.Bench=function(){this.ts=0,this.reset()},e.Bench.prototype.reset=function(){this.ts=e.Bench.now()},e.Bench.prototype.elapsed=function(){return e.Bench.now()-this.ts},e.Bench.now=function(){var t=r.hrtime();return 1e3*t[0]+t[1]/1e6},e.escapeRegex=function(t){return t.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},e.base64urlEncode=function(n,r){return e.assert("string"===typeof n||t.isBuffer(n),"value must be string or buffer"),(t.isBuffer(n)?n:t.from(n,r||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},e.base64urlDecode=function(e,n){if("string"!==typeof e)throw new Error("Value not a string");if(!/^[\w\-]*$/.test(e))throw new Error("Invalid character");var r=t.from(e,"base64");return"buffer"===n?r:r.toString(n||"binary")},e.escapeHeaderAttribute=function(t){return e.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(t),"Bad attribute value ("+t+")"),t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},e.escapeHtml=function(t){return c.escapeHtml(t)},e.escapeJavaScript=function(t){return c.escapeJavaScript(t)},e.escapeJson=function(t){return c.escapeJson(t)},e.once=function(t){if(t._hoekOnce)return t;var e=!1,n=function(){if(!e){e=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(null,r)}};return n._hoekOnce=!0,n},e.isInteger=Number.isSafeInteger,e.ignore=function(){},e.inherits=u.inherits,e.format=u.format,e.transform=function(t,n,r){e.assert(null===t||void 0===t||"object"===("undefined"===typeof t?"undefined":i(t))||Array.isArray(t),"Invalid source object: must be null, undefined, an object, or an array");var a="object"===("undefined"===typeof r?"undefined":i(r))&&null!==r&&r.separator||".";if(Array.isArray(t)){for(var o=[],s=0;s<t.length;++s)o.push(e.transform(t[s],n,r));return o}for(var u={},c=Object.keys(n),l=0;l<c.length;++l){var f=c[l],h=f.split(a),d=n[f];e.assert("string"===typeof d,'All mappings must be "." delineated strings');for(var p=void 0,v=u;h.length>1;)v[p=h.shift()]||(v[p]={}),v=v[p];v[p=h.shift()]=e.reach(t,d,r)}return u},e.uniqueFilename=function(t,e){e=e?"."!==e[0]?"."+e:e:"",t=s.resolve(t);var n=[Date.now(),r.pid,o.randomBytes(8).toString("hex")].join("-")+e;return s.join(t,n)},e.stringify=function(){try{for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return JSON.stringify.apply(null,e)}catch(r){return"[Cannot display object: "+r.message+"]"}},e.shallow=function(t){for(var e={},n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];e[i]=t[i]}return e},e.wait=function(t){return new Promise((function(e){return setTimeout(e,t)}))},e.block=function(){return new Promise(e.ignore)}}).call(e,n(3).Buffer,n(7))},function(t,e,n){"use strict";var r=n(0);e.create=function(t,e){r.assert("string"===typeof t,"Invalid reference key:",t);var n=r.clone(e),i=function t(e,i){return r.reach(t.isContext?i.context:e,t.key,n)};return i.isContext=t[0]===(n&&n.contextPrefix||"$"),i.key=i.isContext?t.slice(1):t,i.path=i.key.split(n&&n.separator||"."),i.depth=i.path.length,i.root=i.path[0],i.isJoi=!0,i.toString=function(){return(i.isContext?"context:":"ref:")+i.key},i},e.isRef=function(t){return"function"===typeof t&&t.isJoi},e.push=function(t,n){e.isRef(n)&&!n.isContext&&t.push(n.root)}},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=n(11),s=n(1),u=n(6),c=null,l=null,f={Set:n(9),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};t.exports=f.Any=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l=l||n(4),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new f.Set,this._invalids=new f.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}return t.prototype._init=function(){return this},t.prototype.createError=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._flags;return u.create(t,e,n,r,i)},t.prototype.createOverrideError=function(t,e,n,r,i,a){return u.create(t,e,n,r,this._flags,i,a)},t.prototype.checkOptions=function(t){var e=n(21).options.validate(t);if(e.error)throw new Error(e.error.details[0].message)},t.prototype.clone=function(){var t=Object.create(Object.getPrototypeOf(this));t.isJoi=!0,t._currentJoi=this._currentJoi,t._type=this._type,t._settings=this._settings,t._baseType=this._baseType,t._valids=this._valids.slice(),t._invalids=this._invalids.slice(),t._tests=this._tests.slice(),t._refs=this._refs.slice(),t._flags=a.clone(this._flags),t._description=this._description,t._unit=this._unit,t._notes=this._notes.slice(),t._tags=this._tags.slice(),t._examples=this._examples.slice(),t._meta=this._meta.slice(),t._inner={};for(var e=Object.keys(this._inner),n=0;n<e.length;++n){var r=e[n];t._inner[r]=this._inner[r]?this._inner[r].slice():null}return t},t.prototype.concat=function(t){a.assert(t instanceof f.Any,"Invalid schema object"),a.assert("any"===this._type||"any"===t._type||t._type===this._type,"Cannot merge type",this._type,"with another type:",t._type);var e=this.clone();if("any"===this._type&&"any"!==t._type){for(var n=t.clone(),r=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"],i=0;i<r.length;++i)n[r[i]]=e[r[i]];e=n}e._settings=e._settings?o.concat(e._settings,t._settings):t._settings,e._valids.merge(t._valids,t._invalids),e._invalids.merge(t._invalids,t._valids),e._tests=e._tests.concat(t._tests),e._refs=e._refs.concat(t._refs),a.merge(e._flags,t._flags),e._description=t._description||e._description,e._unit=t._unit||e._unit,e._notes=e._notes.concat(t._notes),e._tags=e._tags.concat(t._tags),e._examples=e._examples.concat(t._examples),e._meta=e._meta.concat(t._meta);for(var s=Object.keys(t._inner),u="object"===e._type,c=0;c<s.length;++c){var l=s[c],h=t._inner[l];if(h){var d=e._inner[l];if(d)if(u&&"children"===l){for(var p={},v=0;v<d.length;++v)p[d[v].key]=v;for(var g=0;g<h.length;++g){var m=h[g].key;p[m]>=0?d[p[m]]={key:m,schema:d[p[m]].schema.concat(h[g].schema)}:d.push(h[g])}}else e._inner[l]=e._inner[l].concat(h);else e._inner[l]=h.slice()}}return e},t.prototype._test=function(t,e,n,r){var i=this.clone();return i._tests.push({func:n,name:t,arg:e,options:r}),i},t.prototype.options=function(t){a.assert(!t.context,"Cannot override context"),this.checkOptions(t);var e=this.clone();return e._settings=o.concat(e._settings,t),e},t.prototype.strict=function(t){var e=this.clone(),n=void 0!==t&&!t;return e._settings=o.concat(e._settings,{convert:n}),e},t.prototype.raw=function(t){var e=void 0===t||t;if(this._flags.raw===e)return this;var n=this.clone();return n._flags.raw=e,n},t.prototype.error=function(t){a.assert(t&&(t instanceof Error||"function"===typeof t),"Must provide a valid Error object or a function");var e=this.clone();return e._flags.error=t,e},t.prototype.allow=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.clone();e=a.flatten(e);for(var i=0;i<e.length;++i){var o=e[i];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),r._invalids.remove(o),r._valids.add(o,r._refs)}return r},t.prototype.valid=function(){var t=this.allow.apply(this,arguments);return t._flags.allowOnly=!0,t},t.prototype.invalid=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.clone();e=a.flatten(e);for(var i=0;i<e.length;++i){var o=e[i];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),r._valids.remove(o),r._invalids.add(o,r._refs)}return r},t.prototype.required=function(){if("required"===this._flags.presence)return this;var t=this.clone();return t._flags.presence="required",t},t.prototype.optional=function(){if("optional"===this._flags.presence)return this;var t=this.clone();return t._flags.presence="optional",t},t.prototype.forbidden=function(){if("forbidden"===this._flags.presence)return this;var t=this.clone();return t._flags.presence="forbidden",t},t.prototype.strip=function(){if(this._flags.strip)return this;var t=this.clone();return t._flags.strip=!0,t},t.prototype.applyFunctionToChildren=function(t,e,n,r){if(1!==(t=[].concat(t)).length||""!==t[0]){r=r?r+".":"";var i=(""===t[0]?t.slice(1):t).map((function(t){return r+t}));throw new Error("unknown key(s) "+i.join(", "))}return this[e].apply(this,n)},t.prototype.default=function(t,e){"function"!==typeof t||s.isRef(t)||(!t.description&&e&&(t.description=e),this._flags.func||a.assert("string"===typeof t.description&&t.description.length>0,"description must be provided when default value is a function"));var n=this.clone();return n._flags.default=t,s.push(n._refs,t),n},t.prototype.empty=function(t){var e=this.clone();return void 0===t?delete e._flags.empty:e._flags.empty=l.schema(this._currentJoi,t),e},t.prototype.when=function(t,e){a.assert(e&&"object"===("undefined"===typeof e?"undefined":r(e)),"Invalid options"),a.assert(void 0!==e.then||void 0!==e.otherwise,'options must have at least one of "then" or "otherwise"');var i=e.hasOwnProperty("then")?this.concat(l.schema(this._currentJoi,e.then)):void 0,o=e.hasOwnProperty("otherwise")?this.concat(l.schema(this._currentJoi,e.otherwise)):void 0;c=c||n(10);var s={then:i,otherwise:o};Object.prototype.hasOwnProperty.call(e,"is")&&(s.is=e.is);var u=c.when(t,s);return u._flags.presence="ignore",u._baseType=this,u},t.prototype.description=function(t){a.assert(t&&"string"===typeof t,"Description must be a non-empty string");var e=this.clone();return e._description=t,e},t.prototype.notes=function(t){a.assert(t&&("string"===typeof t||Array.isArray(t)),"Notes must be a non-empty string or array");var e=this.clone();return e._notes=e._notes.concat(t),e},t.prototype.tags=function(t){a.assert(t&&("string"===typeof t||Array.isArray(t)),"Tags must be a non-empty string or array");var e=this.clone();return e._tags=e._tags.concat(t),e},t.prototype.meta=function(t){a.assert(void 0!==t,"Meta cannot be undefined");var e=this.clone();return e._meta=e._meta.concat(t),e},t.prototype.example=function(){a.assert(1===arguments.length,"Missing example");var t=arguments.length<=0?void 0:arguments[0],e=this.clone();return e._examples.push(t),e},t.prototype.unit=function(t){a.assert(t&&"string"===typeof t,"Unit name must be a non-empty string");var e=this.clone();return e._unit=t,e},t.prototype._prepareEmptyValue=function(t){return"string"===typeof t&&this._flags.trim?t.trim():t},t.prototype._validate=function(t,e,n,r){var i=this,c=t;e=e||{key:"",path:[],parent:null,reference:r},this._settings&&(n=o.concat(n,this._settings));var l=[],h=function(){var r=void 0;if(void 0!==t)r=i._flags.raw?c:t;else if(n.noDefaults)r=t;else if(s.isRef(i._flags.default))r=i._flags.default(e.parent,n);else if("function"!==typeof i._flags.default||i._flags.func&&!i._flags.default.description)r=a.clone(i._flags.default);else{var o=void 0;null!==e.parent&&i._flags.default.length>0&&(o=[a.clone(e.parent),n]);var u=f._try(i._flags.default,o);r=u.value,u.error&&l.push(i.createError("any.default",{error:u.error},e,n))}if(l.length&&"function"===typeof i._flags.error){var h=i._flags.error.call(i,l);l="string"===typeof h?[i.createOverrideError("override",{reason:l},e,n,h)]:[].concat(h).map((function(t){return t instanceof Error?t:i.createOverrideError(t.type||"override",t.context,e,n,t.message,t.template)}))}return{value:i._flags.strip?void 0:r,finalValue:r,errors:l.length?l:null}};if(this._coerce){var d=this._coerce.call(this,t,e,n);if(d.errors)return t=d.value,l=l.concat(d.errors),h();t=d.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(t),null,f.defaults).errors&&(t=void 0);var p=this._flags.presence||n.presence;if("optional"===p){if(void 0===t){if(!this._flags.hasOwnProperty("default")||void 0!==this._flags.default||"object"!==this._type)return h();t={}}}else{if("required"===p&&void 0===t)return l.push(this.createError("any.required",null,e,n)),h();if("forbidden"===p)return void 0===t?h():(l.push(this.createError("any.unknown",null,e,n)),h())}if(this._valids.has(t,e,n,this._flags.insensitive))return h();if(this._invalids.has(t,e,n,this._flags.insensitive)&&(l.push(this.createError(""===t?"any.empty":"any.invalid",{value:t,invalids:this._invalids.values({stripUndefined:!0})},e,n)),n.abortEarly||void 0===t))return h();if(this._base){var v=this._base.call(this,t,e,n);if(v.errors)return t=v.value,l=l.concat(v.errors),h();if(v.value!==t){if(t=v.value,this._valids.has(t,e,n,this._flags.insensitive))return h();if(this._invalids.has(t,e,n,this._flags.insensitive)&&(l.push(this.createError(""===t?"any.empty":"any.invalid",{value:t,invalids:this._invalids.values({stripUndefined:!0})},e,n)),n.abortEarly))return h()}}if(this._flags.allowOnly&&(l.push(this.createError("any.allowOnly",{value:t,valids:this._valids.values({stripUndefined:!0})},e,n)),n.abortEarly))return h();for(var g=0;g<this._tests.length;++g){var m=this._tests[g].func.call(this,t,e,n);if(m instanceof u.Err){if(l.push(m),n.abortEarly)return h()}else t=m}return h()},t.prototype._validateWithOptions=function(t,e,n){e&&this.checkOptions(e);var r=o.concat(f.defaults,e),i=this._validate(t,null,r),a=u.process(i.errors,t);return n?n(a,i.value):{error:a,value:i.value,then:function(t,e){return a?Promise.reject(a).catch(e):Promise.resolve(i.value).then(t)},catch:function(t){return a?Promise.reject(a).catch(t):Promise.resolve(i.value)}}},t.prototype.validate=function(t,e,n){return"function"===typeof e?this._validateWithOptions(t,null,e):this._validateWithOptions(t,e,n)},t.prototype.describe=function(){var t=this,e={type:this._type},n=Object.keys(this._flags);if(n.length)if(["empty","default","lazy","label"].some((function(e){return t._flags.hasOwnProperty(e)}))){e.flags={};for(var r=0;r<n.length;++r){var i=n[r];"empty"===i?e.flags[i]=this._flags[i].describe():"default"===i?s.isRef(this._flags[i])?e.flags[i]=this._flags[i].toString():"function"===typeof this._flags[i]?e.flags[i]={description:this._flags[i].description,function:this._flags[i]}:e.flags[i]=this._flags[i]:"lazy"===i||"label"===i||(e.flags[i]=this._flags[i])}}else e.flags=this._flags;this._settings&&(e.options=a.clone(this._settings)),this._baseType&&(e.base=this._baseType.describe()),this._description&&(e.description=this._description),this._notes.length&&(e.notes=this._notes),this._tags.length&&(e.tags=this._tags),this._meta.length&&(e.meta=this._meta),this._examples.length&&(e.examples=this._examples),this._unit&&(e.unit=this._unit);var o=this._valids.values();o.length&&(e.valids=o.map((function(t){return s.isRef(t)?t.toString():t})));var u=this._invalids.values();u.length&&(e.invalids=u.map((function(t){return s.isRef(t)?t.toString():t}))),e.rules=[];for(var c=0;c<this._tests.length;++c){var l=this._tests[c],f={name:l.name};void 0!==l.arg&&(f.arg=s.isRef(l.arg)?l.arg.toString():l.arg);var h=l.options;if(h){if(h.hasRef){f.arg={};for(var d=Object.keys(l.arg),p=0;p<d.length;++p){var v=d[p],g=l.arg[v];f.arg[v]=s.isRef(g)?g.toString():g}}"string"===typeof h.description?f.description=h.description:"function"===typeof h.description&&(f.description=h.description(f.arg))}e.rules.push(f)}e.rules.length||delete e.rules;var m=this._getLabel();return m&&(e.label=m),e},t.prototype.label=function(t){a.assert(t&&"string"===typeof t,"Label name must be a non-empty string");var e=this.clone();return e._flags.label=t,e},t.prototype._getLabel=function(t){return this._flags.label||t},i(t,[{key:"schemaType",get:function(){return this._type}}]),t}(),f.Any.prototype.isImmutable=!0,f.Any.prototype.only=f.Any.prototype.equal=f.Any.prototype.valid,f.Any.prototype.disallow=f.Any.prototype.not=f.Any.prototype.invalid,f.Any.prototype.exist=f.Any.prototype.required,f._try=function(t,e){var n=void 0,r=void 0;try{r=t.apply(null,e)}catch(i){n=i}return{value:r,error:n}}},function(t,e,n){"use strict";(function(t){var r=n(33),i=n(34),a=n(35);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e),t}(t,e,n,r):"string"===typeof e?function(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&a(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function c(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(a=n;a<s;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(c(t,a+h)!==c(e,h)){f=!1;break}if(f)return a}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function _(t,e,n,r){return q(U(e,t.length-n),t,n,r)}function w(t,e,n,r){return q(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function k(t,e,n,r){return q(z(e),t,n,r)}function E(t,e,n,r){return q(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),c=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],o=l[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function j(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=e;o<n;++o)a+=(r=t[o])<16?"0"+r.toString(16):r.toString(16);return a}function D(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,a){return a||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function I(t,e,n,r,a){return a||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return I(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return I(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:U(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(e,n(5))},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0),a=n(1);e.schema=function(t,e){return void 0!==e&&null!==e&&"object"===("undefined"===typeof e?"undefined":r(e))?e.isJoi?e:Array.isArray(e)?t.alternatives().try(e):e instanceof RegExp?t.string().regex(e):e instanceof Date?t.date().valid(e):t.object().keys(e):"string"===typeof e?t.string().valid(e):"number"===typeof e?t.number().valid(e):"boolean"===typeof e?t.boolean().valid(e):a.isRef(e)?t.valid(e):(i.assert(null===e,"Invalid schema content:",e),t.valid(null))},e.ref=function(t){return a.isRef(t)?t:a.create(t)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0),a=n(20),o={annotations:Symbol("joi-annotations"),stringify:function(t,n){var i="undefined"===typeof t?"undefined":r(t);if(null===t)return"null";if("string"===i)return t;if(t instanceof e.Err||"function"===i||"symbol"===i)return t.toString();if("object"===i){if(Array.isArray(t)){for(var a="",s=0;s<t.length;++s)a=a+(a.length?", ":"")+o.stringify(t[s],n);return n?"["+a+"]":a}return t.toString()}return JSON.stringify(t)}};e.Err=function(){function t(e,n,r,i,o,s,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isJoi=!0,this.type=e,this.context=n||{},this.context.key=r.path[r.path.length-1],this.context.label=r.key,this.path=r.path,this.options=i,this.flags=o,this.message=s,this.template=u;var c=this.options.language;this.flags.label?this.context.label=this.flags.label:!c||""!==this.context.label&&null!==this.context.label||(this.context.label=c.root||a.errors.root)}return t.prototype.toString=function(){var t=this;if(this.message)return this.message;var e=void 0;this.template&&(e=this.template);var n=this.options.language;if(void 0===(e=e||i.reach(n,this.type)||i.reach(a.errors,this.type)))return'Error code "'+this.type+'" is not defined, your custom type is missing the correct language definition';var r=i.reach(n,"messages.wrapArrays");if("boolean"!==typeof r&&(r=a.errors.messages.wrapArrays),null===e){var s=o.stringify(this.context.reason,r);return r?s.slice(1,-1):s}var u=/\{\{\!?label\}\}/.test(e),c=e.length>2&&"!"===e[0]&&"!"===e[1];if(c&&(e=e.slice(2)),!u&&!c){var l=i.reach(n,"key");e="string"===typeof l?l+e:i.reach(a.errors,"key")+e}return e.replace(/\{\{(\!?)([^}]+)\}\}/g,(function(e,n,a){var s=i.reach(t.context,a),u=o.stringify(s,r);return n&&t.options.escapeHtml?i.escapeHtml(u):u}))},t}(),e.create=function(t,n,r,i,a,o,s){return new e.Err(t,n,r,i,a,o,s)},e.process=function(t,e){if(!t||!t.length)return null;var n="",r=[],i=function t(e,i){for(var a=0;a<e.length;++a){var o=e[a];if(o instanceof Error)return o;if(o.flags.error&&"function"!==typeof o.flags.error)return o.flags.error;var s=void 0;if(void 0===i&&(s=o.toString(),n=n+(n?". ":"")+s),o.context.reason&&o.context.reason.length){var u=t(o.context.reason,o.path);if(u)return u}else r.push({message:s||o.toString(),path:o.path,type:o.type,context:o.context})}}(t);if(i)return i;var a=new Error(n);return a.isJoi=!0,a.name="ValidationError",a.details=r,a._object=e,a.annotate=o.annotate,a},o.safeStringify=function(t,e){return JSON.stringify(t,o.serializer(),e)},o.serializer=function(){var t=[],e=[],n=function(n,r){return e[0]===r?"[Circular ~]":"[Circular ~."+t.slice(0,e.indexOf(r)).join(".")+"]"};return function(i,a){if(e.length>0){var s=e.indexOf(this);~s?(e.length=s+1,t.length=s+1,t[s]=i):(e.push(this),t.push(i)),~e.indexOf(a)&&(a=n.call(this,i,a))}else e.push(a);if(a){var u=a[o.annotations];if(u){if(Array.isArray(a)){for(var c=[],l=0;l<a.length;++l)u.errors[l]&&c.push("_$idx$_"+u.errors[l].sort().join(", ")+"_$end$_"),c.push(a[l]);a=c}else{for(var f=Object.keys(u.errors),h=0;h<f.length;++h){var d=f[h];a[d+"_$key$_"+u.errors[d].sort().join(", ")+"_$end$_"]=a[d],a[d]=void 0}for(var p=Object.keys(u.missing),v=0;v<p.length;++v){var g=p[v];a["_$miss$_"+g+"|"+u.missing[g]+"_$end$_"]="__missing__"}}return a}}return a===1/0||a===-1/0||Number.isNaN(a)||"function"===typeof a||"symbol"===("undefined"===typeof a?"undefined":r(a))?"["+a.toString()+"]":a}},o.annotate=function(t){var e=t?"":"\x1b[31m",n=t?"":"\x1b[41m",a=t?"":"\x1b[0m";if("object"!==r(this._object))return this.details[0].message;for(var s=i.clone(this._object||{}),u=this.details.length-1;u>=0;--u)for(var c=u+1,l=this.details[u],f=l.path,h=s,d=0;;++d){var p=f[d];if(h.isImmutable&&(h=h.clone()),!(d+1<f.length&&h[p]&&"string"!==typeof h[p])){var v=h[o.annotations]=h[o.annotations]||{errors:{},missing:{}},g=h[p],m=p||l.context.label;void 0!==g?(v.errors[m]=v.errors[m]||[],v.errors[m].push(c)):v.missing[m]=c;break}h=h[p]}var y=/_\$key\$_([, \d]+)_\$end\$_\"/g,b=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,_=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,w=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g,x=o.safeStringify(s,2).replace(y,(function(t,n){return'" '+e+"["+n+"]"+a})).replace(b,(function(t,r,i){return n+'"'+r+'"'+a+e+" ["+i+"]: -- missing --"+a})).replace(_,(function(t,n,r){return"\n"+r+" "+e+"["+n+"]"+a})).replace(w,(function(t,e){return e}));x=x+"\n"+e;for(var k=0;k<this.details.length;++k)x=x+"\n["+(k+1)+"] "+this.details[k].message;return x+=a}},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var u=n(0),c=n(2),l=n(4),f=n(6),h=n(26),d=n(1),p=n(11),v={alternatives:n(10),array:n(22),boolean:n(24),binary:n(23),date:n(12),func:n(25),number:n(27),object:n(13),string:n(28),callWithDefaults:function(t,e){var n;return u.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(t=this._defaults(t)),t._currentJoi=this,(n=t)._init.apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e))},root:function(){var t=new c,e=t.clone();return c.prototype._currentJoi=e,e._currentJoi=e,e.any=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return u.assert(0===n.length,"Joi.any() does not allow arguments."),v.callWithDefaults.call(this,t,n)},e.alternatives=e.alt=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.callWithDefaults.call(this,v.alternatives,e)},e.array=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.array() does not allow arguments."),v.callWithDefaults.call(this,v.array,e)},e.boolean=e.bool=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.boolean() does not allow arguments."),v.callWithDefaults.call(this,v.boolean,e)},e.binary=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.binary() does not allow arguments."),v.callWithDefaults.call(this,v.binary,e)},e.date=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.date() does not allow arguments."),v.callWithDefaults.call(this,v.date,e)},e.func=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.func() does not allow arguments."),v.callWithDefaults.call(this,v.func,e)},e.number=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.number() does not allow arguments."),v.callWithDefaults.call(this,v.number,e)},e.object=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.callWithDefaults.call(this,v.object,e)},e.string=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.assert(0===e.length,"Joi.string() does not allow arguments."),v.callWithDefaults.call(this,v.string,e)},e.ref=function(){return d.create.apply(d,arguments)},e.isRef=function(t){return d.isRef(t)},e.validate=function(n){var r,i=(r=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=r?void 0:arguments[r]),a="function"===typeof i?i:null,o=(arguments.length<=1?0:arguments.length-1)-(a?1:0);if(0===o)return t.validate(n,a);var s=2===o?arguments.length<=2?void 0:arguments[2]:{},u=e.compile(arguments.length<=1?void 0:arguments[1]);return u._validateWithOptions(n,s,a)},e.describe=function(){var n=arguments.length?e.compile(arguments.length<=0?void 0:arguments[0]):t;return n.describe()},e.compile=function(t){try{return l.schema(this,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}},e.assert=function(t,n,r){e.attempt(t,n,r)},e.attempt=function(t,n,r){var i=e.validate(t,n),a=i.error;if(a){if(!r)throw"function"===typeof a.annotate&&(a.message=a.annotate()),a;if(!(r instanceof Error))throw"function"===typeof a.annotate&&(a.message=r+" "+a.annotate()),a;throw r}return i.value},e.reach=function(t,e){return u.assert(t&&t instanceof c,"you must provide a joi schema"),u.assert(Array.isArray(e)||"string"===typeof e,"path must be a string or an array of strings"),function t(e,n){if(!n.length)return e;var r=e._inner.children;if(r)for(var i=n.shift(),a=0;a<r.length;++a){var o=r[a];if(o.key===i)return t(o.schema,n)}}(t,"string"===typeof e?e?e.split("."):[]:e.slice())},e.lazy=function(t){return h.set(t)},e.defaults=function(t){var e=this;u.assert("function"===typeof t,"Defaults must be a function");var n=Object.create(this.any());return n=t(n),u.assert(n&&n instanceof this.constructor,"defaults() must return a schema"),r(n,this,n.clone()),n._defaults=function(n){return e._defaults&&(n=e._defaults(n),u.assert(n instanceof e.constructor,"defaults() must return a schema")),n=t(n),u.assert(n instanceof e.constructor,"defaults() must return a schema"),n},n},e.extend=function(){for(var t=this,n=arguments.length,h=Array(n),g=0;g<n;g++)h[g]=arguments[g];var m=u.flatten(h);u.assert(m.length>0,"You need to provide at least one extension"),this.assert(m,e.extensionsSchema);var y=Object.create(this.any());r(y,this);for(var b=function(n){var h=m[n];"function"===typeof h&&(h=h(y)),t.assert(h,e.extensionSchema);var g=(h.base||t.any()).clone(),b=g.constructor,_=function(t){function e(){a(this,e);var n=o(this,t.call(this));return h.base&&r(n,g),n._type=h.name,h.language&&(n._settings=p.concat(n._settings,{language:i({},h.name,h.language)})),n}return s(e,t),e}(b);if(h.coerce&&(_.prototype._coerce=function(t,e,n){if(b.prototype._coerce){var r=b.prototype._coerce.call(this,t,e,n);if(r.errors)return r;t=r.value}var i=h.coerce.call(this,t,e,n);return i instanceof f.Err?{value:t,errors:i}:{value:i}}),h.pre&&(_.prototype._base=function(t,e,n){if(b.prototype._base){var r=b.prototype._base.call(this,t,e,n);if(r.errors)return r;t=r.value}var i=h.pre.call(this,t,e,n);return i instanceof f.Err?{value:t,errors:i}:{value:i}}),h.rules)for(var w=function(e){var n=h.rules[e],r=n.params?n.params instanceof c?n.params._inner.children.map((function(t){return t.key})):Object.keys(n.params):[],i=n.params?l.schema(t,n.params):null;_.prototype[n.name]=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];if(e.length>r.length)throw new Error("Unexpected number of arguments");for(var o=!1,s={},l=0;l<r.length;++l)s[r[l]]=e[l],!o&&d.isRef(e[l])&&(o=!0);i&&(s=y.attempt(s,i));var f=void 0;if(n.validate){var h=function(t,e,r){return n.validate.call(this,s,t,e,r)};f=this._test(n.name,s,h,{description:n.description,hasRef:o})}else f=this.clone();if(n.setup){var p=n.setup.call(f,s);void 0!==p&&(u.assert(p instanceof c,"Setup of extension Joi."+this._type+"()."+n.name+"() must return undefined or a Joi object"),f=p)}return f}},x=0;x<h.rules.length;++x)w(x);h.describe&&(_.prototype.describe=function(){var t=b.prototype.describe.call(this);return h.describe.call(this,t)});var k=new _;y[h.name]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return v.callWithDefaults.call(this,k,e)}},_=0;_<m.length;++_)b(_);return y},e.extensionSchema=v.object.keys({base:v.object.type(c,"Joi object"),name:v.string.required(),coerce:v.func.arity(3),pre:v.func.arity(3),language:v.object,describe:v.func.arity(1),rules:v.array.items(v.object.keys({name:v.string.required(),setup:v.func.arity(1),validate:v.func.arity(4),params:[v.object.pattern(/.*/,v.object.type(c,"Joi object")),v.object.type(v.object.constructor,"Joi object")],description:[v.string,v.func.arity(1)]}).or("setup","validate"))}).strict(),e.extensionsSchema=v.array.items([v.object,v.func.arity(1)]).strict(),e.version=n(36).version,e}};t.exports=v.root()},function(t,e,n){"use strict";(function(e){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var a=n(1),o={extendedCheckForValue:function(t,n){var i="undefined"===typeof t?"undefined":r(t);if("object"===i){if(t instanceof Date)return function(e){return e instanceof Date&&t.getTime()===e.getTime()};if(e.isBuffer(t))return function(n){return e.isBuffer(n)&&t.length===n.length&&t.toString("binary")===n.toString("binary")}}else if(n&&"string"===i){var a=t.toLowerCase();return function(t){return"string"===typeof t&&a===t.toLowerCase()}}return null}};t.exports=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set=new Set(e),this._hasRef=!1}return t.prototype.add=function(t,e){var n=a.isRef(t);return!n&&this.has(t,null,null,!1)?this:(void 0!==e&&a.push(e,t),this._set.add(t),this._hasRef|=n,this)},t.prototype.merge=function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=t._set[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.add(s)}}catch(p){r=!0,i=p}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=e._set[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;this.remove(d)}}catch(p){c=!0,l=p}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}return this},t.prototype.remove=function(t){return this._set.delete(t),this},t.prototype.has=function(t,e,n,r){if(!this._set.size)return!1;var i=this._set.has(t);if(i)return i;var s=o.extendedCheckForValue(t,r);if(!s){if(e&&this._hasRef){var u=!0,c=!1,l=void 0;try{for(var f,h=this._set[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;if(a.isRef(d)&&(t===(d=d(e.reference||e.parent,n))||Array.isArray(d)&&d.includes(t)))return!0}}catch(p){c=!0,l=p}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}return!1}return this._has(t,e,n,s)},t.prototype._has=function(t,e,n,r){var i=!(!e||!this._hasRef),o=function(e){return t===e||r(e)},s=!0,u=!1,c=void 0;try{for(var l,f=this._set[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;if(i&&a.isRef(h)&&(h=h(e.reference||e.parent,n),Array.isArray(h))){if(h.find(o))return!0}else if(o(h))return!0}}catch(d){u=!0,c=d}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return!1},t.prototype.values=function(t){if(t&&t.stripUndefined){var e=[],n=!0,r=!1,i=void 0;try{for(var a,o=this._set[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;void 0!==s&&e.push(s)}}catch(u){r=!0,i=u}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return e}return Array.from(this._set)},t.prototype.slice=function(){var e=new t(this._set);return e._hasRef=this._hasRef,e},t.prototype.concat=function(e){var n=new t([].concat(i(this._set),i(e._set)));return n._hasRef=!!(this._hasRef|e._hasRef),n},t}()}).call(e,n(3).Buffer)},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var a=n(0),o=n(2),s=n(4),u=n(1),c={};c.Alternatives=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="alternatives",n._invalids.remove(null),n._inner.matches=[],n}return i(e,t),e.prototype._init=function(){return arguments.length?this.try.apply(this,arguments):this},e.prototype._base=function(t,e,n){for(var r=[],i=this._inner.matches.length,a=this._baseType,o=0;o<i;++o){var s=this._inner.matches[o];if(s.schema){var u=s.schema._validate(t,e,n);if(!u.errors)return u;r=r.concat(u.errors)}else{var c=s.peek||s.is,l=s.is?s.ref(e.reference||e.parent,n):t;if(c._validate(l,null,n,e.parent).errors){if(s.otherwise)return s.otherwise._validate(t,e,n)}else if(s.then)return s.then._validate(t,e,n);if(o===i-1&&a)return a._validate(t,e,n)}}return r.length?{errors:this.createError("alternatives.child",{reason:r},e,n)}:{errors:this.createError("alternatives.base",null,e,n)}},e.prototype.try=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e=a.flatten(e),a.assert(e.length,"Cannot add other alternatives without at least one schema");for(var r=this.clone(),i=0;i<e.length;++i){var o=s.schema(this._currentJoi,e[i]);o._refs.length&&(r._refs=r._refs.concat(o._refs)),r._inner.matches.push({schema:o})}return r},e.prototype.when=function(t,e){var n=!1;a.assert(u.isRef(t)||"string"===typeof t||(n=t instanceof o),"Invalid condition:",t),a.assert(e,"Missing options"),a.assert("object"===("undefined"===typeof e?"undefined":r(e)),"Invalid options"),n?a.assert(!e.hasOwnProperty("is"),'"is" can not be used with a schema condition'):a.assert(e.hasOwnProperty("is"),'Missing "is" directive'),a.assert(void 0!==e.then||void 0!==e.otherwise,'options must have at least one of "then" or "otherwise"');var i=this.clone(),c=void 0;n||(c=s.schema(this._currentJoi,e.is),null!==e.is&&(u.isRef(e.is)||e.is instanceof o)||(c=c.required()));var l={ref:n?null:s.ref(t),peek:n?t:null,is:c,then:void 0!==e.then?s.schema(this._currentJoi,e.then):void 0,otherwise:void 0!==e.otherwise?s.schema(this._currentJoi,e.otherwise):void 0};return i._baseType&&(l.then=l.then&&i._baseType.concat(l.then),l.otherwise=l.otherwise&&i._baseType.concat(l.otherwise)),n||(u.push(i._refs,l.ref),i._refs=i._refs.concat(l.is._refs)),l.then&&l.then._refs&&(i._refs=i._refs.concat(l.then._refs)),l.otherwise&&l.otherwise._refs&&(i._refs=i._refs.concat(l.otherwise._refs)),i._inner.matches.push(l),i},e.prototype.describe=function(){for(var t=o.prototype.describe.call(this),e=[],n=0;n<this._inner.matches.length;++n){var r=this._inner.matches[n];if(r.schema)e.push(r.schema.describe());else{var i=r.is?{ref:r.ref.toString(),is:r.is.describe()}:{peek:r.peek.describe()};r.then&&(i.then=r.then.describe()),r.otherwise&&(i.otherwise=r.otherwise.describe()),e.push(i)}}return t.alternatives=e,t},e}(o),t.exports=new c.Alternatives},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(0);e.concat=function(t,e){if(!e)return t;for(var n=r({},t),a=Object.keys(e),o=0;o<a.length;++o){var s=a[o];"language"===s&&n.hasOwnProperty(s)?n[s]=i.applyToDefaults(n[s],e[s]):n[s]=e[s]}return n}},function(t,e,n){"use strict";function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var i=n(2),a=n(1),o=n(0),s={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.invalidDate=new Date(""),s.isIsoDate=function(){var t=s.isoDate.toString();return function(e){return e&&e.toString()===t}}(),s.Date=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="date",n}return r(e,t),e.prototype._base=function(t,e,n){var r={value:n.convert&&s.Date.toDate(t,this._flags.format,this._flags.timestamp,this._flags.multiplier)||t};if(r.value instanceof Date&&!isNaN(r.value.getTime()))r.errors=null;else if(n.convert){var i=void 0;i=s.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?"timestamp."+this._flags.timestamp:"base",r.errors=this.createError("date."+i,null,e,n)}else r.errors=this.createError("date.strict",null,e,n);return r},e.toDate=function(t,e,n,r){if(t instanceof Date)return t;if("string"===typeof t||"number"===typeof t&&!isNaN(t)&&isFinite(t)){"string"===typeof t&&/^[+-]?\d+(\.\d+)?$/.test(t)&&(t=parseFloat(t));var i=void 0;if(i=e&&s.isIsoDate(e)?e.test(t)?new Date(t):s.invalidDate:n&&r?/^\s*$/.test(t)?s.invalidDate:new Date(t*r):new Date(t),!isNaN(i.getTime()))return i}return null},e.prototype.iso=function(){if(this._flags.format===s.isoDate)return this;var t=this.clone();return t._flags.format=s.isoDate,t},e.prototype.timestamp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",e=["javascript","unix"];if(o.assert(e.includes(t),'"type" must be one of "'+e.join('", "')+'"'),this._flags.timestamp===t)return this;var n=this.clone();return n._flags.timestamp=t,n._flags.multiplier="unix"===t?1e3:1,n},e.prototype._isIsoDate=function(t){return s.isoDate.test(t)},e}(i),s.compare=function(t,e){return function(n){var r="now"===n,i=a.isRef(n);return r||i||(n=s.Date.toDate(n)),o.assert(n,"Invalid date format"),this._test(t,n,(function(a,o,u){var c=void 0;if(r)c=Date.now();else if(i){if(!(c=s.Date.toDate(n(o.reference||o.parent,u))))return this.createError("date.ref",{ref:n.key},o,u);c=c.getTime()}else c=n.getTime();return e(a.getTime(),c)?a:this.createError("date."+t,{limit:new Date(c)},o,u)}))}},s.Date.prototype.min=s.compare("min",(function(t,e){return t>=e})),s.Date.prototype.max=s.compare("max",(function(t,e){return t<=e})),s.Date.prototype.greater=s.compare("greater",(function(t,e){return t>e})),s.Date.prototype.less=s.compare("less",(function(t,e){return t<e})),t.exports=new s.Date},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var a=n(0),o=n(31),s=n(2),u=n(6),c=n(4),l={};l.Object=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="object",n._inner.children=null,n._inner.renames=[],n._inner.dependencies=[],n._inner.patterns=[],n}return i(e,t),e.prototype._init=function(){return arguments.length?this.keys.apply(this,arguments):this},e.prototype._base=function(t,e,n){var i=t,o=[],s=function(){return{value:i,errors:o.length?o:null}};"string"===typeof t&&n.convert&&(t=l.safeParse(t));var c=this._flags.func?"function":"object";if(!t||("undefined"===typeof t?"undefined":r(t))!==c||Array.isArray(t))return o.push(this.createError(c+".base",null,e,n)),s();if(!this._inner.renames.length&&!this._inner.dependencies.length&&!this._inner.children&&!this._inner.patterns.length)return i=t,s();if(i===t){"object"===c?i=Object.create(Object.getPrototypeOf(t)):(i=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}).prototype=a.clone(t.prototype);for(var f=Object.keys(t),h=0;h<f.length;++h)i[f[h]]=t[f[h]]}else i=t;for(var d={},p=0;p<this._inner.renames.length;++p){var v=this._inner.renames[p];if(v.isRegExp){for(var g=Object.keys(i),m=[],y=0;y<g.length;++y)v.from.test(g[y])&&m.push(g[y]);var b=m.every((function(t){return void 0===i[t]}));if(v.options.ignoreUndefined&&b)continue;if(!v.options.multiple&&d[v.to]&&(o.push(this.createError("object.rename.regex.multiple",{from:m,to:v.to},e,n)),n.abortEarly))return s();if(Object.prototype.hasOwnProperty.call(i,v.to)&&!v.options.override&&!d[v.to]&&(o.push(this.createError("object.rename.regex.override",{from:m,to:v.to},e,n)),n.abortEarly))return s();if(b?delete i[v.to]:i[v.to]=i[m[m.length-1]],d[v.to]=!0,!v.options.alias)for(var _=0;_<m.length;++_)delete i[m[_]]}else{if(v.options.ignoreUndefined&&void 0===i[v.from])continue;if(!v.options.multiple&&d[v.to]&&(o.push(this.createError("object.rename.multiple",{from:v.from,to:v.to},e,n)),n.abortEarly))return s();if(Object.prototype.hasOwnProperty.call(i,v.to)&&!v.options.override&&!d[v.to]&&(o.push(this.createError("object.rename.override",{from:v.from,to:v.to},e,n)),n.abortEarly))return s();void 0===i[v.from]?delete i[v.to]:i[v.to]=i[v.from],d[v.to]=!0,v.options.alias||delete i[v.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return s();var w=new Set(Object.keys(i));if(this._inner.children){for(var x=[],k=0;k<this._inner.children.length;++k){var E=this._inner.children[k],S=E.key,O=i[S];w.delete(S);var A={key:S,path:e.path.concat(S),parent:i,reference:e.reference},T=E.schema._validate(O,A,n);if(T.errors){if(o.push(this.createError("object.child",{key:S,child:E.schema._getLabel(S),reason:T.errors},A,n)),n.abortEarly)return s()}else E.schema._flags.strip||void 0===T.value&&T.value!==O?(x.push(S),i[S]=T.finalValue):void 0!==T.value&&(i[S]=T.value)}for(var C=0;C<x.length;++C)delete i[x[C]]}if(w.size&&this._inner.patterns.length){var j=!0,D=!1,R=void 0;try{for(var M,P=w[Symbol.iterator]();!(j=(M=P.next()).done);j=!0)for(var F=M.value,N={key:F,path:e.path.concat(F),parent:i,reference:e.reference},L=i[F],I=0;I<this._inner.patterns.length;++I){var B=this._inner.patterns[I];if(B.regex?B.regex.test(F):!B.schema.validate(F).error){w.delete(F);var U=B.rule._validate(L,N,n);if(U.errors&&(o.push(this.createError("object.child",{key:F,child:B.rule._getLabel(F),reason:U.errors},N,n)),n.abortEarly))return s();i[F]=U.value}}}catch(nt){D=!0,R=nt}finally{try{!j&&P.return&&P.return()}finally{if(D)throw R}}}if(w.size&&(this._inner.children||this._inner.patterns.length)){if(n.stripUnknown&&!0!==this._flags.allowUnknown||n.skipFunctions){var z=!!n.stripUnknown&&(!0===n.stripUnknown||!!n.stripUnknown.objects),q=!0,W=!1,H=void 0;try{for(var G,Y=w[Symbol.iterator]();!(q=(G=Y.next()).done);q=!0){var V=G.value;z?(delete i[V],w.delete(V)):"function"===typeof i[V]&&w.delete(V)}}catch(nt){W=!0,H=nt}finally{try{!q&&Y.return&&Y.return()}finally{if(W)throw H}}}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!n.allowUnknown){var $=!0,X=!1,K=void 0;try{for(var J,Z=w[Symbol.iterator]();!($=(J=Z.next()).done);$=!0){var Q=J.value;o.push(this.createError("object.allowUnknown",{child:Q},{key:Q,path:e.path.concat(Q)},n,{}))}}catch(nt){X=!0,K=nt}finally{try{!$&&Z.return&&Z.return()}finally{if(X)throw K}}}}for(var tt=0;tt<this._inner.dependencies.length;++tt){var et=this._inner.dependencies[tt],nt=l[et.type].call(this,null!==et.key&&i[et.key],et.peers,i,{key:et.key,path:null===et.key?e.path:e.path.concat(et.key)},n);if(nt instanceof u.Err&&(o.push(nt),n.abortEarly))return s()}return s()},e.prototype.keys=function(t){a.assert(null===t||void 0===t||"object"===("undefined"===typeof t?"undefined":r(t)),"Object schema must be a valid object"),a.assert(!t||!(t instanceof s),"Object schema cannot be a joi schema");var e=this.clone();if(!t)return e._inner.children=null,e;var n=Object.keys(t);if(!n.length)return e._inner.children=[],e;var i=new o;if(e._inner.children)for(var u=0;u<e._inner.children.length;++u){var l=e._inner.children[u];n.includes(l.key)||i.add(l,{after:l._refs,group:l.key})}for(var f=0;f<n.length;++f){var h=n[f],d=t[h];try{var p=c.schema(this._currentJoi,d);i.add({key:h,schema:p},{after:p._refs,group:h})}catch(v){throw v.hasOwnProperty("path")?v.path=h+"."+v.path:v.path=h,v}}return e._inner.children=i.nodes,e},e.prototype.append=function(t){return null===t||void 0===t||0===Object.keys(t).length?this:this.keys(t)},e.prototype.unknown=function(t){var e=!1!==t;if(this._flags.allowUnknown===e)return this;var n=this.clone();return n._flags.allowUnknown=e,n},e.prototype.length=function(t){return a.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("length",t,(function(e,n,r){return Object.keys(e).length===t?e:this.createError("object.length",{limit:t},n,r)}))},e.prototype.min=function(t){return a.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("min",t,(function(e,n,r){return Object.keys(e).length>=t?e:this.createError("object.min",{limit:t},n,r)}))},e.prototype.max=function(t){return a.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("max",t,(function(e,n,r){return Object.keys(e).length<=t?e:this.createError("object.max",{limit:t},n,r)}))},e.prototype.pattern=function(t,e){var n=t instanceof RegExp;a.assert(n||t instanceof s,"pattern must be a regex or schema"),a.assert(void 0!==e,"Invalid rule"),n&&(t=new RegExp(t.source,t.ignoreCase?"i":void 0));try{e=c.schema(this._currentJoi,e)}catch(i){throw i.hasOwnProperty("path")&&(i.message=i.message+"("+i.path+")"),i}var r=this.clone();return n?r._inner.patterns.push({regex:t,rule:e}):r._inner.patterns.push({schema:t,rule:e}),r},e.prototype.schema=function(){return this._test("schema",null,(function(t,e,n){return t instanceof s?t:this.createError("object.schema",null,e,n)}))},e.prototype.with=function(t,e){return a.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",t,e)},e.prototype.without=function(t,e){return a.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",t,e)},e.prototype.xor=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this._dependency("xor",null,e)},e.prototype.or=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this._dependency("or",null,e)},e.prototype.and=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this._dependency("and",null,e)},e.prototype.nand=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this._dependency("nand",null,e)},e.prototype.requiredKeys=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this.applyFunctionToChildren(e,"required")},e.prototype.optionalKeys=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this.applyFunctionToChildren(e,"optional")},e.prototype.forbiddenKeys=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e=a.flatten(e),this.applyFunctionToChildren(e,"forbidden")},e.prototype.rename=function(t,e,n){a.assert("string"===typeof t||t instanceof RegExp,"Rename missing the from argument"),a.assert("string"===typeof e,"Rename missing the to argument"),a.assert(e!==t,"Cannot rename key to same name:",t);for(var r=0;r<this._inner.renames.length;++r)a.assert(this._inner.renames[r].from!==t,"Cannot rename the same key multiple times");var i=this.clone();return i._inner.renames.push({from:t,to:e,options:a.applyToDefaults(l.renameDefaults,n||{}),isRegExp:t instanceof RegExp}),i},e.prototype.applyFunctionToChildren=function(t,e,n,r){t=[].concat(t),a.assert(t.length>0,"expected at least one children");var i=l.groupChildren(t),o=void 0;if(""in i?(o=this[e].apply(this,n),delete i[""]):o=this.clone(),o._inner.children){r=r?r+".":"";for(var s=0;s<o._inner.children.length;++s){var u=o._inner.children[s],c=i[u.key];c&&(o._inner.children[s]={key:u.key,_refs:u._refs,schema:u.schema.applyFunctionToChildren(c,e,n,r+u.key)},delete i[u.key])}}var f=Object.keys(i);return a.assert(0===f.length,"unknown key(s)",f.join(", ")),o},e.prototype._dependency=function(t,e,n){n=[].concat(n);for(var r=0;r<n.length;++r)a.assert("string"===typeof n[r],t,"peers must be a string or array of strings");var i=this.clone();return i._inner.dependencies.push({type:t,key:e,peers:n}),i},e.prototype.describe=function(t){var e=s.prototype.describe.call(this);if(e.rules)for(var n=0;n<e.rules.length;++n){var i=e.rules[n];i.arg&&"object"===r(i.arg)&&i.arg.schema&&i.arg.ref&&(i.arg={schema:i.arg.schema.describe(),ref:i.arg.ref.toString()})}if(this._inner.children&&!t){e.children={};for(var o=0;o<this._inner.children.length;++o){var u=this._inner.children[o];e.children[u.key]=u.schema.describe()}}if(this._inner.dependencies.length&&(e.dependencies=a.clone(this._inner.dependencies)),this._inner.patterns.length){e.patterns=[];for(var c=0;c<this._inner.patterns.length;++c){var l=this._inner.patterns[c];l.regex?e.patterns.push({regex:l.regex.toString(),rule:l.rule.describe()}):e.patterns.push({schema:l.schema.describe(),rule:l.rule.describe()})}}return this._inner.renames.length>0&&(e.renames=a.clone(this._inner.renames)),e},e.prototype.assert=function(t,e,n){t=c.ref(t),a.assert(t.isContext||t.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),n=n||"pass the assertion test";try{e=c.schema(this._currentJoi,e)}catch(o){throw o.hasOwnProperty("path")&&(o.message=o.message+"("+o.path+")"),o}var r=t.path[t.path.length-1],i=t.path.join(".");return this._test("assert",{schema:e,ref:t},(function(o,s,u){if(!e._validate(t(o),null,u,o).errors)return o;var c=a.merge({},s);return c.key=r,c.path=t.path,this.createError("object.assert",{ref:i,message:n},c,u)}))},e.prototype.type=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name;a.assert("function"===typeof t,"type must be a constructor function");var n={name:e,ctor:t};return this._test("type",n,(function(e,r,i){return e instanceof t?e:this.createError("object.type",{type:n.name},r,i)}))},e}(s),l.safeParse=function(t){try{return JSON.parse(t)}catch(e){}return t},l.renameDefaults={alias:!1,multiple:!1,override:!1},l.groupChildren=function(t){t.sort();for(var e={},n=0;n<t.length;++n){var r=t[n];a.assert("string"===typeof r,"children must be strings");var i=r.split(".")[0];(e[i]=e[i]||[]).push(r.substring(i.length+1))}return e},l.keysToLabels=function(t,e){var n=t._inner.children;if(!n)return e;var r=function(t){var e=n.find((function(e){return e.key===t}));return e?e.schema._getLabel(t):t};return Array.isArray(e)?e.map(r):r(e)},l.with=function(t,e,n,r,i){if(void 0===t)return t;for(var a=0;a<e.length;++a){var o=e[a];if(!Object.prototype.hasOwnProperty.call(n,o)||void 0===n[o])return this.createError("object.with",{main:r.key,mainWithLabel:l.keysToLabels(this,r.key),peer:o,peerWithLabel:l.keysToLabels(this,o)},r,i)}return t},l.without=function(t,e,n,r,i){if(void 0===t)return t;for(var a=0;a<e.length;++a){var o=e[a];if(Object.prototype.hasOwnProperty.call(n,o)&&void 0!==n[o])return this.createError("object.without",{main:r.key,mainWithLabel:l.keysToLabels(this,r.key),peer:o,peerWithLabel:l.keysToLabels(this,o)},r,i)}return t},l.xor=function(t,e,n,r,i){for(var a=[],o=0;o<e.length;++o){var s=e[o];Object.prototype.hasOwnProperty.call(n,s)&&void 0!==n[s]&&a.push(s)}if(1===a.length)return t;var u={peers:e,peersWithLabels:l.keysToLabels(this,e)};return 0===a.length?this.createError("object.missing",u,r,i):this.createError("object.xor",u,r,i)},l.or=function(t,e,n,r,i){for(var a=0;a<e.length;++a){var o=e[a];if(Object.prototype.hasOwnProperty.call(n,o)&&void 0!==n[o])return t}return this.createError("object.missing",{peers:e,peersWithLabels:l.keysToLabels(this,e)},r,i)},l.and=function(t,e,n,r,i){for(var a=[],o=[],s=e.length,u=0;u<s;++u){var c=e[u];Object.prototype.hasOwnProperty.call(n,c)&&void 0!==n[c]?o.push(c):a.push(c)}if(a.length!==s&&o.length!==s)return this.createError("object.and",{present:o,presentWithLabels:l.keysToLabels(this,o),missing:a,missingWithLabels:l.keysToLabels(this,a)},r,i)},l.nand=function(t,e,n,r,i){for(var o=[],s=0;s<e.length;++s){var u=e[s];Object.prototype.hasOwnProperty.call(n,u)&&void 0!==n[u]&&o.push(u)}var c=a.clone(e),f=c.splice(0,1)[0];return o.length===e.length?this.createError("object.nand",{main:f,mainWithLabel:l.keysToLabels(this,f),peers:c,peersWithLabels:l.keysToLabels(this,c)},r,i):null},t.exports=new l.Object},function(t,e,n){"use strict";var r={rfc3986:{},generate:function(){var t="|";r.rfc3986.ipv4Cidr="[0-9]|[1-2][0-9]|3[0-2]",r.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";var e="a-zA-Z0-9-\\._~",n="!\\$&'\\(\\)\\*\\+,;=",i=e+"%0-9A-Fa-f"+n+":@",a="["+i+"]",o="(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])";r.rfc3986.IPv4address="(?:"+o+"\\.){3}"+o;var s="[0-9A-Fa-f]{1,4}",u="(?:"+s+":"+s+"|"+r.rfc3986.IPv4address+")",c="(?:"+s+":){6}"+u,l="::(?:"+s+":){5}"+u,f="(?:"+s+")?::(?:"+s+":){4}"+u,h="(?:(?:"+s+":){0,1}"+s+")?::(?:"+s+":){3}"+u,d="(?:(?:"+s+":){0,2}"+s+")?::(?:"+s+":){2}"+u,p="(?:(?:"+s+":){0,3}"+s+")?::"+s+":"+u,v="(?:(?:"+s+":){0,4}"+s+")?::"+u;r.rfc3986.IPv6address="(?:"+c+t+l+t+f+t+h+t+d+t+p+t+v+t+"(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}"+t+"(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)",r.rfc3986.IPvFuture="v[0-9A-Fa-f]+\\.["+e+n+":]+",r.rfc3986.scheme="[a-zA-Z][a-zA-Z0-9+-\\.]*";var g="(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:]*@)?(?:\\[(?:"+r.rfc3986.IPv6address+t+r.rfc3986.IPvFuture+")\\]"+t+r.rfc3986.IPv4address+t+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=]{0,255})(?::[0-9]*)?",m=a+"+",y="(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",b="\\/(?:"+m+y+")?";r.rfc3986.hierPart="(?:(?:\\/\\/"+g+y+")"+t+b+t+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*)",r.rfc3986.relativeRef="(?:(?:\\/\\/"+g+y+")"+t+b+t+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*"+t+")",r.rfc3986.query="["+i+"\\/\\?]*(?=#|$)",r.rfc3986.fragment="["+i+"\\/\\?]*"}};r.generate(),t.exports=r.rfc3986},function(t,e){},function(t,e,n){(function(t,r){var i=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}})),u=r[n];n<a;u=r[++n])v(u)||!_(u)?o+=" "+u:o+=" "+s(u);return o},e.deprecate=function(n,i){if(y(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}};var a,o={};function s(t,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&e._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function c(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&k(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=l(t,i,r)),i}var a=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}(t,n);if(a)return a;var o=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),x(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(n);if(0===o.length){if(k(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return f(n)}var c,_="",E=!1,S=["{","}"];return d(n)&&(E=!0,S=["[","]"]),k(n)&&(_=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),x(n)&&(_=" "+f(n)),0!==o.length||E&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=E?function(t,e,n,r,i){for(var a=[],o=0,s=e.length;o<s;++o)T(e,String(o))?a.push(h(t,e,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(h(t,e,n,r,i,!0))})),a}(t,n,r,s,o):o.map((function(e){return h(t,n,r,s,e,E)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,_,S)):S[0]+_+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),T(r,i)||(o="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=v(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),y(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"===typeof t}function v(t){return null===t}function g(t){return"number"===typeof t}function m(t){return"string"===typeof t}function y(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===E(t)}function _(t){return"object"===typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===E(t)}function x(t){return _(t)&&("[object Error]"===E(t)||t instanceof Error)}function k(t){return"function"===typeof t}function E(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(y(a)&&(a=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var n=r.pid;o[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else o[t]=function(){};return o[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=_,e.isDate=w,e.isError=x,e.isFunction=k,e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=n(40);var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",A(),e.format.apply(e,arguments))},e.inherits=n(39),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(5),n(7))},function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=n(16),o=Object.prototype.hasOwnProperty,s=Array.prototype.slice,u="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function l(t){return!i(t)&&"function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var f=t.exports=m,h=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(a.isFunction(t)){if(u)return t.name;var e=t.toString().match(h);return e&&e[1]}}function p(t,e){return"string"===typeof t?t.length<e?t:t.slice(0,e):t}function v(t){if(u||!a.isFunction(t))return a.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,r,i){throw new f.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function m(t,e){t||g(t,!0,e,"==",f.ok)}function y(t,e,n,o){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===typeof t||null!==e&&"object"===typeof e){if(l(t)&&l(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var u=(o=o||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===o.expected.indexOf(e)||(o.actual.push(t),o.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=b(t),o=b(e);if(i&&!o||!i&&o)return!1;if(i)return t=s.call(t),e=s.call(e),y(t,e,n);var u,c,l=x(t),f=x(e);if(l.length!==f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!==f[c])return!1;for(c=l.length-1;c>=0;c--)if(u=l[c],!y(t[u],e[u],n,r))return!1;return!0}(t,e,n,o))}return n?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(n){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,n,r){var i;if("function"!==typeof e)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(n){e=n}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&g(i,n,"Missing expected exception"+r);var o="string"===typeof r,s=!t&&i&&!n;if((!t&&a.isError(i)&&o&&_(i,n)||s)&&g(i,n,"Got unwanted exception"+r),t&&i&&n&&!_(i,n)||!t&&i)throw i}f.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return p(v(t.actual),128)+" "+t.operator+" "+p(v(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=d(e),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},a.inherits(f.AssertionError,Error),f.fail=g,f.ok=m,f.equal=function(t,e,n){t!=e&&g(t,e,n,"==",f.equal)},f.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",f.notEqual)},f.deepEqual=function(t,e,n){y(t,e,!1)||g(t,e,n,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(t,e,n){y(t,e,!0)||g(t,e,n,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(t,e,n){y(t,e,!1)&&g(t,e,n,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function t(e,n,r){y(e,n,!0)&&g(e,n,r,"notDeepStrictEqual",t)},f.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",f.strictEqual)},f.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",f.notStrictEqual)},f.throws=function(t,e,n){w(!0,t,e,n)},f.doesNotThrow=function(t,e,n){w(!1,t,e,n)},f.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e}}).call(e,n(5))},function(t,e,n){"use strict";(function(t){var n={};e.escapeJavaScript=function(t){if(!t)return"";for(var e="",r=0;r<t.length;++r){var i=t.charCodeAt(r);n.isSafe(i)?e+=t[r]:e+=n.escapeJavaScriptChar(i)}return e},e.escapeHtml=function(t){if(!t)return"";for(var e="",r=0;r<t.length;++r){var i=t.charCodeAt(r);n.isSafe(i)?e+=t[r]:e+=n.escapeHtmlChar(i)}return e},e.escapeJson=function(t){if(!t)return"";var e=void 0;return t.replace(/[<>&\u2028\u2029]/g,(function(t){return 60===(e=t.charCodeAt(0))?"\\u003c":62===e?"\\u003e":38===e?"\\u0026":8232===e?"\\u2028":"\\u2029"}))},n.escapeJavaScriptChar=function(e){if(e>=256)return"\\u"+n.padLeft(""+e,4);var r=t.from(String.fromCharCode(e),"ascii").toString("hex");return"\\x"+n.padLeft(r,2)},n.escapeHtmlChar=function(e){var r=n.namedHtml[e];if("undefined"!==typeof r)return r;if(e>=256)return"&#"+e+";";var i=t.from(String.fromCharCode(e),"ascii").toString("hex");return"&#x"+n.padLeft(i,2)+";"},n.padLeft=function(t,e){for(;t.length<e;)t="0"+t;return t},n.isSafe=function(t){return"undefined"!==typeof n.safeCharCodes[t]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){for(var t={},e=32;e<123;++e)(e>=97||e>=65&&e<=90||e>=48&&e<=57||32===e||46===e||44===e||45===e||58===e||95===e)&&(t[e]=null);return t}()}).call(e,n(3).Buffer)},function(t,e,n){"use strict";(function(t){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(38),a={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};a.specials=function(){var t=new Array(256);t.fill(!1);for(var e=0;e<'()<>[]:;@\\,."'.length;++e)t['()<>[]:;@\\,."'.codePointAt(e)]=!0;return function(e){return t[e]}}(),a.c0Controls=function(){var t=new Array(256);t.fill(!1);for(var e=0;e<33;++e)t[e]=!0;return function(e){return t[e]}}(),a.c1Controls=function(){var t=new Array(256);t.fill(!1);for(var e=127;e<160;++e)t[e]=!0;return function(e){return t[e]}}(),a.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},a.normalizeSupportsNul="\0"==="\0".normalize("NFC"),a.nulNormalize=function(t){return t.split("\0").map((function(t){return t.normalize("NFC")})).join("\0")},a.normalize=function(t){return!a.normalizeSupportsNul&&t.indexOf("\0")>=0?a.nulNormalize(t):t.normalize("NFC")},a.checkIpV6=function(t){return t.every((function(t){return a.regex.ipV6.test(t)}))},a.validDomain=function(t,e){return e.tldBlacklist?Array.isArray(e.tldBlacklist)?-1===a.indexOf.call(e.tldBlacklist,t):!a.hasOwn.call(e.tldBlacklist,t):Array.isArray(e.tldWhitelist)?-1!==a.indexOf.call(e.tldWhitelist,t):a.hasOwn.call(e.tldWhitelist,t)},e.validate=a.validate=function(e,n,o){n=n||{},e=a.normalize(e),"function"===typeof n&&(o=n,n={}),"function"!==typeof o&&(o=null);var s=void 0,u=void 0;if("number"===typeof n.errorLevel?(s=!0,u=n.errorLevel):(s=!!n.errorLevel,u=a.diagnoses.valid),n.tldWhitelist)if("string"===typeof n.tldWhitelist)n.tldWhitelist=[n.tldWhitelist];else if("object"!==r(n.tldWhitelist))throw new TypeError("expected array or object tldWhitelist");if(n.tldBlacklist)if("string"===typeof n.tldBlacklist)n.tldBlacklist=[n.tldBlacklist];else if("object"!==r(n.tldBlacklist))throw new TypeError("expected array or object tldBlacklist");if(n.minDomainAtoms&&(n.minDomainAtoms!==(0|+n.minDomainAtoms)||n.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");var c=a.diagnoses.valid,l=function(t){t>c&&(c=t)};void 0!==n.allowUnicode&&!n.allowUnicode&&/[^\x00-\x7f]/.test(e)&&l(a.diagnoses.undesiredNonAscii);for(var f={now:a.components.localpart,prev:a.components.localpart,stack:[a.components.localpart]},h="",d={local:"",domain:""},p={locals:[""],domains:[""]},v=0,g=0,m=0,y=void 0,b=!1,_=!1,w=e.length,x=void 0,k=0;k<w;k+=x.length){switch(x=String.fromCodePoint(e.codePointAt(k)),f.now){case a.components.localpart:switch(x){case"(":0===g?l(0===v?a.diagnoses.cfwsComment:a.diagnoses.deprecatedComment):(l(a.diagnoses.cfwsComment),_=!0),f.stack.push(f.now),f.now=a.components.contextComment;break;case".":0===g?l(0===v?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):(_&&l(a.diagnoses.deprecatedLocalPart),_=!1,g=0,++v,d.local+=x,p.locals[v]="");break;case'"':0===g?(l(0===v?a.diagnoses.rfc5321QuotedString:a.diagnoses.deprecatedLocalPart),d.local+=x,p.locals[v]+=x,g+=t.byteLength(x,"utf8"),_=!0,f.stack.push(f.now),f.now=a.components.contextQuotedString):l(a.diagnoses.errExpectingATEXT);break;case"\r":if(w===++k||"\n"!==e[k]){l(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===g?l(0===v?a.diagnoses.cfwsFWS:a.diagnoses.deprecatedFWS):_=!0,f.stack.push(f.now),f.now=a.components.contextFWS,h=x;break;case"@":if(1!==f.stack.length)throw new Error("unexpected item on context stack");0===d.local.length?l(a.diagnoses.errNoLocalPart):0===g?l(a.diagnoses.errDotEnd):t.byteLength(d.local,"utf8")>64?l(a.diagnoses.rfc5322LocalTooLong):f.prev!==a.components.contextComment&&f.prev!==a.components.contextFWS||l(a.diagnoses.deprecatedCFWSNearAt),f.now=a.components.domain,f.stack[0]=a.components.domain,v=0,g=0,_=!1;break;default:if(_)switch(f.prev){case a.components.contextComment:case a.components.contextFWS:l(a.diagnoses.errATEXTAfterCFWS);break;case a.components.contextQuotedString:l(a.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+f.prev)}else f.prev=f.now,y=x.codePointAt(0),(a.specials(y)||a.c0Controls(y)||a.c1Controls(y))&&l(a.diagnoses.errExpectingATEXT),d.local+=x,p.locals[v]+=x,g+=t.byteLength(x,"utf8")}break;case a.components.domain:switch(x){case"(":0===g?l(0===v?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedComment):(_=!0,l(a.diagnoses.cfwsComment)),f.stack.push(f.now),f.now=a.components.contextComment;break;case".":var E=i.encode(p.domains[v]).length;0===g?l(0===v?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):b?l(a.diagnoses.errDomainHyphenEnd):E>63&&l(a.diagnoses.rfc5322LabelTooLong),_=!1,g=0,++v,p.domains[v]="",d.domain+=x;break;case"[":0===d.domain.length?(_=!0,g+=t.byteLength(x,"utf8"),f.stack.push(f.now),f.now=a.components.literal,d.domain+=x,p.domains[v]+=x,d.literal=""):l(a.diagnoses.errExpectingATEXT);break;case"\r":if(w===++k||"\n"!==e[k]){l(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===g?l(0===v?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedFWS):(l(a.diagnoses.cfwsFWS),_=!0),f.stack.push(f.now),f.now=a.components.contextFWS,h=x;break;default:if(_)switch(f.prev){case a.components.contextComment:case a.components.contextFWS:l(a.diagnoses.errATEXTAfterCFWS);break;case a.components.literal:l(a.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+f.prev)}y=x.codePointAt(0),b=!1,a.specials(y)||a.c0Controls(y)||a.c1Controls(y)?l(a.diagnoses.errExpectingATEXT):"-"===x?(0===g&&l(a.diagnoses.errDomainHyphenStart),b=!0):(y<48||y>122&&y<192||y>57&&y<65||y>90&&y<97)&&l(a.diagnoses.rfc5322Domain),d.domain+=x,p.domains[v]+=x,g+=t.byteLength(x,"utf8")}break;case a.components.literal:switch(x){case"]":if(c<a.categories.deprecated){var S=-1,O=d.literal,A=a.regex.ipV4.exec(O);if(A&&0!==(S=A.index)&&(O=O.slice(0,S)+"0:0"),0===S)l(a.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==O.slice(0,5).toLowerCase())l(a.diagnoses.rfc5322DomainLiteral);else{var T=O.slice(5),C=a.maxIPv6Groups,j=T.split(":");~(S=T.indexOf("::"))?S!==T.lastIndexOf("::")?l(a.diagnoses.rfc5322IPv62x2xColon):(0!==S&&S!==T.length-2||++C,j.length>C?l(a.diagnoses.rfc5322IPv6MaxGroups):j.length===C&&l(a.diagnoses.deprecatedIPv6)):j.length!==C&&l(a.diagnoses.rfc5322IPv6GroupCount),":"===T[0]&&":"!==T[1]?l(a.diagnoses.rfc5322IPv6ColonStart):":"===T[T.length-1]&&":"!==T[T.length-2]?l(a.diagnoses.rfc5322IPv6ColonEnd):a.checkIpV6(j)?l(a.diagnoses.rfc5321AddressLiteral):l(a.diagnoses.rfc5322IPv6BadCharacter)}}else l(a.diagnoses.rfc5322DomainLiteral);d.domain+=x,p.domains[v]+=x,g+=t.byteLength(x,"utf8"),f.prev=f.now,f.now=f.stack.pop();break;case"\\":l(a.diagnoses.rfc5322DomainLiteralOBSDText),f.stack.push(f.now),f.now=a.components.contextQuotedPair;break;case"\r":if(w===++k||"\n"!==e[k]){l(a.diagnoses.errCRNoLF);break}case" ":case"\t":l(a.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=a.components.contextFWS,h=x;break;default:if(127!==(y=x.codePointAt(0))&&a.c1Controls(y)||0===y||"["===x){l(a.diagnoses.errExpectingDTEXT);break}(a.c0Controls(y)||127===y)&&l(a.diagnoses.rfc5322DomainLiteralOBSDText),d.literal+=x,d.domain+=x,p.domains[v]+=x,g+=t.byteLength(x,"utf8")}break;case a.components.contextQuotedString:switch(x){case"\\":f.stack.push(f.now),f.now=a.components.contextQuotedPair;break;case"\r":if(w===++k||"\n"!==e[k]){l(a.diagnoses.errCRNoLF);break}case"\t":d.local+=" ",p.locals[v]+=" ",g+=t.byteLength(x,"utf8"),l(a.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=a.components.contextFWS,h=x;break;case'"':d.local+=x,p.locals[v]+=x,g+=t.byteLength(x,"utf8"),f.prev=f.now,f.now=f.stack.pop();break;default:127!==(y=x.codePointAt(0))&&a.c1Controls(y)||0===y||10===y?l(a.diagnoses.errExpectingQTEXT):(a.c0Controls(y)||127===y)&&l(a.diagnoses.deprecatedQTEXT),d.local+=x,p.locals[v]+=x,g+=t.byteLength(x,"utf8")}break;case a.components.contextQuotedPair:127!==(y=x.codePointAt(0))&&a.c1Controls(y)?l(a.diagnoses.errExpectingQPair):(y<31&&9!==y||127===y)&&l(a.diagnoses.deprecatedQP),f.prev=f.now,f.now=f.stack.pop();var D="\\"+x;switch(f.now){case a.components.contextComment:break;case a.components.contextQuotedString:d.local+=D,p.locals[v]+=D,g+=2;break;case a.components.literal:d.domain+=D,p.domains[v]+=D,g+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+f.now)}break;case a.components.contextComment:switch(x){case"(":f.stack.push(f.now),f.now=a.components.contextComment;break;case")":f.prev=f.now,f.now=f.stack.pop();break;case"\\":f.stack.push(f.now),f.now=a.components.contextQuotedPair;break;case"\r":if(w===++k||"\n"!==e[k]){l(a.diagnoses.errCRNoLF);break}case" ":case"\t":l(a.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=a.components.contextFWS,h=x;break;default:if(0===(y=x.codePointAt(0))||10===y||127!==y&&a.c1Controls(y)){l(a.diagnoses.errExpectingCTEXT);break}(a.c0Controls(y)||127===y)&&l(a.diagnoses.deprecatedCTEXT)}break;case a.components.contextFWS:if("\r"===h){if("\r"===x){l(a.diagnoses.errFWSCRLFx2);break}++m>1?l(a.diagnoses.deprecatedFWS):m=1}switch(x){case"\r":w!==++k&&"\n"===e[k]||l(a.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===h&&l(a.diagnoses.errFWSCRLFEnd),m=0,f.prev=f.now,f.now=f.stack.pop(),--k}h=x;break;default:throw new Error("unknown context: "+f.now)}if(c>a.categories.rfc5322)break}if(c<a.categories.rfc5322){var R=i.encode(d.domain).length;if(f.now===a.components.contextQuotedString)l(a.diagnoses.errUnclosedQuotedString);else if(f.now===a.components.contextQuotedPair)l(a.diagnoses.errBackslashEnd);else if(f.now===a.components.contextComment)l(a.diagnoses.errUnclosedComment);else if(f.now===a.components.literal)l(a.diagnoses.errUnclosedDomainLiteral);else if("\r"===x)l(a.diagnoses.errFWSCRLFEnd);else if(0===d.domain.length)l(a.diagnoses.errNoDomain);else if(0===g)l(a.diagnoses.errDotEnd);else if(b)l(a.diagnoses.errDomainHyphenEnd);else if(R>255)l(a.diagnoses.rfc5322DomainTooLong);else if(t.byteLength(d.local,"utf8")+R+1>254)l(a.diagnoses.rfc5322TooLong);else if(g>63)l(a.diagnoses.rfc5322LabelTooLong);else if(n.minDomainAtoms&&p.domains.length<n.minDomainAtoms)l(a.diagnoses.errDomainTooShort);else if(n.tldWhitelist||n.tldBlacklist){var M=p.domains[v];a.validDomain(M,n)||l(a.diagnoses.errUnknownTLD)}}c<a.categories.dnsWarn&&p.domains[v].codePointAt(0)<=57&&l(a.diagnoses.rfc5321TLDNumeric),c<u&&(c=a.diagnoses.valid);var P=s?c:c<a.defaultThreshold;return o&&o(P),P},e.diagnoses=a.validate.diagnoses=function(){for(var t={},e=Object.keys(a.diagnoses),n=0;n<e.length;++n){var r=e[n];t[r]=a.diagnoses[r]}return t}(),e.normalize=a.normalize}).call(e,n(3).Buffer)},function(t,e,n){"use strict";e.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hexAlign:"hex decoded representation must be byte aligned",base64:"must be a valid base64 string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"}}},function(t,e,n){"use strict";var r=n(8);e.options=r.object({abortEarly:r.boolean(),convert:r.boolean(),allowUnknown:r.boolean(),skipFunctions:r.boolean(),stripUnknown:[r.boolean(),r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects")],language:r.object(),presence:r.string().only("required","optional","forbidden","ignore"),raw:r.boolean(),context:r.object(),strip:r.boolean(),noDefaults:r.boolean(),escapeHtml:r.boolean()}).strict()},function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var a=n(2),o=n(4),s=n(1),u=n(0),c={fastSplice:function(t,e){for(var n=e;n<t.length;)t[n++]=t[n];--t.length}};c.Array=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="array",n._inner.items=[],n._inner.ordereds=[],n._inner.inclusions=[],n._inner.exclusions=[],n._inner.requireds=[],n._flags.sparse=!1,n}return i(e,t),e.prototype._base=function(t,e,n){var r={value:t};"string"===typeof t&&n.convert&&c.safeParse(t,r);var i=Array.isArray(r.value),a=i;if(n.convert&&this._flags.single&&!i&&(r.value=[r.value],i=!0),!i)return r.errors=this.createError("array.base",null,e,n),r;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(a&&(r.value=r.value.slice(0)),r.errors=this._checkItems.call(this,r.value,a,e,n),r.errors&&a&&n.convert&&this._flags.single)){var o=r.errors;r.value=[r.value],r.errors=this._checkItems.call(this,r.value,a,e,n),r.errors&&(r.errors=o,r.value=r.value[0])}return r},e.prototype._checkItems=function(t,e,n,r){for(var i=[],a=void 0,o=this._inner.requireds.slice(),s=this._inner.ordereds.slice(),u=this._inner.inclusions.concat(o),l=t.length,f=0;f<l;++f){a=!1;var h=t[f],d=!1,p={key:e?f:n.key,path:e?n.path.concat(f):n.path,parent:n.parent,reference:n.reference},v=void 0;if(this._flags.sparse||void 0!==h){for(var g=0;g<this._inner.exclusions.length;++g)if(!(v=this._inner.exclusions[g]._validate(h,p,{})).errors){if(i.push(this.createError(e?"array.excludes":"array.excludesSingle",{pos:f,value:h},{key:n.key,path:p.path},r)),a=!0,r.abortEarly)return i;s.shift();break}if(!a){if(this._inner.ordereds.length){if(s.length>0){var m=s.shift();if((v=m._validate(h,p,r)).errors){if(i.push(this.createError("array.ordered",{pos:f,reason:v.errors,value:h},{key:n.key,path:p.path},r)),r.abortEarly)return i}else if(m._flags.strip)c.fastSplice(t,f),--f,--l;else{if(!this._flags.sparse&&void 0===v.value){if(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),r.abortEarly)return i;continue}t[f]=v.value}continue}if(!this._inner.items.length){if(i.push(this.createError("array.orderedLength",{pos:f,limit:this._inner.ordereds.length},{key:n.key,path:p.path},r)),r.abortEarly)return i;continue}}for(var y=[],b=o.length,_=0;_<b;++_)if(!(v=y[_]=o[_]._validate(h,p,r)).errors){if(t[f]=v.value,d=!0,c.fastSplice(o,_),--_,--b,!this._flags.sparse&&void 0===v.value&&(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),r.abortEarly))return i;break}if(!d){var w=!!r.stripUnknown&&(!0===r.stripUnknown||!!r.stripUnknown.arrays);b=u.length;for(var x=0;x<b;++x){var k=u[x],E=o.indexOf(k);if(-1!==E)v=y[E];else if(!(v=k._validate(h,p,r)).errors){k._flags.strip?(c.fastSplice(t,f),--f,--l):this._flags.sparse||void 0!==v.value?t[f]=v.value:(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),a=!0),d=!0;break}if(1===b){if(w){c.fastSplice(t,f),--f,--l,d=!0;break}if(i.push(this.createError(e?"array.includesOne":"array.includesOneSingle",{pos:f,reason:v.errors,value:h},{key:n.key,path:p.path},r)),a=!0,r.abortEarly)return i;break}}if(!a&&this._inner.inclusions.length&&!d){if(w){c.fastSplice(t,f),--f,--l;continue}if(i.push(this.createError(e?"array.includes":"array.includesSingle",{pos:f,value:h},{key:n.key,path:p.path},r)),r.abortEarly)return i}}}}else{if(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),r.abortEarly)return i;s.shift()}}return o.length&&this._fillMissedErrors.call(this,i,o,n,r),s.length&&this._fillOrderedErrors.call(this,i,s,n,r),i.length?i:null},e.prototype.describe=function(){var t=a.prototype.describe.call(this);if(this._inner.ordereds.length){t.orderedItems=[];for(var e=0;e<this._inner.ordereds.length;++e)t.orderedItems.push(this._inner.ordereds[e].describe())}if(this._inner.items.length){t.items=[];for(var n=0;n<this._inner.items.length;++n)t.items.push(this._inner.items[n].describe())}return t},e.prototype.items=function(){for(var t=this,e=this.clone(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return u.flatten(r).forEach((function(n,r){try{n=o.schema(t._currentJoi,n)}catch(i){throw i.hasOwnProperty("path")?i.path=r+"."+i.path:i.path=r,i.message=i.message+"("+i.path+")",i}e._inner.items.push(n),"required"===n._flags.presence?e._inner.requireds.push(n):"forbidden"===n._flags.presence?e._inner.exclusions.push(n.optional()):e._inner.inclusions.push(n)})),e},e.prototype.ordered=function(){for(var t=this,e=this.clone(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return u.flatten(r).forEach((function(n,r){try{n=o.schema(t._currentJoi,n)}catch(i){throw i.hasOwnProperty("path")?i.path=r+"."+i.path:i.path=r,i.message=i.message+"("+i.path+")",i}e._inner.ordereds.push(n)})),e},e.prototype.min=function(t){var e=s.isRef(t);return u.assert(Number.isSafeInteger(t)&&t>=0||e,"limit must be a positive integer or reference"),this._test("min",t,(function(n,r,i){var a=void 0;if(e){if(a=t(r.reference||r.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:t.key},r,i)}else a=t;return n.length>=a?n:this.createError("array.min",{limit:t,value:n},r,i)}))},e.prototype.max=function(t){var e=s.isRef(t);return u.assert(Number.isSafeInteger(t)&&t>=0||e,"limit must be a positive integer or reference"),this._test("max",t,(function(n,r,i){var a=void 0;if(e){if(a=t(r.reference||r.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:t.key},r,i)}else a=t;return n.length<=a?n:this.createError("array.max",{limit:t,value:n},r,i)}))},e.prototype.length=function(t){var e=s.isRef(t);return u.assert(Number.isSafeInteger(t)&&t>=0||e,"limit must be a positive integer or reference"),this._test("length",t,(function(n,r,i){var a=void 0;if(e){if(a=t(r.reference||r.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:t.key},r,i)}else a=t;return n.length===a?n:this.createError("array.length",{limit:t,value:n},r,i)}))},e.prototype.unique=function(t){u.assert(void 0===t||"function"===typeof t||"string"===typeof t,"comparator must be a function or a string");var e={};return"string"===typeof t?e.path=t:"function"===typeof t&&(e.comparator=t),this._test("unique",e,(function(t,n,i){for(var a={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},o=e.comparator||u.deepEqual,s=0;s<t.length;++s){var c=e.path?u.reach(t[s],e.path):t[s],l=e.comparator?a.custom:a["undefined"===typeof c?"undefined":r(c)];if(l)if(l instanceof Map){for(var f=l.entries(),h=void 0;!(h=f.next()).done;)if(o(h.value[0],c)){var d={key:n.key,path:n.path.concat(s),parent:n.parent,reference:n.reference},p={pos:s,value:t[s],dupePos:h.value[1],dupeValue:t[h.value[1]]};return e.path&&(p.path=e.path),this.createError("array.unique",p,d,i)}l.set(c,s)}else{if(void 0!==l[c]){var v={key:n.key,path:n.path.concat(s),parent:n.parent,reference:n.reference},g={pos:s,value:t[s],dupePos:l[c],dupeValue:t[l[c]]};return e.path&&(g.path=e.path),this.createError("array.unique",g,v,i)}l[c]=s}}return t}))},e.prototype.sparse=function(t){var e=void 0===t||!!t;if(this._flags.sparse===e)return this;var n=this.clone();return n._flags.sparse=e,n},e.prototype.single=function(t){var e=void 0===t||!!t;if(this._flags.single===e)return this;var n=this.clone();return n._flags.single=e,n},e.prototype._fillMissedErrors=function(t,e,n,r){for(var i=[],a=0,o=0;o<e.length;++o){var s=e[o]._getLabel();s?i.push(s):++a}i.length?a?t.push(this.createError("array.includesRequiredBoth",{knownMisses:i,unknownMisses:a},{key:n.key,path:n.path},r)):t.push(this.createError("array.includesRequiredKnowns",{knownMisses:i},{key:n.key,path:n.path},r)):t.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:a},{key:n.key,path:n.path},r))},e.prototype._fillOrderedErrors=function(t,e,n,r){for(var i=[],a=0;a<e.length;++a)"required"===u.reach(e[a],"_flags.presence")&&i.push(e[a]);i.length&&this._fillMissedErrors.call(this,t,i,n,r)},e}(a),c.safeParse=function(t,e){try{var n=JSON.parse(t);Array.isArray(n)&&(e.value=n)}catch(r){}},t.exports=new c.Array},function(t,e,n){"use strict";(function(e){function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var i=n(2),a=n(0),o={};o.Binary=function(t){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return e._type="binary",e}return r(n,t),n.prototype._base=function(t,n,r){var i={value:t};if("string"===typeof t&&r.convert)try{i.value=e.from(t,this._flags.encoding)}catch(a){}return i.errors=e.isBuffer(i.value)?null:this.createError("binary.base",null,n,r),i},n.prototype.encoding=function(t){if(a.assert(e.isEncoding(t),"Invalid encoding:",t),this._flags.encoding===t)return this;var n=this.clone();return n._flags.encoding=t,n},n.prototype.min=function(t){return a.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("min",t,(function(e,n,r){return e.length>=t?e:this.createError("binary.min",{limit:t,value:e},n,r)}))},n.prototype.max=function(t){return a.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("max",t,(function(e,n,r){return e.length<=t?e:this.createError("binary.max",{limit:t,value:e},n,r)}))},n.prototype.length=function(t){return a.assert(Number.isSafeInteger(t)&&t>=0,"limit must be a positive integer"),this._test("length",t,(function(e,n,r){return e.length===t?e:this.createError("binary.length",{limit:t,value:e},n,r)}))},n}(i),t.exports=new o.Binary}).call(e,n(3).Buffer)},function(t,e,n){"use strict";function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var i=n(2),a=n(0),o={Set:n(9)};o.Boolean=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="boolean",n._flags.insensitive=!0,n._inner.truthySet=new o.Set,n._inner.falsySet=new o.Set,n}return r(e,t),e.prototype._base=function(t,e,n){var r={value:t};if("string"===typeof t&&n.convert){var i=this._flags.insensitive?t.toLowerCase():t;r.value="true"===i||"false"!==i&&t}return"boolean"!==typeof r.value&&(r.value=!!this._inner.truthySet.has(t,null,null,this._flags.insensitive)||!this._inner.falsySet.has(t,null,null,this._flags.insensitive)&&t),r.errors="boolean"===typeof r.value?null:this.createError("boolean.base",null,e,n),r},e.prototype.truthy=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.clone();e=a.flatten(e);for(var i=0;i<e.length;++i){var o=e[i];a.assert(void 0!==o,"Cannot call truthy with undefined"),r._inner.truthySet.add(o)}return r},e.prototype.falsy=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.clone();e=a.flatten(e);for(var i=0;i<e.length;++i){var o=e[i];a.assert(void 0!==o,"Cannot call falsy with undefined"),r._inner.falsySet.add(o)}return r},e.prototype.insensitive=function(t){var e=void 0===t||!!t;if(this._flags.insensitive===e)return this;var n=this.clone();return n._flags.insensitive=e,n},e.prototype.describe=function(){var t=i.prototype.describe.call(this);return t.truthy=[!0].concat(this._inner.truthySet.values()),t.falsy=[!1].concat(this._inner.falsySet.values()),t},e}(i),t.exports=new o.Boolean},function(t,e,n){"use strict";function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var i=n(0),a=n(13),o=n(1),s={};s.Func=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._flags.func=!0,n}return r(e,t),e.prototype.arity=function(t){return i.assert(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this._test("arity",t,(function(e,n,r){return e.length===t?e:this.createError("function.arity",{n:t},n,r)}))},e.prototype.minArity=function(t){return i.assert(Number.isSafeInteger(t)&&t>0,"n must be a strict positive integer"),this._test("minArity",t,(function(e,n,r){return e.length>=t?e:this.createError("function.minArity",{n:t},n,r)}))},e.prototype.maxArity=function(t){return i.assert(Number.isSafeInteger(t)&&t>=0,"n must be a positive integer"),this._test("maxArity",t,(function(e,n,r){return e.length<=t?e:this.createError("function.maxArity",{n:t},n,r)}))},e.prototype.ref=function(){return this._test("ref",null,(function(t,e,n){return o.isRef(t)?t:this.createError("function.ref",null,e,n)}))},e.prototype.class=function(){return this._test("class",null,(function(t,e,n){return/^\s*class\s/.test(t.toString())?t:this.createError("function.class",null,e,n)}))},e}(a.constructor),t.exports=new s.Func},function(t,e,n){"use strict";function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var i=n(2),a=n(0),o={};o.Lazy=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="lazy",n}return r(e,t),e.prototype._base=function(t,e,n){var r={value:t},a=this._flags.lazy;if(!a)return r.errors=this.createError("lazy.base",null,e,n),r;var o=a();return o instanceof i?o._validate(t,e,n):(r.errors=this.createError("lazy.schema",null,e,n),r)},e.prototype.set=function(t){a.assert("function"===typeof t,"You must provide a function as first argument");var e=this.clone();return e._flags.lazy=t,e},e}(i),t.exports=new o.Lazy},function(t,e,n){"use strict";function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var i=n(2),a=n(1),o=n(0),s={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};s.Number=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="number",n._invalids.add(1/0),n._invalids.add(-1/0),n}return r(e,t),e.prototype._base=function(t,e,n){var r={errors:null,value:t};if("string"===typeof t&&n.convert){var i=parseFloat(t);r.value=isNaN(i)||!isFinite(t)?NaN:i}var a="number"===typeof r.value&&!isNaN(r.value);if(n.convert&&"precision"in this._flags&&a){var o=Math.pow(10,this._flags.precision);r.value=Math.round(r.value*o)/o}return r.errors=a?null:this.createError("number.base",null,e,n),r},e.prototype.multiple=function(t){var e=a.isRef(t);return e||(o.assert("number"===typeof t&&isFinite(t),"multiple must be a number"),o.assert(t>0,"multiple must be greater than 0")),this._test("multiple",t,(function(n,r,i){var a=e?t(r.reference||r.parent,i):t;return!e||"number"===typeof a&&isFinite(a)?n%a===0?n:this.createError("number.multiple",{multiple:t,value:n},r,i):this.createError("number.ref",{ref:t.key},r,i)}))},e.prototype.integer=function(){return this._test("integer",void 0,(function(t,e,n){return Number.isSafeInteger(t)?t:this.createError("number.integer",{value:t},e,n)}))},e.prototype.negative=function(){return this._test("negative",void 0,(function(t,e,n){return t<0?t:this.createError("number.negative",{value:t},e,n)}))},e.prototype.positive=function(){return this._test("positive",void 0,(function(t,e,n){return t>0?t:this.createError("number.positive",{value:t},e,n)}))},e.prototype.precision=function(t){o.assert(Number.isSafeInteger(t),"limit must be an integer"),o.assert(!("precision"in this._flags),"precision already set");var e=this._test("precision",t,(function(e,n,r){var i=e.toString().match(s.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=t?e:this.createError("number.precision",{limit:t,value:e},n,r)}));return e._flags.precision=t,e},e.prototype.port=function(){return this._test("port",void 0,(function(t,e,n){return!Number.isSafeInteger(t)||t<0||t>65535?this.createError("number.port",{value:t},e,n):t}))},e}(i),s.compare=function(t,e){return function(n){var r=a.isRef(n),i="number"===typeof n&&!isNaN(n);return o.assert(i||r,"limit must be a number or reference"),this._test(t,n,(function(i,a,o){var s=void 0;if(r){if("number"!==typeof(s=n(a.reference||a.parent,o))||isNaN(s))return this.createError("number.ref",{ref:n.key},a,o)}else s=n;return e(i,s)?i:this.createError("number."+t,{limit:s,value:i},a,o)}))}},s.Number.prototype.min=s.compare("min",(function(t,e){return t>=e})),s.Number.prototype.max=s.compare("max",(function(t,e){return t<=e})),s.Number.prototype.greater=s.compare("greater",(function(t,e){return t>e})),s.Number.prototype.less=s.compare("less",(function(t,e){return t<e})),t.exports=new s.Number},function(t,e,n){"use strict";(function(e){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(e,i);a&&a.configurable&&void 0===t[i]&&Object.defineProperty(t,i,a)}}(t,e))}var a=n(15),o=n(0),s=void 0,u=n(2),c=n(1),l=n(12),f=n(30),h=n(29),d={uriRegex:f.createUriRegex(),ipRegex:h.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};d.String=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this));return n._type="string",n._invalids.add(""),n}return i(e,t),e.prototype._base=function(t,e,n){if("string"===typeof t&&n.convert){if(this._flags.normalize&&(t=t.normalize(this._flags.normalize)),this._flags.case&&(t="upper"===this._flags.case?t.toLocaleUpperCase():t.toLocaleLowerCase()),this._flags.trim&&(t=t.trim()),this._inner.replacements)for(var r=0;r<this._inner.replacements.length;++r){var i=this._inner.replacements[r];t=t.replace(i.pattern,i.replacement)}if(this._flags.truncate)for(var a=0;a<this._tests.length;++a){var o=this._tests[a];if("max"===o.name){t=t.slice(0,o.arg);break}}this._flags.byteAligned&&t.length%2!==0&&(t="0"+t)}return{value:t,errors:"string"===typeof t?null:this.createError("string.base",{value:t},e,n)}},e.prototype.insensitive=function(){if(this._flags.insensitive)return this;var t=this.clone();return t._flags.insensitive=!0,t},e.prototype.creditCard=function(){return this._test("creditCard",void 0,(function(t,e,n){for(var r=t.length,i=0,a=1;r--;){var o=t.charAt(r)*a;i+=o-9*(o>9),a^=3}return i%10===0&&i>0?t:this.createError("string.creditCard",{value:t},e,n)}))},e.prototype.regex=function(t,e){o.assert(t instanceof RegExp,"pattern must be a RegExp");var n={pattern:new RegExp(t.source,t.ignoreCase?"i":void 0)};"string"===typeof e?n.name=e:"object"===("undefined"===typeof e?"undefined":r(e))&&(n.invert=!!e.invert,e.name&&(n.name=e.name));var i=["string.regex",n.invert?".invert":"",n.name?".name":".base"].join("");return this._test("regex",n,(function(t,e,r){return n.pattern.test(t)^n.invert?t:this.createError(i,{name:n.name,pattern:n.pattern,value:t},e,r)}))},e.prototype.alphanum=function(){return this._test("alphanum",void 0,(function(t,e,n){return/^[a-zA-Z0-9]+$/.test(t)?t:this.createError("string.alphanum",{value:t},e,n)}))},e.prototype.token=function(){return this._test("token",void 0,(function(t,e,n){return/^\w+$/.test(t)?t:this.createError("string.token",{value:t},e,n)}))},e.prototype.email=function(t){return t&&(o.assert("object"===("undefined"===typeof t?"undefined":r(t)),"email options must be an object"),o.assert("undefined"===typeof t.checkDNS,"checkDNS option is not supported"),o.assert("undefined"===typeof t.tldWhitelist||"object"===r(t.tldWhitelist),"tldWhitelist must be an array or object"),o.assert("undefined"===typeof t.minDomainAtoms||Number.isSafeInteger(t.minDomainAtoms)&&t.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),o.assert("undefined"===typeof t.errorLevel||"boolean"===typeof t.errorLevel||Number.isSafeInteger(t.errorLevel)&&t.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",t,(function(e,r,i){s=s||n(19);try{var a=s.validate(e,t);if(!0===a||0===a)return e}catch(o){}return this.createError("string.email",{value:e},r,i)}))},e.prototype.ip=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=d.ipRegex;o.assert("object"===("undefined"===typeof t?"undefined":r(t)),"options must be an object"),t.cidr?(o.assert("string"===typeof t.cidr,"cidr must be a string"),t.cidr=t.cidr.toLowerCase(),o.assert(o.contain(d.cidrPresences,t.cidr),"cidr must be one of "+d.cidrPresences.join(", ")),t.version||"optional"===t.cidr||(e=h.createIpRegex(["ipv4","ipv6","ipvfuture"],t.cidr))):t.cidr="optional";var n=void 0;if(t.version){Array.isArray(t.version)||(t.version=[t.version]),o.assert(t.version.length>=1,"version must have at least 1 version specified"),n=[];for(var i=0;i<t.version.length;++i){var a=t.version[i];o.assert("string"===typeof a,"version at position "+i+" must be a string"),a=a.toLowerCase(),o.assert(h.versions[a],"version at position "+i+" must be one of "+Object.keys(h.versions).join(", ")),n.push(a)}n=o.unique(n),e=h.createIpRegex(n,t.cidr)}return this._test("ip",t,(function(r,i,a){return e.test(r)?r:n?this.createError("string.ipVersion",{value:r,cidr:t.cidr,version:n},i,a):this.createError("string.ip",{value:r,cidr:t.cidr},i,a)}))},e.prototype.uri=function(t){var e="",n=!1,i=!1,a=d.uriRegex;if(t){if(o.assert("object"===("undefined"===typeof t?"undefined":r(t)),"options must be an object"),t.scheme){o.assert(t.scheme instanceof RegExp||"string"===typeof t.scheme||Array.isArray(t.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(t.scheme)||(t.scheme=[t.scheme]),o.assert(t.scheme.length>=1,"scheme must have at least 1 scheme specified");for(var s=0;s<t.scheme.length;++s){var u=t.scheme[s];o.assert(u instanceof RegExp||"string"===typeof u,"scheme at position "+s+" must be a RegExp or String"),e+=e?"|":"",u instanceof RegExp?e+=u.source:(o.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(u),"scheme at position "+s+" must be a valid scheme"),e+=o.escapeRegex(u))}}t.allowRelative&&(n=!0),t.relativeOnly&&(i=!0)}return(e||n||i)&&(a=f.createUriRegex(e,n,i)),this._test("uri",t,(function(t,n,r){return a.test(t)?t:i?this.createError("string.uriRelativeOnly",{value:t},n,r):e?this.createError("string.uriCustomScheme",{scheme:e,value:t},n,r):this.createError("string.uri",{value:t},n,r)}))},e.prototype.isoDate=function(){return this._test("isoDate",void 0,(function(t,e,n){if(l._isIsoDate(t)){if(!n.convert)return t;var r=new Date(t);if(!isNaN(r.getTime()))return r.toISOString()}return this.createError("string.isoDate",{value:t},e,n)}))},e.prototype.guid=function(t){var e="";if(t&&t.version){Array.isArray(t.version)||(t.version=[t.version]),o.assert(t.version.length>=1,"version must have at least 1 valid version specified");for(var n=new Set,r=0;r<t.version.length;++r){var i=t.version[r];o.assert("string"===typeof i,"version at position "+r+" must be a string"),i=i.toLowerCase();var a=d.guidVersions[i];o.assert(a,"version at position "+r+" must be one of "+Object.keys(d.guidVersions).join(", ")),o.assert(!n.has(a),"version at position "+r+" must not be a duplicate."),e+=a,n.add(a)}}var s=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?["+(e||"0-9A-F")+"][0-9A-F]{3}\\2?["+(e?"89AB":"0-9A-F")+"][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$","i");return this._test("guid",t,(function(t,e,n){var r=s.exec(t);return r?d.guidBrackets[r[1]]!==r[r.length-1]?this.createError("string.guid",{value:t},e,n):t:this.createError("string.guid",{value:t},e,n)}))},e.prototype.hex=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assert("object"===("undefined"===typeof t?"undefined":r(t)),"hex options must be an object"),o.assert("undefined"===typeof t.byteAligned||"boolean"===typeof t.byteAligned,"byteAligned must be boolean");var e=!0===t.byteAligned,n=/^[a-f0-9]+$/i,i=this._test("hex",n,(function(t,r,i){return n.test(t)?e&&t.length%2!==0?this.createError("string.hexAlign",{value:t},r,i):t:this.createError("string.hex",{value:t},r,i)}));return e&&(i._flags.byteAligned=!0),i},e.prototype.base64=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assert("object"===("undefined"===typeof t?"undefined":r(t)),"base64 options must be an object"),o.assert("undefined"===typeof t.paddingRequired||"boolean"===typeof t.paddingRequired,"paddingRequired must be boolean");var e=!1===t.paddingRequired?t.paddingRequired:t.paddingRequired||!0,n=e?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",n,(function(t,e,r){return n.test(t)?t:this.createError("string.base64",{value:t},e,r)}))},e.prototype.hostname=function(){var t=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,(function(e,n,r){return e.length<=255&&t.test(e)||a.isIPv6(e)?e:this.createError("string.hostname",{value:e},n,r)}))},e.prototype.normalize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";o.assert(o.contain(d.normalizationForms,t),"normalization form must be one of "+d.normalizationForms.join(", "));var e=this._test("normalize",t,(function(e,n,r){return r.convert||e===e.normalize(t)?e:this.createError("string.normalize",{value:e,form:t},n,r)}));return e._flags.normalize=t,e},e.prototype.lowercase=function(){var t=this._test("lowercase",void 0,(function(t,e,n){return n.convert||t===t.toLocaleLowerCase()?t:this.createError("string.lowercase",{value:t},e,n)}));return t._flags.case="lower",t},e.prototype.uppercase=function(){var t=this._test("uppercase",void 0,(function(t,e,n){return n.convert||t===t.toLocaleUpperCase()?t:this.createError("string.uppercase",{value:t},e,n)}));return t._flags.case="upper",t},e.prototype.trim=function(){var t=this._test("trim",void 0,(function(t,e,n){return n.convert||t===t.trim()?t:this.createError("string.trim",{value:t},e,n)}));return t._flags.trim=!0,t},e.prototype.replace=function(t,e){"string"===typeof t&&(t=new RegExp(o.escapeRegex(t),"g")),o.assert(t instanceof RegExp,"pattern must be a RegExp"),o.assert("string"===typeof e,"replacement must be a String");var n=this.clone();return n._inner.replacements||(n._inner.replacements=[]),n._inner.replacements.push({pattern:t,replacement:e}),n},e.prototype.truncate=function(t){var e=void 0===t||!!t;if(this._flags.truncate===e)return this;var n=this.clone();return n._flags.truncate=e,n},e}(u),d.compare=function(t,n){return function(r,i){var a=c.isRef(r);return o.assert(Number.isSafeInteger(r)&&r>=0||a,"limit must be a positive integer or reference"),o.assert(!i||e.isEncoding(i),"Invalid encoding:",i),this._test(t,r,(function(e,o,s){var u=void 0;if(a){if(u=r(o.reference||o.parent,s),!Number.isSafeInteger(u))return this.createError("string.ref",{ref:r.key},o,s)}else u=r;return n(e,u,i)?e:this.createError("string."+t,{limit:u,value:e,encoding:i},o,s)}))}},d.String.prototype.min=d.compare("min",(function(t,n,r){return(r?e.byteLength(t,r):t.length)>=n})),d.String.prototype.max=d.compare("max",(function(t,n,r){return(r?e.byteLength(t,r):t.length)<=n})),d.String.prototype.length=d.compare("length",(function(t,n,r){return(r?e.byteLength(t,r):t.length)===n})),d.String.prototype.uuid=d.String.prototype.guid,t.exports=new d.String}).call(e,n(3).Buffer)},function(t,e,n){"use strict";var r=n(14),i={Ip:{cidrs:{ipv4:{required:"\\/(?:"+r.ipv4Cidr+")",optional:"(?:\\/(?:"+r.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+r.ipv6Cidr,optional:"(?:\\/"+r.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+r.ipv6Cidr,optional:"(?:\\/"+r.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:r.IPv4address,ipv6:r.IPv6address,ipvfuture:r.IPvFuture}}};i.Ip.createIpRegex=function(t,e){for(var n=void 0,r=0;r<t.length;++r){var a=t[r];n?n+="|"+i.Ip.versions[a]+i.Ip.cidrs[a][e]:n="^(?:"+i.Ip.versions[a]+i.Ip.cidrs[a][e]}return new RegExp(n+")$")},t.exports=i.Ip},function(t,e,n){"use strict";var r=n(14),i={Uri:{createUriRegex:function(t,e,n){var i=r.scheme,a=void 0;if(n)a="(?:"+r.relativeRef+")";else{t&&(i="(?:"+t+")");var o="(?:"+i+":"+r.hierPart+")";a=e?"(?:"+o+"|"+r.relativeRef+")":o}return new RegExp("^"+a+"(?:\\?"+r.query+")?(?:#"+r.fragment+")?$")}}};t.exports=i.Uri},function(t,e,n){"use strict";var r=n(0),i={};t.exports=i.Topo=function(){this._items=[],this.nodes=[]},i.Topo.prototype.add=function(t,e){var n=this,i=[].concat((e=e||{}).before||[]),a=[].concat(e.after||[]),o=e.group||"?",s=e.sort||0;r.assert(-1===i.indexOf(o),"Item cannot come before itself:",o),r.assert(-1===i.indexOf("?"),"Item cannot come before unassociated items"),r.assert(-1===a.indexOf(o),"Item cannot come after itself:",o),r.assert(-1===a.indexOf("?"),"Item cannot come after unassociated items"),[].concat(t).forEach((function(t,e){var r={seq:n._items.length,sort:s,before:i,after:a,group:o,node:t};n._items.push(r)}));var u=this._sort();return r.assert(!u,"item","?"!==o?"added into group "+o:"","created a dependencies error"),this.nodes},i.Topo.prototype.merge=function(t){t=[].concat(t);for(var e=0;e<t.length;++e){var n=t[e];if(n)for(var a=0;a<n._items.length;++a){var o=r.shallow(n._items[a]);this._items.push(o)}}this._items.sort(i.mergeSort);for(var s=0;s<this._items.length;++s)this._items[s].seq=s;var u=this._sort();return r.assert(!u,"merge created a dependencies error"),this.nodes},i.mergeSort=function(t,e){return t.sort===e.sort?0:t.sort<e.sort?-1:1},i.Topo.prototype._sort=function(){for(var t={},e=Object.create(null),n=Object.create(null),r=0;r<this._items.length;++r){var i=this._items[r],a=i.seq,o=i.group;n[o]=n[o]||[],n[o].push(a),t[a]=i.before;for(var s=i.after,u=0;u<s.length;++u)e[s[u]]=(e[s[u]]||[]).concat(a)}for(var c=Object.keys(t),l=0;l<c.length;++l){for(var f=c[l],h=[],d=Object.keys(t[f]),p=0;p<d.length;++p){var v=t[f][d[p]];n[v]=n[v]||[];for(var g=0;g<n[v].length;++g)h.push(n[v][g])}t[f]=h}for(var m=Object.keys(e),y=0;y<m.length;++y){var b=m[y];if(n[b])for(var _=0;_<n[b].length;++_){var w=n[b][_];t[w]=t[w].concat(e[b])}}var x=void 0,k={};c=Object.keys(t);for(var E=0;E<c.length;++E){var S=c[E];x=t[S];for(var O=0;O<x.length;++O)k[x[O]]=(k[x[O]]||[]).concat(S)}for(var A={},T=[],C=0;C<this._items.length;++C){var j=C;if(k[C]){j=null;for(var D=0;D<this._items.length;++D)if(!0!==A[D]){k[D]||(k[D]=[]);for(var R=k[D].length,M=0,P=0;P<R;++P)A[k[D][P]]&&++M;if(M===R){j=D;break}}}null!==j&&(A[j]=!0,T.push(j))}if(T.length!==this._items.length)return new Error("Invalid dependencies");for(var F={},N=0;N<this._items.length;++N){var L=this._items[N];F[L.seq]=L}var I=[];this._items=T.map((function(t){var e=F[t];return I.push(e.node),e})),this.nodes=I}},function(t,e,n){"use strict";var r=n(8);t.exports=r},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,r,o,s,u=t.length;o=c(t),s=new a(3*u/4-o),n=o>0?u-4:u;var l=0;for(e=0;e<n;e+=4)r=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return 2===o?(r=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[l++]=255&r):1===o&&(r=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a="",o=[],s=0,u=n-i;s<u;s+=16383)o.push(l(t,s,s+16383>u?u:s+16383));return 1===i?(e=t[n-1],a+=r[e>>2],a+=r[e<<4&63],a+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],a+=r[e>>10],a+=r[e>>4&63],a+=r[e<<2&63],a+="="),o.push(a),o.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+t[e+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+t[e+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+d]=255&o,d+=p,o/=256,c-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports={_args:[["joi@13.4.0","/Users/jeff/projects/joi-browser"]],_development:!0,_from:"joi@13.4.0",_id:"joi@13.4.0",_inBundle:!1,_integrity:"sha512-JuK4GjEu6j7zr9FuVe2MAseZ6si/8/HaY0qMAejfDFHp7jcH4OKE937mIHM5VT4xDS0q7lpQbszbxKV9rm0yUg==",_location:"/joi",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"joi@13.4.0",name:"joi",escapedName:"joi",rawSpec:"13.4.0",saveSpec:null,fetchSpec:"13.4.0"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/joi/-/joi-13.4.0.tgz",_spec:"13.4.0",_where:"/Users/jeff/projects/joi-browser",bugs:{url:"https://github.com/hapijs/joi/issues"},dependencies:{hoek:"5.x.x",isemail:"3.x.x",topo:"3.x.x"},description:"Object schema validation",devDependencies:{code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x"},engines:{node:">=8.9.0"},homepage:"https://github.com/hapijs/joi",keywords:["hapi","schema","validation"],license:"BSD-3-Clause",main:"lib/index.js",name:"joi",repository:{type:"git",url:"git://github.com/hapijs/joi.git"},scripts:{test:"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md"},version:"13.4.0"}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return r.exec(t).slice(1)};function a(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var o=i>=0?arguments[i]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return(r?"/":"")+(e=n(a(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var r=e.isAbsolute(t),i="/"===o(t,-1);return(t=n(a(t.split("/"),(function(t){return!!t})),!r).join("/"))||r||(t="."),t&&i&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(a(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return(c=c.concat(a.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return i(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n(7))},function(t,e,n){(function(t,r){var i;!function(a){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var s,u=2147483647,c=36,l=1,f=26,h=38,d=700,p=72,v=128,g="-",m=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-l,x=Math.floor,k=String.fromCharCode;function E(t){throw new RangeError(_[t])}function S(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function O(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+S((t=t.replace(b,".")).split("."),e).join(".")}function A(t){for(var e,n,r=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function T(t){return S(t,(function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)})).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function j(t,e,n){var r=0;for(t=n?x(t/d):t>>1,t+=x(t/e);t>w*f>>1;r+=c)t=x(t/w);return x(r+(w+1)*t/(t+h))}function D(t){var e,n,r,i,a,o,s,h,d,m,y,b=[],_=t.length,w=0,k=v,S=p;for((n=t.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),b.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(a=w,o=1,s=c;i>=_&&E("invalid-input"),((h=(y=t.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||h>x((u-w)/o))&&E("overflow"),w+=h*o,!(h<(d=s<=S?l:s>=S+f?f:s-S));s+=c)o>x(u/(m=c-d))&&E("overflow"),o*=m;S=j(w-a,e=b.length+1,0==a),x(w/e)>u-k&&E("overflow"),k+=x(w/e),w%=e,b.splice(w++,0,k)}return T(b)}function R(t){var e,n,r,i,a,o,s,h,d,m,y,b,_,w,S,O=[];for(b=(t=A(t)).length,e=v,n=0,a=p,o=0;o<b;++o)(y=t[o])<128&&O.push(k(y));for(r=i=O.length,i&&O.push(g);r<b;){for(s=u,o=0;o<b;++o)(y=t[o])>=e&&y<s&&(s=y);for(s-e>x((u-n)/(_=r+1))&&E("overflow"),n+=(s-e)*_,e=s,o=0;o<b;++o)if((y=t[o])<e&&++n>u&&E("overflow"),y==e){for(h=n,d=c;!(h<(m=d<=a?l:d>=a+f?f:d-a));d+=c)S=h-m,w=c-m,O.push(k(C(m+S%w,0))),h=x(S/w);O.push(k(C(h,0))),a=j(n,_,r==i),n=0,++r}++n,++e}return O.join("")}s={version:"1.4.1",ucs2:{decode:A,encode:T},decode:D,encode:R,toASCII:function(t){return O(t,(function(t){return y.test(t)?"xn--"+R(t):t}))},toUnicode:function(t){return O(t,(function(t){return m.test(t)?D(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(e,n(41)(t),n(5))},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"===typeof t&&"function"===typeof t.copy&&"function"===typeof t.fill&&"function"===typeof t.readUInt8}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}])},t.exports=r()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.post=e.configure=void 0;var r=f(n(61)),i=f(n(25)),a=f(n(26)),o=e.configure=function(){var t=(0,a.default)(i.default.mark((function t(e){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={baseUrl:l.ATHENA_URL_ROOT,jwt:!1,parse:null},e&&(n.token="JWT "+e),d.configure(n);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s=e.post=function(){var t=(0,a.default)(i.default.mark((function t(e,n){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:return t.abrupt("return",new r.default((function(t,r){d.post(e,{body:n,json:!0},(0,c.default)(t,r))})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}();e.postJsonRpcPayload=function(t,e){return s(t,e)};var u=f(n(106)),c=f(n(70)),l=n(110);function f(t){return t&&t.__esModule?t:{default:t}}var h,d=(0,u.default)();function p(){return h||(h=o()),h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refreshAccessToken=void 0;var r=o(n(25)),i=o(n(26)),a=(e.refreshAccessToken=function(){var t=(0,i.default)(r.default.mark((function t(e,n){var i,o;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.postForm("v2/auth/",{code:e,redirect_uri:n});case 2:if(i=t.sent,null==(o=JSON.parse(i)).access_token){t.next=10;break}return t.next=7,a.configure(o.access_token);case 7:return t.abrupt("return",o.access_token);case 10:if(void 0===o.response){t.next=14;break}throw new Error("Could not exchange oauth code for access token: response "+o.response.status);case 14:throw new Error("Could not exchange oauth code for access token: response "+i);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34)));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fetchLocation=void 0;var r=s(n(25)),i=s(n(324)),a=s(n(26));e.fetchLocation=function(){var t=(0,a.default)(r.default.mark((function t(e){var n,a;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="v1/devices/"+e+"/location",t.next=3,o.get(n);case 3:if(void 0===(a=t.sent)||void 0!==a.error){t.next=8;break}return t.abrupt("return",a);case 8:throw Error("Could not fetch device location: "+(0,i.default)(a));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();e.listDevices=function(){return o.get("v1/me/devices/")},e.setDeviceAlias=function(t,e){return o.patch("v1/devices/"+t+"/",{alias:e})},e.setDeviceVehicleId=function(t,e){return o.patch("v1/devices/"+t+"/",{vehicle_id:e})},e.grantDeviceReadPermission=function(t,e){return o.post("v1/devices/"+t+"/add_user",{email:e})},e.removeDeviceReadPermission=function(t,e){return o.post("v1/devices/"+t+"/del_user",{email:e})},e.fetchVehicles=function(t){var e="v1/vehicles/"+t;return o.get(e)},e.fetchDevice=function(t){var e="v1.1/devices/"+t+"/";return o.get(e)},e.pilotPair=function(t,e,n){return o.postForm("v2/pilotpair/",{imei:t,serial:e,pair_token:n})},e.fetchDeviceStats=function(t){return o.get("v1/devices/"+t+"/stats")},e.unpair=function(t){return o.post("v1/devices/"+t+"/unpair")};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){t.exports={default:n(325),__esModule:!0}},function(t,e,n){var r=n(18),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(25)),i=s(n(26));e.default=function(t){var e=(0,o.default)(),n=t+"/";return e.configure({baseUrl:n,parse:null}),{getCoords:function(){var t=(0,i.default)(r.default.mark((function t(){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("route.coords");case 2:return n=t.sent,t.abrupt("return",JSON.parse(n));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getJpegUrl:function(t){return(0,a.default)(n,"sec"+t.toString()+".jpg")}}};var a=s(n(109)),o=s(n(156));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fetchRoutes=void 0;var r=u(n(328)),i=u(n(155)),a=u(n(25)),o=u(n(26));e.fetchRoutes=function(){var t=(0,o.default)(a.default.mark((function t(e,n,r){var i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(n,r,e);case 2:return i=t.sent,i=f(n,r,i),t.abrupt("return",h(i).reverse());case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}();e.getSegmentMetadata=l,e.getRouteInfo=function(t){return s.get("v1/route/"+t+"/")},e.getShareSignature=function(t){return s.get("v1/route/"+t+"/share_signature")},e.getRouteSegments=function(t){return s.get("v1/route/"+t+"/segments")},e.listRoutes=function(t,e,n){var r={limit:e};"undefined"!==typeof n&&(r.createdAfter=n);return s.get("v1/devices/"+t+"/routes",r)};var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34));function u(t){return t&&t.__esModule?t:{default:t}}var c=6e4;function l(t,e,n){return s.get("v1/devices/"+n+"/segments",{from:t,to:e})}function f(t,e,n){var r={};return n.map((function(e){if(e.offset=Math.round(e.start_time_utc_millis)-t,r[e.canonical_route_name])e.routeOffset=r[e.canonical_route_name];else{var n=Number(e.canonical_name.split("--")[2]);e.segment=n,r[e.canonical_route_name]=n>0?e.offset-c*n:e.offset,e.routeOffset=r[e.canonical_route_name]}return e.offset,e.duration=Math.round(e.end_time_utc_millis-e.start_time_utc_millis),e}))}function h(t){var e=null,n=null,a=[];return t.forEach((function(t){if(t.url&&40===t.proc_log){var r=t.proc_dcamera>=0,s=40===t.proc_dcamera,u=40===t.proc_camera;if(u&&null===n&&(n=t.offset),t.start_time_utc_millis,!e||e.route!==t.canonical_route_name){e&&o(e);var l=t.url,f=l.split("/");(0,i.default)(Number(f.pop()))&&(l=f.join("/")),e={dongleId:t.dongle_id,offset:t.offset-t.segment*c,route:t.canonical_route_name,startTime:t.start_time_utc_millis,startCoord:[t.start_lng,t.start_lat],duration:0,segments:0,url:l.replace("chffrprivate.blob.core.windows.net","chffrprivate-vzn.azureedge.net"),events:[],videoAvailableBetweenOffsets:[],hasVideo:u,deviceType:t.devicetype,hpgps:t.hpgps,hasDriverCamera:r,hasDriverCameraStream:s,locStart:"",locEnd:"",distanceMiles:0,cameraStreamSegCount:0,driverCameraStreamSegCount:0},a.push(e)}u||null===n||(e.videoAvailableBetweenOffsets.push([n,t.offset]),n=null),e.hasVideo=e.hasVideo||u,e.hasDriverCamera=e.hasDriverCamera||r,e.hasDriverCameraStream=e.hasDriverCameraStream||s,e.hpgps=e.hpgps||t.hpgps,e.duration=t.offset-e.offset+t.duration,e.segments=Math.max(e.segments,Number(t.canonical_name.split("--").pop())+1),e.events=e.events.concat(t.events),e.endCoord=[t.end_lng,t.end_lat],e.distanceMiles+=t.length,e.cameraStreamSegCount+=Math.floor(u),e.driverCameraStreamSegCount+=Math.floor(s)}})),e&&o(e),a;function o(t){if(t.hasVideo){var e=t.videoAvailableBetweenOffsets[t.videoAvailableBetweenOffsets.length-1]||[t.offset,t.offset+t.duration];t.videoAvailableBetweenOffsets=[].concat((0,r.default)(t.videoAvailableBetweenOffsets.slice(0,t.videoAvailableBetweenOffsets.length-1)),[[e[0],t.offset+t.duration]])}}}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(329),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,a.default)(t)}},function(t,e,n){t.exports={default:n(330),__esModule:!0}},function(t,e,n){n(51),n(331),t.exports=n(18).Array.from},function(t,e,n){"use strict";var r=n(43),i=n(27),a=n(101),o=n(139),s=n(140),u=n(97),c=n(332),l=n(103);i(i.S+i.F*!n(145)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,f,h=a(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,m=0,y=l(h);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(n=new d(e=u(h.length));e>m;m++)c(n,m,g?v(h[m],m):h[m]);else for(f=y.call(h),n=new d;!(i=f.next()).done;m++)c(n,m,g?o(f,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(33),i=n(53);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLeaderboard=function(){return r.get("v2/leaderboard/")};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(25)),i=u(n(26)),a=function(){var t=(0,i.default)(r.default.mark((function t(e,n,i){var a,u;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c[n]){t.next=2;break}return t.abrupt("return",c[n]);case 2:return a="v1/route/"+n+"/"+e,void 0!==i&&(a+="?"+o.default.stringify(i)),t.next=6,s.get(a);case 6:return u=t.sent,c[n]=u,setTimeout((function(){delete c[n]}),27e5),t.abrupt("return",c[n]);case 10:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}();e.getRouteFiles=function(t){return a("files",t)},e.getLogUrls=function(t,e){return a("log_urls",t,e)};var o=u(n(105)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34));function u(t){return t&&t.__esModule?t:{default:t}}var c={}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fetchMakes=function(){return r.get("v1/vehicles/makes/")},e.fetchModels=function(t){return r.get("v1/vehicles/makes/"+t)},e.fetchVehicle=function(t){return r.get("v1/vehicles/"+t.toString())};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(157));e.default=function(t,e){e||(e=o.VIDEO_HOST);var n=t.split("/").slice(5,7),s=(0,r.default)(n,2),u=s[0],c=s[1],l=(0,a.default)(),f=e+"/hls/"+u+"/"+c+"/";return l.configure({baseUrl:f,parse:null}),{getRearCameraStreamIndexUrl:function(){return(0,i.default)(f,"index.m3u8")},getFrontCameraStreamIndexUrl:function(){return(0,i.default)(f,"dcamera/index.m3u8")},getRearCameraStreamIndex:function(){return l.get("index.m3u8")},getFrontCameraStreamIndexPath:function(){return l.get("dcamera/index.m3u8")}}};var i=s(n(109)),a=s(n(156)),o=n(110);function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){t.exports={default:n(338),__esModule:!0}},function(t,e,n){n(66),n(51),t.exports=n(339)},function(t,e,n){var r=n(102),i=n(23)("iterator"),a=n(44);t.exports=n(18).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||a.hasOwnProperty(r(e))}},function(t,e,n){t.exports={default:n(341),__esModule:!0}},function(t,e,n){n(66),n(51),t.exports=n(342)},function(t,e,n){var r=n(28),i=n(103);t.exports=n(18).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(25)),i=f(n(26)),a=f(n(112)),o=f(n(158)),s=n(159),u=f(n(160)),c=n(161),l=(f(n(113)),f(n(162)));function f(t){return t&&t.__esModule?t:{default:t}}var h=(0,u.default)(),d=(0,u.default)(),p=(0,u.default)(),v=function(){function e(t,n){(0,a.default)(this,e),this.usb=n,this.device=null,this.onError=(0,c.partial)(h.listen,this),this.onConnect=(0,c.partial)(d.listen,this),this.onDisconnect=(0,c.partial)(p.listen,this)}return(0,o.default)(e,[{key:"connect",value:function(){var t=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.requestDevice({filters:[{vendorId:48042}]});case 2:return this.device=t.sent,t.next=5,this.device.open();case 5:return t.next=7,this.device.selectConfiguration(1);case 7:return t.next=9,this.device.claimInterface(0);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"disconnect",value:function(){var t=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.device){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,this.device.close();case 4:return this.device=null,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"vendorRequest",value:function(){var e=(0,i.default)(r.default.mark((function e(n,i){var a,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={requestType:"vendor",recipient:"device",request:n.request,value:n.value,index:n.index},e.next=3,this.device.controlTransferIn(a,i);case 3:return o=e.sent,o={data:t.from(o.data.buffer),status:o.status},e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"vendorWrite",value:function(){var t=(0,i.default)(r.default.mark((function t(e,n){var i;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={requestType:"vendor",recipient:"device",request:e.request,value:e.value,index:e.index},t.next=3,this.device.controlTransferOut(i,n);case 3:return t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"nextFakeMessage",value:function(){var t=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.default)(10);case 2:return t.abrupt("return",(0,s.packCAN)({address:0,busTime:~~(65e3*Math.random()),data:"".padEnd(16,"0"),bus:0}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"nextMessage",value:function(){var t=(0,i.default)(r.default.mark((function t(){var e,n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=null,n=0;case 2:if(null!==e){t.next=17;break}return t.prev=3,t.next=6,this.device.transferIn(1,4096);case 6:e=t.sent,t.next=15;break;case 9:return t.prev=9,t.t0=t.catch(3),console.warn("can_recv failed, retrying"),n=Math.min(++n,10),t.next=15,(0,l.default)(100*n);case 15:t.next=2;break;case 17:return t.abrupt("return",e.data.buffer);case 18:case"end":return t.stop()}}),t,this,[[3,9]])})));return function(){return t.apply(this,arguments)}}()}]),e}();e.default=v}).call(this,n(20).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),o=r[0],s=r[1],u=new a(function(t,e,n){return 3*(e+n)/4-n}(0,o,s)),l=0,f=s>0?o-4:o;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+t[e+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+t[e+f],f+=h,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+d]=255&o,d+=p,o/=256,c-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports={default:n(348),__esModule:!0}},function(t,e,n){n(349);var r=n(18).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(27);r(r.S+r.F*!n(36),"Object",{defineProperty:n(33).f})},function(t,e){function n(t){this.fn=t,this.deleted=!1}t.exports=function(){var t=[];return{broadcast:function(e){for(var n=t.slice(),r=0;r<n.length;r++)n[r].deleted||n[r].fn(e)},listen:function(e){return t.push(new n(e)),function(){for(var n=0;n<t.length;n++)if(t[n].fn===e){t[n].deleted=!0,t.splice(n,1);break}}}}}},function(t,e,n){var r=n(352);t.exports=function(){var t={};return function(e){if(("object"!==typeof e||null===e)&&"function"!==typeof e)throw new Error("Weakmap-shim: Key must be object");var n=e.valueOf(t);return n&&n.identity===t?n:r(e,t)}}},function(t,e){t.exports=function(t,e){var n={identity:e},r=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?r.apply(this,arguments):n},writable:!0}),n}},function(t,e,n){"use strict";var r=n(69);function i(t,e){return Object.keys(t()).forEach(e)}t.exports=function(t){return function(e,n){var a=r(e);function o(r){t(e[r],n)}i(e,o),e((function(){i(e,(function(t){a[t]!==e[t]&&o(t)})),a=r(e)}))}}},function(t,e,n){"use strict";var r=n(69);t.exports=function(t){return function(e,n){var i=r(e._list);e.forEach((function(e){t(e,n)})),e((function(a){if(!e.getLength())return;a._diff.forEach((function(r){for(var a=r[0];a<r.length;a++)i[a]!==e.get(a)&&e.get(a)&&t(e.get(a),n)})),i=r(e._list)}))}}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(163),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":(0,a.default)(e))&&"function"!==typeof e?t:e}},function(t,e,n){t.exports={default:n(357),__esModule:!0}},function(t,e,n){n(51),n(66),t.exports=n(114).f("iterator")},function(t,e,n){t.exports={default:n(359),__esModule:!0}},function(t,e,n){n(360),n(133),n(365),n(366),t.exports=n(18).Symbol},function(t,e,n){"use strict";var r=n(21),i=n(40),a=n(36),o=n(27),s=n(136),u=n(361).KEY,c=n(63),l=n(99),f=n(65),h=n(64),d=n(23),p=n(114),v=n(115),g=n(362),m=n(363),y=n(28),b=n(35),_=n(101),w=n(45),x=n(94),k=n(53),E=n(95),S=n(364),O=n(166),A=n(164),T=n(33),C=n(96),j=O.f,D=T.f,R=S.f,M=r.Symbol,P=r.JSON,F=P&&P.stringify,N=d("_hidden"),L=d("toPrimitive"),I={}.propertyIsEnumerable,B=l("symbol-registry"),U=l("symbols"),z=l("op-symbols"),q=Object.prototype,W="function"==typeof M&&!!A.f,H=r.QObject,G=!H||!H.prototype||!H.prototype.findChild,Y=a&&c((function(){return 7!=E(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=j(q,e);r&&delete q[e],D(t,e,n),r&&t!==q&&D(q,e,r)}:D,V=function(t){var e=U[t]=E(M.prototype);return e._k=t,e},$=W&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},X=function(t,e,n){return t===q&&X(z,e,n),y(t),e=x(e,!0),y(n),i(U,e)?(n.enumerable?(i(t,N)&&t[N][e]&&(t[N][e]=!1),n=E(n,{enumerable:k(0,!1)})):(i(t,N)||D(t,N,k(1,{})),t[N][e]=!0),Y(t,e,n)):D(t,e,n)},K=function(t,e){y(t);for(var n,r=g(e=w(e)),i=0,a=r.length;a>i;)X(t,n=r[i++],e[n]);return t},J=function(t){var e=I.call(this,t=x(t,!0));return!(this===q&&i(U,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,N)&&this[N][t])||e)},Z=function(t,e){if(t=w(t),e=x(e,!0),t!==q||!i(U,e)||i(z,e)){var n=j(t,e);return!n||!i(U,e)||i(t,N)&&t[N][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=R(w(t)),r=[],a=0;n.length>a;)i(U,e=n[a++])||e==N||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===q,r=R(n?z:w(t)),a=[],o=0;r.length>o;)!i(U,e=r[o++])||n&&!i(q,e)||a.push(U[e]);return a};W||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function e(n){this===q&&e.call(z,n),i(this,N)&&i(this[N],t)&&(this[N][t]=!1),Y(this,t,k(1,n))};return a&&G&&Y(q,t,{configurable:!0,set:e}),V(t)}).prototype,"toString",(function(){return this._k})),O.f=Z,T.f=X,n(165).f=S.f=Q,n(116).f=J,A.f=tt,a&&!n(52)&&s(q,"propertyIsEnumerable",J,!0),p.f=function(t){return V(d(t))}),o(o.G+o.W+o.F*!W,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=C(d.store),it=0;rt.length>it;)v(rt[it++]);o(o.S+o.F*!W,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=M(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!W,"Object",{create:function(t,e){return void 0===e?E(t):K(E(t),e)},defineProperty:X,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:tt});var at=c((function(){A.f(1)}));o(o.S+o.F*at,"Object",{getOwnPropertySymbols:function(t){return A.f(_(t))}}),P&&o(o.S+o.F*(!W||c((function(){var t=M();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!$(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!$(e))return e}),r[1]=e,F.apply(P,r)}}),M.prototype[L]||n(39)(M.prototype,L,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(64)("meta"),i=n(35),a=n(40),o=n(33).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(63)((function(){return u(Object.preventExtensions({}))})),l=function(t){o(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!a(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!a(t,r)&&l(t),t}}},function(t,e,n){var r=n(96),i=n(164),a=n(116);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,s=n(t),u=a.f,c=0;s.length>c;)u.call(t,o=s[c++])&&e.push(o);return e}},function(t,e,n){var r=n(54);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(45),i=n(165).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?function(t){try{return i(t)}catch(e){return o.slice()}}(t):i(r(t))}},function(t,e,n){n(115)("asyncIterator")},function(t,e,n){n(115)("observable")},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(368)),i=o(n(372)),a=o(n(163));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":(0,a.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(369),__esModule:!0}},function(t,e,n){n(370),t.exports=n(18).Object.setPrototypeOf},function(t,e,n){var r=n(27);r(r.S,"Object",{setPrototypeOf:n(371).set})},function(t,e,n){var r=n(35),i=n(28),a=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(43)(Function.call,n(166).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){t.exports={default:n(373),__esModule:!0}},function(t,e,n){n(374);var r=n(18).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(27);r(r.S,"Object",{create:n(95)})},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=v(n(157)),i=v(n(25)),a=v(n(26)),o=v(n(112)),s=v(n(158)),u=n(159),c=v(n(160)),l=n(161),f=v(n(113)),h=v(n(376)),d=n(377),p=v(n(162));function v(t){return t&&t.__esModule?t:{default:t}}var g=(0,c.default)(),m=(0,c.default)(),y=(0,c.default)(),b=(0,c.default)(),_=function(){function e(t){(0,o.default)(this,e),this.onMessage=(0,l.partial)(g.listen,this),this.onError=(0,l.partial)(m.listen,this),this.onConnect=(0,l.partial)(y.listen,this),this.onDisconnect=(0,l.partial)(b.listen,this),this.device=t.device,this.device.onError((0,l.partial)(m.broadcast,this)),this.device.onConnect(this.connectHandler.bind(this)),this.device.onDisconnect(this.disconnectHandler.bind(this)),this.paused=!0,this.messageQueue=[],this.readLoop=this.readLoop.bind(this),this.flushMessageQueue=this.flushMessageQueue.bind(this)}return(0,s.default)(e,[{key:"isConnected",value:function(){return!!this.connected}},{key:"isPaused",value:function(){return!!this.paused}},{key:"connect",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isConnected()){t.next=2;break}return t.abrupt("return",this.connected);case 2:return t.next=4,this.device.connect();case 4:return t.next=6,this.getSerialNumber();case 6:return e=t.sent,this.connectHandler(e),t.abrupt("return",e);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"disconnect",value:function(){var t=(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isConnected()){t.next=2;break}return t.abrupt("return",!1);case 2:return t.abrupt("return",this.device.disconnect());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"start",value:function(){var t=(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connect();case 2:return t.abrupt("return",this.unpause());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"pause",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.isPaused(),this.paused=!0,t.abrupt("return",!e);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"resume",value:function(){var t=(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.unpause());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"unpause",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.isPaused()){t.next=3;break}return t.abrupt("return",!1);case 3:return this.paused=!1,this.startReading(),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getHealth",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e,n,r,a,o,s,u,c;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorRequest("health",{request:210,value:0,index:0},13);case 2:return e=t.sent,n=e.readUInt32LE(0)/1e3,r=e.readUInt32LE(4)/1e3,a=1===e.readInt8(8),o=1===e.readInt8(9),s=1===e.readInt8(10),u=1===e.readInt8(11),c=1===e.readInt8(12),t.abrupt("return",{voltage:n,current:r,isStarted:a,controlsAreAllowed:o,isGasInterceptorDetector:s,isStartSignalDetected:u,isStartedAlt:c});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDeviceMetadata",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e,n,r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorRequest("getDeviceMetadata",{request:208,value:0,index:0},32);case 2:return e=t.sent,n=e.slice(0,16),r=e.slice(16,26),e.slice(28),t.abrupt("return",[n.toString(),r.toString()]);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSerialNumber",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e,n,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDeviceMetadata();case 2:return e=t.sent,n=(0,r.default)(e,2),a=n[0],n[1],t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSecret",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e,n,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDeviceMetadata();case 2:return e=t.sent,n=(0,r.default)(e,2),n[0],a=n[1],t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getVersion",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorRequest("getVersion",{request:214,value:0,index:0},64);case 2:return e=t.sent,t.abrupt("return",e.toString());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isGrey",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorRequest("isGrey",{request:193,value:0,index:0},64);case 2:return e=t.sent,t.abrupt("return",!(!e.length||1!==e[0]));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setSafetyMode",value:function(){var t=(0,a.default)(i.default.mark((function t(e){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorWrite("setSafetyMode",{request:220,value:e,index:0});case 2:return n=t.sent,t.abrupt("return",n.toString());case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"vendorRequest",value:function(){var t=(0,a.default)(i.default.mark((function t(e,n,r){var a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.device.vendorRequest(n,r);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),m.broadcast(this,{event:"Panda."+e+" failed",error:t.t0}),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"vendorWrite",value:function(){var e=(0,a.default)(i.default.mark((function e(n,r,a){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a&&a.length||(a=t.from([])),e.prev=1,e.next=4,this.device.vendorWrite(r,a);case 4:return o=e.sent,e.abrupt("return",o.data);case 8:throw e.prev=8,e.t0=e.catch(1),m.broadcast(this,{event:"Panda."+n+" failed",error:e.t0}),e.t0;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"connectHandler",value:function(t){this.connected=t,y.broadcast(this,t)}},{key:"disconnectHandler",value:function(){var t=this.connected;this.connected=!1,this.paused=!0,b.broadcast(this,t)}},{key:"needsFlushMessageQueue",value:function(){var t=this;if(this.needsFlush=!0,this.flushEvent)return this.flushEvent;var e=(0,h.default)(this.flushMessageQueue);return this.flushEvent=function(){h.default.cancel(e),t.flushEvent=!1},this.flushEvent}},{key:"flushMessageQueue",value:function(){if(this.flushEvent(),this.needsFlush&&this.messageQueue.length){var t=this.messageQueue;this.messageQueue=[],this.needsFlush=!1,g.broadcast(this,t)}}},{key:"startReading",value:function(){return!!this.isReading||!this.isPaused()&&(this.isReading=!0,void this.readLoop())}},{key:"readLoop",value:function(){var t=(0,a.default)(i.default.mark((function t(){var e,n,r,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isPaused()){t.next=3;break}return this.isReading=!1,t.abrupt("return",!1);case 3:this.isReading=!0,e=0;case 5:if(!(e<5e3)){t.next=20;break}return t.next=8,this.device.nextMessage();case 8:if(n=t.sent,r=(0,f.default)()/1e3,(a=(0,u.unpackCAN)(n)).length){t.next=15;break}return t.next=14,(0,p.default)(1);case 14:return t.abrupt("continue",17);case 15:this.messageQueue.push({time:r,canMessages:a}),this.needsFlushMessageQueue();case 17:++e,t.next=5;break;case 20:this.needsFlushMessageQueue(),(0,d.timeout)(this.readLoop);case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),e}();e.default=_}).call(this,n(20).Buffer)},function(t,e,n){(function(e){for(var r=n(113),i="undefined"===typeof window?e:window,a=["moz","webkit"],o="AnimationFrame",s=i["request"+o],u=i["cancel"+o]||i["cancelRequest"+o],c=0;!s&&c<a.length;c++)s=i[a[c]+"Request"+o],u=i[a[c]+"Cancel"+o]||i[a[c]+"CancelRequest"+o];if(!s||!u){var l=0,f=0,h=[];s=function(t){if(0===h.length){var e=r(),n=Math.max(0,1e3/60-(e-l));l=n+e,setTimeout((function(){var t=h.slice(0);h.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return h.push({handle:++f,callback:t,cancelled:!1}),f},u=function(t){for(var e=0;e<h.length;e++)h[e].handle===t&&(h[e].cancelled=!0)}}t.exports=function(t){return s.call(i,t)},t.exports.cancel=function(){u.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=s,t.cancelAnimationFrame=u}}).call(this,n(19))},function(t,e,n){var r=n(378);function i(t,e){return function(n,i){return r(n),function(t,e){return function(){return t(e)}}(e,t(n,i))}}t.exports={timeout:i(setTimeout,clearTimeout),interval:i(setInterval,clearInterval)}},function(t,e,n){"use strict";t.exports=function(t){if("function"!==typeof t)throw new TypeError("Expected function, got: "+t)}},function(t,e,n){e.UINT32=n(380),e.UINT64=n(381)},function(t,e,n){var r;!function(n){i(Math.pow(36,5)),i(Math.pow(16,7)),i(Math.pow(10,9)),i(Math.pow(2,30)),i(36),i(16),i(10),i(2);function i(t,e){return this instanceof i?(this._low=0,this._high=0,this.remainder=null,"undefined"==typeof e?o.call(this,t):"string"==typeof t?s.call(this,t,e):void a.call(this,t,e)):new i(t,e)}function a(t,e){return this._low=0|t,this._high=0|e,this}function o(t){return this._low=65535&t,this._high=t>>>16,this}function s(t,e){var n=parseInt(t,e||10);return this._low=65535&n,this._high=n>>>16,this}i.prototype.fromBits=a,i.prototype.fromNumber=o,i.prototype.fromString=s,i.prototype.toNumber=function(){return 65536*this._high+this._low},i.prototype.toString=function(t){return this.toNumber().toString(t||10)},i.prototype.add=function(t){var e=this._low+t._low,n=e>>>16;return n+=this._high+t._high,this._low=65535&e,this._high=65535&n,this},i.prototype.subtract=function(t){return this.add(t.clone().negate())},i.prototype.multiply=function(t){var e,n,r=this._high,i=this._low,a=t._high,o=t._low;return e=(n=i*o)>>>16,e+=r*o,e&=65535,e+=i*a,this._low=65535&n,this._high=65535&e,this},i.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new i(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new i(0),this._low=1,this._high=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},i.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},i.prototype.equals=i.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},i.prototype.greaterThan=i.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},i.prototype.lessThan=i.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},i.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},i.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},i.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},i.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},i.prototype.shiftRight=i.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},i.prototype.shiftLeft=i.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},i.prototype.rotateLeft=i.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},i.prototype.rotateRight=i.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},i.prototype.clone=function(){return new i(this._low,this._high)},void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){var r;!function(n){var i={16:o(Math.pow(16,5)),10:o(Math.pow(10,5)),2:o(Math.pow(2,5))},a={16:o(16),10:o(10),2:o(2)};function o(t,e,n,r){return this instanceof o?(this.remainder=null,"string"==typeof t?c.call(this,t,e):"undefined"==typeof e?u.call(this,t):void s.apply(this,arguments)):new o(t,e,n,r)}function s(t,e,n,r){return"undefined"==typeof n?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|n,this._a48=0|r,this)}function u(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function c(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=i[e]||new o(Math.pow(e,5)),r=0,a=t.length;r<a;r+=5){var s=Math.min(5,a-r),u=parseInt(t.slice(r,r+s),e);this.multiply(s<5?new o(Math.pow(e,s)):n).add(new o(u))}return this}o.prototype.fromBits=s,o.prototype.fromNumber=u,o.prototype.fromString=c,o.prototype.toNumber=function(){return 65536*this._a16+this._a00},o.prototype.toString=function(t){var e=a[t=t||10]||new o(t);if(!this.gt(e))return this.toNumber().toString(t);for(var n=this.clone(),r=new Array(64),i=63;i>=0&&(n.div(e),r[i]=n.remainder.toNumber().toString(t),n.gt(e));i--);return r[i-1]=n.toNumber().toString(t),r.join("")},o.prototype.add=function(t){var e=this._a00+t._a00,n=e>>>16,r=(n+=this._a16+t._a16)>>>16,i=(r+=this._a32+t._a32)>>>16;return i+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&n,this._a32=65535&r,this._a48=65535&i,this},o.prototype.subtract=function(t){return this.add(t.clone().negate())},o.prototype.multiply=function(t){var e=this._a00,n=this._a16,r=this._a32,i=this._a48,a=t._a00,o=t._a16,s=t._a32,u=e*a,c=u>>>16,l=(c+=e*o)>>>16;c&=65535,l+=(c+=n*a)>>>16;var f=(l+=e*s)>>>16;return l&=65535,f+=(l+=n*o)>>>16,l&=65535,f+=(l+=r*a)>>>16,f+=e*t._a48,f&=65535,f+=n*s,f&=65535,f+=r*o,f&=65535,f+=i*a,this._a00=65535&u,this._a16=65535&c,this._a32=65535&l,this._a48=65535&f,this},o.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new o(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new o(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),n=-1;!this.lt(e);)e.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},o.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},o.prototype.equals=o.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},o.prototype.greaterThan=o.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},o.prototype.lessThan=o.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},o.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},o.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},o.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},o.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},o.prototype.shiftRight=o.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},o.prototype.shiftLeft=o.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},o.prototype.rotateLeft=o.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n<<t|r>>>32-t,a=r<<t|n>>>32-t;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&i,this._a48=i>>>16,this},o.prototype.rotateRight=o.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n>>>t|r<<32-t,a=r>>>t|n<<32-t;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&i,this._a48=i>>>16,this},o.prototype.clone=function(){return new o(this._a00,this._a16,this._a32,this._a48)},void 0===(r=function(){return o}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){var r,i,a;i=[t,n(383)],void 0===(a="function"===typeof(r=function(t,e){"use strict";var n,r=(n=e)&&n.__esModule?n:{default:n},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"===typeof t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=o})?r.apply(e,i):r)||(t.exports=a)},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(t),r.removeAllRanges(),r.addRange(i),e=r.toString()}return e}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var a=0,o=r.length;a<o;a++)r[a].fn!==e&&r[a].fn._!==e&&i.push(r[a]);return i.length?n[t]=i:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){var r=n(386),i=n(387);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(r.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(r.string(t))return function(t,e,n){return i(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"===typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,n){var r=n(388);function i(t,e,n,r,i){var o=a.apply(this,arguments);return t.addEventListener(n,o,i),{destroy:function(){t.removeEventListener(n,o,i)}}}function a(t,e,n,i){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&i.call(t,n)}}t.exports=function(t,e,n,r,a){return"function"===typeof t.addEventListener?i.apply(null,arguments):"function"===typeof n?i.bind(null,document).apply(null,arguments):("string"===typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return i(t,e,n,r,a)})))}},function(t,e){var n=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==n;){if("function"===typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){"use strict";var r=t.exports={};r.linearRegression=n(390),r.linearRegressionLine=n(391),r.standardDeviation=n(167),r.rSquared=n(392),r.mode=n(393),r.modeFast=n(394),r.modeSorted=n(171),r.min=n(172),r.max=n(173),r.minSorted=n(395),r.maxSorted=n(396),r.sum=n(169),r.sumSimple=n(397),r.product=n(398),r.quantile=n(118),r.quantileSorted=n(119),r.interquartileRange=r.iqr=n(400),r.medianAbsoluteDeviation=r.mad=n(401),r.chunk=n(402),r.sampleWithReplacement=n(403),r.shuffle=n(175),r.shuffleInPlace=n(176),r.sample=n(404),r.ckmeans=n(405),r.uniqueCountSorted=n(177),r.sumNthPowerDeviations=n(117),r.equalIntervalBreaks=n(406),r.sampleCovariance=n(178),r.sampleCorrelation=n(407),r.sampleVariance=n(120),r.sampleStandardDeviation=n(179),r.sampleSkewness=n(408),r.sampleKurtosis=n(409),r.permutationsHeap=n(410),r.combinations=n(411),r.combinationsReplacement=n(412),r.addToMean=n(413),r.combineMeans=n(180),r.combineVariances=n(414),r.geometricMean=n(415),r.harmonicMean=n(416),r.mean=r.average=n(37),r.median=n(174),r.medianSorted=n(417),r.subtractFromMean=n(418),r.rootMeanSquare=r.rms=n(419),r.variance=n(168),r.tTest=n(420),r.tTestTwoSample=n(421),r.BayesianClassifier=r.bayesian=n(422),r.PerceptronModel=r.perceptron=n(423),r.epsilon=n(71),r.factorial=n(424),r.bernoulliDistribution=n(425),r.binomialDistribution=n(426),r.poissonDistribution=n(427),r.chiSquaredGoodnessOfFit=n(428),r.zScore=n(430),r.cumulativeStdNormalProbability=n(431),r.standardNormalTable=n(181),r.errorFunction=r.erf=n(432),r.inverseErrorFunction=n(182),r.probit=n(433),r.bisect=n(434)},function(t,e,n){"use strict";t.exports=function(t){var e,n,r=t.length;if(1===r)e=0,n=t[0][1];else{for(var i,a,o,s=0,u=0,c=0,l=0,f=0;f<r;f++)s+=a=(i=t[f])[0],u+=o=i[1],c+=a*a,l+=a*o;n=u/r-(e=(r*l-s*u)/(r*c-s*s))*s/r}return{m:e,b:n}}},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.b+t.m*e}}},function(t,e,n){"use strict";t.exports=function(t,e){if(t.length<2)return 1;for(var n,r=0,i=0;i<t.length;i++)r+=t[i][1];n=r/t.length;for(var a=0,o=0;o<t.length;o++)a+=Math.pow(n-t[o][1],2);for(var s=0,u=0;u<t.length;u++)s+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-s/a}},function(t,e,n){"use strict";var r=n(170),i=n(171);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";t.exports=function(t){for(var e,n=new Map,r=0,i=0;i<t.length;i++){var a=n.get(t[i]);void 0===a?a=1:a++,a>r&&(e=t[i],r=a),n.set(t[i],a)}if(0===r)throw new Error("mode requires at last one data point");return e}},function(t,e,n){"use strict";t.exports=function(t){return t[0]}},function(t,e,n){"use strict";t.exports=function(t){return t[t.length-1]}},function(t,e,n){"use strict";t.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}},function(t,e,n){"use strict";t.exports=function(t){for(var e=1,n=0;n<t.length;n++)e*=t[n];return e}},function(t,e,n){"use strict";function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}t.exports=function t(e,n,i,a){i=i||0;a=a||e.length-1;for(;a>i;){if(a-i>600){var o=a-i+1,s=n-i+1,u=Math.log(o),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(o-c)/o);s-o/2<0&&(l*=-1);var f=Math.max(i,Math.floor(n-s*c/o+l)),h=Math.min(a,Math.floor(n+(o-s)*c/o+l));t(e,n,f,h)}var d=e[n],p=i,v=a;for(r(e,i,n),e[a]>d&&r(e,i,a);p<v;){for(r(e,p,v),p++,v--;e[p]<d;)p++;for(;e[v]>d;)v--}e[i]===d?r(e,i,v):r(e,++v,a),v<=n&&(i=v+1),n<=v&&(a=v-1)}}},function(t,e,n){"use strict";var r=n(118);t.exports=function(t){var e=r(t,.75),n=r(t,.25);if("number"===typeof e&&"number"===typeof n)return e-n}},function(t,e,n){"use strict";var r=n(174);t.exports=function(t){for(var e=r(t),n=[],i=0;i<t.length;i++)n.push(Math.abs(t[i]-e));return r(n)}},function(t,e,n){"use strict";t.exports=function(t,e){var n=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}},function(t,e,n){"use strict";t.exports=function(t,e,n){if(0===t.length)return[];n=n||Math.random;for(var r=t.length,i=[],a=0;a<e;a++){var o=Math.floor(n()*r);i.push(t[o])}return i}},function(t,e,n){"use strict";var r=n(175);t.exports=function(t,e,n){return r(t,n).slice(0,e)}},function(t,e,n){"use strict";var r=n(177),i=n(170);function a(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],a=0;a<e;a++)i.push(0);n.push(i)}return n}function o(t,e,n,r){var i;if(t>0){var a=(n[e]-n[t-1])/(e-t+1);i=r[e]-r[t-1]-(e-t+1)*a*a}else i=r[e]-n[e]*n[e]/(e+1);return i<0?0:i}function s(t,e,n,r,i,a,u){if(!(t>e)){var c=Math.floor((t+e)/2);r[n][c]=r[n-1][c-1],i[n][c]=c;var l=n;t>n&&(l=Math.max(l,i[n][t-1]||0)),l=Math.max(l,i[n-1][c]||0);var f,h,d,p=c-1;e<r.length-1&&(p=Math.min(p,i[n][e+1]||0));for(var v=p;v>=l&&!((f=o(v,c,a,u))+r[n-1][l-1]>=r[n][c]);--v)(h=o(l,c,a,u)+r[n-1][l-1])<r[n][c]&&(r[n][c]=h,i[n][c]=l),l++,(d=f+r[n-1][v-1])<r[n][c]&&(r[n][c]=d,i[n][c]=v);s(t,c-1,n,r,i,a,u),s(c+1,e,n,r,i,a,u)}}t.exports=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var n=i(t);if(1===r(n))return[n];var u=a(e,n.length),c=a(e,n.length);!function(t,e,n){for(var r,i=e[0].length,a=t[Math.floor(i/2)],u=[],c=[],l=0;l<i;++l)r=t[l]-a,0===l?(u.push(r),c.push(r*r)):(u.push(u[l-1]+r),c.push(c[l-1]+r*r)),e[0][l]=o(0,l,u,c),n[0][l]=0;for(var f=1;f<e.length;++f)s(f<e.length-1?f:i-1,i-1,f,e,n,u,c)}(n,u,c);for(var l=[],f=c[0].length-1,h=c.length-1;h>=0;h--){var d=c[h][f];l[h]=n.slice(d,f+1),h>0&&(f=d-1)}return l}},function(t,e,n){"use strict";var r=n(173),i=n(172);t.exports=function(t,e){if(t.length<2)return t;for(var n=i(t),a=r(t),o=[n],s=(a-n)/e,u=1;u<e;u++)o.push(o[0]+s*u);return o.push(a),o}},function(t,e,n){"use strict";var r=n(178),i=n(179);t.exports=function(t,e){return r(t,e)/i(t)/i(e)}},function(t,e,n){"use strict";var r=n(37);t.exports=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,n=r(t),i=0,a=0,o=0;o<t.length;o++)i+=(e=t[o]-n)*e,a+=e*e*e;var s=t.length-1,u=Math.sqrt(i/s),c=t.length;return c*a/((c-1)*(c-2)*Math.pow(u,3))}},function(t,e,n){"use strict";var r=n(37);t.exports=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,i=r(t),a=0,o=0,s=0;s<e;s++)a+=(n=t[s]-i)*n,o+=n*n*n*n;return(e-1)/((e-2)*(e-3))*(e*(e+1)*o/(a*a)-3*(e-1))}},function(t,e,n){"use strict";t.exports=function(t){for(var e=new Array(t.length),n=[t.slice()],r=0;r<t.length;r++)e[r]=0;for(r=0;r<t.length;)if(e[r]<r){var i=0;r%2!==0&&(i=e[r]);var a=t[i];t[i]=t[r],t[r]=a,n.push(t.slice()),e[r]++,r=0}else e[r]=0,r++;return n}},function(t,e,n){"use strict";t.exports=function t(e,n){var r,i,a,o,s=[];for(r=0;r<e.length;r++)if(1===n)s.push([e[r]]);else for(a=t(e.slice(r+1,e.length),n-1),i=0;i<a.length;i++)(o=a[i]).unshift(e[r]),s.push(o);return s}},function(t,e,n){"use strict";t.exports=function t(e,n){for(var r=[],i=0;i<e.length;i++)if(1===n)r.push([e[i]]);else for(var a=t(e.slice(i,e.length),n-1),o=0;o<a.length;o++)r.push([e[i]].concat(a[o]));return r}},function(t,e,n){"use strict";t.exports=function(t,e,n){return t+(n-t)/(e+1)}},function(t,e,n){"use strict";var r=n(180);t.exports=function(t,e,n,i,a,o){var s=r(e,n,a,o);return(n*(t+Math.pow(e-s,2))+o*(i+Math.pow(a-s,2)))/(n+o)}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[n]}return Math.pow(e,1/t.length)}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[n]}return t.length/e}},function(t,e,n){"use strict";var r=n(119);t.exports=function(t){return r(t,.5)}},function(t,e,n){"use strict";t.exports=function(t,e,n){return(t*e-n)/(e-1)}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return Math.sqrt(e/t.length)}},function(t,e,n){"use strict";var r=n(167),i=n(37);t.exports=function(t,e){return(i(t)-e)/(r(t)/Math.sqrt(t.length))}},function(t,e,n){"use strict";var r=n(37),i=n(120);t.exports=function(t,e,n){var a=t.length,o=e.length;if(!a||!o)return null;n||(n=0);var s=r(t),u=r(e),c=i(t),l=i(e);if("number"===typeof s&&"number"===typeof u&&"number"===typeof c&&"number"===typeof l){var f=((a-1)*c+(o-1)*l)/(a+o-2);return(s-u-n)/Math.sqrt(f*(1/a+1/o))}}},function(t,e,n){"use strict";function r(){this.totalCount=0,this.data={}}r.prototype.train=function(t,e){for(var n in this.data[e]||(this.data[e]={}),t){var r=t[n];void 0===this.data[e][n]&&(this.data[e][n]={}),void 0===this.data[e][n][r]&&(this.data[e][n][r]=0),this.data[e][n][r]++}this.totalCount++},r.prototype.score=function(t){var e,n={};for(var r in t){var i=t[r];for(e in this.data)n[e]={},this.data[e][r]?n[e][r+"_"+i]=(this.data[e][r][i]||0)/this.totalCount:n[e][r+"_"+i]=0}var a={};for(e in n)for(var o in a[e]=0,n[e])a[e]+=n[e][o];return a},t.exports=r},function(t,e,n){"use strict";function r(){this.weights=[],this.bias=0}r.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,n=0;n<this.weights.length;n++)e+=this.weights[n]*t[n];return(e+=this.bias)>0?1:0},r.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if(n!==e){for(var r=e-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*t[i];this.bias+=r}return this},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,n=2;n<=t;n++)e*=n;return e}},function(t,e,n){"use strict";t.exports=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]}},function(t,e,n){"use strict";var r=n(71);t.exports=function(t,e){if(!(e<0||e>1||t<=0||t%1!==0)){var n=0,i=0,a=[],o=1;do{a[n]=o*Math.pow(e,n)*Math.pow(1-e,t-n),i+=a[n],o=o*(t-++n+1)/n}while(i<1-r);return a}}},function(t,e,n){"use strict";var r=n(71);t.exports=function(t){if(!(t<=0)){var e=0,n=0,i=[],a=1;do{i[e]=Math.exp(-t)*Math.pow(t,e)/a,n+=i[e],a*=++e}while(n<1-r);return i}}},function(t,e,n){"use strict";var r=n(37),i=n(429);t.exports=function(t,e,n){for(var a,o,s=0,u=e(r(t)),c=[],l=[],f=0;f<t.length;f++)void 0===c[t[f]]&&(c[t[f]]=0),c[t[f]]++;for(f=0;f<c.length;f++)void 0===c[f]&&(c[f]=0);for(o in u)o in c&&(l[+o]=u[o]*t.length);for(o=l.length-1;o>=0;o--)l[o]<3&&(l[o-1]+=l[o],l.pop(),c[o-1]+=c[o],c.pop());for(o=0;o<c.length;o++)s+=Math.pow(c[o]-l[o],2)/l[o];return a=c.length-1-1,i[a][n]<s}},function(t,e,n){"use strict";t.exports={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}}},function(t,e,n){"use strict";t.exports=function(t,e,n){return(t-e)/n}},function(t,e,n){"use strict";var r=n(181);t.exports=function(t){var e=Math.abs(t),n=Math.min(Math.round(100*e),r.length-1);return t>=0?r[n]:+(1-r[n]).toFixed(4)}},function(t,e,n){"use strict";t.exports=function(t){var e=1/(1+.5*Math.abs(t)),n=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return t>=0?1-n:n-1}},function(t,e,n){"use strict";var r=n(71),i=n(182);t.exports=function(t){return 0===t?t=r:t>=1&&(t=1-r),Math.sqrt(2)*i(2*t-1)}},function(t,e,n){"use strict";var r=n(435);t.exports=function(t,e,n,i,a){if("function"!==typeof t)throw new TypeError("func must be a function");for(var o=0;o<i;o++){var s=(e+n)/2;if(0===t(s)||Math.abs((n-e)/2)<a)return s;r(t(s))===r(t(e))?e=s:n=s}throw new Error("maximum number of iterations exceeded")}},function(t,e,n){"use strict";t.exports=function(t){if("number"===typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(121),a=n(185),o=(r=a)&&r.__esModule?r:{default:r};e.default=(0,o.default)(!1,i.defaultSelectorHandlers),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.prefixMap,n=t.plugins;return function t(s){for(var u in s){var c=s[u];if((0,o.default)(c))s[u]=t(c);else if(Array.isArray(c)){for(var l=[],f=0,h=c.length;f<h;++f){var d=(0,i.default)(n,u,c[f],s,e);(0,a.default)(l,d||c[f])}l.length>0&&(s[u]=l)}else{var p=(0,i.default)(n,u,c,s,e);p&&(s[u]=p),(0,r.default)(e,u,s)}}return s}};var r=s(n(438)),i=s(n(439)),a=s(n(440)),o=s(n(441));function s(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(t.hasOwnProperty(e))for(var r=t[e],i=0,o=r.length;i<o;++i)n[r[i]+(0,a.default)(e)]=n[e]};var r,i=n(183),a=(r=i)&&r.__esModule?r:{default:r};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r,i){for(var a=0,o=t.length;a<o;++a){var s=t[a](e,n,r,i);if(s)return s}},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){-1===t.indexOf(e)&&t.push(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(Array.isArray(e))for(var n=0,i=e.length;n<i;++n)r(t,e[n]);else r(t,e)},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t instanceof Object&&!Array.isArray(t)},t.exports=e.default},function(t,e,n){var r=n(443),i=n(444),a=n(445),o=n(446),s=n(447),u=n(448),c=n(449),l=n(450),f=n(451),h=n(452),d=n(453),p=n(454);t.exports={plugins:[r,i,a,o,s,u,c,l,f,h,d,p],prefixMap:{transform:["Webkit","ms"],transformOrigin:["Webkit","ms"],transformOriginX:["Webkit","ms"],transformOriginY:["Webkit","ms"],backfaceVisibility:["Webkit"],perspective:["Webkit"],perspectiveOrigin:["Webkit"],transformStyle:["Webkit"],transformOriginZ:["Webkit"],animation:["Webkit"],animationDelay:["Webkit"],animationDirection:["Webkit"],animationFillMode:["Webkit"],animationDuration:["Webkit"],animationIterationCount:["Webkit"],animationName:["Webkit"],animationPlayState:["Webkit"],animationTimingFunction:["Webkit"],appearance:["Webkit","Moz"],userSelect:["Webkit","Moz","ms"],fontKerning:["Webkit"],textEmphasisPosition:["Webkit"],textEmphasis:["Webkit"],textEmphasisStyle:["Webkit"],textEmphasisColor:["Webkit"],boxDecorationBreak:["Webkit"],clipPath:["Webkit"],maskImage:["Webkit"],maskMode:["Webkit"],maskRepeat:["Webkit"],maskPosition:["Webkit"],maskClip:["Webkit"],maskOrigin:["Webkit"],maskSize:["Webkit"],maskComposite:["Webkit"],mask:["Webkit"],maskBorderSource:["Webkit"],maskBorderMode:["Webkit"],maskBorderSlice:["Webkit"],maskBorderWidth:["Webkit"],maskBorderOutset:["Webkit"],maskBorderRepeat:["Webkit"],maskBorder:["Webkit"],maskType:["Webkit"],textDecorationStyle:["Webkit","Moz"],textDecorationSkip:["Webkit","Moz"],textDecorationLine:["Webkit","Moz"],textDecorationColor:["Webkit","Moz"],filter:["Webkit"],fontFeatureSettings:["Webkit","Moz"],breakAfter:["Webkit","Moz","ms"],breakBefore:["Webkit","Moz","ms"],breakInside:["Webkit","Moz","ms"],columnCount:["Webkit","Moz"],columnFill:["Webkit","Moz"],columnGap:["Webkit","Moz"],columnRule:["Webkit","Moz"],columnRuleColor:["Webkit","Moz"],columnRuleStyle:["Webkit","Moz"],columnRuleWidth:["Webkit","Moz"],columns:["Webkit","Moz"],columnSpan:["Webkit","Moz"],columnWidth:["Webkit","Moz"],flex:["Webkit","ms"],flexBasis:["Webkit"],flexDirection:["Webkit","ms"],flexGrow:["Webkit"],flexFlow:["Webkit","ms"],flexShrink:["Webkit"],flexWrap:["Webkit","ms"],alignContent:["Webkit"],alignItems:["Webkit"],alignSelf:["Webkit"],justifyContent:["Webkit"],order:["Webkit"],transitionDelay:["Webkit"],transitionDuration:["Webkit"],transitionProperty:["Webkit"],transitionTimingFunction:["Webkit"],backdropFilter:["Webkit"],scrollSnapType:["Webkit","ms"],scrollSnapPointsX:["Webkit","ms"],scrollSnapPointsY:["Webkit","ms"],scrollSnapDestination:["Webkit","ms"],scrollSnapCoordinate:["Webkit","ms"],shapeImageThreshold:["Webkit"],shapeImageMargin:["Webkit"],shapeImageOutside:["Webkit"],hyphens:["Webkit","Moz","ms"],flowInto:["Webkit","ms"],flowFrom:["Webkit","ms"],regionFragment:["Webkit","ms"],boxSizing:["Moz"],textAlignLast:["Moz"],tabSize:["Moz"],wrapFlow:["ms"],wrapThrough:["ms"],wrapMargin:["ms"],touchAction:["ms"],gridTemplateColumns:["ms"],gridTemplateRows:["ms"],gridTemplateAreas:["ms"],gridTemplate:["ms"],gridAutoColumns:["ms"],gridAutoRows:["ms"],gridAutoFlow:["ms"],grid:["ms"],gridRowStart:["ms"],gridColumnStart:["ms"],gridRowEnd:["ms"],gridRow:["ms"],gridColumn:["ms"],gridColumnEnd:["ms"],gridColumnGap:["ms"],gridRowGap:["ms"],gridArea:["ms"],gridGap:["ms"],textSizeAdjust:["Webkit","ms"],borderImage:["Webkit"],borderImageOutset:["Webkit"],borderImageRepeat:["Webkit"],borderImageSlice:["Webkit"],borderImageSource:["Webkit"],borderImageWidth:["Webkit"]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("string"===typeof e&&!(0,a.default)(e)&&e.indexOf("calc(")>-1)return o.map((function(t){return e.replace(/calc\(/g,t+"calc(")}))};var r,i=n(46),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-","-moz-",""];t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("string"===typeof e&&!(0,a.default)(e)&&e.indexOf("cross-fade(")>-1)return o.map((function(t){return e.replace(/cross-fade\(/g,t+"cross-fade(")}))};var r,i=n(46),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-",""];t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("cursor"===t&&i.hasOwnProperty(e))return r.map((function(t){return t+e}))};var r=["-webkit-","-moz-",""],i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("string"===typeof e&&!(0,a.default)(e)&&e.indexOf("filter(")>-1)return o.map((function(t){return e.replace(/filter\(/g,t+"filter(")}))};var r,i=n(46),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-",""];t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("display"===t&&r.hasOwnProperty(e))return r[e]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){i.hasOwnProperty(t)&&(n[i[t]]=r[e]||e)};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},i={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){"flexDirection"===t&&"string"===typeof e&&(e.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",e.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");i.hasOwnProperty(t)&&(n[i[t]]=r[e]||e)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("string"===typeof e&&!(0,a.default)(e)&&s.test(e))return o.map((function(t){return t+e}))};var r,i=n(46),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("string"===typeof e&&!(0,a.default)(e)&&e.indexOf("image-set(")>-1)return o.map((function(t){return e.replace(/image-set\(/g,t+"image-set(")}))};var r,i=n(46),a=(r=i)&&r.__esModule?r:{default:r};var o=["-webkit-",""];t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if("position"===t&&"sticky"===e)return["-webkit-sticky","sticky"]},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(i.hasOwnProperty(t)&&a.hasOwnProperty(e))return r.map((function(t){return t+e}))};var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){if("string"===typeof e&&s.hasOwnProperty(t)){var c=function(t,e){if((0,i.default)(t))return t;for(var n=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g),a=0,o=n.length;a<o;++a){var s=n[a],c=[s];for(var l in e){var f=(0,r.default)(l);if(s.indexOf(f)>-1&&"order"!==f)for(var h=e[l],d=0,p=h.length;d<p;++d)c.unshift(s.replace(f,u[h[d]]+f))}n[a]=c.join(",")}return n.join(",")}(e,o),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(t){return!/-moz-|-ms-/.test(t)})).join(",");if(t.indexOf("Webkit")>-1)return l;var f=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(t){return!/-webkit-|-ms-/.test(t)})).join(",");return t.indexOf("Moz")>-1?f:(n["Webkit"+(0,a.default)(t)]=l,n["Moz"+(0,a.default)(t)]=f,c)}};var r=o(n(455)),i=o(n(46)),a=o(n(183));function o(t){return t&&t.__esModule?t:{default:t}}var s={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},u={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,a.default)(t)};var r,i=n(456),a=(r=i)&&r.__esModule?r:{default:r};t.exports=e.default},function(t,e,n){"use strict";n.r(e);var r=/[A-Z]/g,i=/^ms-/,a={};function o(t){return"-"+t.toLowerCase()}e.default=function(t){if(a.hasOwnProperty(t))return a[t];var e=t.replace(r,o);return a[t]=i.test(e)?"-"+e:e}},function(t,e,n){"use strict";t.exports=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(459)),a=r(n(184)),o=n(121),s=n(122),u=null,c={fontFamily:function t(e){return Array.isArray(e)?e.map(t).join(","):"object"===typeof e?(p(e.src,"@font-face",[e],!1),'"'+e.fontFamily+'"'):e},animationName:function t(e,n){if(Array.isArray(e))return e.map((function(e){return t(e,n)})).join(",");if("object"===typeof e){var r="keyframe_"+(0,s.hashObject)(e),i="@keyframes "+r+"{";return e instanceof a.default?e.forEach((function(t,e){i+=(0,o.generateCSS)(e,[t],n,c,!1)})):Object.keys(e).forEach((function(t){i+=(0,o.generateCSS)(t,[e[t]],n,c,!1)})),d(r,i+="}"),r}return e}},l={},f="",h=!1,d=function(t,e){if(!l[t]){if(!h){if("undefined"===typeof document)throw new Error("Cannot automatically buffer without a document");h=!0,(0,i.default)(g)}f+=e,l[t]=!0}},p=function(t,e,n,r){var i=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];if(!l[t]){var a=(0,o.generateCSS)(e,n,i,c,r);d(t,a)}};e.injectStyleOnce=p;e.reset=function(){f="",l={},h=!1,u=null};e.startBuffering=function(){if(h)throw new Error("Cannot buffer while already buffering");h=!0};var v=function(){h=!1;var t=f;return f="",t};e.flushToString=v;var g=function(){var t=v();t.length>0&&function(t){if(null==u&&null==(u=document.querySelector("style[data-aphrodite]"))){var e=document.head||document.getElementsByTagName("head")[0];(u=document.createElement("style")).type="text/css",u.setAttribute("data-aphrodite",""),e.appendChild(u)}u.styleSheet?u.styleSheet.cssText+=t:u.appendChild(document.createTextNode(t))}(t)};e.flushToStyleTag=g;e.getRenderedClassNames=function(){return Object.keys(l)};e.addRenderedClassNames=function(t){t.forEach((function(t){l[t]=!0}))};e.injectAndGetClassName=function(t,e,n){var r={classNameBits:[],definitionBits:[]};if(function t(e,n){for(var r=0;r<e.length;r+=1)e[r]&&(Array.isArray(e[r])?t(e[r],n):(n.classNameBits.push(e[r]._name),n.definitionBits.push(e[r]._definition)))}(e,r),0===r.classNameBits.length)return"";var i=void 0;return i=1===r.classNameBits.length?"_"+r.classNameBits[0]:"_"+(0,s.hashString)(r.classNameBits.join())+function(t){return(t.reduce((function(t,e){return t+(e?e._len:0)}),0)%36).toString(36)}(e),p(i,"."+i,r.definitionBits,t,n),i}},function(t,e,n){"use strict";var r=n(460),i=[],a=[],o=r.makeRequestCallFromTimer((function(){if(a.length)throw a.shift()}));function s(t){var e;(e=i.length?i.pop():new u).task=t,r(e)}function u(){this.task=null}t.exports=s,u.prototype.call=function(){try{this.task.call()}catch(t){s.onerror?s.onerror(t):(a.push(t),o())}finally{this.task=null,i[i.length]=this}}},function(t,e,n){"use strict";(function(e){function n(t){i.length||(r(),!0),i[i.length]=t}t.exports=n;var r,i=[],a=0,o=1024;function s(){for(;a<i.length;){var t=a;if(a+=1,i[t].call(),a>o){for(var e=0,n=i.length-a;e<n;e++)i[e]=i[e+a];i.length-=a,a=0}}i.length=0,a=0,!1}var u="undefined"!==typeof e?e:self,c=u.MutationObserver||u.WebKitMutationObserver;function l(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}r="function"===typeof c?function(t){var e=1,n=new c(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(s):l(s),n.requestFlush=r,n.makeRequestCallFromTimer=l}).call(this,n(19))},function(t,e,n){"use strict";var r=n(462);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){var n;"function"!==typeof(n=window.Element.prototype).matches&&(n.matches=n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)++n;return Boolean(e[n])}),"function"!==typeof n.closest&&(n.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null})},function(t,e,n){(function(t,r){var i;(function(){var a,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="__lodash_hash_undefined__",l=500,f="__lodash_placeholder__",h=1,d=2,p=4,v=1,g=2,m=1,y=2,b=4,_=8,w=16,x=32,k=64,E=128,S=256,O=512,A=30,T="...",C=800,j=16,D=1,R=2,M=1/0,P=9007199254740991,F=17976931348623157e292,N=NaN,L=4294967295,I=L-1,B=L>>>1,U=[["ary",E],["bind",m],["bindKey",y],["curry",_],["curryRight",w],["flip",O],["partial",x],["partialRight",k],["rearg",S]],z="[object Arguments]",q="[object Array]",W="[object AsyncFunction]",H="[object Boolean]",G="[object Date]",Y="[object DOMException]",V="[object Error]",$="[object Function]",X="[object GeneratorFunction]",K="[object Map]",J="[object Number]",Z="[object Null]",Q="[object Object]",tt="[object Proxy]",et="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",at="[object Undefined]",ot="[object WeakMap]",st="[object WeakSet]",ut="[object ArrayBuffer]",ct="[object DataView]",lt="[object Float32Array]",ft="[object Float64Array]",ht="[object Int8Array]",dt="[object Int16Array]",pt="[object Int32Array]",vt="[object Uint8Array]",gt="[object Uint8ClampedArray]",mt="[object Uint16Array]",yt="[object Uint32Array]",bt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xt=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,Et=RegExp(xt.source),St=RegExp(kt.source),Ot=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,Tt=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jt=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(Rt.source),Pt=/^\s+|\s+$/g,Ft=/^\s+/,Nt=/\s+$/,Lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,It=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wt=/\w*$/,Ht=/^[-+]0x[0-9a-f]+$/i,Gt=/^0b[01]+$/i,Yt=/^\[object .+?Constructor\]$/,Vt=/^0o[0-7]+$/i,$t=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kt=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Zt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",te="[\\ud800-\\udfff]",ee="["+Qt+"]",ne="["+Zt+"]",re="\\d+",ie="[\\u2700-\\u27bf]",ae="[a-z\\xdf-\\xf6\\xf8-\\xff]",oe="[^\\ud800-\\udfff"+Qt+re+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",ue="[^\\ud800-\\udfff]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",he="(?:"+ae+"|"+oe+")",de="(?:"+fe+"|"+oe+")",pe="(?:"+ne+"|"+se+")"+"?",ve="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[ue,ce,le].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),ge="(?:"+[ie,ce,le].join("|")+")"+ve,me="(?:"+[ue+ne+"?",ne,ce,le,te].join("|")+")",ye=RegExp("['\u2019]","g"),be=RegExp(ne,"g"),_e=RegExp(se+"(?="+se+")|"+me+ve,"g"),we=RegExp([fe+"?"+ae+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[ee,fe,"$"].join("|")+")",de+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[ee,fe+he,"$"].join("|")+")",fe+"?"+he+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",re,ge].join("|"),"g"),xe=RegExp("[\\u200d\\ud800-\\udfff"+Zt+"\\ufe0e\\ufe0f]"),ke=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ee=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Se=-1,Oe={};Oe[lt]=Oe[ft]=Oe[ht]=Oe[dt]=Oe[pt]=Oe[vt]=Oe[gt]=Oe[mt]=Oe[yt]=!0,Oe[z]=Oe[q]=Oe[ut]=Oe[H]=Oe[ct]=Oe[G]=Oe[V]=Oe[$]=Oe[K]=Oe[J]=Oe[Q]=Oe[et]=Oe[nt]=Oe[rt]=Oe[ot]=!1;var Ae={};Ae[z]=Ae[q]=Ae[ut]=Ae[ct]=Ae[H]=Ae[G]=Ae[lt]=Ae[ft]=Ae[ht]=Ae[dt]=Ae[pt]=Ae[K]=Ae[J]=Ae[Q]=Ae[et]=Ae[nt]=Ae[rt]=Ae[it]=Ae[vt]=Ae[gt]=Ae[mt]=Ae[yt]=!0,Ae[V]=Ae[$]=Ae[ot]=!1;var Te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ce=parseFloat,je=parseInt,De="object"==typeof t&&t&&t.Object===Object&&t,Re="object"==typeof self&&self&&self.Object===Object&&self,Me=De||Re||Function("return this")(),Pe=e&&!e.nodeType&&e,Fe=Pe&&"object"==typeof r&&r&&!r.nodeType&&r,Ne=Fe&&Fe.exports===Pe,Le=Ne&&De.process,Ie=function(){try{var t=Fe&&Fe.require&&Fe.require("util").types;return t||Le&&Le.binding&&Le.binding("util")}catch(e){}}(),Be=Ie&&Ie.isArrayBuffer,Ue=Ie&&Ie.isDate,ze=Ie&&Ie.isMap,qe=Ie&&Ie.isRegExp,We=Ie&&Ie.isSet,He=Ie&&Ie.isTypedArray;function Ge(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ye(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function Ve(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function $e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Xe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ke(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Je(t,e){return!!(null==t?0:t.length)&&un(t,e,0)>-1}function Ze(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Qe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function tn(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function en(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function nn(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function rn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var an=hn("length");function on(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function sn(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function un(t,e,n){return e===e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):sn(t,ln,n)}function cn(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function ln(t){return t!==t}function fn(t,e){var n=null==t?0:t.length;return n?vn(t,e)/n:N}function hn(t){return function(e){return null==e?a:e[t]}}function dn(t){return function(e){return null==t?a:t[e]}}function pn(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function vn(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==a&&(n=n===a?o:n+o)}return n}function gn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function mn(t){return function(e){return t(e)}}function yn(t,e){return Qe(e,(function(e){return t[e]}))}function bn(t,e){return t.has(e)}function _n(t,e){for(var n=-1,r=t.length;++n<r&&un(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&un(e,t[n],0)>-1;);return n}var xn=dn({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),kn=dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function En(t){return"\\"+Te[t]}function Sn(t){return xe.test(t)}function On(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function An(t,e){return function(n){return t(e(n))}}function Tn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==f||(t[n]=f,a[i++]=n)}return a}function Cn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function jn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Dn(t){return Sn(t)?function(t){var e=_e.lastIndex=0;for(;_e.test(t);)++e;return e}(t):an(t)}function Rn(t){return Sn(t)?function(t){return t.match(_e)||[]}(t):function(t){return t.split("")}(t)}var Mn=dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Pn=function t(e){var n=(e=null==e?Me:Pn.defaults(Me.Object(),e,Pn.pick(Me,Ee))).Array,r=e.Date,i=e.Error,Zt=e.Function,Qt=e.Math,te=e.Object,ee=e.RegExp,ne=e.String,re=e.TypeError,ie=n.prototype,ae=Zt.prototype,oe=te.prototype,se=e["__core-js_shared__"],ue=ae.toString,ce=oe.hasOwnProperty,le=0,fe=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),he=oe.toString,de=ue.call(te),pe=Me._,ve=ee("^"+ue.call(ce).replace(Rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ge=Ne?e.Buffer:a,me=e.Symbol,_e=e.Uint8Array,xe=ge?ge.allocUnsafe:a,Te=An(te.getPrototypeOf,te),De=te.create,Re=oe.propertyIsEnumerable,Pe=ie.splice,Fe=me?me.isConcatSpreadable:a,Le=me?me.iterator:a,Ie=me?me.toStringTag:a,an=function(){try{var t=La(te,"defineProperty");return t({},"",{}),t}catch(e){}}(),dn=e.clearTimeout!==Me.clearTimeout&&e.clearTimeout,Fn=r&&r.now!==Me.Date.now&&r.now,Nn=e.setTimeout!==Me.setTimeout&&e.setTimeout,Ln=Qt.ceil,In=Qt.floor,Bn=te.getOwnPropertySymbols,Un=ge?ge.isBuffer:a,zn=e.isFinite,qn=ie.join,Wn=An(te.keys,te),Hn=Qt.max,Gn=Qt.min,Yn=r.now,Vn=e.parseInt,$n=Qt.random,Xn=ie.reverse,Kn=La(e,"DataView"),Jn=La(e,"Map"),Zn=La(e,"Promise"),Qn=La(e,"Set"),tr=La(e,"WeakMap"),er=La(te,"create"),nr=tr&&new tr,rr={},ir=co(Kn),ar=co(Jn),or=co(Zn),sr=co(Qn),ur=co(tr),cr=me?me.prototype:a,lr=cr?cr.valueOf:a,fr=cr?cr.toString:a;function hr(t){if(As(t)&&!gs(t)&&!(t instanceof gr)){if(t instanceof vr)return t;if(ce.call(t,"__wrapped__"))return lo(t)}return new vr(t)}var dr=function(){function t(){}return function(e){if(!Os(e))return{};if(De)return De(e);t.prototype=e;var n=new t;return t.prototype=a,n}}();function pr(){}function vr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=a}function gr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function mr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function yr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new br;++e<n;)this.add(t[e])}function wr(t){var e=this.__data__=new yr(t);this.size=e.size}function xr(t,e){var n=gs(t),r=!n&&vs(t),i=!n&&!r&&_s(t),a=!n&&!r&&!i&&Fs(t),o=n||r||i||a,s=o?gn(t.length,ne):[],u=s.length;for(var c in t)!e&&!ce.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ha(c,u))||s.push(c);return s}function kr(t){var e=t.length;return e?t[_i(0,e-1)]:a}function Er(t,e){return oo(ea(t),Mr(e,0,t.length))}function Sr(t){return oo(ea(t))}function Or(t,e,n){(n===a||hs(t[e],n))&&(n!==a||e in t)||Dr(t,e,n)}function Ar(t,e,n){var r=t[e];ce.call(t,e)&&hs(r,n)&&(n!==a||e in t)||Dr(t,e,n)}function Tr(t,e){for(var n=t.length;n--;)if(hs(t[n][0],e))return n;return-1}function Cr(t,e,n,r){return Ir(t,(function(t,i,a){e(r,t,n(t),a)})),r}function jr(t,e){return t&&na(e,ru(e),t)}function Dr(t,e,n){"__proto__"==e&&an?an(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Rr(t,e){for(var r=-1,i=e.length,o=n(i),s=null==t;++r<i;)o[r]=s?a:Zs(t,e[r]);return o}function Mr(t,e,n){return t===t&&(n!==a&&(t=t<=n?t:n),e!==a&&(t=t>=e?t:e)),t}function Pr(t,e,n,r,i,o){var s,u=e&h,c=e&d,l=e&p;if(n&&(s=i?n(t,r,i,o):n(t)),s!==a)return s;if(!Os(t))return t;var f=gs(t);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&ce.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return ea(t,s)}else{var v=Ua(t),g=v==$||v==X;if(_s(t))return Xi(t,u);if(v==Q||v==z||g&&!i){if(s=c||g?{}:qa(t),!u)return c?function(t,e){return na(t,Ba(t),e)}(t,function(t,e){return t&&na(e,iu(e),t)}(s,t)):function(t,e){return na(t,Ia(t),e)}(t,jr(s,t))}else{if(!Ae[v])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case ut:return Ki(t);case H:case G:return new r(+t);case ct:return function(t,e){var n=e?Ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case lt:case ft:case ht:case dt:case pt:case vt:case gt:case mt:case yt:return Ji(t,n);case K:return new r;case J:case rt:return new r(t);case et:return function(t){var e=new t.constructor(t.source,Wt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case nt:return new r;case it:return i=t,lr?te(lr.call(i)):{}}var i}(t,v,u)}}o||(o=new wr);var m=o.get(t);if(m)return m;o.set(t,s),Rs(t)?t.forEach((function(r){s.add(Pr(r,e,n,r,t,o))})):Ts(t)&&t.forEach((function(r,i){s.set(i,Pr(r,e,n,i,t,o))}));var y=f?a:(l?c?ja:Ca:c?iu:ru)(t);return Ve(y||t,(function(r,i){y&&(r=t[i=r]),Ar(s,i,Pr(r,e,n,i,t,o))})),s}function Fr(t,e,n){var r=n.length;if(null==t)return!r;for(t=te(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return!1}return!0}function Nr(t,e,n){if("function"!=typeof t)throw new re(u);return no((function(){t.apply(a,n)}),e)}function Lr(t,e,n,r){var i=-1,a=Je,s=!0,u=t.length,c=[],l=e.length;if(!u)return c;n&&(e=Qe(e,mn(n))),r?(a=Ze,s=!1):e.length>=o&&(a=bn,s=!1,e=new _r(e));t:for(;++i<u;){var f=t[i],h=null==n?f:n(f);if(f=r||0!==f?f:0,s&&h===h){for(var d=l;d--;)if(e[d]===h)continue t;c.push(f)}else a(e,h,r)||c.push(f)}return c}hr.templateSettings={escape:Ot,evaluate:At,interpolate:Tt,variable:"",imports:{_:hr}},hr.prototype=pr.prototype,hr.prototype.constructor=hr,vr.prototype=dr(pr.prototype),vr.prototype.constructor=vr,gr.prototype=dr(pr.prototype),gr.prototype.constructor=gr,mr.prototype.clear=function(){this.__data__=er?er(null):{},this.size=0},mr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mr.prototype.get=function(t){var e=this.__data__;if(er){var n=e[t];return n===c?a:n}return ce.call(e,t)?e[t]:a},mr.prototype.has=function(t){var e=this.__data__;return er?e[t]!==a:ce.call(e,t)},mr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=er&&e===a?c:e,this},yr.prototype.clear=function(){this.__data__=[],this.size=0},yr.prototype.delete=function(t){var e=this.__data__,n=Tr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Pe.call(e,n,1),--this.size,!0)},yr.prototype.get=function(t){var e=this.__data__,n=Tr(e,t);return n<0?a:e[n][1]},yr.prototype.has=function(t){return Tr(this.__data__,t)>-1},yr.prototype.set=function(t,e){var n=this.__data__,r=Tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},br.prototype.clear=function(){this.size=0,this.__data__={hash:new mr,map:new(Jn||yr),string:new mr}},br.prototype.delete=function(t){var e=Fa(this,t).delete(t);return this.size-=e?1:0,e},br.prototype.get=function(t){return Fa(this,t).get(t)},br.prototype.has=function(t){return Fa(this,t).has(t)},br.prototype.set=function(t,e){var n=Fa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(t){return this.__data__.set(t,c),this},_r.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.clear=function(){this.__data__=new yr,this.size=0},wr.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wr.prototype.get=function(t){return this.__data__.get(t)},wr.prototype.has=function(t){return this.__data__.has(t)},wr.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yr){var r=n.__data__;if(!Jn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new br(r)}return n.set(t,e),this.size=n.size,this};var Ir=aa(Yr),Br=aa(Vr,!0);function Ur(t,e){var n=!0;return Ir(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function zr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(u===a?s===s&&!Ps(s):n(s,u)))var u=s,c=o}return c}function qr(t,e){var n=[];return Ir(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Wr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=Wa),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?Wr(s,e-1,n,r,i):tn(i,s):r||(i[i.length]=s)}return i}var Hr=oa(),Gr=oa(!0);function Yr(t,e){return t&&Hr(t,e,ru)}function Vr(t,e){return t&&Gr(t,e,ru)}function $r(t,e){return Ke(e,(function(e){return ks(t[e])}))}function Xr(t,e){for(var n=0,r=(e=Gi(e,t)).length;null!=t&&n<r;)t=t[uo(e[n++])];return n&&n==r?t:a}function Kr(t,e,n){var r=e(t);return gs(t)?r:tn(r,n(t))}function Jr(t){return null==t?t===a?at:Z:Ie&&Ie in te(t)?function(t){var e=ce.call(t,Ie),n=t[Ie];try{t[Ie]=a;var r=!0}catch(o){}var i=he.call(t);r&&(e?t[Ie]=n:delete t[Ie]);return i}(t):function(t){return he.call(t)}(t)}function Zr(t,e){return t>e}function Qr(t,e){return null!=t&&ce.call(t,e)}function ti(t,e){return null!=t&&e in te(t)}function ei(t,e,r){for(var i=r?Ze:Je,o=t[0].length,s=t.length,u=s,c=n(s),l=1/0,f=[];u--;){var h=t[u];u&&e&&(h=Qe(h,mn(e))),l=Gn(h.length,l),c[u]=!r&&(e||o>=120&&h.length>=120)?new _r(u&&h):a}h=t[0];var d=-1,p=c[0];t:for(;++d<o&&f.length<l;){var v=h[d],g=e?e(v):v;if(v=r||0!==v?v:0,!(p?bn(p,g):i(f,g,r))){for(u=s;--u;){var m=c[u];if(!(m?bn(m,g):i(t[u],g,r)))continue t}p&&p.push(g),f.push(v)}}return f}function ni(t,e,n){var r=null==(t=Qa(t,e=Gi(e,t)))?t:t[uo(xo(e))];return null==r?a:Ge(r,t,n)}function ri(t){return As(t)&&Jr(t)==z}function ii(t,e,n,r,i){return t===e||(null==t||null==e||!As(t)&&!As(e)?t!==t&&e!==e:function(t,e,n,r,i,o){var s=gs(t),u=gs(e),c=s?q:Ua(t),l=u?q:Ua(e),f=(c=c==z?Q:c)==Q,h=(l=l==z?Q:l)==Q,d=c==l;if(d&&_s(t)){if(!_s(e))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new wr),s||Fs(t)?Aa(t,e,n,r,i,o):function(t,e,n,r,i,a,o){switch(n){case ct:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ut:return!(t.byteLength!=e.byteLength||!a(new _e(t),new _e(e)));case H:case G:case J:return hs(+t,+e);case V:return t.name==e.name&&t.message==e.message;case et:case rt:return t==e+"";case K:var s=On;case nt:var u=r&v;if(s||(s=Cn),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;r|=g,o.set(t,e);var l=Aa(s(t),s(e),r,i,a,o);return o.delete(t),l;case it:if(lr)return lr.call(t)==lr.call(e)}return!1}(t,e,c,n,r,i,o);if(!(n&v)){var p=f&&ce.call(t,"__wrapped__"),m=h&&ce.call(e,"__wrapped__");if(p||m){var y=p?t.value():t,b=m?e.value():e;return o||(o=new wr),i(y,b,n,r,o)}}if(!d)return!1;return o||(o=new wr),function(t,e,n,r,i,o){var s=n&v,u=Ca(t),c=u.length,l=Ca(e).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var h=u[f];if(!(s?h in e:ce.call(e,h)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);var g=s;for(;++f<c;){h=u[f];var m=t[h],y=e[h];if(r)var b=s?r(y,m,h,e,t,o):r(m,y,h,t,e,o);if(!(b===a?m===y||i(m,y,n,r,o):b)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,i,o)}(t,e,n,r,ii,i))}function ai(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=te(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var c=(u=n[i])[0],l=t[c],f=u[1];if(s&&u[2]){if(l===a&&!(c in t))return!1}else{var h=new wr;if(r)var d=r(l,f,c,t,e,h);if(!(d===a?ii(f,l,v|g,r,h):d))return!1}}return!0}function oi(t){return!(!Os(t)||(e=t,fe&&fe in e))&&(ks(t)?ve:Yt).test(co(t));var e}function si(t){return"function"==typeof t?t:null==t?Cu:"object"==typeof t?gs(t)?di(t[0],t[1]):hi(t):Iu(t)}function ui(t){if(!Xa(t))return Wn(t);var e=[];for(var n in te(t))ce.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ci(t){if(!Os(t))return function(t){var e=[];if(null!=t)for(var n in te(t))e.push(n);return e}(t);var e=Xa(t),n=[];for(var r in t)("constructor"!=r||!e&&ce.call(t,r))&&n.push(r);return n}function li(t,e){return t<e}function fi(t,e){var r=-1,i=ys(t)?n(t.length):[];return Ir(t,(function(t,n,a){i[++r]=e(t,n,a)})),i}function hi(t){var e=Na(t);return 1==e.length&&e[0][2]?Ja(e[0][0],e[0][1]):function(n){return n===t||ai(n,t,e)}}function di(t,e){return Ya(t)&&Ka(e)?Ja(uo(t),e):function(n){var r=Zs(n,t);return r===a&&r===e?Qs(n,t):ii(e,r,v|g)}}function pi(t,e,n,r,i){t!==e&&Hr(e,(function(o,s){if(i||(i=new wr),Os(o))!function(t,e,n,r,i,o,s){var u=to(t,n),c=to(e,n),l=s.get(c);if(l)return void Or(t,n,l);var f=o?o(u,c,n+"",t,e,s):a,h=f===a;if(h){var d=gs(c),p=!d&&_s(c),v=!d&&!p&&Fs(c);f=c,d||p||v?gs(u)?f=u:bs(u)?f=ea(u):p?(h=!1,f=Xi(c,!0)):v?(h=!1,f=Ji(c,!0)):f=[]:js(c)||vs(c)?(f=u,vs(u)?f=Ws(u):Os(u)&&!ks(u)||(f=qa(c))):h=!1}h&&(s.set(c,f),i(f,c,r,o,s),s.delete(c));Or(t,n,f)}(t,e,s,n,pi,r,i);else{var u=r?r(to(t,s),o,s+"",t,e,i):a;u===a&&(u=o),Or(t,s,u)}}),iu)}function vi(t,e){var n=t.length;if(n)return Ha(e+=e<0?n:0,n)?t[e]:a}function gi(t,e,n){var r=-1;return e=Qe(e.length?e:[Cu],mn(Pa())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fi(t,(function(t,n,i){return{criteria:Qe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Zi(i[r],a[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function mi(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=Xr(t,o);n(s,o)&&Si(a,Gi(o,t),s)}return a}function yi(t,e,n,r){var i=r?cn:un,a=-1,o=e.length,s=t;for(t===e&&(e=ea(e)),n&&(s=Qe(t,mn(n)));++a<o;)for(var u=0,c=e[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Pe.call(s,u,1),Pe.call(t,u,1);return t}function bi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;Ha(i)?Pe.call(t,i,1):Li(t,i)}}return t}function _i(t,e){return t+In($n()*(e-t+1))}function wi(t,e){var n="";if(!t||e<1||e>P)return n;do{e%2&&(n+=t),(e=In(e/2))&&(t+=t)}while(e);return n}function xi(t,e){return ro(Za(t,e,Cu),t+"")}function ki(t){return kr(hu(t))}function Ei(t,e){var n=hu(t);return oo(n,Mr(e,0,n.length))}function Si(t,e,n,r){if(!Os(t))return t;for(var i=-1,o=(e=Gi(e,t)).length,s=o-1,u=t;null!=u&&++i<o;){var c=uo(e[i]),l=n;if(i!=s){var f=u[c];(l=r?r(f,c,u):a)===a&&(l=Os(f)?f:Ha(e[i+1])?[]:{})}Ar(u,c,l),u=u[c]}return t}var Oi=nr?function(t,e){return nr.set(t,e),t}:Cu,Ai=an?function(t,e){return an(t,"toString",{configurable:!0,enumerable:!1,value:Ou(e),writable:!0})}:Cu;function Ti(t){return oo(hu(t))}function Ci(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=n(a);++i<a;)o[i]=t[i+e];return o}function ji(t,e){var n;return Ir(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Di(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=B){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!Ps(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return Ri(t,e,Cu,n)}function Ri(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,s=e!==e,u=null===e,c=Ps(e),l=e===a;i<o;){var f=In((i+o)/2),h=n(t[f]),d=h!==a,p=null===h,v=h===h,g=Ps(h);if(s)var m=r||v;else m=l?v&&(r||d):u?v&&d&&(r||!p):c?v&&d&&!p&&(r||!g):!p&&!g&&(r?h<=e:h<e);m?i=f+1:o=f}return Gn(o,I)}function Mi(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!hs(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Pi(t){return"number"==typeof t?t:Ps(t)?N:+t}function Fi(t){if("string"==typeof t)return t;if(gs(t))return Qe(t,Fi)+"";if(Ps(t))return fr?fr.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function Ni(t,e,n){var r=-1,i=Je,a=t.length,s=!0,u=[],c=u;if(n)s=!1,i=Ze;else if(a>=o){var l=e?null:wa(t);if(l)return Cn(l);s=!1,i=bn,c=new _r}else c=e?[]:u;t:for(;++r<a;){var f=t[r],h=e?e(f):f;if(f=n||0!==f?f:0,s&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),u.push(f)}else i(c,h,n)||(c!==u&&c.push(h),u.push(f))}return u}function Li(t,e){return null==(t=Qa(t,e=Gi(e,t)))||delete t[uo(xo(e))]}function Ii(t,e,n,r){return Si(t,e,n(Xr(t,e)),r)}function Bi(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?Ci(t,r?0:a,r?a+1:i):Ci(t,r?a+1:0,r?i:a)}function Ui(t,e){var n=t;return n instanceof gr&&(n=n.value()),en(e,(function(t,e){return e.func.apply(e.thisArg,tn([t],e.args))}),n)}function zi(t,e,r){var i=t.length;if(i<2)return i?Ni(t[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=Lr(o[a]||s,t[u],e,r));return Ni(Wr(o,1),e,r)}function qi(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var u=r<o?e[r]:a;n(s,t[r],u)}return s}function Wi(t){return bs(t)?t:[]}function Hi(t){return"function"==typeof t?t:Cu}function Gi(t,e){return gs(t)?t:Ya(t,e)?[t]:so(Hs(t))}var Yi=xi;function Vi(t,e,n){var r=t.length;return n=n===a?r:n,!e&&n>=r?t:Ci(t,e,n)}var $i=dn||function(t){return Me.clearTimeout(t)};function Xi(t,e){if(e)return t.slice();var n=t.length,r=xe?xe(n):new t.constructor(n);return t.copy(r),r}function Ki(t){var e=new t.constructor(t.byteLength);return new _e(e).set(new _e(t)),e}function Ji(t,e){var n=e?Ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Zi(t,e){if(t!==e){var n=t!==a,r=null===t,i=t===t,o=Ps(t),s=e!==a,u=null===e,c=e===e,l=Ps(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!c)return-1}return 0}function Qi(t,e,r,i){for(var a=-1,o=t.length,s=r.length,u=-1,c=e.length,l=Hn(o-s,0),f=n(c+l),h=!i;++u<c;)f[u]=e[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=t[a]);for(;l--;)f[u++]=t[a++];return f}function ta(t,e,r,i){for(var a=-1,o=t.length,s=-1,u=r.length,c=-1,l=e.length,f=Hn(o-u,0),h=n(f+l),d=!i;++a<f;)h[a]=t[a];for(var p=a;++c<l;)h[p+c]=e[c];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=t[a++]);return h}function ea(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function na(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],c=r?r(n[u],t[u],u,n,t):a;c===a&&(c=t[u]),i?Dr(n,u,c):Ar(n,u,c)}return n}function ra(t,e){return function(n,r){var i=gs(n)?Ye:Cr,a=e?e():{};return i(n,t,Pa(r,2),a)}}function ia(t){return xi((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=t.length>3&&"function"==typeof o?(i--,o):a,s&&Ga(n[0],n[1],s)&&(o=i<3?a:o,i=1),e=te(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e}))}function aa(t,e){return function(n,r){if(null==n)return n;if(!ys(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=te(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function oa(t){return function(e,n,r){for(var i=-1,a=te(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}function sa(t){return function(e){var n=Sn(e=Hs(e))?Rn(e):a,r=n?n[0]:e.charAt(0),i=n?Vi(n,1).join(""):e.slice(1);return r[t]()+i}}function ua(t){return function(e){return en(ku(vu(e).replace(ye,"")),t,"")}}function ca(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dr(t.prototype),r=t.apply(n,e);return Os(r)?r:n}}function la(t){return function(e,n,r){var i=te(e);if(!ys(e)){var o=Pa(n,3);e=ru(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:a}}function fa(t){return Ta((function(e){var n=e.length,r=n,i=vr.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new re(u);if(i&&!s&&"wrapper"==Ra(o))var s=new vr([],!0)}for(r=s?r:n;++r<n;){var c=Ra(o=e[r]),l="wrapper"==c?Da(o):a;s=l&&Va(l[0])&&l[1]==(E|_|x|S)&&!l[4].length&&1==l[9]?s[Ra(l[0])].apply(s,l[3]):1==o.length&&Va(o)?s[c]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&gs(r))return s.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}}))}function ha(t,e,r,i,o,s,u,c,l,f){var h=e&E,d=e&m,p=e&y,v=e&(_|w),g=e&O,b=p?a:ca(t);return function m(){for(var y=arguments.length,_=n(y),w=y;w--;)_[w]=arguments[w];if(v)var x=Ma(m),k=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,x);if(i&&(_=Qi(_,i,o,v)),s&&(_=ta(_,s,u,v)),y-=k,v&&y<f){var E=Tn(_,x);return ba(t,e,ha,m.placeholder,r,_,E,c,l,f-y)}var S=d?r:this,O=p?S[t]:t;return y=_.length,c?_=function(t,e){var n=t.length,r=Gn(e.length,n),i=ea(t);for(;r--;){var o=e[r];t[r]=Ha(o,n)?i[o]:a}return t}(_,c):g&&y>1&&_.reverse(),h&&l<y&&(_.length=l),this&&this!==Me&&this instanceof m&&(O=b||ca(O)),O.apply(S,_)}}function da(t,e){return function(n,r){return function(t,e,n,r){return Yr(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function pa(t,e){return function(n,r){var i;if(n===a&&r===a)return e;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=Fi(n),r=Fi(r)):(n=Pi(n),r=Pi(r)),i=t(n,r)}return i}}function va(t){return Ta((function(e){return e=Qe(e,mn(Pa())),xi((function(n){var r=this;return t(e,(function(t){return Ge(t,r,n)}))}))}))}function ga(t,e){var n=(e=e===a?" ":Fi(e)).length;if(n<2)return n?wi(e,t):e;var r=wi(e,Ln(t/Dn(e)));return Sn(e)?Vi(Rn(r),0,t).join(""):r.slice(0,t)}function ma(t){return function(e,r,i){return i&&"number"!=typeof i&&Ga(e,r,i)&&(r=i=a),e=Bs(e),r===a?(r=e,e=0):r=Bs(r),function(t,e,r,i){for(var a=-1,o=Hn(Ln((e-t)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=t,t+=r;return s}(e,r,i=i===a?e<r?1:-1:Bs(i),t)}}function ya(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=qs(e),n=qs(n)),t(e,n)}}function ba(t,e,n,r,i,o,s,u,c,l){var f=e&_;e|=f?x:k,(e&=~(f?k:x))&b||(e&=~(m|y));var h=[t,e,i,f?o:a,f?s:a,f?a:o,f?a:s,u,c,l],d=n.apply(a,h);return Va(t)&&eo(d,h),d.placeholder=r,io(d,t,e)}function _a(t){var e=Qt[t];return function(t,n){if(t=qs(t),(n=null==n?0:Gn(Us(n),292))&&zn(t)){var r=(Hs(t)+"e").split("e");return+((r=(Hs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var wa=Qn&&1/Cn(new Qn([,-0]))[1]==M?function(t){return new Qn(t)}:Pu;function xa(t){return function(e){var n=Ua(e);return n==K?On(e):n==nt?jn(e):function(t,e){return Qe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function ka(t,e,r,i,o,s,c,l){var h=e&y;if(!h&&"function"!=typeof t)throw new re(u);var d=i?i.length:0;if(d||(e&=~(x|k),i=o=a),c=c===a?c:Hn(Us(c),0),l=l===a?l:Us(l),d-=o?o.length:0,e&k){var p=i,v=o;i=o=a}var g=h?a:Da(t),O=[t,e,r,i,o,p,v,s,c,l];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<(m|y|E),o=r==E&&n==_||r==E&&n==S&&t[7].length<=e[8]||r==(E|S)&&e[7].length<=e[8]&&n==_;if(!a&&!o)return t;r&m&&(t[2]=e[2],i|=n&m?0:b);var s=e[3];if(s){var u=t[3];t[3]=u?Qi(u,s,e[4]):s,t[4]=u?Tn(t[3],f):e[4]}(s=e[5])&&(u=t[5],t[5]=u?ta(u,s,e[6]):s,t[6]=u?Tn(t[5],f):e[6]);(s=e[7])&&(t[7]=s);r&E&&(t[8]=null==t[8]?e[8]:Gn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(O,g),t=O[0],e=O[1],r=O[2],i=O[3],o=O[4],!(l=O[9]=O[9]===a?h?0:t.length:Hn(O[9]-d,0))&&e&(_|w)&&(e&=~(_|w)),e&&e!=m)A=e==_||e==w?function(t,e,r){var i=ca(t);return function o(){for(var s=arguments.length,u=n(s),c=s,l=Ma(o);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:Tn(u,l);return(s-=f.length)<r?ba(t,e,ha,o.placeholder,a,u,f,a,a,r-s):Ge(this&&this!==Me&&this instanceof o?i:t,this,u)}}(t,e,l):e!=x&&e!=(m|x)||o.length?ha.apply(a,O):function(t,e,r,i){var a=e&m,o=ca(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==Me&&this instanceof e?o:t;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return Ge(h,a?r:this,f)}}(t,e,r,i);else var A=function(t,e,n){var r=e&m,i=ca(t);return function e(){return(this&&this!==Me&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,r);return io((g?Oi:eo)(A,O),t,e)}function Ea(t,e,n,r){return t===a||hs(t,oe[n])&&!ce.call(r,n)?e:t}function Sa(t,e,n,r,i,o){return Os(t)&&Os(e)&&(o.set(e,t),pi(t,e,a,Sa,o),o.delete(e)),t}function Oa(t){return js(t)?a:t}function Aa(t,e,n,r,i,o){var s=n&v,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var f=-1,h=!0,d=n&g?new _r:a;for(o.set(t,e),o.set(e,t);++f<u;){var p=t[f],m=e[f];if(r)var y=s?r(m,p,f,e,t,o):r(p,m,f,t,e,o);if(y!==a){if(y)continue;h=!1;break}if(d){if(!rn(e,(function(t,e){if(!bn(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)}))){h=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Ta(t){return ro(Za(t,a,mo),t+"")}function Ca(t){return Kr(t,ru,Ia)}function ja(t){return Kr(t,iu,Ba)}var Da=nr?function(t){return nr.get(t)}:Pu;function Ra(t){for(var e=t.name+"",n=rr[e],r=ce.call(rr,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Ma(t){return(ce.call(hr,"placeholder")?hr:t).placeholder}function Pa(){var t=hr.iteratee||ju;return t=t===ju?si:t,arguments.length?t(arguments[0],arguments[1]):t}function Fa(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Na(t){for(var e=ru(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Ka(i)]}return e}function La(t,e){var n=function(t,e){return null==t?a:t[e]}(t,e);return oi(n)?n:a}var Ia=Bn?function(t){return null==t?[]:(t=te(t),Ke(Bn(t),(function(e){return Re.call(t,e)})))}:zu,Ba=Bn?function(t){for(var e=[];t;)tn(e,Ia(t)),t=Te(t);return e}:zu,Ua=Jr;function za(t,e,n){for(var r=-1,i=(e=Gi(e,t)).length,a=!1;++r<i;){var o=uo(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Ss(i)&&Ha(o,i)&&(gs(t)||vs(t))}function qa(t){return"function"!=typeof t.constructor||Xa(t)?{}:dr(Te(t))}function Wa(t){return gs(t)||vs(t)||!!(Fe&&t&&t[Fe])}function Ha(t,e){var n=typeof t;return!!(e=null==e?P:e)&&("number"==n||"symbol"!=n&&$t.test(t))&&t>-1&&t%1==0&&t<e}function Ga(t,e,n){if(!Os(n))return!1;var r=typeof e;return!!("number"==r?ys(n)&&Ha(e,n.length):"string"==r&&e in n)&&hs(n[e],t)}function Ya(t,e){if(gs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ps(t))||(jt.test(t)||!Ct.test(t)||null!=e&&t in te(e))}function Va(t){var e=Ra(t),n=hr[e];if("function"!=typeof n||!(e in gr.prototype))return!1;if(t===n)return!0;var r=Da(n);return!!r&&t===r[0]}(Kn&&Ua(new Kn(new ArrayBuffer(1)))!=ct||Jn&&Ua(new Jn)!=K||Zn&&"[object Promise]"!=Ua(Zn.resolve())||Qn&&Ua(new Qn)!=nt||tr&&Ua(new tr)!=ot)&&(Ua=function(t){var e=Jr(t),n=e==Q?t.constructor:a,r=n?co(n):"";if(r)switch(r){case ir:return ct;case ar:return K;case or:return"[object Promise]";case sr:return nt;case ur:return ot}return e});var $a=se?ks:qu;function Xa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||oe)}function Ka(t){return t===t&&!Os(t)}function Ja(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==a||t in te(n)))}}function Za(t,e,r){return e=Hn(e===a?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=Hn(i.length-e,0),s=n(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=i[a];return u[e]=r(s),Ge(t,this,u)}}function Qa(t,e){return e.length<2?t:Xr(t,Ci(e,0,-1))}function to(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var eo=ao(Oi),no=Nn||function(t,e){return Me.setTimeout(t,e)},ro=ao(Ai);function io(t,e,n){var r=e+"";return ro(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ve(U,(function(n){var r="_."+n[0];e&n[1]&&!Je(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(It);return e?e[1].split(Bt):[]}(r),n)))}function ao(t){var e=0,n=0;return function(){var r=Yn(),i=j-(r-n);if(n=r,i>0){if(++e>=C)return arguments[0]}else e=0;return t.apply(a,arguments)}}function oo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===a?r:e;++n<e;){var o=_i(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var so=function(t){var e=os(t,(function(t){return n.size===l&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Dt,(function(t,n,r,i){e.push(r?i.replace(zt,"$1"):n||t)})),e}));function uo(t){if("string"==typeof t||Ps(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function co(t){if(null!=t){try{return ue.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function lo(t){if(t instanceof gr)return t.clone();var e=new vr(t.__wrapped__,t.__chain__);return e.__actions__=ea(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var fo=xi((function(t,e){return bs(t)?Lr(t,Wr(e,1,bs,!0)):[]})),ho=xi((function(t,e){var n=xo(e);return bs(n)&&(n=a),bs(t)?Lr(t,Wr(e,1,bs,!0),Pa(n,2)):[]})),po=xi((function(t,e){var n=xo(e);return bs(n)&&(n=a),bs(t)?Lr(t,Wr(e,1,bs,!0),a,n):[]}));function vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Us(n);return i<0&&(i=Hn(r+i,0)),sn(t,Pa(e,3),i)}function go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==a&&(i=Us(n),i=n<0?Hn(r+i,0):Gn(i,r-1)),sn(t,Pa(e,3),i,!0)}function mo(t){return(null==t?0:t.length)?Wr(t,1):[]}function yo(t){return t&&t.length?t[0]:a}var bo=xi((function(t){var e=Qe(t,Wi);return e.length&&e[0]===t[0]?ei(e):[]})),_o=xi((function(t){var e=xo(t),n=Qe(t,Wi);return e===xo(n)?e=a:n.pop(),n.length&&n[0]===t[0]?ei(n,Pa(e,2)):[]})),wo=xi((function(t){var e=xo(t),n=Qe(t,Wi);return(e="function"==typeof e?e:a)&&n.pop(),n.length&&n[0]===t[0]?ei(n,a,e):[]}));function xo(t){var e=null==t?0:t.length;return e?t[e-1]:a}var ko=xi(Eo);function Eo(t,e){return t&&t.length&&e&&e.length?yi(t,e):t}var So=Ta((function(t,e){var n=null==t?0:t.length,r=Rr(t,e);return bi(t,Qe(e,(function(t){return Ha(t,n)?+t:t})).sort(Zi)),r}));function Oo(t){return null==t?t:Xn.call(t)}var Ao=xi((function(t){return Ni(Wr(t,1,bs,!0))})),To=xi((function(t){var e=xo(t);return bs(e)&&(e=a),Ni(Wr(t,1,bs,!0),Pa(e,2))})),Co=xi((function(t){var e=xo(t);return e="function"==typeof e?e:a,Ni(Wr(t,1,bs,!0),a,e)}));function jo(t){if(!t||!t.length)return[];var e=0;return t=Ke(t,(function(t){if(bs(t))return e=Hn(t.length,e),!0})),gn(e,(function(e){return Qe(t,hn(e))}))}function Do(t,e){if(!t||!t.length)return[];var n=jo(t);return null==e?n:Qe(n,(function(t){return Ge(e,a,t)}))}var Ro=xi((function(t,e){return bs(t)?Lr(t,e):[]})),Mo=xi((function(t){return zi(Ke(t,bs))})),Po=xi((function(t){var e=xo(t);return bs(e)&&(e=a),zi(Ke(t,bs),Pa(e,2))})),Fo=xi((function(t){var e=xo(t);return e="function"==typeof e?e:a,zi(Ke(t,bs),a,e)})),No=xi(jo);var Lo=xi((function(t){var e=t.length,n=e>1?t[e-1]:a;return n="function"==typeof n?(t.pop(),n):a,Do(t,n)}));function Io(t){var e=hr(t);return e.__chain__=!0,e}function Bo(t,e){return e(t)}var Uo=Ta((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Rr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof gr&&Ha(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Bo,args:[i],thisArg:a}),new vr(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(a),t}))):this.thru(i)}));var zo=ra((function(t,e,n){ce.call(t,n)?++t[n]:Dr(t,n,1)}));var qo=la(vo),Wo=la(go);function Ho(t,e){return(gs(t)?Ve:Ir)(t,Pa(e,3))}function Go(t,e){return(gs(t)?$e:Br)(t,Pa(e,3))}var Yo=ra((function(t,e,n){ce.call(t,n)?t[n].push(e):Dr(t,n,[e])}));var Vo=xi((function(t,e,r){var i=-1,a="function"==typeof e,o=ys(t)?n(t.length):[];return Ir(t,(function(t){o[++i]=a?Ge(e,t,r):ni(t,e,r)})),o})),$o=ra((function(t,e,n){Dr(t,n,e)}));function Xo(t,e){return(gs(t)?Qe:fi)(t,Pa(e,3))}var Ko=ra((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Jo=xi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ga(t,e[0],e[1])?e=[]:n>2&&Ga(e[0],e[1],e[2])&&(e=[e[0]]),gi(t,Wr(e,1),[])})),Zo=Fn||function(){return Me.Date.now()};function Qo(t,e,n){return e=n?a:e,e=t&&null==e?t.length:e,ka(t,E,a,a,a,a,e)}function ts(t,e){var n;if("function"!=typeof e)throw new re(u);return t=Us(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=a),n}}var es=xi((function(t,e,n){var r=m;if(n.length){var i=Tn(n,Ma(es));r|=x}return ka(t,r,e,n,i)})),ns=xi((function(t,e,n){var r=m|y;if(n.length){var i=Tn(n,Ma(ns));r|=x}return ka(e,r,t,n,i)}));function rs(t,e,n){var r,i,o,s,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new re(u);function v(e){var n=r,o=i;return r=i=a,f=e,s=t.apply(o,n)}function g(t){var n=t-l;return l===a||n>=e||n<0||d&&t-f>=o}function m(){var t=Zo();if(g(t))return y(t);c=no(m,function(t){var n=e-(t-l);return d?Gn(n,o-(t-f)):n}(t))}function y(t){return c=a,p&&r?v(t):(r=i=a,s)}function b(){var t=Zo(),n=g(t);if(r=arguments,i=this,l=t,n){if(c===a)return function(t){return f=t,c=no(m,e),h?v(t):s}(l);if(d)return $i(c),c=no(m,e),v(l)}return c===a&&(c=no(m,e)),s}return e=qs(e)||0,Os(n)&&(h=!!n.leading,o=(d="maxWait"in n)?Hn(qs(n.maxWait)||0,e):o,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==a&&$i(c),f=0,r=l=i=c=a},b.flush=function(){return c===a?s:y(Zo())},b}var is=xi((function(t,e){return Nr(t,1,e)})),as=xi((function(t,e,n){return Nr(t,qs(e)||0,n)}));function os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new re(u);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(os.Cache||br),n}function ss(t){if("function"!=typeof t)throw new re(u);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}os.Cache=br;var us=Yi((function(t,e){var n=(e=1==e.length&&gs(e[0])?Qe(e[0],mn(Pa())):Qe(Wr(e,1),mn(Pa()))).length;return xi((function(r){for(var i=-1,a=Gn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Ge(t,this,r)}))})),cs=xi((function(t,e){var n=Tn(e,Ma(cs));return ka(t,x,a,e,n)})),ls=xi((function(t,e){var n=Tn(e,Ma(ls));return ka(t,k,a,e,n)})),fs=Ta((function(t,e){return ka(t,S,a,a,a,e)}));function hs(t,e){return t===e||t!==t&&e!==e}var ds=ya(Zr),ps=ya((function(t,e){return t>=e})),vs=ri(function(){return arguments}())?ri:function(t){return As(t)&&ce.call(t,"callee")&&!Re.call(t,"callee")},gs=n.isArray,ms=Be?mn(Be):function(t){return As(t)&&Jr(t)==ut};function ys(t){return null!=t&&Ss(t.length)&&!ks(t)}function bs(t){return As(t)&&ys(t)}var _s=Un||qu,ws=Ue?mn(Ue):function(t){return As(t)&&Jr(t)==G};function xs(t){if(!As(t))return!1;var e=Jr(t);return e==V||e==Y||"string"==typeof t.message&&"string"==typeof t.name&&!js(t)}function ks(t){if(!Os(t))return!1;var e=Jr(t);return e==$||e==X||e==W||e==tt}function Es(t){return"number"==typeof t&&t==Us(t)}function Ss(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=P}function Os(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function As(t){return null!=t&&"object"==typeof t}var Ts=ze?mn(ze):function(t){return As(t)&&Ua(t)==K};function Cs(t){return"number"==typeof t||As(t)&&Jr(t)==J}function js(t){if(!As(t)||Jr(t)!=Q)return!1;var e=Te(t);if(null===e)return!0;var n=ce.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ue.call(n)==de}var Ds=qe?mn(qe):function(t){return As(t)&&Jr(t)==et};var Rs=We?mn(We):function(t){return As(t)&&Ua(t)==nt};function Ms(t){return"string"==typeof t||!gs(t)&&As(t)&&Jr(t)==rt}function Ps(t){return"symbol"==typeof t||As(t)&&Jr(t)==it}var Fs=He?mn(He):function(t){return As(t)&&Ss(t.length)&&!!Oe[Jr(t)]};var Ns=ya(li),Ls=ya((function(t,e){return t<=e}));function Is(t){if(!t)return[];if(ys(t))return Ms(t)?Rn(t):ea(t);if(Le&&t[Le])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Le]());var e=Ua(t);return(e==K?On:e==nt?Cn:hu)(t)}function Bs(t){return t?(t=qs(t))===M||t===-M?(t<0?-1:1)*F:t===t?t:0:0===t?t:0}function Us(t){var e=Bs(t),n=e%1;return e===e?n?e-n:e:0}function zs(t){return t?Mr(Us(t),0,L):0}function qs(t){if("number"==typeof t)return t;if(Ps(t))return N;if(Os(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Os(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Pt,"");var n=Gt.test(t);return n||Vt.test(t)?je(t.slice(2),n?2:8):Ht.test(t)?N:+t}function Ws(t){return na(t,iu(t))}function Hs(t){return null==t?"":Fi(t)}var Gs=ia((function(t,e){if(Xa(e)||ys(e))na(e,ru(e),t);else for(var n in e)ce.call(e,n)&&Ar(t,n,e[n])})),Ys=ia((function(t,e){na(e,iu(e),t)})),Vs=ia((function(t,e,n,r){na(e,iu(e),t,r)})),$s=ia((function(t,e,n,r){na(e,ru(e),t,r)})),Xs=Ta(Rr);var Ks=xi((function(t,e){t=te(t);var n=-1,r=e.length,i=r>2?e[2]:a;for(i&&Ga(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=iu(o),u=-1,c=s.length;++u<c;){var l=s[u],f=t[l];(f===a||hs(f,oe[l])&&!ce.call(t,l))&&(t[l]=o[l])}return t})),Js=xi((function(t){return t.push(a,Sa),Ge(ou,a,t)}));function Zs(t,e,n){var r=null==t?a:Xr(t,e);return r===a?n:r}function Qs(t,e){return null!=t&&za(t,e,ti)}var tu=da((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),t[e]=n}),Ou(Cu)),eu=da((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=he.call(e)),ce.call(t,e)?t[e].push(n):t[e]=[n]}),Pa),nu=xi(ni);function ru(t){return ys(t)?xr(t):ui(t)}function iu(t){return ys(t)?xr(t,!0):ci(t)}var au=ia((function(t,e,n){pi(t,e,n)})),ou=ia((function(t,e,n,r){pi(t,e,n,r)})),su=Ta((function(t,e){var n={};if(null==t)return n;var r=!1;e=Qe(e,(function(e){return e=Gi(e,t),r||(r=e.length>1),e})),na(t,ja(t),n),r&&(n=Pr(n,h|d|p,Oa));for(var i=e.length;i--;)Li(n,e[i]);return n}));var uu=Ta((function(t,e){return null==t?{}:function(t,e){return mi(t,e,(function(e,n){return Qs(t,n)}))}(t,e)}));function cu(t,e){if(null==t)return{};var n=Qe(ja(t),(function(t){return[t]}));return e=Pa(e),mi(t,n,(function(t,n){return e(t,n[0])}))}var lu=xa(ru),fu=xa(iu);function hu(t){return null==t?[]:yn(t,ru(t))}var du=ua((function(t,e,n){return e=e.toLowerCase(),t+(n?pu(e):e)}));function pu(t){return xu(Hs(t).toLowerCase())}function vu(t){return(t=Hs(t))&&t.replace(Xt,xn).replace(be,"")}var gu=ua((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),mu=ua((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),yu=sa("toLowerCase");var bu=ua((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var _u=ua((function(t,e,n){return t+(n?" ":"")+xu(e)}));var wu=ua((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),xu=sa("toUpperCase");function ku(t,e,n){return t=Hs(t),(e=n?a:e)===a?function(t){return ke.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Ut)||[]}(t):t.match(e)||[]}var Eu=xi((function(t,e){try{return Ge(t,a,e)}catch(n){return xs(n)?n:new i(n)}})),Su=Ta((function(t,e){return Ve(e,(function(e){e=uo(e),Dr(t,e,es(t[e],t))})),t}));function Ou(t){return function(){return t}}var Au=fa(),Tu=fa(!0);function Cu(t){return t}function ju(t){return si("function"==typeof t?t:Pr(t,h))}var Du=xi((function(t,e){return function(n){return ni(n,t,e)}})),Ru=xi((function(t,e){return function(n){return ni(t,n,e)}}));function Mu(t,e,n){var r=ru(e),i=$r(e,r);null!=n||Os(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=$r(e,ru(e)));var a=!(Os(n)&&"chain"in n)||!!n.chain,o=ks(t);return Ve(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i=n.__actions__=ea(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,tn([this.value()],arguments))})})),t}function Pu(){}var Fu=va(Qe),Nu=va(Xe),Lu=va(rn);function Iu(t){return Ya(t)?hn(uo(t)):function(t){return function(e){return Xr(e,t)}}(t)}var Bu=ma(),Uu=ma(!0);function zu(){return[]}function qu(){return!1}var Wu=pa((function(t,e){return t+e}),0),Hu=_a("ceil"),Gu=pa((function(t,e){return t/e}),1),Yu=_a("floor");var Vu=pa((function(t,e){return t*e}),1),$u=_a("round"),Xu=pa((function(t,e){return t-e}),0);return hr.after=function(t,e){if("function"!=typeof e)throw new re(u);return t=Us(t),function(){if(--t<1)return e.apply(this,arguments)}},hr.ary=Qo,hr.assign=Gs,hr.assignIn=Ys,hr.assignInWith=Vs,hr.assignWith=$s,hr.at=Xs,hr.before=ts,hr.bind=es,hr.bindAll=Su,hr.bindKey=ns,hr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return gs(t)?t:[t]},hr.chain=Io,hr.chunk=function(t,e,r){e=(r?Ga(t,e,r):e===a)?1:Hn(Us(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=n(Ln(i/e));o<i;)u[s++]=Ci(t,o,o+=e);return u},hr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},hr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return tn(gs(r)?ea(r):[r],Wr(e,1))},hr.cond=function(t){var e=null==t?0:t.length,n=Pa();return t=e?Qe(t,(function(t){if("function"!=typeof t[1])throw new re(u);return[n(t[0]),t[1]]})):[],xi((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ge(i[0],this,n))return Ge(i[1],this,n)}}))},hr.conforms=function(t){return function(t){var e=ru(t);return function(n){return Fr(n,t,e)}}(Pr(t,h))},hr.constant=Ou,hr.countBy=zo,hr.create=function(t,e){var n=dr(t);return null==e?n:jr(n,e)},hr.curry=function t(e,n,r){var i=ka(e,_,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},hr.curryRight=function t(e,n,r){var i=ka(e,w,a,a,a,a,a,n=r?a:n);return i.placeholder=t.placeholder,i},hr.debounce=rs,hr.defaults=Ks,hr.defaultsDeep=Js,hr.defer=is,hr.delay=as,hr.difference=fo,hr.differenceBy=ho,hr.differenceWith=po,hr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Ci(t,(e=n||e===a?1:Us(e))<0?0:e,r):[]},hr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Ci(t,0,(e=r-(e=n||e===a?1:Us(e)))<0?0:e):[]},hr.dropRightWhile=function(t,e){return t&&t.length?Bi(t,Pa(e,3),!0,!0):[]},hr.dropWhile=function(t,e){return t&&t.length?Bi(t,Pa(e,3),!0):[]},hr.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ga(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Us(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:Us(r))<0&&(r+=i),r=n>r?0:zs(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},hr.filter=function(t,e){return(gs(t)?Ke:qr)(t,Pa(e,3))},hr.flatMap=function(t,e){return Wr(Xo(t,e),1)},hr.flatMapDeep=function(t,e){return Wr(Xo(t,e),M)},hr.flatMapDepth=function(t,e,n){return n=n===a?1:Us(n),Wr(Xo(t,e),n)},hr.flatten=mo,hr.flattenDeep=function(t){return(null==t?0:t.length)?Wr(t,M):[]},hr.flattenDepth=function(t,e){return(null==t?0:t.length)?Wr(t,e=e===a?1:Us(e)):[]},hr.flip=function(t){return ka(t,O)},hr.flow=Au,hr.flowRight=Tu,hr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},hr.functions=function(t){return null==t?[]:$r(t,ru(t))},hr.functionsIn=function(t){return null==t?[]:$r(t,iu(t))},hr.groupBy=Yo,hr.initial=function(t){return(null==t?0:t.length)?Ci(t,0,-1):[]},hr.intersection=bo,hr.intersectionBy=_o,hr.intersectionWith=wo,hr.invert=tu,hr.invertBy=eu,hr.invokeMap=Vo,hr.iteratee=ju,hr.keyBy=$o,hr.keys=ru,hr.keysIn=iu,hr.map=Xo,hr.mapKeys=function(t,e){var n={};return e=Pa(e,3),Yr(t,(function(t,r,i){Dr(n,e(t,r,i),t)})),n},hr.mapValues=function(t,e){var n={};return e=Pa(e,3),Yr(t,(function(t,r,i){Dr(n,r,e(t,r,i))})),n},hr.matches=function(t){return hi(Pr(t,h))},hr.matchesProperty=function(t,e){return di(t,Pr(e,h))},hr.memoize=os,hr.merge=au,hr.mergeWith=ou,hr.method=Du,hr.methodOf=Ru,hr.mixin=Mu,hr.negate=ss,hr.nthArg=function(t){return t=Us(t),xi((function(e){return vi(e,t)}))},hr.omit=su,hr.omitBy=function(t,e){return cu(t,ss(Pa(e)))},hr.once=function(t){return ts(2,t)},hr.orderBy=function(t,e,n,r){return null==t?[]:(gs(e)||(e=null==e?[]:[e]),gs(n=r?a:n)||(n=null==n?[]:[n]),gi(t,e,n))},hr.over=Fu,hr.overArgs=us,hr.overEvery=Nu,hr.overSome=Lu,hr.partial=cs,hr.partialRight=ls,hr.partition=Ko,hr.pick=uu,hr.pickBy=cu,hr.property=Iu,hr.propertyOf=function(t){return function(e){return null==t?a:Xr(t,e)}},hr.pull=ko,hr.pullAll=Eo,hr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?yi(t,e,Pa(n,2)):t},hr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?yi(t,e,a,n):t},hr.pullAt=So,hr.range=Bu,hr.rangeRight=Uu,hr.rearg=fs,hr.reject=function(t,e){return(gs(t)?Ke:qr)(t,ss(Pa(e,3)))},hr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=Pa(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return bi(t,i),n},hr.rest=function(t,e){if("function"!=typeof t)throw new re(u);return xi(t,e=e===a?e:Us(e))},hr.reverse=Oo,hr.sampleSize=function(t,e,n){return e=(n?Ga(t,e,n):e===a)?1:Us(e),(gs(t)?Er:Ei)(t,e)},hr.set=function(t,e,n){return null==t?t:Si(t,e,n)},hr.setWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:Si(t,e,n,r)},hr.shuffle=function(t){return(gs(t)?Sr:Ti)(t)},hr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ga(t,e,n)?(e=0,n=r):(e=null==e?0:Us(e),n=n===a?r:Us(n)),Ci(t,e,n)):[]},hr.sortBy=Jo,hr.sortedUniq=function(t){return t&&t.length?Mi(t):[]},hr.sortedUniqBy=function(t,e){return t&&t.length?Mi(t,Pa(e,2)):[]},hr.split=function(t,e,n){return n&&"number"!=typeof n&&Ga(t,e,n)&&(e=n=a),(n=n===a?L:n>>>0)?(t=Hs(t))&&("string"==typeof e||null!=e&&!Ds(e))&&!(e=Fi(e))&&Sn(t)?Vi(Rn(t),0,n):t.split(e,n):[]},hr.spread=function(t,e){if("function"!=typeof t)throw new re(u);return e=null==e?0:Hn(Us(e),0),xi((function(n){var r=n[e],i=Vi(n,0,e);return r&&tn(i,r),Ge(t,this,i)}))},hr.tail=function(t){var e=null==t?0:t.length;return e?Ci(t,1,e):[]},hr.take=function(t,e,n){return t&&t.length?Ci(t,0,(e=n||e===a?1:Us(e))<0?0:e):[]},hr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Ci(t,(e=r-(e=n||e===a?1:Us(e)))<0?0:e,r):[]},hr.takeRightWhile=function(t,e){return t&&t.length?Bi(t,Pa(e,3),!1,!0):[]},hr.takeWhile=function(t,e){return t&&t.length?Bi(t,Pa(e,3)):[]},hr.tap=function(t,e){return e(t),t},hr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new re(u);return Os(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),rs(t,e,{leading:r,maxWait:e,trailing:i})},hr.thru=Bo,hr.toArray=Is,hr.toPairs=lu,hr.toPairsIn=fu,hr.toPath=function(t){return gs(t)?Qe(t,uo):Ps(t)?[t]:ea(so(Hs(t)))},hr.toPlainObject=Ws,hr.transform=function(t,e,n){var r=gs(t),i=r||_s(t)||Fs(t);if(e=Pa(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:Os(t)&&ks(a)?dr(Te(t)):{}}return(i?Ve:Yr)(t,(function(t,r,i){return e(n,t,r,i)})),n},hr.unary=function(t){return Qo(t,1)},hr.union=Ao,hr.unionBy=To,hr.unionWith=Co,hr.uniq=function(t){return t&&t.length?Ni(t):[]},hr.uniqBy=function(t,e){return t&&t.length?Ni(t,Pa(e,2)):[]},hr.uniqWith=function(t,e){return e="function"==typeof e?e:a,t&&t.length?Ni(t,a,e):[]},hr.unset=function(t,e){return null==t||Li(t,e)},hr.unzip=jo,hr.unzipWith=Do,hr.update=function(t,e,n){return null==t?t:Ii(t,e,Hi(n))},hr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:a,null==t?t:Ii(t,e,Hi(n),r)},hr.values=hu,hr.valuesIn=function(t){return null==t?[]:yn(t,iu(t))},hr.without=Ro,hr.words=ku,hr.wrap=function(t,e){return cs(Hi(e),t)},hr.xor=Mo,hr.xorBy=Po,hr.xorWith=Fo,hr.zip=No,hr.zipObject=function(t,e){return qi(t||[],e||[],Ar)},hr.zipObjectDeep=function(t,e){return qi(t||[],e||[],Si)},hr.zipWith=Lo,hr.entries=lu,hr.entriesIn=fu,hr.extend=Ys,hr.extendWith=Vs,Mu(hr,hr),hr.add=Wu,hr.attempt=Eu,hr.camelCase=du,hr.capitalize=pu,hr.ceil=Hu,hr.clamp=function(t,e,n){return n===a&&(n=e,e=a),n!==a&&(n=(n=qs(n))===n?n:0),e!==a&&(e=(e=qs(e))===e?e:0),Mr(qs(t),e,n)},hr.clone=function(t){return Pr(t,p)},hr.cloneDeep=function(t){return Pr(t,h|p)},hr.cloneDeepWith=function(t,e){return Pr(t,h|p,e="function"==typeof e?e:a)},hr.cloneWith=function(t,e){return Pr(t,p,e="function"==typeof e?e:a)},hr.conformsTo=function(t,e){return null==e||Fr(t,e,ru(e))},hr.deburr=vu,hr.defaultTo=function(t,e){return null==t||t!==t?e:t},hr.divide=Gu,hr.endsWith=function(t,e,n){t=Hs(t),e=Fi(e);var r=t.length,i=n=n===a?r:Mr(Us(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},hr.eq=hs,hr.escape=function(t){return(t=Hs(t))&&St.test(t)?t.replace(kt,kn):t},hr.escapeRegExp=function(t){return(t=Hs(t))&&Mt.test(t)?t.replace(Rt,"\\$&"):t},hr.every=function(t,e,n){var r=gs(t)?Xe:Ur;return n&&Ga(t,e,n)&&(e=a),r(t,Pa(e,3))},hr.find=qo,hr.findIndex=vo,hr.findKey=function(t,e){return on(t,Pa(e,3),Yr)},hr.findLast=Wo,hr.findLastIndex=go,hr.findLastKey=function(t,e){return on(t,Pa(e,3),Vr)},hr.floor=Yu,hr.forEach=Ho,hr.forEachRight=Go,hr.forIn=function(t,e){return null==t?t:Hr(t,Pa(e,3),iu)},hr.forInRight=function(t,e){return null==t?t:Gr(t,Pa(e,3),iu)},hr.forOwn=function(t,e){return t&&Yr(t,Pa(e,3))},hr.forOwnRight=function(t,e){return t&&Vr(t,Pa(e,3))},hr.get=Zs,hr.gt=ds,hr.gte=ps,hr.has=function(t,e){return null!=t&&za(t,e,Qr)},hr.hasIn=Qs,hr.head=yo,hr.identity=Cu,hr.includes=function(t,e,n,r){t=ys(t)?t:hu(t),n=n&&!r?Us(n):0;var i=t.length;return n<0&&(n=Hn(i+n,0)),Ms(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&un(t,e,n)>-1},hr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Us(n);return i<0&&(i=Hn(r+i,0)),un(t,e,i)},hr.inRange=function(t,e,n){return e=Bs(e),n===a?(n=e,e=0):n=Bs(n),function(t,e,n){return t>=Gn(e,n)&&t<Hn(e,n)}(t=qs(t),e,n)},hr.invoke=nu,hr.isArguments=vs,hr.isArray=gs,hr.isArrayBuffer=ms,hr.isArrayLike=ys,hr.isArrayLikeObject=bs,hr.isBoolean=function(t){return!0===t||!1===t||As(t)&&Jr(t)==H},hr.isBuffer=_s,hr.isDate=ws,hr.isElement=function(t){return As(t)&&1===t.nodeType&&!js(t)},hr.isEmpty=function(t){if(null==t)return!0;if(ys(t)&&(gs(t)||"string"==typeof t||"function"==typeof t.splice||_s(t)||Fs(t)||vs(t)))return!t.length;var e=Ua(t);if(e==K||e==nt)return!t.size;if(Xa(t))return!ui(t).length;for(var n in t)if(ce.call(t,n))return!1;return!0},hr.isEqual=function(t,e){return ii(t,e)},hr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:a)?n(t,e):a;return r===a?ii(t,e,a,n):!!r},hr.isError=xs,hr.isFinite=function(t){return"number"==typeof t&&zn(t)},hr.isFunction=ks,hr.isInteger=Es,hr.isLength=Ss,hr.isMap=Ts,hr.isMatch=function(t,e){return t===e||ai(t,e,Na(e))},hr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:a,ai(t,e,Na(e),n)},hr.isNaN=function(t){return Cs(t)&&t!=+t},hr.isNative=function(t){if($a(t))throw new i(s);return oi(t)},hr.isNil=function(t){return null==t},hr.isNull=function(t){return null===t},hr.isNumber=Cs,hr.isObject=Os,hr.isObjectLike=As,hr.isPlainObject=js,hr.isRegExp=Ds,hr.isSafeInteger=function(t){return Es(t)&&t>=-P&&t<=P},hr.isSet=Rs,hr.isString=Ms,hr.isSymbol=Ps,hr.isTypedArray=Fs,hr.isUndefined=function(t){return t===a},hr.isWeakMap=function(t){return As(t)&&Ua(t)==ot},hr.isWeakSet=function(t){return As(t)&&Jr(t)==st},hr.join=function(t,e){return null==t?"":qn.call(t,e)},hr.kebabCase=gu,hr.last=xo,hr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=Us(n))<0?Hn(r+i,0):Gn(i,r-1)),e===e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):sn(t,ln,i,!0)},hr.lowerCase=mu,hr.lowerFirst=yu,hr.lt=Ns,hr.lte=Ls,hr.max=function(t){return t&&t.length?zr(t,Cu,Zr):a},hr.maxBy=function(t,e){return t&&t.length?zr(t,Pa(e,2),Zr):a},hr.mean=function(t){return fn(t,Cu)},hr.meanBy=function(t,e){return fn(t,Pa(e,2))},hr.min=function(t){return t&&t.length?zr(t,Cu,li):a},hr.minBy=function(t,e){return t&&t.length?zr(t,Pa(e,2),li):a},hr.stubArray=zu,hr.stubFalse=qu,hr.stubObject=function(){return{}},hr.stubString=function(){return""},hr.stubTrue=function(){return!0},hr.multiply=Vu,hr.nth=function(t,e){return t&&t.length?vi(t,Us(e)):a},hr.noConflict=function(){return Me._===this&&(Me._=pe),this},hr.noop=Pu,hr.now=Zo,hr.pad=function(t,e,n){t=Hs(t);var r=(e=Us(e))?Dn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ga(In(i),n)+t+ga(Ln(i),n)},hr.padEnd=function(t,e,n){t=Hs(t);var r=(e=Us(e))?Dn(t):0;return e&&r<e?t+ga(e-r,n):t},hr.padStart=function(t,e,n){t=Hs(t);var r=(e=Us(e))?Dn(t):0;return e&&r<e?ga(e-r,n)+t:t},hr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Vn(Hs(t).replace(Ft,""),e||0)},hr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ga(t,e,n)&&(e=n=a),n===a&&("boolean"==typeof e?(n=e,e=a):"boolean"==typeof t&&(n=t,t=a)),t===a&&e===a?(t=0,e=1):(t=Bs(t),e===a?(e=t,t=0):e=Bs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=$n();return Gn(t+i*(e-t+Ce("1e-"+((i+"").length-1))),e)}return _i(t,e)},hr.reduce=function(t,e,n){var r=gs(t)?en:pn,i=arguments.length<3;return r(t,Pa(e,4),n,i,Ir)},hr.reduceRight=function(t,e,n){var r=gs(t)?nn:pn,i=arguments.length<3;return r(t,Pa(e,4),n,i,Br)},hr.repeat=function(t,e,n){return e=(n?Ga(t,e,n):e===a)?1:Us(e),wi(Hs(t),e)},hr.replace=function(){var t=arguments,e=Hs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},hr.result=function(t,e,n){var r=-1,i=(e=Gi(e,t)).length;for(i||(i=1,t=a);++r<i;){var o=null==t?a:t[uo(e[r])];o===a&&(r=i,o=n),t=ks(o)?o.call(t):o}return t},hr.round=$u,hr.runInContext=t,hr.sample=function(t){return(gs(t)?kr:ki)(t)},hr.size=function(t){if(null==t)return 0;if(ys(t))return Ms(t)?Dn(t):t.length;var e=Ua(t);return e==K||e==nt?t.size:ui(t).length},hr.snakeCase=bu,hr.some=function(t,e,n){var r=gs(t)?rn:ji;return n&&Ga(t,e,n)&&(e=a),r(t,Pa(e,3))},hr.sortedIndex=function(t,e){return Di(t,e)},hr.sortedIndexBy=function(t,e,n){return Ri(t,e,Pa(n,2))},hr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Di(t,e);if(r<n&&hs(t[r],e))return r}return-1},hr.sortedLastIndex=function(t,e){return Di(t,e,!0)},hr.sortedLastIndexBy=function(t,e,n){return Ri(t,e,Pa(n,2),!0)},hr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Di(t,e,!0)-1;if(hs(t[n],e))return n}return-1},hr.startCase=_u,hr.startsWith=function(t,e,n){return t=Hs(t),n=null==n?0:Mr(Us(n),0,t.length),e=Fi(e),t.slice(n,n+e.length)==e},hr.subtract=Xu,hr.sum=function(t){return t&&t.length?vn(t,Cu):0},hr.sumBy=function(t,e){return t&&t.length?vn(t,Pa(e,2)):0},hr.template=function(t,e,n){var r=hr.templateSettings;n&&Ga(t,e,n)&&(e=a),t=Hs(t),e=Vs({},e,r,Ea);var i,o,s=Vs({},e.imports,r.imports,Ea),u=ru(s),c=yn(s,u),l=0,f=e.interpolate||Kt,h="__p += '",d=ee((e.escape||Kt).source+"|"+f.source+"|"+(f===Tt?qt:Kt).source+"|"+(e.evaluate||Kt).source+"|$","g"),p="//# sourceURL="+(ce.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Se+"]")+"\n";t.replace(d,(function(e,n,r,a,s,u){return r||(r=a),h+=t.slice(l,u).replace(Jt,En),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var v=ce.call(e,"variable")&&e.variable;v||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(bt,""):h).replace(_t,"$1").replace(wt,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Eu((function(){return Zt(u,p+"return "+h).apply(a,c)}));if(g.source=h,xs(g))throw g;return g},hr.times=function(t,e){if((t=Us(t))<1||t>P)return[];var n=L,r=Gn(t,L);e=Pa(e),t-=L;for(var i=gn(r,e);++n<t;)e(n);return i},hr.toFinite=Bs,hr.toInteger=Us,hr.toLength=zs,hr.toLower=function(t){return Hs(t).toLowerCase()},hr.toNumber=qs,hr.toSafeInteger=function(t){return t?Mr(Us(t),-P,P):0===t?t:0},hr.toString=Hs,hr.toUpper=function(t){return Hs(t).toUpperCase()},hr.trim=function(t,e,n){if((t=Hs(t))&&(n||e===a))return t.replace(Pt,"");if(!t||!(e=Fi(e)))return t;var r=Rn(t),i=Rn(e);return Vi(r,_n(r,i),wn(r,i)+1).join("")},hr.trimEnd=function(t,e,n){if((t=Hs(t))&&(n||e===a))return t.replace(Nt,"");if(!t||!(e=Fi(e)))return t;var r=Rn(t);return Vi(r,0,wn(r,Rn(e))+1).join("")},hr.trimStart=function(t,e,n){if((t=Hs(t))&&(n||e===a))return t.replace(Ft,"");if(!t||!(e=Fi(e)))return t;var r=Rn(t);return Vi(r,_n(r,Rn(e))).join("")},hr.truncate=function(t,e){var n=A,r=T;if(Os(e)){var i="separator"in e?e.separator:i;n="length"in e?Us(e.length):n,r="omission"in e?Fi(e.omission):r}var o=(t=Hs(t)).length;if(Sn(t)){var s=Rn(t);o=s.length}if(n>=o)return t;var u=n-Dn(r);if(u<1)return r;var c=s?Vi(s,0,u).join(""):t.slice(0,u);if(i===a)return c+r;if(s&&(u+=c.length-u),Ds(i)){if(t.slice(u).search(i)){var l,f=c;for(i.global||(i=ee(i.source,Hs(Wt.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===a?u:h)}}else if(t.indexOf(Fi(i),u)!=u){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+r},hr.unescape=function(t){return(t=Hs(t))&&Et.test(t)?t.replace(xt,Mn):t},hr.uniqueId=function(t){var e=++le;return Hs(t)+e},hr.upperCase=wu,hr.upperFirst=xu,hr.each=Ho,hr.eachRight=Go,hr.first=yo,Mu(hr,function(){var t={};return Yr(hr,(function(e,n){ce.call(hr.prototype,n)||(t[n]=e)})),t}(),{chain:!1}),hr.VERSION="4.17.15",Ve(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){hr[t].placeholder=hr})),Ve(["drop","take"],(function(t,e){gr.prototype[t]=function(n){n=n===a?1:Hn(Us(n),0);var r=this.__filtered__&&!e?new gr(this):this.clone();return r.__filtered__?r.__takeCount__=Gn(n,r.__takeCount__):r.__views__.push({size:Gn(n,L),type:t+(r.__dir__<0?"Right":"")}),r},gr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ve(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=n==D||3==n;gr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Pa(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ve(["head","last"],(function(t,e){var n="take"+(e?"Right":"");gr.prototype[t]=function(){return this[n](1).value()[0]}})),Ve(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");gr.prototype[t]=function(){return this.__filtered__?new gr(this):this[n](1)}})),gr.prototype.compact=function(){return this.filter(Cu)},gr.prototype.find=function(t){return this.filter(t).head()},gr.prototype.findLast=function(t){return this.reverse().find(t)},gr.prototype.invokeMap=xi((function(t,e){return"function"==typeof t?new gr(this):this.map((function(n){return ni(n,t,e)}))})),gr.prototype.reject=function(t){return this.filter(ss(Pa(t)))},gr.prototype.slice=function(t,e){t=Us(t);var n=this;return n.__filtered__&&(t>0||e<0)?new gr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==a&&(n=(e=Us(e))<0?n.dropRight(-e):n.take(e-t)),n)},gr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},gr.prototype.toArray=function(){return this.take(L)},Yr(gr.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=hr[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(hr.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof gr,c=s[0],l=u||gs(e),f=function(t){var e=i.apply(hr,tn([t],s));return r&&h?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=u&&!d;if(!o&&l){e=v?e:new gr(this);var g=t.apply(e,s);return g.__actions__.push({func:Bo,args:[f],thisArg:a}),new vr(g,h)}return p&&v?t.apply(this,s):(g=this.thru(f),p?r?g.value()[0]:g.value():g)})})),Ve(["pop","push","shift","sort","splice","unshift"],(function(t){var e=ie[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);hr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(gs(i)?i:[],t)}return this[n]((function(n){return e.apply(gs(n)?n:[],t)}))}})),Yr(gr.prototype,(function(t,e){var n=hr[e];if(n){var r=n.name+"";ce.call(rr,r)||(rr[r]=[]),rr[r].push({name:e,func:n})}})),rr[ha(a,y).name]=[{name:"wrapper",func:a}],gr.prototype.clone=function(){var t=new gr(this.__wrapped__);return t.__actions__=ea(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ea(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ea(this.__views__),t},gr.prototype.reverse=function(){if(this.__filtered__){var t=new gr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},gr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=gs(t),r=e<0,i=n?t.length:0,a=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Gn(e,t+o);break;case"takeRight":t=Hn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,f=l.length,h=0,d=Gn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return Ui(t,this.__actions__);var p=[];t:for(;u--&&h<d;){for(var v=-1,g=t[c+=e];++v<f;){var m=l[v],y=m.iteratee,b=m.type,_=y(g);if(b==R)g=_;else if(!_){if(b==D)continue t;break t}}p[h++]=g}return p},hr.prototype.at=Uo,hr.prototype.chain=function(){return Io(this)},hr.prototype.commit=function(){return new vr(this.value(),this.__chain__)},hr.prototype.next=function(){this.__values__===a&&(this.__values__=Is(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?a:this.__values__[this.__index__++]}},hr.prototype.plant=function(t){for(var e,n=this;n instanceof pr;){var r=lo(n);r.__index__=0,r.__values__=a,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},hr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof gr){var e=t;return this.__actions__.length&&(e=new gr(this)),(e=e.reverse()).__actions__.push({func:Bo,args:[Oo],thisArg:a}),new vr(e,this.__chain__)}return this.thru(Oo)},hr.prototype.toJSON=hr.prototype.valueOf=hr.prototype.value=function(){return Ui(this.__wrapped__,this.__actions__)},hr.prototype.first=hr.prototype.head,Le&&(hr.prototype[Le]=function(){return this}),hr}();Me._=Pn,(i=function(){return Pn}.call(e,n,e,r))===a||(r.exports=i)}).call(this)}).call(this,n(19),n(111)(t))},,,function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29);var o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.__id=t,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"read",value:function(t){return this._request("GET","/gists/"+this.__id,null,t)}},{key:"create",value:function(t,e){var n=this;return this._request("POST","/gists",t,e).then((function(t){return n.__id=t.data.id,t}))}},{key:"delete",value:function(t){return this._request("DELETE","/gists/"+this.__id,null,t)}},{key:"fork",value:function(t){return this._request("POST","/gists/"+this.__id+"/forks",null,t)}},{key:"update",value:function(t,e){return this._request("PATCH","/gists/"+this.__id,t,e)}},{key:"star",value:function(t){return this._request("PUT","/gists/"+this.__id+"/star",null,t)}},{key:"unstar",value:function(t){return this._request("DELETE","/gists/"+this.__id+"/star",null,t)}},{key:"isStarred",value:function(t){return this._request204or404("/gists/"+this.__id+"/star",null,t)}},{key:"listCommits",value:function(t){return this._requestAllPages("/gists/"+this.__id+"/commits",null,t)}},{key:"getRevision",value:function(t,e){return this._request("GET","/gists/"+this.__id+"/"+t,null,e)}},{key:"listComments",value:function(t){return this._requestAllPages("/gists/"+this.__id+"/comments",null,t)}},{key:"getComment",value:function(t,e){return this._request("GET","/gists/"+this.__id+"/comments/"+t,null,e)}},{key:"createComment",value:function(t,e){return this._request("POST","/gists/"+this.__id+"/comments",{body:t},e)}},{key:"editComment",value:function(t,e,n){return this._request("PATCH","/gists/"+this.__id+"/comments/"+t,{body:e},n)}},{key:"deleteComment",value:function(t,e){return this._request("DELETE","/gists/"+this.__id+"/comments/"+t,null,e)}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);t.exports=o},function(t,e,n){t.exports=n(471)},function(t,e,n){"use strict";var r=n(24),i=n(187),a=n(473),o=n(193);function s(t){var e=new a(t),n=i(a.prototype.request,e);return r.extend(n,a.prototype,e),r.extend(n,e),n}var u=s(n(190));u.Axios=a,u.create=function(t){return s(o(u.defaults,t))},u.Cancel=n(194),u.CancelToken=n(485),u.isCancel=n(189),u.all=function(t){return Promise.all(t)},u.spread=n(486),t.exports=u,t.exports.default=u},function(t,e){t.exports=function(t){return null!=t&&null!=t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var r=n(24),i=n(188),a=n(474),o=n(475),s=n(193);function u(t){this.defaults=t,this.interceptors={request:new a,response:new a}}u.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[o,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}})),t.exports=u},function(t,e,n){"use strict";var r=n(24);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var r=n(24),i=n(476),a=n(189),o=n(190),s=n(483),u=n(484);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return c(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return a(e)||(c(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(24);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},function(t,e,n){"use strict";var r=n(24);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";var r=n(192);t.exports=function(t,e,n){var i=n.config.validateStatus;!i||i(n.status)?t(n):e(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var r=n(24),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,a,o={};return t?(r.forEach(t.split("\n"),(function(t){if(a=t.indexOf(":"),e=r.trim(t.substr(0,a)).toLowerCase(),n=r.trim(t.substr(a+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},function(t,e,n){"use strict";var r=n(24);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(24);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,a,o){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(194);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var r;function i(t){function n(){if(n.enabled){var t=n,i=+new Date,a=i-(r||i);t.diff=a,t.prev=r,t.curr=i,r=i;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=e.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"===typeof i){var a=o[u];n=i.call(t,a),o.splice(u,1),u--}return n})),e.formatArgs.call(t,o),(n.log||e.log||console.log.bind(console)).apply(t,o)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),"function"===typeof e.init&&e.init(n),n}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"===typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(195),e.names=[],e.skips=[],e.formatters={}},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(29));function a(t){return t&&t.__esModule?t:{default:t}}var o=(0,a(n(55)).default)("github:user"),s=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.__user=t,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"__getScopedUrl",value:function(t){if(this.__user)return t?"/users/"+this.__user+"/"+t:"/users/"+this.__user;switch(t){case"":return"/user";case"notifications":case"gists":return"/"+t;default:return"/user/"+t}}},{key:"listRepos",value:function(t,e){return"function"===typeof t&&(e=t,t={}),t=this._getOptionsWithDefaults(t),o("Fetching repositories with options: "+JSON.stringify(t)),this._requestAllPages(this.__getScopedUrl("repos"),t,e)}},{key:"listOrgs",value:function(t){return this._request("GET",this.__getScopedUrl("orgs"),null,t)}},{key:"listFollowers",value:function(t){return this._request("GET",this.__getScopedUrl("followers"),null,t)}},{key:"listFollowing",value:function(t){return this._request("GET",this.__getScopedUrl("following"),null,t)}},{key:"listGists",value:function(t){return this._request("GET",this.__getScopedUrl("gists"),null,t)}},{key:"listNotifications",value:function(t,e){return"function"===typeof(t=t||{})&&(e=t,t={}),t.since=this._dateToISO(t.since),t.before=this._dateToISO(t.before),this._request("GET",this.__getScopedUrl("notifications"),t,e)}},{key:"getProfile",value:function(t){return this._request("GET",this.__getScopedUrl(""),null,t)}},{key:"listStarredRepos",value:function(t){var e=this._getOptionsWithDefaults();return this._requestAllPages(this.__getScopedUrl("starred"),e,t)}},{key:"listStarredGists",value:function(t,e){return"function"===typeof(t=t||{})&&(e=t,t={}),t.since=this._dateToISO(t.since),this._request("GET","/gists/starred",t,e)}},{key:"getEmails",value:function(t){return this._request("GET","/user/emails",null,t)}},{key:"follow",value:function(t,e){return this._request("PUT","/user/following/"+t,null,e)}},{key:"unfollow",value:function(t,e){return this._request("DELETE","/user/following/"+t,null,e)}},{key:"createRepo",value:function(t,e){return this._request("POST","/user/repos",t,e)}}]),e}(i.default);t.exports=s},function(t,e,n){"use strict";var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29);var o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.__repository=t,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"createIssue",value:function(t,e){return this._request("POST","/repos/"+this.__repository+"/issues",t,e)}},{key:"listIssues",value:function(t,e){return this._requestAllPages("/repos/"+this.__repository+"/issues",t,e)}},{key:"listIssueEvents",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/issues/"+t+"/events",null,e)}},{key:"listIssueComments",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/issues/"+t+"/comments",null,e)}},{key:"getIssueComment",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/issues/comments/"+t,null,e)}},{key:"createIssueComment",value:function(t,e,n){return this._request("POST","/repos/"+this.__repository+"/issues/"+t+"/comments",{body:e},n)}},{key:"editIssueComment",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__repository+"/issues/comments/"+t,{body:e},n)}},{key:"deleteIssueComment",value:function(t,e){return this._request("DELETE","/repos/"+this.__repository+"/issues/comments/"+t,null,e)}},{key:"editIssue",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__repository+"/issues/"+t,e,n)}},{key:"getIssue",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/issues/"+t,null,e)}},{key:"listMilestones",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/milestones",t,e)}},{key:"getMilestone",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/milestones/"+t,null,e)}},{key:"createMilestone",value:function(t,e){return this._request("POST","/repos/"+this.__repository+"/milestones",t,e)}},{key:"editMilestone",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__repository+"/milestones/"+t,e,n)}},{key:"deleteMilestone",value:function(t,e){return this._request("DELETE","/repos/"+this.__repository+"/milestones/"+t,null,e)}},{key:"createLabel",value:function(t,e){return this._request("POST","/repos/"+this.__repository+"/labels",t,e)}},{key:"listLabels",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/labels",t,e)}},{key:"getLabel",value:function(t,e){return this._request("GET","/repos/"+this.__repository+"/labels/"+t,null,e)}},{key:"editLabel",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__repository+"/labels/"+t,e,n)}},{key:"deleteLabel",value:function(t,e){return this._request("DELETE","/repos/"+this.__repository+"/labels/"+t,null,e)}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);t.exports=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(29));function a(t){return t&&t.__esModule?t:{default:t}}var o=(0,a(n(55)).default)("github:search"),s=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.__defaults=i._getOptionsWithDefaults(t),i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"_search",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i={};return Object.keys(this.__defaults).forEach((function(t){i[t]=e.__defaults[t]})),Object.keys(n).forEach((function(t){i[t]=n[t]})),o("searching "+t+" with options:",i),this._requestAllPages("/search/"+t,i,r)}},{key:"forRepositories",value:function(t,e){return this._search("repositories",t,e)}},{key:"forCode",value:function(t,e){return this._search("code",t,e)}},{key:"forIssues",value:function(t,e){return this._search("issues",t,e)}},{key:"forUsers",value:function(t,e){return this._search("users",t,e)}}]),e}(i.default);t.exports=s},function(t,e,n){"use strict";var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29);var o=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"getRateLimit",value:function(t){return this._request("GET","/rate_limit",null,t)}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);t.exports=o},function(t,e,n){"use strict";(function(e){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=u(n(29)),o=u(n(493)),s=n(196);function u(t){return t&&t.__esModule?t:{default:t}}var c=(0,u(n(55)).default)("github:repository"),l=function(t){function n(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,r));return i.__fullname=t,i.__currentTree={branch:null,sha:null},i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),i(n,[{key:"getRef",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/git/refs/"+t,null,e)}},{key:"createRef",value:function(t,e){return this._request("POST","/repos/"+this.__fullname+"/git/refs",t,e)}},{key:"deleteRef",value:function(t,e){return this._request("DELETE","/repos/"+this.__fullname+"/git/refs/"+t,null,e)}},{key:"deleteRepo",value:function(t){return this._request("DELETE","/repos/"+this.__fullname,null,t)}},{key:"listTags",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/tags",null,t)}},{key:"listPullRequests",value:function(t,e){return t=t||{},this._request("GET","/repos/"+this.__fullname+"/pulls",t,e)}},{key:"getPullRequest",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+t,null,e)}},{key:"listPullRequestFiles",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+t+"/files",null,e)}},{key:"compareBranches",value:function(t,e,n){return this._request("GET","/repos/"+this.__fullname+"/compare/"+t+"..."+e,null,n)}},{key:"listBranches",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/branches",null,t)}},{key:"getBlob",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/git/blobs/"+t,null,e,"raw")}},{key:"getBranch",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/branches/"+t,null,e)}},{key:"getCommit",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/git/commits/"+t,null,e)}},{key:"listCommits",value:function(t,e){return"function"===typeof(t=t||{})&&(e=t,t={}),t.since=this._dateToISO(t.since),t.until=this._dateToISO(t.until),this._request("GET","/repos/"+this.__fullname+"/commits",t,e)}},{key:"getSingleCommit",value:function(t,e){return t=t||"",this._request("GET","/repos/"+this.__fullname+"/commits/"+t,null,e)}},{key:"getSha",value:function(t,e,n){return t=t?"?ref="+t:"",this._request("GET","/repos/"+this.__fullname+"/contents/"+e+t,null,n)}},{key:"listStatuses",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/commits/"+t+"/statuses",null,e)}},{key:"getCombinedStatus",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/commits/"+t+"/status",null,e)}},{key:"getTree",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/git/trees/"+t,null,e)}},{key:"createBlob",value:function(t,e){var n=this._getContentObject(t);return c("sending content",n),this._request("POST","/repos/"+this.__fullname+"/git/blobs",n,e)}},{key:"_getContentObject",value:function(t){if("string"===typeof t)return c("contet is a string"),{content:o.default.encode(t),encoding:"utf-8"};if("undefined"!==typeof e&&t instanceof e)return c("We appear to be in Node"),{content:t.toString("base64"),encoding:"base64"};if("undefined"!==typeof Blob&&t instanceof Blob)return c("We appear to be in the browser"),{content:s.Base64.encode(t),encoding:"base64"};throw c("Not sure what this content is: "+("undefined"===typeof t?"undefined":r(t))+", "+JSON.stringify(t)),new Error("Unknown content passed to postBlob. Must be string or Buffer (node) or Blob (web)")}},{key:"updateTree",value:function(t,e,n,r){var i={base_tree:t,tree:[{path:e,sha:n,mode:"100644",type:"blob"}]};return this._request("POST","/repos/"+this.__fullname+"/git/trees",i,r)}},{key:"createTree",value:function(t,e,n){return this._request("POST","/repos/"+this.__fullname+"/git/trees",{tree:t,base_tree:e},n)}},{key:"commit",value:function(t,e,n,r,i){var a=this;"function"===typeof r&&(i=r,r={});var o={message:n,tree:e,parents:[t]};return o=Object.assign({},r,o),this._request("POST","/repos/"+this.__fullname+"/git/commits",o,i).then((function(t){return a.__currentTree.sha=t.data.sha,t}))}},{key:"updateHead",value:function(t,e,n,r){return this._request("PATCH","/repos/"+this.__fullname+"/git/refs/"+t,{sha:e,force:n},r)}},{key:"updateStatus",value:function(t,e,n){return this._request("POST","/repos/"+this.__fullname+"/statuses/"+t,e,n)}},{key:"updateRepository",value:function(t,e){return this._request("PATCH","/repos/"+this.__fullname,t,e)}},{key:"getDetails",value:function(t){return this._request("GET","/repos/"+this.__fullname,null,t)}},{key:"getContributors",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/contributors",null,t)}},{key:"getContributorStats",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/stats/contributors",null,t)}},{key:"getCollaborators",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/collaborators",null,t)}},{key:"isCollaborator",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/collaborators/"+t,null,e)}},{key:"getContents",value:function(t,e,n,r){return e=e?""+encodeURI(e):"",this._request("GET","/repos/"+this.__fullname+"/contents/"+e,{ref:t},r,n)}},{key:"getReadme",value:function(t,e,n){return this._request("GET","/repos/"+this.__fullname+"/readme",{ref:t},n,e)}},{key:"fork",value:function(t){return this._request("POST","/repos/"+this.__fullname+"/forks",null,t)}},{key:"forkToOrg",value:function(t,e){return this._request("POST","/repos/"+this.__fullname+"/forks?organization="+t,null,e)}},{key:"listForks",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/forks",null,t)}},{key:"createBranch",value:function(t,e,n){var r=this;return"function"===typeof e&&(n=e,e=t,t="master"),this.getRef("heads/"+t).then((function(t){var i=t.data.object.sha;return r.createRef({sha:i,ref:"refs/heads/"+e},n)}))}},{key:"createPullRequest",value:function(t,e){return this._request("POST","/repos/"+this.__fullname+"/pulls",t,e)}},{key:"updatePullRequest",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__fullname+"/pulls/"+t,e,n)}},{key:"listHooks",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/hooks",null,t)}},{key:"getHook",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/hooks/"+t,null,e)}},{key:"createHook",value:function(t,e){return this._request("POST","/repos/"+this.__fullname+"/hooks",t,e)}},{key:"updateHook",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__fullname+"/hooks/"+t,e,n)}},{key:"deleteHook",value:function(t,e){return this._request("DELETE","/repos/"+this.__fullname+"/hooks/"+t,null,e)}},{key:"listKeys",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/keys",null,t)}},{key:"getKey",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/keys/"+t,null,e)}},{key:"createKey",value:function(t,e){return this._request("POST","/repos/"+this.__fullname+"/keys",t,e)}},{key:"deleteKey",value:function(t,e){return this._request("DELETE","/repos/"+this.__fullname+"/keys/"+t,null,e)}},{key:"deleteFile",value:function(t,e,n){var r=this;return this.getSha(t,e).then((function(i){var a={message:"Delete the file at '"+e+"'",sha:i.data.sha,branch:t};return r._request("DELETE","/repos/"+r.__fullname+"/contents/"+e,a,n)}))}},{key:"move",value:function(t,e,n,r){var i=this,a=void 0;return this.getRef("heads/"+t).then((function(t){var e=t.data.object;return i.getTree(e.sha+"?recursive=true")})).then((function(t){var r=t.data,o=r.tree,s=r.sha;a=s;var u=o.map((function(t){return t.path===e&&(t.path=n),"tree"===t.type&&delete t.sha,t}));return i.createTree(u)})).then((function(t){var r=t.data;return i.commit(a,r.sha,"Renamed '"+e+"' to '"+n+"'")})).then((function(e){var n=e.data;return i.updateHead("heads/"+t,n.sha,!0,r)}))}},{key:"writeFile",value:function(t,e,n,r,i,a){var o=this;"function"===typeof i&&(a=i,i={});var u=e?encodeURI(e):"",c=!1!==i.encode,l={branch:t,message:r,author:i.author,committer:i.committer,content:c?s.Base64.encode(n):n};return this.getSha(t,u).then((function(t){return l.sha=t.data.sha,o._request("PUT","/repos/"+o.__fullname+"/contents/"+u,l,a)}),(function(){return o._request("PUT","/repos/"+o.__fullname+"/contents/"+u,l,a)}))}},{key:"isStarred",value:function(t){return this._request204or404("/user/starred/"+this.__fullname,null,t)}},{key:"star",value:function(t){return this._request("PUT","/user/starred/"+this.__fullname,null,t)}},{key:"unstar",value:function(t){return this._request("DELETE","/user/starred/"+this.__fullname,null,t)}},{key:"createRelease",value:function(t,e){return this._request("POST","/repos/"+this.__fullname+"/releases",t,e)}},{key:"updateRelease",value:function(t,e,n){return this._request("PATCH","/repos/"+this.__fullname+"/releases/"+t,e,n)}},{key:"listReleases",value:function(t){return this._request("GET","/repos/"+this.__fullname+"/releases",null,t)}},{key:"getRelease",value:function(t,e){return this._request("GET","/repos/"+this.__fullname+"/releases/"+t,null,e)}},{key:"deleteRelease",value:function(t,e){return this._request("DELETE","/repos/"+this.__fullname+"/releases/"+t,null,e)}},{key:"mergePullRequest",value:function(t,e,n){return this._request("PUT","/repos/"+this.__fullname+"/pulls/"+t+"/merge",e,n)}},{key:"listProjects",value:function(t){return this._requestAllPages("/repos/"+this.__fullname+"/projects",{AcceptHeader:"inertia-preview"},t)}},{key:"createProject",value:function(t,e){return(t=t||{}).AcceptHeader="inertia-preview",this._request("POST","/repos/"+this.__fullname+"/projects",t,e)}}]),n}(a.default);t.exports=l}).call(this,n(20).Buffer)},function(t,e,n){(function(t,r){var i;!function(a){var o=e,s=(t&&t.exports,"object"==typeof r&&r);s.global!==s&&s.window;var u,c,l,f=String.fromCharCode;function h(t){for(var e,n,r=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function d(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function p(t,e){return f(t>>e&63|128)}function v(t){if(0==(4294967168&t))return f(t);var e="";return 0==(4294965248&t)?e=f(t>>6&31|192):0==(4294901760&t)?(d(t),e=f(t>>12&15|224),e+=p(t,6)):0==(4292870144&t)&&(e=f(t>>18&7|240),e+=p(t,12),e+=p(t,6)),e+=f(63&t|128)}function g(){if(l>=c)throw Error("Invalid byte index");var t=255&u[l];if(l++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function m(){var t,e;if(l>c)throw Error("Invalid byte index");if(l==c)return!1;if(t=255&u[l],l++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|g())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|g()<<6|g())>=2048)return d(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|g()<<12|g()<<6|g())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}var y={version:"2.1.2",encode:function(t){for(var e=h(t),n=e.length,r=-1,i="";++r<n;)i+=v(e[r]);return i},decode:function(t){u=h(t),c=u.length,l=0;for(var e,n=[];!1!==(e=m());)n.push(e);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=f(e);return i}(n)}};void 0===(i=function(){return y}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(111)(t),n(19))},function(t,e,n){"use strict";var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29);var o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.__name=t,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"createRepo",value:function(t,e){return this._request("POST","/orgs/"+this.__name+"/repos",t,e)}},{key:"getRepos",value:function(t){var e=this._getOptionsWithDefaults({direction:"desc"});return this._requestAllPages("/orgs/"+this.__name+"/repos",e,t)}},{key:"isMember",value:function(t,e){return this._request204or404("/orgs/"+this.__name+"/members/"+t,null,e)}},{key:"listMembers",value:function(t,e){return this._request("GET","/orgs/"+this.__name+"/members",t,e)}},{key:"getTeams",value:function(t){return this._requestAllPages("/orgs/"+this.__name+"/teams",void 0,t)}},{key:"createTeam",value:function(t,e){return this._request("POST","/orgs/"+this.__name+"/teams",t,e)}},{key:"listProjects",value:function(t){return this._requestAllPages("/orgs/"+this.__name+"/projects",{AcceptHeader:"inertia-preview"},t)}},{key:"createProject",value:function(t,e){return(t=t||{}).AcceptHeader="inertia-preview",this._request("POST","/orgs/"+this.__name+"/projects",t,e)}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);t.exports=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=a(n(29));function a(t){return t&&t.__esModule?t:{default:t}}var o=(0,a(n(55)).default)("github:team"),s=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));return i.__teamId=t,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"getTeam",value:function(t){return o("Fetching Team "+this.__teamId),this._request("Get","/teams/"+this.__teamId,void 0,t)}},{key:"listRepos",value:function(t){return o("Fetching repositories for Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/repos",void 0,t)}},{key:"editTeam",value:function(t,e){return o("Editing Team "+this.__teamId),this._request("PATCH","/teams/"+this.__teamId,t,e)}},{key:"listMembers",value:function(t,e){return o("Getting members of Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/members",t,e)}},{key:"getMembership",value:function(t,e){return o("Getting membership of user "+t+" in Team "+this.__teamId),this._request("GET","/teams/"+this.__teamId+"/memberships/"+t,void 0,e)}},{key:"addMembership",value:function(t,e,n){return o("Adding user "+t+" to Team "+this.__teamId),this._request("PUT","/teams/"+this.__teamId+"/memberships/"+t,e,n)}},{key:"isManagedRepo",value:function(t,e,n){return o("Getting repo management by Team "+this.__teamId+" for repo "+t+"/"+e),this._request204or404("/teams/"+this.__teamId+"/repos/"+t+"/"+e,void 0,n)}},{key:"manageRepo",value:function(t,e,n,r){return o("Adding or Updating repo management by Team "+this.__teamId+" for repo "+t+"/"+e),this._request204or404("/teams/"+this.__teamId+"/repos/"+t+"/"+e,n,r,"PUT")}},{key:"unmanageRepo",value:function(t,e,n){return o("Remove repo management by Team "+this.__teamId+" for repo "+t+"/"+e),this._request204or404("/teams/"+this.__teamId+"/repos/"+t+"/"+e,void 0,n,"DELETE")}},{key:"deleteTeam",value:function(t){return o("Deleting Team "+this.__teamId),this._request204or404("/teams/"+this.__teamId,void 0,t,"DELETE")}}]),e}(i.default);t.exports=s},function(t,e,n){"use strict";var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29);var o=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"render",value:function(t,e){return this._request("POST","/markdown",t,e,!0)}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);t.exports=o},function(t,e,n){"use strict";var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(29);var o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,"inertia-preview"));return i.__id=t,i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"getProject",value:function(t){return this._request("GET","/projects/"+this.__id,null,t)}},{key:"updateProject",value:function(t,e){return this._request("PATCH","/projects/"+this.__id,t,e)}},{key:"deleteProject",value:function(t){return this._request("DELETE","/projects/"+this.__id,null,t)}},{key:"listProjectColumns",value:function(t){return this._requestAllPages("/projects/"+this.__id+"/columns",null,t)}},{key:"getProjectColumn",value:function(t,e){return this._request("GET","/projects/columns/"+t,null,e)}},{key:"createProjectColumn",value:function(t,e){return this._request("POST","/projects/"+this.__id+"/columns",t,e)}},{key:"updateProjectColumn",value:function(t,e,n){return this._request("PATCH","/projects/columns/"+t,e,n)}},{key:"deleteProjectColumn",value:function(t,e){return this._request("DELETE","/projects/columns/"+t,null,e)}},{key:"moveProjectColumn",value:function(t,e,n){return this._request("POST","/projects/columns/"+t+"/moves",{position:e},n)}},{key:"listProjectCards",value:function(t){var e=this;return this.listProjectColumns().then((function(t){var n=t.data;return Promise.all(n.map((function(t){return e._requestAllPages("/projects/columns/"+t.id+"/cards",null)})))})).then((function(e){var n=e.reduce((function(t,e){var n=e.data;return t.push.apply(t,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n)),t}),[]);return t&&t(null,n),n})).catch((function(e){if(!t)throw e;t(e)}))}},{key:"listColumnCards",value:function(t,e){return this._requestAllPages("/projects/columns/"+t+"/cards",null,e)}},{key:"getProjectCard",value:function(t,e){return this._request("GET","/projects/columns/cards/"+t,null,e)}},{key:"createProjectCard",value:function(t,e,n){return this._request("POST","/projects/columns/"+t+"/cards",e,n)}},{key:"updateProjectCard",value:function(t,e,n){return this._request("PATCH","/projects/columns/cards/"+t,e,n)}},{key:"deleteProjectCard",value:function(t,e){return this._request("DELETE","/projects/columns/cards/"+t,null,e)}},{key:"moveProjectCard",value:function(t,e,n,r){return this._request("POST","/projects/columns/cards/"+t+"/moves",{position:e,column_id:n},r)}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);t.exports=o},function(t,e,n){var r=n(197),i=n(72)("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!==typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"===typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!==typeof e?e.protocol+"//"+t:"https://"+t),i("parse %s",t),n=r(t));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(e&&e.port===n.port?"":":"+n.port),n}},function(t,e,n){var r=n(198);t.exports=function(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){var n;function r(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];if(r.enabled){var o=r,s=Number(new Date),u=s-(n||s);o.diff=u,o.prev=n,o.curr=s,n=s,e[0]=i.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");var c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;c++;var r=i.formatters[n];if("function"===typeof r){var a=e[c];t=r.call(o,a),e.splice(c,1),c--}return t})),i.formatArgs.call(o,e),(o.log||i.log).apply(o,e)}}return r.namespace=t,r.enabled=i.enabled(t),r.useColors=i.useColors(),r.color=e(t),r.destroy=a,r.extend=o,"function"===typeof i.init&&i.init(r),i.instances.push(r),r}function a(){var t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function o(t,e){var n=i(this.namespace+("undefined"===typeof e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},i.disable=function(){var t=[].concat(r(i.names.map(s)),r(i.skips.map(s).map((function(t){return"-"+t})))).join(",");return i.enable(""),t},i.enable=function(t){var e;i.save(t),i.names=[],i.skips=[];var n=("string"===typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){var a=i.instances[e];a.enabled=i.enabled(a.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(503),Object.keys(t).forEach((function(e){i[e]=t[e]})),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){var n=1e3,r=60*n,i=60*r,a=24*i,o=7*a,s=365.25*a;function u(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var u=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(t);if("number"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=a)return u(t,e,a,"day");if(e>=i)return u(t,e,i,"hour");if(e>=r)return u(t,e,r,"minute");if(e>=n)return u(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=a)return Math.round(t/a)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){(function(r){function i(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!==typeof r&&"env"in r&&(t=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG),t}(e=t.exports=n(505)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(a=i))})),t.splice(a,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}},e.load=i,e.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(i())}).call(this,n(41))},function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,i=+new Date,a=i-(n||i);t.diff=a,t.prev=n,t.curr=i,n=i;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=e.coerce(o[0]),"string"!==typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"===typeof i){var a=o[u];n=i.call(t,a),o.splice(u,1),u--}return n})),e.formatArgs.call(t,o),(r.log||e.log||console.log.bind(console)).apply(t,o)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),r.destroy=i,"function"===typeof e.init&&e.init(r),e.instances.push(r),r}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"===typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var a=e.instances[n];a.enabled=e.enabled(a.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(195),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,n){var r=n(199),i=n(200),a=Object.prototype.toString,o="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===a.call(Blob),s="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===a.call(File);e.deconstructPacket=function(t){var e=[],n=t.data,a=t;return a.data=function t(e,n){if(!e)return e;if(i(e)){var a={_placeholder:!0,num:n.length};return n.push(e),a}if(r(e)){for(var o=new Array(e.length),s=0;s<e.length;s++)o[s]=t(e[s],n);return o}if("object"===typeof e&&!(e instanceof Date)){o={};for(var u in e)o[u]=t(e[u],n);return o}return e}(n,e),a.attachments=e.length,{packet:a,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(r(e))for(var i=0;i<e.length;i++)e[i]=t(e[i],n);else if("object"===typeof e)for(var a in e)e[a]=t(e[a],n);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,a=t;!function t(u,c,l){if(!u)return u;if(o&&u instanceof Blob||s&&u instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:a=this.result,--n||e(a)},f.readAsArrayBuffer(u)}else if(r(u))for(var h=0;h<u.length;h++)t(u[h],h,u);else if("object"===typeof u&&!i(u))for(var d in u)t(u[d],d,u)}(a),n||e(a)}},function(t,e,n){t.exports=n(508),t.exports.parser=n(48)},function(t,e,n){var r=n(202),i=n(47),a=n(75)("engine.io-client:socket"),o=n(206),s=n(48),u=n(197),c=n(73);function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"===typeof t&&(e=t,t=null),t?(t=u(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=u(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!==typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"===typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=s.protocol,l.Socket=l,l.Transport=n(125),l.transports=n(202),l.parser=n(48),l.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=s.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},l.prototype.probe=function(t){a('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(a('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(a('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),h(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())}))}else{a('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=e.name,r.emit("upgradeError",o)}})))}function o(){n||(n=!0,h(),e.close(),e=null)}function s(n){var i=new Error("probe error: "+n);i.transport=e.name,o(),a('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",i)}function u(){s("transport closed")}function c(){s("socket closed")}function f(t){e&&t.name!==e.name&&(a('"%s" works - aborting "%s"',t.name,e.name),o())}function h(){e.removeListener("open",i),e.removeListener("error",s),e.removeListener("close",u),r.removeListener("close",c),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",s),e.once("close",u),this.once("close",c),this.once("upgrading",f),e.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},l.prototype.sendPacket=function(t,e,n,r){if("function"===typeof e&&(r=e,e=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}function e(){t.onClose("forced close"),a("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},l.prototype.onError=function(t){a("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~o(this.transports,t[n])&&e.push(t[n]);return e}},function(t,e){try{t.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){var r=n(124),i=n(203),a=n(47),o=n(74),s=n(75)("engine.io-client:polling-xhr");function u(){}function c(t){if(i.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!==typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!==typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function l(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=c,t.exports.Request=l,o(c,i),c.prototype.supportsBinary=!0,c.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new l(t)},c.prototype.doWrite=function(t,e){var n="string"!==typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",(function(t){i.onError("xhr post error",t)})),this.sendXhr=r},c.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},a(l.prototype),l.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new r(t),n=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.extraHeaders[i])}catch(a){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{e.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(a){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"===typeof e.status?e.status:0)}),0))},s("xhr data %s",this.data),e.send(this.data)}catch(a){return void setTimeout((function(){n.onError(a)}),0)}"undefined"!==typeof document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},l.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},l.prototype.cleanup=function(t){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(e){}"undefined"!==typeof document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(n){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},l.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},l.requestsCount=0,l.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",h);else if("function"===typeof addEventListener){var f="onpagehide"in self?"pagehide":"unload";addEventListener(f,h,!1)}function h(){for(var t in l.requests)l.requests.hasOwnProperty(t)&&l.requests[t].abort()}},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),a=new Uint8Array(n-e),o=e,s=0;o<n;o++,s++)a[s]=i[o];return a.buffer}},function(t,e){function n(){}t.exports=function(t,e,r){var i=!1;return r=r||n,a.count=t,0===t?e():a;function a(t,n){if(a.count<=0)throw new Error("after called too many times");--a.count,t?(i=!0,e(t),e=r):0!==a.count||i||e(null,n)}}},function(t,e){var n,r,i,a=String.fromCharCode;function o(t){for(var e,n,r=[],i=0,a=t.length;i<a;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<a?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function s(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(t,e){return a(t>>e&63|128)}function c(t,e){if(0==(4294967168&t))return a(t);var n="";return 0==(4294965248&t)?n=a(t>>6&31|192):0==(4294901760&t)?(s(t,e)||(t=65533),n=a(t>>12&15|224),n+=u(t,6)):0==(4292870144&t)&&(n=a(t>>18&7|240),n+=u(t,12),n+=u(t,6)),n+=a(63&t|128)}function l(){if(i>=r)throw Error("Invalid byte index");var t=255&n[i];if(i++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(t){var e,a;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(e=255&n[i],i++,0==(128&e))return e;if(192==(224&e)){if((a=(31&e)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&e)){if((a=(15&e)<<12|l()<<6|l())>=2048)return s(a,t)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(a=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=o(t),i=r.length,a=-1,s="";++a<i;)s+=c(r[a],n);return s},decode:function(t,e){var s=!1!==(e=e||{}).strict;n=o(t),r=n.length,i=0;for(var u,c=[];!1!==(u=f(s));)c.push(u);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=a((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=a(e);return i}(c)}}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,a="";for(n=0;n<i;n+=3)a+=t[r[n]>>2],a+=t[(3&r[n])<<4|r[n+1]>>4],a+=t[(15&r[n+1])<<2|r[n+2]>>6],a+=t[63&r[n+2]];return i%3===2?a=a.substring(0,a.length-1)+"=":i%3===1&&(a=a.substring(0,a.length-2)+"=="),a},e.decode=function(t){var e,r,i,a,o,s=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),f=new Uint8Array(l);for(e=0;e<u;e+=4)r=n[t.charCodeAt(e)],i=n[t.charCodeAt(e+1)],a=n[t.charCodeAt(e+2)],o=n[t.charCodeAt(e+3)],f[c++]=r<<2|i>>4,f[c++]=(15&i)<<4|a>>2,f[c++]=(3&a)<<6|63&o;return l}}()},function(t,e){var n="undefined"!==typeof n?n:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function o(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function s(t,e){e=e||{};var r=new n;return o(t).forEach((function(t){r.append(t)})),e.type?r.getBlob(e.type):r.getBlob()}function u(t,e){return new Blob(o(t),e||{})}"undefined"!==typeof Blob&&(s.prototype=Blob.prototype,u.prototype=Blob.prototype),t.exports=r?i?Blob:u:a?s:void 0},function(t,e,n){var r=n(198);t.exports=function(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return i.colors[Math.abs(e)%i.colors.length]}function i(t){var n;function r(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];if(r.enabled){var o=r,s=Number(new Date),u=s-(n||s);o.diff=u,o.prev=n,o.curr=s,n=s,e[0]=i.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");var c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;c++;var r=i.formatters[n];if("function"===typeof r){var a=e[c];t=r.call(o,a),e.splice(c,1),c--}return t})),i.formatArgs.call(o,e),(o.log||i.log).apply(o,e)}}return r.namespace=t,r.enabled=i.enabled(t),r.useColors=i.useColors(),r.color=e(t),r.destroy=a,r.extend=o,"function"===typeof i.init&&i.init(r),i.instances.push(r),r}function a(){var t=i.instances.indexOf(this);return-1!==t&&(i.instances.splice(t,1),!0)}function o(t,e){var n=i(this.namespace+("undefined"===typeof e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},i.disable=function(){var t=[].concat(r(i.names.map(s)),r(i.skips.map(s).map((function(t){return"-"+t})))).join(",");return i.enable(""),t},i.enable=function(t){var e;i.save(t),i.names=[],i.skips=[];var n=("string"===typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")));for(e=0;e<i.instances.length;e++){var a=i.instances[e];a.enabled=i.enabled(a.namespace)}},i.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=i.skips.length;e<n;e++)if(i.skips[e].test(t))return!1;for(e=0,n=i.names.length;e<n;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=n(519),Object.keys(t).forEach((function(e){i[e]=t[e]})),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=e,i.enable(i.load()),i}},function(t,e){var n=1e3,r=60*n,i=60*r,a=24*i,o=7*a,s=365.25*a;function u(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var u=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(t);if("number"===c&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=a)return u(t,e,a,"day");if(e>=i)return u(t,e,i,"hour");if(e>=r)return u(t,e,r,"minute");if(e>=n)return u(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=a)return Math.round(t/a)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){(function(e){var r=n(203),i=n(74);t.exports=l;var a,o=/\n/g,s=/\\n/g;function u(){}function c(){return"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{}}function l(t){if(r.call(this,t),this.query=this.query||{},!a){var e=c();a=e.___eio=e.___eio||[]}this.index=a.length;var n=this;a.push((function(t){n.onData(t)})),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=u)}),!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},l.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,i=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=u,i.method="POST",i.setAttribute("accept-charset","utf-8"),a.name="d",i.appendChild(a),document.body.appendChild(i),this.form=i,this.area=a}function c(){l(),e()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(t)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),t=t.replace(s,"\\\n"),this.area.value=t.replace(o,"\\n");try{this.form.submit()}catch(f){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,n(19))},function(t,e,n){(function(e){var r,i,a=n(125),o=n(48),s=n(73),u=n(74),c=n(205),l=n(75)("engine.io-client:websocket");if("undefined"!==typeof WebSocket?r=WebSocket:"undefined"!==typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"===typeof window)try{i=n(522)}catch(d){}var f=r||i;function h(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=r&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=i),a.call(this,t)}t.exports=h,u(h,a),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new f(t,e):new f(t):new f(t,e,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},h.prototype.write=function(t){var n=this;this.writable=!1;for(var r=t.length,i=0,a=r;i<a;i++)!function(t){o.encodePacket(t,n.supportsBinary,(function(i){if(!n.usingBrowserWebSocket){var a={};if(t.options&&(a.compress=t.options.compress),n.perMessageDeflate)("string"===typeof i?e.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,a)}catch(d){l("websocket closed before onclose event")}--r||s()}))}(t[i]);function s(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},h.prototype.onClose=function(){a.prototype.onClose.call(this)},h.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},h.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),(t=s.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},h.prototype.check=function(){return!!f&&!("__initialize"in f&&this.name===h.prototype.name)}}).call(this,n(20).Buffer)},,function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},,,,,,,,,function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"aggregate",(function(){return Ca})),n.d(r,"bin",(function(){return Da})),n.d(r,"collect",(function(){return Pa})),n.d(r,"compare",(function(){return Fa})),n.d(r,"countpattern",(function(){return La})),n.d(r,"cross",(function(){return Ba})),n.d(r,"density",(function(){return Ha})),n.d(r,"expression",(function(){return Va})),n.d(r,"extent",(function(){return Xa})),n.d(r,"facet",(function(){return Za})),n.d(r,"field",(function(){return to})),n.d(r,"filter",(function(){return no})),n.d(r,"flatten",(function(){return io})),n.d(r,"fold",(function(){return ao})),n.d(r,"formula",(function(){return oo})),n.d(r,"generate",(function(){return so})),n.d(r,"impute",(function(){return lo})),n.d(r,"joinaggregate",(function(){return fo})),n.d(r,"kde",(function(){return po})),n.d(r,"key",(function(){return vo})),n.d(r,"load",(function(){return mo})),n.d(r,"lookup",(function(){return bo})),n.d(r,"multiextent",(function(){return _o})),n.d(r,"multivalues",(function(){return xo})),n.d(r,"params",(function(){return Eo})),n.d(r,"pivot",(function(){return So})),n.d(r,"prefacet",(function(){return Ao})),n.d(r,"project",(function(){return To})),n.d(r,"proxy",(function(){return Co})),n.d(r,"relay",(function(){return jo})),n.d(r,"sample",(function(){return Do})),n.d(r,"sequence",(function(){return Mo})),n.d(r,"sieve",(function(){return Po})),n.d(r,"subflow",(function(){return Ka})),n.d(r,"tupleindex",(function(){return Fo})),n.d(r,"values",(function(){return No})),n.d(r,"window",(function(){return qo}));var i={};n.r(i),n.d(i,"bound",(function(){return Ih})),n.d(i,"identifier",(function(){return zh})),n.d(i,"mark",(function(){return qh})),n.d(i,"overlap",(function(){return Wh})),n.d(i,"render",(function(){return Jh})),n.d(i,"viewlayout",(function(){return wd}));var a={};n.r(a),n.d(a,"interpolate",(function(){return Xv})),n.d(a,"interpolateArray",(function(){return Iv})),n.d(a,"interpolateBasis",(function(){return Av})),n.d(a,"interpolateBasisClosed",(function(){return Tv})),n.d(a,"interpolateDate",(function(){return Bv})),n.d(a,"interpolateDiscrete",(function(){return Kv})),n.d(a,"interpolateHue",(function(){return Jv})),n.d(a,"interpolateNumber",(function(){return Uv})),n.d(a,"interpolateObject",(function(){return zv})),n.d(a,"interpolateRound",(function(){return Zv})),n.d(a,"interpolateString",(function(){return $v})),n.d(a,"interpolateTransformCss",(function(){return rg})),n.d(a,"interpolateTransformSvg",(function(){return ig})),n.d(a,"interpolateZoom",(function(){return sg})),n.d(a,"interpolateRgb",(function(){return Pv})),n.d(a,"interpolateRgbBasis",(function(){return Nv})),n.d(a,"interpolateRgbBasisClosed",(function(){return Lv})),n.d(a,"interpolateHsl",(function(){return cg})),n.d(a,"interpolateHslLong",(function(){return lg})),n.d(a,"interpolateLab",(function(){return Dg})),n.d(a,"interpolateHcl",(function(){return Mg})),n.d(a,"interpolateHclLong",(function(){return Pg})),n.d(a,"interpolateCubehelix",(function(){return Hg})),n.d(a,"interpolateCubehelixLong",(function(){return Gg})),n.d(a,"piecewise",(function(){return Yg})),n.d(a,"quantize",(function(){return Vg}));var o={};n.r(o),n.d(o,"axisticks",(function(){return ey})),n.d(o,"datajoin",(function(){return ny})),n.d(o,"encode",(function(){return ay})),n.d(o,"legendentries",(function(){return vy})),n.d(o,"linkpath",(function(){return wy})),n.d(o,"pie",(function(){return Sy})),n.d(o,"scale",(function(){return Cy})),n.d(o,"sortitems",(function(){return My})),n.d(o,"stack",(function(){return Fy})),n.d(o,"validTicks",(function(){return Zm}));var s={};n.r(s),n.d(s,"contour",(function(){return pb})),n.d(s,"geojson",(function(){return mb})),n.d(s,"geopath",(function(){return Uk})),n.d(s,"geopoint",(function(){return zk})),n.d(s,"geoshape",(function(){return qk})),n.d(s,"graticule",(function(){return Wk})),n.d(s,"projection",(function(){return Hk}));var u={};n.r(u),n.d(u,"force",(function(){return zE}));var c={};n.r(c),n.d(c,"nest",(function(){return HS})),n.d(c,"pack",(function(){return KS})),n.d(c,"partition",(function(){return QS})),n.d(c,"stratify",(function(){return eO})),n.d(c,"tree",(function(){return iO})),n.d(c,"treelinks",(function(){return oO})),n.d(c,"treemap",(function(){return cO}));var l={};n.r(l),n.d(l,"loess",(function(){return hO})),n.d(l,"regression",(function(){return pO}));var f={};n.r(f),n.d(f,"voronoi",(function(){return UO}));var h={};n.r(h),n.d(h,"wordcloud",(function(){return nA}));var d={};n.r(d),n.d(d,"crossfilter",(function(){return lA})),n.d(d,"resolvefilter",(function(){return hA}));var p={};n.r(p),n.d(p,"version",(function(){return dA.a})),n.d(p,"Dataflow",(function(){return Oi})),n.d(p,"EventStream",(function(){return he})),n.d(p,"Parameters",(function(){return ie})),n.d(p,"Pulse",(function(){return di})),n.d(p,"MultiPulse",(function(){return yi})),n.d(p,"Operator",(function(){return ue})),n.d(p,"Transform",(function(){return Ci})),n.d(p,"changeset",(function(){return ne})),n.d(p,"ingest",(function(){return Kt})),n.d(p,"isTuple",(function(){return Vt})),n.d(p,"definition",(function(){return Ri})),n.d(p,"transform",(function(){return Mi})),n.d(p,"transforms",(function(){return Di})),n.d(p,"tupleid",(function(){return $t})),n.d(p,"scale",(function(){return Im})),n.d(p,"scheme",(function(){return Km})),n.d(p,"interpolate",(function(){return Ym})),n.d(p,"interpolateColors",(function(){return Wm})),n.d(p,"interpolateRange",(function(){return qm})),n.d(p,"timeInterval",(function(){return lp})),n.d(p,"quantizeInterpolator",(function(){return Hm})),n.d(p,"projection",(function(){return Nk})),n.d(p,"View",(function(){return jq})),n.d(p,"expressionFunction",(function(){return nq})),n.d(p,"formatLocale",(function(){return Gp})),n.d(p,"timeFormatLocale",(function(){return ri})),n.d(p,"parse",(function(){return kY})),n.d(p,"runtime",(function(){return MY})),n.d(p,"runtimeContext",(function(){return FY})),n.d(p,"bin",(function(){return qi})),n.d(p,"bootstrapCI",(function(){return Zi})),n.d(p,"quartiles",(function(){return Qi})),n.d(p,"random",(function(){return Gi})),n.d(p,"setRandom",(function(){return Yi})),n.d(p,"randomLCG",(function(){return ta})),n.d(p,"randomInteger",(function(){return ea})),n.d(p,"randomKDE",(function(){return ra})),n.d(p,"randomMixture",(function(){return aa})),n.d(p,"randomNormal",(function(){return na})),n.d(p,"randomUniform",(function(){return oa})),n.d(p,"regressionLinear",(function(){return fa})),n.d(p,"regressionLog",(function(){return ha})),n.d(p,"regressionExp",(function(){return da})),n.d(p,"regressionPow",(function(){return pa})),n.d(p,"regressionQuad",(function(){return va})),n.d(p,"regressionPoly",(function(){return ma})),n.d(p,"regressionLoess",(function(){return wa})),n.d(p,"sampleCurve",(function(){return Sa})),n.d(p,"accessor",(function(){return Ut.f})),n.d(p,"accessorName",(function(){return Ut.h})),n.d(p,"accessorFields",(function(){return Ut.g})),n.d(p,"id",(function(){return Ut.w})),n.d(p,"identity",(function(){return Ut.x})),n.d(p,"zero",(function(){return Ut.hb})),n.d(p,"one",(function(){return Ut.M})),n.d(p,"truthy",(function(){return Ut.eb})),n.d(p,"falsy",(function(){return Ut.r})),n.d(p,"logger",(function(){return Ut.K})),n.d(p,"None",(function(){return Ut.d})),n.d(p,"Error",(function(){return Ut.b})),n.d(p,"Warn",(function(){return Ut.e})),n.d(p,"Info",(function(){return Ut.c})),n.d(p,"Debug",(function(){return Ut.a})),n.d(p,"panLinear",(function(){return Ut.O})),n.d(p,"panLog",(function(){return Ut.P})),n.d(p,"panPow",(function(){return Ut.Q})),n.d(p,"panSymlog",(function(){return Ut.R})),n.d(p,"zoomLinear",(function(){return Ut.ib})),n.d(p,"zoomLog",(function(){return Ut.jb})),n.d(p,"zoomPow",(function(){return Ut.kb})),n.d(p,"zoomSymlog",(function(){return Ut.lb})),n.d(p,"quarter",(function(){return Ut.T})),n.d(p,"utcquarter",(function(){return Ut.fb})),n.d(p,"array",(function(){return Ut.i})),n.d(p,"clampRange",(function(){return Ut.j})),n.d(p,"compare",(function(){return Ut.k})),n.d(p,"constant",(function(){return Ut.l})),n.d(p,"debounce",(function(){return Ut.m})),n.d(p,"error",(function(){return Ut.n})),n.d(p,"extend",(function(){return Ut.o})),n.d(p,"extent",(function(){return Ut.p})),n.d(p,"extentIndex",(function(){return Ut.q})),n.d(p,"fastmap",(function(){return Ut.s})),n.d(p,"field",(function(){return Ut.t})),n.d(p,"flush",(function(){return Ut.u})),n.d(p,"hasOwnProperty",(function(){return Ut.v})),n.d(p,"inherits",(function(){return Ut.y})),n.d(p,"inrange",(function(){return Ut.z})),n.d(p,"isArray",(function(){return Ut.A})),n.d(p,"isBoolean",(function(){return Ut.B})),n.d(p,"isDate",(function(){return Ut.C})),n.d(p,"isFunction",(function(){return Ut.D})),n.d(p,"isNumber",(function(){return Ut.E})),n.d(p,"isObject",(function(){return Ut.F})),n.d(p,"isRegExp",(function(){return Ut.G})),n.d(p,"isString",(function(){return Ut.H})),n.d(p,"key",(function(){return Ut.I})),n.d(p,"lerp",(function(){return Ut.J})),n.d(p,"merge",(function(){return Ut.L})),n.d(p,"pad",(function(){return Ut.N})),n.d(p,"peek",(function(){return Ut.S})),n.d(p,"repeat",(function(){return Ut.U})),n.d(p,"span",(function(){return Ut.V})),n.d(p,"splitAccessPath",(function(){return Ut.W})),n.d(p,"stringValue",(function(){return Ut.X})),n.d(p,"toBoolean",(function(){return Ut.Y})),n.d(p,"toDate",(function(){return Ut.Z})),n.d(p,"toNumber",(function(){return Ut.ab})),n.d(p,"toString",(function(){return Ut.cb})),n.d(p,"toSet",(function(){return Ut.bb})),n.d(p,"truncate",(function(){return Ut.db})),n.d(p,"visitArray",(function(){return Ut.gb})),n.d(p,"loader",(function(){return WA})),n.d(p,"read",(function(){return qA})),n.d(p,"inferType",(function(){return DA})),n.d(p,"inferTypes",(function(){return RA})),n.d(p,"typeParsers",(function(){return TA})),n.d(p,"format",(function(){return BA})),n.d(p,"formats",(function(){return UA})),n.d(p,"responseType",(function(){return zA})),n.d(p,"Bounds",(function(){return HA})),n.d(p,"Gradient",(function(){return JA})),n.d(p,"GroupItem",(function(){return QA})),n.d(p,"ResourceLoader",(function(){return tT})),n.d(p,"Item",(function(){return ZA})),n.d(p,"Scenegraph",(function(){return fj})),n.d(p,"Handler",(function(){return _j})),n.d(p,"Renderer",(function(){return kj})),n.d(p,"CanvasHandler",(function(){return Oj})),n.d(p,"CanvasRenderer",(function(){return Dj})),n.d(p,"SVGHandler",(function(){return Fj})),n.d(p,"SVGRenderer",(function(){return Hj})),n.d(p,"SVGStringRenderer",(function(){return rD})),n.d(p,"RenderType",(function(){return cD})),n.d(p,"renderModule",(function(){return fD})),n.d(p,"intersect",(function(){return hD})),n.d(p,"Marks",(function(){return ij})),n.d(p,"boundClip",(function(){return mD})),n.d(p,"boundContext",(function(){return YT})),n.d(p,"boundStroke",(function(){return HT})),n.d(p,"boundItem",(function(){return aj})),n.d(p,"boundMark",(function(){return sj})),n.d(p,"pathCurves",(function(){return aT})),n.d(p,"pathSymbols",(function(){return xT})),n.d(p,"pathRectangle",(function(){return CT})),n.d(p,"pathTrail",(function(){return jT})),n.d(p,"pathParse",(function(){return uT})),n.d(p,"pathRender",(function(){return bT})),n.d(p,"point",(function(){return bj})),n.d(p,"domCreate",(function(){return pj})),n.d(p,"domFind",(function(){return vj})),n.d(p,"domChild",(function(){return gj})),n.d(p,"domClear",(function(){return mj})),n.d(p,"openTag",(function(){return Ij})),n.d(p,"closeTag",(function(){return Bj})),n.d(p,"font",(function(){return ZC})),n.d(p,"fontFamily",(function(){return JC})),n.d(p,"fontSize",(function(){return $C})),n.d(p,"textMetrics",(function(){return WC})),n.d(p,"resetSVGClipId",(function(){return kC})),n.d(p,"sceneEqual",(function(){return bD})),n.d(p,"pathEqual",(function(){return _D})),n.d(p,"sceneToJSON",(function(){return cj})),n.d(p,"sceneFromJSON",(function(){return lj})),n.d(p,"intersectPath",(function(){return JT})),n.d(p,"intersectPoint",(function(){return ZT})),n.d(p,"intersectRule",(function(){return tC})),n.d(p,"intersectBoxLine",(function(){return eC})),n.d(p,"sceneZOrder",(function(){return sC})),n.d(p,"sceneVisit",(function(){return uC})),n.d(p,"scenePickVisit",(function(){return cC}));var v={};n.r(v),n.d(v,"INVALID_SPEC",(function(){return yX})),n.d(v,"FIT_NON_SINGLE",(function(){return bX})),n.d(v,"CANNOT_FIX_RANGE_STEP_WITH_FIT",(function(){return _X})),n.d(v,"cannotProjectOnChannelWithoutField",(function(){return wX})),n.d(v,"nearestNotSupportForContinuous",(function(){return xX})),n.d(v,"selectionNotSupported",(function(){return kX})),n.d(v,"selectionNotFound",(function(){return EX})),n.d(v,"SCALE_BINDINGS_CONTINUOUS",(function(){return SX})),n.d(v,"NO_INIT_SCALE_BINDINGS",(function(){return OX})),n.d(v,"noSuchRepeatedValue",(function(){return AX})),n.d(v,"columnsNotSupportByRowCol",(function(){return TX})),n.d(v,"CONCAT_CANNOT_SHARE_AXIS",(function(){return CX})),n.d(v,"REPEAT_CANNOT_SHARE_AXIS",(function(){return jX})),n.d(v,"unrecognizedParse",(function(){return DX})),n.d(v,"differentParse",(function(){return RX})),n.d(v,"invalidTransformIgnored",(function(){return MX})),n.d(v,"NO_FIELDS_NEEDS_AS",(function(){return PX})),n.d(v,"encodingOverridden",(function(){return FX})),n.d(v,"projectionOverridden",(function(){return NX})),n.d(v,"primitiveChannelDef",(function(){return LX})),n.d(v,"invalidFieldType",(function(){return IX})),n.d(v,"nonZeroScaleUsedWithLengthMark",(function(){return BX})),n.d(v,"invalidFieldTypeForCountAggregate",(function(){return UX})),n.d(v,"invalidAggregate",(function(){return zX})),n.d(v,"missingFieldType",(function(){return qX})),n.d(v,"droppingColor",(function(){return WX})),n.d(v,"emptyFieldDef",(function(){return HX})),n.d(v,"latLongDeprecated",(function(){return GX})),n.d(v,"LINE_WITH_VARYING_SIZE",(function(){return YX})),n.d(v,"incompatibleChannel",(function(){return VX})),n.d(v,"invalidEncodingChannel",(function(){return $X})),n.d(v,"facetChannelShouldBeDiscrete",(function(){return XX})),n.d(v,"facetChannelDropped",(function(){return KX})),n.d(v,"discreteChannelCannotEncode",(function(){return JX})),n.d(v,"BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL",(function(){return ZX})),n.d(v,"lineWithRange",(function(){return QX})),n.d(v,"orientOverridden",(function(){return tK})),n.d(v,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return eK})),n.d(v,"cannotUseScalePropertyWithNonColor",(function(){return nK})),n.d(v,"unaggregateDomainHasNoEffectForRawField",(function(){return rK})),n.d(v,"unaggregateDomainWithNonSharedDomainOp",(function(){return iK})),n.d(v,"unaggregatedDomainWithLogScale",(function(){return aK})),n.d(v,"cannotApplySizeToNonOrientedMark",(function(){return oK})),n.d(v,"rangeStepDropped",(function(){return sK})),n.d(v,"scaleTypeNotWorkWithChannel",(function(){return uK})),n.d(v,"scaleTypeNotWorkWithFieldDef",(function(){return cK})),n.d(v,"scalePropertyNotWorkWithScaleType",(function(){return lK})),n.d(v,"scaleTypeNotWorkWithMark",(function(){return fK})),n.d(v,"mergeConflictingProperty",(function(){return hK})),n.d(v,"mergeConflictingDomainProperty",(function(){return dK})),n.d(v,"independentScaleMeansIndependentGuide",(function(){return pK})),n.d(v,"domainSortDropped",(function(){return vK})),n.d(v,"UNABLE_TO_MERGE_DOMAINS",(function(){return gK})),n.d(v,"MORE_THAN_ONE_SORT",(function(){return mK})),n.d(v,"INVALID_CHANNEL_FOR_AXIS",(function(){return yK})),n.d(v,"cannotStackRangedMark",(function(){return bK})),n.d(v,"cannotStackNonLinearScale",(function(){return _K})),n.d(v,"stackNonSummativeAggregate",(function(){return wK})),n.d(v,"invalidTimeUnit",(function(){return xK})),n.d(v,"dayReplacedWithDate",(function(){return kK})),n.d(v,"droppedDay",(function(){return EK})),n.d(v,"errorBarCenterAndExtentAreNotNeeded",(function(){return SK})),n.d(v,"errorBarCenterIsUsedWithWrongExtent",(function(){return OK})),n.d(v,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return AK})),n.d(v,"errorBarCenterIsNotNeeded",(function(){return TK})),n.d(v,"errorBand1DNotSupport",(function(){return CK})),n.d(v,"channelRequiredForBinned",(function(){return jK})),n.d(v,"domainRequiredForThresholdScale",(function(){return DK}));var g={};n.r(g),n.d(g,"symbols",(function(){return Z2})),n.d(g,"gradient",(function(){return Q2})),n.d(g,"labels",(function(){return t3})),n.d(g,"getFirstConditionValue",(function(){return n3}));var m={};n.r(m),n.d(m,"compile",(function(){return C4})),n.d(m,"extractTransforms",(function(){return D4})),n.d(m,"normalize",(function(){return MQ})),n.d(m,"version",(function(){return R4}));var y={};n.r(y),n.d(y,"dark",(function(){return N4})),n.d(y,"excel",(function(){return L4})),n.d(y,"fivethirtyeight",(function(){return I4})),n.d(y,"ggplot2",(function(){return B4})),n.d(y,"latimes",(function(){return q4})),n.d(y,"quartz",(function(){return W4})),n.d(y,"vox",(function(){return H4})),n.d(y,"version",(function(){return G4}));var b=n(15),_=n.n(b),w=n(1),x=n.n(w),k=n(9),E=n.n(k);function S(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}var O="http://www.w3.org/1999/xhtml",A={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},T=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),A.hasOwnProperty(e)?{space:A[e],local:t}:t};function C(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===O&&e.documentElement.namespaceURI===O?e.createElement(t):e.createElementNS(n,t)}}function j(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var D=function(t){var e=T(t);return(e.local?j:C)(e)};function R(){}var M=function(t){return null==t?R:function(){return this.querySelector(t)}};function P(){return[]}var F=function(t){return new Array(t.length)};function N(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}N.prototype={constructor:N,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var L="$";function I(t,e,n,r,i,a){for(var o,s=0,u=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new N(t,a[s]);for(;s<u;++s)(o=e[s])&&(i[s]=o)}function B(t,e,n,r,i,a,o){var s,u,c,l={},f=e.length,h=a.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=c=L+o.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<h;++s)(u=l[c=L+o.call(t,a[s],s,a)])?(r[s]=u,u.__data__=a[s],l[c]=null):n[s]=new N(t,a[s]);for(s=0;s<f;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function U(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function z(t){return function(){this.removeAttribute(t)}}function q(t){return function(){this.removeAttributeNS(t.space,t.local)}}function W(t,e){return function(){this.setAttribute(t,e)}}function H(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function G(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Y(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var V=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function $(t){return function(){this.style.removeProperty(t)}}function X(t,e,n){return function(){this.style.setProperty(t,e,n)}}function K(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function J(t,e){return t.style.getPropertyValue(e)||V(t).getComputedStyle(t,null).getPropertyValue(e)}function Z(t){return function(){delete this[t]}}function Q(t,e){return function(){this[t]=e}}function tt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function et(t){return t.trim().split(/^|\s+/)}function nt(t){return t.classList||new rt(t)}function rt(t){this._node=t,this._names=et(t.getAttribute("class")||"")}function it(t,e){for(var n=nt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function at(t,e){for(var n=nt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ot(t){return function(){it(this,t)}}function st(t){return function(){at(this,t)}}function ut(t,e){return function(){(e.apply(this,arguments)?it:at)(this,t)}}rt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ct(){this.textContent=""}function lt(t){return function(){this.textContent=t}}function ft(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ht(){this.innerHTML=""}function dt(t){return function(){this.innerHTML=t}}function pt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function vt(){this.nextSibling&&this.parentNode.appendChild(this)}function gt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mt(){return null}function yt(){var t=this.parentNode;t&&t.removeChild(this)}function bt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function _t(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var wt={},xt=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(wt={mouseenter:"mouseover",mouseleave:"mouseout"}));function kt(t,e,n){return t=Et(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Et(t,e,n){return function(r){var i=xt;xt=r;try{t.call(this,this.__data__,e,n)}finally{xt=i}}}function St(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Ot(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function At(t,e,n){var r=wt.hasOwnProperty(t.type)?kt:Et;return function(i,a,o){var s,u=this.__on,c=r(e,a,o);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function Tt(t,e,n){var r=V(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ct(t,e){return function(){return Tt(this,t,e)}}function jt(t,e){return function(){return Tt(this,t,e.apply(this,arguments))}}var Dt=[null];function Rt(t,e){this._groups=t,this._parents=e}function Mt(){return new Rt([[document.documentElement]],Dt)}Rt.prototype=Mt.prototype={constructor:Rt,select:function(t){"function"!==typeof t&&(t=M(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(a=s[l])&&(o=t.call(a,a.__data__,l,s))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new Rt(r,this._parents)},selectAll:function(t){var e;"function"!==typeof t&&(t=null==(e=t)?P:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var s,u=n[o],c=u.length,l=0;l<c;++l)(s=u[l])&&(i.push(t.call(s,s.__data__,l,u)),a.push(s));return new Rt(i,a)},filter:function(t){var e;"function"!==typeof t&&(e=t,t=function(){return this.matches(e)});for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var o,s=n[a],u=s.length,c=i[a]=[],l=0;l<u;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&c.push(o);return new Rt(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each((function(t){p[++l]=t})),p;var n,r=e?B:I,i=this._parents,a=this._groups;"function"!==typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),c=new Array(o),l=0;l<o;++l){var f=i[l],h=a[l],d=h.length,p=t.call(f,f&&f.__data__,l,i),v=p.length,g=u[l]=new Array(v),m=s[l]=new Array(v);r(f,h,g,m,c[l]=new Array(d),p,e);for(var y,b,_=0,w=0;_<v;++_)if(y=g[_]){for(_>=w&&(w=_+1);!(b=m[w])&&++w<v;);y._next=b||null}}return(s=new Rt(s,i))._enter=u,s._exit=c,s},enter:function(){return new Rt(this._enter||this._groups.map(F),this._parents)},exit:function(){return new Rt(this._exit||this._groups.map(F),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,c=e[s],l=n[s],f=c.length,h=o[s]=new Array(f),d=0;d<f;++d)(u=c[d]||l[d])&&(h[d]=u);for(;s<r;++s)o[s]=e[s];return new Rt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=U);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,c=i[a]=new Array(u),l=0;l<u;++l)(o=s[l])&&(c[l]=o);c.sort(e)}return new Rt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=T(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?q:z:"function"===typeof e?n.local?Y:G:n.local?H:W)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?$:"function"===typeof e?K:X)(t,e,null==n?"":n)):J(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Z:"function"===typeof e?tt:Q)(t,e)):this.node()[t]},classed:function(t,e){var n=et(t+"");if(arguments.length<2){for(var r=nt(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?ut:e?ot:st)(n,e))},text:function(t){return arguments.length?this.each(null==t?ct:("function"===typeof t?ft:lt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ht:("function"===typeof t?pt:dt)(t)):this.node().innerHTML},raise:function(){return this.each(vt)},lower:function(){return this.each(gt)},append:function(t){var e="function"===typeof t?t:D(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:D(t),r=null==e?mt:"function"===typeof e?e:M(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(yt)},clone:function(t){return this.select(t?_t:bt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=St(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?At:Ot,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"===typeof e?jt:Ct)(t,e))}};var Pt=function(t){return"string"===typeof t?new Rt([[document.querySelector(t)]],[document.documentElement]):new Rt([[t]],Dt)},Ft=0;function Nt(){this._="@"+(++Ft).toString(36)}Nt.prototype=function(){return new Nt}.prototype={constructor:Nt,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var Lt=n(86),It=n.n(Lt),Bt=n(130),Ut=n(0);function zt(t){var e=t||Ut.x,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,a=e(t);return r[a]&&(r[a]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}var qt=n(12),Wt=function(t,e){return Ht.apply(this,arguments)};function Ht(){return(Ht=Object(qt.a)(E.a.mark((function t(e,n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}var Gt=Symbol("vega_id"),Yt=1;function Vt(t){return!(!t||!$t(t))}function $t(t){return t[Gt]}function Xt(t,e){return t[Gt]=e,t}function Kt(t){var e=t===Object(t)?t:{data:t};return $t(e)?e:Xt(e,Yt++)}function Jt(t){return Zt(t,Kt({}))}function Zt(t,e){for(var n in t)e[n]=t[n];return e}function Qt(t,e){return Xt(e,$t(t))}function te(t,e){return t?e?function(n,r){return t(n,r)||$t(e(n))-$t(e(r))}:function(e,n){return t(e,n)||$t(e)-$t(n)}:null}function ee(t){return t&&t.constructor===ne}function ne(){var t=[],e=[],n=[],r=[],i=[],a=!1;return{constructor:ne,insert:function(e){for(var n=Object(Ut.i)(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Object(Ut.D)(t)?r:e,i=Object(Ut.i)(t),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(t,e,r){var a={field:e,value:Object(Ut.l)(r)};return Object(Ut.D)(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode:function(t,e){return Object(Ut.D)(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return a=!0,this},pulse:function(o,s){var u,c,l,f,h,d,p={},v={};for(u=0,c=s.length;u<c;++u)p[$t(s[u])]=1;for(u=0,c=e.length;u<c;++u)p[$t(h=e[u])]=-1;for(u=0,c=r.length;u<c;++u)f=r[u],s.forEach((function(t){f(t)&&(p[$t(t)]=-1)}));for(u=0,c=t.length;u<c;++u)d=$t(h=t[u]),p[d]?p[d]=1:o.add.push(Kt(t[u]));for(u=0,c=s.length;u<c;++u)h=s[u],p[$t(h)]<0&&o.rem.push(h);function g(t,e,n){n?t[e]=n(t):o.encode=e,a||(v[$t(t)]=t)}for(u=0,c=n.length;u<c;++u)h=(l=n[u]).tuple,f=l.field,(d=p[$t(h)])>0&&(g(h,f,l.value),o.modifies(f));for(u=0,c=i.length;u<c;++u)l=i[u],f=l.filter,s.forEach((function(t){f(t)&&p[$t(t)]>0&&g(t,l.field,l.value)})),o.modifies(l.field);if(a)o.mod=e.length||r.length?s.filter((function(t){return p[$t(t)]>0})):s.slice();else for(d in v)o.mod.push(v[d]);return o}}}var re="_:mod:_";function ie(){Object.defineProperty(this,re,{writable:!0,value:{}})}var ae=ie.prototype;ae.set=function(t,e,n,r){var i=this,a=i[t],o=i[re];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=Object(Ut.A)(n)?1+n.length:-1),i},ae.modified=function(t,e){var n,r=this[re];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(Ut.A)(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e+1<r[t]||!!r[e+":"+t]:!!r[t]},ae.clear=function(){return this[re]={},this};var oe=0,se=new ie;function ue(t,e,n,r){this.id=++oe,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}var ce=ue.prototype;function le(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}ce.targets=function(){return this._targets||(this._targets=zt(Ut.w))},ce.set=function(t){return this.value!==t?(this.value=t,1):0},ce.skip=le(1),ce.modified=le(2),ce.parameters=function(t,e,n){e=!1!==e;var r,i,a,o,s=this,u=s._argval=s._argval||new ie,c=s._argops=s._argops||[],l=[];function f(t,n,r){r instanceof ue?(r!==s&&(e&&r.targets().add(s),l.push(r)),c.push({op:r,name:t,index:n})):u.set(t,n,r)}for(r in t)if(i=t[r],"pulse"===r)Object(Ut.i)(i).forEach((function(t){t instanceof ue?t!==s&&(t.targets().add(s),l.push(t)):Object(Ut.n)("Pulse parameters must be operator instances.")})),s.source=i;else if(Object(Ut.A)(i))for(u.set(r,-1,Array(a=i.length)),o=0;o<a;++o)f(r,o,i[o]);else f(r,-1,i);return this.marshall().clear(),n&&(c.initonly=!0),l},ce.marshall=function(t){var e,n,r,i,a,o=this._argval||se,s=this._argops;if(s){for(n=0,r=s.length;n<r;++n)a=(i=(e=s[n]).op).modified()&&i.stamp===t,o.set(e.name,e.index,i.value,a);if(s.initonly){for(n=0;n<r;++n)(e=s[n]).op.targets().remove(this);this._argops=null,this._update=null}}return o},ce.evaluate=function(t){var e=this._update;if(e){var n=this.marshall(t.stamp),r=e.call(this,n,t);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return t.StopPropagation}},ce.run=function(t){return t.stamp<this.stamp?t.StopPropagation:(this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t);var e};var fe=0;function he(t,e,n){this.id=++fe,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function de(t,e,n){return new he(t,e,n)}var pe=he.prototype;pe._filter=Ut.eb,pe._apply=Ut.x,pe.targets=function(){return this._targets||(this._targets=zt(Ut.w))},pe.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},pe.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},pe.filter=function(t){var e=de(t);return this.targets().add(e),e},pe.apply=function(t){var e=de(null,t);return this.targets().add(e),e},pe.merge=function(){var t=de();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},pe.throttle=function(t){var e=-1;return this.filter((function(){var n=Date.now();return n-e>t?(e=n,1):0}))},pe.debounce=function(t){var e=de();return this.targets().add(de(null,null,Object(Ut.m)(t,(function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()})))),e},pe.between=function(t,e){var n=!1;return t.targets().add(de(null,null,(function(){n=!0}))),e.targets().add(de(null,null,(function(){n=!1}))),this.filter((function(){return n}))};var ve=/^([A-Za-z]+:)?\/\//,ge=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,me=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ye="file://";function be(t,e){return _e.apply(this,arguments)}function _e(){return(_e=Object(qt.a)(E.a.mark((function t(e,n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function we(t,e){return xe.apply(this,arguments)}function xe(){return(xe=Object(qt.a)(E.a.mark((function t(e,n){var r,i,a,o,s,u,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Ut.o)({},this.options,n),r=this.fileAccess,i={href:null},u=ge.test(e.replace(me,"")),null!=e&&"string"===typeof e&&u||Object(Ut.n)("Sanitize failure, invalid URI: "+Object(Ut.X)(e)),c=ve.test(e),(s=n.baseURL)&&!c&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),o=(a=e.startsWith(ye))||"file"===n.mode||"http"!==n.mode&&!c&&r,a?e=e.slice(ye.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ke(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:Ee}function Ee(){return Se.apply(this,arguments)}function Se(){return(Se=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oe(t){return t?function(){var e=Object(qt.a)(E.a.mark((function e(n,r){var i,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ut.o)({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Object(Ut.D)(o[a])?o[a]():o.text():Object(Ut.n)(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():Ae}function Ae(){return Te.apply(this,arguments)}function Te(){return(Te=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ce={boolean:Ut.Y,integer:Ut.ab,number:Ut.ab,date:Ut.Z,string:Ut.cb,unknown:Ut.x},je=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return Me(t)&&(t=+t)===~~t},Me,function(t){return!isNaN(Date.parse(t))}],De=["boolean","integer","number","date"];function Re(t,e){return e.reduce((function(e,n){return e[n]=function(t,e){if(!t||!t.length)return"unknown";var n,r,i,a,o=0,s=t.length,u=je.length,c=je.map((function(t,e){return e+1}));for(r=0,s=t.length;r<s;++r)for(n=e?t[r][e]:t[r],i=0;i<u;++i)if(c[i]&&(null!=(a=n)&&a===a)&&!je[i](n)&&(c[i]=0,++o===je.length))return"string";return o=c.reduce((function(t,e){return 0===t?e:t}),0)-1,De[o]}(t,n),e}),{})}function Me(t){return!isNaN(+t)&&!(t instanceof Date)}var Pe={},Fe={},Ne=34,Le=10,Ie=13;function Be(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}function Ue(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function ze(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function qe(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+ze(-e,6):e>9999?"+"+ze(e,6):ze(e,4))+"-"+ze(t.getUTCMonth()+1,2)+"-"+ze(t.getUTCDate(),2)+(a?"T"+ze(n,2)+":"+ze(r,2)+":"+ze(i,2)+"."+ze(a,3)+"Z":i?"T"+ze(n,2)+":"+ze(r,2)+":"+ze(i,2)+"Z":r||n?"T"+ze(n,2)+":"+ze(r,2)+"Z":"")}var We=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],a=t.length,o=0,s=0,u=a<=0,c=!1;function l(){if(u)return Fe;if(c)return c=!1,Pe;var e,r,i=o;if(t.charCodeAt(i)===Ne){for(;o++<a&&t.charCodeAt(o)!==Ne||t.charCodeAt(++o)===Ne;);return(e=o)>=a?u=!0:(r=t.charCodeAt(o++))===Le?c=!0:r===Ie&&(c=!0,t.charCodeAt(o)===Le&&++o),t.slice(i+1,e-1).replace(/""/g,'"')}for(;o<a;){if((r=t.charCodeAt(e=o++))===Le)c=!0;else if(r===Ie)c=!0,t.charCodeAt(o)===Le&&++o;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,a)}for(t.charCodeAt(a-1)===Le&&--a,t.charCodeAt(a-1)===Ie&&--a;(r=l())!==Fe;){for(var f=[];r!==Pe&&r!==Fe;)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?qe(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,a=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Be(t);return function(r,i){return e(n(r),i,t)}}(t,e):Be(t)}));return a.columns=i||[],a},parseRows:r,format:function(e,n){return null==n&&(n=Ue(e)),[n.map(o).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Ue(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(a).join("\n")}}},He=We(","),Ge=(He.parse,He.parseRows,He.format,He.formatBody,He.formatRows,We("\t"));Ge.parse,Ge.parseRows,Ge.format,Ge.formatBody,Ge.formatRows;function Ye(t){var e=function(e,n){var r={delimiter:t};return Ve(e,n?Object(Ut.o)(n,r):r)};return e.responseType="text",e}function Ve(t,e){return e.header&&(t=e.header.map(Ut.X).join(e.delimiter)+"\n"+t),We(e.delimiter).parse(t+"")}Ve.responseType="text";var $e=n(79),Xe=function(t){return t},Ke=function(t){if(null==t)return Xe;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+a,l[1]=(n+=t[1])*i+o;u<c;)l[u]=t[u],++u;return l}},Je=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},Ze=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Qe(t,e)}))}:Qe(t,e)};function Qe(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,a=tn(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function tn(t,e){var n=Ke(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],a=0,o=i.length;a<o;++a)e.push(n(i[a],a));t<0&&Je(e,o)}function a(t){return n(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}var en=function(t,e){var n={},r={},i={},a=[],o=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),a.push(i)}}return e.forEach((function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++o],e[o]=n,e[r]=i)})),e.forEach((function(e){var n,a,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=o[0],u=o[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,a=r[u]){delete r[a.start];var c=a===n?n:n.concat(a);r[c.start=n.start]=i[c.end=a.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,a=i[s]){delete i[a.end];var l=a===n?n:a.concat(n);r[l.start=a.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||a.push([t])})),a},nn=function(t){return tn(t,rn.apply(this,arguments))};function rn(t,e,n){var r,i,a;if(arguments.length>1)r=function(t,e,n){var r,i=[],a=[];function o(t){var e=t<0?~t:t;(a[e]||(a[e]=[])).push({i:t,g:r})}function s(t){t.forEach(o)}function u(t){t.forEach(s)}return function t(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":u(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(u)}(e.arcs)}}(e),a.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,n);else for(i=0,r=new Array(a=t.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:en(t,r)}}var an={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function on(t,e){var n,r,i,a;return t=Object($e.a)(t,e),e&&e.feature?(n=Ze,i=e.feature):e&&e.mesh?(n=nn,i=e.mesh,a=an[e.filter]):Object(Ut.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):Object(Ut.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}on.responseType="json";var sn={dsv:Ve,csv:Ye(","),tsv:Ye("\t"),json:$e.a,topojson:on};function un(t,e){return arguments.length>1?(sn[t]=e,this):Object(Ut.v)(sn,t)?sn[t]:null}function cn(t){var e=un(t);return e&&e.responseType||"text"}var ln=new Date,fn=new Date;function hn(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return s},i.filter=function(n){return hn((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return ln.setTime(+e),fn.setTime(+r),t(ln),t(fn),Math.floor(n(ln,fn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}var dn=6e4,pn=6048e5;function vn(t){return hn((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/pn}))}var gn=vn(0),mn=vn(1),yn=vn(2),bn=vn(3),_n=vn(4),wn=vn(5),xn=vn(6),kn=(gn.range,mn.range,yn.range,bn.range,_n.range,wn.range,xn.range,hn((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),En=kn;kn.range;function Sn(t){return hn((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dn)/pn}))}var On=Sn(0),An=Sn(1),Tn=Sn(2),Cn=Sn(3),jn=Sn(4),Dn=Sn(5),Rn=Sn(6),Mn=(On.range,An.range,Tn.range,Cn.range,jn.range,Dn.range,Rn.range,hn((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*dn)/864e5}),(function(t){return t.getDate()-1}))),Pn=Mn,Fn=(Mn.range,hn((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()})));Fn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?hn((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Nn=Fn,Ln=(Fn.range,hn((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Ln.every=function(t){return isFinite(t=Math.floor(t))&&t>0?hn((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var In=Ln;Ln.range;function Bn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Un(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function zn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var qn,Wn,Hn,Gn,Yn,Vn={"-":"",_:" ",0:"0"},$n=/^\s*\d+/,Xn=/^%/,Kn=/[\\^$*+?|[\]().{}]/g;function Jn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Zn(t){return t.replace(Kn,"\\$&")}function Qn(t){return new RegExp("^(?:"+t.map(Zn).join("|")+")","i")}function tr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function er(t,e,n){var r=$n.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function nr(t,e,n){var r=$n.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function rr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ir(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ar(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function or(t,e,n){var r=$n.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function sr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ur(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function lr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function fr(t,e,n){var r=$n.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function hr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function dr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function pr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function vr(t,e,n){var r=$n.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function gr(t,e,n){var r=$n.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mr(t,e,n){var r=Xn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function yr(t,e,n){var r=$n.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function br(t,e,n){var r=$n.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function _r(t,e){return Jn(t.getDate(),e,2)}function wr(t,e){return Jn(t.getHours(),e,2)}function xr(t,e){return Jn(t.getHours()%12||12,e,2)}function kr(t,e){return Jn(1+Pn.count(Nn(t),t),e,3)}function Er(t,e){return Jn(t.getMilliseconds(),e,3)}function Sr(t,e){return Er(t,e)+"000"}function Or(t,e){return Jn(t.getMonth()+1,e,2)}function Ar(t,e){return Jn(t.getMinutes(),e,2)}function Tr(t,e){return Jn(t.getSeconds(),e,2)}function Cr(t){var e=t.getDay();return 0===e?7:e}function jr(t,e){return Jn(On.count(Nn(t),t),e,2)}function Dr(t,e){var n=t.getDay();return t=n>=4||0===n?jn(t):jn.ceil(t),Jn(jn.count(Nn(t),t)+(4===Nn(t).getDay()),e,2)}function Rr(t){return t.getDay()}function Mr(t,e){return Jn(An.count(Nn(t),t),e,2)}function Pr(t,e){return Jn(t.getFullYear()%100,e,2)}function Fr(t,e){return Jn(t.getFullYear()%1e4,e,4)}function Nr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jn(e/60|0,"0",2)+Jn(e%60,"0",2)}function Lr(t,e){return Jn(t.getUTCDate(),e,2)}function Ir(t,e){return Jn(t.getUTCHours(),e,2)}function Br(t,e){return Jn(t.getUTCHours()%12||12,e,2)}function Ur(t,e){return Jn(1+En.count(In(t),t),e,3)}function zr(t,e){return Jn(t.getUTCMilliseconds(),e,3)}function qr(t,e){return zr(t,e)+"000"}function Wr(t,e){return Jn(t.getUTCMonth()+1,e,2)}function Hr(t,e){return Jn(t.getUTCMinutes(),e,2)}function Gr(t,e){return Jn(t.getUTCSeconds(),e,2)}function Yr(t){var e=t.getUTCDay();return 0===e?7:e}function Vr(t,e){return Jn(gn.count(In(t),t),e,2)}function $r(t,e){var n=t.getUTCDay();return t=n>=4||0===n?_n(t):_n.ceil(t),Jn(_n.count(In(t),t)+(4===In(t).getUTCDay()),e,2)}function Xr(t){return t.getUTCDay()}function Kr(t,e){return Jn(mn.count(In(t),t),e,2)}function Jr(t,e){return Jn(t.getUTCFullYear()%100,e,2)}function Zr(t,e){return Jn(t.getUTCFullYear()%1e4,e,4)}function Qr(){return"+0000"}function ti(){return"%"}function ei(t){return+t}function ni(t){return Math.floor(+t/1e3)}function ri(t){return qn=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,c=Qn(i),l=tr(i),f=Qn(a),h=tr(a),d=Qn(o),p=tr(o),v=Qn(s),g=tr(s),m=Qn(u),y=tr(u),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:_r,e:_r,f:Sr,H:wr,I:xr,j:kr,L:Er,m:Or,M:Ar,p:function(t){return i[+(t.getHours()>=12)]},Q:ei,s:ni,S:Tr,u:Cr,U:jr,V:Dr,w:Rr,W:Mr,x:null,X:null,y:Pr,Y:Fr,Z:Nr,"%":ti},_={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Lr,e:Lr,f:qr,H:Ir,I:Br,j:Ur,L:zr,m:Wr,M:Hr,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:ei,s:ni,S:Gr,u:Yr,U:Vr,V:$r,w:Xr,W:Kr,x:null,X:null,y:Jr,Y:Zr,Z:Qr,"%":ti},w={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return E(t,e,n,r)},d:lr,e:lr,f:gr,H:hr,I:hr,j:fr,L:vr,m:cr,M:dr,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:yr,s:br,S:pr,u:nr,U:rr,V:ir,w:er,W:ar,x:function(t,e,r){return E(t,n,e,r)},X:function(t,e,n){return E(t,r,e,n)},y:sr,Y:or,Z:ur,"%":mr};function x(t,e){return function(n){var r,i,a,o=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=Vn[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function k(t,e){return function(n){var r,i,a=zn(1900);if(E(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Un(zn(a.y))).getUTCDay(),r=i>4||0===i?mn.ceil(r):mn(r),r=En.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=e(zn(a.y))).getDay(),r=i>4||0===i?An.ceil(r):An(r),r=Pn.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Un(zn(a.y)).getUTCDay():e(zn(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Un(a)):e(a)}}function E(t,e,n,r){for(var i,a,o=0,s=e.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in Vn?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),_.x=x(n,_),_.X=x(r,_),_.c=x(e,_),{format:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",Bn);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,Un);return e.toString=function(){return t},e}}}(t),Wn=qn.format,Hn=qn.parse,Gn=qn.utcFormat,Yn=qn.utcParse,qn}ri({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||Gn("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Yn("%Y-%m-%dT%H:%M:%S.%LZ");var ii=function(t,e){return function(n){return{options:n||{},sanitize:we,load:be,fileAccess:!!e,file:ke(e),http:Oe(t)}}}("undefined"!==typeof fetch&&fetch,null),ai=function(t,e,n){var r=un((e=e||{}).type||"json");return r||Object(Ut.n)("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n){if(!t.length)return;n=n||Hn;var r,i,a,o,s,u,c,l=t.columns||Object.keys(t[0]);"auto"===e&&(e=Re(t,l));for(l=Object.keys(e),r=l.map((function(t){var r,i,a=e[t];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Yn(i):n(i);if(!Ce[a])throw Error("Illegal format pattern: "+t+":"+a);return Ce[a]})),o=0,u=t.length,c=l.length;o<u;++o)for(i=t[o],s=0;s<c;++s)a=l[s],i[a]=r[s](i[a])}(t,e.parse,n),Object(Ut.v)(t,"columns")&&delete t.columns,t};function oi(){return(oi=Object(qt.a)(E.a.mark((function t(e,n){var r,i,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,i=0,t.prev=2,t.next=5,r.loader().load(e,{context:"dataflow",response:cn(n&&n.type)});case 5:a=t.sent;try{a=ai(a,n)}catch(o){i=-2,r.warn("Data ingestion failed",e,o)}t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),i=-1,r.warn("Loading failed",e,t.t0);case 13:return t.abrupt("return",{data:a,status:i});case 14:case"end":return t.stop()}}),t,this,[[2,9]])})))).apply(this,arguments)}function si(){return(si=Object(qt.a)(E.a.mark((function t(e,n,r){var i,a,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=(i=this)._pending||ui(i)).requests+=1,t.next=4,i.request(n,r);case 4:return o=t.sent,i.pulse(e,i.changeset().remove(Ut.eb).insert(o.data||[])),a.done(),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function ui(t){var e,n=new Promise((function(t){e=t}));return n.requests=0,n.done=function(){0===--n.requests&&(t._pending=null,e(t))},t._pending=n}var ci={skip:!0};function li(t,e,n,r,i,a){var o,s,u=Object(Ut.o)({},a,ci);Object(Ut.D)(n)||(n=Object(Ut.l)(n)),void 0===r?o=function(e){return t.touch(n(e))}:Object(Ut.D)(r)?(s=new ue(null,r,i,!1),o=function(e){s.evaluate(e);var r=n(e),i=s.value;ee(i)?t.pulse(r,i,a):t.update(r,i,u)}):o=function(e){return t.update(n(e),r,u)},e.apply(o)}function fi(t,e,n,r,i,a){if(void 0===r)e.targets().add(n);else{var o=a||{},s=new ue(null,function(t,e){return e=Object(Ut.D)(e)?e:Object(Ut.l)(e),t?function(n,r){var i=e(n,r);return t.skip()||(t.skip(i!==this.value).value=i),i}:e}(n,r),i,!1);s.modified(o.force),s.rank=e.rank,e.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),t.connect(n,[s]))}}var hi={};function di(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var pi=di.prototype;function vi(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function gi(t,e){var n=[];return Object(Ut.gb)(t,e,(function(t){n.push(t)})),n}function mi(t,e){var n={};return t.visit(e,(function(t){n[$t(t)]=1})),function(t){return n[$t(t)]?null:t}}function yi(t,e,n,r){var i,a,o,s,u,c=this,l=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,o=0,s=n.length;o<s;++o)if((i=n[o]).stamp===e){if(i.fields)for(u in a=c.fields||(c.fields={}),i.fields)a[u]=1;i.changed(c.ADD)&&(l|=c.ADD),i.changed(c.REM)&&(l|=c.REM),i.changed(c.MOD)&&(l|=c.MOD)}this.changes=l}pi.StopPropagation=hi,pi.ADD=1,pi.REM=2,pi.MOD=4,pi.ADD_REM=3,pi.ADD_MOD=5,pi.ALL=7,pi.REFLOW=8,pi.SOURCE=16,pi.NO_SOURCE=32,pi.NO_FIELDS=64,pi.fork=function(t){return new di(this.dataflow).init(this,t)},pi.clone=function(){var t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},pi.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?((t=new di(this.dataflow).init(this)).add=t.source,t):t},pi.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source),n},pi.runAfter=function(t){this.dataflow.runAfter(t)},pi.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},pi.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,mi(this,1))),this},pi.modifies=function(t){var e=Object(Ut.i)(t),n=this.fields||(this.fields={});return e.forEach((function(t){n[t]=!0})),this},pi.modified=function(t,e){var n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?Object(Ut.A)(t)?t.some((function(t){return n[t]})):n[t]:!!n)},pi.filter=function(t,e){var n=this;return 1&t&&(n.addF=vi(n.addF,e)),2&t&&(n.remF=vi(n.remF,e)),4&t&&(n.modF=vi(n.modF,e)),16&t&&(n.srcF=vi(n.srcF,e)),n},pi.materialize=function(t){var e=this;return 1&(t=t||7)&&e.addF&&(e.add=gi(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=gi(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=gi(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},pi.visit=function(t,e){var n,r,i=this,a=e;return 16&t?(Object(Ut.gb)(i.source,i.srcF,a),i):(1&t&&Object(Ut.gb)(i.add,i.addF,a),2&t&&Object(Ut.gb)(i.rem,i.remF,a),4&t&&Object(Ut.gb)(i.mod,i.modF,a),8&t&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(Ut.gb)(n,mi(i,5),a):Object(Ut.gb)(n,i.srcF,a))),i)};var bi=Object(Ut.y)(yi,di);function _i(){return(_i=Object(qt.a)(E.a.mark((function t(e,n,r){var i,a,o,s,u,c,l,f,h,d;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(i=this).logLevel(),!i._pulse){t.next=3;break}return t.abrupt("return",xi(i));case 3:if(!i._pending){t.next=6;break}return t.next=6,i._pending;case 6:if(!n){t.next=9;break}return t.next=9,Wt(i,n);case 9:if(i._touched.length){t.next=12;break}return i.info("Dataflow invoked, but nothing to do."),t.abrupt("return",i);case 12:o=++i._clock,s=0,i._pulse=new di(i,o,e),a>=Ut.c&&(l=Date.now(),i.debug("-- START PROPAGATION ("+o+") -----")),i._touched.forEach((function(t){return i._enqueue(t,!0)})),i._touched=zt(Ut.w),t.prev=17;case 18:if(!(i._heap.size()>0)){t.next=33;break}if((u=i._heap.pop()).rank===u.qrank){t.next=23;break}return i._enqueue(u,!0),t.abrupt("continue",18);case 23:if(!(c=u.run(i._getPulse(u,e))).then){t.next=28;break}return t.next=27,c;case 27:c=t.sent;case 28:a>=Ut.a&&i.debug(u.id,c===hi?"STOP":c,u),c!==hi&&u._targets&&u._targets.forEach((function(t){return i._enqueue(t)})),++s,t.next=18;break;case 33:t.next=39;break;case 35:t.prev=35,t.t0=t.catch(17),i._heap.clear(),f=t.t0;case 39:if(i._input={},i._pulse=null,a>=Ut.c&&(l=Date.now()-l,i.info("> Pulse "+o+": "+s+" operators; "+l+"ms")),f&&(i._postrun=[],i.error(f)),!i._postrun.length){t.next=53;break}h=i._postrun.sort((function(t,e){return e.priority-t.priority})),i._postrun=[],d=0;case 47:if(!(d<h.length)){t.next=53;break}return t.next=50,Wt(i,h[d].callback);case 50:++d,t.next=47;break;case 53:if(!r){t.next=56;break}return t.next=56,Wt(i,r);case 56:return t.abrupt("return",i);case 57:case"end":return t.stop()}}),t,this,[[17,35]])})))).apply(this,arguments)}function wi(){return(wi=Object(qt.a)(E.a.mark((function t(e,n,r){var i,a=this;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._running){t.next=5;break}return t.next=3,this._running;case 3:t.next=0;break;case 5:return i=function(){return a._running=null},(this._running=this.evaluate(e,n,r)).then(i,i),t.abrupt("return",this._running);case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function xi(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}bi.fork=function(t){var e=new di(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,(function(t){return e.add.push(t)})),t&e.REM&&this.visit(e.REM,(function(t){return e.rem.push(t)})),t&e.MOD&&this.visit(e.MOD,(function(t){return e.mod.push(t)}))),e},bi.changed=function(t){return this.changes&t},bi.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?Object(Ut.A)(t)?t.some((function(t){return n[t]})):n[t]:0},bi.filter=function(){Object(Ut.n)("MultiPulse does not support filtering.")},bi.materialize=function(){Object(Ut.n)("MultiPulse does not support materialization.")},bi.visit=function(t,e){var n=this,r=n.pulses,i=r.length,a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n};var ki={skip:!1,force:!1};function Ei(t){var e=[];return{clear:function(){return e=[]},size:function(){return e.length},peek:function(){return e[0]},push:function(n){return e.push(n),Si(e,0,e.length-1,t)},pop:function(){var n,r=e.pop();return e.length?(n=e[0],e[0]=r,function(t,e,n){var r,i=e,a=t.length,o=t[e],s=1+(e<<1);for(;s<a;)(r=s+1)<a&&n(t[s],t[r])>=0&&(s=r),t[e]=t[s],s=1+((e=s)<<1);t[e]=o,Si(t,i,e,n)}(e,0,t)):n=r,n}}}function Si(t,e,n,r){var i,a,o;for(i=t[n];n>e&&r(i,a=t[o=n-1>>1])<0;)t[n]=a,n=o;return t[n]=i}function Oi(){this.logger(Object(Ut.K)()),this.logLevel(Ut.b),this._clock=0,this._rank=0;try{this._loader=ii()}catch(t){}this._touched=zt(Ut.w),this._input={},this._pulse=null,this._heap=Ei((function(t,e){return t.qrank-e.qrank})),this._postrun=[]}var Ai=Oi.prototype;function Ti(t){return function(){return this._log[t].apply(this,arguments)}}function Ci(t,e){ue.call(this,t,null,e)}Ai.stamp=function(){return this._clock},Ai.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},Ai.cleanThreshold=1e4,Ai.add=function(t,e,n,r){var i,a=1;return t instanceof ue?i=t:t&&t.prototype instanceof ue?i=new t:Object(Ut.D)(t)?i=new ue(null,t):(a=0,i=new ue(t,e)),this.rank(i),a&&(r=n,n=e),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},Ai.connect=function(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)},Ai.rank=function(t){t.rank=++this._rank},Ai.rerank=function(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&Object(Ut.n)("Cycle detected in dataflow graph.")},Ai.pulse=function(t,e,n){this.touch(t,n||ki);var r=new di(this,this._clock+(this._pulse?0:1)),i=t.pulse&&t.pulse.source||[];return r.target=t,this._input[t.id]=e.pulse(r,i),this},Ai.touch=function(t,e){var n=e||ki;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},Ai.update=function(t,e,n){var r=n||ki;return(t.set(e)||r.force)&&this.touch(t,r),this},Ai.changeset=ne,Ai.ingest=function(t,e,n){return this.pulse(t,this.changeset().insert(ai(e,n)))},Ai.parse=ai,Ai.preload=function(t,e,n){return si.apply(this,arguments)},Ai.request=function(t,e){return oi.apply(this,arguments)},Ai.events=function(t,e,n,r){for(var i,a=this,o=de(n,r),s=function(t){t.dataflow=a;try{o.receive(t)}catch(e){a.error(e)}finally{a.run()}},u=0,c=(i="string"===typeof t&&"undefined"!==typeof document?document.querySelectorAll(t):Object(Ut.i)(t)).length;u<c;++u)i[u].addEventListener(e,s);return o},Ai.on=function(t,e,n,r,i){return(t instanceof ue?fi:li)(this,t,e,n,r,i),this},Ai.evaluate=function(t,e,n){return _i.apply(this,arguments)},Ai.run=function(t,e,n){return this._pulse?xi(this):(this.evaluate(t,e,n),this)},Ai.runAsync=function(t,e,n){return wi.apply(this,arguments)},Ai.runAfter=function(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(r){this.error(r)}},Ai._enqueue=function(t,e){var n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},Ai._getPulse=function(t,e){var n=t.source,r=this._clock;return n&&Object(Ut.A)(n)?new yi(this,r,n.map((function(t){return t.pulse})),e):this._input[t.id]||function(t,e){if(e&&e.stamp===t.stamp)return e;t=t.fork(),e&&e!==hi&&(t.source=e.source);return t}(this._pulse,n&&n.pulse)},Ai.logger=function(t){return arguments.length?(this._log=t,this):this._log},Ai.error=Ti("error"),Ai.warn=Ti("warn"),Ai.info=Ti("info"),Ai.debug=Ti("debug"),Ai.logLevel=Ti("level");var ji=Object(Ut.y)(Ci,ue);ji.run=function(t){var e,n=this;return t.stamp<this.stamp?t.StopPropagation:(this.skip()?this.skip(!1):e=this.evaluate(t),(e=e||t).then?e=e.then((function(t){return n.pulse=t})):e!==t.StopPropagation&&(this.pulse=e),e)},ji.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},ji.transform=function(){};var Di={};function Ri(t){var e=Mi(t);return e&&e.Definition||null}function Mi(t){return t=t&&t.toLowerCase(),Object(Ut.v)(Di,t)?Di[t]:null}function Pi(t){return t&&t.length?1===t.length?t[0]:(e=t,function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}):function(){return""};var e}function Fi(t,e,n){return n||t+(e?"_"+e:"")}var Ni={values:Bi({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Bi({name:"count",set:"cell.num"}),__count__:Bi({name:"count",set:"this.missing + this.valid"}),missing:Bi({name:"missing",set:"this.missing"}),valid:Bi({name:"valid",set:"this.valid"}),sum:Bi({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Bi({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:Bi({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:Bi({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:Bi({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:Bi({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:Bi({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:Bi({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:Bi({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Bi({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Bi({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Bi({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Bi({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Bi({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Bi({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Bi({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Bi({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Bi({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Li=Object.keys(Ni);function Ii(t,e){return Ni[t](e)}function Bi(t){return function(e){var n=Object(Ut.o)({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function Ui(t,e){return t.idx-e.idx}function zi(t,e){var n=e||Ut.x,r=function(t,e){var n,r=t.reduce((function t(n,r){function i(e){n[e]||t(n,n[e]=Ni[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),n}),t.reduce((function(t,e){return t[e.name]=e,t}),{})),i=[];for(n in r)i.push(r[n]);return i.sort(Ui)}(t,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",s="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",u="var cell = this.cell;";return r.forEach((function(t){i+=t.init,o+=t.add,s+=t.rem})),t.slice().sort(Ui).forEach((function(t){u+="t["+Object(Ut.X)(t.out)+"]="+t.set+";"})),u+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",s),a.prototype.set=Function("t",u),a.prototype.get=n,a.fields=t.map((function(t){return t.out})),a}var qi=function(t){var e,n,r,i,a,o,s,u,c=t.maxbins||20,l=t.base||10,f=Math.log(l),h=t.divide||[5,2],d=t.extent[0],p=t.extent[1],v=t.span||p-d||Math.abs(d)||1;if(t.step)e=t.step;else if(t.steps){for(a=v/c,o=0,s=t.steps.length;o<s&&t.steps[o]<a;++o);e=t.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(c)/f),r=t.minstep||0,e=Math.max(r,Math.pow(l,Math.round(Math.log(v)/f)-n));Math.ceil(v/e)>c;)e*=l;for(o=0,s=h.length;o<s;++o)(a=e/h[o])>=r&&v/a<=c&&(e=a)}return i=(a=Math.log(e))>=0?0:1+~~(-a/f),u=Math.pow(l,-i-1),(t.nice||void 0===t.nice)&&(d=d<(a=Math.floor(d/e+u)*e)?a-e:a,p=Math.ceil(p/e)*e),{start:d,stop:p===d?d+e:p,step:e}},Wi=E.a.mark(Hi);function Hi(t,e){var n,r,i,a,o,s,u,c,l,f,h,d,p;return E.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(void 0!==e){v.next=30;break}n=!0,r=!1,i=void 0,v.prev=4,a=t[Symbol.iterator]();case 6:if(n=(o=a.next()).done){v.next=14;break}if(!(null!=(s=o.value)&&(s=+s)>=s)){v.next=11;break}return v.next=11,s;case 11:n=!0,v.next=6;break;case 14:v.next=20;break;case 16:v.prev=16,v.t0=v.catch(4),r=!0,i=v.t0;case 20:v.prev=20,v.prev=21,n||null==a.return||a.return();case 23:if(v.prev=23,!r){v.next=26;break}throw i;case 26:return v.finish(23);case 27:return v.finish(20);case 28:v.next=58;break;case 30:u=-1,c=!0,l=!1,f=void 0,v.prev=34,h=t[Symbol.iterator]();case 36:if(c=(d=h.next()).done){v.next=44;break}if(p=d.value,!(null!=(p=e(p,++u,t))&&(p=+p)>=p)){v.next=41;break}return v.next=41,p;case 41:c=!0,v.next=36;break;case 44:v.next=50;break;case 46:v.prev=46,v.t1=v.catch(34),l=!0,f=v.t1;case 50:v.prev=50,v.prev=51,c||null==h.return||h.return();case 53:if(v.prev=53,!l){v.next=56;break}throw f;case 56:return v.finish(53);case 57:return v.finish(50);case 58:case"end":return v.stop()}}),Wi,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}var Gi=Math.random;function Yi(t){Gi=t}var Vi=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},$i=E.a.mark(Ki),Xi=function(t){return null===t?NaN:+t};function Ki(t,e){var n,r,i,a,o,s,u,c,l,f,h,d,p;return E.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(void 0!==e){v.next=30;break}n=!0,r=!1,i=void 0,v.prev=4,a=t[Symbol.iterator]();case 6:if(n=(o=a.next()).done){v.next=14;break}if(!(null!=(s=o.value)&&(s=+s)>=s)){v.next=11;break}return v.next=11,s;case 11:n=!0,v.next=6;break;case 14:v.next=20;break;case 16:v.prev=16,v.t0=v.catch(4),r=!0,i=v.t0;case 20:v.prev=20,v.prev=21,n||null==a.return||a.return();case 23:if(v.prev=23,!r){v.next=26;break}throw i;case 26:return v.finish(23);case 27:return v.finish(20);case 28:v.next=58;break;case 30:u=-1,c=!0,l=!1,f=void 0,v.prev=34,h=t[Symbol.iterator]();case 36:if(c=(d=h.next()).done){v.next=44;break}if(p=d.value,!(null!=(p=e(p,++u,t))&&(p=+p)>=p)){v.next=41;break}return v.next=41,p;case 41:c=!0,v.next=36;break;case 44:v.next=50;break;case 46:v.prev=46,v.t1=v.catch(34),l=!0,f=v.t1;case 50:v.prev=50,v.prev=51,c||null==h.return||h.return();case 53:if(v.prev=53,!l){v.next=56;break}throw f;case 56:return v.finish(53);case 57:return v.finish(50);case 58:case"end":return v.stop()}}),$i,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}function Ji(t,e,n){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xi;if(!(r=t.length))return;if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}(Float64Array.from(Ki(t,n)).sort(Vi),e)}var Zi=function(t,e,n,r){if(!t.length)return[void 0,void 0];var i,a,o,s,u=Float64Array.from(Hi(t,r)),c=u.length,l=e;for(o=0,s=Array(l);o<l;++o){for(i=0,a=0;a<c;++a)i+=u[~~(Gi()*c)];s[o]=i/c}return s.sort(Vi),[Ji(s,n/2),Ji(s,1-n/2)]},Qi=function(t,e){var n=Float64Array.from(Hi(t,e));return n.sort(Vi),[Ji(n,.25),Ji(n,.5),Ji(n,.75)]},ta=function(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}},ea=function(t,e){null==e&&(e=t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(i=r-(n=t||0),a):n},a.max=function(t){return arguments.length?(i=(r=t||0)-n,a):r},a.sample=function(){return n+Math.floor(i*Gi())},a.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},a.cdf=function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},a.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN},a.min(t).max(e)},na=function(t,e){var n,r,i=NaN,a={mean:function(t){return arguments.length?(n=t||0,i=NaN,a):n},stdev:function(t){return arguments.length?(r=null==t?1:t,i=NaN,a):r},sample:function(){var t,e,a=0,o=0;if(i===i)return a=i,i=NaN,a;do{t=(a=2*Gi()-1)*a+(o=2*Gi()-1)*o}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),i=n+o*e*r,n+a*e*r},pdf:function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*e},cdf:function(t){var e,i=(t-n)/r,a=Math.abs(i);if(a>37)e=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(e=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),e/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):e=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-e:e},icdf:function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(e,2))/2,o=Math.log(1-e*e)/i,s=(e>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+r*Math.SQRT2*s}};return a.mean(t).stdev(e)};var ra=function(t,e){var n=na(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(!(e=n)&&t&&(e=ia(t)),r):e},r.sample=function(){return t[~~(Gi()*i)]+e*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-t[o])/e);return a/e/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-t[o])/e);return a/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)};function ia(t){var e=t.length,n=Qi(t),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(function(t,e){var n,r=0,i=0,a=0;if(void 0===e){var o=!0,s=!1,u=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;null!=f&&(f=+f)>=f&&(a+=(n=f-i)*(f-(i+=n/++r)))}}catch(b){s=!0,u=b}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}else{var h=-1,d=!0,p=!1,v=void 0;try{for(var g,m=t[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var y=g.value;null!=(y=e(y,++h,t))&&(y=+y)>=y&&(a+=(n=y-i)*(y-(i+=n/++r)))}}catch(b){p=!0,v=b}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}if(r>1)return a/(r-1)}(t)),r)*Math.pow(e,-.2)}var aa=function(t,e){var n,r={},i=0;function a(t){var e,n=[],r=0;for(e=0;e<i;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<i;++e)n[e]/=r;return n}return r.weights=function(t){return arguments.length?(n=a(e=t||[]),r):e},r.distributions=function(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},r.sample=function(){for(var e=Gi(),r=t[i-1],a=n[0],o=0;o<i-1;a+=n[++o])if(e<a){r=t[o];break}return r.sample()},r.pdf=function(e){for(var r=0,a=0;a<i;++a)r+=n[a]*t[a].pdf(e);return r},r.cdf=function(e){for(var r=0,a=0;a<i;++a)r+=n[a]*t[a].cdf(e);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(t).weights(e)},oa=function(t,e){null==e&&(e=null==t?1:t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(i=r-(n=t||0),a):n},a.max=function(t){return arguments.length?(i=(r=t||0)-n,a):r},a.sample=function(){return n+i*Gi()},a.pdf=function(t){return t>=n&&t<=r?1/i:0},a.cdf=function(t){return t<n?0:t>r?1:(t-n)/i},a.icdf=function(t){return t>=0&&t<=1?n+t*i:NaN},a.min(t).max(e)},sa=function(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i;return[e-a*t,a]};function ua(t,e,n,r){t=t.filter((function(t){var r=e(t),i=n(t);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&t.sort((function(t,n){return e(t)-e(n)}));var i=new Float64Array(t.length),a=new Float64Array(t.length),o=0,s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;i[o]=e(h),a[o]=n(h),++o}}catch(d){u=!0,c=d}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return[i,a]}function ca(t,e,n,r){var i,a,o=-1,s=-1,u=!0,c=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;i=e(d,++o,t),a=n(d,o,t),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++s)}}catch(p){c=!0,l=p}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}var la=function(t,e,n,r,i){var a=0,o=0;return ca(t,e,n,(function(t,e){var n=e-i(t),s=e-r;a+=n*n,o+=s*s})),1-a/o},fa=function(t,e,n){var r=0,i=0,a=0,o=0,s=0;ca(t,e,n,(function(t,e){r+=t,i+=e,a+=t*e,o+=t*t,++s}));var u=sa(r/s,i/s,a/s,o/s),c=function(t){return u[0]+u[1]*t};return{coef:u,predict:c,rSquared:la(t,e,n,i/s,c)}},ha=function(t,e,n){var r=0,i=0,a=0,o=0,s=0;ca(t,e,n,(function(t,e){t=Math.log(t),r+=t,i+=e,a+=t*e,o+=t*t,++s}));var u=sa(r/s,i/s,a/s,o/s),c=function(t){return u[0]+u[1]*Math.log(t)};return{coef:u,predict:c,rSquared:la(t,e,n,i/s,c)}},da=function(t,e,n){var r=0,i=0,a=0,o=0,s=0,u=0;ca(t,e,n,(function(t,e){var n=Math.log(e),c=t*e;r+=e,a+=c,s+=t*c,i+=e*n,o+=c*n,++u}));var c=sa(a/r,i/r,o/r,s/r),l=function(t){return c[0]*Math.exp(c[1]*t)};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:la(t,e,n,r/u,l)}},pa=function(t,e,n){var r=0,i=0,a=0,o=0,s=0,u=0;ca(t,e,n,(function(t,e){var n=Math.log(t),c=Math.log(e);r+=n,i+=c,a+=n*c,o+=n*n,s+=e,++u}));var c=sa(r/u,i/u,a/u,o/u),l=function(t){return c[0]*Math.pow(t,c[1])};return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:la(t,e,n,s/u,l)}},va=function(t,e,n){var r=0,i=0,a=0,o=0,s=0,u=0,c=0,l=0;ca(t,e,n,(function(t,e){var n=t*t;r+=t,i+=e,a+=n,o+=n*t,s+=n*n,u+=t*e,c+=n*e,++l}));var f=a-r*r/l,h=o-a*r/l,d=s-a*a/l,p=f*d-h*h,v=((c-=a*(i/=l))*f-(u-=r*i)*h)/p,g=(u*d-c*h)/p,m=i-g*(r/l)-v*(a/l),y=function(t){return v*t*t+g*t+m};return{coef:[m,g,v],predict:y,rSquared:la(t,e,n,i,y)}},ga=n(11),ma=function(t,e,n,r){if(1===r)return fa(t,e,n);if(2===r)return va(t,e,n);var i,a,o,s,u,c=ua(t,e,n),l=Object(ga.a)(c,2),f=l[0],h=l[1],d=f.length,p=[],v=[],g=r+1,m=0;for(i=0;i<d;++i)m+=h[i];for(i=0;i<g;++i){for(o=0,s=0;o<d;++o)s+=Math.pow(f[o],i)*h[o];for(p.push(s),u=new Float64Array(g),a=0;a<g;++a){for(o=0,s=0;o<d;++o)s+=Math.pow(f[o],i+a);u[a]=s}v.push(u)}v.push(p);var y=function(t){var e,n,r,i,a,o=t.length-1,s=[];for(e=0;e<o;++e){for(i=e,n=e+1;n<o;++n)Math.abs(t[e][n])>Math.abs(t[e][i])&&(i=n);for(r=e;r<o+1;++r)a=t[r][e],t[r][e]=t[r][i],t[r][i]=a;for(n=e+1;n<o;++n)for(r=o;r>=e;r--)t[r][n]-=t[r][e]*t[e][n]/t[e][e]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=t[r][n]*s[r];s[n]=(t[o][n]-a)/t[n][n]}return s}(v),b=function(t){for(var e=0,n=0,r=y.length;n<r;++n)e+=y[n]*Math.pow(t,n);return e};return{coef:y,predict:b,rSquared:la(t,e,n,m/d,b)}};function ya(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vi;r>n;){if(r-n>600){var a=r-n+1,o=e-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);ya(t,e,Math.max(n,Math.floor(e-o*u/a+c)),Math.min(r,Math.floor(e+(a-o)*u/a+c)),i)}var l=t[e],f=n,h=r;for(ba(t,n,e),i(t[r],l)>0&&ba(t,n,r);f<h;){for(ba(t,f,h),++f,--h;i(t[f],l)<0;)++f;for(;i(t[h],l)>0;)--h}0===i(t[n],l)?ba(t,n,h):ba(t,++h,r),h<=e&&(n=h+1),e<=h&&(r=h-1)}return t}function ba(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}var _a=function(t,e){if((t=Float64Array.from(Ki(t,e))).length){var n=t.length,r=n>>1;return ya(t,r-1,0),0===(1&n)&&ya(t,r,r),Ji(t,.5)}},wa=function(t,e,n,r){for(var i=ua(t,e,n,!0),a=Object(ga.a)(i,2),o=a[0],s=a[1],u=o.length,c=Math.max(2,~~(r*u)),l=new Float64Array(u),f=new Float64Array(u),h=new Float64Array(u).fill(1),d=-1;++d<=2;){for(var p=[0,c-1],v=0;v<u;++v){for(var g=o[v],m=p[0],y=p[1],b=g-o[m]>o[y]-g?m:y,_=0,w=0,x=0,k=0,E=0,S=1/Math.abs(o[b]-g||1),O=m;O<=y;++O){var A=o[O],T=s[O],C=xa(Math.abs(g-A)*S)*h[O],j=A*C;_+=C,w+=j,x+=T*C,k+=T*j,E+=A*j}var D=sa(w/_,x/_,k/_,E/_),R=Object(ga.a)(D,2),M=R[0],P=R[1];l[v]=M+P*g,f[v]=Math.abs(s[v]-l[v]),ka(o,v+1,p)}if(2===d)break;var F=_a(f);if(Math.abs(F)<1e-12)break;for(var N,L,I=0;I<u;++I)N=f[I]/(6*F),h[I]=N>=1?1e-12:(L=1-N*N)*L}return function(t,e){for(var n,r=t.length,i=[],a=0,o=0,s=[];a<r;++a)n=t[a],s[0]===n?s[1]+=(e[a]-s[1])/++o:(o=0,s=[n,e[a]],i.push(s));return i}(o,l)};function xa(t){return(t=1-t*t*t)*t*t}function ka(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}var Ea=.1*Math.PI/180,Sa=function(t,e,n,r){n=n||25,r=Math.max(n,r||200);var i=function(e){return[e,t(e)]},a=e[0],o=e[1],s=o-a,u=s/r,c=[i(a)],l=[];if(n===r){for(var f=1;f<r;++f)c.push(i(a+f/n*s));return c.push(i(o)),c}l.push(i(o));for(var h=n;--h>0;)l.push(i(a+h/n*s));for(var d=c[0],p=l[l.length-1];p;){var v=i((d[0]+p[0])/2);v[0]-d[0]>=u&&Oa(d,v,p)>Ea?l.push(v):(d=p,c.push(p),l.pop()),p=l[l.length-1]}return c};function Oa(t,e,n){var r=Math.atan2(n[1]-t[1],n[0]-t[0]),i=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(r-i)}function Aa(t){this._key=t?Object(Ut.t)(t):$t,this.reset()}var Ta=Aa.prototype;function Ca(t){Ci.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ta.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Ta.add=function(t){this._add.push(t)},Ta.rem=function(t){this._rem.push(t)},Ta.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,s=i.length,u=Array(o-s),c={};for(t=0;t<s;++t)c[a(i[t])]=1;for(t=0,e=0;t<o;++t)c[a(n=r[t])]?c[a(n)]=0:u[e++]=n;return this._rem=[],this._add=u},Ta.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},a=0;--r>=0;)e=t(n[r])+"",Object(Ut.v)(i,e)||(i[e]=1,++a);return a},Ta.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=Object(Ut.q)(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},Ta.argmin=function(t){return this.extent(t)[0]||{}},Ta.argmax=function(t){return this.extent(t)[1]||{}},Ta.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):void 0},Ta.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):void 0},Ta.quartile=function(t){return this._get===t&&this._q||(this._q=Qi(this.values(),t),this._get=t),this._q},Ta.q1=function(t){return this.quartile(t)[0]},Ta.q2=function(t){return this.quartile(t)[1]},Ta.q3=function(t){return this.quartile(t)[2]},Ta.ci=function(t){return this._get===t&&this._ci||(this._ci=Zi(this.values(),1e3,.05,t),this._get=t),this._ci},Ta.ci0=function(t){return this.ci(t)[0]},Ta.ci1=function(t){return this.ci(t)[1]},Ca.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Li},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var ja=Object(Ut.y)(Ca,Ci);ja.transform=function(t,e){var n=this,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.modified();return n.stamp=r.stamp,n.value&&(i||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(t):{},e.visit(e.SOURCE,(function(t){return n.add(t)}))):(n.value=n.value||n.init(t),e.visit(e.REM,(function(t){return n.rem(t)})),e.visit(e.ADD,(function(t){return n.add(t)}))),r.modifies(n._outputs),n._drop=!1!==t.drop,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),n.changes(r)},ja.cross=function(){var t=this,e=t.value,n=t._dnames,r=n.map((function(){return{}})),i=n.length;function a(t){var e,a,o,s;for(e in t)for(o=t[e].tuple,a=0;a<i;++a)r[a][s=o[n[a]]]=s}a(t._prev),a(e),function a(o,s,u){var c,l,f=n[u],h=r[u++];for(c in h)s[f]=h[c],l=o?o+"|"+c:c,u<i?a(l,s,u):e[l]||t.cell(l,s)}("",{},0)},ja.init=function(t){var e=this._inputs=[],n=this._outputs=[],r={};function i(t){for(var n,i=Object(Ut.i)(Object(Ut.g)(t)),a=0,o=i.length;a<o;++a)r[n=i[a]]||(r[n]=1,e.push(n))}this._dims=Object(Ut.i)(t.groupby),this._dnames=this._dims.map((function(t){var e=Object(Ut.h)(t);return i(t),n.push(e),e})),this.cellkey=t.key?t.key:Pi(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var a,o,s,u,c,l,f=t.fields||[null],h=t.ops||["count"],d=t.as||[],p=f.length,v={};for(p!==h.length&&Object(Ut.n)("Unmatched number of fields and aggregate ops."),l=0;l<p;++l)a=f[l],o=h[l],null==a&&"count"!==o&&Object(Ut.n)("Null aggregate field specified."),c=Fi(o,u=Object(Ut.h)(a),d[l]),n.push(c),"count"!==o?((s=v[u])||(i(a),(s=v[u]=[]).field=a,this._measures.push(s)),"count"!==o&&(this._countOnly=!1),s.push(Ii(o,c))):this._counts.push(c);return this._measures=this._measures.map((function(t){return zi(t,t.field)})),{}},ja.cellkey=Pi(),ja.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},ja.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new Aa),n},ja.newtuple=function(t,e){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](t);return e?Qt(e.tuple,o):Kt(o)},ja.add=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(t),n=0,r=(e=a.agg).length;n<r;++n)e[n].add(e[n].get(t),t)},ja.rem=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(t),n=0,r=(e=a.agg).length;n<r;++n)e[n].rem(e[n].get(t),t)},ja.celltuple=function(t){var e,n,r,i=t.tuple,a=this._counts;for(t.store&&t.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=t.num;if(!this._countOnly)for(n=0,r=(e=t.agg).length;n<r;++n)e[n].set(i);return i},ja.changes=function(t){var e,n,r,i,a=this._adds,o=this._mods,s=this._prev,u=this._drop,c=t.add,l=t.rem,f=t.mod;if(s)for(n in s)e=s[n],u&&!e.num||l.push(e.tuple);for(r=0,i=this._alen;r<i;++r)c.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(e=o[r]).num&&u?l:f).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t};function Da(t){Ci.call(this,null,t)}Da.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Ra=Object(Ut.y)(Da,Ci);Ra.transform=function(t,e){var n,r=this._bins(t),i=r.start,a=r.step,o=t.as||["bin0","bin1"],s=o[0],u=o[1];return n=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified(Object(Ut.g)(t.field))?e.ADD_MOD:e.ADD,e.visit(n,(function(t){var e=r(t);t[s]=e,t[u]=null==e?null:i+a*(1+(e-i)/a)})),e.modifies(o)},Ra._bins=function(t){if(this.value&&!t.modified())return this.value;var e,n,r=t.field,i=qi(t),a=i.start,o=i.stop,s=i.step;null!=(e=t.anchor)&&(n=e-(a+s*Math.floor((e-a)/s)),a+=n,o+=n);var u=function(t){var e=r(t);return null==e?null:(e=Math.max(a,Math.min(+e,o-s)),a+s*Math.floor(1e-14+(e-a)/s))};return u.start=a,u.stop=o,u.step=s,this.value=Object(Ut.f)(u,Object(Ut.g)(r),t.name||"bin_"+Object(Ut.h)(r))};var Ma=function(t,e,n){var r=t,i=e||[],a=n||[],o={},s=0;return{add:function(t){a.push(t)},remove:function(t){o[r(t)]=++s},size:function(){return i.length},data:function(t,e){return s&&(i=i.filter((function(t){return!o[r(t)]})),o={},s=0),e&&t&&i.sort(t),a.length&&(i=t?Object(Ut.L)(t,i,a.sort(t)):i.concat(a),a=[]),i}}};function Pa(t){Ci.call(this,[],t)}function Fa(t){ue.call(this,null,Na,t)}function Na(t){return this.value&&!t.modified()?this.value:Object(Ut.k)(t.fields,t.orders)}function La(t){Ci.call(this,null,t)}Pa.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(Ut.y)(Pa,Ci).transform=function(t,e){var n=e.fork(e.ALL),r=Ma($t,this.value,n.materialize(n.ADD).add),i=t.sort,a=e.changed()||i&&(t.modified("sort")||e.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(te(i),a),e.source&&e.source.root&&(this.value.root=e.source.root),n},Object(Ut.y)(Fa,ue),La.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Ia=Object(Ut.y)(La,Ci);function Ba(t){Ci.call(this,null,t)}Ia.transform=function(t,e){function n(e){return function(n){for(var r,i=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(s(n),t.case,a)||[],u=0,c=i.length;u<c;++u)o.test(r=i[u])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,s=t.field,u=t.as||["text","count"],c=n((function(t){i[t]=1+(i[t]||0)})),l=n((function(t){i[t]-=1}));return r?e.visit(e.SOURCE,c):(e.visit(e.ADD,c),e.visit(e.REM,l)),this._finish(e,u)},Ia._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},Ia._finish=function(t,e){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),s=e[0],u=e[1],c=t.fork(t.NO_SOURCE|t.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=Kt({}),r[s]=n,r[u]=i,c.add.push(r)):0===i?(r&&c.rem.push(r),a[n]=null,o[n]=null):r[u]!==i&&(r[u]=i,c.mod.push(r));return c.modifies(e)},Ba.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(Ut.y)(Ba,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],a=i[0],o=i[1];return!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter")?(r&&(n.rem=r),r=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,r){for(var i,a,o=[],s={},u=t.length,c=0;c<u;++c)for(s[e]=a=t[c],i=0;i<u;++i)s[n]=t[i],r(s)&&(o.push(Kt(s)),(s={})[e]=a);return o}(r,a,o,t.filter||Ut.eb)):n.mod=r,n.source=this.value,n.modifies(i)};var Ua={kde:ra,mixture:aa,normal:na,uniform:oa},za="distributions",qa="function",Wa="field";function Ha(t){Ci.call(this,null,t)}var Ga=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Ya={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ga},{name:"weights",type:"number",array:!0}]};function Va(t){ue.call(this,null,$a,t),this.modified(!0)}function $a(t){var e=t.expr;return this.value&&!t.modified("expr")?this.value:Object(Ut.f)((function(n){return e(n,t)}),Object(Ut.g)(e),Object(Ut.h)(e))}function Xa(t){Ci.call(this,[void 0,void 0],t)}function Ka(t,e){ue.call(this,t),this.parent=e}Ha.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ga.concat(Ya)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(Ut.y)(Ha,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=function t(e,n){var r=e[qa];Object(Ut.v)(Ua,r)||Object(Ut.n)("Unknown distribution function: "+r);var i=Ua[r]();for(var a in e)a===Wa?i.data((e.from||n()).map(e[a])):a===za?i[a](e[a].map((function(e){return t(e,n)}))):typeof i[a]===qa&&i[a](e[a]);return i}(t.distribution,function(t){return function(){return t.materialize(t.SOURCE).source}}(e)),i=t.steps||t.minsteps||25,a=t.steps||t.maxsteps||200,o=t.method||"pdf";"pdf"!==o&&"cdf"!==o&&Object(Ut.n)("Invalid density method: "+o),t.extent||r.data||Object(Ut.n)("Missing density extent parameter."),o=r[o];var s=t.as||["value","density"],u=t.extent||Object(Ut.p)(r.data()),c=Sa(o,u,i,a).map((function(t){var e={};return e[s[0]]=t[0],e[s[1]]=t[1],Kt(e)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n},Object(Ut.y)(Va,ue),Xa.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(Ut.y)(Xa,Ci).transform=function(t,e){var n,r=this.value,i=t.field,a=r[0],o=r[1];if(((n=e.changed()||e.modified(i.fields)||t.modified("field"))||null==a)&&(a=1/0,o=-1/0),e.visit(n?e.SOURCE:e.ADD,(function(t){var e=i(t);null!=e&&((e=+e)<a&&(a=e),e>o&&(o=e))})),!Number.isFinite(a)||!Number.isFinite(o)){var s=Object(Ut.h)(i);s&&(s=' for field "'.concat(s,'"')),e.dataflow.warn("Infinite extent".concat(s,": [").concat(a,", ").concat(o,"]")),a=o=void 0}this.value=[a,o]};var Ja=Object(Ut.y)(Ka,ue);function Za(t){Ci.call(this,{},t),this._keys=Object(Ut.s)();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}Ja.connect=function(t){return this.targets().add(t),t.source=this},Ja.add=function(t){this.value.add.push(t)},Ja.rem=function(t){this.value.rem.push(t)},Ja.mod=function(t){this.value.mod.push(t)},Ja.init=function(t){this.value.init(t,t.NO_SOURCE)},Ja.evaluate=function(){return this.value};var Qa=Object(Ut.y)(Za,Ci);function to(t){ue.call(this,null,eo,t)}function eo(t){return this.value&&!t.modified()?this.value:Object(Ut.A)(t.name)?Object(Ut.i)(t.name).map((function(t){return Object(Ut.t)(t)})):Object(Ut.t)(t.name,t.as)}function no(t){Ci.call(this,Object(Ut.s)(),t)}function ro(t,e){return t?t.map((function(t,n){return e[n]||Object(Ut.h)(t)})):null}function io(t){Ci.call(this,[],t)}function ao(t){Ci.call(this,[],t)}function oo(t){Ci.call(this,null,t)}function so(t){Ci.call(this,[],t)}Qa.activate=function(t){this._targets[this._targets.active++]=t},Qa.subflow=function(t,e,n,r){var i,a,o=this.value,s=Object(Ut.v)(o,t)&&o[t];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[t])&&a.tuple,s=(i=n.dataflow).add(new Ka(n.fork(n.NO_SOURCE),this)).connect(e(i,t,a)),o[t]=s,this.activate(s)),s},Qa.transform=function(t,e){var n=e.dataflow,r=this,i=t.key,a=t.subflow,o=this._keys,s=t.modified("key");function u(t){return r.subflow(t,a,e)}return this._group=t.group||{},this._targets.active=0,e.visit(e.REM,(function(t){var e=$t(t),n=o.get(e);void 0!==n&&(o.delete(e),u(n).rem(t))})),e.visit(e.ADD,(function(t){var e=i(t);o.set($t(t),e),u(e).add(t)})),s||e.modified(i.fields)?e.visit(e.MOD,(function(t){var e=$t(t),n=o.get(e),r=i(t);n===r?u(r).mod(t):(o.set(e,r),u(n).rem(t),u(r).add(t))})):e.changed(e.MOD)&&e.visit(e.MOD,(function(t){u(o.get($t(t))).mod(t)})),s&&e.visit(e.REFLOW,(function(t){var e=$t(t),n=o.get(e),r=i(t);n!==r&&(o.set(e,r),u(n).rem(t),u(r).add(t))})),o.empty>n.cleanThreshold&&n.runAfter(o.clean),e},Object(Ut.y)(to,ue),no.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(Ut.y)(no,Ci).transform=function(t,e){var n=e.dataflow,r=this.value,i=e.fork(),a=i.add,o=i.rem,s=i.mod,u=t.expr,c=!0;function l(e){var n=$t(e),i=u(e,t),l=r.get(n);i&&l?(r.delete(n),a.push(e)):i||l?c&&i&&!l&&s.push(e):(r.set(n,1),o.push(e))}return e.visit(e.REM,(function(t){var e=$t(t);r.has(e)?r.delete(e):o.push(t)})),e.visit(e.ADD,(function(e){u(e,t)?a.push(e):r.set($t(e),1)})),e.visit(e.MOD,l),t.modified()&&(c=!1,e.visit(e.REFLOW,l)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},io.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Object(Ut.y)(io,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=ro(r,t.as||[]),a=i.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,o,s,u=r.map((function(e){return e(t)})),c=u.reduce((function(t,e){return Math.max(t,e.length)}),0),l=0;l<c;++l){for(o=Jt(t),e=0;e<a;++e)o[i[e]]=null==(s=u[e][l])?null:s;n.add.push(o)}})),this.value=n.source=n.add,n.modifies(i)},ao.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(Ut.y)(ao,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.fields,i=r.map(Ut.h),a=t.as||["key","value"],o=a[0],s=a[1],u=r.length;return n.rem=this.value,e.visit(e.SOURCE,(function(t){for(var e,a=0;a<u;++a)(e=Jt(t))[o]=i[a],e[s]=r[a](t),n.add.push(e)})),this.value=n.source=n.add,n.modifies(a)},oo.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(Ut.y)(oo,Ci).transform=function(t,e){var n=t.expr,r=t.as,i=t.modified(),a=t.initonly?e.ADD:i?e.SOURCE:e.modified(n.fields)?e.ADD_MOD:e.ADD;return i&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(r),e.visit(a,(function(e){e[r]=n(e,t)}))},Object(Ut.y)(so,Ci).transform=function(t,e){var n,r,i,a=this.value,o=e.fork(e.ALL),s=t.size-a.length,u=t.generator;if(s>0){for(n=[];--s>=0;)n.push(i=Kt(u(t))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-s),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-s);return o.source=this.value=a,o};var uo={value:"value",median:_a,mean:function(t,e){var n=0,r=0;if(void 0===e){var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;null!=c&&(c=+c)>=c&&(++n,r+=c)}}catch(m){a=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var l=-1,f=!0,h=!1,d=void 0;try{for(var p,v=t[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;null!=(g=e(g,++l,t))&&(g=+g)>=g&&(++n,r+=g)}}catch(m){h=!0,d=m}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}if(n)return r/n},min:function(t,e){var n;if(void 0===e){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!=u&&(n>u||void 0===n&&u>=u)&&(n=u)}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var c=-1,l=!0,f=!1,h=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;null!=(v=e(v,++c,t))&&(n>v||void 0===n&&v>=v)&&(n=v)}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}return n},max:function(t,e){var n;if(void 0===e){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!=u&&(n<u||void 0===n&&u>=u)&&(n=u)}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var c=-1,l=!0,f=!1,h=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;null!=(v=e(v,++c,t))&&(n<v||void 0===n&&v>=v)&&(n=v)}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}return n}},co=[];function lo(t){Ci.call(this,[],t)}function fo(t){Ca.call(this,t)}lo.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(Ut.y)(lo,Ci).transform=function(t,e){var n,r,i,a,o,s,u,c,l,f,h=e.fork(e.ALL),d=function(t){var e,n=t.method||uo.value;if(null!=uo[n])return n===uo.value?(e=void 0!==t.value?t.value:0,function(){return e}):uo[n];Object(Ut.n)("Unrecognized imputation method: "+n)}(t),p=function(t){var e=t.field;return function(t){return t?e(t):NaN}}(t),v=Object(Ut.h)(t.field),g=Object(Ut.h)(t.key),m=(t.groupby||[]).map(Ut.h),y=function(t,e,n,r){var i,a,o,s,u,c,l,f,h=function(t){return t(f)},d=[],p=r?r.slice():[],v={},g={};for(p.forEach((function(t,e){v[t]=e+1})),s=0,l=t.length;s<l;++s)f=t[s],c=n(f),u=v[c]||(v[c]=p.push(c)),a=(i=e?e.map(h):co)+"",(o=g[a])||(o=g[a]=[],d.push(o),o.values=i),o[u-1]=f;return d.domain=p,d}(e.source,t.groupby,t.key,t.keyvals),b=[],_=this.value,w=y.domain.length;for(o=0,c=y.length;o<c;++o)for(i=(n=y[o]).values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(a=y.domain[u],f={_impute:!0},s=0,l=i.length;s<l;++s)f[m[s]]=i[s];f[g]=a,f[v]=isNaN(r)?r=d(n,p):r,b.push(Kt(f))}return b.length&&(h.add=h.materialize(h.ADD).add.concat(b)),_.length&&(h.rem=h.materialize(h.REM).rem.concat(_)),this.value=b,h},fo.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Li},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var ho=Object(Ut.y)(fo,Ca);function po(t){Ci.call(this,null,t)}function vo(t){ue.call(this,null,go,t)}function go(t){return this.value&&!t.modified()?this.value:Object(Ut.I)(t.fields,t.flat)}function mo(t){Ci.call(this,[],t)}function yo(t,e,n){n.forEach(Kt);var r=e.fork(e.NO_FIELDS&e.NO_SOURCE);return r.rem=t.value,t.value=r.add=r.source=n,r}function bo(t){Ci.call(this,{},t)}function _o(t){ue.call(this,null,wo,t)}function wo(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,a=-1/0,o=t.extents;for(e=0,n=o.length;e<n;++e)(r=o[e])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function xo(t){ue.call(this,null,ko,t)}function ko(t){return this.value&&!t.modified()?this.value:t.values.reduce((function(t,e){return t.concat(e)}),[])}function Eo(t){Ci.call(this,null,t)}function So(t){Ca.call(this,t)}ho.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs,!0))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,(function(t){r.add(t)}))):(n=r.value=r.value||this.init(t),e.visit(e.REM,(function(t){r.rem(t)})),e.visit(e.ADD,(function(t){r.add(t)}))),r.changes(),e.visit(e.SOURCE,(function(t){Object(Ut.o)(t,n[r.cellkey(t)].tuple)})),e.reflow(i).modifies(this._outputs)},ho.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},po.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(Ut.y)(po,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=function(t,e,n){var r,i,a,o,s,u,c=[],l=function(t){return t(o)};if(null==e)c.push(t.map(n));else for(r={},i=0,a=t.length;i<a;++i)o=t[i],s=e.map(l),(u=r[s])||(r[s]=u=[],u.dims=s,c.push(u)),u.push(n(o));return c}(r,t.groupby,t.field),a=(t.groupby||[]).map(Ut.h),o=t.bandwidth,s=t.cumulative?"cdf":"pdf",u=t.as||["value","density"],c=[],l=t.extent,f=t.steps||t.minsteps||25,h=t.steps||t.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(Ut.n)("Invalid density method: "+s),"shared"===t.resolve&&(l||(l=Object(Ut.p)(r,t.field)),f=h=t.steps||h),i.forEach((function(e){var n=ra(e,o)[s],r=t.counts?e.length:1,i=l||Object(Ut.p)(e);Sa(n,i,f,h).forEach((function(t){for(var n={},i=0;i<a.length;++i)n[a[i]]=e.dims[i];n[u[0]]=t[0],n[u[1]]=t[1]*r,c.push(Kt(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n},Object(Ut.y)(vo,ue),Object(Ut.y)(mo,Ci).transform=function(t,e){var n=this,r=e.dataflow;return t.values?yo(this,e,r.parse(t.values,t.format)):r.request(t.url,t.format).then((function(t){return yo(n,e,t.data||[])}))},bo.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(Ut.y)(bo,Ci).transform=function(t,e){var n,r,i=e,a=t.as,o=t.fields,s=t.index,u=t.values,c=null==t.default?null:t.default,l=t.modified(),f=l?e.SOURCE:e.ADD,h=o.length;return u?(r=u.length,h>1&&!a&&Object(Ut.n)('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==h*r&&Object(Ut.n)('The "as" parameter has too few output field names.'),a=a||u.map(Ut.h),n=function(t){for(var e,n,i=0,l=0;i<h;++i)if(null==(n=s.get(o[i](t))))for(e=0;e<r;++e,++l)t[a[l]]=c;else for(e=0;e<r;++e,++l)t[a[l]]=u[e](n)}):(a||Object(Ut.n)("Missing output field names."),n=function(t){for(var e,n=0;n<h;++n)e=s.get(o[n](t)),t[a[n]]=null==e?c:e}),l?i=e.reflow(!0):f|=o.some((function(t){return e.modified(t.fields)}))?e.MOD:0,e.visit(f,n),i.modifies(a)},Object(Ut.y)(_o,ue),Object(Ut.y)(xo,ue),Object(Ut.y)(Eo,Ci),Eo.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},So.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Li,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var Oo=Object(Ut.y)(So,Ca);function Ao(t){Za.call(this,t)}function To(t){Ci.call(this,null,t)}function Co(t){Ci.call(this,null,t)}function jo(t){Ci.call(this,null,t)}function Do(t){Ci.call(this,[],t),this.count=0}Oo._transform=Oo.transform,Oo.transform=function(t,e){return this._transform(function(t,e){var n=t.field,r=t.value,i=("count"===t.op?"__count__":t.op)||"sum",a=Object(Ut.g)(n).concat(Object(Ut.g)(r)),o=function(t,e,n){var r={},i=[];return n.visit(n.SOURCE,(function(e){var n=t(e);r[n]||(r[n]=1,i.push(n))})),i.sort((function(t,e){return(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0)})),e?i.slice(0,e):i}(n,t.limit||0,e);e.changed()&&t.set("__pivot__",null,null,!0);return{key:t.key,groupby:t.groupby,ops:o.map((function(){return i})),fields:o.map((function(t){return function(t,e,n,r){return Object(Ut.f)((function(r){return e(r)===t?n(r):NaN}),r,t+"")}(t,n,r,a)})),as:o.map((function(t){return t+""})),modified:t.modified.bind(t)}}(t,e),e)},Object(Ut.y)(Ao,Za).transform=function(t,e){var n=this,r=t.subflow,i=t.field;return(t.modified("field")||i&&e.modified(Object(Ut.g)(i)))&&Object(Ut.n)("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,(function(t){var a=n.subflow($t(t),r,e,t);i?i(t).forEach((function(t){a.mod(t)})):a.mod(t)})),e.visit(e.ADD,(function(t){var a=n.subflow($t(t),r,e,t);i?i(t).forEach((function(t){a.add(Kt(t))})):a.add(t)})),e.visit(e.REM,(function(t){var a=n.subflow($t(t),r,e,t);i?i(t).forEach((function(t){a.rem(t)})):a.rem(t)})),e},To.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(Ut.y)(To,Ci).transform=function(t,e){var n,r,i=t.fields,a=ro(t.fields,t.as||[]),o=i?function(t,e){return function(t,e,n,r){for(var i=0,a=n.length;i<a;++i)e[r[i]]=n[i](t);return e}(t,e,i,a)}:Zt;return this.value?r=this.value:(e=e.addAll(),r=this.value={}),n=e.fork(e.NO_SOURCE),e.visit(e.REM,(function(t){var e=$t(t);n.rem.push(r[e]),r[e]=null})),e.visit(e.ADD,(function(t){var e=o(t,Kt({}));r[$t(t)]=e,n.add.push(e)})),e.visit(e.MOD,(function(t){n.mod.push(o(t,r[$t(t)]))})),n},Object(Ut.y)(Co,Ci).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},Object(Ut.y)(jo,Ci).transform=function(t,e){var n,r;return this.value?r=this.value:(n=e=e.addAll(),r=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,(function(t){var e=$t(t);n.rem.push(r[e]),r[e]=null})),e.visit(e.ADD,(function(t){var e=Jt(t);r[$t(t)]=e,n.add.push(e)})),e.visit(e.MOD,(function(t){n.mod.push(Zt(t,r[$t(t)]))}))),n},Do.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(Ut.y)(Do,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=t.modified("size"),i=t.size,a=this.value,o=this.count,s=0,u=a.reduce((function(t,e){return t[$t(e)]=1,t}),{});function c(t){var e,r;a.length<i?a.push(t):(r=~~((o+1)*Gi()))<a.length&&r>=s&&(e=a[r],u[$t(e)]&&n.rem.push(e),a[r]=t),++o}if(e.rem.length&&(e.visit(e.REM,(function(t){var e=$t(t);u[e]&&(u[e]=-1,n.rem.push(t)),--o})),a=a.filter((function(t){return-1!==u[$t(t)]}))),(e.rem.length||r)&&a.length<i&&e.source&&(s=o=a.length,e.visit(e.SOURCE,(function(t){u[$t(t)]||c(t)})),s=-1),r&&a.length>i){for(var l=0,f=a.length-i;l<f;++l)u[$t(a[l])]=-1,n.rem.push(a[l]);a=a.slice(f)}return e.mod.length&&e.visit(e.MOD,(function(t){u[$t(t)]&&n.mod.push(t)})),e.add.length&&e.visit(e.ADD,c),(e.add.length||s<0)&&(n.add=a.filter((function(t){return!u[$t(t)]}))),this.count=o,this.value=n.source=a,n};var Ro=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a};function Mo(t){Ci.call(this,null,t)}function Po(t){Ci.call(this,null,t),this.modified(!0)}function Fo(t){Ci.call(this,Object(Ut.s)(),t)}function No(t){Ci.call(this,null,t)}Mo.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(Ut.y)(Mo,Ci).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD),r=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Ro(t.start,t.stop,t.step||1).map((function(t){var e={};return e[r]=t,Kt(e)})),n.add=e.add.concat(this.value),n}},Object(Ut.y)(Po,Ci).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},Object(Ut.y)(Fo,Ci).transform=function(t,e){var n=e.dataflow,r=t.field,i=this.value,a=!0;function o(t){i.set(r(t),t)}return t.modified("field")||e.modified(r.fields)?(i.clear(),e.visit(e.SOURCE,o)):e.changed()?(e.visit(e.REM,(function(t){i.delete(r(t))})),e.visit(e.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),e.fork()},Object(Ut.y)(No,Ci).transform=function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(te(t.sort)):e.source).map(t.field))};var Lo={row_number:function(){return{next:function(t){return t.index+1}}},rank:function(){var t;return{init:function(){return t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?t=n+1:t}}},dense_rank:function(){var t;return{init:function(){return t=1},next:function(e){var n=e.index,r=e.data;return n&&e.compare(r[n-1],r[n])?++t:t}}},percent_rank:function(){var t=Lo.rank(),e=t.next;return{init:t.init,next:function(t){return(e(t)-1)/(t.data.length-1)}}},cume_dist:function(){var t;return{init:function(){return t=0},next:function(e){var n=e.index,r=e.data,i=e.compare;if(t<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;t=n}return(1+t)/r.length}}},ntile:function(t,e){(e=+e)>0||Object(Ut.n)("ntile num must be greater than zero.");var n=Lo.cume_dist(),r=n.next;return{init:n.init,next:function(t){return Math.ceil(e*r(t))}}},lag:function(t,e){return e=+e||1,{next:function(n){var r=n.index-e;return r>=0?t(n.data[r]):null}}},lead:function(t,e){return e=+e||1,{next:function(n){var r=n.index+e,i=n.data;return r<i.length?t(i[r]):null}}},first_value:function(t){return{next:function(e){return t(e.data[e.i0])}}},last_value:function(t){return{next:function(e){return t(e.data[e.i1-1])}}},nth_value:function(t,e){return(e=+e)>0||Object(Ut.n)("nth_value nth must be greater than zero."),{next:function(n){var r=n.i0+(e-1);return r<n.i1?t(n.data[r]):null}}},prev_value:function(t){var e=null;return{next:function(n){var r=t(n.data[n.index]);return null!=r?e=r:e}}},next_value:function(t){var e=null,n=-1;return{next:function(r){var i=r.data;return r.index<=n?e:(n=function(t,e,n){for(var r=e.length;n<r;++n){if(null!=t(e[n]))return n}return-1}(t,i,r.index))<0?(n=i.length,e=null):e=t(i[n])}}}};var Io=Object.keys(Lo);function Bo(t){var e=Object(Ut.i)(t.ops),n=Object(Ut.i)(t.fields),r=Object(Ut.i)(t.params),i=Object(Ut.i)(t.as),a=this.outputs=[],o=this.windows=[],s={},u={},c=!0,l=[],f=[];function h(t){Object(Ut.i)(Object(Ut.g)(t)).forEach((function(t){return s[t]=1}))}h(t.sort),e.forEach((function(t,e){var s=n[e],d=Object(Ut.h)(s),p=Fi(t,d,i[e]);if(h(s),a.push(p),Object(Ut.v)(Lo,t))o.push(function(t,e,n,r){var i=Lo[t](e,n);return{init:i.init||Ut.hb,update:function(t,e){e[r]=i.next(t)}}}(t,n[e],r[e],p));else{if(null==s&&"count"!==t&&Object(Ut.n)("Null aggregate field specified."),"count"===t)return void l.push(p);c=!1;var v=u[d];v||((v=u[d]=[]).field=s,f.push(v)),v.push(Ii(t,p))}})),(l.length||f.length)&&(this.cell=function(t,e,n){t=t.map((function(t){return zi(t,t.field)}));var r={num:0,agg:null,store:!1,count:e};if(!n)for(var i=t.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new t[o](r);if(r.store)var s=r.data=new Aa;return r.add=function(t){if(r.num+=1,!n){s&&s.add(t);for(var e=0;e<i;++e)a[e].add(a[e].get(t),t)}},r.rem=function(t){if(r.num-=1,!n){s&&s.rem(t);for(var e=0;e<i;++e)a[e].rem(a[e].get(t),t)}},r.set=function(t){var i,o;for(s&&s.values(),i=0,o=e.length;i<o;++i)t[e[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(t)},r.init=function(){r.num=0,s&&s.reset();for(var t=0;t<i;++t)a[t].init()},r}(f,l,c)),this.inputs=Object.keys(s)}var Uo=Bo.prototype;Uo.init=function(){this.windows.forEach((function(t){return t.init()})),this.cell&&this.cell.init()},Uo.update=function(t,e){var n,r=this.cell,i=this.windows,a=t.data,o=i&&i.length;if(r){for(n=t.p0;n<t.i0;++n)r.rem(a[n]);for(n=t.p1;n<t.i1;++n)r.add(a[n]);r.set(e)}for(n=0;n<o;++n)i[n].update(t,e)};var zo=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Vi(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}};function qo(t){Ci.call(this,{},t),this._mlen=0,this._mods=[]}qo.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Io.concat(Li)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var Wo=Object(Ut.y)(qo,Ci);function Ho(t,e,n,r){var i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],s=t.data(n),u=s.length,c=0,l=a?zo(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(Ut.l)(-1)};for(e.init();c<u;++c)Go(f,o,c,u),a&&Yo(f,l),e.update(f,s[c])}function Go(t,e,n,r){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?r:Math.min(r,n+Math.abs(e[1])+1),t.index=n}function Yo(t,e){var n=t.i0,r=t.i1-1,i=t.compare,a=t.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(t.i0=e.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(t.i1=e.right(a,a[r]))}Wo.transform=function(t,e){var n,r,i=this,a=i.state,o=t.modified(),s=te(t.sort);this.stamp=e.stamp,a&&!o||(a=i.state=new Bo(t));var u=Pi(t.groupby);function c(t){return i.group(u(t))}for(o||e.modified(a.inputs)?(i.value={},e.visit(e.SOURCE,(function(t){c(t).add(t)}))):(e.visit(e.REM,(function(t){c(t).remove(t)})),e.visit(e.ADD,(function(t){c(t).add(t)}))),n=0,r=i._mlen;n<r;++n)Ho(i._mods[n],a,s,t);return i._mlen=0,i._mods=[],e.reflow(o).modifies(a.outputs)},Wo.group=function(t){var e=this.value[t];return e||((e=this.value[t]=Ma($t)).stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e};var Vo="top",$o="left",Xo="right",Ko="bottom",Jo="top-left",Zo="top-right",Qo="bottom-left",ts="bottom-right",es="start",ns="middle",rs="end",is="x",as="y",os="group",ss="axis",us="title",cs="frame",ls="scope",fs="legend",hs="row-header",ds="row-footer",ps="row-title",vs="column-header",gs="column-footer",ms="column-title",ys="padding",bs="symbol",_s="fit",ws="fit-x",xs="fit-y",ks="pad",Es="none",Ss="all",Os="each",As="flush",Ts="column",Cs="row";function js(t){this.clear(),t&&this.union(t)}var Ds=js.prototype;Ds.clone=function(){return new js(this)},Ds.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Ds.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Ds.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},Ds.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},Ds.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},Ds.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},Ds.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Ds.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},Ds.rotate=function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},Ds.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},Ds.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},Ds.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},Ds.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},Ds.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},Ds.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},Ds.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},Ds.width=function(){return this.x2-this.x1},Ds.height=function(){return this.y2-this.y1};var Rs=0,Ms="p_";function Ps(t){return t&&t.gradient}function Fs(t,e,n){var r=t.id,i=t.gradient,a="radial"===i?Ms:"";return r||(r=t.id="gradient_"+Rs++,"radial"===i?(t.x1=Ns(t.x1,.5),t.y1=Ns(t.y1,.5),t.r1=Ns(t.r1,0),t.x2=Ns(t.x2,.5),t.y2=Ns(t.y2,.5),t.r2=Ns(t.r2,.5),a=Ms):(t.x1=Ns(t.x1,0),t.y1=Ns(t.y1,0),t.x2=Ns(t.x2,1),t.y2=Ns(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+a+r+")"}function Ns(t,e){return null!=t?t:e}function Ls(t){this.mark=t,this.bounds=this.bounds||new js}function Is(t){Ls.call(this,t),this.items=this.items||[]}function Bs(t,e){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}function Us(){return"undefined"!==typeof Image?Image:null}Object(Ut.y)(Is,Ls);var zs=/^([A-Za-z]+:)?\/\//,qs=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ws=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Hs="file://";function Gs(t,e){return Ys.apply(this,arguments)}function Ys(){return(Ys=Object(qt.a)(E.a.mark((function t(e,n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Vs(t,e){return $s.apply(this,arguments)}function $s(){return($s=Object(qt.a)(E.a.mark((function t(e,n){var r,i,a,o,s,u,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Ut.o)({},this.options,n),r=this.fileAccess,i={href:null},u=qs.test(e.replace(Ws,"")),null!=e&&"string"===typeof e&&u||Object(Ut.n)("Sanitize failure, invalid URI: "+Object(Ut.X)(e)),c=zs.test(e),(s=n.baseURL)&&!c&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),o=(a=e.startsWith(Hs))||"file"===n.mode||"http"!==n.mode&&!c&&r,a?e=e.slice(Hs.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Xs(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:Ks}function Ks(){return Js.apply(this,arguments)}function Js(){return(Js=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zs(t){return t?function(){var e=Object(qt.a)(E.a.mark((function e(n,r){var i,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ut.o)({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Object(Ut.D)(o[a])?o[a]():o.text():Object(Ut.n)(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():Qs}function Qs(){return tu.apply(this,arguments)}function tu(){return(tu=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Ut.Y,Ut.ab,Ut.ab,Ut.Z,Ut.cb,Ut.x;function eu(t){var e=function(e,n){var r={delimiter:t};return nu(e,n?Object(Ut.o)(n,r):r)};return e.responseType="text",e}function nu(t,e){return e.header&&(t=e.header.map(Ut.X).join(e.delimiter)+"\n"+t),We(e.delimiter).parse(t+"")}nu.responseType="text";var ru=n(80),iu={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function au(t,e){var n,r,i,a;return t=Object(ru.a)(t,e),e&&e.feature?(n=Ze,i=e.feature):e&&e.mesh?(n=nn,i=e.mesh,a=iu[e.filter]):Object(Ut.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):Object(Ut.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}au.responseType="json";eu(","),eu("\t"),ru.a;var ou=function(t,e){return function(n){return{options:n||{},sanitize:Vs,load:Gs,fileAccess:!!e,file:Xs(e),http:Zs(t)}}}("undefined"!==typeof fetch&&fetch,null);function su(t){this._pending=0,this._loader=t||ou()}var uu=su.prototype;function cu(t){t._pending+=1}function lu(t){t._pending-=1}uu.pending=function(){return this._pending},uu.sanitizeURL=function(t){var e=this;return cu(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return lu(e),t})).catch((function(){return lu(e),null}))},uu.loadImage=function(t){var e=this,n=Us();return cu(e),e._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){lu(e),i.loaded=!0},i.onerror=function(){lu(e),i.loaded=!1},i.src=r,i})).catch((function(t){return lu(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}}))},uu.ready=function(){var t=this;return new Promise((function(e){!function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}(!1)}))};var fu=Math.PI,hu=2*fu,du=hu-1e-6;function pu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function vu(){return new pu}pu.prototype=vu.prototype={constructor:pu,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,c=a-t,l=o-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var h=n-a,d=r-o,p=s*s+u*u,v=h*h+d*d,g=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((fu-Math.acos((p+f-v)/(2*g*m)))/2),b=y/m,_=y/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>c*d)+","+(this._x1=t+_*s)+","+(this._y1=e+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+o,c=e+s,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(f<0&&(f=f%hu+hu),f>du?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=fu)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var gu=vu,mu=function(t){return function(){return t}},yu=Math.abs,bu=Math.atan2,_u=Math.cos,wu=Math.max,xu=Math.min,ku=Math.sin,Eu=Math.sqrt,Su=1e-12,Ou=Math.PI,Au=Ou/2,Tu=2*Ou;function Cu(t){return t>=1?Au:t<=-1?-Au:Math.asin(t)}function ju(t){return t.innerRadius}function Du(t){return t.outerRadius}function Ru(t){return t.startAngle}function Mu(t){return t.endAngle}function Pu(t){return t&&t.padAngle}function Fu(t,e,n,r,i,a,o){var s=t-n,u=e-r,c=(o?a:-a)/Eu(s*s+u*u),l=c*u,f=-c*s,h=t+l,d=e+f,p=n+l,v=r+f,g=(h+p)/2,m=(d+v)/2,y=p-h,b=v-d,_=y*y+b*b,w=i-a,x=h*v-p*d,k=(b<0?-1:1)*Eu(wu(0,w*w*_-x*x)),E=(x*b-y*k)/_,S=(-x*y-b*k)/_,O=(x*b+y*k)/_,A=(-x*y+b*k)/_,T=E-g,C=S-m,j=O-g,D=A-m;return T*T+C*C>j*j+D*D&&(E=O,S=A),{cx:E,cy:S,x01:-l,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}var Nu=function(){var t=ju,e=Du,n=mu(0),r=null,i=Ru,a=Mu,o=Pu,s=null;function u(){var u,c,l,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-Au,p=a.apply(this,arguments)-Au,v=yu(p-d),g=p>d;if(s||(s=u=gu()),h<f&&(c=h,h=f,f=c),h>Su)if(v>Tu-Su)s.moveTo(h*_u(d),h*ku(d)),s.arc(0,0,h,d,p,!g),f>Su&&(s.moveTo(f*_u(p),f*ku(p)),s.arc(0,0,f,p,d,g));else{var m,y,b=d,_=p,w=d,x=p,k=v,E=v,S=o.apply(this,arguments)/2,O=S>Su&&(r?+r.apply(this,arguments):Eu(f*f+h*h)),A=xu(yu(h-f)/2,+n.apply(this,arguments)),T=A,C=A;if(O>Su){var j=Cu(O/f*ku(S)),D=Cu(O/h*ku(S));(k-=2*j)>Su?(w+=j*=g?1:-1,x-=j):(k=0,w=x=(d+p)/2),(E-=2*D)>Su?(b+=D*=g?1:-1,_-=D):(E=0,b=_=(d+p)/2)}var R=h*_u(b),M=h*ku(b),P=f*_u(x),F=f*ku(x);if(A>Su){var N,L=h*_u(_),I=h*ku(_),B=f*_u(w),U=f*ku(w);if(v<Ou&&(N=function(t,e,n,r,i,a,o,s){var u=n-t,c=r-e,l=o-i,f=s-a,h=f*u-l*c;if(!(h*h<Su))return[t+(h=(l*(e-a)-f*(t-i))/h)*u,e+h*c]}(R,M,B,U,L,I,P,F))){var z=R-N[0],q=M-N[1],W=L-N[0],H=I-N[1],G=1/ku(((l=(z*W+q*H)/(Eu(z*z+q*q)*Eu(W*W+H*H)))>1?0:l<-1?Ou:Math.acos(l))/2),Y=Eu(N[0]*N[0]+N[1]*N[1]);T=xu(A,(f-Y)/(G-1)),C=xu(A,(h-Y)/(G+1))}}E>Su?C>Su?(m=Fu(B,U,R,M,h,C,g),y=Fu(L,I,P,F,h,C,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),C<A?s.arc(m.cx,m.cy,C,bu(m.y01,m.x01),bu(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,C,bu(m.y01,m.x01),bu(m.y11,m.x11),!g),s.arc(0,0,h,bu(m.cy+m.y11,m.cx+m.x11),bu(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,C,bu(y.y11,y.x11),bu(y.y01,y.x01),!g))):(s.moveTo(R,M),s.arc(0,0,h,b,_,!g)):s.moveTo(R,M),f>Su&&k>Su?T>Su?(m=Fu(P,F,L,I,f,-T,g),y=Fu(R,M,B,U,f,-T,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),T<A?s.arc(m.cx,m.cy,T,bu(m.y01,m.x01),bu(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,T,bu(m.y01,m.x01),bu(m.y11,m.x11),!g),s.arc(0,0,f,bu(m.cy+m.y11,m.cx+m.x11),bu(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,T,bu(y.y11,y.x11),bu(y.y01,y.x01),!g))):s.arc(0,0,f,x,w,g):s.lineTo(P,F)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ou/2;return[_u(r)*n,ku(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"===typeof e?e:mu(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"===typeof t?t:mu(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"===typeof t?t:mu(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:mu(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"===typeof t?t:mu(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"===typeof t?t:mu(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"===typeof t?t:mu(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u};function Lu(t){this._context=t}Lu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Iu=function(t){return new Lu(t)};function Bu(t){return t[0]}function Uu(t){return t[1]}var zu=function(){var t=Bu,e=Uu,n=mu(!0),r=null,i=Iu,a=null;function o(o){var s,u,c,l=o.length,f=!1;for(null==r&&(a=i(c=gu())),s=0;s<=l;++s)!(s<l&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,s,o),+e(u,s,o));if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:mu(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:mu(+t),o):e},o.defined=function(t){return arguments.length?(n="function"===typeof t?t:mu(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},qu=function(){var t=Bu,e=null,n=mu(0),r=Uu,i=mu(!0),a=null,o=Iu,s=null;function u(u){var c,l,f,h,d,p=u.length,v=!1,g=new Array(p),m=new Array(p);for(null==a&&(s=o(d=gu())),c=0;c<=p;++c){if(!(c<p&&i(h=u[c],c,u))===v)if(v=!v)l=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=l;--f)s.point(g[f],m[f]);s.lineEnd(),s.areaEnd()}v&&(g[c]=+t(h,c,u),m[c]=+n(h,c,u),s.point(e?+e(h,c,u):g[c],r?+r(h,c,u):m[c]))}if(d)return s=null,d+""||null}function c(){return zu().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"===typeof n?n:mu(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"===typeof e?e:mu(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"===typeof t?t:mu(+t),u):e},u.y=function(t){return arguments.length?(n="function"===typeof t?t:mu(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"===typeof t?t:mu(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"===typeof t?t:mu(+t),u):r},u.lineX0=u.lineY0=function(){return c().x(t).y(n)},u.lineY1=function(){return c().x(t).y(r)},u.lineX1=function(){return c().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"===typeof t?t:mu(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(s=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=s=null:s=o(a=t),u):a},u};Hu(Iu);function Wu(t){this._curve=t}function Hu(t){function e(e){return new Wu(t(e))}return e._curve=t,e}Wu.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};Array.prototype.slice;var Gu={draw:function(t,e){var n=Math.sqrt(e/Ou);t.moveTo(n,0),t.arc(0,0,n,0,Tu)}},Yu=(Math.sqrt(1/3),Math.sin(Ou/10)/Math.sin(7*Ou/10)),Vu=(Math.sin(Tu/10),Math.cos(Tu/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){var t=mu(Gu),e=mu(64),n=null;function r(){var r;if(n||(n=r=gu()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"===typeof e?e:mu(e),r):t},r.size=function(t){return arguments.length?(e="function"===typeof t?t:mu(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}),$u=function(){};function Xu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ku(t){this._context=t}Ku.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ju=function(t){return new Ku(t)};function Zu(t){this._context=t}Zu.prototype={areaStart:$u,areaEnd:$u,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Xu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Qu=function(t){return new Zu(t)};function tc(t){this._context=t}tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Xu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var ec=function(t){return new tc(t)};function nc(t,e){this._basis=new Ku(t),this._beta=e}nc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*o),this._beta*e[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var rc=function t(e){function n(t){return 1===e?new Ku(t):new nc(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function ic(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ac(t,e){this._context=t,this._k=(1-e)/6}ac.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ic(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ic(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var oc=function t(e){function n(t){return new ac(t,e)}return n.tension=function(e){return t(+e)},n}(0);function sc(t,e){this._context=t,this._k=(1-e)/6}sc.prototype={areaStart:$u,areaEnd:$u,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ic(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var uc=function t(e){function n(t){return new sc(t,e)}return n.tension=function(e){return t(+e)},n}(0);function cc(t,e){this._context=t,this._k=(1-e)/6}cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ic(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var lc=function t(e){function n(t){return new cc(t,e)}return n.tension=function(e){return t(+e)},n}(0);function fc(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Su){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Su){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function hc(t,e){this._context=t,this._alpha=e}hc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:fc(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var dc=function t(e){function n(t){return e?new hc(t,e):new ac(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function pc(t,e){this._context=t,this._alpha=e}pc.prototype={areaStart:$u,areaEnd:$u,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:fc(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vc=function t(e){function n(t){return e?new pc(t,e):new sc(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function gc(t,e){this._context=t,this._alpha=e}gc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fc(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var mc=function t(e){function n(t){return e?new gc(t,e):new cc(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function yc(t){this._context=t}yc.prototype={areaStart:$u,areaEnd:$u,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var bc=function(t){return new yc(t)};function _c(t){return t<0?-1:1}function wc(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(_c(a)+_c(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function xc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kc(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Ec(t){this._context=t}function Sc(t){this._context=new Oc(t)}function Oc(t){this._context=t}function Ac(t){return new Ec(t)}function Tc(t){return new Sc(t)}function Cc(t){this._context=t}function jc(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}Ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kc(this,this._t0,xc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kc(this,xc(this,n=wc(this,t,e)),n);break;default:kc(this,this._t0,n=wc(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Sc.prototype=Object.create(Ec.prototype)).point=function(t,e){Ec.prototype.point.call(this,e,t)},Oc.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}},Cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=jc(t),i=jc(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Dc=function(t){return new Cc(t)};function Rc(t,e){this._context=t,this._t=e}Rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Mc=function(t){return new Rc(t,.5)};function Pc(t){return new Rc(t,0)}function Fc(t){return new Rc(t,1)}var Nc={basis:{curve:Ju},"basis-closed":{curve:Qu},"basis-open":{curve:ec},bundle:{curve:rc,tension:"beta",value:.85},cardinal:{curve:oc,tension:"tension",value:0},"cardinal-open":{curve:lc,tension:"tension",value:0},"cardinal-closed":{curve:uc,tension:"tension",value:0},"catmull-rom":{curve:dc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vc,tension:"alpha",value:.5},"catmull-rom-open":{curve:mc,tension:"alpha",value:.5},linear:{curve:Iu},"linear-closed":{curve:bc},monotone:{horizontal:Tc,vertical:Ac},natural:{curve:Dc},step:{curve:Mc},"step-after":{curve:Fc},"step-before":{curve:Pc}};function Lc(t,e,n){var r=Object(Ut.v)(Nc,t)&&Nc[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var Ic={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Bc=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],Uc=function(t){var e,n,r,i,a,o,s,u,c,l,f,h=[];for(u=0,l=(e=t.slice().replace(Bc[0],"###$1").split(Bc[1]).slice(1)).length;u<l;++u){for(r=(n=e[u]).slice(1).trim().replace(Bc[2],"$1###$2").split(Bc[3]),i=[o=n.charAt(0)],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=Ic[o.toLowerCase()],i.length-1>s)for(c=1,f=i.length;c<f;c+=s)h.push([o].concat(i.slice(c,c+s)));else h.push(i)}return h},zc=Math.PI/180,qc=Math.PI/2,Wc=2*Math.PI,Hc=Math.sqrt(3)/2,Gc={},Yc={},Vc=[].join;function $c(t){var e=Vc.call(t);if(Yc[e])return Yc[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=c*o,f=-u*s,h=u*o,d=c*s,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),w=n+p-_*v,x=r+v+_*p,k=n+g,E=r+m,S=k+_*m,O=E-_*g;return Yc[e]=[l*w+f*x,h*w+d*x,l*S+f*O,h*S+d*O,l*k+f*E,h*k+d*E]}var Xc=["l",0,0,0,0,0,0,0];function Kc(t,e){var n=Xc[0]=t[0];if("a"===n||"A"===n)Xc[1]=e*t[1],Xc[2]=e*t[2],Xc[3]=t[3],Xc[4]=t[4],Xc[5]=t[5],Xc[6]=e*t[6],Xc[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)Xc[r]=e*t[r];return Xc}var Jc=function(t,e,n,r,i){var a,o,s,u,c,l=null,f=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var v=0,g=e.length;v<g;++v){switch(a=e[v],1!==i&&(a=Kc(a,i)),a[0]){case"l":f+=a[1],h+=a[2],t.lineTo(f+n,h+r);break;case"L":f=a[1],h=a[2],t.lineTo(f+n,h+r);break;case"h":f+=a[1],t.lineTo(f+n,h+r);break;case"H":f=a[1],t.lineTo(f+n,h+r);break;case"v":h+=a[1],t.lineTo(f+n,h+r);break;case"V":h=a[1],t.lineTo(f+n,h+r);break;case"m":f+=a[1],h+=a[2],t.moveTo(f+n,h+r);break;case"M":f=a[1],h=a[2],t.moveTo(f+n,h+r);break;case"c":o=f+a[5],s=h+a[6],d=f+a[3],p=h+a[4],t.bezierCurveTo(f+a[1]+n,h+a[2]+r,d+n,p+r,o+n,s+r),f=o,h=s;break;case"C":f=a[5],h=a[6],d=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,f+n,h+r);break;case"s":o=f+a[3],s=h+a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,f+a[1]+n,h+a[2]+r,o+n,s+r),d=f+a[1],p=h+a[2],f=o,h=s;break;case"S":o=a[3],s=a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"q":o=f+a[3],s=h+a[4],d=f+a[1],p=h+a[2],t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"Q":o=a[3],s=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"t":o=f+a[1],s=h+a[2],null===l[0].match(/[QqTt]/)?(d=f,p=h):"t"===l[0]?(d=2*f-u,p=2*h-c):"q"===l[0]&&(d=2*f-d,p=2*h-p),u=d,c=p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),h=s,d=(f=o)+a[1],p=h+a[2];break;case"T":o=a[1],s=a[2],d=2*f-d,p=2*h-p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"a":Zc(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+h+r]),f+=a[6],h+=a[7];break;case"A":Zc(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],h=a[7];break;case"z":case"Z":t.closePath()}l=a}};function Zc(t,e,n,r){for(var i=function(t,e,n,r,i,a,o,s,u){var c=Vc.call(arguments);if(Gc[c])return Gc[c];var l=o*zc,f=Math.sin(l),h=Math.cos(l),d=h*(s-t)*.5+f*(u-e)*.5,p=h*(u-e)*.5-f*(s-t)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,_=g*s+m*u,w=y*s+b*u,x=g*t+m*e,k=y*t+b*e,E=1/((x-_)*(x-_)+(k-w)*(k-w))-.25;E<0&&(E=0);var S=Math.sqrt(E);a==i&&(S=-S);var O=.5*(_+x)-S*(k-w),A=.5*(w+k)+S*(x-_),T=Math.atan2(w-A,_-O),C=Math.atan2(k-A,x-O)-T;C<0&&1===a?C+=Wc:C>0&&0===a&&(C-=Wc);for(var j=Math.ceil(Math.abs(C/(qc+.001))),D=[],R=0;R<j;++R){var M=T+R*C/j,P=T+(R+1)*C/j;D[R]=[O,A,M,P,n,r,f,h]}return Gc[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=$c(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var Qc={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Wc)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hc*n,i=r-.5773502691896257*n,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hc*n,i=r-.5773502691896257*n;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hc*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hc*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hc*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=Hc*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function tl(t){return Object(Ut.v)(Qc,t)?Qc[t]:function(t){if(!Object(Ut.v)(el,t)){var e=Uc(t);el[t]={draw:function(t,n){Jc(t,e,0,0,Math.sqrt(n)/2)}}}return el[t]}(t)}var el={};function nl(t){return t.x}function rl(t){return t.y}function il(t){return t.width}function al(t){return t.height}function ol(t){return function(){return t}}function sl(t){return t.x||0}function ul(t){return t.y||0}function cl(t){return t.cornerRadius||0}function ll(t){return!(!1===t.defined)}var fl=Nu().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius(cl),hl=qu().x(sl).y1(ul).y0((function(t){return(t.y||0)+(t.height||0)})).defined(ll),dl=qu().y(ul).x1(sl).x0((function(t){return(t.x||0)+(t.width||0)})).defined(ll),pl=zu().x(sl).y(ul).defined(ll),vl=function(){var t=nl,e=rl,n=il,r=al,i=ol(0),a=null;function o(o,s,u){var c,l=null!=s?s:+t.call(this,o),f=null!=u?u:+e.call(this,o),h=+n.call(this,o),d=+r.call(this,o),p=+i.call(this,o);if(a||(a=c=gu()),p<=0)a.rect(l,f,h,d);else{var v=l+h,g=f+d;a.moveTo(l+p,f),a.lineTo(v-p,f),a.quadraticCurveTo(v,f,v,f+p),a.lineTo(v,g-p),a.quadraticCurveTo(v,g,v-p,g),a.lineTo(l+p,g),a.quadraticCurveTo(l,g,l,g-p),a.lineTo(l,f+p),a.quadraticCurveTo(l,f,l+p,f),a.closePath()}if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:ol(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:ol(+t),o):e},o.width=function(t){return arguments.length?(n="function"===typeof t?t:ol(+t),o):n},o.height=function(t){return arguments.length?(r="function"===typeof t?t:ol(+t),o):r},o.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:ol(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}().x(sl).y(ul).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius(cl),gl=Vu().type((function(t){return tl(t.shape||"circle")})).size((function(t){return null==t.size?64:t.size})),ml=function(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),h=(c/=f)*s,d=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-h,o-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+h,o+d),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,Wc);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,h=!1;for(null==u&&(u=l=gu()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===h&&(h=!h)&&(i=0),h&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}().x(sl).y(ul).defined(ll).size((function(t){return t.size||1}));function yl(t,e,n,r){return vl.context(t)(e,n,r)}var bl,_l=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},wl=Wc-1e-8;function xl(t){return bl=t,xl}function kl(){}function El(t,e){bl.add(t,e)}xl.beginPath=kl,xl.closePath=kl,xl.moveTo=El,xl.lineTo=El,xl.rect=function(t,e,n,r){El(t,e),El(t+n,e+r)},xl.quadraticCurveTo=function(t,e,n,r){El(t,e),El(n,r)},xl.bezierCurveTo=function(t,e,n,r,i,a){El(t,e),El(n,r),El(i,a)},xl.arc=function(t,e,n,r,i,a){if(Math.abs(i-r)>wl)return El(t-n,e-n),void El(t+n,e+n);var o,s,u,c,l=1/0,f=-1/0,h=1/0,d=-1/0;function p(t){u=n*Math.cos(t),c=n*Math.sin(t),u<l&&(l=u),u>f&&(f=u),c<h&&(h=c),c>d&&(d=c)}if(p(r),p(i),i!==r)if((r%=Wc)<0&&(r+=Wc),(i%=Wc)<0&&(i+=Wc),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=Wc,o=r-r%qc,s=0;s<4&&o>i;++s,o-=qc)p(o);else for(o=r-r%qc+qc,s=0;s<4&&o<i;++s,o+=qc)p(o);El(t+l,e+h),El(t+f,e+d)};var Sl=(Sl=Bs(1,1))?Sl.getContext("2d"):null,Ol=new js;function Al(t){return function(e,n){if(!Sl)return!0;t(Sl,e),Ol.clear().union(e.bounds).intersect(n).round();for(var r=Ol.x1,i=Ol.y1,a=Ol.x2,o=Ol.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(Sl.isPointInPath(u,s))return!0;return!1}}function Tl(t,e){return e.contains(t.x||0,t.y||0)}function Cl(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(Ol.set(n,r,n+i,r+a))}function jl(t,e,n,r,i){var a,o,s,u,c=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-e,p=i-n,v=0,g=1;for(u=0;u<4;++u){if(0===u&&(a=-d,o=-(c-e)),1===u&&(a=d,o=f-e),2===u&&(a=-p,o=-(l-n)),3===u&&(a=p,o=h-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>g)return!1;s>v&&(v=s)}else if(a>0){if(s<v)return!1;s<g&&(g=s)}}return!0}var Dl=function(t,e,n){return Ps(n)?function(t,e,n){for(var r=n.width(),i=n.height(),a=e.stops,o=a.length,s="radial"===e.gradient?t.createRadialGradient(n.x1+(e.x1||.5)*r,n.y1+(e.y1||.5)*i,Math.max(r,i)*(e.r1||0),n.x1+(e.x2||.5)*r,n.y1+(e.y2||.5)*i,Math.max(r,i)*(e.r2||.5)):t.createLinearGradient(n.x1+(e.x1||0)*r,n.y1+(e.y1||0)*i,n.x1+(e.x2||1)*r,n.y1+(e.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(t,n,e.bounds):n},Rl=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=Dl(t,e,e.fill),!0)},Ml=[],Pl=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=Dl(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Ml),t.lineDashOffset=e.strokeDashOffset||0),!0))};function Fl(t,e){return t.zindex-e.zindex||t.index-e.index}function Nl(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(Fl)}function Ll(t,e){var n,r,i=t.items;if(i&&i.length){var a=Nl(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function Il(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=Nl(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function Bl(t){return function(e,n,r){Ll(n,(function(n){r&&!r.intersects(n.bounds)||Ul(t,e,n,n)}))}}function Ul(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&Rl(e,n,i)&&e.fill(),n.stroke&&Pl(e,n,i)&&e.stroke()))}function zl(t){return t=t||Ut.eb,function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,Il(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0}))}}function ql(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function Wl(t){return zl(ql(t))}function Hl(t,e){return"translate("+t+","+e+")"}function Gl(t){return"rotate("+t+")"}function Yl(t){return Hl(t.x||0,t.y||0)}var Vl=function(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=zc),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return Hl(t.x||0,t.y||0)+(t.angle?" "+Gl(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){var r=n.x||0,i=n.y||0;return e(xl(t),n),_l(t,n).translate(r,i),n.angle&&t.rotate(n.angle*zc,r,i),t},draw:Bl(r),pick:Wl(r),isect:n||Al(r)}},$l=Vl("arc",(function(t,e){return fl.context(t)(e)}));var Xl=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,a=ql(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(xl(t),r),_l(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||Ul(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)},isect:Tl,tip:n}},Kl=Xl("area",(function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?dl:hl).curve(Lc(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<s&&(s=r,n=t[o]);return n})),Jl=1;var Zl=function(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+Jl++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(Ut.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},Ql=.5;function tf(t,e){var n=e.stroke?Ql:0;t.beginPath(),yl(t,e,n,n)}var ef=ql(tf);var nf={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",Yl(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),_l(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;Ll(e,(function(e){var i,a=e.x||0,o=e.y||0,s=e.width||0,u=e.height||0;t.save(),t.translate(a,o),(e.stroke||e.fill)&&(i=null==e.opacity?1:e.opacity)>0&&(tf(t,e),e.fill&&Rl(t,e,i)&&t.fill(),e.stroke&&Pl(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,u),t.clip()),n&&n.translate(-a,-o),Ll(e,(function(e){r.draw(t,e,n)})),n&&n.translate(a,o),t.restore()}))},pick:function(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this,s=n*t.pixelRatio,u=r*t.pixelRatio;return Il(e,(function(c){var l,f,h,d;if(!(d=c.bounds)||d.contains(i,a))return f=c.x||0,h=c.y||0,t.save(),t.translate(f,h),f=i-f,h=a-h,!(l=Il(c,(function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,h)?o.pick(t,n,r,f,h):null})))&&!1!==e.interactive&&(c.fill||c.stroke)&&ef(t,c,s,u)&&(l=c),t.restore(),l||null}))},isect:Cl,background:function(t,e){var n=e.stroke?Ql:0;t("class","background"),t("d",yl(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?Zl(n,e,e):null)}};function rf(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then((function(e){t.image=e,t.image.url=t.url}))),n}function af(t,e){return"center"===t?e/2:"right"===t?e:0}function of(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var sf={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=rf(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,s=(null!=e.height?e.height:r.height)||0,u=!1===e.aspect?"none":"xMidYMid";i-=af(e.align,o),a-=of(e.baseline,s),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",Hl(i,a)),t("width",o),t("height",s),t("preserveAspectRatio",u)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=af(e.align,a),i-=of(e.baseline,o),t.set(r,i,r+a,i+o)},draw:function(t,e,n){var r=this;Ll(e,(function(e){if(!n||n.intersects(e.bounds)){var i,a,o,s,u=rf(e,r),c=e.x||0,l=e.y||0,f=(null!=e.width?e.width:u.width)||0,h=(null!=e.height?e.height:u.height)||0;c-=af(e.align,f),l-=of(e.baseline,h),!1!==e.aspect&&(a=u.width/u.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(l+=(h-(s=f/a))/2,h=s):(c+=(f-(s=h*a))/2,f=s))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,c,l,f,h))}}))},pick:zl(),isect:Ut.eb,get:rf,xOffset:af,yOffset:of},uf=Xl("line",(function(t,e){var n=e[0],r=n.interpolate||"linear";return pl.curve(Lc(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(n=t[a].x-e[0])*n+(r=t[a].y-e[1])*r<i)return t[a];return null}));function cf(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=Uc(n)).path=n),Jc(t,r,e.x,e.y)}var lf={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",Yl(e)),t("d",e.path)},bound:function(t,e){return cf(xl(t),e)?t.set(0,0,0,0):_l(t,e)},draw:Bl(cf),pick:Wl(cf),isect:Al(cf)};function ff(t,e){t.beginPath(),yl(t,e)}var hf={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",yl(null,e))},bound:function(t,e){var n,r;return _l(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:Bl(ff),pick:Wl(ff),isect:Cl};function df(t,e,n){var r,i,a,o;return!(!e.stroke||!Pl(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var pf,vf={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",Yl(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return _l(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){Ll(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&df(t,e,r)&&t.stroke()}}))},pick:zl((function(t,e,n,r){return!!t.isPointInStroke&&(df(t,e,1)&&t.isPointInStroke(n,r))})),isect:function(t,e){var n=t.x||0,r=t.y||0;return jl(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}},gf=Vl("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),mf=Vl("symbol",(function(t,e){return gl.context(t)(e)}),Tl),yf={height:kf,measureWidth:wf,estimateWidth:bf,width:bf,canvas:Ef};function bf(t){return pf=kf(t),_f(Sf(t))}function _f(t){return~~(.8*t.length*pf)}function wf(t){return kf(t)<=0?0:(Sl.font=Af(t),xf(Sf(t)))}function xf(t){return Sl.measureText(t).width}function kf(t){return null!=t.fontSize?t.fontSize:11}function Ef(t){yf.width=t&&Sl?wf:bf}function Sf(t){var e=t.text;return null==e?"":t.limit>0?function(t){var e,n=+t.limit,r=t.text+"";yf.width===wf?(Sl.font=Af(t),e=xf):(pf=kf(t),e=_f);if(e(r)<n)return r;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,s=0,u=r.length;if(n-=e(a),o){for(;s<u;)i=s+u>>>1,e(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),e(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(t):e+""}function Of(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Af(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+kf(t)+"px "+Of(t,e)}function Tf(t){var e=t.baseline,n=kf(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}Ef(!0);var Cf={left:"start",center:"middle",right:"end"},jf=new js;function Df(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-qc,n+=i*Math.cos(e),r+=i*Math.sin(e)),jf.x1=n,jf.y1=r,jf}function Rf(t,e,n){var r,i=yf.height(e),a=e.align,o=Df(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+Tf(e)-Math.round(.8*i);if(r=yf.width(e),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*zc,s,u);else if(2===n)return t.rotatedPoints(e.angle*zc,s,u);return t}var Mf={arc:$l,area:Kl,group:nf,image:sf,line:uf,path:lf,rect:hf,rule:vf,shape:gf,symbol:mf,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+Tf(e),a=Df(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",Cf[e.align]||"start"),u?(n=Hl(o,s)+" "+Gl(u),(r||i)&&(n+=" "+Hl(r,i))):n=Hl(o+r,s+i),t("transform",n)},bound:Rf,draw:function(t,e,n){Ll(e,(function(e){var r,i,a,o,s;n&&!n.intersects(e.bounds)||(s=Sf(e))&&(0===(r=null==e.opacity?1:e.opacity)||e.fontSize<=0||(t.font=Af(e),t.textAlign=e.align||"left",a=(i=Df(e)).x1,o=i.y1,e.angle&&(t.save(),t.translate(a,o),t.rotate(e.angle*zc),a=o=0),a+=e.dx||0,o+=(e.dy||0)+Tf(e),e.fill&&Rl(t,e,r)&&t.fillText(s,a,o),e.stroke&&Pl(t,e,r)&&t.strokeText(s,a,o),e.angle&&t.restore()))}))},pick:zl((function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=Df(e),s=o.x1,u=o.y1,c=Rf(jf,e,1),l=-e.angle*zc,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(s-f*s+h*u),p=h*i+f*a+(u-h*s-f*u);return c.contains(d,p)})),isect:function(t,e){var n=Rf(jf,t,2);return jl(e,n[0],n[1],n[2],n[3])||jl(e,n[0],n[1],n[4],n[5])||jl(e,n[4],n[5],n[6],n[7])||jl(e,n[2],n[3],n[6],n[7])}},trail:Xl("trail",(function(t,e){return ml.context(t)(e)}),(function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null}))},Pf=function(t,e,n){var r=Mf[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new js),t,n)},Ff={mark:null},Nf=function(t,e,n){var r,i,a,o,s=Mf[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(Ff.mark=t,a=Ff),o=Pf(a,u,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new js,l)for(r=0,i=c.length;r<i;++r)e.union(Pf(c[r],u,n));return t.bounds=e},Lf=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function If(t){return function t(e){var n,r,i,a=e.marktype,o=e.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=e,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&t(o[r]);a&&Nf(e);return e}("string"===typeof t?JSON.parse(t):t)}var Bf=function(t){arguments.length?this.root=If(t):(this.root=Uf({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Is(this.root)])}.prototype;function Uf(t,e){return{bounds:new js,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function zf(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function qf(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function Wf(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=zf(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function Hf(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function Gf(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}Bf.toJSON=function(t){return function(t,e){return JSON.stringify(t,Lf,e)}(this.root,t||0)},Bf.mark=function(t,e,n){var r=Uf(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var Yf=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function Vf(t,e){this._active=null,this._handlers={},this._loader=t||ou(),this._tooltip=e||$f}function $f(t,e,n,r){t.element().setAttribute("title",r||"")}var Xf=Vf.prototype;function Kf(t){this._el=null,this._bgcolor=null,this._loader=new su(t)}Xf.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},Xf.element=function(){return this._el},Xf.canvas=function(){return this._el&&this._el.firstChild},Xf.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},Xf.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},Xf.on=function(){},Xf.off=function(){},Xf._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},Xf.handlers=function(t){var e,n=this._handlers,r=[];if(t)r.push.apply(r,n[this.eventName(t)]);else for(e in n)r.push.apply(r,n[e]);return r},Xf.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},Xf.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then((function(e){var n=new MouseEvent(t.type,t),r=zf(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})).catch((function(){}))},Xf.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=Mf[o.marktype]).tip){for((a=Yf(e,n))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},Xf.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();t.mark&&(t=t.mark.group);)a+=t.x||0,o+=t.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var Jf=Kf.prototype;Jf.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},Jf.element=function(){return this._el},Jf.canvas=function(){return this._el&&this._el.firstChild},Jf.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},Jf.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},Jf.dirty=function(){},Jf.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},Jf._render=function(){},Jf.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},Jf._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},Jf.sanitizeURL=function(t){return this._load("sanitizeURL",t)},Jf.loadImage=function(t){return this._load("loadImage",t)};var Zf="mouseout";function Qf(t,e){Vf.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var th=Object(Ut.y)(Qf,Vf);function eh(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function nh(t){return function(e){this.fire(t,e),this._active=null}}th.initialize=function(t,e,n){var r=this._canvas=t&&qf(t,"canvas");if(r){var i=this;this.events.forEach((function(t){r.addEventListener(t,(function(e){th[t]?th[t].call(i,e):i.fire(t,e)}))}))}return Vf.prototype.initialize.call(this,t,e,n)},th.canvas=function(){return this._canvas},th.context=function(){return this._canvas.getContext("2d")},th.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],th.DOMMouseScroll=function(t){this.fire("mousewheel",t)},th.mousemove=eh("mousemove","mouseover","mouseout"),th.dragover=eh("dragover","dragenter","dragleave"),th.mouseout=nh("mouseout"),th.dragleave=nh("dragleave"),th.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},th.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},th.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},th.touchmove=function(t){this.fire("touchmove",t,!0)},th.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},th.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if(e.vegaType=t,"click"===t&&a&&a.href?this.handleHref(e,a,a.href):"mousemove"!==t&&t!==Zf||this.handleTooltip(e,a,t!==Zf),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},th.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},th.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},th.pickEvent=function(t){var e=Yf(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},th.pick=function(t,e,n,r,i){var a=this.context();return Mf[t.marktype].pick.call(this,a,t,e,n,r,i)};var rh="undefined"!==typeof window&&window.devicePixelRatio||1;function ih(t){Kf.call(this,t),this._redraw=!1,this._dirty=new js}var ah=Object(Ut.y)(ih,Kf),oh=Kf.prototype,sh=new js;function uh(t,e){Vf.call(this,t,e);var n=this;n._hrefHandler=lh(n,(function(t,e){e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=lh(n,(function(t,e){n.handleTooltip(t,e,t.type!==Zf)}))}ah.initialize=function(t,e,n,r,i,a){return this._options=a,this._canvas=Bs(1,1,a&&a.type),t&&(Hf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),oh.initialize.call(this,t,e,n,r,i)},ah.resize=function(t,e,n,r){return oh.resize.call(this,t,e,n,r),function(t,e,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=s?rh:i;for(o in t.width=e*c,t.height=n*c,a)u[o]=a[o];s&&1!==c&&(t.style.width=e+"px",t.style.height=n+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},ah.canvas=function(){return this._canvas},ah.context=function(){return this._canvas?this._canvas.getContext("2d"):null},ah.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=sh.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},ah._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},ah.draw=function(t,e,n){var r=Mf[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),Object(Ut.D)(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},ah.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var ch=Object(Ut.y)(uh,Vf);function lh(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function fh(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function hh(t){return"</"+t+">"}ch.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(Zf,this._tooltipHandler)),this._svg=r=t&&qf(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(Zf,this._tooltipHandler)),Vf.prototype.initialize.call(this,t,e,n)},ch.canvas=function(){return this._svg},ch.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:lh(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},ch.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var dh={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ph={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},vh=Object.keys(ph),gh=dh.xmlns;function mh(t){Kf.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var yh=Object(Ut.y)(mh,Kf),bh=Kf.prototype;function _h(t,e,n){var r,i,a;if("radial"===e.gradient){var o=Wf(t,n++,"pattern",gh);o.setAttribute("id",Ms+e.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=Wf(o,0,"rect",gh)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+Ch()+"#"+e.id+")"),(t=Wf(t,n++,"radialGradient",gh)).setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else(t=Wf(t,n++,"linearGradient",gh)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)(a=Wf(t,r,"stop",gh)).setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return Hf(t,r),n}function wh(t,e,n){var r;return(t=Wf(t,n,"clipPath",gh)).setAttribute("id",e.id),e.path?(r=Wf(t,0,"path",gh)).setAttribute("d",e.path):((r=Wf(t,0,"rect",gh)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),n+1}function xh(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function kh(t,e,n,r,i){var a,o=t._svg;if(!o&&(o=zf(a=e.ownerDocument,r,gh),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var s=zf(a,"path",gh);s.setAttribute("class","background"),o.appendChild(s),s.__data__=t;var u=zf(a,"g",gh);o.appendChild(u),u.__data__=t}return(o.ownerSVGElement!==i||function(t){var e=t.mark||t.group;return e&&e.items.length>1}(t)&&o.previousSibling!==n)&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}yh.initialize=function(t,e,n,r){return t&&(this._svg=Wf(t,0,"svg",gh),this._svg.setAttribute("class","marks"),Hf(t,1),this._root=Wf(this._svg,0,"g",gh),Hf(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),bh.initialize.call(this,t,e,n,r)},yh.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),bh.background.apply(this,arguments)},yh.resize=function(t,e,n,r){return bh.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},yh.canvas=function(){return this._svg},yh.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in dh)t[e]=dh[e];var n=this._bgcolor?fh("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+hh("rect"):"";return fh("svg",t)+n+this._svg.innerHTML+hh("svg")},yh._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),Hf(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},yh.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=Wf(e,0,"defs",gh)),i=_h(r,n.gradient[t],i);for(t in n.clipping)r||(n.el=r=Wf(e,0,"defs",gh)),i=wh(r,n.clipping[t],i);r&&(0===i?(e.removeChild(r),n.el=null):Hf(r,i))},yh._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},yh.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},yh.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},yh._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=Mf[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,xh(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,xh(e,u)),e._update=u));return!this._dirtyAll},yh.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,a=this._svg,o=Mf[e.marktype],s=!1===e.interactive?"none":null,u="g"===o.tag,c=null,l=0;function f(t){var e=i.isDirty(t),n=kh(t,r,c,o.tag,a);e&&(i._update(o,n,t),u&&function(t,e,n){e=e.lastChild;var r,i=0;Ll(n,(function(n){r=t.draw(e,n,r),++i})),Hf(e,1+i)}(i,n,t)),c=n,++l}return(r=kh(e,t,n,"g",a)).setAttribute("class",Gf(e)),u||r.style.setProperty("pointer-events",s),e.clip?r.setAttribute("clip-path",Zl(i,e,e.group)):r.removeAttribute("clip-path"),o.nested?e.items.length&&f(e.items[0]):Ll(e,f),Hf(r,l),r};var Eh=null,Sh=null,Oh={group:function(t,e,n){Sh=e.__values__,Eh=e.childNodes[1],t.foreground(Th,n,this),Eh=e.childNodes[0],t.background(Th,n,this);var r=!1===n.mark.interactive?"none":null;r!==Sh.events&&(Eh.style.setProperty("pointer-events",r),Sh.events=r)},text:function(t,e,n){var r;(r=Sf(n))!==Sh.text&&(e.textContent=r,Sh.text=r),Ah(e,"font-family",Of(n)),Ah(e,"font-size",kf(n)+"px"),Ah(e,"font-style",n.fontStyle),Ah(e,"font-variant",n.fontVariant),Ah(e,"font-weight",n.fontWeight)}};function Ah(t,e,n){n!==Sh[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),Sh[e]=n)}function Th(t,e,n){e!==Sh[t]&&(null!=e?n?Eh.setAttributeNS(n,t,e):Eh.setAttribute(t,e):n?Eh.removeAttributeNS(n,t):Eh.removeAttribute(t),Sh[t]=e)}function Ch(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function jh(t){Kf.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}yh._update=function(t,e,n){Eh=e,Sh=e.__values__,t.attr(Th,n,this);var r=Oh[t.type];r&&r.call(this,t,e,n),this.style(Eh,n)},yh.style=function(t,e){var n,r,i,a,o;if(null!=e)for(n=0,r=vh.length;n<r;++n)o=e[i=vh[n]],"font"===i&&(o=Of(e)),o!==Sh[i]&&(a=ph[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):(Ps(o)&&(o=Fs(o,this._defs.gradient,Ch())),t.style.setProperty(a,o+"")),Sh[i]=o)};var Dh,Rh=Object(Ut.y)(jh,Kf),Mh=Kf.prototype;function Ph(t,e,n,r){Dh[r||t]=e}function Fh(t,e,n,r){if(null==t)return"";var i,a,o,s,u,c="";for("bgrect"===n&&!1===e.interactive&&(c+="pointer-events: none; "),"text"===n&&(c+="font-family: "+Of(t)+"; ",c+="font-size: "+kf(t)+"px; ",t.fontStyle&&(c+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(c+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(c+="font-weight: "+t.fontWeight+"; ")),i=0,a=vh.length;i<a;++i)o=vh[i],s=ph[o],null==(u=t[o])?"fill"===s&&(c+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(Ps(u)&&(u=Fs(u,r.gradient,"")),c+=s+": "+u+"; "):c+=s+": none; ";return c?'style="'+c.trim()+'"':null}Rh.resize=function(t,e,n,r){Mh.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in dh)o[s]=dh[s];a.head=fh("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?fh("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+hh("rect"):"",a.root=fh("g",{transform:"translate("+i+")"}),a.foot=hh("g")+hh("svg"),this},Rh.background=function(){var t=Mh.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},Rh.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},Rh._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},Rh.buildDefs=function(){var t,e,n,r,i,a=this._defs,o="";for(e in a.gradient){for(i=(n=a.gradient[e]).stops,"radial"===n.gradient?(o+=fh(r="pattern",{id:Ms+e,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=fh("rect",{width:"1",height:"1",fill:"url(#"+e+")"})+hh("rect"),o+=hh(r),o+=fh(r="radialGradient",{id:e,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=fh(r="linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<i.length;++t)o+=fh("stop",{offset:i[t].offset,"stop-color":i[t].color})+hh("stop");o+=hh(r)}for(e in a.clipping)n=a.clipping[e],o+=fh("clipPath",{id:e}),n.path?o+=fh("path",{d:n.path})+hh("path"):o+=fh("rect",{x:0,y:0,width:n.width,height:n.height})+hh("rect"),o+=hh("clipPath");return o.length>0?fh("defs")+o+hh("defs"):""},Rh.attributes=function(t,e){return Dh={},t(Ph,e,this),Dh},Rh.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t}))}return null},Rh.mark=function(t){var e,n=this,r=Mf[t.marktype],i=r.tag,a=this._defs,o="";function s(s){var u=n.href(s);u&&(o+=fh("a",u)),e="g"!==i?Fh(s,t,i,a):null,o+=fh(i,n.attributes(r.attr,s),e),"text"===i?o+=Sf(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(o+=fh("path",n.attributes(r.background,s),Fh(s,t,"bgrect",a))+hh("path"),o+=fh("g",n.attributes(r.foreground,s))+n.markGroup(s)+hh("g")),o+=hh(i),u&&(o+=hh("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),o+=fh("g",{class:Gf(t),"clip-path":t.clip?Zl(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&s(t.items[0]):Ll(t,s),o+hh("g")},Rh.markGroup=function(t){var e=this,n="";return Ll(t,(function(t){n+=e.mark(t)})),n};var Nh={};Nh.canvas=Nh.png={renderer:ih,headless:ih,handler:Qf},Nh.svg={renderer:mh,headless:jh,handler:uh},Nh.none={};var Lh=new js;function Ih(t){Ci.call(this,null,t)}function Bh(t,e,n){return e(t.bounds.clear(),t,n)}Object(Ut.y)(Ih,Ci).transform=function(t,e){var n,r=e.dataflow,i=t.mark,a=i.marktype,o=Mf[a],s=o.bound,u=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),u=Bh(i,s),i.items.forEach((function(t){t.bounds.clear().union(u)}))):a===os||t.modified()?(e.visit(e.MOD,(function(t){r.dirty(t)})),u.clear(),i.items.forEach((function(t){u.union(Bh(t,s))})),i.role===fs&&e.reflow()):(n=e.changed(e.REM),e.visit(e.ADD,(function(t){u.union(Bh(t,s))})),e.visit(e.MOD,(function(t){n=n||u.alignsWith(t.bounds),r.dirty(t),u.union(Bh(t,s))})),n&&(u.clear(),i.items.forEach((function(t){u.union(t.bounds)})))),function(t){var e=t.clip;if(Object(Ut.D)(e))e(xl(Lh.clear()));else{if(!e)return;Lh.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(Lh)}(i),e.modifies("bounds")};var Uh=":vega_identifier:";function zh(t){Ci.call(this,0,t)}function qh(t){Ci.call(this,null,t)}function Wh(t){Ci.call(this,null,t)}zh.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(Ut.y)(zh,Ci).transform=function(t,e){var n=function(t){var e=t._signals[Uh];e||(t._signals[Uh]=e=t.add(0));return e}(e.dataflow),r=n.value,i=t.as;return e.visit(e.ADD,(function(t){t[i]||(t[i]=++r)})),n.set(this.value=r),e},Object(Ut.y)(qh,Ci).transform=function(t,e){var n=this.value;n||((n=e.dataflow.scenegraph().mark(t.markdef,function(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index)).group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);var r=n.marktype===os?Is:Ls;return e.visit(e.ADD,(function(t){r.call(t,n)})),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e};var Hh=Object(Ut.y)(Wh,Ci),Gh={parity:function(t){return t.filter((function(t,e){return e%2?t.opacity=0:1}))},greedy:function(t,e){var n;return t.filter((function(t,r){return r&&Yh(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1)}))}};function Yh(t,e,n){return n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2)}function Vh(t,e){for(var n,r=1,i=t.length,a=t[0].bounds;r<i;a=n,++r)if(Yh(a,n=t[r].bounds,e))return!0}function $h(t){var e=t.bounds;return e.width()>1&&e.height()>1}function Xh(t){return t.forEach((function(t){return t.opacity=1})),t}function Kh(t,e){return t.reflow(e.modified()).modifies("opacity")}function Jh(t){Ci.call(this,null,t)}Hh.transform=function(t,e){var n,r,i,a=Gh[t.method]||Gh.parity,o=e.materialize(e.SOURCE).source,s=t.separation||0;if(o&&o.length){if(!t.method)return t.modified("method")&&(Xh(o),e=Kh(e,t)),e;if(t.sort&&(o=o.slice().sort(t.sort)),n=Xh(o=o.filter($h)),e=Kh(e,t),n.length>=3&&Vh(n,s)){do{n=a(n,s)}while(n.length>=3&&Vh(n,s));n.length<3&&!Object(Ut.S)(o).opacity&&(n.length>1&&(Object(Ut.S)(n).opacity=0),Object(Ut.S)(o).opacity=1)}return t.boundScale&&t.boundTolerance>=0&&(r=function(t,e,n){var r=t.range(),i=new js;return e===Vo||e===Ko?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(t){return i.encloses(t.bounds)}}(t.boundScale,t.boundOrient,+t.boundTolerance),o.forEach((function(t){r(t)||(t.opacity=0)}))),i=n[0].mark.bounds.clear(),o.forEach((function(t){t.opacity&&i.union(t.bounds)})),e}},Object(Ut.y)(Jh,Ci).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,(function(t){n.dirty(t)})),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var Zh=new js;function Qh(t,e,n){return t[e]===n?0:(t[e]=n,1)}var td=.5;function ed(t){var e=t.items[0].datum.orient;return e===$o||e===Xo}function nd(t,e,n,r){var i,a,o=e.items[0],s=o.datum,u=s.orient,c=function(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(s),l=o.range,f=o.offset,h=o.position,d=o.minExtent,p=o.maxExtent,v=s.title&&o.items[c[2]].items[0],g=o.titlePadding,m=o.bounds,y=0,b=0;switch(Zh.clear().union(m),m.clear(),(i=c[0])>-1&&m.union(o.items[i].bounds),(i=c[1])>-1&&m.union(o.items[i].bounds),u){case Vo:y=h||0,b=-f,a=Math.max(d,Math.min(p,-m.y1)),v&&(a=rd(v,a,g,0,-1,m)),m.add(0,-a).add(l,0);break;case $o:y=-f,b=h||0,a=Math.max(d,Math.min(p,-m.x1)),v&&(a=rd(v,a,g,1,-1,m)),m.add(-a,0).add(0,l);break;case Xo:y=n+f,b=h||0,a=Math.max(d,Math.min(p,m.x2)),v&&(a=rd(v,a,g,1,1,m)),m.add(0,0).add(a,l);break;case Ko:y=h||0,b=r+f,a=Math.max(d,Math.min(p,m.y2)),v&&(a=rd(v,a,g,0,1,m)),m.add(0,0).add(l,a);break;default:y=o.x,b=o.y}return _l(m.translate(y,b),o),Qh(o,"x",y+td)|Qh(o,"y",b+td)&&(o.bounds=Zh,t.dirty(o),o.bounds=m,t.dirty(o)),o.mark.bounds.clear().union(m)}function rd(t,e,n,r,i,a){var o=t.bounds,s=0,u=0;return t.auto?(e+=n,r?s=(t.x||0)-(t.x=i*e):u=(t.y||0)-(t.y=i*e),o.translate(-s,-u),t.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),e+=o.width()):(a.add(o.x1,0).add(o.x2,0),e+=o.height())):a.union(o),e}var id=n(6);function ad(t){return(new js).set(0,0,t.width||0,t.height||0)}function od(t){var e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function sd(t,e,n){var r=Object(Ut.F)(t)?t[e]:t;return null!=r?r:void 0!==n?n:0}function ud(t){return t<0?Math.ceil(-t):0}function cd(t,e,n){var r,i,a,o,s,u,c,l,f,h,d,p=!n.nodirty,v=n.bounds===As?ad:od,g=Zh.set(0,0,0,0),m=sd(n.align,Ts),y=sd(n.align,Cs),b=sd(n.padding,Ts),_=sd(n.padding,Cs),w=n.columns||e.length,x=w<0?1:Math.ceil(e.length/w),k=e.length,E=Array(k),S=Array(w),O=0,A=Array(k),T=Array(x),C=0,j=Array(k),D=Array(k),R=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<x;++i)T[i]=0;for(i=0;i<k;++i)u=e[i],s=R[i]=v(u),u.x=u.x||0,j[i]=0,u.y=u.y||0,D[i]=0,a=i%w,o=~~(i/w),O=Math.max(O,c=Math.ceil(s.x2)),C=Math.max(C,l=Math.ceil(s.y2)),S[a]=Math.max(S[a],c),T[o]=Math.max(T[o],l),E[i]=b+ud(s.x1),A[i]=_+ud(s.y1),p&&t.dirty(e[i]);for(i=0;i<k;++i)i%w===0&&(E[i]=0),i<w&&(A[i]=0);if(m===Os)for(a=1;a<w;++a){for(d=0,i=a;i<k;i+=w)d<E[i]&&(d=E[i]);for(i=a;i<k;i+=w)E[i]=d+S[a-1]}else if(m===Ss){for(d=0,i=0;i<k;++i)i%w&&d<E[i]&&(d=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=d+O)}else for(m=!1,a=1;a<w;++a)for(i=a;i<k;i+=w)E[i]+=S[a-1];if(y===Os)for(o=1;o<x;++o){for(d=0,r=(i=o*w)+w;i<r;++i)d<A[i]&&(d=A[i]);for(i=o*w;i<r;++i)A[i]=d+T[o-1]}else if(y===Ss){for(d=0,i=w;i<k;++i)d<A[i]&&(d=A[i]);for(i=w;i<k;++i)A[i]=d+C}else for(y=!1,o=1;o<x;++o)for(r=(i=o*w)+w;i<r;++i)A[i]+=T[o-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),j[i]+=f-e[i].x;for(a=0;a<w;++a)for(h=0,i=a;i<k;i+=w)h+=A[i],D[i]+=h-e[i].y;if(m&&sd(n.center,Ts)&&x>1)for(i=0;i<k;++i)(f=(s=m===Ss?O:S[i%w])-R[i].x2-e[i].x-j[i])>0&&(j[i]+=f/2);if(y&&sd(n.center,Cs)&&1!==w)for(i=0;i<k;++i)(h=(s=y===Ss?C:T[~~(i/w)])-R[i].y2-e[i].y-D[i])>0&&(D[i]+=h/2);for(i=0;i<k;++i)g.union(R[i].translate(j[i],D[i]));switch(f=sd(n.anchor,is),h=sd(n.anchor,as),sd(n.anchor,Ts)){case rs:f-=g.width();break;case ns:f-=g.width()/2}switch(sd(n.anchor,Cs)){case rs:h-=g.height();break;case ns:h-=g.height()/2}for(f=Math.round(f),h=Math.round(h),g.clear(),i=0;i<k;++i)e[i].mark.bounds.clear();for(i=0;i<k;++i)(u=e[i]).x+=j[i]+=f,u.y+=D[i]+=h,g.union(u.mark.bounds.union(u.bounds.translate(j[i],D[i]))),p&&t.dirty(u);return g}function ld(t,e,n){var r,i,a,o,s,u,c,l=function(t){for(var e,n,r,i,a,o,s,u=t.items,c=u.length,l=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};l<c;++l)if(s=(o=u[l]).items,o.marktype===os)switch(o.role){case ss:case fs:break;case hs:(e=f.rowheaders).push.apply(e,Object(id.a)(s));break;case ds:(n=f.rowfooters).push.apply(n,Object(id.a)(s));break;case vs:(r=f.colheaders).push.apply(r,Object(id.a)(s));break;case gs:(i=f.colfooters).push.apply(i,Object(id.a)(s));break;case ps:f.rowtitle=s[0];break;case ms:f.coltitle=s[0];break;default:(a=f.marks).push.apply(a,Object(id.a)(s))}return f}(e),f=l.marks,h=n.bounds===As?fd:hd,d=n.offset,p=n.columns||f.length,v=p<0?1:Math.ceil(f.length/p),g=v*p,m=cd(t,f,n);l.rowheaders&&(u=sd(n.headerBand,Cs,null),r=vd(t,l.rowheaders,f,p,v,-sd(d,"rowHeader"),dd,0,h,"x1",0,p,1,u)),l.colheaders&&(u=sd(n.headerBand,Ts,null),i=vd(t,l.colheaders,f,p,p,-sd(d,"columnHeader"),dd,1,h,"y1",0,1,p,u)),l.rowfooters&&(u=sd(n.footerBand,Cs,null),a=vd(t,l.rowfooters,f,p,v,sd(d,"rowFooter"),pd,0,h,"x2",p-1,p,1,u)),l.colfooters&&(u=sd(n.footerBand,Ts,null),o=vd(t,l.colfooters,f,p,p,sd(d,"columnFooter"),pd,1,h,"y2",g-p,1,p,u)),l.rowtitle&&(s=sd(n.titleAnchor,Cs),c=sd(d,"rowTitle"),c=s===rs?a+c:r-c,u=sd(n.titleBand,Cs,.5),gd(t,l.rowtitle,c,0,m,u)),l.coltitle&&(s=sd(n.titleAnchor,Ts),c=sd(d,"columnTitle"),c=s===rs?o+c:i-c,u=sd(n.titleBand,Ts,.5),gd(t,l.coltitle,c,1,m,u))}function fd(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function hd(t,e){return t.bounds[e]}function dd(t,e){return Math.floor(Math.min(t,e))}function pd(t,e){return Math.ceil(Math.max(t,e))}function vd(t,e,n,r,i,a,o,s,u,c,l,f,h,d){var p,v,g,m,y,b,_,w,x,k=n.length,E=0,S=0;if(!k)return E;for(p=l;p<k;p+=f)n[p]&&(E=o(E,u(n[p],c)));if(!e.length)return E;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),E+=a,v=0,m=e.length;v<m;++v)t.dirty(e[v]),e[v].mark.bounds.clear();for(p=l,v=0,m=e.length;v<m;++v,p+=f){for(y=(b=e[v]).mark.bounds,g=p;g>=0&&null==(_=n[g]);g-=h);s?(w=null==d?_.x:Math.round(_.bounds.x1+d*_.bounds.width()),x=E):(w=E,x=null==d?_.y:Math.round(_.bounds.y1+d*_.bounds.height())),y.union(b.bounds.translate(w-(b.x||0),x-(b.y||0))),b.x=w,b.y=x,t.dirty(b),S=o(S,y[c])}return S}function gd(t,e,n,r,i,a){if(e){t.dirty(e);var o=n,s=n;r?o=Math.round(i.x1+a*i.width()):s=Math.round(i.y1+a*i.height()),e.bounds.translate(o-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=s,t.dirty(e)}}function md(t,e,n,r,i,a,o){var s=function(t,e){var n=t[e]||{};return function(e,r){return null!=n[e]?n[e]:null!=t[e]?t[e]:r}}(n,e),u=function(t,e){var n=-1/0;return t.forEach((function(t){null!=t.offset&&(n=Math.max(n,t.offset))})),n>-1/0?n:e}(t,s("offset",0)),c=s("anchor",es),l=c===rs?1:c===ns?.5:0,f={align:Os,bounds:s("bounds",As),columns:"vertical"===s("direction")?1:t.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(e){case $o:f.anchor={x:Math.floor(r.x1)-u,column:rs,y:l*(o||r.height()+2*r.y1),row:c};break;case Xo:f.anchor={x:Math.ceil(r.x2)+u,y:l*(o||r.height()+2*r.y1),row:c};break;case Vo:f.anchor={y:Math.floor(i.y1)-u,row:rs,x:l*(a||i.width()+2*i.x1),column:c};break;case Ko:f.anchor={y:Math.ceil(i.y2)+u,x:l*(a||i.width()+2*i.x1),column:c};break;case Jo:f.anchor={x:u,y:u};break;case Zo:f.anchor={x:a-u,y:u,column:rs};break;case Qo:f.anchor={x:u,y:o-u,row:rs};break;case ts:f.anchor={x:a-u,y:o-u,column:rs,row:rs}}return f}function yd(t,e){var n,r,i=e.items[0],a=i.datum,o=i.orient,s=i.bounds,u=i.x,c=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(t,e,n){var r=e.padding,i=r-n.x,a=r-n.y;if(e.datum.title){var o=e.items[1].items[0],s=o.anchor,u=e.titlePadding||0,c=r-o.x,l=r-o.y;switch(o.orient){case $o:i+=Math.ceil(o.bounds.width())+u;break;case Xo:case Ko:break;default:a+=o.fontSize+u}switch((i||a)&&_d(t,n,i,a),o.orient){case $o:l+=bd(e,n,o,s,0,1);break;case Xo:c+=bd(e,n,o,rs,1,0)+u,l+=bd(e,n,o,s,0,1);break;case Ko:c+=bd(e,n,o,s,1,0),l+=bd(e,n,o,rs,0,0,1)+u;break;default:c+=bd(e,n,o,s,1,0)}(c||l)&&_d(t,o,c,l),(c=Math.round(o.bounds.x1-r))<0&&(_d(t,n,-c,0),_d(t,o,-c,0))}else(i||a)&&_d(t,n,i,a)}(t,i,i.items[0].items[0]),s=function(t,e){return t.items.forEach((function(t){return e.union(t.bounds)})),e.x1=t.padding,e.y1=t.padding,e}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),a.type===bs&&function(t){var e=t.reduce((function(t,e){return t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t}),{});t.forEach((function(t){t.width=e[t.column],t.height=t.bounds.y2-t.y}))}(i.items[0].items[0].items[0].items),o!==Es&&(i.x=u=0,i.y=c=0),i.width=n,i.height=r,_l(s.set(u,c,u+n,c+r),i),i.mark.bounds.clear().union(s),i}function bd(t,e,n,r,i,a,o){var s="symbol"!==t.datum.type,u=n.datum.vgrad,c=(!s||!a&&u||o?e:e.items[0]).bounds[i?"x2":"y2"]-t.padding,l=u&&a?c:0,f=u&&a?0:c;return Math.round(r===es?l:r===rs?f:.5*c)}function _d(t,e,n,r){e.x+=n,e.y+=r,e.bounds.translate(n,r),e.mark.bounds.translate(n,r),t.dirty(e)}function wd(t){Ci.call(this,null,t)}Object(Ut.y)(wd,Ci).transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach((function(e){t.layout&&ld(n,e,t.layout),function(t,e,n){var r,i,a,o,s,u=e.items,c=Math.max(0,e.width||0),l=Math.max(0,e.height||0),f=(new js).set(0,0,c,l),h=f.clone(),d=f.clone(),p=[];for(o=0,s=u.length;o<s;++o)switch((i=u[o]).role){case ss:(ed(i)?h:d).union(nd(t,i,c,l));break;case us:r=i;break;case fs:p.push(yd(t,i));break;case cs:case ls:case hs:case ds:case ps:case vs:case gs:case ms:h.union(i.bounds),d.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){var v={};for(var g in p.forEach((function(t){(a=t.orient||Xo)!==Es&&(v[a]||(v[a]=[])).push(t)})),v){var m=v[g];cd(t,m,md(m,g,n.legends,h,d,c,l))}p.forEach((function(e){var r=e.bounds;if(r.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=r,t.dirty(e)),n.autosize&&n.autosize.type===_s)switch(e.orient){case $o:case Xo:f.add(r.x1,0).add(r.x2,0);break;case Vo:case Ko:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(h).union(d),r&&f.union(function(t,e,n,r,i){var a,o=e.items[0],s=o.frame,u=o.orient,c=o.anchor,l=o.offset,f=o.bounds,h=0,d=u===$o||u===Xo?r:n,p=0,v=0;switch(s!==os?u===$o?(h=i.y2,d=i.y1):u===Xo?(h=i.y1,d=i.y2):(h=i.x1,d=i.x2):u===$o&&(h=r,d=0),a=c===es?h:c===rs?d:(h+d)/2,Zh.clear().union(f),u){case Vo:p=a,v=i.y1-l;break;case $o:p=i.x1-l,v=a;break;case Xo:p=i.x2+l,v=a;break;case Ko:p=a,v=i.y2+l;break;default:p=o.x,v=o.y}return f.translate(p-(o.x||0),v-(o.y||0)),Qh(o,"x",p)|Qh(o,"y",v)&&(o.bounds=Zh,t.dirty(o),o.bounds=f,t.dirty(o)),e.bounds.clear().union(f)}(t,r,c,l,f));e.clip&&f.set(0,0,e.width||0,e.height||0);!function(t,e,n,r){var i=r.autosize||{},a=i.type,o=t._width,s=t._height,u=t.padding();if(t._autosize<1||!a)return;var c=Math.max(0,e.width||0),l=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,Math.ceil(n.x2-c)),h=Math.max(0,e.height||0),d=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-h));i.contains===ys&&(o-=u.left+u.right,s-=u.top+u.bottom);a===Es?(l=0,d=0,c=o,h=s):a===_s?(c=Math.max(0,o-l-f),h=Math.max(0,s-d-p)):a===ws?(c=Math.max(0,o-l-f),s=h+d+p):a===xs?(o=c+l+f,h=Math.max(0,s-d-p)):a===ks&&(o=c+l+f,s=h+d+p);t._resizeView(o,s,c,h,[l,d],i.resize)}(t,e,f,n)}(n,e,t)})),t.modified()&&e.reflow(),e};var xd=function(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0},kd="identity",Ed="linear",Sd="log",Od="pow",Ad="sqrt",Td="symlog",Cd="time",jd="utc",Dd="sequential",Rd="diverging",Md="quantile",Pd="quantize",Fd="threshold",Nd="ordinal",Ld="point",Id="band",Bd="bin-ordinal";function Ud(t){return t===Md}function zd(t){return function(t){return t&&t.startsWith(Dd)}(t)||function(t){return t&&t.startsWith(Rd)}(t)}function qd(t){return t===Sd||t.endsWith("-log")}function Wd(t){switch(t){case Ed:case Sd:case Od:case Ad:case Td:case Cd:case jd:case Dd:return!0}return!1}function Hd(t){return t===Bd||t===Nd||t===Id||t===Ld}function Gd(t){return t===Bd||t===Md||t===Pd||t===Fd}var Yd=hn((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Yd.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?hn((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Yd:null};var Vd=Yd,$d=(Yd.range,hn((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),Xd=$d,Kd=($d.range,hn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+e*dn)}),(function(t,e){return(e-t)/dn}),(function(t){return t.getMinutes()}))),Jd=Kd,Zd=(Kd.range,hn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*dn)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),Qd=Zd,tp=(Zd.range,hn((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),ep=tp,np=(tp.range,hn((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*dn)}),(function(t,e){return(e-t)/dn}),(function(t){return t.getUTCMinutes()}))),rp=np,ip=(np.range,hn((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),ap=ip,op=(ip.range,hn((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),sp=op,up=(op.range,{millisecond:Vd,second:Xd,minute:Jd,hour:Qd,day:Pn,week:On,month:ep,year:Nn}),cp={millisecond:Vd,second:Xd,minute:rp,hour:ap,day:En,week:gn,month:sp,year:In};function lp(t,e){var n=e===jd?cp:up;return Object(Ut.v)(n,t)&&n[t]}var fp=n(10),hp=function(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}},dp=function(t){return function(e){var n,r,i,a,o=t.range(),s=e[0],u=e[1],c=-1;for(u<s&&(r=s,s=u,u=r),i=0,a=o.length;i<a;++i)o[i]>=s&&o[i]<=u&&(c<0&&(c=i),n=i);if(!(c<0))return s=t.invertExtent(o[c]),u=t.invertExtent(o[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}},pp=zo(Vi),vp=pp.right,gp=pp.left,mp=vp;function yp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function bp(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var _p=Symbol("implicit");function wp(){var t=new Map,e=[],n=[],r=_p;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==_p)return r;t.set(a,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;var r=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value,l=c+"";t.has(l)||t.set(l,e.push(c))}}catch(f){a=!0,o=f}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return wp(e,n).unknown(r)},yp.apply(i,arguments),i}function xp(){var t,e,n=wp().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,c=.5;function l(){var n=r().length,l=a[1]<a[0],f=a[l-0],h=a[1-l],d=xd(n,s,u);t=(h-f)/(d||1),o&&(t=Math.floor(t)),f+=(h-f-t*(n-s))*c,e=t*(1-s),o&&(f=Math.round(f),e=Math.round(e));var p=Ro(n).map((function(e){return f+t*e}));return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,l()):o},n.padding=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),s=u,l()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var n,o,s,u=+t[0],c=+t[1],l=a[1]<a[0],f=l?i().reverse():i(),h=f.length-1;if(u===u&&c===c&&(c<u&&(s=u,u=c,c=s),!(c<f[0]||u>a[1-l])))return n=Math.max(0,vp(f,u)-1),o=u===c?n:vp(f,c)-1,u-f[n]>e+1e-10&&++n,l&&(s=n,n=h-o,o=h-s),n>o?void 0:r().slice(n,o+1)}},n.invert=function(t){var e=n.invertRange([t,t]);return e?e[0]:e},n.copy=function(){return xp().domain(r()).range(a).round(o).paddingInner(s).paddingOuter(u).align(c)},l()}var kp=Math.sqrt(50),Ep=Math.sqrt(10),Sp=Math.sqrt(2),Op=function(t,e,n){var r,i,a,o,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=Ap(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(t-s)/o;return r&&a.reverse(),a};function Ap(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=kp?10:a>=Ep?5:a>=Sp?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=kp?10:a>=Ep?5:a>=Sp?2:1)}function Tp(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=kp?i*=10:a>=Ep?i*=5:a>=Sp&&(i*=2),e<t?-i:i}var Cp=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},jp=function(t){return(t=Cp(Math.abs(t)))?t[1]:NaN},Dp=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rp(t){if(!(e=Dp.exec(t)))throw new Error("invalid format: "+t);var e;return new Mp({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Mp(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Rp.prototype=Mp.prototype,Mp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Pp,Fp,Np,Lp,Ip=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t},Bp=function(t,e){var n=Cp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Up={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Bp(100*t,e)},r:Bp,s:function(t,e){var n=Cp(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Pp=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Cp(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},zp=function(t){return t},qp=Array.prototype.map,Wp=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],Hp=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?zp:(e=qp.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?zp:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(qp.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Rp(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,v=t.comma,g=t.precision,m=t.trim,y=t.type;"n"===y?(v=!0,y="g"):Up[y]||(void 0===g&&(g=12),m=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===h?a:/[%p]/.test(y)?u:"",w=Up[y],x=/[defgprs%]/.test(y);function k(t){var i,a,u,h=b,k=_;if("c"===y)k=w(t)+k,t="";else{var E=(t=+t)<0;if(t=isNaN(t)?l:w(Math.abs(t),g),m&&(t=Ip(t)),E&&0===+t&&(E=!1),h=(E?"("===f?f:c:"-"===f||"("===f?"":f)+h,k=("s"===y?Wp[8+Pp/3]:"")+k+(E&&"("===f?")":""),x)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){k=(46===u?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}v&&!d&&(t=r(t,1/0));var S=h.length+t.length+k.length,O=S<p?new Array(p-S+1).join(e):"";switch(v&&d&&(t=r(O+t,O.length?p-k.length:1/0),O=""),n){case"<":t=h+t+k+O;break;case"=":t=h+O+t+k;break;case"^":t=O.slice(0,S=O.length>>1)+h+t+k+O.slice(S);break;default:t=O+h+t+k}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=Rp(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(jp(e)/3))),i=Math.pow(10,-r),a=Wp[8+r/3];return function(t){return n(i*t)+a}}}};function Gp(t){return Fp=Hp(t),Np=Fp.format,Lp=Fp.formatPrefix,Fp}Gp({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Yp=function(t,e,n,r){var i,a=Tp(t,e,n);switch((r=Rp(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jp(e)/3)))-jp(Math.abs(t)))}(a,o))||(r.precision=i),Lp(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,jp(e)-jp(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-jp(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return Np(r)},Vp=Array.prototype.map;function $p(t){return Vp.call(t,(function(t){return+t}))}var Xp=Array.prototype.slice;var Kp=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Jp(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Zp(){}var Qp="\\s*([+-]?\\d+)\\s*",tv="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ev="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nv=/^#([0-9a-f]{3,8})$/,rv=new RegExp("^rgb\\("+[Qp,Qp,Qp]+"\\)$"),iv=new RegExp("^rgb\\("+[ev,ev,ev]+"\\)$"),av=new RegExp("^rgba\\("+[Qp,Qp,Qp,tv]+"\\)$"),ov=new RegExp("^rgba\\("+[ev,ev,ev,tv]+"\\)$"),sv=new RegExp("^hsl\\("+[tv,ev,ev]+"\\)$"),uv=new RegExp("^hsla\\("+[tv,ev,ev,tv]+"\\)$"),cv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lv(){return this.rgb().formatHex()}function fv(){return this.rgb().formatRgb()}function hv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nv.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?dv(e):3===n?new mv(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new mv(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new mv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=rv.exec(t))?new mv(e[1],e[2],e[3],1):(e=iv.exec(t))?new mv(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=av.exec(t))?pv(e[1],e[2],e[3],e[4]):(e=ov.exec(t))?pv(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sv.exec(t))?wv(e[1],e[2]/100,e[3]/100,1):(e=uv.exec(t))?wv(e[1],e[2]/100,e[3]/100,e[4]):cv.hasOwnProperty(t)?dv(cv[t]):"transparent"===t?new mv(NaN,NaN,NaN,0):null}function dv(t){return new mv(t>>16&255,t>>8&255,255&t,1)}function pv(t,e,n,r){return r<=0&&(t=e=n=NaN),new mv(t,e,n,r)}function vv(t){return t instanceof Zp||(t=hv(t)),t?new mv((t=t.rgb()).r,t.g,t.b,t.opacity):new mv}function gv(t,e,n,r){return 1===arguments.length?vv(t):new mv(t,e,n,null==r?1:r)}function mv(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function yv(){return"#"+_v(this.r)+_v(this.g)+_v(this.b)}function bv(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function _v(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function wv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ev(t,e,n,r)}function xv(t){if(t instanceof Ev)return new Ev(t.h,t.s,t.l,t.opacity);if(t instanceof Zp||(t=hv(t)),!t)return new Ev;if(t instanceof Ev)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Ev(o,s,u,t.opacity)}function kv(t,e,n,r){return 1===arguments.length?xv(t):new Ev(t,e,n,null==r?1:r)}function Ev(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Sv(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ov(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}Kp(Zp,hv,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:lv,formatHex:lv,formatHsl:function(){return xv(this).formatHsl()},formatRgb:fv,toString:fv}),Kp(mv,gv,Jp(Zp,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new mv(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new mv(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yv,formatHex:yv,formatRgb:bv,toString:bv})),Kp(Ev,kv,Jp(Zp,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ev(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ev(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mv(Sv(t>=240?t-240:t+120,i,r),Sv(t,i,r),Sv(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Av=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return Ov((n-r/e)*e,o,i,a,s)}},Tv=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],s=t[(r+2)%e];return Ov((n-r/e)*e,i,a,o,s)}},Cv=function(t){return function(){return t}};function jv(t,e){return function(n){return t+n*e}}function Dv(t,e){var n=e-t;return n?jv(t,n>180||n<-180?n-360*Math.round(n/360):n):Cv(isNaN(t)?e:t)}function Rv(t){return 1===(t=+t)?Mv:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Cv(isNaN(e)?n:e)}}function Mv(t,e){var n=e-t;return n?jv(t,n):Cv(isNaN(t)?e:t)}var Pv=function t(e){var n=Rv(e);function r(t,e){var r=n((t=gv(t)).r,(e=gv(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Mv(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Fv(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=gv(e[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}var Nv=Fv(Av),Lv=Fv(Tv),Iv=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Xv(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}},Bv=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},Uv=function(t,e){return e-=t=+t,function(n){return t+e*n}},zv=function(t,e){var n,r={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?r[n]=Xv(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},qv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wv=new RegExp(qv.source,"g");var Hv,Gv,Yv,Vv,$v=function(t,e){var n,r,i,a=qv.lastIndex=Wv.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=qv.exec(t))&&(r=Wv.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Uv(n,r)})),a=Wv.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},Xv=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Cv(e):("number"===r?Uv:"string"===r?(n=hv(e))?(e=n,Pv):$v:e instanceof hv?Pv:e instanceof Date?Bv:Array.isArray(e)?Iv:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?zv:Uv)(t,e)},Kv=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},Jv=function(t,e){var n=Dv(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Zv=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},Qv=180/Math.PI,tg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},eg=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Qv,skewX:Math.atan(u)*Qv,scaleX:o,scaleY:s}};function ng(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Uv(t,i)},{i:u-2,x:Uv(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Uv(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Uv(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Uv(t,n)},{i:s-2,x:Uv(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var rg=ng((function(t){return"none"===t?tg:(Hv||(Hv=document.createElement("DIV"),Gv=document.documentElement,Yv=document.defaultView),Hv.style.transform=t,t=Yv.getComputedStyle(Gv.appendChild(Hv),null).getPropertyValue("transform"),Gv.removeChild(Hv),t=t.slice(7,-1).split(","),eg(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),ig=ng((function(t){return null==t?tg:(Vv||(Vv=document.createElementNS("http://www.w3.org/2000/svg","g")),Vv.setAttribute("transform",t),(t=Vv.transform.baseVal.consolidate())?(t=t.matrix,eg(t.a,t.b,t.c,t.d,t.e,t.f)):tg)}),", ",")",")"),ag=Math.SQRT2;function og(t){return((t=Math.exp(t))+1/t)/2}var sg=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-a,h=l*l+f*f;if(h<1e-12)r=Math.log(c/o)/ag,n=function(t){return[i+t*l,a+t*f,o*Math.exp(ag*t*r)]};else{var d=Math.sqrt(h),p=(c*c-o*o+4*h)/(2*o*2*d),v=(c*c-o*o-4*h)/(2*c*2*d),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/ag,n=function(t){var e,n=t*r,s=og(g),u=o/(2*d)*(s*(e=ag*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*l,a+u*f,o*s/og(ag*n+g)]}}return n.duration=1e3*r,n};function ug(t){return function(e,n){var r=t((e=kv(e)).h,(n=kv(n)).h),i=Mv(e.s,n.s),a=Mv(e.l,n.l),o=Mv(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}var cg=ug(Dv),lg=ug(Mv),fg=Math.PI/180,hg=180/Math.PI,dg=.96422,pg=1,vg=.82521,gg=4/29,mg=6/29,yg=3*mg*mg,bg=mg*mg*mg;function _g(t){if(t instanceof xg)return new xg(t.l,t.a,t.b,t.opacity);if(t instanceof Cg)return jg(t);t instanceof mv||(t=vv(t));var e,n,r=Og(t.r),i=Og(t.g),a=Og(t.b),o=kg((.2225045*r+.7168786*i+.0606169*a)/pg);return r===i&&i===a?e=n=o:(e=kg((.4360747*r+.3850649*i+.1430804*a)/dg),n=kg((.0139322*r+.0971045*i+.7141733*a)/vg)),new xg(116*o-16,500*(e-o),200*(o-n),t.opacity)}function wg(t,e,n,r){return 1===arguments.length?_g(t):new xg(t,e,n,null==r?1:r)}function xg(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function kg(t){return t>bg?Math.pow(t,1/3):t/yg+gg}function Eg(t){return t>mg?t*t*t:yg*(t-gg)}function Sg(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Og(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ag(t){if(t instanceof Cg)return new Cg(t.h,t.c,t.l,t.opacity);if(t instanceof xg||(t=_g(t)),0===t.a&&0===t.b)return new Cg(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*hg;return new Cg(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Tg(t,e,n,r){return 1===arguments.length?Ag(t):new Cg(t,e,n,null==r?1:r)}function Cg(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function jg(t){if(isNaN(t.h))return new xg(t.l,0,0,t.opacity);var e=t.h*fg;return new xg(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Dg(t,e){var n=Mv((t=wg(t)).l,(e=wg(e)).l),r=Mv(t.a,e.a),i=Mv(t.b,e.b),a=Mv(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function Rg(t){return function(e,n){var r=t((e=Tg(e)).h,(n=Tg(n)).h),i=Mv(e.c,n.c),a=Mv(e.l,n.l),o=Mv(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}Kp(xg,wg,Jp(Zp,{brighter:function(t){return new xg(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new xg(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new mv(Sg(3.1338561*(e=dg*Eg(e))-1.6168667*(t=pg*Eg(t))-.4906146*(n=vg*Eg(n))),Sg(-.9787684*e+1.9161415*t+.033454*n),Sg(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Kp(Cg,Tg,Jp(Zp,{brighter:function(t){return new Cg(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Cg(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return jg(this).rgb()}}));var Mg=Rg(Dv),Pg=Rg(Mv),Fg=-.29227,Ng=-.90649,Lg=1.97294,Ig=Lg*Ng,Bg=1.78277*Lg,Ug=1.78277*Fg- -.14861*Ng;function zg(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof qg)return new qg(t.h,t.s,t.l,t.opacity);t instanceof mv||(t=vv(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ug*r+Ig*e-Bg*n)/(Ug+Ig-Bg),a=r-i,o=(Lg*(n-i)-Fg*a)/Ng,s=Math.sqrt(o*o+a*a)/(Lg*i*(1-i)),u=s?Math.atan2(o,a)*hg-120:NaN;return new qg(u<0?u+360:u,s,i,t.opacity)}(t):new qg(t,e,n,null==r?1:r)}function qg(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Wg(t){return function e(n){function r(e,r){var i=t((e=zg(e)).h,(r=zg(r)).h),a=Mv(e.s,r.s),o=Mv(e.l,r.l),s=Mv(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}Kp(qg,zg,Jp(Zp,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qg(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qg(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*fg,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new mv(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(Fg*r+Ng*i)),255*(e+n*(Lg*r)),this.opacity)}}));var Hg=Wg(Dv),Gg=Wg(Mv);function Yg(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}var Vg=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},$g=function(t){return function(){return t}},Xg=function(t){return+t},Kg=[0,1];function Jg(t){return t}function Zg(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:$g(isNaN(e)?NaN:.5)}function Qg(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Zg(i,r),a=n(o,a)):(r=Zg(r,i),a=n(a,o)),function(t){return a(r(t))}}function tm(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Zg(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=mp(t,e,1,r)-1;return a[n](i[n](e))}}function em(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nm(){var t,e,n,r,i,a,o=Kg,s=Kg,u=Xv,c=Jg;function l(){var t=Math.min(o.length,s.length);return c!==Jg&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?tm:Qg,i=a=null,f}function f(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((a||(a=r(s,o.map(t),Uv)))(n)))},f.domain=function(t){return arguments.length?(o=Array.from(t,Xg),l()):o.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=Zv,l()},f.clamp=function(t){return arguments.length?(c=!!t||Jg,l()):c!==Jg},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function rm(){return nm()(Jg,Jg)}function im(t){var e=t.domain;return t.ticks=function(t){var n=e();return Op(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Yp(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,s=i[a],u=i[o];return u<s&&(r=s,s=u,u=r,r=a,a=o,o=r),(r=Ap(s,u,n))>0?r=Ap(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=Ap(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}var am=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t};function om(t){return Math.log(t)}function sm(t){return Math.exp(t)}function um(t){return-Math.log(-t)}function cm(t){return-Math.exp(-t)}function lm(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fm(t){return function(e){return-t(-e)}}function hm(t){var e,n,r=t(om,sm),i=r.domain,a=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(a),n=function(t){return 10===t?lm:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),i()[0]<0?(e=fm(e),n=fm(n),t(um,cm)):t(om,sm),r}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(i(t),o()):i()},r.ticks=function(t){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(h=s,s=u,u=h);var c,l,f,h=e(s),d=e(u),p=null==t?10:+t,v=[];if(!(a%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),s>0){for(;h<=d;++h)for(l=1,c=n(h);l<a;++l)if(!((f=c*l)<s)){if(f>u)break;v.push(f)}}else for(;h<=d;++h)for(l=a-1,c=n(h);l>=1;--l)if(!((f=c*l)<s)){if(f>u)break;v.push(f)}v.length||(v=Op(s,u,p))}else v=Op(h,d,Math.min(d-h,p)).map(n);return r?v.reverse():v},r.tickFormat=function(t,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=Np(i)),t===1/0)return i;null==t&&(t=10);var o=Math.max(1,a*t/r.ticks().length);return function(t){var r=t/n(Math.round(e(t)));return r*a<a-.5&&(r*=a),r<=o?i(t):""}},r.nice=function(){return i(am(i(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},r}function dm(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function pm(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vm(t){return t<0?-t*t:t*t}function gm(t){var e=t(Jg,Jg),n=1;function r(){return 1===n?t(Jg,Jg):.5===n?t(pm,vm):t(dm(n),dm(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},im(e)}function mm(){var t=gm(nm());return t.copy=function(){return em(t,mm()).exponent(t.exponent())},yp.apply(t,arguments),t}function ym(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bm(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function _m(t){var e=1,n=t(ym(e),bm(e));return n.constant=function(n){return arguments.length?t(ym(e=+n),bm(e)):e},im(n)}var wm=1e3,xm=60*wm,km=60*xm,Em=24*km,Sm=7*Em,Om=30*Em,Am=365*Em;function Tm(t){return new Date(t)}function Cm(t){return t instanceof Date?+t:+new Date(+t)}function jm(t,e,n,r,i,a,o,s,u){var c=rm(),l=c.invert,f=c.domain,h=u(".%L"),d=u(":%S"),p=u("%I:%M"),v=u("%I %p"),g=u("%a %d"),m=u("%b %d"),y=u("%B"),b=u("%Y"),_=[[o,1,wm],[o,5,5*wm],[o,15,15*wm],[o,30,30*wm],[a,1,xm],[a,5,5*xm],[a,15,15*xm],[a,30,30*xm],[i,1,km],[i,3,3*km],[i,6,6*km],[i,12,12*km],[r,1,Em],[r,2,2*Em],[n,1,Sm],[e,1,Om],[e,3,3*Om],[t,1,Am]];function w(s){return(o(s)<s?h:a(s)<s?d:i(s)<s?p:r(s)<s?v:e(s)<s?n(s)<s?g:m:t(s)<s?y:b)(s)}function x(e,n,r){if(null==e&&(e=10),"number"===typeof e){var i,a=Math.abs(r-n)/e,o=zo((function(t){return t[2]})).right(_,a);return o===_.length?(i=Tp(n/Am,r/Am,e),e=t):o?(i=(o=_[a/_[o-1][2]<_[o][2]/a?o-1:o])[1],e=o[0]):(i=Math.max(Tp(n,r,e),1),e=s),e.every(i)}return e}return c.invert=function(t){return new Date(l(t))},c.domain=function(t){return arguments.length?f(Array.from(t,Cm)):f().map(Tm)},c.ticks=function(t){var e,n=f(),r=n[0],i=n[n.length-1],a=i<r;return a&&(e=r,r=i,i=e),e=(e=x(t,r,i))?e.range(r,i+1):[],a?e.reverse():e},c.tickFormat=function(t,e){return null==e?w:u(e)},c.nice=function(t){var e=f();return(t=x(t,e[0],e[e.length-1]))?f(am(e,t)):c},c.copy=function(){return em(c,jm(t,e,n,r,i,a,o,s,u))},c}var Dm;function Rm(){var t,e,n,r,i,a=0,o=1,s=Jg,u=!1;function c(e){return isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}return c.domain=function(i){var s,u;return arguments.length?(s=i,u=Object(ga.a)(s,2),a=u[0],o=u[1],t=r(a=+a),e=r(o=+o),n=t===e?0:1/(e-t),c):[a,o]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=function(){return[s(0),s(1)]},c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),c}}function Mm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Pm(){var t=im(Rm()(Jg));return t.copy=function(){return Mm(t,Pm())},bp.apply(t,arguments)}function Fm(){var t=gm(Rm());return t.copy=function(){return Mm(t,Fm()).exponent(t.exponent())},bp.apply(t,arguments)}function Nm(){var t,e,n,r,i,a,o,s=0,u=.5,c=1,l=1,f=Jg,h=!1;function d(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(l*t<l*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}return d.domain=function(o){var f,h;return arguments.length?(f=o,h=Object(ga.a)(f,3),s=h[0],u=h[1],c=h[2],t=a(s=+s),e=a(u=+u),n=a(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,d):[s,u,c]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=function(){return[f(0),f(.5),f(1)]},d.unknown=function(t){return arguments.length?(o=t,d):o},function(o){return a=o,t=o(s),e=o(u),n=o(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,d}}function Lm(){var t=gm(Nm());return t.copy=function(){return Mm(t,Lm()).exponent(t.exponent())},bp.apply(t,arguments)}function Im(t,e){return arguments.length>1?(Bm[t]=function(t,e){return function(){var n=e();return n.invertRange||(n.invertRange=n.invert?hp(n):n.invertExtent?dp(n):void 0),n.type=t,n}}(t,e),this):Object(Ut.v)(Bm,t)?Bm[t]:void 0}var Bm=(Dm={},Object(fp.a)(Dm,kd,(function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Xg),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,Xg):[0,1],im(r)})),Object(fp.a)(Dm,Ed,(function t(){var e=rm();return e.copy=function(){return em(e,t())},yp.apply(e,arguments),im(e)})),Object(fp.a)(Dm,Sd,(function t(){var e=hm(nm()).domain([1,10]);return e.copy=function(){return em(e,t()).base(e.base())},yp.apply(e,arguments),e})),Object(fp.a)(Dm,Od,mm),Object(fp.a)(Dm,Ad,(function(){return mm.apply(null,arguments).exponent(.5)})),Object(fp.a)(Dm,Td,(function t(){var e=_m(nm());return e.copy=function(){return em(e,t()).constant(e.constant())},yp.apply(e,arguments)})),Object(fp.a)(Dm,Cd,(function(){return yp.apply(jm(Nn,ep,On,Pn,Qd,Jd,Xd,Vd,Wn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)})),Object(fp.a)(Dm,jd,(function(){return yp.apply(jm(In,sp,gn,En,ap,rp,Xd,Vd,Gn).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)})),Object(fp.a)(Dm,Dd,Pm),Object(fp.a)(Dm,Dd+"-"+Ed,Pm),Object(fp.a)(Dm,Dd+"-"+Sd,(function t(){var e=hm(Rm()).domain([1,10]);return e.copy=function(){return Mm(e,t()).base(e.base())},bp.apply(e,arguments)})),Object(fp.a)(Dm,Dd+"-"+Od,Fm),Object(fp.a)(Dm,Dd+"-"+Ad,(function(){return Fm.apply(null,arguments).exponent(.5)})),Object(fp.a)(Dm,Dd+"-"+Td,(function t(){var e=_m(Rm());return e.copy=function(){return Mm(e,t()).constant(e.constant())},bp.apply(e,arguments)})),Object(fp.a)(Dm,Rd+"-"+Ed,(function t(){var e=im(Nm()(Jg));return e.copy=function(){return Mm(e,t())},bp.apply(e,arguments)})),Object(fp.a)(Dm,Rd+"-"+Sd,(function t(){var e=hm(Nm()).domain([.1,1,10]);return e.copy=function(){return Mm(e,t()).base(e.base())},bp.apply(e,arguments)})),Object(fp.a)(Dm,Rd+"-"+Od,Lm),Object(fp.a)(Dm,Rd+"-"+Ad,(function(){return Lm.apply(null,arguments).exponent(.5)})),Object(fp.a)(Dm,Rd+"-"+Td,(function t(){var e=_m(Nm());return e.copy=function(){return Mm(e,t()).constant(e.constant())},bp.apply(e,arguments)})),Object(fp.a)(Dm,Md,(function t(){var e,n=[],r=[],i=[];function a(){var t=0,e=Math.max(1,r.length);for(i=new Array(e-1);++t<e;)i[t-1]=Ji(n,t/e);return o}function o(t){return isNaN(t=+t)?e:r[mp(i,t)]}return o.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];var e=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var u=o.value;null==u||isNaN(u=+u)||n.push(u)}}catch(c){r=!0,i=c}finally{try{e||null==s.return||s.return()}finally{if(r)throw i}}return n.sort(Vi),a()},o.range=function(t){return arguments.length?(r=Array.from(t),a()):r.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return i.slice()},o.copy=function(){return t().domain(n).range(r).unknown(e)},yp.apply(o,arguments)})),Object(fp.a)(Dm,Pd,(function t(){var e,n=0,r=1,i=1,a=[.5],o=[0,1];function s(t){return t<=t?o[mp(a,t,0,i)]:e}function u(){var t=-1;for(a=new Array(i);++t<i;)a[t]=((t+1)*r-(t-i)*n)/(i+1);return s}return s.domain=function(t){var e,i;return arguments.length?(e=t,i=Object(ga.a)(e,2),n=i[0],r=i[1],n=+n,r=+r,u()):[n,r]},s.range=function(t){return arguments.length?(i=(o=Array.from(t)).length-1,u()):o.slice()},s.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=i?[a[i-1],r]:[a[e-1],a[e]]},s.unknown=function(t){return arguments.length?(e=t,s):s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([n,r]).range(o).unknown(e)},yp.apply(im(s),arguments)})),Object(fp.a)(Dm,Fd,(function t(){var e,n=[.5],r=[0,1],i=1;function a(t){return t<=t?r[mp(n,t,0,i)]:e}return a.domain=function(t){return arguments.length?(n=Array.from(t),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(t){return arguments.length?(r=Array.from(t),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(r).unknown(e)},yp.apply(a,arguments)})),Object(fp.a)(Dm,Bd,(function t(){var e=[],n=[];function r(t){return null==t||t!==t?void 0:n[(mp(e,t)-1)%n.length]}return r.domain=function(t){return arguments.length?(e=$p(t),r):e.slice()},r.range=function(t){return arguments.length?(n=Xp.call(t),r):n.slice()},r.tickFormat=function(t,n){return Yp(e[0],Object(Ut.S)(e),null==t?10:t,n)},r.copy=function(){return t().domain(r.domain()).range(r.range())},r})),Object(fp.a)(Dm,Nd,wp),Object(fp.a)(Dm,Id,xp),Object(fp.a)(Dm,Ld,(function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t(n())},e}(xp().paddingInner(1))})),Dm);for(var Um in Bm)Im(Um,Bm[Um]);var zm=["clamp","base","constant","exponent"];function qm(t,e){var n=e[0],r=Object(Ut.S)(e)-n;return function(e){return t(n+e*r)}}function Wm(t,e,n){return Yg(Ym(e||"rgb",n),t)}function Hm(t,e){for(var n=new Array(e),r=e+1,i=0;i<e;)n[i]=t(++i/r);return n}function Gm(t,e,n){var r,i,a,o=n-e;return o&&isFinite(o)?(r=(i=t.type).indexOf("-"),i=r<0?i:i.slice(r+1),a=Im(i)().domain([e,n]).range([0,1]),zm.forEach((function(e){return t[e]?a[e](t[e]()):0})),a):Object(Ut.l)(.5)}function Ym(t,e){var n=a[function(t){return"interpolate"+t.toLowerCase().split("-").map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function Vm(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function $m(t,e){for(var n in t)Km(n,e(t[n]))}var Xm={};function Km(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Xm[t]=e,this):Xm[t]}function Jm(t,e,n){var r;return Object(Ut.E)(e)&&null!=n&&(e=Math.min(e,~~(Object(Ut.V)(t.domain())/n)||1)),Object(Ut.F)(e)&&(r=e.step,e=e.interval),Object(Ut.H)(e)&&(e=lp(e,t.type)||Object(Ut.n)("Only time and utc scales accept interval strings."),r&&(e=e.every(r))),e}function Zm(t,e,n){var r=t.range(),i=Math.floor(r[0]),a=Math.ceil(Object(Ut.S)(r));if(i>a&&(r=a,a=i,i=r),e=e.filter((function(e){return e=t(e),i<=e&&e<=a})),n>0&&e.length>1){for(var o=[e[0],Object(Ut.S)(e)];e.length>n&&e.length>=3;)e=e.filter((function(t,e){return!(e%2)}));e.length<3&&(e=o)}return e}function Qm(t,e){return t.bins?Zm(t,t.bins):t.ticks?t.ticks(e):t.domain()}function ty(t,e,n,r){var i,a,o=t.tickFormat?t.tickFormat(e,n):n&&r===Cd?Wn(n):n?Np(n):String;if(qd(t.type)){var s=function(t){var e=Rp(t||",");if(null==e.precision){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return n=Np(e),r=Np(".1f")(1)[1],function(t){var e,i,a=n(t),o=a.indexOf(r);if(o<0)return a;for(i=(e=function(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}(a,o))<a.length?a.slice(e):"";--e>o;)if("0"!==a[e]){++e;break}return a.slice(0,e)+i}}return Np(e);var n,r}(n);o=t.bins?s:(i=o,a=s,function(t){return i(t)?a(t):""})}return o}function ey(t){Ci.call(this,null,t)}function ny(t){Ci.call(this,null,t)}function ry(){return Kt({})}function iy(t){return t.exit}function ay(t){Ci.call(this,null,t)}$m({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Vm),$m({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(t){return Wm(Vm(t))})),Object(Ut.y)(ey,Ci).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,a=Jm(i,null==t.count?t.values?t.values.length:10:t.count,t.minstep),o=t.format||ty(i,a,t.formatSpecifier,t.formatType),s=t.values?Zm(i,t.values,a):Qm(i,a);return r&&(n.rem=r),r=s.map((function(t,e){return Kt({index:e/(s.length-1||1),value:t,label:o(t)})})),t.extra&&r.length&&r.push(Kt({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Object(Ut.y)(ny,Ci).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||ry,a=t.key||$t,o=this.value;return Object(Ut.A)(r.encode)&&(r.encode=null),o&&(t.modified("key")||e.modified(a))&&Object(Ut.n)("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=Object(Ut.s)().test(iy),o.lookup=function(t){return o.get(a(t))}),e.visit(e.ADD,(function(t){var e=a(t),n=o.get(e);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(e,n=i(t)),r.add.push(n)),n.datum=t,n.exit=!1})),e.visit(e.MOD,(function(t){var e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))})),e.visit(e.REM,(function(t){var e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),e.changed(e.ADD_MOD)&&r.modifies("datum"),t.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},Object(Ut.y)(ay,Ci).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.mod||!1,i=t.encoders,a=e.encode;if(Object(Ut.A)(a)){if(!n.changed()&&!a.every((function(t){return i[t]})))return e.StopPropagation;a=a[0],n.encode=null}var o="enter"===a,s=i.update||Ut.r,u=i.enter||Ut.r,c=i.exit||Ut.r,l=(a&&!o?i[a]:s)||Ut.r;if(e.changed(e.ADD)&&(e.visit(e.ADD,(function(e){u(e,t),s(e,t)})),n.modifies(u.output),n.modifies(s.output),l!==Ut.r&&l!==s&&(e.visit(e.ADD,(function(e){l(e,t)})),n.modifies(l.output))),e.changed(e.REM)&&c!==Ut.r&&(e.visit(e.REM,(function(e){c(e,t)})),n.modifies(c.output)),o||l!==Ut.r){var f=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(f,(function(e){var i=u(e,t)||r;(l(e,t)||i)&&n.mod.push(e)})),n.mod.length&&n.modifies(u.output)):e.visit(f,(function(e){(l(e,t)||r)&&n.mod.push(e)})),n.mod.length&&n.modifies(l.output)}return n.changed()?n:e.StopPropagation};var oy,sy,uy="symbol",cy="discrete",ly=(oy={},Object(fp.a)(oy,Md,"quantiles"),Object(fp.a)(oy,Pd,"thresholds"),Object(fp.a)(oy,Fd,"domain"),oy),fy=(sy={},Object(fp.a)(sy,Md,"quantiles"),Object(fp.a)(sy,Pd,"domain"),sy);function hy(t,e){return t.bins?function(t){var e=t.slice(0,-1);return e.max=Object(Ut.S)(t),e}(t.bins):ly[t.type]?function(t){var e=[-1/0].concat(t);return e.max=1/0,e}(t[ly[t.type]]()):Qm(t,e)}function dy(t,e,n,r,i){var a=fy[t.type]&&i!==Cd?function(t,e){var n,r=t[fy[t.type]](),i=r.length,a=i>1?r[1]-r[0]:r[0];for(n=1;n<i;++n)a=Math.min(a,r[n]-r[n-1]);return Yp(0,a,30,e)}(t,r):ty(t,e,r,i);return n===uy&&function(t){return ly[t.type]||t.bins}(t)?function(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,a=py(e,t),o=py(i,t);return a&&o?a+"\u2013"+o:o?"< "+o:"\u2265 "+a}}(a):n===cy?function(t){return function(e,n){return n?t(e):null}}(a):function(t){return function(e){return t(e)}}(a)}function py(t,e){return isFinite(t)?e(t):null}function vy(t){Ci.call(this,[],t)}Object(Ut.y)(vy,Ci).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,r,i,a,o=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=this.value,u=t.type||uy,c=t.scale,l=Jm(c,null==t.count?5:t.count,t.minstep),f=t.format||dy(c,l,u,t.formatSpecifier,t.formatType),h=t.values||hy(c,l);return s&&(o.rem=s),u===uy?(Object(Ut.D)(i=t.size)?(t.values||0!==c(h[0])||(h=h.slice(1)),a=h.reduce((function(e,n){return Math.max(e,i(n,t))}),0)):i=Object(Ut.l)(a=i||8),s=h.map((function(e,n){return Kt({index:n,label:f(e,n,h),value:e,offset:a,size:i(e,t)})}))):"gradient"===u?(n=c.domain(),r=Gm(c,n[0],Object(Ut.S)(n)),h.length<3&&!t.values&&n[0]!==Object(Ut.S)(n)&&(h=[n[0],Object(Ut.S)(n)]),s=h.map((function(t,e){return Kt({index:e,label:f(t,e,h),value:t,perc:r(t)})}))):(i=h.length-1,r=function(t){var e=t.domain(),n=e.length-1,r=+e[0],i=+Object(Ut.S)(e),a=i-r;if(t.type===Fd){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(t){return(t-r)/a}}(c),s=h.map((function(t,e){return Kt({index:e,label:f(t,e,h),value:t,perc:e?r(t):0,perc2:e===i?1:r(h[e+1])})}))),o.source=s,o.add=s,this.value=s,o};var gy=Object(Ut.s)({line:xy,"line-radial":function(t,e,n,r){return xy(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},arc:ky,"arc-radial":function(t,e,n,r){return ky(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},curve:Ey,"curve-radial":function(t,e,n,r){return Ey(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n},"orthogonal-vertical":function(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r},"orthogonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*i+","+e*a+"A"+e+","+e+" 0 0,"+(u?1:0)+" "+e*o+","+e*s+"L"+r*o+","+r*s},"diagonal-horizontal":function(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),u=(e+r)/2;return"M"+e*i+","+e*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}});function my(t){return t.source.x}function yy(t){return t.source.y}function by(t){return t.target.x}function _y(t){return t.target.y}function wy(t){Ci.call(this,{},t)}function xy(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function ky(t,e,n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2;return"M"+t+","+e+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function Ey(t,e,n,r){var i=n-t,a=r-e,o=.2*(i+a),s=.2*(a-i);return"M"+t+","+e+"C"+(t+o)+","+(e+s)+" "+(n+s)+","+(r-o)+" "+n+","+r}function Sy(t){Ci.call(this,null,t)}wy.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(Ut.y)(wy,Ci).transform=function(t,e){var n=t.sourceX||my,r=t.sourceY||yy,i=t.targetX||by,a=t.targetY||_y,o=t.as||"path",s=t.orient||"vertical",u=t.shape||"line",c=gy.get(u+"-"+s)||gy.get(u);return c||Object(Ut.n)("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,(function(t){t[o]=c(n(t),r(t),i(t),a(t))})),e.reflow(t.modified()).modifies(o)},Sy.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(Ut.y)(Sy,Ci).transform=function(t,e){var n,r,i,a=t.as||["startAngle","endAngle"],o=a[0],s=a[1],u=t.field||Ut.M,c=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,f=e.source,h=f.map(u),d=h.length,p=c,v=(l-c)/function(t,e){var n=0;if(void 0===e){var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;(u=+u)&&(n+=u)}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var c=-1,l=!0,f=!1,h=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;(v=+e(v,++c,t))&&(n+=v)}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}return n}(h),g=Ro(d);for(t.sort&&g.sort((function(t,e){return h[t]-h[e]})),n=0;n<d;++n)i=h[g[n]],(r=f[g[n]])[o]=p,r[s]=p+=i*v;return this.value=h,e.reflow(t.modified()).modifies(a)};var Oy=5;function Ay(t){return Wd(t)&&t!==Dd}var Ty=Object(Ut.bb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Cy(t){Ci.call(this,null,t),this.modified(!0)}function jy(t,e,n){qd(t)&&(Math.abs(e.reduce((function(t,e){return t+(e<0?-1:e>0?1:0)}),0))!==e.length&&n.warn("Log scale domain includes zero: "+Object(Ut.X)(e)));return e}function Dy(t,e,n){return Object(Ut.D)(t)&&(e||n)?qm(t,Ry(e||[0,1],n)):t}function Ry(t,e){return e?t.slice().reverse():t}function My(t){Ci.call(this,null,t)}Object(Ut.y)(Cy,Ci).transform=function(t,e){var n=e.dataflow,r=this.value,i=function(t){var e,n=t.type,r="";if(n===Dd)return Dd+"-"+Ed;(function(t){var e=t.type;return Wd(e)&&e!==Cd&&e!==jd&&(t.scheme||t.range&&t.range.length&&t.range.every(Ut.H))})(t)&&(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0,r=2===e?Dd+"-":3===e?Rd+"-":"");return(r+n||Ed).toLowerCase()}(t);for(i in r&&i===r.type||(this.value=r=Im(i)()),t)if(!Ty[i]){if("padding"===i&&Ay(r.type))continue;Object(Ut.D)(r[i])?r[i](t[i]):n.warn("Unsupported scale property: "+i)}return function(t,e,n){var r=t.type,i=e.round||!1,a=e.range;if(null!=e.rangeStep)a=function(t,e,n){t!==Id&&t!==Ld&&Object(Ut.n)("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===Ld?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*xd(n,i,r)]}(r,e,n);else if(e.scheme&&(a=function(t,e,n){var r,i,a=e.schemeExtent;Object(Ut.A)(e.scheme)?i=Wm(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),(i=Km(r))||Object(Ut.n)("Unrecognized scheme name: ".concat(e.scheme)));return n=t===Fd?n+1:t===Bd?n-1:t===Md||t===Pd?+e.schemeCount||Oy:n,zd(t)?Dy(i,a,e.reverse):Object(Ut.D)(i)?Hm(Dy(i,a),n):t===Nd?i:i.slice(0,n)}(r,e,n),Object(Ut.D)(a))){if(t.interpolator)return t.interpolator(a);Object(Ut.n)("Scale type ".concat(r," does not support interpolating color schemes."))}if(a&&zd(r))return t.interpolator(Wm(Ry(a,e.reverse),e.interpolate,e.interpolateGamma));a&&e.interpolate&&t.interpolate?t.interpolate(Ym(e.interpolate,e.interpolateGamma)):Object(Ut.D)(t.round)?t.round(i):Object(Ut.D)(t.rangeRound)&&t.interpolate(i?Zv:Xv);a&&t.range(Ry(a,e.reverse))}(r,t,function(t,e,n){var r=e.bins;if(r&&!Object(Ut.A)(r)){var i=t.domain(),a=i[0],o=Object(Ut.S)(i),s=null==r.start?a:r.start,u=null==r.stop?o:r.stop,c=r.step;c||Object(Ut.n)("Scale bins parameter missing step property."),s<a&&(s=c*Math.ceil(a/c)),u>o&&(u=c*Math.floor(o/c)),r=Ro(s,u+c/2,c)}r?t.bins=r:t.bins&&delete t.bins;t.type===Bd&&(r?e.domain||e.domainRaw||(t.domain(r),n=r.length):t.bins=t.domain());return n}(r,t,function(t,e,n){var r=function(t,e,n){return e?(t.domain(jy(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(r>-1)return r;var i,a,o=e.domain,s=t.type,u=e.zero||void 0===e.zero&&function(t){var e=t.type;return!t.bins&&(e===Ed||e===Od||e===Ad)}(t);if(!o)return 0;Ay(s)&&e.padding&&o[0]!==Object(Ut.S)(o)&&(o=function(t,e,n,r,i,a){var o=Math.abs(Object(Ut.S)(n)-n[0]),s=o/(o-2*r),u=t===Sd?Object(Ut.jb)(e,null,s):t===Ad?Object(Ut.kb)(e,null,s,.5):t===Od?Object(Ut.kb)(e,null,s,i||1):t===Td?Object(Ut.lb)(e,null,s,a||1):Object(Ut.ib)(e,null,s);return(e=e.slice())[0]=u[0],e[e.length-1]=u[1],e}(s,o,e.range,e.padding,e.exponent,e.constant));(u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,u&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid&&(((a=e.domainMid)<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a)));t.domain(jy(s,o,n)),s===Nd&&t.unknown(e.domainImplicit?_p:void 0);e.nice&&t.nice&&t.nice(!0!==e.nice&&Jm(t,e.nice)||null);return o.length}(r,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)},Object(Ut.y)(My,Ci).transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(te(t.sort)),this.modified(n),e};var Py=["y0","y1"];function Fy(t){Ci.call(this,null,t)}function Ny(t,e,n,r,i){for(var a,o=(e-t.sum)/2,s=t.length,u=0;u<s;++u)(a=t[u])[r]=o,a[i]=o+=Math.abs(n(a))}function Ly(t,e,n,r,i){for(var a,o=1/t.sum,s=0,u=t.length,c=0,l=0;c<u;++c)(a=t[c])[r]=s,a[i]=s=o*(l+=Math.abs(n(a)))}function Iy(t,e,n,r,i){for(var a,o,s=0,u=0,c=t.length,l=0;l<c;++l)(a=+n(o=t[l]))<0?(o[r]=u,o[i]=u+=a):(o[r]=s,o[i]=s+=a)}Fy.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:Py}]},Object(Ut.y)(Fy,Ci).transform=function(t,e){var n,r,i,a,o=t.as||Py,s=o[0],u=o[1],c=te(t.sort),l=t.field||Ut.M,f="center"===t.offset?Ny:"normalize"===t.offset?Ly:Iy;for(n=function(t,e,n,r){var i,a,o,s,u,c,l,f,h,d=[],p=function(t){return t(u)};if(null==e)d.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)u=t[a],c=e.map(p),(l=i[c])||(i[c]=l=[],d.push(l)),l.push(u);for(c=0,h=0,s=d.length;c<s;++c){for(l=d[c],a=0,f=0,o=l.length;a<o;++a)f+=Math.abs(r(l[a]));l.sum=f,f>h&&(h=f),n&&l.sort(n)}return d.max=h,d}(e.source,t.groupby,c,l),r=0,i=n.length,a=n.max;r<i;++r)f(n[r],a,l,s,u);return e.reflow(t.modified()).modifies(o)};var By=function(t,e){var n,r;if(void 0===e){var i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;null!=c&&(void 0===n?c>=c&&(n=r=c):(n>c&&(n=c),r<c&&(r=c)))}}catch(m){a=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var l=-1,f=!0,h=!1,d=void 0;try{for(var p,v=t[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;null!=(g=e(g,++l,t))&&(void 0===n?g>=g&&(n=r=g):(n>g&&(n=g),r<g&&(r=g)))}}catch(m){h=!0,d=m}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}return[n,r]},Uy=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var zy=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Uy(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}(Uy);zy.right,zy.left;var qy=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},Wy=Array.prototype,Hy=(Wy.slice,Wy.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),Gy=Math.sqrt(50),Yy=Math.sqrt(10),Vy=Math.sqrt(2);function $y(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Gy?i*=10:a>=Yy?i*=5:a>=Vy&&(i*=2),e<t?-i:i}var Xy=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},Ky=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r};var Jy=Array.prototype.slice,Zy=function(t,e){return t-e},Qy=function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r},tb=function(t){return function(){return t}},eb=function(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=nb(t,e[r]))return n;return 0};function nb(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],c=u[0],l=u[1],f=t[s],h=f[0],d=f[1];if(rb(u,f,e))return 0;l>r!==d>r&&n<(h-c)*(r-l)/(d-l)+c&&(i=-i)}return i}function rb(t,e,n){var r,i,a,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],a=n[r],o=e[r],i<=a&&a<=o||o<=a&&a<=i)}var ib=function(){},ab=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],ob=function(){var t=1,e=1,n=Xy,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Zy);else{var r=qy(t),i=r[0],o=r[1];e=$y(i,o,e),e=Hy(Math.floor(i/e)*e,Math.floor(o/e)*e,e)}return e.map((function(e){return a(t,e)}))}function a(n,i){var a=[],s=[];return function(n,r,i){var a,s,u,c,l,f,h=new Array,d=new Array;a=s=-1,c=n[0]>=r,ab[c<<1].forEach(p);for(;++a<t-1;)u=c,c=n[a+1]>=r,ab[u|c<<1].forEach(p);ab[c<<0].forEach(p);for(;++s<e-1;){for(a=-1,c=n[s*t+t]>=r,l=n[s*t]>=r,ab[c<<1|l<<2].forEach(p);++a<t-1;)u=c,c=n[s*t+t+a+1]>=r,f=l,l=n[s*t+a+1]>=r,ab[u|c<<1|l<<2|f<<3].forEach(p);ab[c|l<<3].forEach(p)}a=-1,l=n[s*t]>=r,ab[l<<2].forEach(p);for(;++a<t-1;)f=l,l=n[s*t+a+1]>=r,ab[l<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+a,t[0][1]+s],u=[t[1][0]+a,t[1][1]+s],c=o(r),l=o(u);(e=d[c])?(n=h[l])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=l]=e):(e=h[l])?(n=d[c])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=c]=e):h[c]=d[l]={start:c,end:l,ring:[r,u]}}ab[l<<3].forEach(p)}(n,i,(function(t){r(t,n,i),Qy(t)>0?a.push([t]):s.push(t)})),s.forEach((function(t){for(var e,n=0,r=a.length;n<r;++n)if(-1!==eb((e=a[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var a,o=n[0],s=n[1],u=0|o,c=0|s,l=r[c*t+u];o>0&&o<t&&u===o&&(a=r[c*t+u-1],n[0]=o+(i-a)/(l-a)-.5),s>0&&s<e&&c===s&&(a=r[(c-1)*t+u],n[1]=s+(i-a)/(l-a)-.5)}))}return i.contour=a,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.ceil(n[0]),a=Math.ceil(n[1]);if(!(r>0)||!(a>0))throw new Error("invalid size");return t=r,e=a,i},i.thresholds=function(t){return arguments.length?(n="function"===typeof t?t:Array.isArray(t)?tb(Jy.call(t)):tb(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:ib,i):r===s},i};function sb(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[s+o*r]),s>=n&&(s>=a&&(u-=t.data[s-a+o*r]),e.data[s-n+o*r]=u/Math.min(s+1,r-1+a-s,a))}function ub(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[o+s*r]),s>=n&&(s>=a&&(u-=t.data[o+(s-a)*r]),e.data[o+(s-n)*r]=u/Math.min(s+1,i-1+a-s,a))}function cb(t){return t[0]}function lb(t){return t[1]}function fb(){return 1}var hb=["size","smooth"],db=["x","y","weight","size","cellSize","bandwidth"];function pb(t){Ci.call(this,null,t)}pb.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},Object(Ut.y)(pb,Ci).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i,a,o=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=t.count||10;return t.values?(n=ob(),r=hb,i=t.values):(n=function(){var t=cb,e=lb,n=fb,r=960,i=500,a=20,o=2,s=3*a,u=r+2*s>>o,c=i+2*s>>o,l=tb(20);function f(r){var i=new Float32Array(u*c),f=new Float32Array(u*c);r.forEach((function(r,a,l){var f=+t(r,a,l)+s>>o,h=+e(r,a,l)+s>>o,d=+n(r,a,l);f>=0&&f<u&&h>=0&&h<c&&(i[f+h*u]+=d)})),sb({width:u,height:c,data:i},{width:u,height:c,data:f},a>>o),ub({width:u,height:c,data:f},{width:u,height:c,data:i},a>>o),sb({width:u,height:c,data:i},{width:u,height:c,data:f},a>>o),ub({width:u,height:c,data:f},{width:u,height:c,data:i},a>>o),sb({width:u,height:c,data:i},{width:u,height:c,data:f},a>>o),ub({width:u,height:c,data:f},{width:u,height:c,data:i},a>>o);var d=l(i);if(!Array.isArray(d)){var p=Ky(i);d=$y(0,p,d),(d=Hy(0,Math.floor(p/d)*d,d)).shift()}return ob().thresholds(d).size([u,c])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function g(){return u=r+2*(s=3*a)>>o,c=i+2*s>>o,f}return f.x=function(e){return arguments.length?(t="function"===typeof e?e:tb(+e),f):t},f.y=function(t){return arguments.length?(e="function"===typeof t?t:tb(+t),f):e},f.weight=function(t){return arguments.length?(n="function"===typeof t?t:tb(+t),f):n},f.size=function(t){if(!arguments.length)return[r,i];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0)&&!(e>=0))throw new Error("invalid size");return r=e,i=n,g()},f.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),g()},f.thresholds=function(t){return arguments.length?(l="function"===typeof t?t:Array.isArray(t)?tb(Jy.call(t)):tb(t),f):l},f.bandwidth=function(t){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},f}(),r=db,i=e.materialize(e.SOURCE).source),n.thresholds(t.thresholds||(t.nice?s:(a=s,function(t){for(var e=By(t),n=e[0],r=e[1]-n,i=[],o=1;o<=a;++o)i.push(n+r*o/(a+1));return i}))),r.forEach((function(e){null!=t[e]&&n[e](t[e])})),this.value&&(o.rem=this.value),i=i&&i.length?n(i).map(Kt):[],this.value=o.source=o.add=i,o};var vb="Feature",gb="FeatureCollection";function mb(t){Ci.call(this,null,t)}mb.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(Ut.y)(mb,Ci).transform=function(t,e){var n,r=this._features,i=this._points,a=t.fields,o=a&&a[0],s=a&&a[1],u=t.geojson,c=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified(Object(Ut.g)(u))||o&&e.modified(Object(Ut.g)(o))||s&&e.modified(Object(Ut.g)(s)),this.value&&!n||(c=e.SOURCE,this._features=r=[],this._points=i=[]),u&&e.visit(c,(function(t){r.push(u(t))})),o&&s&&(e.visit(c,(function(t){var e=o(t),n=s(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&i.push([e,n])})),r=r.concat({type:vb,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:gb,features:r}};var yb=function(){return new bb};function bb(){this.reset()}bb.prototype={constructor:bb,reset:function(){this.s=this.t=0},add:function(t){wb(_b,t,this.t),wb(this,_b.s,this.s),this.s?this.t+=_b.t:this.s=_b.t},valueOf:function(){return this.s}};var _b=new bb;function wb(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}var xb=1e-6,kb=1e-12,Eb=Math.PI,Sb=Eb/2,Ob=Eb/4,Ab=2*Eb,Tb=180/Eb,Cb=Eb/180,jb=Math.abs,Db=Math.atan,Rb=Math.atan2,Mb=Math.cos,Pb=Math.ceil,Fb=Math.exp,Nb=(Math.floor,Math.log),Lb=Math.pow,Ib=Math.sin,Bb=Math.sign||function(t){return t>0?1:t<0?-1:0},Ub=Math.sqrt,zb=Math.tan;function qb(t){return t>1?0:t<-1?Eb:Math.acos(t)}function Wb(t){return t>1?Sb:t<-1?-Sb:Math.asin(t)}function Hb(){}function Gb(t,e){t&&Vb.hasOwnProperty(t.type)&&Vb[t.type](t,e)}var Yb={Feature:function(t,e){Gb(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Gb(n[r].geometry,e)}},Vb={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){$b(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$b(n[r],e,0)},Polygon:function(t,e){Xb(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Xb(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Gb(n[r],e)}};function $b(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Xb(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)$b(t[n],e,1);e.polygonEnd()}var Kb,Jb,Zb,Qb,t_,e_=function(t,e){t&&Yb.hasOwnProperty(t.type)?Yb[t.type](t,e):Gb(t,e)},n_=yb(),r_=yb(),i_={point:Hb,lineStart:Hb,lineEnd:Hb,polygonStart:function(){n_.reset(),i_.lineStart=a_,i_.lineEnd=o_},polygonEnd:function(){var t=+n_;r_.add(t<0?Ab+t:t),this.lineStart=this.lineEnd=this.point=Hb},sphere:function(){r_.add(Ab)}};function a_(){i_.point=s_}function o_(){u_(Kb,Jb)}function s_(t,e){i_.point=u_,Kb=t,Jb=e,Zb=t*=Cb,Qb=Mb(e=(e*=Cb)/2+Ob),t_=Ib(e)}function u_(t,e){var n=(t*=Cb)-Zb,r=n>=0?1:-1,i=r*n,a=Mb(e=(e*=Cb)/2+Ob),o=Ib(e),s=t_*o,u=Qb*a+s*Mb(i),c=s*r*Ib(i);n_.add(Rb(c,u)),Zb=t,Qb=a,t_=o}function c_(t){return[Rb(t[1],t[0]),Wb(t[2])]}function l_(t){var e=t[0],n=t[1],r=Mb(n);return[r*Mb(e),r*Ib(e),Ib(n)]}function f_(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function h_(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function d_(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function p_(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function v_(t){var e=Ub(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var g_,m_,y_,b_,__,w_,x_,k_,E_,S_,O_=yb(),A_={point:T_,lineStart:j_,lineEnd:D_,polygonStart:function(){A_.point=R_,A_.lineStart=M_,A_.lineEnd=P_,O_.reset(),i_.polygonStart()},polygonEnd:function(){i_.polygonEnd(),A_.point=T_,A_.lineStart=j_,A_.lineEnd=D_,n_<0?(g_=-(y_=180),m_=-(b_=90)):O_>xb?b_=90:O_<-xb&&(m_=-90),S_[0]=g_,S_[1]=y_},sphere:function(){g_=-(y_=180),m_=-(b_=90)}};function T_(t,e){E_.push(S_=[g_=t,y_=t]),e<m_&&(m_=e),e>b_&&(b_=e)}function C_(t,e){var n=l_([t*Cb,e*Cb]);if(k_){var r=h_(k_,n),i=h_([r[1],-r[0],0],r);v_(i),i=c_(i);var a,o=t-__,s=o>0?1:-1,u=i[0]*Tb*s,c=jb(o)>180;c^(s*__<u&&u<s*t)?(a=i[1]*Tb)>b_&&(b_=a):c^(s*__<(u=(u+360)%360-180)&&u<s*t)?(a=-i[1]*Tb)<m_&&(m_=a):(e<m_&&(m_=e),e>b_&&(b_=e)),c?t<__?F_(g_,t)>F_(g_,y_)&&(y_=t):F_(t,y_)>F_(g_,y_)&&(g_=t):y_>=g_?(t<g_&&(g_=t),t>y_&&(y_=t)):t>__?F_(g_,t)>F_(g_,y_)&&(y_=t):F_(t,y_)>F_(g_,y_)&&(g_=t)}else E_.push(S_=[g_=t,y_=t]);e<m_&&(m_=e),e>b_&&(b_=e),k_=n,__=t}function j_(){A_.point=C_}function D_(){S_[0]=g_,S_[1]=y_,A_.point=T_,k_=null}function R_(t,e){if(k_){var n=t-__;O_.add(jb(n)>180?n+(n>0?360:-360):n)}else w_=t,x_=e;i_.point(t,e),C_(t,e)}function M_(){i_.lineStart()}function P_(){R_(w_,x_),i_.lineEnd(),jb(O_)>xb&&(g_=-(y_=180)),S_[0]=g_,S_[1]=y_,k_=null}function F_(t,e){return(e-=t)<0?e+360:e}function N_(t,e){return t[0]-e[0]}function L_(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var I_,B_,U_,z_,q_,W_,H_,G_,Y_,V_,$_,X_,K_,J_,Z_,Q_,tw={sphere:Hb,point:ew,lineStart:rw,lineEnd:ow,polygonStart:function(){tw.lineStart=sw,tw.lineEnd=uw},polygonEnd:function(){tw.lineStart=rw,tw.lineEnd=ow}};function ew(t,e){t*=Cb;var n=Mb(e*=Cb);nw(n*Mb(t),n*Ib(t),Ib(e))}function nw(t,e,n){U_+=(t-U_)/++I_,z_+=(e-z_)/I_,q_+=(n-q_)/I_}function rw(){tw.point=iw}function iw(t,e){t*=Cb;var n=Mb(e*=Cb);J_=n*Mb(t),Z_=n*Ib(t),Q_=Ib(e),tw.point=aw,nw(J_,Z_,Q_)}function aw(t,e){t*=Cb;var n=Mb(e*=Cb),r=n*Mb(t),i=n*Ib(t),a=Ib(e),o=Rb(Ub((o=Z_*a-Q_*i)*o+(o=Q_*r-J_*a)*o+(o=J_*i-Z_*r)*o),J_*r+Z_*i+Q_*a);B_+=o,W_+=o*(J_+(J_=r)),H_+=o*(Z_+(Z_=i)),G_+=o*(Q_+(Q_=a)),nw(J_,Z_,Q_)}function ow(){tw.point=ew}function sw(){tw.point=cw}function uw(){lw(X_,K_),tw.point=ew}function cw(t,e){X_=t,K_=e,t*=Cb,e*=Cb,tw.point=lw;var n=Mb(e);J_=n*Mb(t),Z_=n*Ib(t),Q_=Ib(e),nw(J_,Z_,Q_)}function lw(t,e){t*=Cb;var n=Mb(e*=Cb),r=n*Mb(t),i=n*Ib(t),a=Ib(e),o=Z_*a-Q_*i,s=Q_*r-J_*a,u=J_*i-Z_*r,c=Ub(o*o+s*s+u*u),l=Wb(c),f=c&&-l/c;Y_+=f*o,V_+=f*s,$_+=f*u,B_+=l,W_+=l*(J_+(J_=r)),H_+=l*(Z_+(Z_=i)),G_+=l*(Q_+(Q_=a)),nw(J_,Z_,Q_)}var fw=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n};function hw(t,e){return[jb(t)>Eb?t+Math.round(-t/Ab)*Ab:t,e]}function dw(t,e,n){return(t%=Ab)?e||n?fw(vw(t),gw(e,n)):vw(t):e||n?gw(e,n):hw}function pw(t){return function(e,n){return[(e+=t)>Eb?e-Ab:e<-Eb?e+Ab:e,n]}}function vw(t){var e=pw(t);return e.invert=pw(-t),e}function gw(t,e){var n=Mb(t),r=Ib(t),i=Mb(e),a=Ib(e);function o(t,e){var o=Mb(e),s=Mb(t)*o,u=Ib(t)*o,c=Ib(e),l=c*n+s*r;return[Rb(u*i-l*a,s*n-c*r),Wb(l*i+u*a)]}return o.invert=function(t,e){var o=Mb(e),s=Mb(t)*o,u=Ib(t)*o,c=Ib(e),l=c*i-u*a;return[Rb(u*i+c*a,s*n+l*r),Wb(l*n-s*r)]},o}hw.invert=hw;var mw=function(t){function e(e){return(e=t(e[0]*Cb,e[1]*Cb))[0]*=Tb,e[1]*=Tb,e}return t=dw(t[0]*Cb,t[1]*Cb,t.length>2?t[2]*Cb:0),e.invert=function(e){return(e=t.invert(e[0]*Cb,e[1]*Cb))[0]*=Tb,e[1]*=Tb,e},e};function yw(t,e,n,r,i,a){if(n){var o=Mb(e),s=Ib(e),u=r*n;null==i?(i=e+r*Ab,a=e-u/2):(i=bw(o,i),a=bw(o,a),(r>0?i<a:i>a)&&(i+=r*Ab));for(var c,l=i;r>0?l>a:l<a;l-=u)c=c_([o,-s*Mb(l),-s*Ib(l)]),t.point(c[0],c[1])}}function bw(t,e){(e=l_(e))[0]-=t,v_(e);var n=qb(-e[1]);return((-e[2]<0?-n:n)+Ab-xb)%Ab}var _w=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Hb,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},ww=function(t,e){return jb(t[0]-e[0])<xb&&jb(t[1]-e[1])<xb};function xw(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var kw=function(t,e,n,r,i){var a,o,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(ww(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else s.push(n=new xw(r,t,null,!0)),u.push(n.o=new xw(r,null,n,!1)),s.push(n=new xw(o,t,null,!1)),u.push(n.o=new xw(o,null,n,!0))}})),s.length){for(u.sort(e),Ew(s),Ew(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=c.length;a<o;++a)i.point((l=c[a])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,a=c.length-1;a>=0;--a)i.point((l=c[a])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}};function Ew(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var Sw=yb();function Ow(t){return jb(t[0])<=Eb?t[0]:Bb(t[0])*((jb(t[0])+Eb)%Ab-Eb)}var Aw=function(t,e){var n=Ow(e),r=e[1],i=Ib(r),a=[Ib(n),-Mb(n),0],o=0,s=0;Sw.reset(),1===i?r=Sb+xb:-1===i&&(r=-Sb-xb);for(var u=0,c=t.length;u<c;++u)if(f=(l=t[u]).length)for(var l,f,h=l[f-1],d=Ow(h),p=h[1]/2+Ob,v=Ib(p),g=Mb(p),m=0;m<f;++m,d=b,v=w,g=x,h=y){var y=l[m],b=Ow(y),_=y[1]/2+Ob,w=Ib(_),x=Mb(_),k=b-d,E=k>=0?1:-1,S=E*k,O=S>Eb,A=v*w;if(Sw.add(Rb(A*E*Ib(S),g*x+A*Mb(S))),o+=O?k+E*Ab:k,O^d>=n^b>=n){var T=h_(l_(h),l_(y));v_(T);var C=h_(a,T);v_(C);var j=(O^k>=0?-1:1)*Wb(C[2]);(r>j||r===j&&(T[0]||T[1]))&&(s+=O^k>=0?1:-1)}}return(o<-xb||o<xb&&Sw<-xb)^1&s},Tw=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var Cw=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return Tw(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}(Tw);Cw.right,Cw.left;var jw=Array.prototype,Dw=(jw.slice,jw.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Rw=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n};var Mw=function(t,e,n,r){return function(i){var a,o,s,u=e(i),c=_w(),l=e(c),f=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=m,h.lineStart=y,h.lineEnd=b,o=[],a=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,o=Rw(o);var t=Aw(a,r);o.length?(f||(i.polygonStart(),f=!0),kw(o,Fw,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function v(){h.point=p,u.lineStart()}function g(){h.point=d,u.lineEnd()}function m(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function b(){m(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),h=c.result(),d=h.length;if(s.pop(),a.push(s),s=null,d)if(1&u){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),o.push(h.filter(Pw))}return h}};function Pw(t){return t.length>1}function Fw(t,e){return((t=t.x)[0]<0?t[1]-Sb-xb:Sb-t[1])-((e=e.x)[0]<0?e[1]-Sb-xb:Sb-e[1])}var Nw=Mw((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Eb:-Eb,u=jb(a-n);jb(u-Eb)<xb?(t.point(n,r=(r+o)/2>0?Sb:-Sb),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=Eb&&(jb(n-i)<xb&&(n-=i*xb),jb(a-s)<xb&&(a-=s*xb),r=function(t,e,n,r){var i,a,o=Ib(t-n);return jb(o)>xb?Db((Ib(e)*(a=Mb(r))*Ib(n)-Ib(r)*(i=Mb(e))*Ib(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Sb,r.point(-Eb,i),r.point(0,i),r.point(Eb,i),r.point(Eb,0),r.point(Eb,-i),r.point(0,-i),r.point(-Eb,-i),r.point(-Eb,0),r.point(-Eb,i);else if(jb(t[0]-e[0])>xb){var a=t[0]<e[0]?Eb:-Eb;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-Eb,-Sb]);var Lw=function(t){var e=Mb(t),n=6*Cb,r=e>0,i=jb(e)>xb;function a(t,n){return Mb(t)*Mb(n)>e}function o(t,n,r){var i=[1,0,0],a=h_(l_(t),l_(n)),o=f_(a,a),s=a[0],u=o-s*s;if(!u)return!r&&t;var c=e*o/u,l=-e*s/u,f=h_(i,a),h=p_(i,c);d_(h,p_(a,l));var d=f,p=f_(h,d),v=f_(d,d),g=p*p-v*(f_(h,h)-1);if(!(g<0)){var m=Ub(g),y=p_(d,(-p-m)/v);if(d_(y,h),y=c_(y),!r)return y;var b,_=t[0],w=n[0],x=t[1],k=n[1];w<_&&(b=_,_=w,w=b);var E=w-_,S=jb(E-Eb)<xb;if(!S&&k<x&&(b=x,x=k,k=b),S||E<xb?S?x+k>0^y[1]<(jb(y[0]-_)<xb?x:k):x<=y[1]&&y[1]<=k:E>Eb^(_<=y[0]&&y[0]<=w)){var O=p_(d,(-p+m)/v);return d_(O,h),[y,c_(O)]}}}function s(e,n){var i=r?t:Eb-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return Mw(a,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var d,p=[f,h],v=a(f,h),g=r?v?0:s(f,h):v?s(f+(f<0?Eb:-Eb),h):0;if(!e&&(c=u=v)&&t.lineStart(),v!==u&&(!(d=o(e,p))||ww(e,d)||ww(p,d))&&(p[0]+=xb,p[1]+=xb,v=a(p[0],p[1])),v!==u)l=0,v?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^v){var m;g&n||!(m=o(p,e,!0))||(l=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&ww(e,p)||t.point(p[0],p[1]),e=p,u=v,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(e,r,i,a){yw(a,t,n,i,e,r)}),r?[0,-t]:[-Eb,t-Eb])},Iw=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,h=e[1]-u;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<l&&(l=o)}else if(f>0){if(o>l)return;o>c&&(c=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>l)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<l&&(l=o)}if(o=r-u,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>c&&(c=o)}if(o=a-u,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<l&&(l=o)}return c>0&&(t[0]=s+c*f,t[1]=u+c*h),l<1&&(e[0]=s+l*f,e[1]=u+l*h),!0}}}}},Bw=1e9,Uw=-Bw;function zw(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var l=0,f=0;if(null==i||(l=o(i,s))!==(f=o(a,s))||u(i,a)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(a[0],a[1])}function o(r,i){return jb(r[0]-t)<xb?i>0?0:3:jb(r[0]-n)<xb?i>0?2:1:jb(r[1]-e)<xb?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var u,c,l,f,h,d,p,v,g,m,y,b=o,_=_w(),w={point:x,lineStart:function(){w.point=k,c&&c.push(l=[]);m=!0,g=!1,p=v=NaN},lineEnd:function(){u&&(k(f,h),d&&g&&_.rejoin(),u.push(_.result()));w.point=x,g&&b.lineEnd()},polygonStart:function(){b=_,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],u=1,l=s.length,f=s[0],h=f[0],d=f[1];u<l;++u)a=h,o=d,f=s[u],h=f[0],d=f[1],o<=r?d>r&&(h-a)*(r-o)>(d-o)*(t-a)&&++e:d<=r&&(h-a)*(r-o)<(d-o)*(t-a)&&--e;return e}(),n=y&&e,i=(u=Rw(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&kw(u,s,e,a,o),o.polygonEnd());b=o,u=c=l=null}};function x(t,e){i(t,e)&&b.point(t,e)}function k(a,o){var s=i(a,o);if(c&&l.push([a,o]),m)f=a,h=o,d=s,m=!1,s&&(b.lineStart(),b.point(a,o));else if(s&&g)b.point(a,o);else{var u=[p=Math.max(Uw,Math.min(Bw,p)),v=Math.max(Uw,Math.min(Bw,v))],_=[a=Math.max(Uw,Math.min(Bw,a)),o=Math.max(Uw,Math.min(Bw,o))];Iw(u,_,t,e,n,r)?(g||(b.lineStart(),b.point(u[0],u[1])),b.point(_[0],_[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(a,o),y=!1)}p=a,v=o,g=s}return w}}yb();function qw(t,e,n){var r=Dw(t,e-xb,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function Ww(t,e,n){var r=Dw(t,e-xb,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Hw(){var t,e,n,r,i,a,o,s,u,c,l,f,h=10,d=h,p=90,v=360,g=2.5;function m(){return{type:"MultiLineString",coordinates:y()}}function y(){return Dw(Pb(r/p)*p,n,p).map(l).concat(Dw(Pb(s/v)*v,o,v).map(f)).concat(Dw(Pb(e/h)*h,t,h).filter((function(t){return jb(t%p)>xb})).map(u)).concat(Dw(Pb(a/d)*d,i,d).filter((function(t){return jb(t%v)>xb})).map(c))}return m.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},m.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(o).slice(1),l(n).reverse().slice(1),f(s).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),m.precision(g)):[[r,s],[n,o]]},m.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(g)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],m):[p,v]},m.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],m):[h,d]},m.precision=function(h){return arguments.length?(g=+h,u=qw(a,i,90),c=Ww(e,t,g),l=qw(s,o,90),f=Ww(r,n,g),m):g},m.extentMajor([[-180,-90+xb],[180,90-xb]]).extentMinor([[-180,-80-xb],[180,80+xb]])}var Gw,Yw,Vw,$w,Xw=function(t){return t},Kw=yb(),Jw=yb(),Zw={point:Hb,lineStart:Hb,lineEnd:Hb,polygonStart:function(){Zw.lineStart=Qw,Zw.lineEnd=nx},polygonEnd:function(){Zw.lineStart=Zw.lineEnd=Zw.point=Hb,Kw.add(jb(Jw)),Jw.reset()},result:function(){var t=Kw/2;return Kw.reset(),t}};function Qw(){Zw.point=tx}function tx(t,e){Zw.point=ex,Gw=Vw=t,Yw=$w=e}function ex(t,e){Jw.add($w*t-Vw*e),Vw=t,$w=e}function nx(){ex(Gw,Yw)}var rx=Zw,ix=1/0,ax=ix,ox=-ix,sx=ox;var ux,cx,lx,fx,hx={point:function(t,e){t<ix&&(ix=t);t>ox&&(ox=t);e<ax&&(ax=e);e>sx&&(sx=e)},lineStart:Hb,lineEnd:Hb,polygonStart:Hb,polygonEnd:Hb,result:function(){var t=[[ix,ax],[ox,sx]];return ox=sx=-(ax=ix=1/0),t}},dx=0,px=0,vx=0,gx=0,mx=0,yx=0,bx=0,_x=0,wx=0,xx={point:kx,lineStart:Ex,lineEnd:Ax,polygonStart:function(){xx.lineStart=Tx,xx.lineEnd=Cx},polygonEnd:function(){xx.point=kx,xx.lineStart=Ex,xx.lineEnd=Ax},result:function(){var t=wx?[bx/wx,_x/wx]:yx?[gx/yx,mx/yx]:vx?[dx/vx,px/vx]:[NaN,NaN];return dx=px=vx=gx=mx=yx=bx=_x=wx=0,t}};function kx(t,e){dx+=t,px+=e,++vx}function Ex(){xx.point=Sx}function Sx(t,e){xx.point=Ox,kx(lx=t,fx=e)}function Ox(t,e){var n=t-lx,r=e-fx,i=Ub(n*n+r*r);gx+=i*(lx+t)/2,mx+=i*(fx+e)/2,yx+=i,kx(lx=t,fx=e)}function Ax(){xx.point=kx}function Tx(){xx.point=jx}function Cx(){Dx(ux,cx)}function jx(t,e){xx.point=Dx,kx(ux=lx=t,cx=fx=e)}function Dx(t,e){var n=t-lx,r=e-fx,i=Ub(n*n+r*r);gx+=i*(lx+t)/2,mx+=i*(fx+e)/2,yx+=i,bx+=(i=fx*t-lx*e)*(lx+t),_x+=i*(fx+e),wx+=3*i,kx(lx=t,fx=e)}var Rx=xx;function Mx(t){this._context=t}Mx.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ab)}},result:Hb};var Px,Fx,Nx,Lx,Ix,Bx=yb(),Ux={point:Hb,lineStart:function(){Ux.point=zx},lineEnd:function(){Px&&qx(Fx,Nx),Ux.point=Hb},polygonStart:function(){Px=!0},polygonEnd:function(){Px=null},result:function(){var t=+Bx;return Bx.reset(),t}};function zx(t,e){Ux.point=qx,Fx=Lx=t,Nx=Ix=e}function qx(t,e){Lx-=t,Ix-=e,Bx.add(Ub(Lx*Lx+Ix*Ix)),Lx=t,Ix=e}var Wx=Ux;function Hx(){this._string=[]}function Gx(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Hx.prototype={_radius:4.5,_circle:Gx(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Gx(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Yx=function(t,e){var n,r,i=4.5;function a(t){return t&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),e_(t,n(r))),r.result()}return a.area=function(t){return e_(t,n(rx)),rx.result()},a.measure=function(t){return e_(t,n(Wx)),Wx.result()},a.bounds=function(t){return e_(t,n(hx)),hx.result()},a.centroid=function(t){return e_(t,n(Rx)),Rx.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Xw):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new Hx):new Mx(e=t),"function"!==typeof i&&r.pointRadius(i),a):e},a.pointRadius=function(t){return arguments.length?(i="function"===typeof t?t:(r.pointRadius(+t),+t),a):i},a.projection(t).context(e)};function Vx(t){return function(e){var n=new $x;for(var r in t)n[r]=t[r];return n.stream=e,n}}function $x(){}function Xx(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),e_(n,t.stream(hx)),e(hx.result()),null!=r&&t.clipExtent(r),t}function Kx(t,e,n){return Xx(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}function Jx(t,e,n){return Kx(t,[[0,0],e],n)}function Zx(t,e,n){return Xx(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}function Qx(t,e,n){return Xx(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}$x.prototype={constructor:$x,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var tk=16,ek=Mb(30*Cb),nk=function(t,e){return+e?function(t,e){function n(r,i,a,o,s,u,c,l,f,h,d,p,v,g){var m=c-r,y=l-i,b=m*m+y*y;if(b>4*e&&v--){var _=o+h,w=s+d,x=u+p,k=Ub(_*_+w*w+x*x),E=Wb(x/=k),S=jb(jb(x)-1)<xb||jb(a-f)<xb?(a+f)/2:Rb(w,_),O=t(S,E),A=O[0],T=O[1],C=A-r,j=T-i,D=y*C-m*j;(D*D/b>e||jb((m*C+y*j)/b-.5)>.3||o*h+s*d+u*p<ek)&&(n(r,i,a,o,s,u,A,T,S,_/=k,w/=k,x,v,g),g.point(A,T),n(A,T,S,_,w,x,c,l,f,h,d,p,v,g))}}return function(e){var r,i,a,o,s,u,c,l,f,h,d,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=m}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){l=NaN,v.point=y,e.lineStart()}function y(r,i){var a=l_([r,i]),o=t(r,i);n(l,f,c,h,d,p,l=o[0],f=o[1],c=r,h=a[0],d=a[1],p=a[2],tk,e),e.point(l,f)}function b(){v.point=g,e.lineEnd()}function _(){m(),v.point=w,v.lineEnd=x}function w(t,e){y(r=t,e),i=l,a=f,o=h,s=d,u=p,v.point=y}function x(){n(l,f,c,h,d,p,i,a,r,o,s,u,tk,e),v.lineEnd=b,b()}return v}}(t,e):function(t){return Vx({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var rk=Vx({point:function(t,e){this.stream.point(t*Cb,e*Cb)}});function ik(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r}function ak(t,e,n,r){var i=Mb(r),a=Ib(r),o=i*t,s=a*t,u=i/t,c=a/t,l=(a*n-i*e)/t,f=(a*e+i*n)/t;function h(t,r){return[o*t-s*r+e,n-s*t-o*r]}return h.invert=function(t,e){return[u*t-c*e+l,f-c*t-u*e]},h}function ok(t){return sk((function(){return t}))()}function sk(t){var e,n,r,i,a,o,s,u,c,l,f=150,h=480,d=250,p=0,v=0,g=0,m=0,y=0,b=0,_=null,w=Nw,x=null,k=Xw,E=.5;function S(t){return u(t[0]*Cb,t[1]*Cb)}function O(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Tb,t[1]*Tb]}function A(){var t=ak(f,0,0,b).apply(null,e(p,v)),r=(b?ak:ik)(f,h-t[0],d-t[1],b);return n=dw(g,m,y),s=fw(e,r),u=fw(n,s),o=nk(s,E),T()}function T(){return c=l=null,S}return S.stream=function(t){return c&&l===t?c:c=rk(function(t){return Vx({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(w(o(k(l=t)))))},S.preclip=function(t){return arguments.length?(w=t,_=void 0,T()):w},S.postclip=function(t){return arguments.length?(k=t,x=r=i=a=null,T()):k},S.clipAngle=function(t){return arguments.length?(w=+t?Lw(_=t*Cb):(_=null,Nw),T()):_*Tb},S.clipExtent=function(t){return arguments.length?(k=null==t?(x=r=i=a=null,Xw):zw(x=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),T()):null==x?null:[[x,r],[i,a]]},S.scale=function(t){return arguments.length?(f=+t,A()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],A()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*Cb,v=t[1]%360*Cb,A()):[p*Tb,v*Tb]},S.rotate=function(t){return arguments.length?(g=t[0]%360*Cb,m=t[1]%360*Cb,y=t.length>2?t[2]%360*Cb:0,A()):[g*Tb,m*Tb,y*Tb]},S.angle=function(t){return arguments.length?(b=t%360*Cb,A()):b*Tb},S.precision=function(t){return arguments.length?(o=nk(s,E=t*t),T()):Ub(E)},S.fitExtent=function(t,e){return Kx(S,t,e)},S.fitSize=function(t,e){return Jx(S,t,e)},S.fitWidth=function(t,e){return Zx(S,t,e)},S.fitHeight=function(t,e){return Qx(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&O,A()}}function uk(t){var e=0,n=Eb/3,r=sk(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Cb,n=t[1]*Cb):[e*Tb,n*Tb]},i}function ck(t,e){var n=Ib(t),r=(n+Ib(e))/2;if(jb(r)<xb)return function(t){var e=Mb(t);function n(t,n){return[t*e,Ib(n)/e]}return n.invert=function(t,n){return[t/e,Wb(n*e)]},n}(t);var i=1+n*(2*r-n),a=Ub(i)/r;function o(t,e){var n=Ub(i-2*r*Ib(e))/r;return[n*Ib(t*=r),a-n*Mb(t)]}return o.invert=function(t,e){var n=a-e;return[Rb(t,jb(n))/r*Bb(n),Wb((i-(t*t+n*n)*r*r)/(2*r))]},o}var lk=function(){return uk(ck).scale(155.424).center([0,33.6442])},fk=function(){return lk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function hk(t){return function(e,n){var r=Mb(e),i=Mb(n),a=t(r*i);return[a*i*Ib(e),a*Ib(n)]}}function dk(t){return function(e,n){var r=Ub(e*e+n*n),i=t(r),a=Ib(i),o=Mb(i);return[Rb(e*a,r*o),Wb(r&&n*a/r)]}}var pk=hk((function(t){return Ub(2/(1+t))}));pk.invert=dk((function(t){return 2*Wb(t/2)}));var vk=hk((function(t){return(t=qb(t))&&t/Ib(t)}));vk.invert=dk((function(t){return t}));function gk(t,e){return[t,Nb(zb((Sb+e)/2))]}gk.invert=function(t,e){return[t,2*Db(Fb(e))-Sb]};function mk(t){var e,n,r,i=ok(t),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var a=Eb*o(),s=i(mw(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:t===gk?[[Math.max(s[0]-a,c),e],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,e)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(t){return arguments.length?(o(t),l()):o()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(a(t),l()):a()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function yk(t){return zb((Sb+t)/2)}function bk(t,e){var n=Mb(t),r=t===e?Ib(t):Nb(n/Mb(e))/Nb(yk(e)/yk(t)),i=n*Lb(yk(t),r)/r;if(!r)return gk;function a(t,e){i>0?e<-Sb+xb&&(e=-Sb+xb):e>Sb-xb&&(e=Sb-xb);var n=i/Lb(yk(e),r);return[n*Ib(r*t),i-n*Mb(r*t)]}return a.invert=function(t,e){var n=i-e,a=Bb(r)*Ub(t*t+n*n);return[Rb(t,jb(n))/r*Bb(n),2*Db(Lb(i/a,1/r))-Sb]},a}function _k(t,e){return[t,e]}_k.invert=_k;function wk(t,e){var n=Mb(t),r=t===e?Ib(t):(n-Mb(e))/(e-t),i=n/r+t;if(jb(r)<xb)return _k;function a(t,e){var n=i-e,a=r*t;return[n*Ib(a),i-n*Mb(a)]}return a.invert=function(t,e){var n=i-e;return[Rb(t,jb(n))/r*Bb(n),i-Bb(r)*Ub(t*t+n*n)]},a}var xk=1.340264,kk=-.081106,Ek=893e-6,Sk=.003796,Ok=Ub(3)/2;function Ak(t,e){var n=Wb(Ok*Ib(e)),r=n*n,i=r*r*r;return[t*Mb(n)/(Ok*(xk+3*kk*r+i*(7*Ek+9*Sk*r))),n*(xk+kk*r+i*(Ek+Sk*r))]}Ak.invert=function(t,e){for(var n,r=e,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(xk+kk*i+a*(Ek+Sk*i))-e)/(xk+3*kk*i+a*(7*Ek+9*Sk*i)))*r)*i*i,!(jb(n)<kb));++o);return[Ok*t*(xk+3*kk*i+a*(7*Ek+9*Sk*i))/Mb(r),Wb(Ib(r)/Ok)]};function Tk(t,e){var n=Mb(e),r=Mb(t)*n;return[n*Ib(t)/r,Ib(e)/r]}Tk.invert=dk(Db);function Ck(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?Xw:Vx({point:function(i,a){this.stream.point(i*t+n,a*e+r)}})}function jk(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}jk.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(jb(n)>xb&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};function Dk(t,e){return[Mb(e)*Ib(t),Ib(e)]}Dk.invert=dk(Wb);function Rk(t,e){var n=Mb(e),r=1+Mb(t)*n;return[n*Ib(t)/r,Ib(e)/r]}Rk.invert=dk((function(t){return 2*Db(t)}));function Mk(t,e){return[Nb(zb((Sb+e)/2)),-t]}Mk.invert=function(t,e){return[-e,2*Db(Fb(t))-Sb]};var Pk=Yx(),Fk=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Nk(t,e){if(!t||"string"!==typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Ik[t]=function(t,e){return function n(){var r=e();return r.type=t,r.path=Yx().projection(r),r.copy=r.copy||function(){var t=n();return Fk.forEach((function(e){r[e]&&t[e](r[e]())})),t.path.pointRadius(r.path.pointRadius()),t},r}}(t,e),this):Ik[t]||null}function Lk(t){return t&&t.path||Pk}var Ik={albers:fk,albersusa:function(){var t,e,n,r,i,a,o=fk(),s=lk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=lk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){a=[t,e]}};function l(t){var e=t[0],o=t[1];return a=null,n.point(e,o),a||(r.point(e,o),a)||(i.point(e,o),a)}function f(){return t=e=null,l}return l.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},l.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([o.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),u.precision(t),f()):o.precision()},l.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),u.scale(t),l.translate(o.translate())):o.scale()},l.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],l=+t[1];return n=o.translate(t).clipExtent([[a-.455*e,l-.238*e],[a+.455*e,l+.238*e]]).stream(c),r=s.translate([a-.307*e,l+.201*e]).clipExtent([[a-.425*e+xb,l+.12*e+xb],[a-.214*e-xb,l+.234*e-xb]]).stream(c),i=u.translate([a-.205*e,l+.212*e]).clipExtent([[a-.214*e+xb,l+.166*e+xb],[a-.115*e-xb,l+.234*e-xb]]).stream(c),f()},l.fitExtent=function(t,e){return Kx(l,t,e)},l.fitSize=function(t,e){return Jx(l,t,e)},l.fitWidth=function(t,e){return Zx(l,t,e)},l.fitHeight=function(t,e){return Qx(l,t,e)},l.scale(1070)},azimuthalequalarea:function(){return ok(pk).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return ok(vk).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return uk(bk).scale(109.5).parallels([30,30])},conicequalarea:lk,conicequidistant:function(){return uk(wk).scale(131.154).center([0,13.9389])},equalEarth:function(){return ok(Ak).scale(177.158)},equirectangular:function(){return ok(_k).scale(152.63)},gnomonic:function(){return ok(Tk).scale(144.049).clipAngle(60)},identity:function(){var t,e,n,r,i,a,o=1,s=0,u=0,c=1,l=1,f=Xw,h=null,d=Xw;function p(){return r=i=null,a}return a={stream:function(t){return r&&i===t?r:r=f(d(i=t))},postclip:function(r){return arguments.length?(d=r,h=t=e=n=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(h=t=e=n=null,Xw):zw(h=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==h?null:[[h,t],[e,n]]},scale:function(t){return arguments.length?(f=Ck((o=+t)*c,o*l,s,u),p()):o},translate:function(t){return arguments.length?(f=Ck(o*c,o*l,s=+t[0],u=+t[1]),p()):[s,u]},reflectX:function(t){return arguments.length?(f=Ck(o*(c=t?-1:1),o*l,s,u),p()):c<0},reflectY:function(t){return arguments.length?(f=Ck(o*c,o*(l=t?-1:1),s,u),p()):l<0},fitExtent:function(t,e){return Kx(a,t,e)},fitSize:function(t,e){return Jx(a,t,e)},fitWidth:function(t,e){return Zx(a,t,e)},fitHeight:function(t,e){return Qx(a,t,e)}}},mercator:function(){return mk(gk).scale(961/Ab)},naturalEarth1:function(){return ok(jk).scale(175.295)},orthographic:function(){return ok(Dk).scale(249.5).clipAngle(90+xb)},stereographic:function(){return ok(Rk).scale(250).clipAngle(142)},transversemercator:function(){var t=mk(Mk),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(var Bk in Ik)Nk(Bk,Ik[Bk]);function Uk(t){Ci.call(this,null,t)}function zk(t){Ci.call(this,null,t)}function qk(t){Ci.call(this,null,t)}function Wk(t){Ci.call(this,[],t),this.generator=Hw()}function Hk(t){Ci.call(this,null,t),this.modified(!0)}function Gk(t,e,n){Object(Ut.D)(t[e])&&t[e](n)}Uk.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(Ut.y)(Uk,Ci).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||Ut.x,a=t.as||"path",o=n.SOURCE;!r||t.modified()?(this.value=r=Lk(t.projection),n.materialize().reflow()):o=i===Ut.x||e.modified(i.fields)?n.ADD_MOD:n.ADD;var s=function(t,e){var n=t.pointRadius();t.context(null),null!=e&&t.pointRadius(e);return n}(r,t.pointRadius);return n.visit(o,(function(t){t[a]=r(i(t))})),r.pointRadius(s),n.modifies(a)},zk.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(Ut.y)(zk,Ci).transform=function(t,e){var n,r=t.projection,i=t.fields[0],a=t.fields[1],o=t.as||["x","y"],s=o[0],u=o[1];function c(t){var e=r([i(t),a(t)]);e?(t[s]=e[0],t[u]=e[1]):(t[s]=void 0,t[u]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,c):(n=e.modified(i.fields)||e.modified(a.fields),e.visit(n?e.ADD_MOD:e.ADD,c)),e.modifies(o)},qk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(Ut.y)(qk,Ci).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.as||"shape",a=n.ADD;return r&&!t.modified()||(this.value=r=function(t,e,n){var r=null==n?function(n){return t(e(n))}:function(r){var i=t.pointRadius(),a=t.pointRadius(n)(e(r));return t.pointRadius(i),a};return r.context=function(e){return t.context(e),r},r}(Lk(t.projection),t.field||Object(Ut.t)("datum"),t.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,(function(t){t[i]=r})),n.modifies(i)},Wk.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(Ut.y)(Wk,Ci).transform=function(t,e){var n,r=this.value,i=this.generator;if(!r.length||t.modified())for(var a in t)Object(Ut.D)(i[a])&&i[a](t[a]);return n=i(),r.length?e.mod.push(Qt(r[0],n)):e.add.push(Kt(n)),r[0]=n,e},Object(Ut.y)(Hk,Ci).transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=function(t){var e=Nk((t||"mercator").toLowerCase());e||Object(Ut.n)("Unrecognized projection type: "+t);return e()}(t.type),Fk.forEach((function(e){null!=t[e]&&Gk(n,e,t[e])}))):Fk.forEach((function(e){t.modified(e)&&Gk(n,e,t[e])})),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){var n=function(t){return 1===(t=Object(Ut.i)(t)).length?t[0]:{type:gb,features:t.reduce((function(t,e){return t.concat(function(t){return t.type===gb?t.features:Object(Ut.i)(t).filter((function(t){return null!=t})).map((function(t){return t.type===vb?t:{type:vb,geometry:t}}))}(e))}),[])}}(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};function Yk(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,s,u,c,l,f,h,d=t._root,p={data:r},v=t._x0,g=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(a=(v+m)/2))?v=a:m=a,(l=n>=(o=(g+y)/2))?g=o:y=o,i=d,!(d=d[f=l<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(a=(v+m)/2))?v=a:m=a,(l=n>=(o=(g+y)/2))?g=o:y=o}while((f=l<<1|c)===(h=(u>=o)<<1|s>=a));return i[h]=d,i[f]=p,t}var Vk=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function $k(t){return t[0]}function Xk(t){return t[1]}function Kk(t,e,n){var r=new Jk(null==e?$k:e,null==n?Xk:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Jk(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Zk(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Qk=Kk.prototype=Jk.prototype;Qk.copy=function(){var t,e,n=new Jk(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Zk(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Zk(e));return n},Qk.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Yk(this.cover(e,n),e,n,t)},Qk.addAll=function(t){var e,n,r,i,a=t.length,o=new Array(a),s=new Array(a),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<a;++n)Yk(this,o[n],s[n],t[n]);return this},Qk.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o,s,u=i-n,c=this._root;n>t||t>=i||r>e||e>=a;)switch(s=(e<r)<<1|t<n,(o=new Array(4))[s]=c,c=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},Qk.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Qk.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Qk.find=function(t,e,n){var r,i,a,o,s,u,c,l=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Vk(v,l,f,h,d)),null==n?n=1/0:(l=t-n,f=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(v=u.node)||(i=u.x0)>h||(a=u.y0)>d||(o=u.x1)<l||(s=u.y1)<f))if(v.length){var g=(i+o)/2,m=(a+s)/2;p.push(new Vk(v[3],g,m,o,s),new Vk(v[2],i,m,g,s),new Vk(v[1],g,a,o,m),new Vk(v[0],i,a,g,m)),(c=(e>=m)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);l=t-w,f=e-w,h=t+w,d=e+w,r=v.data}}return r},Qk.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,s,u,c,l,f,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=a>=(s=(p+g)/2))?p=s:g=s,(l=o>=(u=(v+m)/2))?v=u:m=u,e=d,!(d=d[f=l<<1|c]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},Qk.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Qk.root=function(){return this._root},Qk.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Qk.visit=function(t){var e,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new Vk(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var c=(r+a)/2,l=(i+o)/2;(n=u[3])&&s.push(new Vk(n,c,l,a,o)),(n=u[2])&&s.push(new Vk(n,r,l,c,o)),(n=u[1])&&s.push(new Vk(n,c,i,a,l)),(n=u[0])&&s.push(new Vk(n,r,i,c,l))}return this},Qk.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Vk(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(o+u)/2,f=(s+c)/2;(a=i[0])&&n.push(new Vk(a,o,s,l,f)),(a=i[1])&&n.push(new Vk(a,l,s,u,f)),(a=i[2])&&n.push(new Vk(a,o,f,l,c)),(a=i[3])&&n.push(new Vk(a,l,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Qk.x=function(t){return arguments.length?(this._x=t,this):this._x},Qk.y=function(t){return arguments.length?(this._y=t,this):this._y};var tE=function(t){return function(){return t}},eE=function(){return 1e-6*(Math.random()-.5)};function nE(t){return t.x+t.vx}function rE(t){return t.y+t.vy}function iE(t){return t.index}function aE(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var oE={value:function(){}};function sE(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new uE(r)}function uE(t){this._=t}function cE(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function lE(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function fE(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=oE,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}uE.prototype=sE.prototype={constructor:uE,on:function(t,e){var n,r=this._,i=cE(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=fE(r[n],t.name,e);else if(null==e)for(n in r)r[n]=fE(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=lE(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new uE(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var hE,dE,pE=sE,vE=0,gE=0,mE=0,yE=1e3,bE=0,_E=0,wE=0,xE="object"===typeof performance&&performance.now?performance:Date,kE="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function EE(){return _E||(kE(SE),_E=xE.now()+wE)}function SE(){_E=0}function OE(){this._call=this._time=this._next=null}function AE(t,e,n){var r=new OE;return r.restart(t,e,n),r}function TE(){_E=(bE=xE.now())+wE,vE=gE=0;try{!function(){EE(),++vE;for(var t,e=hE;e;)(t=_E-e._time)>=0&&e._call.call(null,t),e=e._next;--vE}()}finally{vE=0,function(){var t,e,n=hE,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:hE=e);dE=t,jE(r)}(),_E=0}}function CE(){var t=xE.now(),e=t-bE;e>yE&&(wE-=e,bE=t)}function jE(t){vE||(gE&&(gE=clearTimeout(gE)),t-_E>24?(t<1/0&&(gE=setTimeout(TE,t-xE.now()-wE)),mE&&(mE=clearInterval(mE))):(mE||(bE=xE.now(),mE=setInterval(CE,yE)),vE=1,kE(TE)))}OE.prototype=AE.prototype={constructor:OE,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?EE():+n)+(null==e?0:+e),this._next||dE===this||(dE?dE._next=this:hE=this,dE=this),this._call=t,this._time=n,jE()},stop:function(){this._call&&(this._call=null,this._time=1/0,jE())}};function DE(t){return t.x}function RE(t){return t.y}var ME=10,PE=Math.PI*(3-Math.sqrt(5)),FE=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,u=AE(l),c=pE("tick","end");function l(){f(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function f(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=ME*Math.sqrt(n),a=n*PE;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:f,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,a,o,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(i=e-(s=t[c]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},NE={center:function(t,e){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-t,s=s/a-e,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},collide:function(t){var e,n,r=1,i=1;function a(){for(var t,a,s,u,c,l,f,h=e.length,d=0;d<i;++d)for(a=Kk(e,nE,rE).visitAfter(o),t=0;t<h;++t)s=e[t],l=n[s.index],f=l*l,u=s.x+s.vx,c=s.y+s.vy,a.visit(p);function p(t,e,n,i,a){var o=t.data,h=t.r,d=l+h;if(!o)return e>u+d||i<u-d||n>c+d||a<c-d;if(o.index>s.index){var p=u-o.x-o.vx,v=c-o.y-o.vy,g=p*p+v*v;g<d*d&&(0===p&&(g+=(p=eE())*p),0===v&&(g+=(v=eE())*v),g=(d-(g=Math.sqrt(g)))/g*r,s.vx+=(p*=g)*(d=(h*=h)/(f+h)),s.vy+=(v*=g)*d,o.vx-=p*(d=1-d),o.vy-=v*d)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,i,a=e.length;for(n=new Array(a),r=0;r<a;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=tE(null==t?1:+t)),a.initialize=function(t){e=t,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(r=+t,a):r},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:tE(+e),s(),a):t},a},nbody:function(){var t,e,n,r,i=tE(-30),a=1,o=1/0,s=.81;function u(r){var i,a=t.length,o=Kk(t,DE,RE).visitAfter(l);for(n=r,i=0;i<a;++i)e=t[i],o.visit(f)}function c(){if(t){var e,n,a=t.length;for(r=new Array(a),e=0;e<a;++e)n=t[e],r[n.index]=+i(n,e,t)}}function l(t){var e,n,i,a,o,s=0,u=0;if(t.length){for(i=a=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,i+=n*e.x,a+=n*e.y);t.x=i/u,t.y=a/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function f(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,f=t.y-e.y,h=c-i,d=l*l+f*f;if(h*h/s<d)return d<o&&(0===l&&(d+=(l=eE())*l),0===f&&(d+=(f=eE())*f),d<a&&(d=Math.sqrt(a*d)),e.vx+=l*t.value*n/d,e.vy+=f*t.value*n/d),!0;if(!(t.length||d>=o)){(t.data!==e||t.next)&&(0===l&&(d+=(l=eE())*l),0===f&&(d+=(f=eE())*f),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(h=r[t.data.index]*n/d,e.vx+=l*h,e.vy+=f*h)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"===typeof t?t:tE(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u},link:function(t){var e,n,r,i,a,o=iE,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=tE(30),c=1;function l(r){for(var i=0,o=t.length;i<c;++i)for(var s,u,l,f,h,d,p,v=0;v<o;++v)u=(s=t[v]).source,f=(l=s.target).x+l.vx-u.x-u.vx||eE(),h=l.y+l.vy-u.y-u.vy||eE(),f*=d=((d=Math.sqrt(f*f+h*h))-n[v])/d*r*e[v],h*=d,l.vx-=f*(p=a[v]),l.vy-=h*p,u.vx+=f*(p=1-p),u.vy+=h*p}function f(){if(r){var s,u,c=r.length,l=t.length,f=new Map(r.map((function(t,e){return[o(t,e,r),t]})));for(s=0,i=new Array(c);s<l;++s)(u=t[s]).index=s,"object"!==typeof u.source&&(u.source=aE(f,u.source)),"object"!==typeof u.target&&(u.target=aE(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,a=new Array(l);s<l;++s)u=t[s],a[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),h(),n=new Array(l),d()}}function h(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,f()},l.links=function(e){return arguments.length?(t=e,f(),l):t},l.id=function(t){return arguments.length?(o=t,l):o},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(s="function"===typeof t?t:tE(+t),h(),l):s},l.distance=function(t){return arguments.length?(u="function"===typeof t?t:tE(+t),d(),l):u},l},x:function(t){var e,n,r,i=tE(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vx+=(r[a]-i.x)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=tE(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:tE(+t),o(),a):i},a.x=function(e){return arguments.length?(t="function"===typeof e?e:tE(+e),o(),a):t},a},y:function(t){var e,n,r,i=tE(.1);function a(t){for(var i,a=0,o=e.length;a<o;++a)(i=e[a]).vy+=(r[a]-i.y)*n[a]*t}function o(){if(e){var a,o=e.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+t(e[a],a,e))?0:+i(e[a],a,e)}}return"function"!==typeof t&&(t=tE(null==t?0:+t)),a.initialize=function(t){e=t,o()},a.strength=function(t){return arguments.length?(i="function"===typeof t?t:tE(+t),o(),a):i},a.y=function(e){return arguments.length?(t="function"===typeof e?e:tE(+e),o(),a):t},a}},LE="forces",IE=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],BE=["static","iterations"],UE=["x","y","vx","vy"];function zE(t){Ci.call(this,null,t)}zE.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:UE}]};var qE=Object(Ut.y)(zE,Ci);function WE(t,e,n,r){var i,a,o,s,u=Object(Ut.i)(e.forces);for(i=0,a=IE.length;i<a;++i)(o=IE[i])!==LE&&e.modified(o)&&t[o](e[o]);for(i=0,a=u.length;i<a;++i)s=LE+i,(o=n||e.modified(LE,i)?GE(u[i]):r&&HE(u[i],r)?t.force(s):null)&&t.force(s,o);for(a=t.numForces||0;i<a;++i)t.force(LE+i,null);return t.numForces=u.length,t}function HE(t,e){var n,r;for(n in t)if(Object(Ut.D)(r=t[n])&&e.modified(Object(Ut.g)(r)))return 1;return 0}function GE(t){var e,n;for(n in Object(Ut.v)(NE,t.force)||Object(Ut.n)("Unrecognized force: "+t.force),e=NE[t.force](),t)Object(Ut.D)(e[n])&&YE(e[n],t[n],t);return e}function YE(t,e,n){t(Object(Ut.D)(e)?function(t){return e(t,n)}:e)}qE.transform=function(t,e){var n,r,i=this.value,a=e.changed(e.ADD_REM),o=t.modified(IE),s=t.iterations||300;if(i?(a&&(e.modifies("index"),i.nodes(e.source)),(o||e.changed(e.MOD))&&WE(i,t,0,e)):(this.value=i=function(t,e){var n=FE(t),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},WE(n,e,!0).on("end",(function(){r=!0}))}(e.source,t),i.on("tick",(n=e.dataflow,r=this,function(){n.touch(r).run()})),t.static||(a=!0,i.tick()),e.modifies("index")),o||a||t.modified(BE)||e.changed()&&t.restart)if(i.alpha(Math.max(i.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),t.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!a)return e.StopPropagation;return this.finish(t,e)},qE.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===LE&&"link"===n.op._argval.force)for(var s,u=n.op._argops,c=0,l=u.length;c<l;++c)if("links"===u[c].name&&(s=u[c].op.source)){r.pulse(s,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(UE)};var VE=function(t,e,n){var r={};return t.each((function(t){var i=t.data;n(i)&&(r[e(i)]=t)})),t.lookup=r,t};function $E(t,e){return t.parent===e.parent?1:2}function XE(t,e){return t+e.x}function KE(t,e){return Math.max(t,e.y)}function JE(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function ZE(t,e){var n,r,i,a,o,s=new nS(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=QE);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)c.push(r=n.children[a]=new nS(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(eS)}function QE(t){return t.children}function tS(t){t.data=t.data.data}function eS(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function nS(t){this.data=t,this.depth=this.height=0,this.parent=null}nS.prototype=ZE.prototype={constructor:nS,count:function(){return this.eachAfter(JE)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return ZE(this).eachBefore(tS)}};var rS=Array.prototype.slice;var iS=function(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(rS.call(t))).length,a=[];r<i;)e=t[r],n&&sS(n,e)?++r:(n=cS(a=aS(a,e)),r=0);return n};function aS(t,e){var n,r;if(uS(e,t))return[e];for(n=0;n<t.length;++n)if(oS(e,t[n])&&uS(lS(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(oS(lS(t[n],t[r]),e)&&oS(lS(t[n],e),t[r])&&oS(lS(t[r],e),t[n])&&uS(fS(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function oS(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function sS(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function uS(t,e){for(var n=0;n<e.length;++n)if(!sS(t,e[n]))return!1;return!0}function cS(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return lS(t[0],t[1]);case 3:return fS(t[0],t[1],t[2])}var e}function lS(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,c=o-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+a+u/f*l)/2,y:(r+o+c/f*l)/2,r:(f+i+s)/2}}function fS(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=r-o,d=r-c,p=i-s,v=i-l,g=u-a,m=f-a,y=r*r+i*i-a*a,b=y-o*o-s*s+u*u,_=y-c*c-l*l+f*f,w=d*p-h*v,x=(p*_-v*b)/(2*w)-r,k=(v*g-p*m)/w,E=(d*b-h*_)/(2*w)-i,S=(h*m-d*g)/w,O=k*k+S*S-1,A=2*(a+x*k+E*S),T=x*x+E*E-a*a,C=-(O?(A+Math.sqrt(A*A-4*O*T))/(2*O):T/A);return{x:r+x+k*C,y:i+E+S*C,r:C}}function hS(t,e,n){var r,i,a,o,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=t.x-r*s-a*u,n.y=t.y-r*u+a*s):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-a*u,n.y=e.y+r*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function dS(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function pS(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function vS(t){this._=t,this.next=null,this.previous=null}function gS(t){if(!(i=t.length))return 0;var e,n,r,i,a,o,s,u,c,l,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;hS(n,e,r=t[2]),e=new vS(e),n=new vS(n),r=new vS(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){hS(e._,n._,r=t[s]),r=new vS(r),u=n.next,c=e.previous,l=n._.r,f=e._.r;do{if(l<=f){if(dS(u._,r._)){n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(dS(c._,r._)){(e=c).next=n,n.previous=e,--s;continue t}f+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=pS(e);(r=r.next)!==n;)(o=pS(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=iS(e),s=0;s<i;++s)(e=t[s]).x-=r.x,e.y-=r.y;return r.r}function mS(t){return null==t?null:yS(t)}function yS(t){if("function"!==typeof t)throw new Error;return t}function bS(){return 0}var _S=function(t){return function(){return t}};function wS(t){return Math.sqrt(t.value)}function xS(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function kS(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,s=t(n)*e||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=gS(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function ES(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var SS=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},OS=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c},AS="$",TS={depth:-1},CS={};function jS(t){return t.id}function DS(t){return t.parentId}var RS=function(){var t=jS,e=DS;function n(n){var r,i,a,o,s,u,c,l=n.length,f=new Array(l),h={};for(i=0;i<l;++i)r=n[i],s=f[i]=new nS(r),null!=(u=t(r,i,n))&&(u+="")&&(h[c=AS+(s.id=u)]=c in h?CS:s);for(i=0;i<l;++i)if(s=f[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(o=h[AS+u]))throw new Error("missing: "+u);if(o===CS)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=TS,a.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(eS),a.parent=null,l>0)throw new Error("cycle");return a}return n.id=function(e){return arguments.length?(t=yS(e),n):t},n.parentId=function(t){return arguments.length?(e=yS(t),n):e},n};function MS(t,e){return t.parent===e.parent?1:2}function PS(t){var e=t.children;return e?e[0]:t.t}function FS(t){var e=t.children;return e?e[e.length-1]:t.t}function NS(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function LS(t,e,n){return t.a.parent===e.parent?t.a:n}function IS(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}IS.prototype=Object.create(nS.prototype);var BS=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c},US=(1+Math.sqrt(5))/2;function zS(t,e,n,r,i,a){for(var o,s,u,c,l,f,h,d,p,v,g,m=[],y=e.children,b=0,_=0,w=y.length,x=e.value;b<w;){u=i-n,c=a-r;do{l=y[_++].value}while(!l&&_<w);for(f=h=l,g=l*l*(v=Math.max(c/u,u/c)/(x*t)),p=Math.max(h/g,g/f);_<w;++_){if(l+=s=y[_].value,s<f&&(f=s),s>h&&(h=s),g=l*l*v,(d=Math.max(h/g,g/f))>p){l-=s;break}p=d}m.push(o={value:l,dice:u<c,children:y.slice(b,_)}),o.dice?OS(o,n,r,i,x?r+=c*l/x:a):BS(o,n,r,x?n+=u*l/x:i,a),x-=l,b=_}return m}var qS=function t(e){function n(t,n,r,i,a){zS(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(US),WS=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,c,l,f=-1,h=o.length,d=t.value;++f<h;){for(u=(s=o[f]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?OS(s,n,r,i,r+=(a-r)*s.value/d):BS(s,n,r,n+=(i-n)*s.value/d,a),d-=s.value}else t._squarify=o=zS(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(US);function HS(t){Ci.call(this,null,t)}function GS(t){return t.values}function YS(){var t,e=[];return t={entries:function(t){return function t(n,r){if(++r>e.length)return n;var i,a=[];for(i in n)a.push({key:i,values:t(n[i],r)});return a}(function t(n,r){if(r>=e.length)return n;for(var i,a,o,s=-1,u=n.length,c=e[r++],l={},f={};++s<u;)(o=l[i=c(a=n[s])+""])?o.push(a):l[i]=[a];for(i in l)f[i]=t(l[i],r);return f}(t,0),0)},key:function(n){return e.push(n),t}}}function VS(t){Ci.call(this,null,t)}function $S(t,e){return t.parent===e.parent?1:2}HS.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(Ut.y)(HS,Ci).transform=function(t,e){e.source||Object(Ut.n)("Nest transform requires an upstream data source.");var n=t.generate,r=t.modified(),i=e.clone(),a=this.value;return(!a||r||e.changed())&&(a&&a.each((function(t){t.children&&Vt(t.data)&&i.rem.push(t.data)})),this.value=a=ZE({values:Object(Ut.i)(t.keys).reduce((function(t,e){return t.key(e),t}),YS()).entries(i.source)},GS),n&&a.each((function(t){t.children&&(t=Kt(t.data),i.add.push(t),i.source.push(t))})),VE(a,$t,$t)),i.source.root=a,i},Object(Ut.y)(VS,Ci).transform=function(t,e){e.source&&e.source.root||Object(Ut.n)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field?i.sum(t.field):i.count(),t.sort&&i.sort(te(t.sort,(function(t){return t.data}))),function(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?$S:Ut.M);try{this.value=n(i)}catch(o){Object(Ut.n)(o)}return i.each((function(t){!function(t,e,n){for(var r=t.data,i=0,a=e.length-1;i<a;++i)r[n[i]]=t[e[i]];r[n[a]]=t.children?t.children.length:0}(t,r,a)})),e.reflow(t.modified()).modifies(a).modifies("leaf")};var XS=["x","y","r","depth","children"];function KS(t){VS.call(this,t)}KS.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XS.length,default:XS}]};var JS=Object(Ut.y)(KS,VS);JS.layout=function(){var t=null,e=1,n=1,r=bS;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(xS(t)).eachAfter(kS(r,.5)).eachBefore(ES(1)):i.eachBefore(xS(wS)).eachAfter(kS(bS,1)).eachAfter(kS(r,i.r/Math.min(e,n))).eachBefore(ES(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=mS(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:_S(+t),i):r},i},JS.params=["radius","size","padding"],JS.fields=XS;var ZS=["x0","y0","x1","y1","depth","children"];function QS(t){VS.call(this,t)}QS.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ZS.length,default:ZS}]};var tO=Object(Ut.y)(QS,VS);function eO(t){Ci.call(this,null,t)}tO.layout=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&OS(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(SS),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},tO.params=["size","round","padding"],tO.fields=ZS,eO.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(Ut.y)(eO,Ci).transform=function(t,e){e.source||Object(Ut.n)("Stratify transform requires an upstream data source.");var n=this.value,r=t.modified(),i=e.fork(e.ALL).materialize(e.SOURCE),a=!this.value||r||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?VE(RS().id(t.key).parentId(t.parentKey)(i.source),t.key,Ut.eb):VE(RS()([{}]),t.key,t.key)),i.source.root=this.value=n,i};var nO={tidy:function(){var t=MS,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,a,o=new IS(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new IS(r[i],i)),n.parent=e;return(o.parent=new IS(null,0)).children=[o],o}(i);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)i.eachBefore(s);else{var c=i,l=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var h=c===l?1:t(c,l)/2,d=h-c.x,p=e/(l.x+h+d),v=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*v}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],c=a.m,l=o.m,f=s.m,h=u.m;s=FS(s),a=PS(a),s&&a;)u=PS(u),(o=FS(o)).a=e,(i=s.z+f-a.z-c+t(s._,a._))>0&&(NS(LS(s,e,r),e,i),c+=i,l+=i),f+=s.m,c+=a.m,h+=u.m,l+=o.m;s&&!FS(o)&&(o.t=s,o.m+=f-l),a&&!PS(u)&&(u.t=a,u.m+=c-h,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},cluster:function(){var t=$E,e=1,n=1,r=!1;function i(i){var a,o=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(XE,0)/t.length}(n),e.y=function(t){return 1+t.reduce(KE,0)}(n)):(e.x=a?o+=t(e,a):0,e.y=0,a=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}},rO=["x","y","depth","children"];function iO(t){VS.call(this,t)}iO.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:rO.length,default:rO}]};var aO=Object(Ut.y)(iO,VS);function oO(t){Ci.call(this,[],t)}aO.layout=function(t){var e=t||"tidy";if(Object(Ut.v)(nO,e))return nO[e]();Object(Ut.n)("Unrecognized Tree layout method: "+e)},aO.params=["size","nodeSize"],aO.fields=rO,oO.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(Ut.y)(oO,Ci).transform=function(t,e){var n=this.value,r=e.source&&e.source.root,i=e.fork(e.NO_SOURCE),a={};return r||Object(Ut.n)("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(i.rem=n,e.visit(e.SOURCE,(function(t){a[$t(t)]=1})),r.each((function(t){var e=t.data,n=t.parent&&t.parent.data;n&&a[$t(e)]&&a[$t(n)]&&i.add.push(Kt({source:n,target:e}))})),this.value=i.add):e.changed(e.MOD)&&(e.visit(e.MOD,(function(t){a[$t(t)]=1})),n.forEach((function(t){(a[$t(t.source)]||a[$t(t.target)])&&i.mod.push(t)}))),i};var sO={binary:function(t,e,n,r,i){var a,o,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=o=a=0;a<u;++a)c[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=a,l.x1=o,void(l.y1=u)}var f=c[e],h=r/2+f,d=e+1,p=n-1;for(;d<p;){var v=d+p>>>1;c[v]<h?d=v+1:p=v}h-c[d-1]<c[d]-h&&e+1<d&&--d;var g=c[d]-f,m=r-g;if(o-i>u-a){var y=(i*m+o*g)/r;t(e,d,g,i,a,y,u),t(d,n,m,y,a,o,u)}else{var b=(a*m+u*g)/r;t(e,d,g,i,a,o,b),t(d,n,m,i,b,o,u)}}(0,u,t.value,e,n,r,i)},dice:OS,slice:BS,slicedice:function(t,e,n,r,i){(1&t.depth?BS:OS)(t,e,n,r,i)},squarify:qS,resquarify:WS},uO=["x0","y0","x1","y1","depth","children"];function cO(t){VS.call(this,t)}cO.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uO.length,default:uO}]};var lO=Object(Ut.y)(cO,VS);lO.layout=function(){var t=function(){var t=qS,e=!1,n=1,r=1,i=[0],a=bS,o=bS,s=bS,u=bS,c=bS;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(SS),t}function f(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<l&&(l=h=(l+h)/2),e.x0=r,e.y0=l,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=a(e)/2,r+=c(e)-n,l+=o(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=u(e)-n)<l&&(l=h=(l+h)/2),t(e,r,l,f,h))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=yS(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(a="function"===typeof t?t:_S(+t),l):a},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(o="function"===typeof t?t:_S(+t),l):o},l.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:_S(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"===typeof t?t:_S(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:_S(+t),l):c},l}();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){Object(Ut.v)(sO,e)?t.tile(sO[e]):Object(Ut.n)("Unrecognized Treemap layout method: "+e)},t},lO.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],lO.fields=uO;var fO=function(t,e){var n,r,i,a,o,s,u=[],c=function(t){return t(a)};if(null==e)u.push(t);else for(n={},r=0,i=t.length;r<i;++r)a=t[r],(s=n[o=e.map(c)])||(n[o]=s=[],s.dims=o,u.push(s)),s.push(a);return u};function hO(t){Ci.call(this,null,t)}hO.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(Ut.y)(hO,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=fO(r,t.groupby),a=(t.groupby||[]).map(Ut.h),o=a.length,s=t.as||[Object(Ut.h)(t.x),Object(Ut.h)(t.y)],u=[];i.forEach((function(e){wa(e,t.x,t.y,t.bandwidth||.3).forEach((function(t){for(var n={},r=0;r<o;++r)n[a[r]]=e.dims[r];n[s[0]]=t[0],n[s[1]]=t[1],u.push(Kt(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n};var dO={linear:fa,log:ha,exp:da,pow:pa,quad:va,poly:ma};function pO(t){Ci.call(this,null,t)}pO.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dO)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(Ut.y)(pO,Ci).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=e.materialize(e.SOURCE).source,i=fO(r,t.groupby),a=(t.groupby||[]).map(Ut.h),o=t.method||"linear",s=t.order||3,u=function(t,e){return"poly"===t?e:"quad"===t?2:1}(o,s),c=t.as||[Object(Ut.h)(t.x),Object(Ut.h)(t.y)],l=dO[o],f=[],h=t.extent;Object(Ut.v)(dO,o)||Object(Ut.n)("Invalid regression method: "+o),null!=h&&"log"===o&&h[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),i.forEach((function(n){if(n.length<=u)e.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=l(n,t.x,t.y,s);if(t.params)f.push(Kt({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var i=h||Object(Ut.p)(n,t.x),d=function(t){for(var e={},r=0;r<a.length;++r)e[a[r]]=n.dims[r];e[c[0]]=t[0],e[c[1]]=t[1],f.push(Kt(e))};"linear"===o?i.forEach((function(t){return d([t,r.predict(t)])})):Sa(r.predict,i,25,200).forEach(d)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n};var vO=n(2),gO=n(3),mO=Math.pow(2,-52),yO=new Uint32Array(512),bO=function(){function t(e){Object(vO.a)(this,t);var n=e.length>>1;if(n>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return Object(gO.a)(t,null,[{key:"from",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AO,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TO,i=e.length,a=new Float64Array(2*i),o=0;o<i;o++){var s=e[o];a[2*o]=n(s),a[2*o+1]=r(s)}return new t(a)}}]),Object(gO.a)(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,a=t.length>>1,o=1/0,s=1/0,u=-1/0,c=-1/0,l=0;l<a;l++){var f=t[2*l],h=t[2*l+1];f<o&&(o=f),h<s&&(s=h),f>u&&(u=f),h>c&&(c=h),this._ids[l]=l}for(var d,p,v,g=(o+u)/2,m=(s+c)/2,y=1/0,b=0;b<a;b++){var _=_O(g,m,t[2*b],t[2*b+1]);_<y&&(d=b,y=_)}var w=t[2*d],x=t[2*d+1];y=1/0;for(var k=0;k<a;k++)if(k!==d){var E=_O(w,x,t[2*k],t[2*k+1]);E<y&&E>0&&(p=k,y=E)}for(var S=t[2*p],O=t[2*p+1],A=1/0,T=0;T<a;T++)if(T!==d&&T!==p){var C=EO(w,x,S,O,t[2*T],t[2*T+1]);C<A&&(v=T,A=C)}var j=t[2*v],D=t[2*v+1];if(A===1/0){for(var R=0;R<a;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];SO(this._ids,this._dists,0,a-1);for(var M=new Uint32Array(a),P=0,F=0,N=-1/0;F<a;F++){var L=this._ids[F];this._dists[L]>N&&(M[P++]=L,N=this._dists[L])}return this.hull=M.subarray(0,P),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(xO(w,x,S,O,j,D)){var I=p,B=S,U=O;p=v,S=j,O=D,v=I,j=B,D=U}var z=function(t,e,n,r,i,a){var o=n-t,s=r-e,u=i-t,c=a-e,l=o*o+s*s,f=u*u+c*c,h=.5/(o*c-s*u);return{x:t+(c*l-s*f)*h,y:e+(o*f-u*l)*h}}(w,x,S,O,j,D);this._cx=z.x,this._cy=z.y;for(var q=0;q<a;q++)this._dists[q]=_O(t[2*q],t[2*q+1],z.x,z.y);SO(this._ids,this._dists,0,a-1),this._hullStart=d;var W=3;n[d]=e[v]=p,n[p]=e[d]=v,n[v]=e[p]=d,r[d]=0,r[p]=1,r[v]=2,i.fill(-1),i[this._hashKey(w,x)]=d,i[this._hashKey(S,O)]=p,i[this._hashKey(j,D)]=v,this.trianglesLen=0,this._addTriangle(d,p,v,-1,-1,-1);for(var H,G,Y=0;Y<this._ids.length;Y++){var V=this._ids[Y],$=t[2*V],X=t[2*V+1];if(!(Y>0&&Math.abs($-H)<=mO&&Math.abs(X-G)<=mO)&&(H=$,G=X,V!==d&&V!==p&&V!==v)){for(var K=0,J=0,Z=this._hashKey($,X);J<this._hashSize&&(-1===(K=i[(Z+J)%this._hashSize])||K===n[K]);J++);for(var Q=K=e[K],tt=void 0;tt=n[Q],!xO($,X,t[2*Q],t[2*Q+1],t[2*tt],t[2*tt+1]);)if((Q=tt)===K){Q=-1;break}if(-1!==Q){var et=this._addTriangle(Q,V,n[Q],-1,-1,r[Q]);r[V]=this._legalize(et+2),r[Q]=et,W++;for(var nt=n[Q];tt=n[nt],xO($,X,t[2*nt],t[2*nt+1],t[2*tt],t[2*tt+1]);)et=this._addTriangle(nt,V,tt,r[V],-1,r[nt]),r[V]=this._legalize(et+2),n[nt]=nt,W--,nt=tt;if(Q===K)for(;xO($,X,t[2*(tt=e[Q])],t[2*tt+1],t[2*Q],t[2*Q+1]);)et=this._addTriangle(tt,V,Q,-1,r[Q],r[tt]),this._legalize(et+2),r[tt]=et,n[Q]=Q,W--,Q=tt;this._hullStart=e[V]=Q,n[Q]=e[nt]=V,n[V]=nt,i[this._hashKey($,X)]=V,i[this._hashKey(t[2*Q],t[2*Q+1])]=Q}}}this.hull=new Uint32Array(W);for(var rt=0,it=this._hullStart;rt<W;rt++)this.hull[rt]=it,it=n[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor(function(t,e){var n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var e=this._triangles,n=this._halfedges,r=this.coords,i=0,a=0;;){var o=n[t],s=t-t%3;if(a=s+(t+2)%3,-1!==o){var u=o-o%3,c=s+(t+1)%3,l=u+(o+2)%3,f=e[a],h=e[t],d=e[c],p=e[l];if(kO(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[o]=f;var v=n[l];if(-1===v){var g=this._hullStart;do{if(this._hullTri[g]===l){this._hullTri[g]=t;break}g=this._hullPrev[g]}while(g!==this._hullStart)}this._link(t,v),this._link(o,n[a]),this._link(a,l);var m=u+(o+1)%3;i<yO.length&&(yO[i++]=m)}else{if(0===i)break;t=yO[--i]}}else{if(0===i)break;t=yO[--i]}}return a}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,n,r,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}]),t}();function _O(t,e,n,r){var i=t-n,a=e-r;return i*i+a*a}function wO(t,e,n,r,i,a){var o=(r-e)*(i-t),s=(n-t)*(a-e);return Math.abs(o-s)>=33306690738754716e-32*Math.abs(o+s)?o-s:0}function xO(t,e,n,r,i,a){return(wO(i,a,t,e,n,r)||wO(t,e,n,r,i,a)||wO(n,r,i,a,t,e))<0}function kO(t,e,n,r,i,a,o,s){var u=t-o,c=e-s,l=n-o,f=r-s,h=i-o,d=a-s,p=l*l+f*f,v=h*h+d*d;return u*(f*v-p*d)-c*(l*v-p*h)+(u*u+c*c)*(l*d-f*h)<0}function EO(t,e,n,r,i,a){var o=n-t,s=r-e,u=i-t,c=a-e,l=o*o+s*s,f=u*u+c*c,h=.5/(o*c-s*u),d=(c*l-s*f)*h,p=(o*f-u*l)*h;return d*d+p*p}function SO(t,e,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var a=t[i],o=e[a],s=i-1;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{var u=n+1,c=r;OO(t,n+r>>1,u),e[t[n]]>e[t[r]]&&OO(t,n,r),e[t[u]]>e[t[r]]&&OO(t,u,r),e[t[n]]>e[t[u]]&&OO(t,n,u);for(var l=t[u],f=e[l];;){do{u++}while(e[t[u]]<f);do{c--}while(e[t[c]]>f);if(c<u)break;OO(t,u,c)}t[n+1]=t[c],t[c]=l,r-u+1>=c-n?(SO(t,e,u,r),SO(t,e,n,c-1)):(SO(t,e,n,c-1),SO(t,e,u,r))}}function OO(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function AO(t){return t[0]}function TO(t){return t[1]}var CO=function(){function t(){Object(vO.a)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return Object(gO.a)(t,[{key:"moveTo",value:function(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}},{key:"arc",value:function(t,e,n){var r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(t-n,",").concat(e,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(t,e,n,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),jO=function(){function t(){Object(vO.a)(this,t),this._=[]}return Object(gO.a)(t,[{key:"moveTo",value:function(t,e){this._.push([t,e])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,e){this._.push([t,e])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}(),DO=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=Object(ga.a)(n,4),i=r[0],a=r[1],o=r[2],s=r[3];if(Object(vO.a)(this,t),!((o=+o)>=(i=+i))||!((s=+s)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=o,this.xmin=i,this.ymax=s,this.ymin=a,this._init()}return Object(gO.a)(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,e,n=this.delaunay,r=n.points,i=n.hull,a=n.triangles,o=this.vectors,s=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),u=0,c=0,l=a.length;u<l;u+=3,c+=2){var f=2*a[u],h=2*a[u+1],d=2*a[u+2],p=r[f],v=r[f+1],g=r[h],m=r[h+1],y=r[d],b=r[d+1],_=g-p,w=m-v,x=y-p,k=b-v,E=_*_+w*w,S=x*x+k*k,O=2*(_*k-w*x);if(O)if(Math.abs(O)<1e-8)t=(p+y)/2,e=(v+b)/2;else{var A=1/O;t=p+(k*E-w*S)*A,e=v+(_*S-x*E)*A}else t=(p+y)/2-1e8*k,e=(v+b)/2+1e8*x;s[c]=t,s[c+1]=e}var T,C,j,D=i[i.length-1],R=4*D,M=r[2*D],P=r[2*D+1];o.fill(0);for(var F=0;F<i.length;++F)T=R,C=M,j=P,R=4*(D=i[F]),M=r[2*D],P=r[2*D+1],o[T+2]=o[R]=j-P,o[T+3]=o[R+1]=M-C}},{key:"render",value:function(t){var e=null==t?t=new CO:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,a=n.hull,o=this.circumcenters,s=this.vectors;if(a.length<=1)return null;for(var u=0,c=r.length;u<c;++u){var l=r[u];if(!(l<u)){var f=2*Math.floor(u/3),h=2*Math.floor(l/3),d=o[f],p=o[f+1],v=o[h],g=o[h+1];this._renderSegment(d,p,v,g,t)}}for(var m,y=a[a.length-1],b=0;b<a.length;++b){m=y,y=a[b];var _=2*Math.floor(i[y]/3),w=o[_],x=o[_+1],k=4*m,E=this._project(w,x,s[k+2],s[k+3]);E&&this._renderSegment(w,x,E[0],E[1],t)}return e&&e.value()}},{key:"renderBounds",value:function(t){var e=null==t?t=new CO:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}},{key:"renderCell",value:function(t,e){var n=null==e?e=new CO:void 0,r=this._clip(t);if(null!==r){e.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||e.lineTo(r[a],r[a+1]);return e.closePath(),n&&n.value()}}},{key:"cellPolygons",value:E.a.mark((function t(){var e,n,r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.delaunay.points,n=0,r=e.length/2;case 2:if(!(n<r)){t.next=10;break}if(!(i=this.cellPolygon(n))){t.next=7;break}return t.next=7,i;case 7:++n,t.next=2;break;case 10:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var e=new jO;return this.renderCell(t,e),e.value()}},{key:"_renderSegment",value:function(t,e,n,r,i){var a,o=this._regioncode(t,e),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(a=this._clipSegment(t,e,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(t,e,n){return(e=+e)===e&&(n=+n)===n&&this.delaunay._step(t,e,n)===t}},{key:"_cell",value:function(t){var e=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,a=n.triangles,o=r[t];if(-1===o)return null;var s=[],u=o;do{var c=Math.floor(u/3);if(s.push(e[2*c],e[2*c+1]),a[u=u%3===2?u-2:u+1]!==t)break;u=i[u]}while(u!==o&&-1!==u);return s}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var n=this.vectors,r=4*t;return n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e)}},{key:"_clipFinite",value:function(t,e){for(var n,r,i,a,o,s=e.length,u=null,c=e[s-2],l=e[s-1],f=this._regioncode(c,l),h=0;h<s;h+=2)if(n=c,r=l,c=e[h],l=e[h+1],i=f,f=this._regioncode(c,l),0===i&&0===f)a=o,o=0,u?u.push(c,l):u=[c,l];else{var d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;if(0===i){if(null===(d=this._clipSegment(n,r,c,l,i,f)))continue;var y=d,b=Object(ga.a)(y,4);p=b[0],v=b[1],g=b[2],m=b[3]}else{if(null===(d=this._clipSegment(c,l,n,r,f,i)))continue;var _=d,w=Object(ga.a)(_,4);g=w[0],m=w[1],p=w[2],v=w[3],a=o,o=this._edgecode(p,v),a&&o&&this._edge(t,a,o,u,u.length),u?u.push(p,v):u=[p,v]}a=o,o=this._edgecode(g,m),a&&o&&this._edge(t,a,o,u,u.length),u?u.push(g,m):u=[g,m]}if(u)a=o,o=this._edgecode(u[0],u[1]),a&&o&&this._edge(t,a,o,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}},{key:"_clipSegment",value:function(t,e,n,r,i,a){for(;;){if(0===i&&0===a)return[t,e,n,r];if(i&a)return null;var o=void 0,s=void 0,u=i||a;8&u?(o=t+(n-t)*(this.ymax-e)/(r-e),s=this.ymax):4&u?(o=t+(n-t)*(this.ymin-e)/(r-e),s=this.ymin):2&u?(s=e+(r-e)*(this.xmax-t)/(n-t),o=this.xmax):(s=e+(r-e)*(this.xmin-t)/(n-t),o=this.xmin),i?(t=o,e=s,i=this._regioncode(t,e)):(n=o,r=s,a=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(t,e,n,r,i,a){var o,s=Array.from(e);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(t,s))for(var u,c=0,l=s.length,f=this._edgecode(s[l-2],s[l-1]);c<l;c+=2)u=f,f=this._edgecode(s[c],s[c+1]),u&&f&&(c=this._edge(t,u,f,s,c),l=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}},{key:"_edge",value:function(t,e,n,r,i){for(;e!==n;){var a=void 0,o=void 0;switch(e){case 5:e=4;continue;case 4:e=6,a=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,a=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,a=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(t,a,o)||(r.splice(i,0,a,o),i+=2)}if(r.length>4)for(var s=0;s<r.length;s+=2){var u=(s+2)%r.length,c=(s+4)%r.length;(r[s]===r[u]&&r[u]===r[c]||r[s+1]===r[u+1]&&r[u+1]===r[c+1])&&(r.splice(u,2),s-=2)}return i}},{key:"_project",value:function(t,e,n,r){var i,a,o,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(o=this.ymin,a=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(o=this.ymax,a=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(a=this.xmax,o=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(a=this.xmin,o=e+(s=i)*r)}return[a,o]}},{key:"_edgecode",value:function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}},{key:"_regioncode",value:function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}]),t}(),RO=E.a.mark(BO),MO=2*Math.PI;function PO(t){return t[0]}function FO(t){return t[1]}function NO(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}var LO=function(){function t(e){Object(vO.a)(this,t),this._delaunator=new bO(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}return Object(gO.a)(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t,e){for(var n,r=t.length,i=e[2*t[r-1]],a=e[2*t[r-1]+1],o=0,s=0;s<r;s++)n=i,o+=a*(i=e[2*t[s]])-n*(a=e[2*t[s]+1]);return o/2}(t.hull,e)<1e-10){this.collinear=Int32Array.from({length:e.length/2},(function(t,e){return e})).sort((function(t,n){return e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[e[2*n],e[2*n+1],e[2*r],e[2*r+1]],a=1e-8*Math.sqrt(Math.pow(i[3]-i[1],2)+Math.pow(i[2]-i[0],2)),o=0,s=e.length/2;o<s;++o){var u=NO(e[2*o],e[2*o+1],a);e[2*o]=u[0],e[2*o+1]=u[1]}this._delaunator=new bO(e)}else delete this.collinear;for(var c=this.halfedges=this._delaunator.halfedges,l=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,h=this.inedges.fill(-1),d=this._hullIndex.fill(-1),p=0,v=c.length;p<v;++p){var g=f[p%3===2?p-2:p+1];-1!==c[p]&&-1!==h[g]||(h[g]=p)}for(var m=0,y=l.length;m<y;++m)d[l[m]]=m;l.length<=2&&l.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=l[0],this.triangles[1]=l[1],this.triangles[2]=l[1],h[l[0]]=1,2===l.length&&(h[l[1]]=0))}},{key:"voronoi",value:function(t){return new DO(this,t)}},{key:"neighbors",value:E.a.mark((function t(e){var n,r,i,a,o,s,u,c,l,f;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!this.collinear){t.next=10;break}if(!((s=this.collinear.indexOf(e))>0)){t.next=6;break}return t.next=6,this.collinear[s-1];case 6:if(!(s<this.collinear.length-1)){t.next=9;break}return t.next=9,this.collinear[s+1];case 9:return t.abrupt("return");case 10:if(-1!==(u=n[e])){t.next=13;break}return t.abrupt("return");case 13:c=u,l=-1;case 14:return t.next=16,l=o[c];case 16:if(o[c=c%3===2?c-2:c+1]===e){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(c=a[c])){t.next=26;break}if((f=r[(i[e]+1)%r.length])===l){t.next=25;break}return t.next=25,f;case 25:return t.abrupt("return");case 26:if(c!==u){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(e=+e)!==e)return-1;for(var r,i=n;(r=this._step(n,t,e))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(t,e,n){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,s=this.triangles,u=this.points;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);var c=t,l=Math.pow(e-u[2*t],2)+Math.pow(n-u[2*t+1],2),f=r[t],h=f;do{var d=s[h],p=Math.pow(e-u[2*d],2)+Math.pow(n-u[2*d+1],2);if(p<l&&(l=p,c=d),s[h=h%3===2?h-2:h+1]!==t)break;if(-1===(h=o[h])){if((h=i[(a[t]+1)%i.length])!==d&&Math.pow(e-u[2*h],2)+Math.pow(n-u[2*h+1],2)<l)return h;break}}while(h!==f);return c}},{key:"render",value:function(t){for(var e=null==t?t=new CO:void 0,n=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var s=r[a];if(!(s<a)){var u=2*i[a],c=2*i[s];t.moveTo(n[u],n[u+1]),t.lineTo(n[c],n[c+1])}}return this.renderHull(t),e&&e.value()}},{key:"renderPoints",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==t?t=new CO:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],s=r[i+1];t.moveTo(o+e,s),t.arc(o,s,e,0,MO)}return n&&n.value()}},{key:"renderHull",value:function(t){var e=null==t?t=new CO:void 0,n=this.hull,r=this.points,i=2*n[0],a=n.length;t.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var s=2*n[o];t.lineTo(r[s],r[s+1])}return t.closePath(),e&&e.value()}},{key:"hullPolygon",value:function(){var t=new jO;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,e){var n=null==e?e=new CO:void 0,r=this.points,i=this.triangles,a=2*i[t*=3],o=2*i[t+1],s=2*i[t+2];return e.moveTo(r[a],r[a+1]),e.lineTo(r[o],r[o+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}},{key:"trianglePolygons",value:E.a.mark((function t(){var e,n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.triangles,n=0,r=e.length/3;case 2:if(!(n<r)){t.next=8;break}return t.next=5,this.trianglePolygon(n);case 5:++n,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var e=new jO;return this.renderTriangle(t,e),e.value()}}]),t}();function IO(t,e,n,r){for(var i=t.length,a=new Float64Array(2*i),o=0;o<i;++o){var s=t[o];a[2*o]=e.call(r,s,o,t),a[2*o+1]=n.call(r,s,o,t)}return a}function BO(t,e,n,r){var i,a,o,s,u,c,l;return E.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:i=0,a=!0,o=!1,s=void 0,f.prev=4,u=t[Symbol.iterator]();case 6:if(a=(c=u.next()).done){f.next=16;break}return l=c.value,f.next=10,e.call(r,l,i,t);case 10:return f.next=12,n.call(r,l,i,t);case 12:++i;case 13:a=!0,f.next=6;break;case 16:f.next=22;break;case 18:f.prev=18,f.t0=f.catch(4),o=!0,s=f.t0;case 22:f.prev=22,f.prev=23,a||null==u.return||u.return();case 25:if(f.prev=25,!o){f.next=28;break}throw s;case 28:return f.finish(25);case 29:return f.finish(22);case 30:case"end":return f.stop()}}),RO,null,[[4,18,22,30],[23,,25,29]])}function UO(t){Ci.call(this,null,t)}LO.from=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PO,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:FO,r=arguments.length>3?arguments[3]:void 0;return new LO("length"in t?IO(t,e,n,r):Float64Array.from(BO(t,e,n,r)))},UO.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var zO=Object(Ut.y)(UO,Ci),qO=[-1e5,-1e5,1e5,1e5];function WO(t){for(var e=t[0][0],n=t[0][1],r=t.length-1;t[r][0]===e&&t[r][1]===n;--r);return"M"+t.slice(0,r+1).join("L")+"Z"}zO.transform=function(t,e){var n=t.as||"path",r=e.source;if(!r||!r.length)return e;var i=t.size;i=i?[0,0,i[0],i[1]]:(i=t.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:qO;for(var a=this.value=LO.from(r,t.x,t.y).voronoi(i),o=0,s=r.length;o<s;++o){var u=a.cellPolygon(o);r[o][n]=u?WO(u):null}return e.reflow(t.modified()).modifies(n)};var HO=Math.PI/180,GO=64,YO=2048,VO=function(){var t,e,n,r,i,a,o,s=[256,256],u=JO,c=[],l=Math.random,f={};function h(t,e,n){for(var r,i,a,o,c,f=e.x,h=e.y,d=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),v=l()<.5?1:-1,g=-v;(r=p(g+=v))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=d));)if(e.x=f+i,e.y=h+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>s[0]||e.y+e.y1>s[1])&&(!n||!XO(e,t,s[0]))&&(!n||(c=n,(o=e).x+o.x1>c[0].x&&o.x+o.x0<c[1].x&&o.y+o.y1>c[0].y&&o.y+o.y0<c[1].y))){for(var m,y=e.sprite,b=e.width>>5,_=s[0]>>5,w=e.x-(b<<4),x=127&w,k=32-x,E=e.y1-e.y0,S=(e.y+e.y0)*_+(w>>5),O=0;O<E;O++){m=0;for(var A=0;A<=b;A++)t[S+A]|=m<<k|(A<b?(m=y[O*b+A])>>>x:0);S+=_}return e.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(GO<<5)/e,t.height=YO/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(Bs()),f=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((s[0]>>5)*s[1]),d=null,p=c.length,v=-1,g=[],m=c.map((function(s){return{text:t(s),font:e(s),style:r(s),weight:i(s),rotate:a(s),size:~~n(s),padding:o(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}})).sort((function(t,e){return e.size-t.size}));++v<p;){var y=m[v];y.x=s[0]*(l()+.5)>>1,y.y=s[1]*(l()+.5)>>1,$O(u,y,m,v),y.hasText&&h(f,y,d)&&(g.push(y),d?KO(d,y):d=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=s[0]>>1,y.y-=s[1]>>1)}return g},f.words=function(t){return arguments.length?(c=t,f):c},f.size=function(t){return arguments.length?(s=[+t[0],+t[1]],f):s},f.font=function(t){return arguments.length?(e=ZO(t),f):e},f.fontStyle=function(t){return arguments.length?(r=ZO(t),f):r},f.fontWeight=function(t){return arguments.length?(i=ZO(t),f):i},f.rotate=function(t){return arguments.length?(a=ZO(t),f):a},f.text=function(e){return arguments.length?(t=ZO(e),f):t},f.spiral=function(t){return arguments.length?(u=QO[t]||t,f):u},f.fontSize=function(t){return arguments.length?(n=ZO(t),f):n},f.padding=function(t){return arguments.length?(o=ZO(t),f):o},f.random=function(t){return arguments.length?(l=t,f):l},f};function $O(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(GO<<5)/a,YO/a);var o,s,u,c,l,f=0,h=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,o=i.measureText(e.text+"m").width*a,u=e.size<<1,e.rotate){var v=Math.sin(e.rotate*HO),g=Math.cos(e.rotate*HO),m=o*g,y=o*v,b=u*g,_=u*v;o=Math.max(Math.abs(m+_),Math.abs(m-_))+31>>5<<5,u=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(u>d&&(d=u),f+o>=GO<<5&&(f=0,h+=d,d=0),h+u>=YO)break;i.translate((f+(o>>1))/a,(h+(u>>1))/a),e.rotate&&i.rotate(e.rotate*HO),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=o,e.height=u,e.xoff=f,e.yoff=h,e.x1=o>>1,e.y1=u>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,f+=o}for(var w=i.getImageData(0,0,(GO<<5)/a,YO/a).data,x=[];--r>=0;)if((e=n[r]).hasText){for(s=(o=e.width)>>5,u=e.y1-e.y0,c=0;c<u*s;c++)x[c]=0;if(null==(f=e.xoff))return;h=e.yoff;var k=0,E=-1;for(l=0;l<u;l++){for(c=0;c<o;c++){var S=s*l+(c>>5),O=w[(h+l)*(GO<<5)+(f+c)<<2]?1<<31-c%32:0;x[S]|=O,k|=O}k?E=l:(e.y0++,u--,l--,h++)}e.y1=e.y0+E,e.sprite=x.slice(0,(e.y1-e.y0)*s)}}}function XO(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),s=127&o,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(o>>5),f=0;f<c;f++){r=0;for(var h=0;h<=a;h++)if((r<<u|(h<a?(r=i[f*a+h])>>>s:0))&e[l+h])return!0;l+=n}return!1}function KO(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function JO(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function ZO(t){return"function"===typeof t?t:function(){return t}}var QO={archimedean:JO,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}},tA=["x","y","font","fontSize","fontStyle","fontWeight","angle"],eA=["text","font","rotate","fontSize","fontStyle","fontWeight"];function nA(t){Ci.call(this,VO(),t)}function rA(t){return new Uint8Array(t)}function iA(t){return new Uint16Array(t)}function aA(t){return new Uint32Array(t)}function oA(t,e,n){var r=(e<257?rA:e<65537?iA:aA)(t);return n&&r.set(n),r}nA.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:tA}]},Object(Ut.y)(nA,Ci).transform=function(t,e){!t.size||t.size[0]&&t.size[1]||Object(Ut.n)("Wordcloud size dimensions must be non-zero.");var n=t.modified();if(n||e.changed(e.ADD_REM)||eA.some((function(n){var r=t[n];return Object(Ut.D)(r)&&e.modified(r.fields)}))){var r,i=e.materialize(e.SOURCE).source,a=this.value,o=t.as||tA,s=t.fontSize||14;if(Object(Ut.D)(s)?r=t.fontSizeRange:s=Object(Ut.l)(s),r){var u=s,c=Im("sqrt")().domain(function(t,e){for(var n,r=1/0,i=-1/0,a=0,o=e.length;a<o;++a)(n=t(e[a]))<r&&(r=n),n>i&&(i=n);return[r,i]}(u,i)).range(r);s=function(t){return c(u(t))}}i.forEach((function(t){t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0}));for(var l,f,h=a.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(s).random(Gi).layout(),d=a.size(),p=d[0]>>1,v=d[1]>>1,g=0,m=h.length;g<m;++g)(f=(l=h[g]).datum)[o[0]]=l.x+p,f[o[1]]=l.y+v,f[o[2]]=l.font,f[o[3]]=l.size,f[o[4]]=l.style,f[o[5]]=l.weight,f[o[6]]=l.rotate;return e.reflow(n).modifies(o)}};var sA=function(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this.bisect(this.range,t.value),a=t.index,o=i[0],s=i[1],u=a.length;for(n=0;n<o;++n)e[a[n]]|=r;for(n=s;n<u;++n)e[a[n]]|=r;return this}}},uA=function(t,e){return Array.from(e,(function(e){return t[e]}))};function cA(){var t=aA(0),e=[],n=0;return{insert:function(r,i,a){if(!i.length)return[];var o,s,u,c,l,f=n,h=i.length,d=Array(h),p=aA(h);for(u=0;u<h;++u)d[u]=r(i[u]),p[u]=u;if(l=p,(c=d).sort.call(l,(function(t,e){var n=c[t],r=c[e];return n<r?-1:n>r?1:0})),d=uA(c,l),f)o=e,s=t,e=Array(f+h),t=aA(f+h),function(t,e,n,r,i,a,o,s,u){var c,l=0,f=0;for(c=0;l<r&&f<o;++c)e[l]<i[f]?(s[c]=e[l],u[c]=n[l++]):(s[c]=i[f],u[c]=a[f++]+t);for(;l<r;++l,++c)s[c]=e[l],u[c]=n[l];for(;f<o;++f,++c)s[c]=i[f],u[c]=a[f]+t}(a,o,s,f,d,p,h,e,t);else{if(a>0)for(u=0;u<h;++u)p[u]+=a;e=d,t=p}return n=f+h,{index:p,value:d}},remove:function(r,i){var a,o,s,u=n;for(o=0;!i[t[o]]&&o<u;++o);for(s=o;o<u;++o)i[a=t[o]]||(t[s]=a,e[s]=e[o],++s);n=u-r},bisect:function(t,r){var i;return r?i=r.length:(r=e,i=n),[gp(r,t[0],0,i),vp(r,t[1],0,i)]},reindex:function(e){for(var r=0,i=n;r<i;++r)t[r]=e[t[r]]},index:function(){return t},size:function(){return n}}}function lA(t){Ci.call(this,function(){var t=8,e=[],n=aA(0),r=oA(0,t),i=oA(0,t);return{data:function(){return e},seen:function(){return t=n,r=e.length,n=t.length>=r?t:((i=i||new t.constructor(r)).set(t),i);var t,r,i},add:function(t){for(var n,r=0,i=e.length,a=t.length;r<a;++r)(n=t[r])._index=i++,e.push(n)},remove:function(t,n){var a,o,s,u=e.length,c=Array(u-t),l=e;for(o=0;!n[o]&&o<u;++o)c[o]=e[o],l[o]=o;for(s=o;o<u;++o)a=e[o],n[o]?l[o]=-1:(l[o]=s,r[s]=r[o],i[s]=i[o],c[s]=a,a._index=s++),r[o]=0;return e=c,l},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=oA(e,t,r),i=oA(e,t))}}}(),t),this._indices=null,this._dims=null}lA.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var fA=Object(Ut.y)(lA,Ci);function hA(t){Ci.call(this,null,t)}fA.transform=function(t,e){return this._dims?t.modified("fields")||t.fields.some((function(t){return e.modified(t.fields)}))?this.reinit(t,e):this.eval(t,e):this.init(t,e)},fA.init=function(t,e){for(var n,r,i=t.fields,a=t.query,o=this._indices={},s=this._dims=[],u=a.length,c=0;c<u;++c)r=o[n=i[c].fname]||(o[n]=cA()),s.push(sA(r,c,a[c]));return this.eval(t,e)},fA.reinit=function(t,e){var n,r,i,a,o,s,u,c,l,f=e.materialize().fork(),h=t.fields,d=t.query,p=this._indices,v=this._dims,g=this.value,m=g.curr(),y=g.prev(),b=g.all(),_=f.rem=f.add,w=f.mod,x=d.length,k={};if(y.set(m),e.rem.length&&(o=this.remove(t,e,f)),e.add.length&&g.add(e.add),e.mod.length)for(s={},u=0,c=(a=e.mod).length;u<c;++u)s[a[u]._index]=1;for(u=0;u<x;++u)l=h[u],(!v[u]||t.modified("fields",u)||e.modified(l.fields))&&((n=k[i=l.fname])||(p[i]=r=cA(),k[i]=n=r.insert(l,e.source,0)),v[u]=sA(r,u,d[u]).onAdd(n,m));for(u=0,c=g.data().length;u<c;++u)o[u]||(y[u]!==m[u]?_.push(u):s[u]&&m[u]!==b&&w.push(u));return g.mask=(1<<x)-1,f},fA.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},fA.insert=function(t,e,n){var r,i,a,o=e.add,s=this.value,u=this._dims,c=this._indices,l=t.fields,f={},h=n.add,d=s.size(),p=d+o.length,v=u.length;s.resize(p,v),s.add(o);var g=s.curr(),m=s.prev(),y=s.all();for(r=0;r<v;++r)a=f[i=l[r].fname]||(f[i]=c[i].insert(l[r],o,d)),u[r].onAdd(a,g);for(;d<p;++d)m[d]=y,g[d]!==y&&h.push(d)},fA.modify=function(t,e){var n,r,i,a=e.mod,o=this.value,s=o.curr(),u=o.all(),c=t.mod;for(n=0,r=c.length;n<r;++n)s[i=c[n]._index]!==u&&a.push(i)},fA.remove=function(t,e,n){var r,i,a,o,s=this._indices,u=this.value,c=u.curr(),l=u.prev(),f=u.all(),h={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)h[a=p[r]._index]=1,l[a]=o=c[a],c[a]=f,o!==f&&d.push(a);for(a in s)s[a].remove(i,h);return this.reindex(e,i,h),h},fA.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter((function(){var t=i.remove(e,n);for(var a in r)r[a].reindex(t)}))},fA.update=function(t,e,n){var r,i,a=this._dims,o=t.query,s=e.stamp,u=a.length,c=0;for(n.filters=0,i=0;i<u;++i)t.modified("query",i)&&(r=i,++c);if(1===c)c=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,c=0;i<u;++i)t.modified("query",i)&&(c|=a[i].one,this.incrementAll(a[i],o[i],s,n.add),n.rem=n.add);return c},fA.incrementAll=function(t,e,n,r){var i,a,o,s=this.value,u=s.seen(),c=s.curr(),l=s.prev(),f=t.index(),h=t.bisect(t.range),d=t.bisect(e),p=d[0],v=d[1],g=h[0],m=h[1],y=t.one;if(p<g)for(i=p,a=Math.min(g,v);i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;else if(p>g)for(i=g,a=Math.min(p,m);i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;if(v>m)for(i=Math.max(p,m),a=v;i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;else if(v<m)for(i=Math.max(g,v),a=m;i<a;++i)u[o=f[i]]!==n&&(l[o]=c[o],u[o]=n,r.push(o)),c[o]^=y;t.range=e.slice()},fA.incrementOne=function(t,e,n,r){var i,a,o,s=this.value.curr(),u=t.index(),c=t.bisect(t.range),l=t.bisect(e),f=l[0],h=l[1],d=c[0],p=c[1],v=t.one;if(f<d)for(i=f,a=Math.min(d,h);i<a;++i)s[o=u[i]]^=v,n.push(o);else if(f>d)for(i=d,a=Math.min(f,p);i<a;++i)s[o=u[i]]^=v,r.push(o);if(h>p)for(i=Math.max(f,p),a=h;i<a;++i)s[o=u[i]]^=v,n.push(o);else if(h<p)for(i=Math.max(d,h),a=p;i<a;++i)s[o=u[i]]^=v,r.push(o);t.range=e.slice()},hA.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(Ut.y)(hA,Ci).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0===(i&n))return e.StopPropagation;var a=e.fork(e.ALL),o=r.data(),s=r.curr(),u=r.prev(),c=function(t){return s[t]&n?null:o[t]};return a.filter(a.MOD,c),i&i-1?(a.filter(a.ADD,(function(t){var e=s[t]&n;return!e&&e^u[t]&n?o[t]:null})),a.filter(a.REM,(function(t){var e=s[t]&n;return e&&!(e^e^u[t]&n)?o[t]:null}))):(a.filter(a.ADD,c),a.filter(a.REM,(function(t){return(s[t]&n)===i?o[t]:null}))),a.filter(a.SOURCE,(function(t){return c(t._index)}))};var dA=n(186),pA=/^([A-Za-z]+:)?\/\//,vA=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,gA=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,mA="file://";function yA(t,e){return bA.apply(this,arguments)}function bA(){return(bA=Object(qt.a)(E.a.mark((function t(e,n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function _A(t,e){return wA.apply(this,arguments)}function wA(){return(wA=Object(qt.a)(E.a.mark((function t(e,n){var r,i,a,o,s,u,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Ut.o)({},this.options,n),r=this.fileAccess,i={href:null},u=vA.test(e.replace(gA,"")),null!=e&&"string"===typeof e&&u||Object(Ut.n)("Sanitize failure, invalid URI: "+Object(Ut.X)(e)),c=pA.test(e),(s=n.baseURL)&&!c&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),o=(a=e.startsWith(mA))||"file"===n.mode||"http"!==n.mode&&!c&&r,a?e=e.slice(mA.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function xA(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:kA}function kA(){return EA.apply(this,arguments)}function EA(){return(EA=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function SA(t){return t?function(){var e=Object(qt.a)(E.a.mark((function e(n,r){var i,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ut.o)({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Object(Ut.D)(o[a])?o[a]():o.text():Object(Ut.n)(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():OA}function OA(){return AA.apply(this,arguments)}function AA(){return(AA=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var TA={boolean:Ut.Y,integer:Ut.ab,number:Ut.ab,date:Ut.Z,string:Ut.cb,unknown:Ut.x},CA=[function(t){return"true"===t||"false"===t||!0===t||!1===t},function(t){return MA(t)&&(t=+t)===~~t},MA,function(t){return!isNaN(Date.parse(t))}],jA=["boolean","integer","number","date"];function DA(t,e){if(!t||!t.length)return"unknown";var n,r,i,a,o=0,s=t.length,u=CA.length,c=CA.map((function(t,e){return e+1}));for(r=0,s=t.length;r<s;++r)for(n=e?t[r][e]:t[r],i=0;i<u;++i)if(c[i]&&(null!=(a=n)&&a===a)&&!CA[i](n)&&(c[i]=0,++o===CA.length))return"string";return o=c.reduce((function(t,e){return 0===t?e:t}),0)-1,jA[o]}function RA(t,e){return e.reduce((function(e,n){return e[n]=DA(t,n),e}),{})}function MA(t){return!isNaN(+t)&&!(t instanceof Date)}function PA(t){var e=function(e,n){var r={delimiter:t};return FA(e,n?Object(Ut.o)(n,r):r)};return e.responseType="text",e}function FA(t,e){return e.header&&(t=e.header.map(Ut.X).join(e.delimiter)+"\n"+t),We(e.delimiter).parse(t+"")}FA.responseType="text";var NA=n(81),LA={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function IA(t,e){var n,r,i,a;return t=Object(NA.a)(t,e),e&&e.feature?(n=Ze,i=e.feature):e&&e.mesh?(n=nn,i=e.mesh,a=LA[e.filter]):Object(Ut.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):Object(Ut.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}IA.responseType="json";var BA={dsv:FA,csv:PA(","),tsv:PA("\t"),json:NA.a,topojson:IA};function UA(t,e){return arguments.length>1?(BA[t]=e,this):Object(Ut.v)(BA,t)?BA[t]:null}function zA(t){var e=UA(t);return e&&e.responseType||"text"}var qA=function(t,e,n){var r=UA((e=e||{}).type||"json");return r||Object(Ut.n)("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n){if(!t.length)return;n=n||Hn;var r,i,a,o,s,u,c,l=t.columns||Object.keys(t[0]);"auto"===e&&(e=RA(t,l));for(l=Object.keys(e),r=l.map((function(t){var r,i,a=e[t];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Yn(i):n(i);if(!TA[a])throw Error("Illegal format pattern: "+t+":"+a);return TA[a]})),o=0,u=t.length,c=l.length;o<u;++o)for(i=t[o],s=0;s<c;++s)a=l[s],i[a]=r[s](i[a])}(t,e.parse,n),Object(Ut.v)(t,"columns")&&delete t.columns,t};var WA=function(t,e){return function(n){return{options:n||{},sanitize:_A,load:yA,fileAccess:!!e,file:xA(e),http:SA(t)}}}("undefined"!==typeof fetch&&fetch,null);function HA(t){this.clear(),t&&this.union(t)}var GA=HA.prototype;GA.clone=function(){return new HA(this)},GA.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},GA.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},GA.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},GA.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},GA.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},GA.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},GA.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},GA.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},GA.rotate=function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},GA.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},GA.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},GA.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},GA.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},GA.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},GA.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},GA.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},GA.width=function(){return this.x2-this.x1},GA.height=function(){return this.y2-this.y1};var YA=0,VA="p_";function $A(t){return t&&t.gradient}function XA(t,e,n){var r=t.id,i=t.gradient,a="radial"===i?VA:"";return r||(r=t.id="gradient_"+YA++,"radial"===i?(t.x1=KA(t.x1,.5),t.y1=KA(t.y1,.5),t.r1=KA(t.r1,0),t.x2=KA(t.x2,.5),t.y2=KA(t.y2,.5),t.r2=KA(t.r2,.5),a=VA):(t.x1=KA(t.x1,0),t.y1=KA(t.y1,0),t.x2=KA(t.x2,1),t.y2=KA(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+a+r+")"}function KA(t,e){return null!=t?t:e}var JA=function(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}};function ZA(t){this.mark=t,this.bounds=this.bounds||new HA}function QA(t){ZA.call(this,t),this.items=this.items||[]}function tT(t){this._pending=0,this._loader=t||WA()}Object(Ut.y)(QA,ZA);var eT=tT.prototype;function nT(t){t._pending+=1}function rT(t){t._pending-=1}eT.pending=function(){return this._pending},eT.sanitizeURL=function(t){var e=this;return nT(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return rT(e),t})).catch((function(){return rT(e),null}))},eT.loadImage=function(t){var e=this,n=Us();return nT(e),e._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){rT(e),i.loaded=!0},i.onerror=function(){rT(e),i.loaded=!1},i.src=r,i})).catch((function(t){return rT(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}}))},eT.ready=function(){var t=this;return new Promise((function(e){!function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}(!1)}))};var iT={basis:{curve:Ju},"basis-closed":{curve:Qu},"basis-open":{curve:ec},bundle:{curve:rc,tension:"beta",value:.85},cardinal:{curve:oc,tension:"tension",value:0},"cardinal-open":{curve:lc,tension:"tension",value:0},"cardinal-closed":{curve:uc,tension:"tension",value:0},"catmull-rom":{curve:dc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vc,tension:"alpha",value:.5},"catmull-rom-open":{curve:mc,tension:"alpha",value:.5},linear:{curve:Iu},"linear-closed":{curve:bc},monotone:{horizontal:Tc,vertical:Ac},natural:{curve:Dc},step:{curve:Mc},"step-after":{curve:Fc},"step-before":{curve:Pc}};function aT(t,e,n){var r=Object(Ut.v)(iT,t)&&iT[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var oT={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},sT=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],uT=function(t){var e,n,r,i,a,o,s,u,c,l,f,h=[];for(u=0,l=(e=t.slice().replace(sT[0],"###$1").split(sT[1]).slice(1)).length;u<l;++u){for(r=(n=e[u]).slice(1).trim().replace(sT[2],"$1###$2").split(sT[3]),i=[o=n.charAt(0)],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=oT[o.toLowerCase()],i.length-1>s)for(c=1,f=i.length;c<f;c+=s)h.push([o].concat(i.slice(c,c+s)));else h.push(i)}return h},cT=Math.PI/180,lT=Math.PI/2,fT=2*Math.PI,hT=Math.sqrt(3)/2,dT={},pT={},vT=[].join;function gT(t){var e=vT.call(t);if(pT[e])return pT[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=c*o,f=-u*s,h=u*o,d=c*s,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),w=n+p-_*v,x=r+v+_*p,k=n+g,E=r+m,S=k+_*m,O=E-_*g;return pT[e]=[l*w+f*x,h*w+d*x,l*S+f*O,h*S+d*O,l*k+f*E,h*k+d*E]}var mT=["l",0,0,0,0,0,0,0];function yT(t,e){var n=mT[0]=t[0];if("a"===n||"A"===n)mT[1]=e*t[1],mT[2]=e*t[2],mT[3]=t[3],mT[4]=t[4],mT[5]=t[5],mT[6]=e*t[6],mT[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)mT[r]=e*t[r];return mT}var bT=function(t,e,n,r,i){var a,o,s,u,c,l=null,f=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var v=0,g=e.length;v<g;++v){switch(a=e[v],1!==i&&(a=yT(a,i)),a[0]){case"l":f+=a[1],h+=a[2],t.lineTo(f+n,h+r);break;case"L":f=a[1],h=a[2],t.lineTo(f+n,h+r);break;case"h":f+=a[1],t.lineTo(f+n,h+r);break;case"H":f=a[1],t.lineTo(f+n,h+r);break;case"v":h+=a[1],t.lineTo(f+n,h+r);break;case"V":h=a[1],t.lineTo(f+n,h+r);break;case"m":f+=a[1],h+=a[2],t.moveTo(f+n,h+r);break;case"M":f=a[1],h=a[2],t.moveTo(f+n,h+r);break;case"c":o=f+a[5],s=h+a[6],d=f+a[3],p=h+a[4],t.bezierCurveTo(f+a[1]+n,h+a[2]+r,d+n,p+r,o+n,s+r),f=o,h=s;break;case"C":f=a[5],h=a[6],d=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,f+n,h+r);break;case"s":o=f+a[3],s=h+a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,f+a[1]+n,h+a[2]+r,o+n,s+r),d=f+a[1],p=h+a[2],f=o,h=s;break;case"S":o=a[3],s=a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"q":o=f+a[3],s=h+a[4],d=f+a[1],p=h+a[2],t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"Q":o=a[3],s=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"t":o=f+a[1],s=h+a[2],null===l[0].match(/[QqTt]/)?(d=f,p=h):"t"===l[0]?(d=2*f-u,p=2*h-c):"q"===l[0]&&(d=2*f-d,p=2*h-p),u=d,c=p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),h=s,d=(f=o)+a[1],p=h+a[2];break;case"T":o=a[1],s=a[2],d=2*f-d,p=2*h-p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"a":_T(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+h+r]),f+=a[6],h+=a[7];break;case"A":_T(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],h=a[7];break;case"z":case"Z":t.closePath()}l=a}};function _T(t,e,n,r){for(var i=function(t,e,n,r,i,a,o,s,u){var c=vT.call(arguments);if(dT[c])return dT[c];var l=o*cT,f=Math.sin(l),h=Math.cos(l),d=h*(s-t)*.5+f*(u-e)*.5,p=h*(u-e)*.5-f*(s-t)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,_=g*s+m*u,w=y*s+b*u,x=g*t+m*e,k=y*t+b*e,E=1/((x-_)*(x-_)+(k-w)*(k-w))-.25;E<0&&(E=0);var S=Math.sqrt(E);a==i&&(S=-S);var O=.5*(_+x)-S*(k-w),A=.5*(w+k)+S*(x-_),T=Math.atan2(w-A,_-O),C=Math.atan2(k-A,x-O)-T;C<0&&1===a?C+=fT:C>0&&0===a&&(C-=fT);for(var j=Math.ceil(Math.abs(C/(lT+.001))),D=[],R=0;R<j;++R){var M=T+R*C/j,P=T+(R+1)*C/j;D[R]=[O,A,M,P,n,r,f,h]}return dT[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=gT(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var wT={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,fT)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=hT*n,i=r-.5773502691896257*n,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=hT*n,i=r-.5773502691896257*n;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=hT*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=hT*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=hT*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=hT*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function xT(t){return Object(Ut.v)(wT,t)?wT[t]:function(t){if(!Object(Ut.v)(kT,t)){var e=uT(t);kT[t]={draw:function(t,n){bT(t,e,0,0,Math.sqrt(n)/2)}}}return kT[t]}(t)}var kT={};function ET(t){return t.x}function ST(t){return t.y}function OT(t){return t.width}function AT(t){return t.height}function TT(t){return function(){return t}}var CT=function(){var t=ET,e=ST,n=OT,r=AT,i=TT(0),a=null;function o(o,s,u){var c,l=null!=s?s:+t.call(this,o),f=null!=u?u:+e.call(this,o),h=+n.call(this,o),d=+r.call(this,o),p=+i.call(this,o);if(a||(a=c=gu()),p<=0)a.rect(l,f,h,d);else{var v=l+h,g=f+d;a.moveTo(l+p,f),a.lineTo(v-p,f),a.quadraticCurveTo(v,f,v,f+p),a.lineTo(v,g-p),a.quadraticCurveTo(v,g,v-p,g),a.lineTo(l+p,g),a.quadraticCurveTo(l,g,l,g-p),a.lineTo(l,f+p),a.quadraticCurveTo(l,f,l+p,f),a.closePath()}if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:TT(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:TT(+t),o):e},o.width=function(t){return arguments.length?(n="function"===typeof t?t:TT(+t),o):n},o.height=function(t){return arguments.length?(r="function"===typeof t?t:TT(+t),o):r},o.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:TT(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o},jT=function(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),h=(c/=f)*s,d=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-h,o-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+h,o+d),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,fT);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,h=!1;for(null==u&&(u=l=gu()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===h&&(h=!h)&&(i=0),h&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l};function DT(t){return t.x||0}function RT(t){return t.y||0}function MT(t){return t.cornerRadius||0}function PT(t){return!(!1===t.defined)}var FT=Nu().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius(MT),NT=qu().x(DT).y1(RT).y0((function(t){return(t.y||0)+(t.height||0)})).defined(PT),LT=qu().y(RT).x1(DT).x0((function(t){return(t.x||0)+(t.width||0)})).defined(PT),IT=zu().x(DT).y(RT).defined(PT),BT=CT().x(DT).y(RT).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius(MT),UT=Vu().type((function(t){return xT(t.shape||"circle")})).size((function(t){return null==t.size?64:t.size})),zT=jT().x(DT).y(RT).defined(PT).size((function(t){return t.size||1}));function qT(t,e,n,r){return BT.context(t)(e,n,r)}var WT,HT=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},GT=fT-1e-8;function YT(t){return WT=t,YT}function VT(){}function $T(t,e){WT.add(t,e)}YT.beginPath=VT,YT.closePath=VT,YT.moveTo=$T,YT.lineTo=$T,YT.rect=function(t,e,n,r){$T(t,e),$T(t+n,e+r)},YT.quadraticCurveTo=function(t,e,n,r){$T(t,e),$T(n,r)},YT.bezierCurveTo=function(t,e,n,r,i,a){$T(t,e),$T(n,r),$T(i,a)},YT.arc=function(t,e,n,r,i,a){if(Math.abs(i-r)>GT)return $T(t-n,e-n),void $T(t+n,e+n);var o,s,u,c,l=1/0,f=-1/0,h=1/0,d=-1/0;function p(t){u=n*Math.cos(t),c=n*Math.sin(t),u<l&&(l=u),u>f&&(f=u),c<h&&(h=c),c>d&&(d=c)}if(p(r),p(i),i!==r)if((r%=fT)<0&&(r+=fT),(i%=fT)<0&&(i+=fT),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=fT,o=r-r%lT,s=0;s<4&&o>i;++s,o-=lT)p(o);else for(o=r-r%lT+lT,s=0;s<4&&o<i;++s,o+=lT)p(o);$T(t+l,e+h),$T(t+f,e+d)};var XT=(XT=Bs(1,1))?XT.getContext("2d"):null,KT=new HA;function JT(t){return function(e,n){if(!XT)return!0;t(XT,e),KT.clear().union(e.bounds).intersect(n).round();for(var r=KT.x1,i=KT.y1,a=KT.x2,o=KT.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(XT.isPointInPath(u,s))return!0;return!1}}function ZT(t,e){return e.contains(t.x||0,t.y||0)}function QT(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(KT.set(n,r,n+i,r+a))}function tC(t,e){var n=t.x||0,r=t.y||0;return eC(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}function eC(t,e,n,r,i){var a,o,s,u,c=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-e,p=i-n,v=0,g=1;for(u=0;u<4;++u){if(0===u&&(a=-d,o=-(c-e)),1===u&&(a=d,o=f-e),2===u&&(a=-p,o=-(l-n)),3===u&&(a=p,o=h-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>g)return!1;s>v&&(v=s)}else if(a>0){if(s<v)return!1;s<g&&(g=s)}}return!0}var nC=function(t,e,n){return $A(n)?function(t,e,n){for(var r=n.width(),i=n.height(),a=e.stops,o=a.length,s="radial"===e.gradient?t.createRadialGradient(n.x1+(e.x1||.5)*r,n.y1+(e.y1||.5)*i,Math.max(r,i)*(e.r1||0),n.x1+(e.x2||.5)*r,n.y1+(e.y2||.5)*i,Math.max(r,i)*(e.r2||.5)):t.createLinearGradient(n.x1+(e.x1||0)*r,n.y1+(e.y1||0)*i,n.x1+(e.x2||1)*r,n.y1+(e.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(t,n,e.bounds):n},rC=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=nC(t,e,e.fill),!0)},iC=[],aC=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=nC(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||iC),t.lineDashOffset=e.strokeDashOffset||0),!0))};function oC(t,e){return t.zindex-e.zindex||t.index-e.index}function sC(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(oC)}function uC(t,e){var n,r,i=t.items;if(i&&i.length){var a=sC(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function cC(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=sC(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function lC(t){return function(e,n,r){uC(n,(function(n){r&&!r.intersects(n.bounds)||fC(t,e,n,n)}))}}function fC(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&rC(e,n,i)&&e.fill(),n.stroke&&aC(e,n,i)&&e.stroke()))}function hC(t){return t=t||Ut.eb,function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,cC(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0}))}}function dC(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function pC(t){return hC(dC(t))}function vC(t,e){return"translate("+t+","+e+")"}function gC(t){return"rotate("+t+")"}function mC(t){return vC(t.x||0,t.y||0)}var yC=function(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=cT),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return vC(t.x||0,t.y||0)+(t.angle?" "+gC(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){var r=n.x||0,i=n.y||0;return e(YT(t),n),HT(t,n).translate(r,i),n.angle&&t.rotate(n.angle*cT,r,i),t},draw:lC(r),pick:pC(r),isect:n||JT(r)}},bC=yC("arc",(function(t,e){return FT.context(t)(e)}));var _C=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,a=dC(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(YT(t),r),HT(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||fC(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)},isect:ZT,tip:n}},wC=_C("area",(function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?LT:NT).curve(aT(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<s&&(s=r,n=t[o]);return n})),xC=1;function kC(){xC=1}var EC=function(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+xC++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(Ut.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},SC=.5;function OC(t,e){var n=e.stroke?SC:0;t.beginPath(),qT(t,e,n,n)}var AC=dC(OC);var TC={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",mC(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),HT(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;uC(e,(function(e){var i,a=e.x||0,o=e.y||0,s=e.width||0,u=e.height||0;t.save(),t.translate(a,o),(e.stroke||e.fill)&&(i=null==e.opacity?1:e.opacity)>0&&(OC(t,e),e.fill&&rC(t,e,i)&&t.fill(),e.stroke&&aC(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,u),t.clip()),n&&n.translate(-a,-o),uC(e,(function(e){r.draw(t,e,n)})),n&&n.translate(a,o),t.restore()}))},pick:function(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this,s=n*t.pixelRatio,u=r*t.pixelRatio;return cC(e,(function(c){var l,f,h,d;if(!(d=c.bounds)||d.contains(i,a))return f=c.x||0,h=c.y||0,t.save(),t.translate(f,h),f=i-f,h=a-h,!(l=cC(c,(function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,h)?o.pick(t,n,r,f,h):null})))&&!1!==e.interactive&&(c.fill||c.stroke)&&AC(t,c,s,u)&&(l=c),t.restore(),l||null}))},isect:QT,background:function(t,e){var n=e.stroke?SC:0;t("class","background"),t("d",qT(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?EC(n,e,e):null)}};function CC(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then((function(e){t.image=e,t.image.url=t.url}))),n}function jC(t,e){return"center"===t?e/2:"right"===t?e:0}function DC(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var RC={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=CC(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,s=(null!=e.height?e.height:r.height)||0,u=!1===e.aspect?"none":"xMidYMid";i-=jC(e.align,o),a-=DC(e.baseline,s),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",vC(i,a)),t("width",o),t("height",s),t("preserveAspectRatio",u)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=jC(e.align,a),i-=DC(e.baseline,o),t.set(r,i,r+a,i+o)},draw:function(t,e,n){var r=this;uC(e,(function(e){if(!n||n.intersects(e.bounds)){var i,a,o,s,u=CC(e,r),c=e.x||0,l=e.y||0,f=(null!=e.width?e.width:u.width)||0,h=(null!=e.height?e.height:u.height)||0;c-=jC(e.align,f),l-=DC(e.baseline,h),!1!==e.aspect&&(a=u.width/u.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(l+=(h-(s=f/a))/2,h=s):(c+=(f-(s=h*a))/2,f=s))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,c,l,f,h))}}))},pick:hC(),isect:Ut.eb,get:CC,xOffset:jC,yOffset:DC},MC=_C("line",(function(t,e){var n=e[0],r=n.interpolate||"linear";return IT.curve(aT(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(n=t[a].x-e[0])*n+(r=t[a].y-e[1])*r<i)return t[a];return null}));function PC(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=uT(n)).path=n),bT(t,r,e.x,e.y)}var FC={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",mC(e)),t("d",e.path)},bound:function(t,e){return PC(YT(t),e)?t.set(0,0,0,0):HT(t,e)},draw:lC(PC),pick:pC(PC),isect:JT(PC)};function NC(t,e){t.beginPath(),qT(t,e)}var LC={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",qT(null,e))},bound:function(t,e){var n,r;return HT(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:lC(NC),pick:pC(NC),isect:QT};function IC(t,e,n){var r,i,a,o;return!(!e.stroke||!aC(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var BC,UC={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",mC(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return HT(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){uC(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&IC(t,e,r)&&t.stroke()}}))},pick:hC((function(t,e,n,r){return!!t.isPointInStroke&&(IC(t,e,1)&&t.isPointInStroke(n,r))})),isect:tC},zC=yC("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),qC=yC("symbol",(function(t,e){return UT.context(t)(e)}),ZT),WC={height:$C,measureWidth:YC,estimateWidth:HC,width:HC,canvas:XC};function HC(t){return BC=$C(t),GC(KC(t))}function GC(t){return~~(.8*t.length*BC)}function YC(t){return $C(t)<=0?0:(XT.font=ZC(t),VC(KC(t)))}function VC(t){return XT.measureText(t).width}function $C(t){return null!=t.fontSize?t.fontSize:11}function XC(t){WC.width=t&&XT?YC:HC}function KC(t){var e=t.text;return null==e?"":t.limit>0?function(t){var e,n=+t.limit,r=t.text+"";WC.width===YC?(XT.font=ZC(t),e=VC):(BC=$C(t),e=GC);if(e(r)<n)return r;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,s=0,u=r.length;if(n-=e(a),o){for(;s<u;)i=s+u>>>1,e(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),e(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(t):e+""}function JC(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function ZC(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+$C(t)+"px "+JC(t,e)}function QC(t){var e=t.baseline,n=$C(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}XC(!0);var tj={left:"start",center:"middle",right:"end"},ej=new HA;function nj(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-lT,n+=i*Math.cos(e),r+=i*Math.sin(e)),ej.x1=n,ej.y1=r,ej}function rj(t,e,n){var r,i=WC.height(e),a=e.align,o=nj(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+QC(e)-Math.round(.8*i);if(r=WC.width(e),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*cT,s,u);else if(2===n)return t.rotatedPoints(e.angle*cT,s,u);return t}var ij={arc:bC,area:wC,group:TC,image:RC,line:MC,path:FC,rect:LC,rule:UC,shape:zC,symbol:qC,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+QC(e),a=nj(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",tj[e.align]||"start"),u?(n=vC(o,s)+" "+gC(u),(r||i)&&(n+=" "+vC(r,i))):n=vC(o+r,s+i),t("transform",n)},bound:rj,draw:function(t,e,n){uC(e,(function(e){var r,i,a,o,s;n&&!n.intersects(e.bounds)||(s=KC(e))&&(0===(r=null==e.opacity?1:e.opacity)||e.fontSize<=0||(t.font=ZC(e),t.textAlign=e.align||"left",a=(i=nj(e)).x1,o=i.y1,e.angle&&(t.save(),t.translate(a,o),t.rotate(e.angle*cT),a=o=0),a+=e.dx||0,o+=(e.dy||0)+QC(e),e.fill&&rC(t,e,r)&&t.fillText(s,a,o),e.stroke&&aC(t,e,r)&&t.strokeText(s,a,o),e.angle&&t.restore()))}))},pick:hC((function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=nj(e),s=o.x1,u=o.y1,c=rj(ej,e,1),l=-e.angle*cT,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(s-f*s+h*u),p=h*i+f*a+(u-h*s-f*u);return c.contains(d,p)})),isect:function(t,e){var n=rj(ej,t,2);return eC(e,n[0],n[1],n[2],n[3])||eC(e,n[0],n[1],n[4],n[5])||eC(e,n[4],n[5],n[6],n[7])||eC(e,n[2],n[3],n[6],n[7])}},trail:_C("trail",(function(t,e){return zT.context(t)(e)}),(function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null}))},aj=function(t,e,n){var r=ij[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new HA),t,n)},oj={mark:null},sj=function(t,e,n){var r,i,a,o,s=ij[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(oj.mark=t,a=oj),o=aj(a,u,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new HA,l)for(r=0,i=c.length;r<i;++r)e.union(aj(c[r],u,n));return t.bounds=e},uj=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function cj(t,e){return JSON.stringify(t,uj,e)}function lj(t){return function t(e){var n,r,i,a=e.marktype,o=e.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=e,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&t(o[r]);a&&sj(e);return e}("string"===typeof t?JSON.parse(t):t)}function fj(t){arguments.length?this.root=lj(t):(this.root=dj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new QA(this.root)])}var hj=fj.prototype;function dj(t,e){return{bounds:new HA,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function pj(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function vj(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function gj(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=pj(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function mj(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function yj(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}hj.toJSON=function(t){return cj(this.root,t||0)},hj.mark=function(t,e,n){var r=dj(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var bj=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function _j(t,e){this._active=null,this._handlers={},this._loader=t||WA(),this._tooltip=e||wj}function wj(t,e,n,r){t.element().setAttribute("title",r||"")}var xj=_j.prototype;function kj(t){this._el=null,this._bgcolor=null,this._loader=new tT(t)}xj.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},xj.element=function(){return this._el},xj.canvas=function(){return this._el&&this._el.firstChild},xj.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},xj.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},xj.on=function(){},xj.off=function(){},xj._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},xj.handlers=function(t){var e,n=this._handlers,r=[];if(t)r.push.apply(r,n[this.eventName(t)]);else for(e in n)r.push.apply(r,n[e]);return r},xj.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},xj.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then((function(e){var n=new MouseEvent(t.type,t),r=pj(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})).catch((function(){}))},xj.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=ij[o.marktype]).tip){for((a=bj(e,n))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},xj.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();t.mark&&(t=t.mark.group);)a+=t.x||0,o+=t.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var Ej=kj.prototype;Ej.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},Ej.element=function(){return this._el},Ej.canvas=function(){return this._el&&this._el.firstChild},Ej.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},Ej.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},Ej.dirty=function(){},Ej.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},Ej._render=function(){},Ej.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},Ej._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},Ej.sanitizeURL=function(t){return this._load("sanitizeURL",t)},Ej.loadImage=function(t){return this._load("loadImage",t)};var Sj="mouseout";function Oj(t,e){_j.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var Aj=Object(Ut.y)(Oj,_j);function Tj(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function Cj(t){return function(e){this.fire(t,e),this._active=null}}Aj.initialize=function(t,e,n){var r=this._canvas=t&&vj(t,"canvas");if(r){var i=this;this.events.forEach((function(t){r.addEventListener(t,(function(e){Aj[t]?Aj[t].call(i,e):i.fire(t,e)}))}))}return _j.prototype.initialize.call(this,t,e,n)},Aj.canvas=function(){return this._canvas},Aj.context=function(){return this._canvas.getContext("2d")},Aj.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],Aj.DOMMouseScroll=function(t){this.fire("mousewheel",t)},Aj.mousemove=Tj("mousemove","mouseover","mouseout"),Aj.dragover=Tj("dragover","dragenter","dragleave"),Aj.mouseout=Cj("mouseout"),Aj.dragleave=Cj("dragleave"),Aj.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},Aj.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},Aj.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},Aj.touchmove=function(t){this.fire("touchmove",t,!0)},Aj.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},Aj.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if(e.vegaType=t,"click"===t&&a&&a.href?this.handleHref(e,a,a.href):"mousemove"!==t&&t!==Sj||this.handleTooltip(e,a,t!==Sj),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},Aj.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},Aj.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},Aj.pickEvent=function(t){var e=bj(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},Aj.pick=function(t,e,n,r,i){var a=this.context();return ij[t.marktype].pick.call(this,a,t,e,n,r,i)};var jj="undefined"!==typeof window&&window.devicePixelRatio||1;function Dj(t){kj.call(this,t),this._redraw=!1,this._dirty=new HA}var Rj=Object(Ut.y)(Dj,kj),Mj=kj.prototype,Pj=new HA;function Fj(t,e){_j.call(this,t,e);var n=this;n._hrefHandler=Lj(n,(function(t,e){e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=Lj(n,(function(t,e){n.handleTooltip(t,e,t.type!==Sj)}))}Rj.initialize=function(t,e,n,r,i,a){return this._options=a,this._canvas=Bs(1,1,a&&a.type),t&&(mj(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Mj.initialize.call(this,t,e,n,r,i)},Rj.resize=function(t,e,n,r){return Mj.resize.call(this,t,e,n,r),function(t,e,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=s?jj:i;for(o in t.width=e*c,t.height=n*c,a)u[o]=a[o];s&&1!==c&&(t.style.width=e+"px",t.style.height=n+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},Rj.canvas=function(){return this._canvas},Rj.context=function(){return this._canvas?this._canvas.getContext("2d"):null},Rj.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=Pj.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},Rj._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},Rj.draw=function(t,e,n){var r=ij[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),Object(Ut.D)(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},Rj.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var Nj=Object(Ut.y)(Fj,_j);function Lj(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function Ij(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function Bj(t){return"</"+t+">"}Nj.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(Sj,this._tooltipHandler)),this._svg=r=t&&vj(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(Sj,this._tooltipHandler)),_j.prototype.initialize.call(this,t,e,n)},Nj.canvas=function(){return this._svg},Nj.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:Lj(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},Nj.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var Uj={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},zj={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},qj=Object.keys(zj),Wj=Uj.xmlns;function Hj(t){kj.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Gj=Object(Ut.y)(Hj,kj),Yj=kj.prototype;function Vj(t,e,n){var r,i,a;if("radial"===e.gradient){var o=gj(t,n++,"pattern",Wj);o.setAttribute("id",VA+e.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=gj(o,0,"rect",Wj)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+nD()+"#"+e.id+")"),(t=gj(t,n++,"radialGradient",Wj)).setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else(t=gj(t,n++,"linearGradient",Wj)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)(a=gj(t,r,"stop",Wj)).setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return mj(t,r),n}function $j(t,e,n){var r;return(t=gj(t,n,"clipPath",Wj)).setAttribute("id",e.id),e.path?(r=gj(t,0,"path",Wj)).setAttribute("d",e.path):((r=gj(t,0,"rect",Wj)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),n+1}function Xj(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Kj(t,e,n,r,i){var a,o=t._svg;if(!o&&(o=pj(a=e.ownerDocument,r,Wj),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var s=pj(a,"path",Wj);s.setAttribute("class","background"),o.appendChild(s),s.__data__=t;var u=pj(a,"g",Wj);o.appendChild(u),u.__data__=t}return(o.ownerSVGElement!==i||function(t){var e=t.mark||t.group;return e&&e.items.length>1}(t)&&o.previousSibling!==n)&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}Gj.initialize=function(t,e,n,r){return t&&(this._svg=gj(t,0,"svg",Wj),this._svg.setAttribute("class","marks"),mj(t,1),this._root=gj(this._svg,0,"g",Wj),mj(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Yj.initialize.call(this,t,e,n,r)},Gj.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),Yj.background.apply(this,arguments)},Gj.resize=function(t,e,n,r){return Yj.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Gj.canvas=function(){return this._svg},Gj.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in Uj)t[e]=Uj[e];var n=this._bgcolor?Ij("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+Bj("rect"):"";return Ij("svg",t)+n+this._svg.innerHTML+Bj("svg")},Gj._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),mj(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Gj.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=gj(e,0,"defs",Wj)),i=Vj(r,n.gradient[t],i);for(t in n.clipping)r||(n.el=r=gj(e,0,"defs",Wj)),i=$j(r,n.clipping[t],i);r&&(0===i?(e.removeChild(r),n.el=null):mj(r,i))},Gj._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},Gj.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},Gj.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},Gj._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=ij[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,Xj(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,Xj(e,u)),e._update=u));return!this._dirtyAll},Gj.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,a=this._svg,o=ij[e.marktype],s=!1===e.interactive?"none":null,u="g"===o.tag,c=null,l=0;function f(t){var e=i.isDirty(t),n=Kj(t,r,c,o.tag,a);e&&(i._update(o,n,t),u&&function(t,e,n){e=e.lastChild;var r,i=0;uC(n,(function(n){r=t.draw(e,n,r),++i})),mj(e,1+i)}(i,n,t)),c=n,++l}return(r=Kj(e,t,n,"g",a)).setAttribute("class",yj(e)),u||r.style.setProperty("pointer-events",s),e.clip?r.setAttribute("clip-path",EC(i,e,e.group)):r.removeAttribute("clip-path"),o.nested?e.items.length&&f(e.items[0]):uC(e,f),mj(r,l),r};var Jj=null,Zj=null,Qj={group:function(t,e,n){Zj=e.__values__,Jj=e.childNodes[1],t.foreground(eD,n,this),Jj=e.childNodes[0],t.background(eD,n,this);var r=!1===n.mark.interactive?"none":null;r!==Zj.events&&(Jj.style.setProperty("pointer-events",r),Zj.events=r)},text:function(t,e,n){var r;(r=KC(n))!==Zj.text&&(e.textContent=r,Zj.text=r),tD(e,"font-family",JC(n)),tD(e,"font-size",$C(n)+"px"),tD(e,"font-style",n.fontStyle),tD(e,"font-variant",n.fontVariant),tD(e,"font-weight",n.fontWeight)}};function tD(t,e,n){n!==Zj[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),Zj[e]=n)}function eD(t,e,n){e!==Zj[t]&&(null!=e?n?Jj.setAttributeNS(n,t,e):Jj.setAttribute(t,e):n?Jj.removeAttributeNS(n,t):Jj.removeAttribute(t),Zj[t]=e)}function nD(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function rD(t){kj.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}Gj._update=function(t,e,n){Jj=e,Zj=e.__values__,t.attr(eD,n,this);var r=Qj[t.type];r&&r.call(this,t,e,n),this.style(Jj,n)},Gj.style=function(t,e){var n,r,i,a,o;if(null!=e)for(n=0,r=qj.length;n<r;++n)o=e[i=qj[n]],"font"===i&&(o=JC(e)),o!==Zj[i]&&(a=zj[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):($A(o)&&(o=XA(o,this._defs.gradient,nD())),t.style.setProperty(a,o+"")),Zj[i]=o)};var iD,aD=Object(Ut.y)(rD,kj),oD=kj.prototype;function sD(t,e,n,r){iD[r||t]=e}function uD(t,e,n,r){if(null==t)return"";var i,a,o,s,u,c="";for("bgrect"===n&&!1===e.interactive&&(c+="pointer-events: none; "),"text"===n&&(c+="font-family: "+JC(t)+"; ",c+="font-size: "+$C(t)+"px; ",t.fontStyle&&(c+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(c+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(c+="font-weight: "+t.fontWeight+"; ")),i=0,a=qj.length;i<a;++i)o=qj[i],s=zj[o],null==(u=t[o])?"fill"===s&&(c+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?($A(u)&&(u=XA(u,r.gradient,"")),c+=s+": "+u+"; "):c+=s+": none; ";return c?'style="'+c.trim()+'"':null}aD.resize=function(t,e,n,r){oD.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in Uj)o[s]=Uj[s];a.head=Ij("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?Ij("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+Bj("rect"):"",a.root=Ij("g",{transform:"translate("+i+")"}),a.foot=Bj("g")+Bj("svg"),this},aD.background=function(){var t=oD.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},aD.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},aD._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},aD.buildDefs=function(){var t,e,n,r,i,a=this._defs,o="";for(e in a.gradient){for(i=(n=a.gradient[e]).stops,"radial"===n.gradient?(o+=Ij(r="pattern",{id:VA+e,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=Ij("rect",{width:"1",height:"1",fill:"url(#"+e+")"})+Bj("rect"),o+=Bj(r),o+=Ij(r="radialGradient",{id:e,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=Ij(r="linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<i.length;++t)o+=Ij("stop",{offset:i[t].offset,"stop-color":i[t].color})+Bj("stop");o+=Bj(r)}for(e in a.clipping)n=a.clipping[e],o+=Ij("clipPath",{id:e}),n.path?o+=Ij("path",{d:n.path})+Bj("path"):o+=Ij("rect",{x:0,y:0,width:n.width,height:n.height})+Bj("rect"),o+=Bj("clipPath");return o.length>0?Ij("defs")+o+Bj("defs"):""},aD.attributes=function(t,e){return iD={},t(sD,e,this),iD},aD.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t}))}return null},aD.mark=function(t){var e,n=this,r=ij[t.marktype],i=r.tag,a=this._defs,o="";function s(s){var u=n.href(s);u&&(o+=Ij("a",u)),e="g"!==i?uD(s,t,i,a):null,o+=Ij(i,n.attributes(r.attr,s),e),"text"===i?o+=KC(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(o+=Ij("path",n.attributes(r.background,s),uD(s,t,"bgrect",a))+Bj("path"),o+=Ij("g",n.attributes(r.foreground,s))+n.markGroup(s)+Bj("g")),o+=Bj(i),u&&(o+=Bj("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),o+=Ij("g",{class:yj(t),"clip-path":t.clip?EC(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&s(t.items[0]):uC(t,s),o+Bj("g")},aD.markGroup=function(t){var e=this,n="";return uC(t,(function(t){n+=e.mark(t)})),n};var cD={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},lD={};function fD(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(lD[t]=e,this):lD[t]}function hD(t,e,n){var r=[],i=(new HA).union(e),a=t.marktype;return a?dD(t,i,n,r):"group"===a?pD(t,i,n,r):Object(Ut.n)("Intersect scene must be mark node or group item.")}function dD(t,e,n,r){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){var i=t.items,a=t.marktype,o=i.length,s=0;if("group"===a)for(;s<o;++s)pD(i[s],e,n,r);else for(var u=ij[a].isect;s<o;++s){var c=i[s];vD(c,e,u)&&r.push(c)}}return r}function pD(t,e,n,r){n&&n(t.mark)&&vD(t,e,ij.group.isect)&&r.push(t);var i=t.items,a=i&&i.length;if(a){var o=t.x||0,s=t.y||0;e.translate(-o,-s);for(var u=0;u<a;++u)dD(i[u],e,n,r);e.translate(o,s)}return r}function vD(t,e,n){var r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}lD.canvas=lD.png={renderer:Dj,headless:Dj,handler:Oj},lD.svg={renderer:Hj,headless:rD,handler:Fj},lD.none={};var gD=new HA,mD=function(t){var e=t.clip;if(Object(Ut.D)(e))e(YT(gD.clear()));else{if(!e)return;gD.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(gD)},yD=1e-9;function bD(t,e,n){return t===e||("path"===n?_D(t,e):t instanceof Date&&e instanceof Date?+t===+e:Object(Ut.E)(t)&&Object(Ut.E)(e)?Math.abs(t-e)<=yD:t&&e&&(Object(Ut.F)(t)||Object(Ut.F)(e))?null!=t&&null!=e&&function(t,e){var n,r,i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!bD(t[n],e[n],n))return!1;return typeof t===typeof e}(t,e):t==e)}function _D(t,e){return bD(uT(t),uT(e))}var wD=function(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:"default",item:null})),t.on(t.events("view","mousemove"),e,(function(t,n){var r=e.value,i=r?Object(Ut.H)(r)?r:r.user:"default",a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),t.add(null,(function(t){var e=t.cursor,n=this.value;return Object(Ut.H)(e)||(n=e.item,e=e.user),function(t){"undefined"!==typeof document&&document.body&&(document.body.style.cursor=t)}(e&&"default"!==e?e:n||e),n}),{cursor:e})};function xD(t,e){var n=t._runtime.data;return Object(Ut.v)(n,e)||Object(Ut.n)("Unrecognized data set: "+e),n[e]}function kD(t,e){ee(e)||Object(Ut.n)("Second argument to changes must be a changeset.");var n=xD(this,t);return n.modified=!0,this.pulse(n.input,e)}function ED(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function SD(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function OD(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function AD(t){var e=OD(t),n=ED(t),r=SD(t);t._renderer.background(t._background),t._renderer.resize(n,r,e),t._handler.origin(e),t._resizeListeners.forEach((function(e){try{e(n,r)}catch(i){t.error(i)}}))}function TD(t){this.clear(),t&&this.union(t)}var CD=TD.prototype;CD.clone=function(){return new TD(this)},CD.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},CD.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},CD.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},CD.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},CD.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},CD.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},CD.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},CD.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},CD.rotate=function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},CD.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},CD.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},CD.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},CD.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},CD.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},CD.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},CD.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},CD.width=function(){return this.x2-this.x1},CD.height=function(){return this.y2-this.y1};var jD=0,DD="p_";function RD(t){return t&&t.gradient}function MD(t,e,n){var r=t.id,i=t.gradient,a="radial"===i?DD:"";return r||(r=t.id="gradient_"+jD++,"radial"===i?(t.x1=PD(t.x1,.5),t.y1=PD(t.y1,.5),t.r1=PD(t.r1,0),t.x2=PD(t.x2,.5),t.y2=PD(t.y2,.5),t.r2=PD(t.r2,.5),a=DD):(t.x1=PD(t.x1,0),t.y1=PD(t.y1,0),t.x2=PD(t.x2,1),t.y2=PD(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+a+r+")"}function PD(t,e){return null!=t?t:e}function FD(t){this.mark=t,this.bounds=this.bounds||new TD}function ND(t){FD.call(this,t),this.items=this.items||[]}Object(Ut.y)(ND,FD);var LD=/^([A-Za-z]+:)?\/\//,ID=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,BD=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,UD="file://";function zD(t,e){return qD.apply(this,arguments)}function qD(){return(qD=Object(qt.a)(E.a.mark((function t(e,n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function WD(t,e){return HD.apply(this,arguments)}function HD(){return(HD=Object(qt.a)(E.a.mark((function t(e,n){var r,i,a,o,s,u,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Ut.o)({},this.options,n),r=this.fileAccess,i={href:null},u=ID.test(e.replace(BD,"")),null!=e&&"string"===typeof e&&u||Object(Ut.n)("Sanitize failure, invalid URI: "+Object(Ut.X)(e)),c=LD.test(e),(s=n.baseURL)&&!c&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),o=(a=e.startsWith(UD))||"file"===n.mode||"http"!==n.mode&&!c&&r,a?e=e.slice(UD.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function GD(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:YD}function YD(){return VD.apply(this,arguments)}function VD(){return(VD=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $D(t){return t?function(){var e=Object(qt.a)(E.a.mark((function e(n,r){var i,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ut.o)({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Object(Ut.D)(o[a])?o[a]():o.text():Object(Ut.n)(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():XD}function XD(){return KD.apply(this,arguments)}function KD(){return(KD=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Ut.Y,Ut.ab,Ut.ab,Ut.Z,Ut.cb,Ut.x;function JD(t){var e=function(e,n){var r={delimiter:t};return ZD(e,n?Object(Ut.o)(n,r):r)};return e.responseType="text",e}function ZD(t,e){return e.header&&(t=e.header.map(Ut.X).join(e.delimiter)+"\n"+t),We(e.delimiter).parse(t+"")}ZD.responseType="text";var QD=n(82),tR={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function eR(t,e){var n,r,i,a;return t=Object(QD.a)(t,e),e&&e.feature?(n=Ze,i=e.feature):e&&e.mesh?(n=nn,i=e.mesh,a=tR[e.filter]):Object(Ut.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):Object(Ut.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}eR.responseType="json";JD(","),JD("\t"),QD.a;var nR=function(t,e){return function(n){return{options:n||{},sanitize:WD,load:zD,fileAccess:!!e,file:GD(e),http:$D(t)}}}("undefined"!==typeof fetch&&fetch,null);function rR(t){this._pending=0,this._loader=t||nR()}var iR=rR.prototype;function aR(t){t._pending+=1}function oR(t){t._pending-=1}iR.pending=function(){return this._pending},iR.sanitizeURL=function(t){var e=this;return aR(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return oR(e),t})).catch((function(){return oR(e),null}))},iR.loadImage=function(t){var e=this,n=Us();return aR(e),e._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){oR(e),i.loaded=!0},i.onerror=function(){oR(e),i.loaded=!1},i.src=r,i})).catch((function(t){return oR(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}}))},iR.ready=function(){var t=this;return new Promise((function(e){!function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}(!1)}))};var sR={basis:{curve:Ju},"basis-closed":{curve:Qu},"basis-open":{curve:ec},bundle:{curve:rc,tension:"beta",value:.85},cardinal:{curve:oc,tension:"tension",value:0},"cardinal-open":{curve:lc,tension:"tension",value:0},"cardinal-closed":{curve:uc,tension:"tension",value:0},"catmull-rom":{curve:dc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vc,tension:"alpha",value:.5},"catmull-rom-open":{curve:mc,tension:"alpha",value:.5},linear:{curve:Iu},"linear-closed":{curve:bc},monotone:{horizontal:Tc,vertical:Ac},natural:{curve:Dc},step:{curve:Mc},"step-after":{curve:Fc},"step-before":{curve:Pc}};function uR(t,e,n){var r=Object(Ut.v)(sR,t)&&sR[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var cR={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},lR=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],fR=function(t){var e,n,r,i,a,o,s,u,c,l,f,h=[];for(u=0,l=(e=t.slice().replace(lR[0],"###$1").split(lR[1]).slice(1)).length;u<l;++u){for(r=(n=e[u]).slice(1).trim().replace(lR[2],"$1###$2").split(lR[3]),i=[o=n.charAt(0)],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=cR[o.toLowerCase()],i.length-1>s)for(c=1,f=i.length;c<f;c+=s)h.push([o].concat(i.slice(c,c+s)));else h.push(i)}return h},hR=Math.PI/180,dR=Math.PI/2,pR=2*Math.PI,vR=Math.sqrt(3)/2,gR={},mR={},yR=[].join;function bR(t){var e=yR.call(t);if(mR[e])return mR[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=c*o,f=-u*s,h=u*o,d=c*s,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),w=n+p-_*v,x=r+v+_*p,k=n+g,E=r+m,S=k+_*m,O=E-_*g;return mR[e]=[l*w+f*x,h*w+d*x,l*S+f*O,h*S+d*O,l*k+f*E,h*k+d*E]}var _R=["l",0,0,0,0,0,0,0];function wR(t,e){var n=_R[0]=t[0];if("a"===n||"A"===n)_R[1]=e*t[1],_R[2]=e*t[2],_R[3]=t[3],_R[4]=t[4],_R[5]=t[5],_R[6]=e*t[6],_R[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)_R[r]=e*t[r];return _R}var xR=function(t,e,n,r,i){var a,o,s,u,c,l=null,f=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var v=0,g=e.length;v<g;++v){switch(a=e[v],1!==i&&(a=wR(a,i)),a[0]){case"l":f+=a[1],h+=a[2],t.lineTo(f+n,h+r);break;case"L":f=a[1],h=a[2],t.lineTo(f+n,h+r);break;case"h":f+=a[1],t.lineTo(f+n,h+r);break;case"H":f=a[1],t.lineTo(f+n,h+r);break;case"v":h+=a[1],t.lineTo(f+n,h+r);break;case"V":h=a[1],t.lineTo(f+n,h+r);break;case"m":f+=a[1],h+=a[2],t.moveTo(f+n,h+r);break;case"M":f=a[1],h=a[2],t.moveTo(f+n,h+r);break;case"c":o=f+a[5],s=h+a[6],d=f+a[3],p=h+a[4],t.bezierCurveTo(f+a[1]+n,h+a[2]+r,d+n,p+r,o+n,s+r),f=o,h=s;break;case"C":f=a[5],h=a[6],d=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,f+n,h+r);break;case"s":o=f+a[3],s=h+a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,f+a[1]+n,h+a[2]+r,o+n,s+r),d=f+a[1],p=h+a[2],f=o,h=s;break;case"S":o=a[3],s=a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"q":o=f+a[3],s=h+a[4],d=f+a[1],p=h+a[2],t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"Q":o=a[3],s=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"t":o=f+a[1],s=h+a[2],null===l[0].match(/[QqTt]/)?(d=f,p=h):"t"===l[0]?(d=2*f-u,p=2*h-c):"q"===l[0]&&(d=2*f-d,p=2*h-p),u=d,c=p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),h=s,d=(f=o)+a[1],p=h+a[2];break;case"T":o=a[1],s=a[2],d=2*f-d,p=2*h-p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"a":kR(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+h+r]),f+=a[6],h+=a[7];break;case"A":kR(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],h=a[7];break;case"z":case"Z":t.closePath()}l=a}};function kR(t,e,n,r){for(var i=function(t,e,n,r,i,a,o,s,u){var c=yR.call(arguments);if(gR[c])return gR[c];var l=o*hR,f=Math.sin(l),h=Math.cos(l),d=h*(s-t)*.5+f*(u-e)*.5,p=h*(u-e)*.5-f*(s-t)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,_=g*s+m*u,w=y*s+b*u,x=g*t+m*e,k=y*t+b*e,E=1/((x-_)*(x-_)+(k-w)*(k-w))-.25;E<0&&(E=0);var S=Math.sqrt(E);a==i&&(S=-S);var O=.5*(_+x)-S*(k-w),A=.5*(w+k)+S*(x-_),T=Math.atan2(w-A,_-O),C=Math.atan2(k-A,x-O)-T;C<0&&1===a?C+=pR:C>0&&0===a&&(C-=pR);for(var j=Math.ceil(Math.abs(C/(dR+.001))),D=[],R=0;R<j;++R){var M=T+R*C/j,P=T+(R+1)*C/j;D[R]=[O,A,M,P,n,r,f,h]}return gR[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=bR(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var ER={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,pR)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=vR*n,i=r-.5773502691896257*n,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=vR*n,i=r-.5773502691896257*n;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=vR*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=vR*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=vR*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=vR*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function SR(t){return Object(Ut.v)(ER,t)?ER[t]:function(t){if(!Object(Ut.v)(OR,t)){var e=fR(t);OR[t]={draw:function(t,n){xR(t,e,0,0,Math.sqrt(n)/2)}}}return OR[t]}(t)}var OR={};function AR(t){return t.x}function TR(t){return t.y}function CR(t){return t.width}function jR(t){return t.height}function DR(t){return function(){return t}}function RR(t){return t.x||0}function MR(t){return t.y||0}function PR(t){return t.cornerRadius||0}function FR(t){return!(!1===t.defined)}var NR=Nu().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius(PR),LR=qu().x(RR).y1(MR).y0((function(t){return(t.y||0)+(t.height||0)})).defined(FR),IR=qu().y(MR).x1(RR).x0((function(t){return(t.x||0)+(t.width||0)})).defined(FR),BR=zu().x(RR).y(MR).defined(FR),UR=function(){var t=AR,e=TR,n=CR,r=jR,i=DR(0),a=null;function o(o,s,u){var c,l=null!=s?s:+t.call(this,o),f=null!=u?u:+e.call(this,o),h=+n.call(this,o),d=+r.call(this,o),p=+i.call(this,o);if(a||(a=c=gu()),p<=0)a.rect(l,f,h,d);else{var v=l+h,g=f+d;a.moveTo(l+p,f),a.lineTo(v-p,f),a.quadraticCurveTo(v,f,v,f+p),a.lineTo(v,g-p),a.quadraticCurveTo(v,g,v-p,g),a.lineTo(l+p,g),a.quadraticCurveTo(l,g,l,g-p),a.lineTo(l,f+p),a.quadraticCurveTo(l,f,l+p,f),a.closePath()}if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:DR(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:DR(+t),o):e},o.width=function(t){return arguments.length?(n="function"===typeof t?t:DR(+t),o):n},o.height=function(t){return arguments.length?(r="function"===typeof t?t:DR(+t),o):r},o.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:DR(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}().x(RR).y(MR).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius(PR),zR=Vu().type((function(t){return SR(t.shape||"circle")})).size((function(t){return null==t.size?64:t.size})),qR=function(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),h=(c/=f)*s,d=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-h,o-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+h,o+d),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,pR);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,h=!1;for(null==u&&(u=l=gu()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===h&&(h=!h)&&(i=0),h&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}().x(RR).y(MR).defined(FR).size((function(t){return t.size||1}));function WR(t,e,n,r){return UR.context(t)(e,n,r)}var HR,GR=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},YR=pR-1e-8;function VR(t){return HR=t,VR}function $R(){}function XR(t,e){HR.add(t,e)}VR.beginPath=$R,VR.closePath=$R,VR.moveTo=XR,VR.lineTo=XR,VR.rect=function(t,e,n,r){XR(t,e),XR(t+n,e+r)},VR.quadraticCurveTo=function(t,e,n,r){XR(t,e),XR(n,r)},VR.bezierCurveTo=function(t,e,n,r,i,a){XR(t,e),XR(n,r),XR(i,a)},VR.arc=function(t,e,n,r,i,a){if(Math.abs(i-r)>YR)return XR(t-n,e-n),void XR(t+n,e+n);var o,s,u,c,l=1/0,f=-1/0,h=1/0,d=-1/0;function p(t){u=n*Math.cos(t),c=n*Math.sin(t),u<l&&(l=u),u>f&&(f=u),c<h&&(h=c),c>d&&(d=c)}if(p(r),p(i),i!==r)if((r%=pR)<0&&(r+=pR),(i%=pR)<0&&(i+=pR),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=pR,o=r-r%dR,s=0;s<4&&o>i;++s,o-=dR)p(o);else for(o=r-r%dR+dR,s=0;s<4&&o<i;++s,o+=dR)p(o);XR(t+l,e+h),XR(t+f,e+d)};var KR=(KR=Bs(1,1))?KR.getContext("2d"):null,JR=new TD;function ZR(t){return function(e,n){if(!KR)return!0;t(KR,e),JR.clear().union(e.bounds).intersect(n).round();for(var r=JR.x1,i=JR.y1,a=JR.x2,o=JR.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(KR.isPointInPath(u,s))return!0;return!1}}function QR(t,e){return e.contains(t.x||0,t.y||0)}function tM(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(JR.set(n,r,n+i,r+a))}function eM(t,e,n,r,i){var a,o,s,u,c=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-e,p=i-n,v=0,g=1;for(u=0;u<4;++u){if(0===u&&(a=-d,o=-(c-e)),1===u&&(a=d,o=f-e),2===u&&(a=-p,o=-(l-n)),3===u&&(a=p,o=h-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>g)return!1;s>v&&(v=s)}else if(a>0){if(s<v)return!1;s<g&&(g=s)}}return!0}var nM=function(t,e,n){return RD(n)?function(t,e,n){for(var r=n.width(),i=n.height(),a=e.stops,o=a.length,s="radial"===e.gradient?t.createRadialGradient(n.x1+(e.x1||.5)*r,n.y1+(e.y1||.5)*i,Math.max(r,i)*(e.r1||0),n.x1+(e.x2||.5)*r,n.y1+(e.y2||.5)*i,Math.max(r,i)*(e.r2||.5)):t.createLinearGradient(n.x1+(e.x1||0)*r,n.y1+(e.y1||0)*i,n.x1+(e.x2||1)*r,n.y1+(e.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(t,n,e.bounds):n},rM=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=nM(t,e,e.fill),!0)},iM=[],aM=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=nM(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||iM),t.lineDashOffset=e.strokeDashOffset||0),!0))};function oM(t,e){return t.zindex-e.zindex||t.index-e.index}function sM(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(oM)}function uM(t,e){var n,r,i=t.items;if(i&&i.length){var a=sM(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function cM(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=sM(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function lM(t){return function(e,n,r){uM(n,(function(n){r&&!r.intersects(n.bounds)||fM(t,e,n,n)}))}}function fM(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&rM(e,n,i)&&e.fill(),n.stroke&&aM(e,n,i)&&e.stroke()))}function hM(t){return t=t||Ut.eb,function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,cM(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0}))}}function dM(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function pM(t){return hM(dM(t))}function vM(t,e){return"translate("+t+","+e+")"}function gM(t){return"rotate("+t+")"}function mM(t){return vM(t.x||0,t.y||0)}var yM=function(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=hR),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return vM(t.x||0,t.y||0)+(t.angle?" "+gM(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){var r=n.x||0,i=n.y||0;return e(VR(t),n),GR(t,n).translate(r,i),n.angle&&t.rotate(n.angle*hR,r,i),t},draw:lM(r),pick:pM(r),isect:n||ZR(r)}},bM=yM("arc",(function(t,e){return NR.context(t)(e)}));var _M=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,a=dM(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(VR(t),r),GR(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||fM(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)},isect:QR,tip:n}},wM=_M("area",(function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?IR:LR).curve(uR(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<s&&(s=r,n=t[o]);return n})),xM=1;var kM=function(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+xM++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(Ut.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},EM=.5;function SM(t,e){var n=e.stroke?EM:0;t.beginPath(),WR(t,e,n,n)}var OM=dM(SM);var AM={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",mM(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),GR(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;uM(e,(function(e){var i,a=e.x||0,o=e.y||0,s=e.width||0,u=e.height||0;t.save(),t.translate(a,o),(e.stroke||e.fill)&&(i=null==e.opacity?1:e.opacity)>0&&(SM(t,e),e.fill&&rM(t,e,i)&&t.fill(),e.stroke&&aM(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,u),t.clip()),n&&n.translate(-a,-o),uM(e,(function(e){r.draw(t,e,n)})),n&&n.translate(a,o),t.restore()}))},pick:function(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this,s=n*t.pixelRatio,u=r*t.pixelRatio;return cM(e,(function(c){var l,f,h,d;if(!(d=c.bounds)||d.contains(i,a))return f=c.x||0,h=c.y||0,t.save(),t.translate(f,h),f=i-f,h=a-h,!(l=cM(c,(function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,h)?o.pick(t,n,r,f,h):null})))&&!1!==e.interactive&&(c.fill||c.stroke)&&OM(t,c,s,u)&&(l=c),t.restore(),l||null}))},isect:tM,background:function(t,e){var n=e.stroke?EM:0;t("class","background"),t("d",WR(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?kM(n,e,e):null)}};function TM(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then((function(e){t.image=e,t.image.url=t.url}))),n}function CM(t,e){return"center"===t?e/2:"right"===t?e:0}function jM(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var DM={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=TM(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,s=(null!=e.height?e.height:r.height)||0,u=!1===e.aspect?"none":"xMidYMid";i-=CM(e.align,o),a-=jM(e.baseline,s),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",vM(i,a)),t("width",o),t("height",s),t("preserveAspectRatio",u)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=CM(e.align,a),i-=jM(e.baseline,o),t.set(r,i,r+a,i+o)},draw:function(t,e,n){var r=this;uM(e,(function(e){if(!n||n.intersects(e.bounds)){var i,a,o,s,u=TM(e,r),c=e.x||0,l=e.y||0,f=(null!=e.width?e.width:u.width)||0,h=(null!=e.height?e.height:u.height)||0;c-=CM(e.align,f),l-=jM(e.baseline,h),!1!==e.aspect&&(a=u.width/u.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(l+=(h-(s=f/a))/2,h=s):(c+=(f-(s=h*a))/2,f=s))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,c,l,f,h))}}))},pick:hM(),isect:Ut.eb,get:TM,xOffset:CM,yOffset:jM},RM=_M("line",(function(t,e){var n=e[0],r=n.interpolate||"linear";return BR.curve(uR(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(n=t[a].x-e[0])*n+(r=t[a].y-e[1])*r<i)return t[a];return null}));function MM(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=fR(n)).path=n),xR(t,r,e.x,e.y)}var PM={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",mM(e)),t("d",e.path)},bound:function(t,e){return MM(VR(t),e)?t.set(0,0,0,0):GR(t,e)},draw:lM(MM),pick:pM(MM),isect:ZR(MM)};function FM(t,e){t.beginPath(),WR(t,e)}var NM={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",WR(null,e))},bound:function(t,e){var n,r;return GR(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:lM(FM),pick:pM(FM),isect:tM};function LM(t,e,n){var r,i,a,o;return!(!e.stroke||!aM(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var IM,BM={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",mM(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return GR(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){uM(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&LM(t,e,r)&&t.stroke()}}))},pick:hM((function(t,e,n,r){return!!t.isPointInStroke&&(LM(t,e,1)&&t.isPointInStroke(n,r))})),isect:function(t,e){var n=t.x||0,r=t.y||0;return eM(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}},UM=yM("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),zM=yM("symbol",(function(t,e){return zR.context(t)(e)}),QR),qM={height:VM,measureWidth:GM,estimateWidth:WM,width:WM,canvas:$M};function WM(t){return IM=VM(t),HM(XM(t))}function HM(t){return~~(.8*t.length*IM)}function GM(t){return VM(t)<=0?0:(KR.font=JM(t),YM(XM(t)))}function YM(t){return KR.measureText(t).width}function VM(t){return null!=t.fontSize?t.fontSize:11}function $M(t){qM.width=t&&KR?GM:WM}function XM(t){var e=t.text;return null==e?"":t.limit>0?function(t){var e,n=+t.limit,r=t.text+"";qM.width===GM?(KR.font=JM(t),e=YM):(IM=VM(t),e=HM);if(e(r)<n)return r;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,s=0,u=r.length;if(n-=e(a),o){for(;s<u;)i=s+u>>>1,e(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),e(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(t):e+""}function KM(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function JM(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+VM(t)+"px "+KM(t,e)}function ZM(t){var e=t.baseline,n=VM(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}$M(!0);var QM={left:"start",center:"middle",right:"end"},tP=new TD;function eP(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-dR,n+=i*Math.cos(e),r+=i*Math.sin(e)),tP.x1=n,tP.y1=r,tP}function nP(t,e,n){var r,i=qM.height(e),a=e.align,o=eP(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+ZM(e)-Math.round(.8*i);if(r=qM.width(e),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*hR,s,u);else if(2===n)return t.rotatedPoints(e.angle*hR,s,u);return t}var rP={arc:bM,area:wM,group:AM,image:DM,line:RM,path:PM,rect:NM,rule:BM,shape:UM,symbol:zM,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+ZM(e),a=eP(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",QM[e.align]||"start"),u?(n=vM(o,s)+" "+gM(u),(r||i)&&(n+=" "+vM(r,i))):n=vM(o+r,s+i),t("transform",n)},bound:nP,draw:function(t,e,n){uM(e,(function(e){var r,i,a,o,s;n&&!n.intersects(e.bounds)||(s=XM(e))&&(0===(r=null==e.opacity?1:e.opacity)||e.fontSize<=0||(t.font=JM(e),t.textAlign=e.align||"left",a=(i=eP(e)).x1,o=i.y1,e.angle&&(t.save(),t.translate(a,o),t.rotate(e.angle*hR),a=o=0),a+=e.dx||0,o+=(e.dy||0)+ZM(e),e.fill&&rM(t,e,r)&&t.fillText(s,a,o),e.stroke&&aM(t,e,r)&&t.strokeText(s,a,o),e.angle&&t.restore()))}))},pick:hM((function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=eP(e),s=o.x1,u=o.y1,c=nP(tP,e,1),l=-e.angle*hR,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(s-f*s+h*u),p=h*i+f*a+(u-h*s-f*u);return c.contains(d,p)})),isect:function(t,e){var n=nP(tP,t,2);return eM(e,n[0],n[1],n[2],n[3])||eM(e,n[0],n[1],n[4],n[5])||eM(e,n[4],n[5],n[6],n[7])||eM(e,n[2],n[3],n[6],n[7])}},trail:_M("trail",(function(t,e){return qR.context(t)(e)}),(function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null}))},iP=function(t,e,n){var r=rP[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new TD),t,n)},aP={mark:null},oP=function(t,e,n){var r,i,a,o,s=rP[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(aP.mark=t,a=aP),o=iP(a,u,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new TD,l)for(r=0,i=c.length;r<i;++r)e.union(iP(c[r],u,n));return t.bounds=e},sP=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function uP(t){return function t(e){var n,r,i,a=e.marktype,o=e.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=e,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&t(o[r]);a&&oP(e);return e}("string"===typeof t?JSON.parse(t):t)}function cP(t){arguments.length?this.root=uP(t):(this.root=fP({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ND(this.root)])}var lP=cP.prototype;function fP(t,e){return{bounds:new TD,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function hP(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function dP(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function pP(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=hP(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function vP(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function gP(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}lP.toJSON=function(t){return function(t,e){return JSON.stringify(t,sP,e)}(this.root,t||0)},lP.mark=function(t,e,n){var r=fP(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var mP=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function yP(t,e){this._active=null,this._handlers={},this._loader=t||nR(),this._tooltip=e||bP}function bP(t,e,n,r){t.element().setAttribute("title",r||"")}var _P=yP.prototype;function wP(t){this._el=null,this._bgcolor=null,this._loader=new rR(t)}_P.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},_P.element=function(){return this._el},_P.canvas=function(){return this._el&&this._el.firstChild},_P.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},_P.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},_P.on=function(){},_P.off=function(){},_P._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},_P.handlers=function(t){var e,n=this._handlers,r=[];if(t)r.push.apply(r,n[this.eventName(t)]);else for(e in n)r.push.apply(r,n[e]);return r},_P.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},_P.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then((function(e){var n=new MouseEvent(t.type,t),r=hP(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})).catch((function(){}))},_P.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=rP[o.marktype]).tip){for((a=mP(e,n))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},_P.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();t.mark&&(t=t.mark.group);)a+=t.x||0,o+=t.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var xP=wP.prototype;xP.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},xP.element=function(){return this._el},xP.canvas=function(){return this._el&&this._el.firstChild},xP.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},xP.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},xP.dirty=function(){},xP.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},xP._render=function(){},xP.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},xP._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},xP.sanitizeURL=function(t){return this._load("sanitizeURL",t)},xP.loadImage=function(t){return this._load("loadImage",t)};var kP="mouseout";function EP(t,e){yP.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var SP=Object(Ut.y)(EP,yP);function OP(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function AP(t){return function(e){this.fire(t,e),this._active=null}}SP.initialize=function(t,e,n){var r=this._canvas=t&&dP(t,"canvas");if(r){var i=this;this.events.forEach((function(t){r.addEventListener(t,(function(e){SP[t]?SP[t].call(i,e):i.fire(t,e)}))}))}return yP.prototype.initialize.call(this,t,e,n)},SP.canvas=function(){return this._canvas},SP.context=function(){return this._canvas.getContext("2d")},SP.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],SP.DOMMouseScroll=function(t){this.fire("mousewheel",t)},SP.mousemove=OP("mousemove","mouseover","mouseout"),SP.dragover=OP("dragover","dragenter","dragleave"),SP.mouseout=AP("mouseout"),SP.dragleave=AP("dragleave"),SP.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},SP.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},SP.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},SP.touchmove=function(t){this.fire("touchmove",t,!0)},SP.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},SP.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if(e.vegaType=t,"click"===t&&a&&a.href?this.handleHref(e,a,a.href):"mousemove"!==t&&t!==kP||this.handleTooltip(e,a,t!==kP),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},SP.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},SP.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},SP.pickEvent=function(t){var e=mP(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},SP.pick=function(t,e,n,r,i){var a=this.context();return rP[t.marktype].pick.call(this,a,t,e,n,r,i)};var TP="undefined"!==typeof window&&window.devicePixelRatio||1;function CP(t){wP.call(this,t),this._redraw=!1,this._dirty=new TD}var jP=Object(Ut.y)(CP,wP),DP=wP.prototype,RP=new TD;function MP(t,e){yP.call(this,t,e);var n=this;n._hrefHandler=FP(n,(function(t,e){e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=FP(n,(function(t,e){n.handleTooltip(t,e,t.type!==kP)}))}jP.initialize=function(t,e,n,r,i,a){return this._options=a,this._canvas=Bs(1,1,a&&a.type),t&&(vP(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),DP.initialize.call(this,t,e,n,r,i)},jP.resize=function(t,e,n,r){return DP.resize.call(this,t,e,n,r),function(t,e,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=s?TP:i;for(o in t.width=e*c,t.height=n*c,a)u[o]=a[o];s&&1!==c&&(t.style.width=e+"px",t.style.height=n+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},jP.canvas=function(){return this._canvas},jP.context=function(){return this._canvas?this._canvas.getContext("2d"):null},jP.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=RP.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},jP._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},jP.draw=function(t,e,n){var r=rP[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),Object(Ut.D)(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},jP.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var PP=Object(Ut.y)(MP,yP);function FP(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function NP(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function LP(t){return"</"+t+">"}PP.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(kP,this._tooltipHandler)),this._svg=r=t&&dP(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(kP,this._tooltipHandler)),yP.prototype.initialize.call(this,t,e,n)},PP.canvas=function(){return this._svg},PP.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:FP(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},PP.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var IP={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},BP={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},UP=Object.keys(BP),zP=IP.xmlns;function qP(t){wP.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var WP=Object(Ut.y)(qP,wP),HP=wP.prototype;function GP(t,e,n){var r,i,a;if("radial"===e.gradient){var o=pP(t,n++,"pattern",zP);o.setAttribute("id",DD+e.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=pP(o,0,"rect",zP)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+tF()+"#"+e.id+")"),(t=pP(t,n++,"radialGradient",zP)).setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else(t=pP(t,n++,"linearGradient",zP)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)(a=pP(t,r,"stop",zP)).setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return vP(t,r),n}function YP(t,e,n){var r;return(t=pP(t,n,"clipPath",zP)).setAttribute("id",e.id),e.path?(r=pP(t,0,"path",zP)).setAttribute("d",e.path):((r=pP(t,0,"rect",zP)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),n+1}function VP(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function $P(t,e,n,r,i){var a,o=t._svg;if(!o&&(o=hP(a=e.ownerDocument,r,zP),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var s=hP(a,"path",zP);s.setAttribute("class","background"),o.appendChild(s),s.__data__=t;var u=hP(a,"g",zP);o.appendChild(u),u.__data__=t}return(o.ownerSVGElement!==i||function(t){var e=t.mark||t.group;return e&&e.items.length>1}(t)&&o.previousSibling!==n)&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}WP.initialize=function(t,e,n,r){return t&&(this._svg=pP(t,0,"svg",zP),this._svg.setAttribute("class","marks"),vP(t,1),this._root=pP(this._svg,0,"g",zP),vP(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),HP.initialize.call(this,t,e,n,r)},WP.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),HP.background.apply(this,arguments)},WP.resize=function(t,e,n,r){return HP.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},WP.canvas=function(){return this._svg},WP.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in IP)t[e]=IP[e];var n=this._bgcolor?NP("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+LP("rect"):"";return NP("svg",t)+n+this._svg.innerHTML+LP("svg")},WP._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),vP(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},WP.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=pP(e,0,"defs",zP)),i=GP(r,n.gradient[t],i);for(t in n.clipping)r||(n.el=r=pP(e,0,"defs",zP)),i=YP(r,n.clipping[t],i);r&&(0===i?(e.removeChild(r),n.el=null):vP(r,i))},WP._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},WP.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},WP.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},WP._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=rP[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,VP(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,VP(e,u)),e._update=u));return!this._dirtyAll},WP.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,a=this._svg,o=rP[e.marktype],s=!1===e.interactive?"none":null,u="g"===o.tag,c=null,l=0;function f(t){var e=i.isDirty(t),n=$P(t,r,c,o.tag,a);e&&(i._update(o,n,t),u&&function(t,e,n){e=e.lastChild;var r,i=0;uM(n,(function(n){r=t.draw(e,n,r),++i})),vP(e,1+i)}(i,n,t)),c=n,++l}return(r=$P(e,t,n,"g",a)).setAttribute("class",gP(e)),u||r.style.setProperty("pointer-events",s),e.clip?r.setAttribute("clip-path",kM(i,e,e.group)):r.removeAttribute("clip-path"),o.nested?e.items.length&&f(e.items[0]):uM(e,f),vP(r,l),r};var XP=null,KP=null,JP={group:function(t,e,n){KP=e.__values__,XP=e.childNodes[1],t.foreground(QP,n,this),XP=e.childNodes[0],t.background(QP,n,this);var r=!1===n.mark.interactive?"none":null;r!==KP.events&&(XP.style.setProperty("pointer-events",r),KP.events=r)},text:function(t,e,n){var r;(r=XM(n))!==KP.text&&(e.textContent=r,KP.text=r),ZP(e,"font-family",KM(n)),ZP(e,"font-size",VM(n)+"px"),ZP(e,"font-style",n.fontStyle),ZP(e,"font-variant",n.fontVariant),ZP(e,"font-weight",n.fontWeight)}};function ZP(t,e,n){n!==KP[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),KP[e]=n)}function QP(t,e,n){e!==KP[t]&&(null!=e?n?XP.setAttributeNS(n,t,e):XP.setAttribute(t,e):n?XP.removeAttributeNS(n,t):XP.removeAttribute(t),KP[t]=e)}function tF(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function eF(t){wP.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}WP._update=function(t,e,n){XP=e,KP=e.__values__,t.attr(QP,n,this);var r=JP[t.type];r&&r.call(this,t,e,n),this.style(XP,n)},WP.style=function(t,e){var n,r,i,a,o;if(null!=e)for(n=0,r=UP.length;n<r;++n)o=e[i=UP[n]],"font"===i&&(o=KM(e)),o!==KP[i]&&(a=BP[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):(RD(o)&&(o=MD(o,this._defs.gradient,tF())),t.style.setProperty(a,o+"")),KP[i]=o)};var nF,rF=Object(Ut.y)(eF,wP),iF=wP.prototype;function aF(t,e,n,r){nF[r||t]=e}function oF(t,e,n,r){if(null==t)return"";var i,a,o,s,u,c="";for("bgrect"===n&&!1===e.interactive&&(c+="pointer-events: none; "),"text"===n&&(c+="font-family: "+KM(t)+"; ",c+="font-size: "+VM(t)+"px; ",t.fontStyle&&(c+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(c+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(c+="font-weight: "+t.fontWeight+"; ")),i=0,a=UP.length;i<a;++i)o=UP[i],s=BP[o],null==(u=t[o])?"fill"===s&&(c+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(RD(u)&&(u=MD(u,r.gradient,"")),c+=s+": "+u+"; "):c+=s+": none; ";return c?'style="'+c.trim()+'"':null}rF.resize=function(t,e,n,r){iF.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in IP)o[s]=IP[s];a.head=NP("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?NP("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+LP("rect"):"",a.root=NP("g",{transform:"translate("+i+")"}),a.foot=LP("g")+LP("svg"),this},rF.background=function(){var t=iF.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},rF.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},rF._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},rF.buildDefs=function(){var t,e,n,r,i,a=this._defs,o="";for(e in a.gradient){for(i=(n=a.gradient[e]).stops,"radial"===n.gradient?(o+=NP(r="pattern",{id:DD+e,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=NP("rect",{width:"1",height:"1",fill:"url(#"+e+")"})+LP("rect"),o+=LP(r),o+=NP(r="radialGradient",{id:e,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=NP(r="linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<i.length;++t)o+=NP("stop",{offset:i[t].offset,"stop-color":i[t].color})+LP("stop");o+=LP(r)}for(e in a.clipping)n=a.clipping[e],o+=NP("clipPath",{id:e}),n.path?o+=NP("path",{d:n.path})+LP("path"):o+=NP("rect",{x:0,y:0,width:n.width,height:n.height})+LP("rect"),o+=LP("clipPath");return o.length>0?NP("defs")+o+LP("defs"):""},rF.attributes=function(t,e){return nF={},t(aF,e,this),nF},rF.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t}))}return null},rF.mark=function(t){var e,n=this,r=rP[t.marktype],i=r.tag,a=this._defs,o="";function s(s){var u=n.href(s);u&&(o+=NP("a",u)),e="g"!==i?oF(s,t,i,a):null,o+=NP(i,n.attributes(r.attr,s),e),"text"===i?o+=XM(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(o+=NP("path",n.attributes(r.background,s),oF(s,t,"bgrect",a))+LP("path"),o+=NP("g",n.attributes(r.foreground,s))+n.markGroup(s)+LP("g")),o+=LP(i),u&&(o+=LP("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),o+=NP("g",{class:gP(t),"clip-path":t.clip?kM(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&s(t.items[0]):uM(t,s),o+LP("g")},rF.markGroup=function(t){var e=this,n="";return uM(t,(function(t){n+=e.mark(t)})),n};var sF={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},uF={};function cF(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(uF[t]=e,this):uF[t]}uF.canvas=uF.png={renderer:CP,headless:CP,handler:EP},uF.svg={renderer:qP,headless:eF,handler:MP},uF.none={};new TD;var lF=function(t,e,n){var r,i,a,o=t._renderer,s=o&&o.canvas();return s&&(a=OD(t),i=e.changedTouches?e.changedTouches[0]:e,(r=mP(i,s))[0]-=a[0],r[1]-=a[1]),e.dataflow=t,e.item=n,e.vega=function(t,e,n){var r=e?"group"===e.mark.marktype?e:e.mark.group:null;function i(t){var n,i=r;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function a(t){if(!t)return n;Object(Ut.H)(t)&&(t=i(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:Object(Ut.l)(t),item:Object(Ut.l)(e||{}),group:i,xy:a,x:function(t){return a(t)[0]},y:function(t){return a(t)[1]}}}(t,n,r),e};var fF="view",hF="timer",dF="window",pF={trap:!1};function vF(t,e,n){var r=t._eventConfig&&t._eventConfig[e];return!(!1===r||Object(Ut.F)(r)&&!r[n])||(t.warn("Blocked ".concat(e," ").concat(n," event listener.")),!1)}function gF(t){return t.item}function mF(t){return t.item.mark.source}function yF(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}var bF=function(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r},_F="vega-bind",wF="vega-bind-name",xF="vega-bind-radio",kF="vega-option-",EF=function(t,e,n){if(e){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(e){e!==t.signal(r.signal)&&t.runAsync(null,(function(){i.source=!0,t.signal(r.signal,e)}))}},r.debounce&&(i.update=Object(Ut.m)(r.debounce,i.update))),function(t,e,n,r){var i=bF("div",{class:_F});i.appendChild(bF("span",{class:wF},n.name||n.signal)),e.appendChild(i);var a=SF;switch(n.input){case"checkbox":a=OF;break;case"select":a=AF;break;case"radio":a=TF;break;case"range":a=CF}a(t,i,n,r)}(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(t.signal(r.signal))})),i.active=!0),i}};function SF(t,e,n,r){var i=bF("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",(function(){t.update(i.value)})),t.elements=[i],t.set=function(t){i.value=t}}function OF(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=bF("input",i);e.appendChild(a),a.addEventListener("change",(function(){t.update(a.checked)})),t.elements=[a],t.set=function(t){a.checked=!!t||null}}function AF(t,e,n,r){var i=bF("select",{name:n.signal});n.options.forEach((function(t){var e={value:t};jF(t,r)&&(e.selected=!0),i.appendChild(bF("option",e,t+""))})),e.appendChild(i),i.addEventListener("change",(function(){t.update(n.options[i.selectedIndex])})),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(jF(n.options[e],t))return void(i.selectedIndex=e)}}function TF(t,e,n,r){var i=bF("span",{class:xF});e.appendChild(i),t.elements=n.options.map((function(e){var a=kF+n.signal+"-"+e,o={id:a,type:"radio",name:n.signal,value:e};jF(e,r)&&(o.checked=!0);var s=bF("input",o);return s.addEventListener("change",(function(){t.update(e)})),i.appendChild(s),i.appendChild(bF("label",{for:a},e+"")),s})),t.set=function(e){for(var n=t.elements,r=0,i=n.length;r<i;++r)jF(n[r].value,e)&&(n[r].checked=!0)}}function CF(t,e,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,o=n.step||Tp(a,i,100),s=bF("input",{type:"range",name:n.signal,min:a,max:i,step:o});s.value=r;var u=bF("label",{},+r);function c(){u.textContent=s.value,t.update(+s.value)}e.appendChild(s),e.appendChild(u),s.addEventListener("input",c),s.addEventListener("change",c),t.elements=[s],t.set=function(t){s.value=t,u.textContent=t}}function jF(t,e){return t===e||t+""===e+""}var DF=function(t,e,n,r,i,a){return(e=e||new r(t.loader())).initialize(n,ED(t),SD(t),OD(t),i,a).background(t._background)},RF=function(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null};function MF(t,e){if("string"===typeof e){if("undefined"===typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e)try{e.innerHTML=""}catch(n){e=null,t.error(n)}return e}var PF=function(t,e,n,r){return FF.apply(this,arguments)};function FF(){return(FF=Object(qt.a)(E.a.mark((function t(e,n,r,i){var a,o;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=cF(n),(o=a&&a.headless)||Object(Ut.n)("Unrecognized renderer type: "+n),t.next=4,e.runAsync();case 4:return t.abrupt("return",DF(e,null,null,o,r,i).renderAsync(e._scenegraph.root));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function NF(){return(NF=Object(qt.a)(E.a.mark((function t(e,n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e!==sF.Canvas&&e!==sF.SVG&&e!==sF.PNG&&Object(Ut.n)("Unrecognized image type: "+e),t.next=3,PF(this,e,n);case 3:return r=t.sent,t.abrupt("return",e===sF.SVG?LF(r.svg(),"image/svg+xml"):r.canvas().toDataURL("image/png"));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function LF(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function IF(){return(IF=Object(qt.a)(E.a.mark((function t(e,n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,PF(this,sF.Canvas,e,n);case 2:return r=t.sent,t.abrupt("return",r.canvas());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function BF(){return(BF=Object(qt.a)(E.a.mark((function t(e){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,PF(this,sF.SVG,e);case 2:return n=t.sent,t.abrupt("return",n.svg());case 4:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}var UF,zF,qF,WF,HF,GF="RawCode",YF="Literal",VF="Property",$F="Identifier",XF="ArrayExpression",KF="BinaryExpression",JF="CallExpression",ZF="ConditionalExpression",QF="LogicalExpression",tN="MemberExpression",eN="ObjectExpression",nN="UnaryExpression";function rN(t){this.type=t}rN.prototype.visit=function(t){var e,n,r;if(t(this))return 1;for(n=0,r=(e=function(t){switch(t.type){case XF:return t.elements;case KF:case QF:return[t.left,t.right];case JF:var e=t.arguments.slice();return e.unshift(t.callee),e;case ZF:return[t.test,t.consequent,t.alternate];case tN:return[t.object,t.property];case eN:return t.properties;case VF:return[t.key,t.value];case nN:return[t.argument];case $F:case YF:case GF:default:return[]}}(this)).length;n<r;++n)if(e[n].visit(t))return 1};var iN=1,aN=2,oN=3,sN=4,uN=5,cN=6,lN=7,fN=8;(UF={})[iN]="Boolean",UF[aN]="<end>",UF[oN]="Identifier",UF[sN]="Keyword",UF[uN]="Null",UF[cN]="Numeric",UF[lN]="Punctuator",UF[fN]="String",UF[9]="RegularExpression";var hN="ArrayExpression",dN="BinaryExpression",pN="CallExpression",vN="ConditionalExpression",gN="Identifier",mN="Literal",yN="LogicalExpression",bN="MemberExpression",_N="ObjectExpression",wN="Property",xN="UnaryExpression",kN="Unexpected token %0",EN="Unexpected number",SN="Unexpected string",ON="Unexpected identifier",AN="Unexpected reserved word",TN="Unexpected end of input",CN="Invalid regular expression",jN="Invalid regular expression: missing /",DN="Octal literals are not allowed in strict mode.",RN="Duplicate data property in object literal not allowed in strict mode",MN="ILLEGAL",PN="Disabled.",FN=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),NN=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function LN(t,e){if(!t)throw new Error("ASSERT: "+e)}function IN(t){return t>=48&&t<=57}function BN(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function UN(t){return"01234567".indexOf(t)>=0}function zN(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function qN(t){return 10===t||13===t||8232===t||8233===t}function WN(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&FN.test(String.fromCharCode(t))}function HN(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&NN.test(String.fromCharCode(t))}var GN={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function YN(){for(var t;qF<WF&&(zN(t=zF.charCodeAt(qF))||qN(t));)++qF}function VN(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)qF<WF&&BN(zF[qF])?(r=zF[qF++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):cL({},kN,MN);return String.fromCharCode(i)}function $N(){var t,e,n,r;for(e=0,"}"===(t=zF[qF])&&cL({},kN,MN);qF<WF&&BN(t=zF[qF++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&cL({},kN,MN),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function XN(){var t,e;for(t=zF.charCodeAt(qF++),e=String.fromCharCode(t),92===t&&(117!==zF.charCodeAt(qF)&&cL({},kN,MN),++qF,(t=VN("u"))&&"\\"!==t&&WN(t.charCodeAt(0))||cL({},kN,MN),e=t);qF<WF&&HN(t=zF.charCodeAt(qF));)++qF,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==zF.charCodeAt(qF)&&cL({},kN,MN),++qF,(t=VN("u"))&&"\\"!==t&&HN(t.charCodeAt(0))||cL({},kN,MN),e+=t);return e}function KN(){var t,e;return t=qF,{type:1===(e=92===zF.charCodeAt(qF)?XN():function(){var t,e;for(t=qF++;qF<WF;){if(92===(e=zF.charCodeAt(qF)))return qF=t,XN();if(!HN(e))break;++qF}return zF.slice(t,qF)}()).length?oN:GN.hasOwnProperty(e)?sN:"null"===e?uN:"true"===e||"false"===e?iN:oN,value:e,start:t,end:qF}}function JN(){var t,e,n,r,i=qF,a=zF.charCodeAt(qF),o=zF[qF];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++qF,{type:lN,value:String.fromCharCode(a),start:i,end:qF};default:if(61===(t=zF.charCodeAt(qF+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return qF+=2,{type:lN,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:qF};case 33:case 61:return qF+=2,61===zF.charCodeAt(qF)&&++qF,{type:lN,value:zF.slice(i,qF),start:i,end:qF}}}return">>>="===(r=zF.substr(qF,4))?{type:lN,value:r,start:i,end:qF+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:lN,value:n,start:i,end:qF+=3}:o===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?{type:lN,value:e,start:i,end:qF+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:lN,value:o,start:i,end:++qF}:void cL({},kN,MN)}function ZN(){var t,e,n;if(LN(IN((n=zF[qF]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=qF,t="","."!==n){if(t=zF[qF++],n=zF[qF],"0"===t){if("x"===n||"X"===n)return++qF,function(t){for(var e="";qF<WF&&BN(zF[qF]);)e+=zF[qF++];return 0===e.length&&cL({},kN,MN),WN(zF.charCodeAt(qF))&&cL({},kN,MN),{type:cN,value:parseInt("0x"+e,16),start:t,end:qF}}(e);if(UN(n))return function(t){for(var e="0"+zF[qF++];qF<WF&&UN(zF[qF]);)e+=zF[qF++];return(WN(zF.charCodeAt(qF))||IN(zF.charCodeAt(qF)))&&cL({},kN,MN),{type:cN,value:parseInt(e,8),octal:!0,start:t,end:qF}}(e);n&&IN(n.charCodeAt(0))&&cL({},kN,MN)}for(;IN(zF.charCodeAt(qF));)t+=zF[qF++];n=zF[qF]}if("."===n){for(t+=zF[qF++];IN(zF.charCodeAt(qF));)t+=zF[qF++];n=zF[qF]}if("e"===n||"E"===n)if(t+=zF[qF++],"+"!==(n=zF[qF])&&"-"!==n||(t+=zF[qF++]),IN(zF.charCodeAt(qF)))for(;IN(zF.charCodeAt(qF));)t+=zF[qF++];else cL({},kN,MN);return WN(zF.charCodeAt(qF))&&cL({},kN,MN),{type:cN,value:parseFloat(t),start:e,end:qF}}function QN(){var t,e,n,r;return HF=null,YN(),t=qF,e=function(){var t,e,n,r;for(LN("/"===(t=zF[qF]),"Regular expression literal must start with a slash"),e=zF[qF++],n=!1,r=!1;qF<WF;)if(e+=t=zF[qF++],"\\"===t)qN((t=zF[qF++]).charCodeAt(0))&&cL({},jN),e+=t;else if(qN(t.charCodeAt(0)))cL({},jN);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||cL({},jN),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";qF<WF&&HN((t=zF[qF]).charCodeAt(0));)++qF,"\\"===t&&qF<WF?cL({},kN,MN):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&cL({},CN,n),{value:n,literal:e}}(),r=function(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,e){if(parseInt(e,16)<=1114111)return"x";cL({},CN)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){cL({},CN)}try{return new RegExp(t,e)}catch(i){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:qF}}function tL(){var t;return YN(),qF>=WF?{type:aN,start:qF,end:qF}:WN(t=zF.charCodeAt(qF))?KN():40===t||41===t||59===t?JN():39===t||34===t?function(){var t,e,n,r,i="",a=!1;for(LN("'"===(t=zF[qF])||'"'===t,"String literal must starts with a quote"),e=qF,++qF;qF<WF;){if((n=zF[qF++])===t){t="";break}if("\\"===n)if((n=zF[qF++])&&qN(n.charCodeAt(0)))"\r"===n&&"\n"===zF[qF]&&++qF;else switch(n){case"u":case"x":"{"===zF[qF]?(++qF,i+=$N()):i+=VN(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:UN(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),qF<WF&&UN(zF[qF])&&(a=!0,r=8*r+"01234567".indexOf(zF[qF++]),"0123".indexOf(n)>=0&&qF<WF&&UN(zF[qF])&&(r=8*r+"01234567".indexOf(zF[qF++]))),i+=String.fromCharCode(r)):i+=n}else{if(qN(n.charCodeAt(0)))break;i+=n}}return""!==t&&cL({},kN,MN),{type:fN,value:i,octal:a,start:e,end:qF}}():46===t?IN(zF.charCodeAt(qF+1))?ZN():JN():IN(t)?ZN():JN()}function eL(){var t;return qF=(t=HF).end,HF=tL(),qF=t.end,t}function nL(){var t;t=qF,HF=tL(),qF=t}function rL(t,e,n){var r=new rN("||"===t||"&&"===t?yN:dN);return r.operator=t,r.left=e,r.right=n,r}function iL(t,e){var n=new rN(pN);return n.callee=t,n.arguments=e,n}function aL(t){var e=new rN(gN);return e.name=t,e}function oL(t){var e=new rN(mN);return e.value=t.value,e.raw=zF.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function sL(t,e,n){var r=new rN(bN);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function uL(t,e,n){var r=new rN(wN);return r.key=e,r.value=n,r.kind=t,r}function cL(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,(function(t,e){return LN(e<r.length,"Message reference must be in range"),r[e]}));throw(n=new Error(i)).index=qF,n.description=i,n}function lL(t){t.type===aN&&cL(t,TN),t.type===cN&&cL(t,EN),t.type===fN&&cL(t,SN),t.type===oN&&cL(t,ON),t.type===sN&&cL(t,AN),cL(t,kN,t.value)}function fL(t){var e=eL();e.type===lN&&e.value===t||lL(e)}function hL(t){return HF.type===lN&&HF.value===t}function dL(t){return HF.type===sN&&HF.value===t}function pL(){var t=[];for(qF=HF.start,fL("[");!hL("]");)hL(",")?(eL(),t.push(null)):(t.push(OL()),hL("]")||fL(","));return eL(),function(t){var e=new rN(hN);return e.elements=t,e}(t)}function vL(){var t;return qF=HF.start,(t=eL()).type===fN||t.type===cN?(t.octal&&cL(t,DN),oL(t)):aL(t.value)}function gL(){var t,e,n;return qF=HF.start,(t=HF).type===oN?(n=vL(),fL(":"),uL("init",n,OL())):t.type!==aN&&t.type!==lN?(e=vL(),fL(":"),uL("init",e,OL())):void lL(t)}function mL(){var t,e,n=[],r={},i=String;for(qF=HF.start,fL("{");!hL("}");)e="$"+((t=gL()).key.type===gN?t.key.name:i(t.key.value)),Object.prototype.hasOwnProperty.call(r,e)?cL({},RN):r[e]=!0,n.push(t),hL("}")||fL(",");return fL("}"),function(t){var e=new rN(_N);return e.properties=t,e}(n)}var yL={if:1,this:1};function bL(){var t,e,n;if(hL("("))return function(){var t;return fL("("),t=AL(),fL(")"),t}();if(hL("["))return pL();if(hL("{"))return mL();if(t=HF.type,qF=HF.start,t===oN||yL[HF.value])n=aL(eL().value);else if(t===fN||t===cN)HF.octal&&cL(HF,DN),n=oL(eL());else{if(t===sN)throw new Error(PN);t===iN?((e=eL()).value="true"===e.value,n=oL(e)):t===uN?((e=eL()).value=null,n=oL(e)):hL("/")||hL("/=")?(n=oL(QN()),nL()):lL(eL())}return n}function _L(){var t=[];if(fL("("),!hL(")"))for(;qF<WF&&(t.push(OL()),!hL(")"));)fL(",");return fL(")"),t}function wL(){var t;return qF=HF.start,function(t){return t.type===oN||t.type===sN||t.type===iN||t.type===uN}(t=eL())||lL(t),aL(t.value)}function xL(){var t;return fL("["),t=AL(),fL("]"),t}function kL(){var t=function(){var t;for(t=bL();;)if(hL("."))fL("."),t=sL(".",t,wL());else if(hL("("))t=iL(t,_L());else{if(!hL("["))break;t=sL("[",t,xL())}return t}();if(HF.type===lN&&(hL("++")||hL("--")))throw new Error(PN);return t}function EL(){var t,e;if(HF.type!==lN&&HF.type!==sN)e=kL();else{if(hL("++")||hL("--"))throw new Error(PN);if(hL("+")||hL("-")||hL("~")||hL("!"))t=eL(),e=EL(),e=function(t,e){var n=new rN(xN);return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(dL("delete")||dL("void")||dL("typeof"))throw new Error(PN);e=kL()}}return e}function SL(t){var e=0;if(t.type!==lN&&t.type!==sN)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function OL(){var t,e;return t=function(){var t,e,n,r,i,a,o,s,u,c;if(t=HF,u=EL(),0===(i=SL(r=HF)))return u;for(r.prec=i,eL(),e=[t,HF],a=[u,r,o=EL()];(i=SL(HF))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),e.pop(),n=rL(s,u,o),a.push(n);(r=eL()).prec=i,a.push(r),e.push(HF),n=EL(),a.push(n)}for(n=a[c=a.length-1],e.pop();c>1;)e.pop(),n=rL(a[c-1].value,a[c-2],n),c-=2;return n}(),hL("?")&&(eL(),e=OL(),fL(":"),t=function(t,e,n){var r=new rN(vN);return r.test=t,r.consequent=e,r.alternate=n,r}(t,e,OL())),t}function AL(){var t=OL();if(hL(","))throw new Error(PN);return t}var TL=function(t){qF=0,WF=(zF=t).length,HF=null,nL();var e=AL();if(HF.type!==aN)throw new Error("Unexpect token after expression.");return e},CL={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},jL=function(t){function e(e,n,r){return function(i){return function(e,n,r,i){var a=t(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}(e,i,n,r)}}var n="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&Object(Ut.n)("Missing arguments to clamp function."),e.length>3&&Object(Ut.n)("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),join:e("join",null),indexof:e("indexOf",null),lastindexof:e("lastIndexOf",null),slice:e("slice",null),reverse:function(e){return"("+t(e[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase","String",0),lower:e("toLowerCase","String",0),substring:e("substring","String"),split:e("split","String"),replace:e("replace","String"),trim:e("trim","String",0),regexp:"RegExp",test:e("test","RegExp"),if:function(e){e.length<3&&Object(Ut.n)("Missing arguments to if function."),e.length>3&&Object(Ut.n)("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};var DL="intersect",RL="union",ML="E",PL="R",FL="R-E",NL="R-LE",LL="R-RE",IL="index:unit";function BL(t,e){for(var n,r,i=e.fields,a=e.values,o=i.length,s=0;s<o;++s)if((r=i[s]).getter=Ut.t.getter||Object(Ut.t)(r.field),n=r.getter(t),Object(Ut.C)(n)&&(n=Object(Ut.ab)(n)),Object(Ut.C)(a[s])&&(a[s]=Object(Ut.ab)(a[s])),Object(Ut.C)(a[s][0])&&(a[s]=a[s].map(Ut.ab)),r.type===ML){if(Object(Ut.A)(a[s])?a[s].indexOf(n)<0:n!==a[s])return!1}else if(r.type===PL){if(!Object(Ut.z)(n,a[s]))return!1}else if(r.type===LL){if(!Object(Ut.z)(n,a[s],!0,!1))return!1}else if(r.type===FL){if(!Object(Ut.z)(n,a[s],!1,!1))return!1}else if(r.type===NL&&!Object(Ut.z)(n,a[s],!1,!0))return!1;return!0}var UL={E_union:function(t,e){if(!t.length)return e;for(var n=0,r=e.length;n<r;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter((function(t){return e.indexOf(t)>=0})):e},R_union:function(t,e){var n=Object(Ut.ab)(e[0]),r=Object(Ut.ab)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<r&&(t[1]=r),t):[n,r]},R_intersect:function(t,e){var n=Object(Ut.ab)(e[0]),r=Object(Ut.ab)(e[1]);return n>r&&(n=e[1],r=e[0]),t.length?r<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>r&&(t[1]=r),t):[n,r]}},zL=":",qL="@";function WL(t,e,n,r){e[0].type!==YF&&Object(Ut.n)("First argument to selection functions must be a string literal.");var i=e[0].value,a=e.length>=2&&Object(Ut.S)(e).value,o=qL+"unit",s=zL+i;a!==DL||Object(Ut.v)(r,o)||(r[o]=n.getData(i).indataRef(n,"unit")),Object(Ut.v)(r,s)||(r[s]=n.getData(i).tuplesRef())}function HL(t){var e=this.context.data[t];return e?e.values.value:[]}var GL={};function YL(t,e,n){var r=t+":"+n,i=GL[r];return i&&i[0]===e||(GL[r]=i=[e,e(n)]),i[1]}function VL(t,e){return YL("timeFormat",Wn,e)(t)}var $L=new Date(2e3,0,1);function XL(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?($L.setMonth(t),$L.setDate(e),VL($L,n)):""}function KL(t,e){var n;return Object(Ut.D)(t)?t:Object(Ut.H)(t)?(n=e.scales[t])&&n.value:void 0}function JL(t,e){return function(n,r,i){if(n){var a=KL(n,(i||this).context);return a&&a.path[t](r)}return e(r)}}var ZL=JL("area",(function(t){return r_.reset(),e_(t,i_),2*r_})),QL=JL("bounds",(function(t){var e,n,r,i,a,o,s;if(b_=y_=-(g_=m_=1/0),E_=[],e_(t,A_),n=E_.length){for(E_.sort(N_),e=1,a=[r=E_[0]];e<n;++e)L_(r,(i=E_[e])[0])||L_(r,i[1])?(F_(r[0],i[1])>F_(r[0],r[1])&&(r[1]=i[1]),F_(i[0],r[1])>F_(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)i=a[e],(s=F_(r[1],i[0]))>o&&(o=s,g_=i[0],y_=r[1])}return E_=S_=null,g_===1/0||m_===1/0?[[NaN,NaN],[NaN,NaN]]:[[g_,m_],[y_,b_]]})),tI=JL("centroid",(function(t){I_=B_=U_=z_=q_=W_=H_=G_=Y_=V_=$_=0,e_(t,tw);var e=Y_,n=V_,r=$_,i=e*e+n*n+r*r;return i<kb&&(e=W_,n=H_,r=G_,B_<xb&&(e=U_,n=z_,r=q_),(i=e*e+n*n+r*r)<kb)?[NaN,NaN]:[Rb(n,e)*Tb,Wb(r/Ub(i))*Tb]}));function eI(t){this.clear(),t&&this.union(t)}var nI=eI.prototype;nI.clone=function(){return new eI(this)},nI.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},nI.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},nI.equals=function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},nI.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},nI.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},nI.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},nI.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},nI.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},nI.rotate=function(t,e,n){var r=this.rotatedPoints(t,e,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},nI.rotatedPoints=function(t,e,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(t),u=Math.sin(t),c=e-e*s+n*u,l=n-e*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*o+c,u*r+s*o+l,s*a-u*i+c,u*a+s*i+l,s*a-u*o+c,u*a+s*o+l]},nI.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},nI.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},nI.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},nI.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},nI.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},nI.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},nI.width=function(){return this.x2-this.x1},nI.height=function(){return this.y2-this.y1};var rI=0,iI="p_";function aI(t){return t&&t.gradient}function oI(t,e,n){var r=t.id,i=t.gradient,a="radial"===i?iI:"";return r||(r=t.id="gradient_"+rI++,"radial"===i?(t.x1=sI(t.x1,.5),t.y1=sI(t.y1,.5),t.r1=sI(t.r1,0),t.x2=sI(t.x2,.5),t.y2=sI(t.y2,.5),t.r2=sI(t.r2,.5),a=iI):(t.x1=sI(t.x1,0),t.y1=sI(t.y1,0),t.x2=sI(t.x2,1),t.y2=sI(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+a+r+")"}function sI(t,e){return null!=t?t:e}function uI(t){this.mark=t,this.bounds=this.bounds||new eI}function cI(t){uI.call(this,t),this.items=this.items||[]}Object(Ut.y)(cI,uI);var lI=/^([A-Za-z]+:)?\/\//,fI=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,hI=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,dI="file://";function pI(t,e){return vI.apply(this,arguments)}function vI(){return(vI=Object(qt.a)(E.a.mark((function t(e,n){var r,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sanitize(e,n);case 2:return r=t.sent,i=r.href,t.abrupt("return",r.localFile?this.file(i):this.http(i,n));case 5:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function gI(t,e){return mI.apply(this,arguments)}function mI(){return(mI=Object(qt.a)(E.a.mark((function t(e,n){var r,i,a,o,s,u,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Ut.o)({},this.options,n),r=this.fileAccess,i={href:null},u=fI.test(e.replace(hI,"")),null!=e&&"string"===typeof e&&u||Object(Ut.n)("Sanitize failure, invalid URI: "+Object(Ut.X)(e)),c=lI.test(e),(s=n.baseURL)&&!c&&(e.startsWith("/")||"/"===s[s.length-1]||(e="/"+e),e=s+e),o=(a=e.startsWith(dI))||"file"===n.mode||"http"!==n.mode&&!c&&r,a?e=e.slice(dI.length):e.startsWith("//")&&("file"===n.defaultProtocol?(e=e.slice(2),o=!0):e=(n.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,n.target&&(i.target=n.target+""),n.rel&&(i.rel=n.rel+""),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function yI(t){return t?function(e){return new Promise((function(n,r){t.readFile(e,(function(t,e){t?r(t):n(e)}))}))}:bI}function bI(){return _I.apply(this,arguments)}function _I(){return(_I=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No file system access.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wI(t){return t?function(){var e=Object(qt.a)(E.a.mark((function e(n,r){var i,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Ut.o)({},this.options.http,r),a=r&&r.response,e.next=4,t(n,i);case 4:return o=e.sent,e.abrupt("return",o.ok?Object(Ut.D)(o[a])?o[a]():o.text():Object(Ut.n)(o.status+""+o.statusText));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}():xI}function xI(){return kI.apply(this,arguments)}function kI(){return(kI=Object(qt.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(Ut.n)("No HTTP fetch method available.");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Ut.Y,Ut.ab,Ut.ab,Ut.Z,Ut.cb,Ut.x;function EI(t){var e=function(e,n){var r={delimiter:t};return SI(e,n?Object(Ut.o)(n,r):r)};return e.responseType="text",e}function SI(t,e){return e.header&&(t=e.header.map(Ut.X).join(e.delimiter)+"\n"+t),We(e.delimiter).parse(t+"")}SI.responseType="text";var OI=n(83),AI={interior:function(t,e){return t!==e},exterior:function(t,e){return t===e}};function TI(t,e){var n,r,i,a;return t=Object(OI.a)(t,e),e&&e.feature?(n=Ze,i=e.feature):e&&e.mesh?(n=nn,i=e.mesh,a=AI[e.filter]):Object(Ut.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=t.objects[i])?n(t,r,a):Object(Ut.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}TI.responseType="json";EI(","),EI("\t"),OI.a;var CI=function(t,e){return function(n){return{options:n||{},sanitize:gI,load:pI,fileAccess:!!e,file:yI(e),http:wI(t)}}}("undefined"!==typeof fetch&&fetch,null);function jI(t){this._pending=0,this._loader=t||CI()}var DI=jI.prototype;function RI(t){t._pending+=1}function MI(t){t._pending-=1}DI.pending=function(){return this._pending},DI.sanitizeURL=function(t){var e=this;return RI(e),e._loader.sanitize(t,{context:"href"}).then((function(t){return MI(e),t})).catch((function(){return MI(e),null}))},DI.loadImage=function(t){var e=this,n=Us();return RI(e),e._loader.sanitize(t,{context:"image"}).then((function(t){var r=t.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){MI(e),i.loaded=!0},i.onerror=function(){MI(e),i.loaded=!1},i.src=r,i})).catch((function(t){return MI(e),{loaded:!1,width:0,height:0,src:t&&t.url||""}}))},DI.ready=function(){var t=this;return new Promise((function(e){!function n(r){t.pending()?setTimeout((function(){n(!0)}),10):e(r)}(!1)}))};var PI={basis:{curve:Ju},"basis-closed":{curve:Qu},"basis-open":{curve:ec},bundle:{curve:rc,tension:"beta",value:.85},cardinal:{curve:oc,tension:"tension",value:0},"cardinal-open":{curve:lc,tension:"tension",value:0},"cardinal-closed":{curve:uc,tension:"tension",value:0},"catmull-rom":{curve:dc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:vc,tension:"alpha",value:.5},"catmull-rom-open":{curve:mc,tension:"alpha",value:.5},linear:{curve:Iu},"linear-closed":{curve:bc},monotone:{horizontal:Tc,vertical:Ac},natural:{curve:Dc},step:{curve:Mc},"step-after":{curve:Fc},"step-before":{curve:Pc}};function FI(t,e,n){var r=Object(Ut.v)(PI,t)&&PI[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var NI={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},LI=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],II=function(t){var e,n,r,i,a,o,s,u,c,l,f,h=[];for(u=0,l=(e=t.slice().replace(LI[0],"###$1").split(LI[1]).slice(1)).length;u<l;++u){for(r=(n=e[u]).slice(1).trim().replace(LI[2],"$1###$2").split(LI[3]),i=[o=n.charAt(0)],c=0,f=r.length;c<f;++c)(a=+r[c])===a&&i.push(a);if(s=NI[o.toLowerCase()],i.length-1>s)for(c=1,f=i.length;c<f;c+=s)h.push([o].concat(i.slice(c,c+s)));else h.push(i)}return h},BI=Math.PI/180,UI=Math.PI/2,zI=2*Math.PI,qI=Math.sqrt(3)/2,WI={},HI={},GI=[].join;function YI(t){var e=GI.call(t);if(HI[e])return HI[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=c*o,f=-u*s,h=u*o,d=c*s,p=Math.cos(i),v=Math.sin(i),g=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),w=n+p-_*v,x=r+v+_*p,k=n+g,E=r+m,S=k+_*m,O=E-_*g;return HI[e]=[l*w+f*x,h*w+d*x,l*S+f*O,h*S+d*O,l*k+f*E,h*k+d*E]}var VI=["l",0,0,0,0,0,0,0];function $I(t,e){var n=VI[0]=t[0];if("a"===n||"A"===n)VI[1]=e*t[1],VI[2]=e*t[2],VI[3]=t[3],VI[4]=t[4],VI[5]=t[5],VI[6]=e*t[6],VI[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)VI[r]=e*t[r];return VI}var XI=function(t,e,n,r,i){var a,o,s,u,c,l=null,f=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var v=0,g=e.length;v<g;++v){switch(a=e[v],1!==i&&(a=$I(a,i)),a[0]){case"l":f+=a[1],h+=a[2],t.lineTo(f+n,h+r);break;case"L":f=a[1],h=a[2],t.lineTo(f+n,h+r);break;case"h":f+=a[1],t.lineTo(f+n,h+r);break;case"H":f=a[1],t.lineTo(f+n,h+r);break;case"v":h+=a[1],t.lineTo(f+n,h+r);break;case"V":h=a[1],t.lineTo(f+n,h+r);break;case"m":f+=a[1],h+=a[2],t.moveTo(f+n,h+r);break;case"M":f=a[1],h=a[2],t.moveTo(f+n,h+r);break;case"c":o=f+a[5],s=h+a[6],d=f+a[3],p=h+a[4],t.bezierCurveTo(f+a[1]+n,h+a[2]+r,d+n,p+r,o+n,s+r),f=o,h=s;break;case"C":f=a[5],h=a[6],d=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,f+n,h+r);break;case"s":o=f+a[3],s=h+a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,f+a[1]+n,h+a[2]+r,o+n,s+r),d=f+a[1],p=h+a[2],f=o,h=s;break;case"S":o=a[3],s=a[4],d=2*f-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"q":o=f+a[3],s=h+a[4],d=f+a[1],p=h+a[2],t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"Q":o=a[3],s=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,h=s,d=a[1],p=a[2];break;case"t":o=f+a[1],s=h+a[2],null===l[0].match(/[QqTt]/)?(d=f,p=h):"t"===l[0]?(d=2*f-u,p=2*h-c):"q"===l[0]&&(d=2*f-d,p=2*h-p),u=d,c=p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),h=s,d=(f=o)+a[1],p=h+a[2];break;case"T":o=a[1],s=a[2],d=2*f-d,p=2*h-p,t.quadraticCurveTo(d+n,p+r,o+n,s+r),f=o,h=s;break;case"a":KI(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+h+r]),f+=a[6],h+=a[7];break;case"A":KI(t,f+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],h=a[7];break;case"z":case"Z":t.closePath()}l=a}};function KI(t,e,n,r){for(var i=function(t,e,n,r,i,a,o,s,u){var c=GI.call(arguments);if(WI[c])return WI[c];var l=o*BI,f=Math.sin(l),h=Math.cos(l),d=h*(s-t)*.5+f*(u-e)*.5,p=h*(u-e)*.5-f*(s-t)*.5,v=d*d/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);v>1&&(n*=v=Math.sqrt(v),r*=v);var g=h/n,m=f/n,y=-f/r,b=h/r,_=g*s+m*u,w=y*s+b*u,x=g*t+m*e,k=y*t+b*e,E=1/((x-_)*(x-_)+(k-w)*(k-w))-.25;E<0&&(E=0);var S=Math.sqrt(E);a==i&&(S=-S);var O=.5*(_+x)-S*(k-w),A=.5*(w+k)+S*(x-_),T=Math.atan2(w-A,_-O),C=Math.atan2(k-A,x-O)-T;C<0&&1===a?C+=zI:C>0&&0===a&&(C-=zI);for(var j=Math.ceil(Math.abs(C/(UI+.001))),D=[],R=0;R<j;++R){var M=T+R*C/j,P=T+(R+1)*C/j;D[R]=[O,A,M,P,n,r,f,h]}return WI[c]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=YI(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var JI={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,zI)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/7,i=n/2.5,a=n/8;t.moveTo(-r,n),t.lineTo(r,n),t.lineTo(r,-a),t.lineTo(i,-a),t.lineTo(0,-n),t.lineTo(-i,-a),t.lineTo(-r,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,r=qI*n,i=r-.5773502691896257*n,a=n/4;t.moveTo(0,-r-i),t.lineTo(-a,r-i),t.lineTo(a,r-i),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,r=qI*n,i=r-.5773502691896257*n;t.moveTo(0,-r-i),t.lineTo(-n,r-i),t.lineTo(n,r-i),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=qI*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=qI*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=qI*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=qI*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}},stroke:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function ZI(t){return Object(Ut.v)(JI,t)?JI[t]:function(t){if(!Object(Ut.v)(QI,t)){var e=II(t);QI[t]={draw:function(t,n){XI(t,e,0,0,Math.sqrt(n)/2)}}}return QI[t]}(t)}var QI={};function tB(t){return t.x}function eB(t){return t.y}function nB(t){return t.width}function rB(t){return t.height}function iB(t){return function(){return t}}function aB(t){return t.x||0}function oB(t){return t.y||0}function sB(t){return t.cornerRadius||0}function uB(t){return!(!1===t.defined)}var cB=Nu().startAngle((function(t){return t.startAngle||0})).endAngle((function(t){return t.endAngle||0})).padAngle((function(t){return t.padAngle||0})).innerRadius((function(t){return t.innerRadius||0})).outerRadius((function(t){return t.outerRadius||0})).cornerRadius(sB),lB=qu().x(aB).y1(oB).y0((function(t){return(t.y||0)+(t.height||0)})).defined(uB),fB=qu().y(oB).x1(aB).x0((function(t){return(t.x||0)+(t.width||0)})).defined(uB),hB=zu().x(aB).y(oB).defined(uB),dB=function(){var t=tB,e=eB,n=nB,r=rB,i=iB(0),a=null;function o(o,s,u){var c,l=null!=s?s:+t.call(this,o),f=null!=u?u:+e.call(this,o),h=+n.call(this,o),d=+r.call(this,o),p=+i.call(this,o);if(a||(a=c=gu()),p<=0)a.rect(l,f,h,d);else{var v=l+h,g=f+d;a.moveTo(l+p,f),a.lineTo(v-p,f),a.quadraticCurveTo(v,f,v,f+p),a.lineTo(v,g-p),a.quadraticCurveTo(v,g,v-p,g),a.lineTo(l+p,g),a.quadraticCurveTo(l,g,l,g-p),a.lineTo(l,f+p),a.quadraticCurveTo(l,f,l+p,f),a.closePath()}if(c)return a=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"===typeof e?e:iB(+e),o):t},o.y=function(t){return arguments.length?(e="function"===typeof t?t:iB(+t),o):e},o.width=function(t){return arguments.length?(n="function"===typeof t?t:iB(+t),o):n},o.height=function(t){return arguments.length?(r="function"===typeof t?t:iB(+t),o):r},o.cornerRadius=function(t){return arguments.length?(i="function"===typeof t?t:iB(+t),o):i},o.context=function(t){return arguments.length?(a=null==t?null:t,o):a},o}().x(aB).y(oB).width((function(t){return t.width||0})).height((function(t){return t.height||0})).cornerRadius(sB),pB=Vu().type((function(t){return ZI(t.shape||"circle")})).size((function(t){return null==t.size?64:t.size})),vB=function(){var t,e,n,r,i,a,o,s,u=null;function c(t,e,n){var r=n/2;if(i){var c=o-e,l=t-a;if(c||l){var f=Math.sqrt(c*c+l*l),h=(c/=f)*s,d=(l/=f)*s,p=Math.atan2(l,c);u.moveTo(a-h,o-d),u.lineTo(t-c*r,e-l*r),u.arc(t,e,r,p-Math.PI,p),u.lineTo(a+h,o+d),u.arc(a,o,s,p,p+Math.PI)}else u.arc(t,e,r,0,zI);u.closePath()}else i=1;a=t,o=e,s=r}function l(a){var o,s,l,f=a.length,h=!1;for(null==u&&(u=l=gu()),o=0;o<=f;++o)!(o<f&&r(s=a[o],o,a))===h&&(h=!h)&&(i=0),h&&c(+t(s,o,a),+e(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(t){return arguments.length?(e=t,l):e},l.size=function(t){return arguments.length?(n=t,l):n},l.defined=function(t){return arguments.length?(r=t,l):r},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}().x(aB).y(oB).defined(uB).size((function(t){return t.size||1}));function gB(t,e,n,r){return dB.context(t)(e,n,r)}var mB,yB=function(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t},bB=zI-1e-8;function _B(t){return mB=t,_B}function wB(){}function xB(t,e){mB.add(t,e)}_B.beginPath=wB,_B.closePath=wB,_B.moveTo=xB,_B.lineTo=xB,_B.rect=function(t,e,n,r){xB(t,e),xB(t+n,e+r)},_B.quadraticCurveTo=function(t,e,n,r){xB(t,e),xB(n,r)},_B.bezierCurveTo=function(t,e,n,r,i,a){xB(t,e),xB(n,r),xB(i,a)},_B.arc=function(t,e,n,r,i,a){if(Math.abs(i-r)>bB)return xB(t-n,e-n),void xB(t+n,e+n);var o,s,u,c,l=1/0,f=-1/0,h=1/0,d=-1/0;function p(t){u=n*Math.cos(t),c=n*Math.sin(t),u<l&&(l=u),u>f&&(f=u),c<h&&(h=c),c>d&&(d=c)}if(p(r),p(i),i!==r)if((r%=zI)<0&&(r+=zI),(i%=zI)<0&&(i+=zI),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=zI,o=r-r%UI,s=0;s<4&&o>i;++s,o-=UI)p(o);else for(o=r-r%UI+UI,s=0;s<4&&o<i;++s,o+=UI)p(o);xB(t+l,e+h),xB(t+f,e+d)};var kB=(kB=Bs(1,1))?kB.getContext("2d"):null,EB=new eI;function SB(t){return function(e,n){if(!kB)return!0;t(kB,e),EB.clear().union(e.bounds).intersect(n).round();for(var r=EB.x1,i=EB.y1,a=EB.x2,o=EB.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(kB.isPointInPath(u,s))return!0;return!1}}function OB(t,e){return e.contains(t.x||0,t.y||0)}function AB(t,e){var n=t.x||0,r=t.y||0,i=t.width||0,a=t.height||0;return e.intersects(EB.set(n,r,n+i,r+a))}function TB(t,e,n,r,i){var a,o,s,u,c=t.x1,l=t.y1,f=t.x2,h=t.y2,d=r-e,p=i-n,v=0,g=1;for(u=0;u<4;++u){if(0===u&&(a=-d,o=-(c-e)),1===u&&(a=d,o=f-e),2===u&&(a=-p,o=-(l-n)),3===u&&(a=p,o=h-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>g)return!1;s>v&&(v=s)}else if(a>0){if(s<v)return!1;s<g&&(g=s)}}return!0}var CB=function(t,e,n){return aI(n)?function(t,e,n){for(var r=n.width(),i=n.height(),a=e.stops,o=a.length,s="radial"===e.gradient?t.createRadialGradient(n.x1+(e.x1||.5)*r,n.y1+(e.y1||.5)*i,Math.max(r,i)*(e.r1||0),n.x1+(e.x2||.5)*r,n.y1+(e.y2||.5)*i,Math.max(r,i)*(e.r2||.5)):t.createLinearGradient(n.x1+(e.x1||0)*r,n.y1+(e.y1||0)*i,n.x1+(e.x2||1)*r,n.y1+(e.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(t,n,e.bounds):n},jB=function(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=CB(t,e,e.fill),!0)},DB=[],RB=function(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&((n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=CB(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||DB),t.lineDashOffset=e.strokeDashOffset||0),!0))};function MB(t,e){return t.zindex-e.zindex||t.index-e.index}function PB(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)(e=i[n]).index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(MB)}function FB(t,e){var n,r,i=t.items;if(i&&i.length){var a=PB(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function NB(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=PB(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(r=(i=t.items).length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function LB(t){return function(e,n,r){FB(n,(function(n){r&&!r.intersects(n.bounds)||IB(t,e,n,n)}))}}function IB(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&jB(e,n,i)&&e.fill(),n.stroke&&RB(e,n,i)&&e.stroke()))}function BB(t){return t=t||Ut.eb,function(e,n,r,i,a,o){return r*=e.pixelRatio,i*=e.pixelRatio,NB(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return t(e,n,r,i,a,o)?n:void 0}))}}function UB(t,e){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,c=null==e?u.fill:e,l=u.stroke&&n.isPointInStroke;return l&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!t(n,r)&&(c&&n.isPointInPath(i,a)||l&&n.isPointInStroke(i,a))}}function zB(t){return BB(UB(t))}function qB(t,e){return"translate("+t+","+e+")"}function WB(t){return"rotate("+t+")"}function HB(t){return qB(t.x||0,t.y||0)}var GB=function(t,e,n){function r(t,n){var r=n.x||0,i=n.y||0,a=n.angle||0;t.translate(r,i),a&&t.rotate(a*=BI),t.beginPath(),e(t,n),a&&t.rotate(-a),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return qB(t.x||0,t.y||0)+(t.angle?" "+WB(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){var r=n.x||0,i=n.y||0;return e(_B(t),n),yB(t,n).translate(r,i),n.angle&&t.rotate(n.angle*BI,r,i),t},draw:LB(r),pick:zB(r),isect:n||SB(r)}},YB=GB("arc",(function(t,e){return cB.context(t)(e)}));var VB=function(t,e,n){function r(t,n){t.beginPath(),e(t,n)}var i,a=UB(r);return{type:t,tag:"path",nested:!0,attr:function(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))},bound:function(t,n){var r=n.items;return 0===r.length?t:(e(_B(t),r),yB(t,r[0]))},draw:(i=r,function(t,e,n){!e.items.length||n&&!n.intersects(e.bounds)||IB(i,t,e.items[0],e.items)}),pick:function(t,e,n,r,i,o){var s=e.items,u=e.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=t.pixelRatio,r*=t.pixelRatio,a(t,s,n,r)?s[0]:null)},isect:OB,tip:n}},$B=VB("area",(function(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?fB:lB).curve(FI(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i="horizontal"===t[0].orient?e[1]:e[0],a="horizontal"===t[0].orient?"y":"x",o=t.length,s=1/0;--o>=0;)!1!==t[o].defined&&(r=Math.abs(t[o][a]-i))<s&&(s=r,n=t[o]);return n})),XB=1;var KB=function(t,e,n){var r=e.clip,i=t._defs,a=e.clip_id||(e.clip_id="clip"+XB++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(Ut.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},JB=.5;function ZB(t,e){var n=e.stroke?JB:0;t.beginPath(),gB(t,e,n,n)}var QB=UB(ZB);var tU={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",HB(e))},bound:function(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),yB(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){var r=this;FB(e,(function(e){var i,a=e.x||0,o=e.y||0,s=e.width||0,u=e.height||0;t.save(),t.translate(a,o),(e.stroke||e.fill)&&(i=null==e.opacity?1:e.opacity)>0&&(ZB(t,e),e.fill&&jB(t,e,i)&&t.fill(),e.stroke&&RB(t,e,i)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,u),t.clip()),n&&n.translate(-a,-o),FB(e,(function(e){r.draw(t,e,n)})),n&&n.translate(a,o),t.restore()}))},pick:function(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this,s=n*t.pixelRatio,u=r*t.pixelRatio;return NB(e,(function(c){var l,f,h,d;if(!(d=c.bounds)||d.contains(i,a))return f=c.x||0,h=c.y||0,t.save(),t.translate(f,h),f=i-f,h=a-h,!(l=NB(c,(function(t){return function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,f,h)?o.pick(t,n,r,f,h):null})))&&!1!==e.interactive&&(c.fill||c.stroke)&&QB(t,c,s,u)&&(l=c),t.restore(),l||null}))},isect:AB,background:function(t,e){var n=e.stroke?JB:0;t("class","background"),t("d",gB(null,e,n,n))},foreground:function(t,e,n){t("clip-path",e.clip?KB(n,e,e):null)}};function eU(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then((function(e){t.image=e,t.image.url=t.url}))),n}function nU(t,e){return"center"===t?e/2:"right"===t?e:0}function rU(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var iU={type:"image",tag:"image",nested:!1,attr:function(t,e,n){var r=eU(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,s=(null!=e.height?e.height:r.height)||0,u=!1===e.aspect?"none":"xMidYMid";i-=nU(e.align,o),a-=rU(e.baseline,s),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",qB(i,a)),t("width",o),t("height",s),t("preserveAspectRatio",u)},bound:function(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=nU(e.align,a),i-=rU(e.baseline,o),t.set(r,i,r+a,i+o)},draw:function(t,e,n){var r=this;FB(e,(function(e){if(!n||n.intersects(e.bounds)){var i,a,o,s,u=eU(e,r),c=e.x||0,l=e.y||0,f=(null!=e.width?e.width:u.width)||0,h=(null!=e.height?e.height:u.height)||0;c-=nU(e.align,f),l-=rU(e.baseline,h),!1!==e.aspect&&(a=u.width/u.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(l+=(h-(s=f/a))/2,h=s):(c+=(f-(s=h*a))/2,f=s))),u.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(u,c,l,f,h))}}))},pick:BB(),isect:Ut.eb,get:eU,xOffset:nU,yOffset:rU},aU=VB("line",(function(t,e){var n=e[0],r=n.interpolate||"linear";return hB.curve(FI(r,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,r,i=Math.pow(t[0].strokeWidth||1,2),a=t.length;--a>=0;)if(!1!==t[a].defined&&(n=t[a].x-e[0])*n+(r=t[a].y-e[1])*r<i)return t[a];return null}));function oU(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=II(n)).path=n),XI(t,r,e.x,e.y)}var sU={type:"path",tag:"path",nested:!1,attr:function(t,e){t("transform",HB(e)),t("d",e.path)},bound:function(t,e){return oU(_B(t),e)?t.set(0,0,0,0):yB(t,e)},draw:LB(oU),pick:zB(oU),isect:SB(oU)};function uU(t,e){t.beginPath(),gB(t,e)}var cU={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",gB(null,e))},bound:function(t,e){var n,r;return yB(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)},draw:LB(uU),pick:zB(uU),isect:AB};function lU(t,e,n){var r,i,a,o;return!(!e.stroke||!RB(t,e,n))&&(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),!0)}var fU,hU={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",HB(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,r;return yB(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)},draw:function(t,e,n){FB(e,(function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&lU(t,e,r)&&t.stroke()}}))},pick:BB((function(t,e,n,r){return!!t.isPointInStroke&&(lU(t,e,1)&&t.isPointInStroke(n,r))})),isect:function(t,e){var n=t.x||0,r=t.y||0;return TB(e,n,r,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r)}},dU=GB("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),pU=GB("symbol",(function(t,e){return pB.context(t)(e)}),OB),vU={height:_U,measureWidth:yU,estimateWidth:gU,width:gU,canvas:wU};function gU(t){return fU=_U(t),mU(xU(t))}function mU(t){return~~(.8*t.length*fU)}function yU(t){return _U(t)<=0?0:(kB.font=EU(t),bU(xU(t)))}function bU(t){return kB.measureText(t).width}function _U(t){return null!=t.fontSize?t.fontSize:11}function wU(t){vU.width=t&&kB?yU:gU}function xU(t){var e=t.text;return null==e?"":t.limit>0?function(t){var e,n=+t.limit,r=t.text+"";vU.width===yU?(kB.font=EU(t),e=bU):(fU=_U(t),e=mU);if(e(r)<n)return r;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,s=0,u=r.length;if(n-=e(a),o){for(;s<u;)i=s+u>>>1,e(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),e(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(t):e+""}function kU(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function EU(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+_U(t)+"px "+kU(t,e)}function SU(t){var e=t.baseline,n=_U(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}wU(!0);var OU={left:"start",center:"middle",right:"end"},AU=new eI;function TU(t){var e,n=t.x||0,r=t.y||0,i=t.radius||0;return i&&(e=(t.theta||0)-UI,n+=i*Math.cos(e),r+=i*Math.sin(e)),AU.x1=n,AU.y1=r,AU}function CU(t,e,n){var r,i=vU.height(e),a=e.align,o=TU(e),s=o.x1,u=o.y1,c=e.dx||0,l=(e.dy||0)+SU(e)-Math.round(.8*i);if(r=vU.width(e),"center"===a?c-=r/2:"right"===a&&(c-=r),t.set(c+=s,l+=u,c+r,l+i),e.angle&&!n)t.rotate(e.angle*BI,s,u);else if(2===n)return t.rotatedPoints(e.angle*BI,s,u);return t}var jU={arc:YB,area:$B,group:tU,image:iU,line:aU,path:sU,rect:cU,rule:hU,shape:dU,symbol:pU,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,r=e.dx||0,i=(e.dy||0)+SU(e),a=TU(e),o=a.x1,s=a.y1,u=e.angle||0;t("text-anchor",OU[e.align]||"start"),u?(n=qB(o,s)+" "+WB(u),(r||i)&&(n+=" "+qB(r,i))):n=qB(o+r,s+i),t("transform",n)},bound:CU,draw:function(t,e,n){FB(e,(function(e){var r,i,a,o,s;n&&!n.intersects(e.bounds)||(s=xU(e))&&(0===(r=null==e.opacity?1:e.opacity)||e.fontSize<=0||(t.font=EU(e),t.textAlign=e.align||"left",a=(i=TU(e)).x1,o=i.y1,e.angle&&(t.save(),t.translate(a,o),t.rotate(e.angle*BI),a=o=0),a+=e.dx||0,o+=(e.dy||0)+SU(e),e.fill&&jB(t,e,r)&&t.fillText(s,a,o),e.stroke&&RB(t,e,r)&&t.strokeText(s,a,o),e.angle&&t.restore()))}))},pick:BB((function(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=TU(e),s=o.x1,u=o.y1,c=CU(AU,e,1),l=-e.angle*BI,f=Math.cos(l),h=Math.sin(l),d=f*i-h*a+(s-f*s+h*u),p=h*i+f*a+(u-h*s-f*u);return c.contains(d,p)})),isect:function(t,e){var n=CU(AU,t,2);return TB(e,n[0],n[1],n[2],n[3])||TB(e,n[0],n[1],n[4],n[5])||TB(e,n[4],n[5],n[6],n[7])||TB(e,n[2],n[3],n[6],n[7])}},trail:VB("trail",(function(t,e){return vB.context(t)(e)}),(function(t,e){for(var n,r,i=t.length;--i>=0;)if(!1!==t[i].defined&&(n=t[i].x-e[0])*n+(r=t[i].y-e[1])*r<(n=t[i].size||1)*n)return t[i];return null}))},DU=function(t,e,n){var r=jU[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new eI),t,n)},RU={mark:null},MU=function(t,e,n){var r,i,a,o,s=jU[t.marktype],u=s.bound,c=t.items,l=c&&c.length;if(s.nested)return l?a=c[0]:(RU.mark=t,a=RU),o=DU(a,u,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new eI,l)for(r=0,i=c.length;r<i;++r)e.union(DU(c[r],u,n));return t.bounds=e},PU=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function FU(t){return function t(e){var n,r,i,a=e.marktype,o=e.items;if(o)for(r=0,i=o.length;r<i;++r)n=a?"mark":"group",o[r][n]=e,o[r].zindex&&(o[r][n].zdirty=!0),"group"===(a||n)&&t(o[r]);a&&MU(e);return e}("string"===typeof t?JSON.parse(t):t)}var NU=function(t){arguments.length?this.root=FU(t):(this.root=LU({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cI(this.root)])}.prototype;function LU(t,e){return{bounds:new eI,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function IU(t,e,n){return!t&&"undefined"!==typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function BU(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function UU(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=IU(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function zU(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function qU(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}NU.toJSON=function(t){return function(t,e){return JSON.stringify(t,PU,e)}(this.root,t||0)},NU.mark=function(t,e,n){var r=LU(t,e=e||this.root.items[0]);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var WU=function(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]};function HU(t,e){this._active=null,this._handlers={},this._loader=t||CI(),this._tooltip=e||GU}function GU(t,e,n,r){t.element().setAttribute("title",r||"")}var YU=HU.prototype;function VU(t){this._el=null,this._bgcolor=null,this._loader=new jI(t)}YU.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},YU.element=function(){return this._el},YU.canvas=function(){return this._el&&this._el.firstChild},YU.origin=function(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},YU.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},YU.on=function(){},YU.off=function(){},YU._handlerIndex=function(t,e,n){for(var r=t?t.length:0;--r>=0;)if(t[r].type===e&&(!n||t[r].handler===n))return r;return-1},YU.handlers=function(t){var e,n=this._handlers,r=[];if(t)r.push.apply(r,n[this.eventName(t)]);else for(e in n)r.push.apply(r,n[e]);return r},YU.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},YU.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then((function(e){var n=new MouseEvent(t.type,t),r=IU(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})).catch((function(){}))},YU.handleTooltip=function(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,r){var i,a,o=t&&t.mark;if(o&&(i=jU[o.marktype]).tip){for((a=WU(e,n))[0]-=r[0],a[1]-=r[1];t=t.mark.group;)a[0]-=t.x||0,a[1]-=t.y||0;t=i.tip(o.items,a)}return t}(e,t,this.canvas(),this._origin);var r=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,r)}},YU.getItemBoundingClientRect=function(t){if(e=this.canvas()){for(var e,n=e.getBoundingClientRect(),r=this._origin,i=t.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();t.mark&&(t=t.mark.group);)a+=t.x||0,o+=t.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var $U=VU.prototype;$U.initialize=function(t,e,n,r,i){return this._el=t,this.resize(e,n,r,i)},$U.element=function(){return this._el},$U.canvas=function(){return this._el&&this._el.firstChild},$U.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},$U.resize=function(t,e,n,r){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=r||1,this},$U.dirty=function(){},$U.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},$U._render=function(){},$U.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then((function(){return e})):Promise.resolve(e)},$U._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(t){t&&i(),n._ready=null}))}return r},$U.sanitizeURL=function(t){return this._load("sanitizeURL",t)},$U.loadImage=function(t){return this._load("loadImage",t)};var XU="mouseout";function KU(t,e){HU.call(this,t,e),this._down=null,this._touch=null,this._first=!0}var JU=Object(Ut.y)(KU,HU);function ZU(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function QU(t){return function(e){this.fire(t,e),this._active=null}}JU.initialize=function(t,e,n){var r=this._canvas=t&&BU(t,"canvas");if(r){var i=this;this.events.forEach((function(t){r.addEventListener(t,(function(e){JU[t]?JU[t].call(i,e):i.fire(t,e)}))}))}return HU.prototype.initialize.call(this,t,e,n)},JU.canvas=function(){return this._canvas},JU.context=function(){return this._canvas.getContext("2d")},JU.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],JU.DOMMouseScroll=function(t){this.fire("mousewheel",t)},JU.mousemove=ZU("mousemove","mouseover","mouseout"),JU.dragover=ZU("dragover","dragenter","dragleave"),JU.mouseout=QU("mouseout"),JU.dragleave=QU("dragleave"),JU.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},JU.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},JU.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},JU.touchmove=function(t){this.fire("touchmove",t,!0)},JU.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},JU.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if(e.vegaType=t,"click"===t&&a&&a.href?this.handleHref(e,a,a.href):"mousemove"!==t&&t!==XU||this.handleTooltip(e,a,t!==XU),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},JU.on=function(t,e){var n=this.eventName(t),r=this._handlers;return this._handlerIndex(r[n],t,e)<0&&(r[n]||(r[n]=[])).push({type:t,handler:e}),this},JU.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&r.splice(i,1),this},JU.pickEvent=function(t){var e=WU(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},JU.pick=function(t,e,n,r,i){var a=this.context();return jU[t.marktype].pick.call(this,a,t,e,n,r,i)};var tz="undefined"!==typeof window&&window.devicePixelRatio||1;function ez(t){VU.call(this,t),this._redraw=!1,this._dirty=new eI}var nz=Object(Ut.y)(ez,VU),rz=VU.prototype,iz=new eI;function az(t,e){HU.call(this,t,e);var n=this;n._hrefHandler=sz(n,(function(t,e){e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=sz(n,(function(t,e){n.handleTooltip(t,e,t.type!==XU)}))}nz.initialize=function(t,e,n,r,i,a){return this._options=a,this._canvas=Bs(1,1,a&&a.type),t&&(zU(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),rz.initialize.call(this,t,e,n,r,i)},nz.resize=function(t,e,n,r){return rz.resize.call(this,t,e,n,r),function(t,e,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,u=t.getContext("2d"),c=s?tz:i;for(o in t.width=e*c,t.height=n*c,a)u[o]=a[o];s&&1!==c&&(t.style.width=e+"px",t.style.height=n+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*r[0],c*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},nz.canvas=function(){return this._canvas},nz.context=function(){return this._canvas?this._canvas.getContext("2d"):null},nz.dirty=function(t){var e=function(t,e){if(null==e)return t;for(var n=iz.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}(t.bounds,t.mark.group);this._dirty.union(e)},nz._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},nz.draw=function(t,e,n){var r=jU[e.marktype];e.clip&&function(t,e){var n=e.clip;if(t.save(),t.beginPath(),Object(Ut.D)(n))n(t);else{var r=e.group;t.rect(0,0,r.width||0,r.height||0)}t.clip()}(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},nz.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var oz=Object(Ut.y)(az,HU);function sz(t,e){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,e.call(t._obj,n,r)}}function uz(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function cz(t){return"</"+t+">"}oz.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(XU,this._tooltipHandler)),this._svg=r=t&&BU(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(XU,this._tooltipHandler)),HU.prototype.initialize.call(this,t,e,n)},oz.canvas=function(){return this._svg},oz.on=function(t,e){var n=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[n],t,e)<0){var i={type:t,handler:e,listener:sz(this,e)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},oz.off=function(t,e){var n=this.eventName(t),r=this._handlers[n],i=this._handlerIndex(r,t,e);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var lz={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},fz={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},hz=Object.keys(fz),dz=lz.xmlns;function pz(t){VU.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var vz=Object(Ut.y)(pz,VU),gz=VU.prototype;function mz(t,e,n){var r,i,a;if("radial"===e.gradient){var o=UU(t,n++,"pattern",dz);o.setAttribute("id",iI+e.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=UU(o,0,"rect",dz)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+Oz()+"#"+e.id+")"),(t=UU(t,n++,"radialGradient",dz)).setAttribute("id",e.id),t.setAttribute("fx",e.x1),t.setAttribute("fy",e.y1),t.setAttribute("fr",e.r1),t.setAttribute("cx",e.x2),t.setAttribute("cy",e.y2),t.setAttribute("r",e.r2)}else(t=UU(t,n++,"linearGradient",dz)).setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2);for(r=0,i=e.stops.length;r<i;++r)(a=UU(t,r,"stop",dz)).setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);return zU(t,r),n}function yz(t,e,n){var r;return(t=UU(t,n,"clipPath",dz)).setAttribute("id",e.id),e.path?(r=UU(t,0,"path",dz)).setAttribute("d",e.path):((r=UU(t,0,"rect",dz)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)),n+1}function bz(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function _z(t,e,n,r,i){var a,o=t._svg;if(!o&&(o=IU(a=e.ownerDocument,r,dz),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===r))){var s=IU(a,"path",dz);s.setAttribute("class","background"),o.appendChild(s),s.__data__=t;var u=IU(a,"g",dz);o.appendChild(u),u.__data__=t}return(o.ownerSVGElement!==i||function(t){var e=t.mark||t.group;return e&&e.items.length>1}(t)&&o.previousSibling!==n)&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}vz.initialize=function(t,e,n,r){return t&&(this._svg=UU(t,0,"svg",dz),this._svg.setAttribute("class","marks"),zU(t,1),this._root=UU(this._svg,0,"g",dz),zU(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),gz.initialize.call(this,t,e,n,r)},vz.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),gz.background.apply(this,arguments)},vz.resize=function(t,e,n,r){return gz.resize.call(this,t,e,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},vz.canvas=function(){return this._svg},vz.svg=function(){if(!this._svg)return null;var t={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var e in lz)t[e]=lz[e];var n=this._bgcolor?uz("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+cz("rect"):"";return uz("svg",t)+n+this._svg.innerHTML+cz("svg")},vz._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),zU(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},vz.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=UU(e,0,"defs",dz)),i=mz(r,n.gradient[t],i);for(t in n.clipping)r||(n.el=r=UU(e,0,"defs",dz)),i=yz(r,n.clipping[t],i);r&&(0===i?(e.removeChild(r),n.el=null):zU(r,i))},vz._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},vz.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},vz.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},vz._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=t.length;a<o;++a)(n=(e=t[a]).mark).marktype!==r&&(r=n.marktype,i=jU[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,bz(e,u),n.items.forEach((function(t){t.dirty=u}))),n.zdirty||(e.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):e._svg&&(s=e._svg.parentNode)&&s.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e)._update!==u&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,bz(e,u)),e._update=u));return!this._dirtyAll},vz.draw=function(t,e,n){if(!this.isDirty(e))return e._svg;var r,i=this,a=this._svg,o=jU[e.marktype],s=!1===e.interactive?"none":null,u="g"===o.tag,c=null,l=0;function f(t){var e=i.isDirty(t),n=_z(t,r,c,o.tag,a);e&&(i._update(o,n,t),u&&function(t,e,n){e=e.lastChild;var r,i=0;FB(n,(function(n){r=t.draw(e,n,r),++i})),zU(e,1+i)}(i,n,t)),c=n,++l}return(r=_z(e,t,n,"g",a)).setAttribute("class",qU(e)),u||r.style.setProperty("pointer-events",s),e.clip?r.setAttribute("clip-path",KB(i,e,e.group)):r.removeAttribute("clip-path"),o.nested?e.items.length&&f(e.items[0]):FB(e,f),zU(r,l),r};var wz=null,xz=null,kz={group:function(t,e,n){xz=e.__values__,wz=e.childNodes[1],t.foreground(Sz,n,this),wz=e.childNodes[0],t.background(Sz,n,this);var r=!1===n.mark.interactive?"none":null;r!==xz.events&&(wz.style.setProperty("pointer-events",r),xz.events=r)},text:function(t,e,n){var r;(r=xU(n))!==xz.text&&(e.textContent=r,xz.text=r),Ez(e,"font-family",kU(n)),Ez(e,"font-size",_U(n)+"px"),Ez(e,"font-style",n.fontStyle),Ez(e,"font-variant",n.fontVariant),Ez(e,"font-weight",n.fontWeight)}};function Ez(t,e,n){n!==xz[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),xz[e]=n)}function Sz(t,e,n){e!==xz[t]&&(null!=e?n?wz.setAttributeNS(n,t,e):wz.setAttribute(t,e):n?wz.removeAttributeNS(n,t):wz.removeAttribute(t),xz[t]=e)}function Oz(){var t;return"undefined"===typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Az(t){VU.call(this,t),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}vz._update=function(t,e,n){wz=e,xz=e.__values__,t.attr(Sz,n,this);var r=kz[t.type];r&&r.call(this,t,e,n),this.style(wz,n)},vz.style=function(t,e){var n,r,i,a,o;if(null!=e)for(n=0,r=hz.length;n<r;++n)o=e[i=hz[n]],"font"===i&&(o=kU(e)),o!==xz[i]&&(a=fz[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):(aI(o)&&(o=oI(o,this._defs.gradient,Oz())),t.style.setProperty(a,o+"")),xz[i]=o)};var Tz,Cz=Object(Ut.y)(Az,VU),jz=VU.prototype;function Dz(t,e,n,r){Tz[r||t]=e}function Rz(t,e,n,r){if(null==t)return"";var i,a,o,s,u,c="";for("bgrect"===n&&!1===e.interactive&&(c+="pointer-events: none; "),"text"===n&&(c+="font-family: "+kU(t)+"; ",c+="font-size: "+_U(t)+"px; ",t.fontStyle&&(c+="font-style: "+t.fontStyle+"; "),t.fontVariant&&(c+="font-variant: "+t.fontVariant+"; "),t.fontWeight&&(c+="font-weight: "+t.fontWeight+"; ")),i=0,a=hz.length;i<a;++i)o=hz[i],s=fz[o],null==(u=t[o])?"fill"===s&&(c+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(aI(u)&&(u=oI(u,r.gradient,"")),c+=s+": "+u+"; "):c+=s+": none; ";return c?'style="'+c.trim()+'"':null}Cz.resize=function(t,e,n,r){jz.resize.call(this,t,e,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in lz)o[s]=lz[s];a.head=uz("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?uz("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+cz("rect"):"",a.root=uz("g",{transform:"translate("+i+")"}),a.foot=cz("g")+cz("svg"),this},Cz.background=function(){var t=jz.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),t},Cz.svg=function(){var t=this._text;return t.head+t.bg+t.defs+t.root+t.body+t.foot},Cz._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},Cz.buildDefs=function(){var t,e,n,r,i,a=this._defs,o="";for(e in a.gradient){for(i=(n=a.gradient[e]).stops,"radial"===n.gradient?(o+=uz(r="pattern",{id:iI+e,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=uz("rect",{width:"1",height:"1",fill:"url(#"+e+")"})+cz("rect"),o+=cz(r),o+=uz(r="radialGradient",{id:e,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=uz(r="linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<i.length;++t)o+=uz("stop",{offset:i[t].offset,"stop-color":i[t].color})+cz("stop");o+=cz(r)}for(e in a.clipping)n=a.clipping[e],o+=uz("clipPath",{id:e}),n.path?o+=uz("path",{d:n.path})+cz("path"):o+=uz("rect",{x:0,y:0,width:n.width,height:n.height})+cz("rect"),o+=cz("clipPath");return o.length>0?uz("defs")+o+cz("defs"):""},Cz.attributes=function(t,e){return Tz={},t(Dz,e,this),Tz},Cz.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then((function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t}))}return null},Cz.mark=function(t){var e,n=this,r=jU[t.marktype],i=r.tag,a=this._defs,o="";function s(s){var u=n.href(s);u&&(o+=uz("a",u)),e="g"!==i?Rz(s,t,i,a):null,o+=uz(i,n.attributes(r.attr,s),e),"text"===i?o+=xU(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"g"===i&&(o+=uz("path",n.attributes(r.background,s),Rz(s,t,"bgrect",a))+cz("path"),o+=uz("g",n.attributes(r.foreground,s))+n.markGroup(s)+cz("g")),o+=cz(i),u&&(o+=cz("a"))}return"g"!==i&&!1===t.interactive&&(e='style="pointer-events: none;"'),o+=uz("g",{class:qU(t),"clip-path":t.clip?KB(n,t,t.group):null},e),r.nested?t.items&&t.items.length&&s(t.items[0]):FB(t,s),o+cz("g")},Cz.markGroup=function(t){var e=this,n="";return FB(t,(function(t){n+=e.mark(t)})),n};var Mz={};function Pz(t,e,n,r){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){var i=t.items,a=t.marktype,o=i.length,s=0;if("group"===a)for(;s<o;++s)Fz(i[s],e,n,r);else for(var u=jU[a].isect;s<o;++s){var c=i[s];Nz(c,e,u)&&r.push(c)}}return r}function Fz(t,e,n,r){n&&n(t.mark)&&Nz(t,e,jU.group.isect)&&r.push(t);var i=t.items,a=i&&i.length;if(a){var o=t.x||0,s=t.y||0;e.translate(-o,-s);for(var u=0;u<a;++u)Pz(i[u],e,n,r);e.translate(o,s)}return r}function Nz(t,e,n){var r=t.bounds;return e.encloses(r)||e.intersects(r)&&n(t,e)}Mz.canvas=Mz.png={renderer:ez,headless:ez,handler:KU},Mz.svg={renderer:pz,headless:Az,handler:az},Mz.none={};new eI;function Lz(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(r){t.warn(r)}return n[n.length-1]}function Iz(t,e){return t===e||t!==t&&e!==e||(Object(Ut.A)(t)?!(!Object(Ut.A)(e)||t.length!==e.length)&&function(t,e){for(var n=0,r=t.length;n<r;++n)if(!Iz(t[n],e[n]))return!1;return!0}(t,e):!(!Object(Ut.F)(t)||!Object(Ut.F)(e))&&Bz(t,e))}function Bz(t,e){for(var n in t)if(!Iz(t[n],e[n]))return!1;return!0}function Uz(t){return function(e){return Bz(t,e)}}var zz={};function qz(t){return t.data}function Wz(t,e){var n=HL.call(e,t);return n.root&&n.root.lookup||zz}var Hz="undefined"!==typeof window&&window||null;var Gz=":",Yz="@",Vz="%";function $z(t,e,n,r){e[0].type!==YF&&Object(Ut.n)("First argument to data functions must be a string literal.");var i=e[0].value,a=Gz+i;if(!Object(Ut.v)(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(o){}}function Xz(t,e,n,r){if(e[0].type===YF)Kz(n,r,e[0].value);else if(e[0].type===$F)for(t in n.scales)Kz(n,r,t)}function Kz(t,e,n){var r=Vz+n;if(!Object(Ut.v)(e,r))try{e[r]=t.scaleRef(n)}catch(i){}}var Jz={random:function(){return Gi()},isArray:Ut.A,isBoolean:Ut.B,isDate:Ut.C,isDefined:function(t){return void 0!==t},isNumber:Ut.E,isObject:Ut.F,isRegExp:Ut.G,isString:Ut.H,isTuple:Vt,isValid:function(t){return null!=t&&t===t},toBoolean:Ut.Y,toDate:Ut.Z,toNumber:Ut.ab,toString:Ut.cb,flush:Ut.u,lerp:Ut.J,merge:function(){var t=[].slice.call(arguments);return t.unshift({}),Ut.o.apply(null,t)},pad:Ut.N,peek:Ut.S,span:Ut.V,inrange:Ut.z,truncate:Ut.db,rgb:gv,lab:wg,hcl:Tg,hsl:kv,sequence:Ro,format:function(t,e){return YL("format",Np,e)(t)},utcFormat:function(t,e){return YL("utcFormat",Gn,e)(t)},utcParse:function(t,e){return YL("utcParse",Yn,e)(t)},timeFormat:VL,timeParse:function(t,e){return YL("timeParse",Hn,e)(t)},monthFormat:function(t){return XL(t,1,"%B")},monthAbbrevFormat:function(t){return XL(t,1,"%b")},dayFormat:function(t){return XL(0,2+t,"%A")},dayAbbrevFormat:function(t){return XL(0,2+t,"%a")},quarter:Ut.T,utcquarter:Ut.fb,warn:function(){return Lz(this.context.dataflow,"warn",arguments)},info:function(){return Lz(this.context.dataflow,"info",arguments)},debug:function(){return Lz(this.context.dataflow,"debug",arguments)},extent:Ut.p,inScope:function(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},intersect:function(t,e,n){if(!t)return[];var r=Object(ga.a)(t,2),i=r[0],a=r[1],o=(new eI).set(i[0],i[1],a[0],a[1]);return function(t,e,n){var r=[],i=(new eI).union(e),a=t.marktype;return a?Pz(t,i,n,r):"group"===a?Fz(t,i,n,r):Object(Ut.n)("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,o,function(t){var e=null;if(t){var n=Object(Ut.i)(t.marktype),r=Object(Ut.i)(t.markname);e=function(t){return(!n.length||n.some((function(e){return t.marktype===e})))&&(!r.length||r.some((function(e){return t.name===e})))}}return e}(e))},clampRange:Ut.j,pinchDistance:function(t){var e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(t){var e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){return Hz?Hz.screen:{}},containerSize:function(){var t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){return Hz?[Hz.innerWidth,Hz.innerHeight]:[void 0,void 0]},bandspace:function(t,e,n){return xd(t||0,e||0,n||0)},setdata:function(t,e){var n=this.context.dataflow,r=this.context.data[t].input;return n.pulse(r,n.changeset().remove(Ut.eb).insert(e)),1},pathShape:function(t){var e=null;return function(n){return n?XI(n,e=e||II(t)):t}},panLinear:Ut.O,panLog:Ut.P,panPow:Ut.Q,panSymlog:Ut.R,zoomLinear:Ut.ib,zoomLog:Ut.jb,zoomPow:Ut.kb,zoomSymlog:Ut.lb,encode:function(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,r,i,a){var o,s,u=this.context.dataflow,c=this.context.data[t],l=c.input,f=c.changes,h=u.stamp();if(!1===u._trigger||!(l.value.length||e||r))return 0;if((!f||f.stamp<h)&&(c.changes=f=u.changeset(),f.stamp=h,u.runAfter((function(){c.modified=!0,u.pulse(l,f).run()}),!0,1)),n&&(o=!0===n?Ut.eb:Object(Ut.A)(n)||Vt(n)?n:Uz(n),f.remove(o)),e&&f.insert(e),r&&(o=Uz(r),l.value.some(o)?f.remove(o):f.insert(r)),i)for(s in a)f.modify(i,s,a[s]);return 1}},Zz=["view","item","group","xy","x","y"],Qz="event.vega.",tq="this.",eq={};function nq(t,e,n){return 1===arguments.length?Jz[t]:(Jz[t]=e,n&&(eq[t]=n),iq&&(iq.functions[t]=tq+t),this)}nq("bandwidth",(function(t,e){var n=KL(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}),Xz),nq("copy",(function(t,e){var n=KL(t,(e||this).context);return n?n.copy():void 0}),Xz),nq("domain",(function(t,e){var n=KL(t,(e||this).context);return n?n.domain():[]}),Xz),nq("range",(function(t,e){var n=KL(t,(e||this).context);return n&&n.range?n.range():[]}),Xz),nq("invert",(function(t,e,n){var r=KL(t,(n||this).context);return r?Object(Ut.A)(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}),Xz),nq("scale",(function(t,e,n){var r=KL(t,(n||this).context);return r&&void 0!==e?r(e):void 0}),Xz),nq("gradient",(function(t,e,n,r,i){t=KL(t,(i||this).context);var a=function(t,e){var n,r=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}(e,n),o=t.domain(),s=o[0],u=Object(Ut.S)(o),c=Ut.x;return u-s?c=Gm(t,s,u):t=(t.interpolator?Im("sequential")().interpolator(t.interpolator()):Im("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,u=1]),t.ticks&&(s!==(o=t.ticks(+r||15))[0]&&o.unshift(s),u!==Object(Ut.S)(o)&&o.push(u)),o.forEach((function(e){return a.stop(c(e),t(e))})),a}),Xz),nq("geoArea",ZL,Xz),nq("geoBounds",QL,Xz),nq("geoCentroid",tI,Xz),nq("geoShape",(function(t,e,n){var r=KL(t,(n||this).context);return function(t){return r?r.path.context(t)(e):""}}),Xz),nq("indata",(function(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(t,e,n,r){e[0].type!==YF&&Object(Ut.n)("First argument to indata must be a string literal."),e[1].type!==YF&&Object(Ut.n)("Second argument to indata must be a string literal.");var i=e[0].value,a=e[1].value,o=Yz+a;Object(Ut.v)(o,r)||(r[o]=n.getData(i).indataRef(n,a))})),nq("data",HL,$z),nq("treePath",(function(t,e,n){var r=Wz(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(qz):void 0}),$z),nq("treeAncestors",(function(t,e){var n=Wz(t,this)[e];return n?n.ancestors().map(qz):void 0}),$z),nq("vlSelectionTest",(function(t,e,n){for(var r,i,a,o,s,u=this.context.data[t],c=u?u.values.value:[],l=u?u[IL]&&u[IL].value:void 0,f=n===DL,h=c.length,d=0;d<h;++d)if(r=c[d],l&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(s=BL(e,r),i[o]=s?-1:++a,s&&1===l.size)return!0;if(!s&&a===l.get(o).count)return!1}else if(f^(s=BL(e,r)))return s;return h&&f}),WL),nq("vlSelectionResolve",(function(t,e){for(var n,r,i,a,o,s,u,c,l,f,h,d=this.context.data[t],p=d?d.values.value:[],v={},g={},m=p.length,y=0;y<m;++y)for(a=(n=p[y]).unit,r=n.fields,i=n.values,f=0,h=r.length;f<h;++f)o=r[f],u=(s=v[o.field]||(v[o.field]={}))[a]||(s[a]=[]),g[o.field]=c=o.type.charAt(0),l=UL[c+"_union"],s[a]=l(u,Object(Ut.i)(i[f]));return e=e||RL,Object.keys(v).forEach((function(t){v[t]=Object.keys(v[t]).map((function(e){return v[t][e]})).reduce((function(n,r){return void 0===n?r:UL[g[t]+"_"+e](n,r)}))})),v}),WL);var rq={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+Object(Ut.X)("$"+t)+"]"},functions:function(t){var e=jL(t);for(var n in Zz.forEach((function(t){return e[t]=Qz+t})),Jz)e[n]=tq+n;return e},constants:CL,visitors:eq},iq=function(t){var e=(t=t||{}).whitelist?Object(Ut.bb)(t.whitelist):{},n=t.blacklist?Object(Ut.bb)(t.blacklist):{},r=t.constants||CL,i=(t.functions||jL)(f),a=t.globalvar,o=t.fieldvar,s={},u={},c=0,l=Object(Ut.D)(a)?a:function(t){return a+'["'+t+'"]'};function f(t){if(Object(Ut.H)(t))return t;var e=h[t.type];return null==e&&Object(Ut.n)("Unsupported type: "+t.type),e(t)}var h={Literal:function(t){return t.raw},Identifier:function(t){var i=t.name;return c>0?i:Object(Ut.v)(n,i)?Object(Ut.n)("Illegal identifier: "+i):Object(Ut.v)(r,i)?r[i]:Object(Ut.v)(e,i)?i:(s[i]=1,l(i))},MemberExpression:function(t){var e=!t.computed,n=f(t.object);e&&(c+=1);var r=f(t.property);return n===o&&(u[function(t){var e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(r)]=1),e&&(c-=1),n+(e?"."+r:"["+r+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&Object(Ut.n)("Illegal callee type: "+t.callee.type);var e=t.callee.name,n=t.arguments,r=Object(Ut.v)(i,e)&&i[e];return r||Object(Ut.n)("Unrecognized function: "+e),Object(Ut.D)(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(f).join(",")+"]"},BinaryExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+f(t.argument)+")"},ConditionalExpression:function(t){return"("+f(t.test)+"?"+f(t.consequent)+":"+f(t.alternate)+")"},LogicalExpression:function(t){return"("+f(t.left)+t.operator+f(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(f).join(",")+"}"},Property:function(t){c+=1;var e=f(t.key);return c-=1,e+":"+f(t.value)}};function d(t){var e={code:f(t),globals:Object.keys(s),fields:Object.keys(u)};return s={},u={},e}return d.functions=i,d.constants=r,d}(rq);function aq(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function oq(t,e){return aq(["event"],t,e)}function sq(t,e){return aq(["item","_"],t,e)}function uq(t,e,n){var r,i;for(r in n=n||{},t)i=t[r],n[r]=Object(Ut.A)(i)?i.map((function(t){return cq(t,e,n)})):cq(i,e,n);return n}function cq(t,e,n){if(!t||!Object(Ut.F)(t))return t;for(var r,i=0,a=lq.length;i<a;++i)if(r=lq[i],Object(Ut.v)(t,r.key))return r.parse(t,e,n);return t}var lq=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||Object(Ut.n)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(Ut.I)(t.$key,t.$flat))}},{key:"$expr",parse:function(t,e,n){t.$params&&uq(t.$params,e,n);var r="e:"+t.$expr+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(Ut.f)(function(t,e){return aq(["datum","_"],t,e)}(t.$expr,e),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(Ut.t)(t.$field,t.$name))}},{key:"$encode",parse:function(t,e){var n,r,i=t.$encode,a={};for(n in i)r=i[n],a[n]=Object(Ut.f)(sq(r.$expr,e),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=Object(Ut.i)(t.$compare).map((function(t){return t&&t.$tupleid?$t:t}));return e.fn[n]||(e.fn[n]=Object(Ut.k)(r,t.$order))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var a=pq(n,e.fork()),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o}}},{key:"$tupleid",parse:function(){return $t}}];function fq(t){return(t+"").toLowerCase()}var hq=function(t,e){"operator"!==fq(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?function(t,e){return aq(["_"],t,e)}(t.update,e):null)};var dq=function(t,e){var n=Object(Ut.F)(n=t.source)?n.$ref:n,r=e.get(n),i=null,a=t.update,o=void 0;r||Object(Ut.n)("Source not defined: "+t.source),i=t.target&&t.target.$expr?oq(t.target.$expr,e):e.get(t.target),a&&a.$expr&&(a.$params&&(o=uq(a.$params,e)),a=function(t,e){return aq(["_","event"],t,e)}(a.$expr,e)),e.update(t,r,i,a,o)},pq=function(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach((function(t){hq(t,e)})),n.forEach((function(t){!function(t,e){if(t.params){var n=e.get(t.id);n||Object(Ut.n)("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(uq(t.params,e),t.react,t.initonly))}}(t,e)})),(t.streams||[]).forEach((function(t){!function(t,e){var n,r=null!=t.filter?oq(t.filter,e):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(i=(n=t.merge.map(e.get.bind(e)))[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(e.get.bind(e)),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(Ut.n)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}(t,e)})),(t.updates||[]).forEach((function(t){dq(t,e)})),e.resolve()},vq={skip:!0};function gq(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function mq(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}gq.prototype=mq.prototype={fork:function(){var t=new mq(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),"collect"===fq(t.type)&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$request?i.preload(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var a=r.get(t.parent.$ref);a?(i.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push((function(){a=r.get(t.parent.$ref),i.connect(a,[e]),e.targets().add(a)}))}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var o in t.data)n=r.data[o]||(r.data[o]={}),t.data[o].forEach((function(t){n[t]=e}))},resolve:function(){return(this.unresolved||[]).forEach((function(t){t()})),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[fq(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach((function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)}))}if(t.data){var i=n.data={};Object.keys(e.data).forEach((function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)}))}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map((function(e){return e.getState(t)}))),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach((function(t){n.update(e.signals[t],i[t],vq)})),Object.keys(r||{}).forEach((function(t){n.pulse(e.data[t].input,n.changeset().remove(Ut.eb).insert(r[t]))})),(t.subcontext||[]).forEach((function(t,n){var r=e.subcontext[n];r&&r.setState(t)}))}};var yq=function(t,e,n){return pq(e,function(t,e,n){return new gq(t,e,n)}(t,Di,n||Jz))};var bq="width",_q="height",wq="padding",xq={skip:!0};function kq(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===wq?r.left+r.right:0)}function Eq(t,e){var n=t.autosize(),r=t.padding();return e-(n&&n.contains===wq?r.top+r.bottom:0)}function Sq(t,e){return e.modified&&Object(Ut.A)(e.input.value)&&t.indexOf("_:vega:_")}function Oq(t,e){return!("parent"===t||e instanceof Di.proxy)}var Aq=function(t,e,n,r){var i=t.element();i&&i.setAttribute("title",function(t){return null==t?"":Object(Ut.A)(t)?Tq(t):Object(Ut.F)(t)&&!Object(Ut.C)(t)?(e=t,Object.keys(e).map((function(t){var n=e[t];return t+": "+(Object(Ut.A)(n)?Tq(n):Cq(n))})).join("\n")):t+"";var e}(r))};function Tq(t){return"["+t.map(Cq).join(", ")+"]"}function Cq(t){return Object(Ut.A)(t)?"[\u2026]":Object(Ut.F)(t)&&!Object(Ut.C)(t)?"{\u2026}":t}function jq(t,e){e=e||{},Oi.call(this),e.loader&&this.loader(e.loader),e.logger&&this.logger(e.logger),null!=e.logLevel&&this.logLevel(e.logLevel),this._el=null,this._elBind=null,this._renderType=e.renderer||sF.Canvas,this._scenegraph=new cP;var n=this._scenegraph.root;this._renderer=null,this._tooltip=e.tooltip||Aq,this._redraw=!0,this._handler=(new EP).scene(n),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function(t){var e=Object(Ut.o)({defaults:{}},t),n=function(t,e){e.forEach((function(e){Object(Ut.A)(t[e])&&(t[e]=Object(Ut.bb)(t[e]))}))};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}(t.eventConfig);var r=yq(this,t,e.functions);this._runtime=r,this._signals=r.signals,this._bind=(t.bindings||[]).map((function(t){return{state:null,param:Object(Ut.o)({},t)}})),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._background=e.background||r.background||null,this._width=this.width(),this._height=this.height(),this._viewWidth=kq(this,this._width),this._viewHeight=Eq(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function(t){var e=t._signals,n=e[bq],r=e[_q],i=e[wq];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,(function(e){t._width=e.size,t._viewWidth=kq(t,e.size),a()}),{size:n}),t._resizeHeight=t.add(null,(function(e){t._height=e.size,t._viewHeight=Eq(t,e.size),a()}),{size:r});var o=t.add(null,a,{pad:i});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}(this),wD(this),e.hover&&this.hover(),e.container&&this.initialize(e.container,e.bind)}var Dq=Object(Ut.y)(jq,Oi);function Rq(t,e){return Object(Ut.v)(t._signals,e)?t._signals[e]:Object(Ut.n)("Unrecognized signal name: "+Object(Ut.X)(e))}function Mq(t,e){var n=(t._targets||[]).filter((function(t){var n=t._update;return n&&n.handler===e}));return n.length?n[0]:null}function Pq(t,e,n,r){var i=Mq(n,r);return i||((i=RF(this,(function(){r(e,n.value)}))).handler=r,t.on(n,null,i)),t}function Fq(t,e,n){var r=Mq(e,n);return r&&e._targets.remove(r),t}Dq.evaluate=function(){var t=Object(qt.a)(E.a.mark((function t(e,n,r){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oi.prototype.evaluate.call(this,e,n);case 2:if(!this._redraw&&!this._resize){t.next=14;break}if(t.prev=3,!this._renderer){t.next=8;break}return this._resize&&(this._resize=0,AD(this)),t.next=8,this._renderer.renderAsync(this._scenegraph.root);case 8:this._redraw=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.error(t.t0);case 14:return r&&Wt(this,r),t.abrupt("return",this);case 16:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e,n,r){return t.apply(this,arguments)}}(),Dq.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},Dq.container=function(){return this._el},Dq.scenegraph=function(){return this._scenegraph},Dq.origin=function(){return this._origin.slice()},Dq.signal=function(t,e,n){var r=Rq(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},Dq.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},Dq.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},Dq.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},Dq.padding=function(t){return arguments.length?this.signal("padding",t):this.signal("padding")},Dq.autosize=function(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},Dq.renderer=function(t){return arguments.length?(cF(t)||Object(Ut.n)("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},Dq.tooltip=function(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},Dq.loader=function(t){return arguments.length?(t!==this._loader&&(Oi.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},Dq.resize=function(){return this._autosize=1,this.touch(Rq(this,"autosize"))},Dq._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},Dq._resizeView=function(t,e,n,r,i,a){this.runAfter((function(o){var s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(bq,n,xq),o._resizeWidth.skip(!0)),o.height()!==r&&(s=1,o.signal(_q,r,xq),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),s&&o.run("enter"),a&&o.runAfter((function(t){return t.resize()}))}),!1,1)},Dq.addEventListener=function(t,e,n){var r=e;return n&&!1===n.trap||((r=RF(this,e)).raw=e),this._handler.on(t,r),this},Dq.removeEventListener=function(t,e){for(var n,r,i=this._handler.handlers(t),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,t===r&&(e===n||e===n.raw)){this._handler.off(r,n);break}return this},Dq.addResizeListener=function(t){var e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},Dq.removeResizeListener=function(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},Dq.addSignalListener=function(t,e){return Pq(this,t,Rq(this,t),e)},Dq.removeSignalListener=function(t,e){return Fq(this,Rq(this,t),e)},Dq.addDataListener=function(t,e){return Pq(this,t,xD(this,t).values,e)},Dq.removeDataListener=function(t,e){return Fq(this,xD(this,t).values,e)},Dq.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},Dq.timer=function(t,e){this._timers.push(function(t,e,n){var r=new OE,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?EE():+n,r.restart((function a(o){o+=i,r.restart(a,i+=e,n),t(o)}),e,n),r)}((function(e){t({timestamp:Date.now(),elapsed:e})}),e))},Dq.events=function(t,e,n){var r,i=this,a=new he(n),o=function(n,r){i.runAsync(null,(function(){t===fF&&function(t,e){var n=t._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[e]:i?!i[e]:t.preventDefault()))}(i,e)&&n.preventDefault(),a.receive(lF(i,n,r))}))};if(t===hF)vF(i,"timer",e)&&i.timer(o,e);else if(t===fF)vF(i,"view",e)&&i.addEventListener(e,o,pF);else if(t===dF?vF(i,"window",e)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&vF(i,"selector",e)&&(r=document.querySelectorAll(t)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(e,o);i._eventListeners.push({type:e,sources:r,handler:o})}else i.warn("Can not resolve event source: "+t);return a},Dq.finalize=function(){var t,e,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(t=i.length;--t>=0;)i[t].stop();for(t=a.length;--t>=0;)for(e=(n=a[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},Dq.hover=function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",gF),mF,yF(t)),this.on(this.events("view","mouseout",gF),mF,yF(e)),this},Dq.data=function(t,e){return arguments.length<2?xD(this,t).values.value:kD.call(this,t,ne().remove(Ut.eb).insert(e))},Dq.change=kD,Dq.insert=function(t,e){return kD.call(this,t,ne().insert(e))},Dq.remove=function(t,e){return kD.call(this,t,ne().remove(e))},Dq.scale=function(t){var e=this._runtime.scales;return Object(Ut.v)(e,t)||Object(Ut.n)("Unrecognized scale or projection: "+t),e[t].value},Dq.initialize=function(t,e){var n,r,i=this,a=i._renderType,o=i._eventConfig.bind,s=cF(a);return t=i._el=t?MF(i,t):null,s||i.error("Unrecognized renderer type: "+a),n=s.handler||EP,r=t?s.renderer:s.headless,i._renderer=r?DF(i,i._renderer,t,r):null,i._handler=function(t,e,n,r){var i=new r(t.loader(),RF(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,OD(t),t);return e&&e.handlers().forEach((function(t){i.on(t.type,t.handler)})),i}(i,i._handler,t,n),i._redraw=!0,t&&"none"!==o&&(e=e?i._elBind=MF(i,e):t.appendChild(bF("div",{class:"vega-bindings"})),i._bind.forEach((function(t){t.param.element&&"container"!==o&&(t.element=MF(i,t.param.element))})),i._bind.forEach((function(t){EF(i,t.element||e,t)}))),i},Dq.toImageURL=function(t,e){return NF.apply(this,arguments)},Dq.toCanvas=function(t,e){return IF.apply(this,arguments)},Dq.toSVG=function(t){return BF.apply(this,arguments)},Dq.getState=function(t){return this._runtime.getState(t||{data:Sq,signals:Oq,recurse:!0})},Dq.setState=function(t){return this.runAsync(null,(function(e){e._trigger=!1,e._runtime.setState(t)}),(function(t){t._trigger=!0})),this};var Nq=function(t,e){return t=t||e.autosize,Object(Ut.F)(t)?t:{type:t||"pad"}},Lq=function(t,e){return t=t||e.padding,Object(Ut.F)(t)?{top:Iq(t.top),bottom:Iq(t.bottom),left:Iq(t.left),right:Iq(t.right)}:{top:n=Iq(t),bottom:n,left:n,right:n};var n};function Iq(t){return+t||0}var Bq=["value","update","init","react","bind"];function Uq(t,e){Object(Ut.n)(t+' for "outer" push: '+Object(Ut.X)(e))}var zq=function(t,e){var n=t.name;if("outer"===t.push)e.signals[n]||Uq("No prior signal definition",n),Bq.forEach((function(e){void 0!==t[e]&&Uq("Invalid property ",e)}));else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}},qq=function(t,e,n){var r,i,a={};try{t=Object(Ut.H)(t)?t:Object(Ut.X)(t)+"",r=TL(t)}catch(o){Object(Ut.n)("Expression parse error: "+t)}return r.visit((function(t){if(t.type===JF){var n=t.callee.name,r=rq.visitors[n];r&&r(n,t.arguments,e,a)}})),(i=iq(r)).globals.forEach((function(t){var n="$"+t;!Object(Ut.v)(a,n)&&e.getSignal(t)&&(a[n]=e.signalRef(t))})),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}};function Wq(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function Hq(t,e,n,r){return new Wq(t,e,n,r)}function Gq(t,e){return Hq("operator",t,e)}function Yq(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function Vq(t,e){return e?{$field:t,$name:e}:{$field:t}}var $q=Vq("key");function Xq(t,e){return{$compare:t,$order:e}}var Kq="descending";function Jq(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}var Zq="scope",Qq="view";function tW(t){return t&&t.signal}function eW(t){if(tW(t))return!0;if(Object(Ut.F)(t))for(var e in t)if(eW(t[e]))return!0;return!1}function nW(t,e){return null!=t?t:e}function rW(t){return t&&t.signal||t}var iW="timer";function aW(t,e){return(t.merge?oW:t.stream?sW:t.type?uW:Object(Ut.n)("Invalid stream specification: "+Object(Ut.X)(t)))(t,e)}function oW(t,e){var n=cW({merge:t.merge.map((function(t){return aW(t,e)}))},t,e);return e.addStream(n).id}function sW(t,e){var n=cW({stream:aW(t.stream,e)},t,e);return e.addStream(n).id}function uW(t,e){var n,r,i;return t.type===iW?(n=e.event(iW,t.throttle),t={between:t.between,filter:t.filter}):n=e.event((i=t.source)===Zq?Qq:i||Qq,t.type),r=cW({stream:n},t,e),1===Object.keys(r).length?n:e.addStream(r).id}function cW(t,e,n){var r=e.between;return r&&(2!==r.length&&Object(Ut.n)('Stream "between" parameter must have 2 entries: '+Object(Ut.X)(e)),t.between=[aW(r[0],n),aW(r[1],n)]),r=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(function(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),e.source===Zq&&r.push("inScope(event.item)"),r.length&&(t.filter=qq("("+r.join(")&&(")+")").$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}var lW,fW,hW=function(t,e,n){return lW=e||dW,fW=n||kW,SW(t.trim()).map(OW)},dW="view",pW="[",vW="]",gW="{",mW="}",yW=":",bW=",",_W="@",wW=">",xW=/[[\]{}]/,kW={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function EW(t,e,n,r,i){for(var a,o=0,s=t.length;e<s;++e){if(a=t[e],!o&&a===n)return e;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return e}function SW(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=EW(t,i,bW,pW+gW,vW+mW),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function OW(t){return"["===t[0]?function(t){var e,n,r=t.length,i=1;if((i=EW(t,i,vW,pW,vW))===r)throw"Empty between selector: "+t;if(2!==(e=SW(t.substring(1,i))).length)throw"Between selector must have two elements: "+t;if((t=t.slice(i+1).trim())[0]!==wW)throw"Expected '>' after between selector: "+t;if(e=e.map(OW),(n=OW(t.slice(1).trim())).between)return{between:e,stream:n};n.between=e;return n}(t):function(t){var e,n,r={source:lW},i=[],a=[0,0],o=0,s=0,u=t.length,c=0;if(t[u-1]===mW){if(!((c=t.lastIndexOf(gW))>=0))throw"Unmatched right brace: "+t;try{a=function(t){var e=t.split(bW);if(!t.length||e.length>2)throw t;return e.map((function(e){var n=+e;if(n!==n)throw t;return n}))}(t.substring(c+1,u-1))}catch(f){throw"Invalid throttle specification: "+t}t=t.slice(0,c).trim(),u=t.length,c=0}if(!u)throw t;t[0]===_W&&(o=++c);(e=EW(t,c,yW))<u&&(i.push(t.substring(s,e).trim()),s=c=++e);if((c=EW(t,c,pW))===u)i.push(t.substring(s,u).trim());else if(i.push(t.substring(s,c).trim()),n=[],(s=++c)===u)throw"Unmatched left bracket: "+t;for(;c<u;){if((c=EW(t,c,vW))===u)throw"Unmatched left bracket: "+t;if(n.push(t.substring(s,c).trim()),c<u-1&&t[++c]!==pW)throw"Expected left bracket: "+t;s=++c}if(!(u=i.length)||xW.test(i[u-1]))throw"Invalid event selector: "+t;u>1?(r.type=i[1],o?r.markname=i[0].slice(1):(l=i[0],fW[l]?r.marktype=i[0]:r.source=i[0])):r.type=i[0];var l;"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);a[0]&&(r.throttle=a[0]);a[1]&&(r.debounce=a[1]);return r}(t)}var AW=function(t,e,n){var r=t.events,i=t.update,a=t.encode,o=[],s={target:n};r||Object(Ut.n)("Signal update missing events specification."),Object(Ut.H)(r)&&(r=hW(r,e.isSubscope()?Zq:Qq)),r=Object(Ut.i)(r).filter((function(t){return t.signal||t.scale?(o.push(t),0):1})),o.length>1&&(o=[TW(o)]),r.length&&o.push(r.length>1?{merge:r}:r[0]),null!=a&&(i&&Object(Ut.n)("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(Ut.X)(a)+")"),s.update=Object(Ut.H)(i)?qq(i,e,"var datum=event.item&&event.item.datum;"):null!=i.expr?qq(i.expr,e,"var datum=event.item&&event.item.datum;"):null!=i.value?i.value:null!=i.signal?{$expr:"_.value",$params:{value:e.signalRef(i.signal)}}:Object(Ut.n)("Invalid signal update specification."),t.force&&(s.options={force:!0}),o.forEach((function(t){e.addUpdate(Object(Ut.o)(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):aW(t,e)}}(t,e),s))}))};function TW(t){return{signal:"["+t.map((function(t){return t.scale?'scale("'+t.scale+'")':t.signal}))+"]"}}function CW(t){return function(e,n,r){return Hq(t,n,e||void 0,r)}}var jW=CW("aggregate"),DW=CW("axisticks"),RW=CW("bound"),MW=CW("collect"),PW=CW("compare"),FW=CW("datajoin"),NW=CW("encode"),LW=CW("expression"),IW=(CW("extent"),CW("facet")),BW=CW("field"),UW=CW("key"),zW=CW("legendentries"),qW=CW("load"),WW=CW("mark"),HW=CW("multiextent"),GW=CW("multivalues"),YW=CW("overlap"),VW=CW("params"),$W=CW("prefacet"),XW=CW("projection"),KW=CW("proxy"),JW=CW("relay"),ZW=CW("render"),QW=CW("scale"),tH=CW("sieve"),eH=CW("sortitems"),nH=CW("viewlayout"),rH=CW("values"),iH=0,aH={min:"min",max:"max",count:"sum"};function oH(t,e){var n=t.type||"linear";(function(t){switch(t){case kd:case Ed:case Sd:case Od:case Ad:case Td:case Cd:case jd:case Dd:case Md:case Pd:case Fd:case Nd:case Ld:case Id:case Bd:return!0}return!1})(n)||Object(Ut.n)("Unrecognized scale type: "+Object(Ut.X)(n)),e.addScale(t.name,{type:n,domain:void 0})}function sH(t,e){var n,r,i=e.getScale(t.name).params;for(n in i.domain=fH(t.domain,t,e),null!=t.range&&(i.range=function t(e,n,r){var i=e.range,a=n.config.range;if(i.signal)return n.signalRef(i.signal);if(Object(Ut.H)(i)){if(a&&Object(Ut.v)(a,i))return e=Object(Ut.o)({},e,{range:a[i]}),t(e,n,r);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=Hd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(Ut.n)("Unrecognized scale range value: "+Object(Ut.X)(i))}else{if(i.scheme)return r.scheme=Object(Ut.A)(i.scheme)?cH(i.scheme,n):uH(i.scheme,n),i.extent&&(r.schemeExtent=cH(i.extent,n)),void(i.count&&(r.schemeCount=uH(i.count,n)));if(i.step)return void(r.rangeStep=uH(i.step,n));if(Hd(e.type)&&!Object(Ut.A)(i))return fH(i,e,n);Object(Ut.A)(i)||Object(Ut.n)("Unsupported range type: "+Object(Ut.X)(i))}return i.map((function(t){return(Object(Ut.A)(t)?cH:uH)(t,n)}))}(t,e,i)),null!=t.interpolate&&function(t,e){e.interpolate=uH(t.type||t),null!=t.gamma&&(e.interpolateGamma=uH(t.gamma))}(t.interpolate,i),null!=t.nice&&(i.nice=(r=t.nice,Object(Ut.F)(r)?{interval:uH(r.interval),step:uH(r.step)}:uH(r))),null!=t.bins&&(i.bins=function(t,e){return t.signal||Object(Ut.A)(t)?cH(t,e):e.objectProperty(t)}(t.bins,e)),t)Object(Ut.v)(i,n)||"name"===n||(i[n]=uH(t[n],e))}function uH(t,e){return Object(Ut.F)(t)?t.signal?e.signalRef(t.signal):Object(Ut.n)("Unsupported object: "+Object(Ut.X)(t)):t}function cH(t,e){return t.signal?e.signalRef(t.signal):t.map((function(t){return uH(t,e)}))}function lH(t){Object(Ut.n)("Can not find data set: "+Object(Ut.X)(t))}function fH(t,e,n){if(t)return t.signal?n.signalRef(t.signal):(Object(Ut.A)(t)?hH:t.fields?pH:dH)(t,e,n);null==e.domainMin&&null==e.domainMax||Object(Ut.n)("No scale domain defined for domainMin/domainMax to override.")}function hH(t,e,n){return t.map((function(t){return uH(t,n)}))}function dH(t,e,n){var r=n.getData(t.data);return r||lH(t.data),Hd(e.type)?r.valuesRef(n,t.field,gH(t.sort,!1)):Ud(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function pH(t,e,n){var r=t.data,i=t.fields.reduce((function(t,e){return e=Object(Ut.H)(e)?{data:r,field:e}:Object(Ut.A)(e)||e.signal?function(t,e){var n="_:vega:_"+iH++,r=MW({});if(Object(Ut.A)(t))r.value={$ingest:t};else if(t.signal){var i="setdata("+Object(Ut.X)(n)+","+t.signal+")";r.params.input=e.signalRef(i)}return e.addDataPipeline(n,[r,tH({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t}),[]);return(Hd(e.type)?vH:Ud(e.type)?mH:yH)(t,n,i)}function vH(t,e,n){var r,i,a,o,s,u=gH(t.sort,!0);return r=n.map((function(t){var n=e.getData(t.data);return n||lH(t.data),n.countsRef(e,t.field,u)})),i={groupby:$q,pulse:r},u&&(a=u.op||"count",s=u.field?Jq(a,u.field):"count",i.ops=[aH[a]],i.fields=[e.fieldRef(s)],i.as=[s]),a=e.add(jW(i)),o=e.add(MW({pulse:Yq(a)})),s=e.add(rH({field:$q,sort:e.sortRef(u),pulse:Yq(o)})),Yq(s)}function gH(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!aH[t.op]&&Object(Ut.n)("Multiple domain scales can not be sorted using "+t.op):Object(Ut.n)("No field provided for sort aggregate op: "+t.op):Object(Ut.F)(t)?t.field="key":t={field:"key"}),t}function mH(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||lH(t.data),n.domainRef(e,t.field)}));return Yq(e.add(GW({values:r})))}function yH(t,e,n){var r=n.map((function(t){var n=e.getData(t.data);return n||lH(t.data),n.extentRef(e,t.field)}));return Yq(e.add(HW({extents:r})))}function bH(t,e,n){return Object(Ut.A)(t)?t.map((function(t){return bH(t,e,n)})):Object(Ut.F)(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:Object(Ut.n)("Unsupported parameter object: "+Object(Ut.X)(t)):t}var _H="vertical",wH="start",xH="end",kH="value",EH="guide-label",SH="group-title",OH="symbol",AH="gradient",TH="discrete",CH=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],jH={name:1,interactive:1},DH={value:0},RH={value:1},MH=Object(Ut.bb)(["rule"]),PH=Object(Ut.bb)(["group","image","rect"]),FH=function(t,e){var n="";return MH[e]?n:(t.x2&&(t.x?(PH[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(PH[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},NH=function(t,e,n,r){var i=qq(t,e);return i.$fields.forEach((function(t){r[t]=1})),Object(Ut.o)(n,i.$params),i.$expr},LH=function(t,e,n,r){return function t(e,n,r,i){var a,o,s;if(e.signal)a="datum",s=NH(e.signal,n,r,i);else if(e.group||e.parent){for(o=Math.max(1,e.level||1),a="item";o-- >0;)a+=".mark.group";e.parent?(s=e.parent,a+=".datum"):s=e.group}else e.datum?(a="datum",s=e.datum):Object(Ut.n)("Invalid field reference: "+Object(Ut.X)(e));e.signal||(Object(Ut.H)(s)?(i[s]=1,s=Object(Ut.W)(s).map(Ut.X).join("][")):s=t(s,n,r,i));return a+"["+s+"]"}(Object(Ut.F)(t)?t:{datum:t},e,n,r)};var IH=function(t,e,n,r,i){var a,o,s,u=BH(t.scale,n,r,i);return null!=t.range?(o=u+".range()",e=0===(a=+t.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==e&&(e=u+"("+e+")"),t.band&&(s=function(t,e){if(!Object(Ut.H)(t))return-1;var n=e.scaleType(t);return"band"===n||"point"===n?1:0}(t.scale,n))&&(a=(o=u+".bandwidth")+"()"+(1===(a=+t.band)?"":"*"+a),s<0&&(a="("+o+"?"+a+":0)"),e=(e?e+"+":"")+a,t.extra&&(e="(datum.extra?"+u+"(datum.extra.value):"+e+")")),null==e&&(e="0")),e};function BH(t,e,n,r){var i;if(Object(Ut.H)(t))i=Vz+t,Object(Ut.v)(n,i)||(n[i]=e.scaleRef(t)),i=Object(Ut.X)(i);else{for(i in e.scales)n[Vz+i]=e.scaleRef(i);i=Object(Ut.X)(Vz)+"+"+(t.signal?"("+NH(t.signal,e,n,r)+")":LH(t,e,n,r))}return"_["+i+"]"}var UH=function(t,e,n,r){return Object(Ut.F)(t)?"("+zH(null,t,e,n,r)+")":t},zH=function(t,e,n,r,i){if(null!=e.gradient)return function(t,e,n,r){return"this.gradient("+BH(t.gradient,e,n,r)+","+Object(Ut.X)(t.start)+","+Object(Ut.X)(t.stop)+","+Object(Ut.X)(t.count)+")"}(e,n,r,i);var a=e.signal?NH(e.signal,n,r,i):e.color?function(t,e,n,r){function i(t,i,a,o){return"this."+t+"("+[zH(null,i,e,n,r),zH(null,a,e,n,r),zH(null,o,e,n,r)].join(",")+").toString()"}return t.c?i("hcl",t.h,t.c,t.l):t.h||t.s?i("hsl",t.h,t.s,t.l):t.l||t.a?i("lab",t.l,t.a,t.b):t.r||t.g||t.b?i("rgb",t.r,t.g,t.b):null}(e.color,n,r,i):null!=e.field?LH(e.field,n,r,i):void 0!==e.value?Object(Ut.X)(e.value):void 0;return null!=e.scale&&(a=IH(e,a,n,r,i)),void 0===a&&(a=null),null!=e.exponent&&(a="Math.pow("+a+","+UH(e.exponent,n,r,i)+")"),null!=e.mult&&(a+="*"+UH(e.mult,n,r,i)),null!=e.offset&&(a+="+"+UH(e.offset,n,r,i)),e.round&&(a="Math.round("+a+")"),a},qH=function(t,e,n){var r=t+"["+Object(Ut.X)(e)+"]";return"$=".concat(n,";if(").concat(r,"!==$)").concat(r,"=$,m=1;")},WH=function(t,e,n,r,i){var a="";return e.forEach((function(e){var o=zH(t,e,n,r,i);a+=e.test?NH(e.test,n,r,i)+"?"+o+":":o})),":"===Object(Ut.S)(a)&&(a+="null"),qH("o",t,a)};function HH(t,e,n,r){var i,a,o,s={},u="var o=item,datum=o.datum,m=0,$;";for(i in t)a=t[i],Object(Ut.A)(a)?u+=WH(i,a,r,n,s):(o=zH(i,a,r,n,s),u+=qH("o",i,o));return u+=FH(t,e),{$expr:u+="return m;",$fields:Object.keys(s),$output:Object.keys(t)}}var GH="mark",YH="frame",VH="title";function $H(t){return Object(Ut.F)(t)?Object(Ut.o)({},t):{value:t}}function XH(t,e,n,r){return null!=n?(Object(Ut.F)(n)&&!Object(Ut.A)(n)?t.update[e]=n:t[r||"enter"][e]={value:n},1):0}function KH(t,e,n){for(var r in e)XH(t,r,e[r]);for(var i in n)XH(t,i,n[i],"update")}function JH(t,e,n){for(var r in e)n&&Object(Ut.v)(n,r)||(t[r]=Object(Ut.o)(t[r]||{},e[r]));return t}function ZH(t,e,n,r,i,a){var o,s;for(s in(a=a||{}).encoders={$encode:o={}},t=function(t,e,n,r,i){var a,o,s,u={},c={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(o in s=n===YH?i.group:n===GH?Object(Ut.o)({},i.mark,i[e]):null)tG(o,t)||("fill"===o||"stroke"===o)&&(tG("fill",t)||tG("stroke",t))||QH(u,o,s[o]);for(o in Object(Ut.i)(r).forEach((function(e){var n=i.style&&i.style[e];for(var r in n)tG(r,t)||QH(u,r,n[r])})),t=Object(Ut.o)({},t),u)(s=u[o]).signal?(a=a||{})[o]=s:c[o]=s;t.enter=Object(Ut.o)(c,t.enter),a&&(t.update=Object(Ut.o)(a,t.update));return t}(t,e,n,r,i.config))o[s]=HH(t[s],e,a,i);return a}function QH(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}function tG(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}var eG=function(t,e,n,r,i,a,o){return{type:t,name:o?o.name:void 0,role:e,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:JH(a,o,jH)}};function nG(t,e){var n=function(n){return nW(t[n],e[n])};return n.isVertical=function(n){return _H===nW(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection))},n.gradientLength=function(){return nW(t.gradientLength,e.gradientLength||e.gradientWidth)},n.gradientThickness=function(){return nW(t.gradientThickness,e.gradientThickness||e.gradientHeight)},n.entryColumns=function(){return nW(t.columns,nW(e.columns,+n.isVertical(!0)))},n}function rG(t,e){var n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function iG(t,e,n){return'item.anchor === "'.concat(wH,'" ? ').concat(t,' : item.anchor === "').concat(xH,'" ? ').concat(e," : ").concat(n)}var aG=iG(Object(Ut.X)("left"),Object(Ut.X)("right"),Object(Ut.X)("center")),oG="group",sG="text",uG=function(t,e,n,r){var i,a,o,s,u,c,l=nG(t,n),f=l.isVertical(),h=l.gradientThickness(),d=l.gradientLength();return f?(o=[0,1],s=[0,0],u=h,c=d):(o=[0,0],s=[1,0],u=d,c=h),KH(i={enter:a={opacity:DH,x:DH,y:DH,width:$H(u),height:$H(c)},update:Object(Ut.o)({},a,{opacity:RH,fill:{gradient:e,start:o,stop:s}}),exit:{opacity:DH}},{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),eG("rect","legend-gradient",null,void 0,void 0,i,r)},cG=function(t,e,n,r,i){var a,o,s,u,c,l,f=nG(t,n),h=f.isVertical(),d=f.gradientThickness(),p=f.gradientLength(),v="";return h?(s="y",c="y2",u="x",l="width",v="1-"):(s="x",c="x2",u="y",l="height"),(o={opacity:DH,fill:{scale:e,field:kH}})[s]={signal:v+"datum.perc",mult:p},o[u]=DH,o[c]={signal:v+"datum.perc2",mult:p},o[l]=$H(d),KH(a={enter:o,update:Object(Ut.o)({},o,{opacity:RH}),exit:{opacity:DH}},{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),eG("rect","legend-band",null,kH,i,a,r)},lG="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),fG="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"'),hG=function(t,e,n,r){var i,a,o,s,u,c=nG(t,e),l=c.isVertical(),f=$H(c.gradientThickness()),h=c.gradientLength(),d=c("labelOverlap"),p=c("labelSeparation"),v="";return KH(i={enter:a={opacity:DH},update:o={opacity:RH,text:{field:"label"}},exit:{opacity:DH}},{fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:nW(t.labelLimit,e.gradientLabelLimit)}),l?(a.align={value:"left"},a.baseline=o.baseline={signal:fG},s="y",u="x",v="1-"):(a.align=o.align={signal:lG},a.baseline={value:"top"},s="x",u="y"),a[s]=o[s]={signal:v+"datum.perc",mult:h},a[u]=o[u]=f,f.offset=nW(t.labelOffset,e.gradientLabelOffset)||0,t=eG(sG,"legend-label",EH,kH,r,i,n),d&&(t.overlap={separation:p,method:d,order:"datum.index"}),t},dG=function(t,e,n,r,i,a,o,s){return{type:oG,name:n,role:t,style:e,from:r,interactive:i||!1,encode:a,marks:o,layout:s}},pG=function(t,e,n,r,i){var a,o,s,u,c,l,f,h=nG(t,e),d=n.entries,p=!(!d||!d.interactive),v=d?d.name:void 0,g=h("clipHeight"),m=h("symbolOffset"),y={data:"value"},b={},_="".concat(i," ? datum.").concat("offset"," : datum.").concat("size"),w=g?$H(g):{field:"size"},x="datum.".concat("index"),k="max(1, ".concat(i,")");return w.mult=.5,b={enter:a={opacity:DH,x:{signal:_,mult:.5,offset:m},y:w},update:o={opacity:RH,x:a.x,y:a.y},exit:{opacity:DH}},t.fill||KH(b,{fill:e.symbolBaseFillColor,stroke:e.symbolBaseStrokeColor}),KH(b,{fill:h("symbolFillColor"),shape:h("symbolType"),size:h("symbolSize"),stroke:h("symbolStrokeColor"),strokeDash:h("symbolDash"),strokeDashOffset:h("symbolDashOffset"),strokeWidth:h("symbolStrokeWidth")},{opacity:h("symbolOpacity")}),CH.forEach((function(e){t[e]&&(o[e]=a[e]={scale:t[e],field:kH})})),u=eG("symbol","legend-symbol",null,kH,y,b,n.symbols),g&&(u.clip=!0),(s=$H(m)).offset=h("labelOffset"),KH(b={enter:a={opacity:DH,x:{signal:_,offset:s},y:w},update:o={opacity:RH,text:{field:"label"},x:a.x,y:a.y},exit:{opacity:DH}},{align:h("labelAlign"),baseline:h("labelBaseline"),fill:h("labelColor"),fillOpacity:h("labelOpacity"),font:h("labelFont"),fontSize:h("labelFontSize"),fontStyle:h("labelFontStyle"),fontWeight:h("labelFontWeight"),limit:h("labelLimit")}),c=eG(sG,"legend-label",EH,kH,y,b,n.labels),b={enter:{noBound:{value:!g},width:DH,height:g?$H(g):DH,opacity:DH},exit:{opacity:DH},update:o={opacity:RH,row:{signal:null},column:{signal:null}}},h.isVertical(!0)?(l="ceil(item.mark.items.length / ".concat(k,")"),o.row.signal="".concat(x,"%").concat(l),o.column.signal="floor(".concat(x," / ").concat(l,")"),f={field:["row",x]}):(o.row.signal="floor(".concat(x," / ").concat(k,")"),o.column.signal="".concat(x," % ").concat(k),f={field:x}),o.column.signal="".concat(i,"?").concat(o.column.signal,":").concat(x),(t=dG("scope",null,v,r={facet:{data:r,name:"value",groupby:"index"}},p,JH(b,d,jH),[u,c])).sort=f,t};var vG='item.orient === "left"',gG='item.orient === "right"',mG="(".concat(vG," || ").concat(gG,")"),yG="datum.vgrad && ".concat(mG),bG=iG('"top"','"bottom"','"middle"'),_G=iG('"right"','"left"','"center"'),wG="datum.vgrad && ".concat(gG," ? (").concat(_G,") : (").concat(mG," && !(datum.vgrad && ").concat(vG,')) ? "left" : ').concat(aG),xG="item._anchor || (".concat(mG,' ? "middle" : "start")'),kG="".concat(yG," ? (").concat(vG," ? -90 : 90) : 0"),EG="".concat(mG," ? (datum.vgrad ? (").concat(gG,' ? "bottom" : "top") : ').concat(bG,') : "top"'),SG=function(t,e){var n;return Object(Ut.F)(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+OG(t.path)+")":t.sphere&&(n="geoShape("+OG(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t};function OG(t){return Object(Ut.F)(t)&&t.signal?t.signal:Object(Ut.X)(t)}var AG=function(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")?t.type===oG?"scope":e||GH:e},TG=function(t){return{marktype:t.type,name:t.name||void 0,role:t.role||AG(t),zindex:+t.zindex||void 0}},CG=function(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t},jG=function(t,e){var n=Ri(t.type);n||Object(Ut.n)("Unrecognized transform type: "+Object(Ut.X)(t.type));var r=Hq(n.type.toLowerCase(),null,DG(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r};function DG(t,e,n){var r,i,a,o={};for(i=0,a=t.params.length;i<a;++i)o[(r=t.params[i]).name]=RG(r,e,n);return o}function RG(t,e,n){var r=t.type,i=e[t.name];return"index"===r?function(t,e,n){Object(Ut.H)(e.from)||Object(Ut.n)('Lookup "from" parameter must be a string literal.');return n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==i?"param"===r?function(t,e,n){var r=e[t.name];return t.array?(Object(Ut.A)(r)||Object(Ut.n)("Expected an array of sub-parameters. Instead: "+Object(Ut.X)(r)),r.map((function(e){return PG(t,e,n)}))):PG(t,r,n)}(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!tW(i)?i.map((function(e){return MG(t,e,n)})):MG(t,i,n):void(t.required&&Object(Ut.n)("Missing required "+Object(Ut.X)(e.type)+" parameter: "+Object(Ut.X)(t.name)))}function MG(t,e,n){var r=t.type;if(tW(e))return FG(r)?Object(Ut.n)("Expression references can not be signals."):NG(r)?n.fieldRef(e):LG(r)?n.compareRef(e):n.signalRef(e.signal);var i,a=t.expr||NG(r);return a&&((i=e)&&i.expr)?n.exprRef(e.expr,e.as):a&&function(t){return t&&t.field}(e)?Vq(e.field,e.as):FG(r)?qq(e,n):function(t){return"data"===t}(r)?Yq(n.getData(e).values):NG(r)?Vq(e):LG(r)?n.compareRef(e):e}function PG(t,e,n){var r,i,a,o,s;for(o=0,s=t.params.length;o<s;++o){for(a in(i=t.params[o]).key)if(i.key[a]!==e[a]){i=null;break}if(i)break}return i||Object(Ut.n)("Unsupported parameter: "+Object(Ut.X)(e)),r=Object(Ut.o)(DG(i,e,n),i.key),Yq(n.add(VW(r)))}function FG(t){return"expr"===t}function NG(t){return"field"===t}function LG(t){return"compare"===t}function IG(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Yq(e.getData(t.data).output)}function BG(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}BG.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],a=e[n-1],o=e[n-2],s=null;for(i&&"load"===i.type&&(i=e[1]),t.add(e[0]);r<n;++r)e[r].params.pulse=Yq(e[r-1]),t.add(e[r]),"aggregate"===e[r].type&&(s=e[r]);return new BG(t,i,o,a,s)};var UG=BG.prototype;function zG(t){return Object(Ut.H)(t)?t:null}function qG(t,e,n){var r,i=Jq(n.op,n.field);if(e.ops){for(var a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function WG(t,e,n,r,i,a,o){var s,u,c=e[n]||(e[n]={}),l=function(t){return Object(Ut.F)(t)?(t.order===Kq?"-":"+")+Jq(t.op,t.field):""}(a),f=zG(i);if(null!=f&&(t=e.scope,s=c[f+=l?"|"+l:""]),!s){var h=a?{field:$q,pulse:e.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:Yq(e.output)};l&&(h.sort=t.sortRef(a)),u=t.add(Hq(r,void 0,h)),o&&(e.index[i]=u),s=Yq(u),null!=f&&(c[f]=s)}return s}UG.countsRef=function(t,e,n){var r,i,a,o=this.counts||(this.counts={}),s=zG(e);return null!=s&&(t=this.scope,r=o[s]),r?n&&n.field&&qG(t,r.agg.params,n):(a={groupby:t.fieldRef(e,"key"),pulse:Yq(this.output)},n&&n.field&&qG(t,a,n),i=t.add(jW(a)),r=t.add(MW({pulse:Yq(i)})),r={agg:i,ref:Yq(r)},null!=s&&(o[s]=r)),r.ref},UG.tuplesRef=function(){return Yq(this.values)},UG.extentRef=function(t,e){return WG(t,this,"extent","extent",e,!1)},UG.domainRef=function(t,e){return WG(t,this,"domain","values",e,!1)},UG.valuesRef=function(t,e,n){return WG(t,this,"vals","values",e,n||!0)},UG.lookupRef=function(t,e){return WG(t,this,"lookup","tupleindex",e,!1)},UG.indataRef=function(t,e){return WG(t,this,"indata","tupleindex",e,!0,!0)};var HG=function(t,e,n){var r,i,a=t.remove,o=t.insert,s=t.toggle,u=t.modify,c=t.values,l=e.add(Gq());r="if("+t.trigger+',modify("'+n+'",'+[o,a,s,u,c].map((function(t){return null==t?"null":t})).join(",")+"),0)",i=qq(r,e),l.update=i.$expr,l.params=i.$params},GG=function(t,e){var n,r,i,a,o,s,u,c,l,f,h,d,p,v,g=AG(t),m=t.type===oG,y=t.from&&t.from.facet,b=t.layout||"scope"===g||g===YH,_=g===GH||b||y,w=t.overlap;i=function(t,e,n){var r,i,a,o,s;return t?(r=t.facet)&&(e||Object(Ut.n)("Only group marks can be faceted."),null!=r.field?o=s=IG(r,n):(t.data?s=Yq(n.getData(t.data).aggregate):((a=jG(Object(Ut.o)({type:"aggregate",groupby:Object(Ut.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),a.params.pulse=IG(r,n),o=s=Yq(n.add(a))),i=n.keyRef(r.groupby,!0))):o=Yq(n.add(MW(null,[{}]))),o||(o=IG(t,n)),{key:i,pulse:o,parent:s}}(t.from,m,e),f=Yq(r=e.add(FW({key:i.key||(t.key?Vq(t.key):void 0),pulse:i.pulse,clean:!m}))),r=a=e.add(MW({pulse:f})),r=e.add(WW({markdef:TG(t),interactive:CG(t.interactive,e),clip:SG(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Yq(r)})),h=Yq(r),(r=o=e.add(NW(ZH(t.encode,t.type,g,t.style,e,{mod:!1,pulse:h})))).params.parent=e.encode(),t.transform&&t.transform.forEach((function(t){var n=jG(t,e),i=n.metadata;(i.generates||i.changes)&&Object(Ut.n)("Mark transforms should not generate new data."),i.nomod||(o.params.mod=!0),n.params.pulse=Yq(r),e.add(r=n)})),t.sort&&(r=e.add(eH({sort:e.compareRef(t.sort),pulse:Yq(r)}))),d=Yq(r),(y||b)&&(p=Yq(b=e.add(nH({layout:e.objectProperty(t.layout),legends:e.legends,mark:h,pulse:d})))),v=Yq(s=e.add(RW({mark:h,pulse:p||d}))),m&&(_&&((n=e.operators).pop(),b&&n.pop()),e.pushState(d,p||v,f),y?function(t,e,n){var r,i,a,o,s=t.from.facet,u=s.name,c=IG(s,e);s.name||Object(Ut.n)("Facet must have a name: "+Object(Ut.X)(s)),s.data||Object(Ut.n)("Facet must reference a data set: "+Object(Ut.X)(s)),s.field?o=e.add($W({field:e.fieldRef(s.field),pulse:c})):s.groupby?o=e.add(IW({key:e.keyRef(s.groupby),group:Yq(e.proxy(n.parent)),pulse:c})):Object(Ut.n)("Facet must specify groupby or field: "+Object(Ut.X)(s)),i=(r=e.fork()).add(MW()),a=r.add(tH({pulse:Yq(i)})),r.addData(u,new BG(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:iY(t,r).toRuntime()}}(t,e,i):_?function(t,e,n){var r=e.add($W({pulse:n.pulse})),i=e.fork();i.add(tH()),i.addSignal("parent",null),r.params.subflow={$subflow:iY(t,i).toRuntime()}}(t,e,i):iY(t,e),e.popState(),_&&(b&&n.push(b),n.push(s))),w&&(v=function(t,e,n){var r,i=t.method,a=t.bound,o=t.separation,s={separation:tW(o)?n.signalRef(o.signal):o,method:tW(i)?n.signalRef(i.signal):i,pulse:e};t.order&&(s.sort=n.compareRef({field:t.order}));a&&(r=a.tolerance,s.boundTolerance=tW(r)?n.signalRef(r.signal):+r,s.boundScale=n.scaleRef(a.scale),s.boundOrient=a.orient);return Yq(n.add(YW(s)))}(w,v,e)),u=e.add(ZW({pulse:v})),c=e.add(tH({pulse:Yq(u)},void 0,e.parent())),null!=t.name&&(l=t.name,e.addData(l,new BG(e,a,u,c)),t.on&&t.on.forEach((function(t){(t.insert||t.remove||t.toggle)&&Object(Ut.n)("Marks only support modify triggers."),HG(t,e,l)})))};var YG=function(t,e){var n,r,i,a,o,s,u,c,l,f=e.config.legend,h=t.encode||{},d=h.legend||{},p=d.name||void 0,v=d.interactive,g=d.style,m=nG(t,f),y=CH.reduce((function(e,n){return e||t[n]}),0);return y||Object(Ut.n)("Missing valid scale for legend."),o=function(t,e){var n=t.type||OH;t.type||1!==function(t){return CH.reduce((function(e,n){return e+(t[n]?1:0)}),0)}(t)||!t.fill&&!t.stroke||(n=Wd(e)?AH:Gd(e)?TH:OH);return n!==AH?n:Gd(e)?TH:AH}(t,e.scaleType(y)),s={title:null!=t.title,type:o,vgrad:"symbol"!==o&&m.isVertical()},u=Yq(e.add(MW(null,[s]))),d=JH(function(t,e){var n={enter:{},update:{}};return KH(n,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:e.strokeWidth,strokeDash:e.strokeDash,x:t("legendX"),y:t("legendY")}),n}(m,f),d,jH),n={enter:{x:{value:0},y:{value:0}}},c=Yq(e.add(zW(i={type:o,scale:e.scaleRef(y),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),o===AH?(a=[uG(t,y,f,h.gradient),hG(t,f,h.labels,c)],i.count=i.count||e.signalRef("max(2,2*floor((".concat(rW(m.gradientLength()),")/100))"))):o===TH?a=[cG(t,y,f,h.gradient,c),hG(t,f,h.labels,c)]:(r=function(t,e){var n=nG(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(t,f),a=[pG(t,f,h,c,rW(r.columns))],i.size=function(t,e,n){var r=rW(VG("size",t,n)),i=rW(VG("strokeWidth",t,n)),a=rW(function(t,e,n){return rG("fontSize",t)||function(t,e,n){var r=e.config.style[n];return r&&r[t]}("fontSize",e,n)}(n[1].encode,e,EH));return qq("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(a,")"),e)}(t,e,a[0].marks)),a=[dG("legend-entry",null,null,u,v,n,a,r)],s.title&&a.push(function(t,e,n,r){var i,a=nG(t,e);return KH(i={enter:{opacity:DH},update:{opacity:RH,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:DH}},{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:xG},angle:{signal:kG},align:{signal:wG},baseline:{signal:EG},text:t.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit")},{align:a("titleAlign"),baseline:a("titleBaseline")}),eG(sG,"legend-title","guide-title",null,r,i,n)}(t,f,h.title,u)),l=dG("legend",g,p,u,v,d,a),t.zindex&&(l.zindex=t.zindex),GG(l,e)};function VG(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):rG(t,n[0].encode)}var $G='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0'),XG='item.orient==="'.concat("bottom",'"?"').concat("top",'":"').concat("bottom",'"'),KG=function(t,e){t=Object(Ut.H)(t)?{text:t}:t;var n,r,i=e.config.title,a=Object(Ut.o)({},t.encode);return n=Yq(e.add(MW(null,[{}]))),a.name=t.name,a.interactive=t.interactive,r=function(t,e,n,r){var i,a=nG(t,e),o={value:0},s=t.text;return KH(i={enter:{opacity:o},update:{opacity:{value:1}},exit:{opacity:o}},{text:s,orient:a("orient"),anchor:a("anchor"),align:{signal:aG},angle:{signal:$G},baseline:{signal:XG},dx:a("dx"),dy:a("dy"),fill:a("color"),font:a("font"),fontSize:a("fontSize"),fontStyle:a("fontStyle"),fontWeight:a("fontWeight"),frame:a("frame"),limit:a("limit"),offset:a("offset")||0},{align:a("align"),angle:a("angle"),baseline:a("baseline")}),eG(sG,VH,t.style||SH,null,r,i,n)}(t,i,a,n),t.zindex&&(r.zindex=t.zindex),GG(r,e)};function JG(t,e){var n=[];t.transform&&t.transform.forEach((function(t){n.push(jG(t,e))})),t.on&&t.on.forEach((function(n){HG(n,e,t.name)})),e.addDataPipeline(t.name,function(t,e,n){var r,i,a,o,s,u=[],c=null,l=!1,f=!1;t.values?eW(t.values)||eW(t.format)?(u.push(QG(e,t)),u.push(c=ZG())):u.push(c=ZG({$ingest:t.values,$format:t.format})):t.url?eW(t.url)||eW(t.format)?(u.push(QG(e,t)),u.push(c=ZG())):u.push(c=ZG({$request:t.url,$format:t.format})):t.source&&(c=r=Object(Ut.i)(t.source).map((function(t){return Yq(e.getData(t).output)})),u.push(null));for(i=0,a=n.length;i<a;++i)o=n[i],s=o.metadata,c||s.source||u.push(c=ZG()),u.push(o),s.generates&&(f=!0),s.modifies&&!f&&(l=!0),s.source?c=o:s.changes&&(c=null);r&&(a=r.length-1,u[0]=JW({derive:l,pulse:a?r:r[0]}),(l||a)&&u.splice(1,0,ZG()));c||u.push(ZG());return u.push(tH({})),u}(t,e,n))}function ZG(t){var e=MW({},t);return e.metadata={source:!0},e}function QG(t,e){return qW({url:e.url?t.property(e.url):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}function tY(t,e){return{scale:t.scale,range:e}}var eY=function(t,e,n,r){var i,a,o,s,u,c,l,f,h,d=nG(t,e),p=t.orient,v=t.gridScale,g="left"===p||"top"===p?1:-1,m=function(t,e){if(1===e);else if(Object(Ut.F)(t)){for(var n=t=Object(Ut.o)({},t);null!=n.mult;){if(!Object(Ut.F)(n.mult))return n.mult*=e,t;n=n.mult=Object(Ut.o)({},n.mult)}n.mult=e}else t=e*(t||0);return t}(t.offset,g);return KH(i={enter:a={opacity:DH},update:s={opacity:RH},exit:o={opacity:DH}},{stroke:d("gridColor"),strokeDash:d("gridDash"),strokeDashOffset:d("gridDashOffset"),strokeOpacity:d("gridOpacity"),strokeWidth:d("gridWidth")}),u={scale:t.scale,field:kH,band:d("bandPosition"),round:d("tickRound"),extra:d("tickExtra"),offset:d("tickOffset")},"top"===p||"bottom"===p?(c="x",l="y",h="height"):(c="y",l="x",h="width"),f=l+"2",s[c]=a[c]=o[c]=u,v?(s[l]=a[l]={scale:v,range:0,mult:g,offset:m},s[f]=a[f]={scale:v,range:1,mult:g,offset:m}):(s[l]=a[l]={value:0,offset:m},s[f]=a[f]={signal:h,mult:g,offset:m}),eG("rule","axis-grid",null,kH,r,i,n)};function nY(t,e,n,r,i){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+r+","+i+")"}}var rY=function(t,e){var n,r,i,a,o,s,u=function(t,e){var n=e.config,r=t.orient,i="top"===r||"bottom"===r?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===e.scaleType(t.scale)&&n.axisBand;return i||a||o?Object(Ut.o)({},n.axis,i,a,o):n.axis}(t,e),c=t.encode||{},l=c.axis||{},f=l.name||void 0,h=l.interactive,d=l.style,p=nG(t,u);return n={orient:t.orient,ticks:!!p("ticks"),labels:!!p("labels"),grid:!!p("grid"),domain:!!p("domain"),title:null!=t.title},r=Yq(e.add(MW({},[n]))),l=JH({update:{offset:$H(p("offset")||0),position:$H(nW(t.position,0)),titlePadding:$H(p("titlePadding")),minExtent:$H(p("minExtent")),maxExtent:$H(p("maxExtent")),range:{signal:'abs(span(range("'.concat(t.scale,'")))')}}},c.axis,jH),i=Yq(e.add(DW({scale:e.scaleRef(t.scale),extra:e.property(p("tickExtra")),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),s=[],n.grid&&s.push(eY(t,u,c.grid,i)),n.ticks&&(a=p("tickSize"),s.push(function(t,e,n,r,i){var a,o,s,u,c,l,f=nG(t,e),h=t.orient,d="left"===h||"top"===h?-1:1;return KH(a={enter:o={opacity:DH},update:u={opacity:RH},exit:s={opacity:DH}},{stroke:f("tickColor"),strokeDash:f("tickDash"),strokeDashOffset:f("tickDashOffset"),strokeOpacity:f("tickOpacity"),strokeWidth:f("tickWidth")}),(c=$H(i)).mult=d,l={scale:t.scale,field:kH,band:f("bandPosition"),round:f("tickRound"),extra:f("tickExtra"),offset:f("tickOffset")},"top"===h||"bottom"===h?(u.y=o.y=DH,u.y2=o.y2=c,u.x=o.x=s.x=l):(u.x=o.x=DH,u.x2=o.x2=c,u.y=o.y=s.y=l),eG("rule","axis-tick",null,kH,r,a,n)}(t,u,c.ticks,i,a))),n.labels&&(a=n.ticks?a:0,s.push(function(t,e,n,r,i){var a,o,s,u,c,l,f,h,d,p,v,g=nG(t,e),m=t.orient,y="left"===m||"top"===m?-1:1,b="top"===m||"bottom"===m,_=t.scale,w=rW(g("labelFlush")),x=rW(g("labelFlushOffset")),k=0===w||!!w,E=g("labelAlign"),S=g("labelBaseline");return(u=$H(i)).mult=y,u.offset=$H(g("labelPadding")||0),u.offset.mult=y,c={scale:_,field:kH,band:.5,offset:g("tickOffset")},b?(l=E||(k?nY(_,w,'"left"','"right"','"center"'):"center"),f=S||("top"===m?"bottom":"top"),h=!E):(l=E||("right"===m?"left":"right"),f=S||(k?nY(_,w,'"top"','"bottom"','"middle"'):"middle"),h=!S),h=h&&k&&x?nY(_,w,"-("+x+")",x,0):null,KH(o={enter:s={opacity:DH,x:b?c:u,y:b?u:c},update:{opacity:RH,text:{field:"label"},x:s.x,y:s.y},exit:{opacity:DH,x:s.x,y:s.y}},(a={},Object(fp.a)(a,b?"dx":"dy",h),Object(fp.a)(a,"align",l),Object(fp.a)(a,"baseline",f),Object(fp.a)(a,"angle",g("labelAngle")),Object(fp.a)(a,"fill",g("labelColor")),Object(fp.a)(a,"fillOpacity",g("labelOpacity")),Object(fp.a)(a,"font",g("labelFont")),Object(fp.a)(a,"fontSize",g("labelFontSize")),Object(fp.a)(a,"fontWeight",g("labelFontWeight")),Object(fp.a)(a,"fontStyle",g("labelFontStyle")),Object(fp.a)(a,"limit",g("labelLimit")),a)),d=g("labelBound"),p=g("labelOverlap"),v=g("labelSeparation"),t=eG(sG,"axis-label",EH,kH,r,o,n),(p||d)&&(t.overlap={separation:v,method:p,order:"datum.index",bound:d?{scale:_,orient:m,tolerance:d}:null}),t}(t,u,c.labels,i,a))),n.domain&&s.push(function(t,e,n,r){var i,a,o,s,u,c,l=nG(t,e),f=t.orient;return KH(i={enter:a={opacity:DH},update:o={opacity:RH},exit:{opacity:DH}},{stroke:l("domainColor"),strokeDash:l("domainDash"),strokeDashOffset:l("domainDashOffset"),strokeWidth:l("domainWidth"),strokeOpacity:l("domainOpacity")}),"top"===f||"bottom"===f?(s="x",c="y"):(s="y",c="x"),u=s+"2",a[c]=DH,o[s]=a[s]=tY(t,0),o[u]=a[u]=tY(t,1),eG("rule","axis-domain",null,null,r,i,n)}(t,u,c.domain,r)),n.title&&s.push(function(t,e,n,r){var i,a,o,s,u=nG(t,e),c=t.orient,l="left"===c||"top"===c?-1:1,f="top"===c||"bottom"===c;return i={enter:a={opacity:DH,anchor:$H(u("titleAnchor")),align:{signal:aG}},update:o=Object(Ut.o)({},a,{opacity:RH,text:$H(t.title)}),exit:{opacity:DH}},s={signal:'lerp(range("'.concat(t.scale,'"), ').concat(iG(0,1,.5),")")},f?(o.x=s,a.angle={value:0},a.baseline={value:"top"===c?"bottom":"top"}):(o.y=s,a.angle={value:90*l},a.baseline={value:"bottom"}),KH(i,{angle:u("titleAngle"),baseline:u("titleBaseline"),fill:u("titleColor"),fillOpacity:u("titleOpacity"),font:u("titleFont"),fontSize:u("titleFontSize"),fontStyle:u("titleFontStyle"),fontWeight:u("titleFontWeight"),limit:u("titleLimit")},{align:u("titleAlign")}),!XH(i,"x",u("titleX"),"update")&&!f&&!tG("x",n)&&(i.enter.auto={value:!0}),!XH(i,"y",u("titleY"),"update")&&f&&!tG("y",n)&&(i.enter.auto={value:!0}),eG(sG,"axis-title","guide-title",null,r,i,n)}(t,u,c.title,r)),o=dG("axis",d,f,r,h,l,s),t.zindex&&(o.zindex=t.zindex),GG(o,e)},iY=function(t,e,n){var r=Object(Ut.i)(t.signals),i=Object(Ut.i)(t.scales);return n||r.forEach((function(t){return zq(t,e)})),Object(Ut.i)(t.projections).forEach((function(t){return function(t,e){var n={};for(var r in t)"name"!==r&&(n[r]=bH(t[r],r,e));e.addProjection(t.name,n)}(t,e)})),i.forEach((function(t){return oH(t,e)})),Object(Ut.i)(t.data).forEach((function(t){return JG(t,e)})),i.forEach((function(t){return sH(t,e)})),(n||r).forEach((function(t){return function(t,e){var n=e.getSignal(t.name),r=t.update;t.init&&(r?Object(Ut.n)("Signals can not include both init and update expressions."):(r=t.init,n.initonly=!0)),r&&(r=qq(r,e),n.update=r.$expr,n.params=r.$params),t.on&&t.on.forEach((function(t){AW(t,e,n.id)}))}(t,e)})),Object(Ut.i)(t.axes).forEach((function(t){return rY(t,e)})),Object(Ut.i)(t.marks).forEach((function(t){return GG(t,e)})),Object(Ut.i)(t.legends).forEach((function(t){return YG(t,e)})),t.title&&KG(t.title,e),e.parseLambdas(),e},aY=Object(Ut.bb)(["width","height","padding","autosize"]);function oY(t,e){var n,r,i,a,o,s,u=e.config;return e.background=t.background||u.background,e.eventConfig=u.events,o=Yq(e.root=e.add(Gq())),e.addSignal("width",t.width||0),e.addSignal("height",t.height||0),e.addSignal("padding",Lq(t.padding,u)),e.addSignal("autosize",Nq(t.autosize,u)),e.legends=e.objectProperty(u.legend&&u.legend.layout),s=function(t,e,n){if(Object(Ut.i)(e).forEach((function(e){aY[e.name]||zq(e,t)})),!n)return e;var r=Object(Ut.i)(e).slice();return Object(Ut.i)(n).forEach((function(e){t.hasOwnSignal(e.name)||(zq(e,t),r.push(e))})),r}(e,t.signals,u.signals),r=e.add(MW()),i=JH({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t.encode),i=e.add(NW(ZH(i,oG,YH,t.style,e,{pulse:Yq(r)}))),a=e.add(nH({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:o,pulse:Yq(i)})),e.operators.pop(),e.pushState(Yq(i),Yq(a),null),iY(t,e,s),e.operators.push(a),n=e.add(RW({mark:o,pulse:Yq(a)})),n=e.add(ZW({pulse:Yq(n)})),n=e.add(tH({pulse:Yq(n)})),e.addData("root",new BG(e,r,r,n)),e}function sY(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function uY(t){this.config=t.config,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}var cY=sY.prototype=uY.prototype;function lY(t){return(Object(Ut.A)(t)?fY:hY)(t)}function fY(t){for(var e,n="[",r=0,i=t.length;r<i;++r)e=t[r],n+=(r>0?",":"")+(Object(Ut.F)(e)?e.signal||lY(e):Object(Ut.X)(e));return n+"]"}function hY(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+Object(Ut.X)(e)+":"+(Object(Ut.F)(n)?n.signal||lY(n):Object(Ut.X)(n));return r+"}"}cY.fork=function(){return new uY(this)},cY.isSubscope=function(){return this._subid>0},cY.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},cY.id=function(){return(this._subid?this._subid+":":0)+this._id++},cY.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach((function(e){e.$ref=t.id})),t.refs=null),t},cY.proxy=function(t){var e=t instanceof Wq?Yq(t):t;return this.add(KW({value:e}))},cY.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},cY.addUpdate=function(t){return this.updates.push(t),t},cY.finish=function(){var t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){var r;t&&((r=t.data||(t.data={}))[e]||(r[e]=[])).push(n)}for(t in this.data)for(var r in n((e=this.data[t]).input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values"),e.index)n(e.index[r],t,"index:"+r);return this},cY.pushState=function(t,e,n){this._encode.push(Yq(this.add(tH({pulse:t})))),this._parent.push(e),this._lookup.push(n?Yq(this.proxy(n)):null),this._markpath.push(-1)},cY.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},cY.parent=function(){return Object(Ut.S)(this._parent)},cY.encode=function(){return Object(Ut.S)(this._encode)},cY.lookup=function(){return Object(Ut.S)(this._lookup)},cY.markpath=function(){var t=this._markpath;return++t[t.length-1]},cY.fieldRef=function(t,e){if(Object(Ut.H)(t))return Vq(t,e);t.signal||Object(Ut.n)("Unsupported field reference: "+Object(Ut.X)(t));var n,r=t.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=i=Yq(this.add(BW(n)))),i},cY.compareRef=function(t){function e(t){return tW(t)?(r=!0,n.signalRef(t.signal)):function(t){return t&&t.expr}(t)?(r=!0,n.exprRef(t.expr)):t}var n=this,r=!1,i=Object(Ut.i)(t.field).map(e),a=Object(Ut.i)(t.order).map(e);return r?Yq(this.add(PW({fields:i,orders:a}))):Xq(i,a)},cY.keyRef=function(t,e){var n=this.signals,r=!1;return t=Object(Ut.i)(t).map((function(t){return tW(t)?(r=!0,Yq(n[t.signal])):t})),r?Yq(this.add(UW({fields:t,flat:e}))):function(t,e){var n={$key:t};return e&&(n.$flat=!0),n}(t,e)},cY.sortRef=function(t){if(!t)return t;var e=Jq(t.op,t.field),n=t.order||"ascending";return n.signal?Yq(this.add(PW({fields:e,orders:this.signalRef(n.signal)}))):Xq(e,n)},cY.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},cY.hasOwnSignal=function(t){return Object(Ut.v)(this.signals,t)},cY.addSignal=function(t,e){this.hasOwnSignal(t)&&Object(Ut.n)("Duplicate signal name: "+Object(Ut.X)(t));var n=e instanceof Wq?e:this.add(Gq(e));return this.signals[t]=n},cY.getSignal=function(t){return this.signals[t]||Object(Ut.n)("Unrecognized signal name: "+Object(Ut.X)(t)),this.signals[t]},cY.signalRef=function(t){return this.signals[t]?Yq(this.signals[t]):(Object(Ut.v)(this.lambdas,t)||(this.lambdas[t]=this.add(Gq(null))),Yq(this.lambdas[t]))},cY.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=qq(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},cY.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},cY.objectProperty=function(t){return t&&Object(Ut.F)(t)?this.signalRef(t.signal||lY(t)):t},cY.exprRef=function(t,e){var n={expr:qq(t,this)};return e&&(n.expr.$name=e),Yq(this.add(LW(n)))},cY.addBinding=function(t,e){this.bindings||Object(Ut.n)("Nested signals do not support binding: "+Object(Ut.X)(t)),this.bindings.push(Object(Ut.o)({signal:t},e))},cY.addScaleProj=function(t,e){Object(Ut.v)(this.scales,t)&&Object(Ut.n)("Duplicate scale or projection name: "+Object(Ut.X)(t)),this.scales[t]=this.add(e)},cY.addScale=function(t,e){this.addScaleProj(t,QW(e))},cY.addProjection=function(t,e){this.addScaleProj(t,XW(e))},cY.getScale=function(t){return this.scales[t]||Object(Ut.n)("Unrecognized scale name: "+Object(Ut.X)(t)),this.scales[t]},cY.projectionRef=cY.scaleRef=function(t){return Yq(this.getScale(t))},cY.projectionType=cY.scaleType=function(t){return this.getScale(t).params.type},cY.addData=function(t,e){return Object(Ut.v)(this.data,t)&&Object(Ut.n)("Duplicate data set name: "+Object(Ut.X)(t)),this.data[t]=e},cY.getData=function(t){return this.data[t]||Object(Ut.n)("Undefined data set name: "+Object(Ut.X)(t)),this.data[t]},cY.addDataPipeline=function(t,e){return Object(Ut.v)(this.data,t)&&Object(Ut.n)("Duplicate data set name: "+Object(Ut.X)(t)),this.addData(t,BG.fromEntries(this,e))};var dY=function(t){return(t||[]).reduce((function(t,e){for(var n in e)if("signals"===n)t.signals=vY(t.signals,e.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;pY(t,n,e[n],r)}return t}),{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:bY},area:{fill:bY},image:null,line:{stroke:bY,strokeWidth:yY},path:{stroke:bY},rect:{fill:bY},rule:{stroke:_Y},shape:{stroke:bY},symbol:{fill:bY,size:64},text:{fill:_Y,font:gY,fontSize:11},style:{"guide-label":{fill:_Y,font:gY,fontSize:10},"guide-title":{fill:_Y,font:gY,fontSize:11,fontWeight:"bold"},"group-title":{fill:_Y,font:gY,fontSize:13,fontWeight:"bold"},point:{size:mY,strokeWidth:yY,shape:"circle"},circle:{size:mY,strokeWidth:yY},square:{size:mY,strokeWidth:yY,shape:"square"},cell:{fill:"transparent",stroke:xY}},title:{orient:"top",anchor:"middle",offset:4},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:wY,grid:!1,gridWidth:1,gridColor:xY,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:wY,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:xY,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:wY,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}})};function pY(t,e,n,r){var i,a;if(Object(Ut.F)(n)&&!Object(Ut.A)(n))for(i in a=Object(Ut.F)(t[e])?t[e]:t[e]={},n)r&&(!0===r||r[i])?pY(a,i,n[i]):a[i]=n[i];else t[e]=n}function vY(t,e){if(null==t)return e;var n={},r=[];function i(t){n[t.name]||(n[t.name]=1,r.push(t))}return e.forEach(i),t.forEach(i),r}var gY="sans-serif",mY=30,yY=2,bY="#4c78a8",_Y="#000",wY="#888",xY="#ddd";var kY=function(t,e){return Object(Ut.F)(t)||Object(Ut.n)("Input Vega specification must be an object."),oY(t,new sY(dY([e,t.config]))).toRuntime()};function EY(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function SY(t,e){return EY(["event"],t,e)}function OY(t,e){return EY(["item","_"],t,e)}function AY(t,e,n){var r,i;for(r in n=n||{},t)i=t[r],n[r]=Object(Ut.A)(i)?i.map((function(t){return TY(t,e,n)})):TY(i,e,n);return n}function TY(t,e,n){if(!t||!Object(Ut.F)(t))return t;for(var r,i=0,a=CY.length;i<a;++i)if(r=CY[i],Object(Ut.v)(t,r.key))return r.parse(t,e,n);return t}var CY=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||Object(Ut.n)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){var n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=Object(Ut.I)(t.$key,t.$flat))}},{key:"$expr",parse:function(t,e,n){t.$params&&AY(t.$params,e,n);var r="e:"+t.$expr+"_"+t.$name;return e.fn[r]||(e.fn[r]=Object(Ut.f)(function(t,e){return EY(["datum","_"],t,e)}(t.$expr,e),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Object(Ut.t)(t.$field,t.$name))}},{key:"$encode",parse:function(t,e){var n,r,i=t.$encode,a={};for(n in i)r=i[n],a[n]=Object(Ut.f)(OY(r.$expr,e),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function(t,e){var n="c:"+t.$compare+"_"+t.$order,r=Object(Ut.i)(t.$compare).map((function(t){return t&&t.$tupleid?$t:t}));return e.fn[n]||(e.fn[n]=Object(Ut.k)(r,t.$order))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){var n=t.$subflow;return function(t,r,i){var a=MY(n,e.fork()),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o}}},{key:"$tupleid",parse:function(){return $t}}];function jY(t){return(t+"").toLowerCase()}var DY=function(t,e){"operator"!==jY(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?function(t,e){return EY(["_"],t,e)}(t.update,e):null)};var RY=function(t,e){var n=Object(Ut.F)(n=t.source)?n.$ref:n,r=e.get(n),i=null,a=t.update,o=void 0;r||Object(Ut.n)("Source not defined: "+t.source),i=t.target&&t.target.$expr?SY(t.target.$expr,e):e.get(t.target),a&&a.$expr&&(a.$params&&(o=AY(a.$params,e)),a=function(t,e){return EY(["_","event"],t,e)}(a.$expr,e)),e.update(t,r,i,a,o)},MY=function(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),n.forEach((function(t){DY(t,e)})),n.forEach((function(t){!function(t,e){if(t.params){var n=e.get(t.id);n||Object(Ut.n)("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(AY(t.params,e),t.react,t.initonly))}}(t,e)})),(t.streams||[]).forEach((function(t){!function(t,e){var n,r=null!=t.filter?SY(t.filter,e):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(i=(n=t.merge.map(e.get.bind(e)))[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(e.get.bind(e)),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&Object(Ut.n)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}(t,e)})),(t.updates||[]).forEach((function(t){RY(t,e)})),e.resolve()},PY={skip:!0};var FY=function(t,e,n){return new NY(t,e,n)};function NY(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function LY(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}NY.prototype=LY.prototype={fork:function(){var t=new LY(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),"collect"===jY(t.type)&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$request?i.preload(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var a=r.get(t.parent.$ref);a?(i.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push((function(){a=r.get(t.parent.$ref),i.connect(a,[e]),e.targets().add(a)}))}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var o in t.data)n=r.data[o]||(r.data[o]={}),t.data[o].forEach((function(t){n[t]=e}))},resolve:function(){return(this.unresolved||[]).forEach((function(t){t()})),delete this.unresolved,this},operator:function(t,e){this.add(t,this.dataflow.add(t.value,e))},transform:function(t,e){this.add(t,this.dataflow.add(this.transforms[jY(e)]))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:function(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach((function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)}))}if(t.data){var i=n.data={};Object.keys(e.data).forEach((function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)}))}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map((function(e){return e.getState(t)}))),n},setState:function(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach((function(t){n.update(e.signals[t],i[t],PY)})),Object.keys(r||{}).forEach((function(t){n.pulse(e.data[t].input,n.changeset().remove(Ut.eb).insert(r[t]))})),(t.subcontext||[]).forEach((function(t,n){var r=e.subcontext[n];r&&r.setState(t)}))}},Object(Ut.o)(Di,r,i,o,s,u,c,l,f,h,d);var IY=n(221),BY=function(t,e,n){return t.fields=e||[],t.fname=n,t};var UY=function(t){throw Error(t)},zY=function(t){var e,n,r,i=[],a=null,o=0,s=t.length,u="";function c(){i.push(u+t.substring(e,n)),u="",e=n+1}for(t+="",e=n=0;n<s;++n)if("\\"===(r=t[n]))u+=t.substring(e,n),e=++n;else if(r===a)c(),a=null,o=-1;else{if(a)continue;e===o&&'"'===r?(e=n+1,a=r):e===o&&"'"===r?(e=n+1,a=r):"."!==r||o?"["===r?(n>e&&c(),o=e=n+1):"]"===r&&(o||UY("Access path missing open bracket: "+t),o>0&&c(),o=0,e=n+1):n>e?c():e=n+1}return o&&UY("Access path missing closing bracket: "+t),a&&UY("Access path missing closing quote: "+t),n>e&&(n++,c()),i},qY=Array.isArray,WY=function(t){return t===Object(t)},HY=function(t){return"string"===typeof t};function GY(t){return qY(t)?"["+t.map(GY)+"]":WY(t)||HY(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}var YY=[],VY=(function(t,e){var n=zY(t),r="return _["+n.map(GY).join("][")+"];";BY(Function("_",r),[t=1===n.length?n[0]:t],e||t)}("id"),BY((function(t){return t}),YY,"identity"));BY((function(){return 0}),YY,"zero"),BY((function(){return 1}),YY,"one"),BY((function(){return!0}),YY,"true"),BY((function(){return!1}),YY,"false");function $Y(t,e,n){var r,i=[e].concat([].slice.call(n));(r=console)[t].apply(r,Object(id.a)(i))}var XY=function(t){return null!=t?qY(t)?t:[t]:[]},KY=function(t){return"function"===typeof t},JY=function(t){return"boolean"===typeof t},ZY=function(t){return"number"===typeof t};var QY=function(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e},tV=n(222),eV=n.n(tV),nV=n(223),rV=n.n(nV),iV=n(87),aV=n.n(iV);function oV(t){return!!t.or}function sV(t){return!!t.and}function uV(t){return!!t.not}function cV(t,e){return uV(t)?{not:cV(t.not,e)}:sV(t)?{and:t.and.map((function(t){return cV(t,e)}))}:oV(t)?{or:t.or.map((function(t){return cV(t,e)}))}:e(t)}var lV=rV.a,fV=eV.a;function hV(t,e){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;t.hasOwnProperty(u)&&(n[u]=t[u])}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}function dV(t,e){var n=Object.assign({},t),r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){delete n[o.value]}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}Set.prototype.toJSON=function(){return"Set(".concat(Object(id.a)(this).map((function(t){return aV()(t)})).join(","),")")};var pV=aV.a;function vV(t){if(ZY(t))return t;var e=HY(t)?t:aV()(t);if(e.length<250)return e;for(var n=0,r=0;r<e.length;r++){n=(n<<5)-n+e.charCodeAt(r),n&=n}return n}function gV(t){return!1===t||null===t}function mV(t,e){return t.indexOf(e)>-1}function yV(t,e){var n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=Object(ga.a)(u,2),l=c[0];if(e(c[1],l,n++))return!0}}catch(f){i=!0,a=f}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!1}function bV(t,e){var n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=Object(ga.a)(u,2),l=c[0];if(!e(c[1],l,n++))return!1}}catch(f){i=!0,a=f}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!0}function _V(t){var e;return(e=[]).concat.apply(e,Object(id.a)(t))}function wV(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){t=xV(t,a[i])}return t}function xV(t,e){if("object"!==typeof e||null===e)return t;for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&("object"!==typeof e[n]||qY(e[n])||null===e[n]?t[n]=e[n]:"object"!==typeof t[n]||null===t[n]?t[n]=wV(qY(e[n].constructor)?[]:{},e[n]):wV(t[n],e[n]));return t}function kV(t,e){var n,r=[],i={},a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;(n=e(l))in i||(i[n]=1,r.push(l))}}catch(f){o=!0,s=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return r}function EV(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(e.has(s))return!0}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}function SV(t){var e=new Set,n=!0,r=!1,i=void 0;try{for(var a,o=function(){var t=a.value,n=zY(t).map((function(t,e){return 0===e?t:"[".concat(t,"]")}));n.map((function(t,e){return n.slice(0,e+1).join("")})).forEach((function(t){return e.add(t)}))},s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)o()}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e}function OV(t,e){return EV(SV(t),SV(e))}var AV=Object.keys;function TV(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}function CV(t){return!0===t||!1===t}function jV(t){var e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function DV(t,e){return uV(t)?"!("+DV(t.not,e)+")":sV(t)?"("+t.and.map((function(t){return DV(t,e)})).join(") && (")+")":oV(t)?"("+t.or.map((function(t){return DV(t,e)})).join(") || (")+")":e(t)}function RV(t,e){if(0===e.length)return!0;var n=e.shift();return RV(t[n],e)&&delete t[n],0===AV(t).length}function MV(t){return t.charAt(0).toUpperCase()+t.substr(1)}function PV(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=zY(t),r=[],i=1;i<=n.length;i++){var a="[".concat(n.slice(0,i).map(GY).join("]["),"]");r.push("".concat(e).concat(a))}return r.join(" && ")}function FV(t){return"".concat(zY(t).map((function(t){return t.replace(".","\\.")})).join("\\."))}function NV(t){return"".concat(zY(t).join("."))}function LV(t){return t?zY(t).length:0}function IV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];if(void 0!==a)return a}}var BV=42;function UV(t){var e=++BV;return t?String(t)+e:e}function zV(t){return(t%360+360)%360}var qV="area",WV="bar",HV="line",GV="point",YV="rect",VV="rule",$V="text",XV="tick",KV="trail",JV="circle",ZV="square",QV="geoshape",t$={area:1,bar:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function e$(t){return mV(["line","area","trail"],t)}var n$=AV(t$);function r$(t){return t.type}QY(n$);var i$=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),a$=["filled","color","tooltip"],o$={binSpacing:1,continuousBandSize:5},s$={binSpacing:0,continuousBandSize:5};function u$(t){return!!t.mark}var c$=function(){function t(e,n){Object(vO.a)(this,t),this.name=e,this.run=n}return Object(gO.a)(t,[{key:"hasMatchingType",value:function(t){return!!u$(t)&&(r$(e=t.mark)?e.type:e)===this.name;var e}}]),t}(),l$={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1};function f$(t){return!!t&&!!t.argmin}function h$(t){return!!t&&!!t.argmax}AV(l$);function d$(t){return HY(t)&&!!l$[t]}var p$=["count","valid","missing","distinct"];function v$(t){return t&&HY(t)&&mV(p$,t)}var g$=["count","sum","distinct","valid","missing"],m$=QY(["mean","average","median","q1","q3","min","max"]),y$="row",b$="column",_$="facet",w$="x",x$="y",k$="x2",E$="y2",S$="latitude",O$="longitude",A$="latitude2",T$="longitude2",C$="color",j$="fill",D$="stroke",R$="shape",M$="size",P$="opacity",F$="fillOpacity",N$="strokeOpacity",L$="strokeWidth",I$="text",B$="order",U$="detail",z$="key",q$="tooltip",W$="href",H$={x:1,y:1,x2:1,y2:1};var G$={longitude:1,longitude2:1,latitude:1,latitude2:1};var Y$=AV(G$),V$=Object.assign({},H$,G$,{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});function $$(t){return"color"===t||"fill"===t||"stroke"===t}var X$={row:1,column:1,facet:1},K$=AV(X$),J$=Object.assign({},V$,X$),Z$=AV(J$),Q$=(J$.order,J$.detail,S(J$,["order","detail"])),tX=(J$.order,J$.detail,J$.row,J$.column,J$.facet,S(J$,["order","detail","row","column","facet"]));AV(Q$),AV(tX);function eX(t){return!!J$[t]}var nX=["x2","y2","latitude2","longitude2"];function rX(t){return iX(t)!==t}function iX(t){switch(t){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude"}return t}AV(V$),V$.x,V$.y,V$.x2,V$.y2,V$.latitude,V$.longitude,V$.latitude2,V$.longitude2;var aX=S(V$,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]),oX=AV(aX),sX={x:1,y:1},uX=AV(sX),cX=(aX.text,aX.tooltip,aX.href,aX.detail,aX.key,aX.order,S(aX,["text","tooltip","href","detail","key","order"])),lX=AV(cX);var fX=Object.assign({},sX,cX),hX=AV(fX);function dX(t){return!!fX[t]}function pX(t,e){return function(t){switch(t){case C$:case j$:case D$:case U$:case z$:case q$:case W$:case B$:case P$:case F$:case N$:case L$:case _$:case y$:case b$:return vX;case w$:case x$:case S$:case O$:return gX;case k$:case E$:case A$:case T$:return{rule:"always",bar:"always",rect:"always",area:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case M$:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case R$:return{point:"always",geoshape:"always"};case I$:return{text:"always"}}}(t)[e]}var vX={area:"always",bar:"always",circle:"always",geoshape:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},gX=(vX.geoshape,S(vX,["geoshape"]));function mX(t){switch(t){case w$:case x$:case M$:case L$:case P$:case F$:case N$:case k$:case E$:return;case _$:case y$:case b$:case R$:case I$:case q$:case W$:return"discrete";case C$:case j$:case D$:return"flexible";case S$:case O$:case A$:case T$:case U$:case z$:case B$:return}throw new Error("rangeType not implemented for "+t)}var yX="Invalid spec",bX='Autosize "fit" only works for single views and layered views.',_X='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".';function wX(t){return'Cannot project a selection on encoding channel "'.concat(t,'", which has no field.')}function xX(t){return'The "nearest" transform is not supported for '.concat(t," marks.")}function kX(t){return"Selection not supported for ".concat(t," yet")}function EX(t){return'Cannot find a selection named "'.concat(t,'"')}var SX="Scale bindings are currently only supported for scales with unbinned, continuous domains.",OX="Selections bound to scales cannot be separately initialized.";function AX(t){return'Unknown repeated value "'.concat(t,'".')}function TX(t){return'The "columns" property cannot be used when "'.concat(t,'" has nested row/column.')}var CX="Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).",jX="Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function DX(t){return'Unrecognized parse "'.concat(t,'".')}function RX(t,e,n){return'An ancestor parsed field "'.concat(t,'" as ').concat(n," but a child wants to parse the field as ").concat(e,".")}function MX(t){return"Ignoring an invalid transform: ".concat(pV(t),".")}var PX='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function FX(t){return"Layer's shared ".concat(t.join(",")," channel ").concat(1===t.length?"is":"are"," overriden")}function NX(t){var e=t.parentProjection,n=t.projection;return"Layer's shared projection ".concat(pV(e)," is overridden by a child projection ").concat(pV(n),".")}function LX(t,e,n){return"Channel ".concat(t," is a ").concat(e,". Converted to {value: ").concat(pV(n),"}.")}function IX(t){return'Invalid field type "'.concat(t,'"')}function BX(t,e,n){var r=n.scaleType?"".concat(n.scaleType," scale"):n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero";return"A ".concat(r," is used to encode ").concat(t,"'s ").concat(e,". This can be misleading as the ").concat("x"===e?"width":"height"," of the ").concat(t," can be arbitrary based on the scale domain. You may want to use point mark instead.")}function UX(t,e){return'Invalid field type "'.concat(t,'" for aggregate: "').concat(e,'", using "quantitative" instead.')}function zX(t){return'Invalid aggregation operator "'.concat(t,'"')}function qX(t,e){return'Missing type for channel "'.concat(t,'", using "').concat(e,'" instead.')}function WX(t,e){var n=e.fill,r=e.stroke;return"Dropping color ".concat(t," as the plot also has ")+(n&&r?"fill and stroke":n?"fill":"stroke")}function HX(t,e){return"Dropping ".concat(pV(t),' from channel "').concat(e,'" since it does not contain data field or value.')}function GX(t,e,n){return"".concat(t,"-encoding with type ").concat(e," is deprecated. Replacing with ").concat(n,"-encoding.")}var YX="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function VX(t,e,n){return"".concat(t,' dropped as it is incompatible with "').concat(e,'"').concat(n?" when ".concat(n):"",".")}function $X(t){return"".concat(t,"-encoding is dropped as ").concat(t," is not a valid encoding channel.")}function XX(t){return"".concat(t," encoding should be discrete (ordinal / nominal / binned).")}function KX(t){return"Facet encoding dropped as ".concat(t.join(" and ")," ").concat(t.length>1?"are":"is"," also specified.")}function JX(t,e){return'Using discrete channel "'.concat(t,'" to encode "').concat(e,'" field can be misleading as it does not encode ').concat("ordinal"===e?"order":"magnitude",".")}var ZX="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.";function QX(t,e){return"Line mark is for continuous lines and thus cannot be used with ".concat(t&&e?"x2 and y2":t?"x2":"y2",". We will use the rule mark (line segments) instead.")}function tK(t,e){return'Specified orient "'.concat(t,'" overridden with "').concat(e,'"')}var eK="custom domain scale cannot be unioned with default field-based domain";function nK(t){return'Cannot use the scale property "'.concat(t,'" with non-color channel.')}function rK(t){return"Using unaggregated domain with raw field has no effect (".concat(pV(t),").")}function iK(t){return'Unaggregated domain not applicable for "'.concat(t,'" since it produces values outside the origin domain of the source data.')}function aK(t){return"Unaggregated domain is currently unsupported for log scale (".concat(pV(t),").")}function oK(t){return'Cannot apply size to non-oriented mark "'.concat(t,'".')}function sK(t){return'rangeStep for "'.concat(t,'" is dropped as top-level ').concat("x"===t?"width":"height"," is provided.")}function uK(t,e,n){return'Channel "'.concat(t,'" does not work with "').concat(e,'" scale. We are using "').concat(n,'" scale instead.')}function cK(t,e){return'FieldDef does not work with "'.concat(t,'" scale. We are using "').concat(e,'" scale instead.')}function lK(t,e,n){return"".concat(n,"-scale's \"").concat(e,'" is dropped as it does not work with ').concat(t," scale.")}function fK(t,e){return'Scale type "'.concat(e,'" does not work with mark "').concat(t,'".')}function hK(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(pV(n)," and ").concat(pV(r),").  Using ").concat(pV(n),".")}function dK(t,e,n,r){return"Conflicting ".concat(e.toString(),' property "').concat(t.toString(),'" (').concat(pV(n)," and ").concat(pV(r),").  Using the union of the two domains.")}function pK(t){return'Setting the scale to be independent for "'.concat(t,'" means we also have to set the guide (axis or legend) to be independent.')}function vK(t){return"Dropping sort property ".concat(pV(t)," as unioned domains only support boolean or op 'count'.")}var gK="Unable to merge domains",mK="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",yK="Invalid channel for axis.";function bK(t){return'Cannot stack "'.concat(t,'" if there is already "').concat(t,'2"')}function _K(t){return"Cannot stack non-linear scale (".concat(t,")")}function wK(t){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(t,'")')}function xK(t,e){return"Invalid ".concat(t,": ").concat(pV(e))}function kK(t){return'Time unit "'.concat(t,'" is not supported. We are replacing it with ').concat(t.replace("day","date"),".")}function EK(t){return"Dropping day from datetime ".concat(pV(t)," as day cannot be combined with other units.")}function SK(t,e){return"".concat(e?"extent ":"").concat(e&&t?"and ":"").concat(t?"center ":"").concat(e&&t?"are ":"is ","not needed when data are aggregated.")}function OK(t,e,n){return"".concat(t," is not usually used with ").concat(e," for ").concat(n,".")}function AK(t,e){return"Continuous axis should not have customized aggregation function ".concat(t,"; ").concat(e," already agregates the axis.")}function TK(t,e){return"Center is not needed to be specified in ".concat(e," when extent is ").concat(t,".")}function CK(t){return"1D error band does not support ".concat(t)}function jK(t){return"Channel ".concat(t,' is required for "binned" bin')}function DK(t){return"Domain for ".concat(t," is required for threshold scale")}var RK=v,MK=function(t,e){var n=t||0;return{level:function(t){return arguments.length?(n=+t,this):n},error:function(){return n>=1&&$Y(e||"error","ERROR",arguments),this},warn:function(){return n>=2&&$Y(e||"warn","WARN",arguments),this},info:function(){return n>=3&&$Y(e||"log","INFO",arguments),this},debug:function(){return n>=4&&$Y(e||"log","DEBUG",arguments),this}}}(2),PK=MK;function FK(){return PK=MK}function NK(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];PK.warn.apply(PK,arguments)}var LK=2006;function IK(t){return!!t&&(!!t.year||!!t.quarter||!!t.month||!!t.date||!!t.day||!!t.hours||!!t.minutes||!!t.seconds||!!t.milliseconds)}var BK,UK=["january","february","march","april","may","june","july","august","september","october","november","december"],zK=UK.map((function(t){return t.substr(0,3)})),qK=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],WK=qK.map((function(t){return t.substr(0,3)}));function HK(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(e&&void 0!==t.day&&AV(t).length>1&&(NK(RK.droppedDay(t)),delete(t=fV(t)).day),void 0!==t.year?r.push(t.year):void 0!==t.day?r.push(LK):r.push(0),void 0!==t.month){var i=e?function(t){if(ZY(t))return(t-1).toString();var e=t.toLowerCase(),n=UK.indexOf(e);if(-1!==n)return n+"";var r=e.substr(0,3),i=zK.indexOf(r);if(-1!==i)return i+"";throw new Error(RK.invalidTimeUnit("month",t))}(t.month):t.month;r.push(i)}else if(void 0!==t.quarter){var a=e?function(t){if(ZY(t))return t>4&&NK(RK.invalidTimeUnit("quarter",t)),(t-1).toString();throw new Error(RK.invalidTimeUnit("quarter",t))}(t.quarter):t.quarter;r.push(a+"*3")}else r.push(0);if(void 0!==t.date)r.push(t.date);else if(void 0!==t.day){var o=e?function(t){if(ZY(t))return t%7+"";var e=t.toLowerCase(),n=qK.indexOf(e);if(-1!==n)return n+"";var r=e.substr(0,3),i=WK.indexOf(r);if(-1!==i)return i+"";throw new Error(RK.invalidTimeUnit("day",t))}(t.day):t.day;r.push(o+"+1")}else r.push(1);for(var s=0,u=["hours","minutes","seconds","milliseconds"];s<u.length;s++){var c=u[s];void 0!==t[c]?r.push(t[c]):r.push(0)}var l=r.join(", ");return n?t.utc?new Function("return new Date(Date.UTC(".concat(l,"))"))().toJSON():new Function("return new Date(".concat(l,")"))().toJSON():t.utc?"utc(".concat(l,")"):"datetime(".concat(l,")")}function GK(t){return!!t.row||!!t.column}function YK(t){return void 0!==t.facet}!function(t){t.YEAR="year",t.MONTH="month",t.DAY="day",t.DATE="date",t.HOURS="hours",t.MINUTES="minutes",t.SECONDS="seconds",t.MILLISECONDS="milliseconds",t.YEARMONTH="yearmonth",t.YEARMONTHDATE="yearmonthdate",t.YEARMONTHDATEHOURS="yearmonthdatehours",t.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",t.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",t.MONTHDATE="monthdate",t.MONTHDATEHOURS="monthdatehours",t.HOURSMINUTES="hoursminutes",t.HOURSMINUTESSECONDS="hoursminutesseconds",t.MINUTESSECONDS="minutesseconds",t.SECONDSMILLISECONDS="secondsmilliseconds",t.QUARTER="quarter",t.YEARQUARTER="yearquarter",t.QUARTERMONTH="quartermonth",t.YEARQUARTERMONTH="yearquartermonth",t.UTCYEAR="utcyear",t.UTCMONTH="utcmonth",t.UTCDAY="utcday",t.UTCDATE="utcdate",t.UTCHOURS="utchours",t.UTCMINUTES="utcminutes",t.UTCSECONDS="utcseconds",t.UTCMILLISECONDS="utcmilliseconds",t.UTCYEARMONTH="utcyearmonth",t.UTCYEARMONTHDATE="utcyearmonthdate",t.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",t.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",t.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",t.UTCMONTHDATE="utcmonthdate",t.UTCMONTHDATEHOURS="utcmonthdatehours",t.UTCHOURSMINUTES="utchoursminutes",t.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",t.UTCMINUTESSECONDS="utcminutesseconds",t.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",t.UTCQUARTER="utcquarter",t.UTCYEARQUARTER="utcyearquarter",t.UTCQUARTERMONTH="utcquartermonth",t.UTCYEARQUARTERMONTH="utcyearquartermonth"}(BK||(BK={}));var VK={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},$K=AV(VK);var XK={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};var KK={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},JK=Object.assign({},XK,KK);function ZK(t){return!!JK[t]}var QK=Object.assign({},VK,XK,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},KK);AV(QK);function tJ(t,e){var n=t.indexOf(e);return n>-1&&(e!==BK.SECONDS||0===n||"i"!==t.charAt(n-1))}function eJ(t,e){var n=PV(e),r=ZK(t)?"utc":"";return HK($K.reduce((function(e,i){var a;return tJ(t,i)&&(e[i]=(a=i)===BK.QUARTER?"(".concat(r,"quarter(").concat(n,")-1)"):"".concat(r).concat(a,"(").concat(n,")")),e}),{}))}function nJ(t,e){if(t){var n=[],r=tJ(t,BK.YEAR);tJ(t,BK.MONTH)&&n.push(!1!==e?"%b":"%B"),tJ(t,BK.DAY)?n.push(e?"%a":"%A"):tJ(t,BK.DATE)&&n.push("%d"+(r?",":"")),r&&n.push(e?"%y":"%Y");var i=[];tJ(t,BK.HOURS)&&i.push("%H"),tJ(t,BK.MINUTES)&&i.push("%M"),tJ(t,BK.SECONDS)&&i.push("%S"),tJ(t,BK.MILLISECONDS)&&i.push("%L");var a=[];return n.length>0&&a.push(n.join(" ")),i.length>0&&a.push(i.join(":")),a}}function rJ(t){return"day"!==t&&t.indexOf("day")>=0?(NK(RK.dayReplacedWithDate(t)),t.replace("day","date")):t}var iJ={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};var aJ="quantitative",oJ="ordinal",sJ="temporal",uJ="nominal",cJ="geojson";function lJ(t){var e=t.field,n=t.timeUnit,r=t.bin,i=t.aggregate;return Object.assign({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:e})}function fJ(t){return!!t&&!!t.condition}function hJ(t){return!!t&&!!t.condition&&!qY(t.condition)&&dJ(t.condition)}function dJ(t){return!!t&&(!!t.field||"count"===t.aggregate)}function pJ(t){return!!t&&(!!t.field&&!!t.type||"count"===t.aggregate)}function vJ(t){return dJ(t)&&HY(t.field)}function gJ(t){return t&&"value"in t&&void 0!==t.value}function mJ(t){return!!t&&(!!t.scale||!!t.sort)}function yJ(t){return!!t&&!!t.format}function bJ(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.field,i=n.prefix,a=n.suffix,o="";if(function(t){return"count"===t.aggregate}(t))r=function(t){return 0===t.indexOf("__")}(e="count")?e:"__".concat(e);else{var s;if(!n.nofn)if(function(t){return!!t.op}(t))s=t.op;else{var u=t.bin,c=t.aggregate,l=t.timeUnit;UJ(u)?(s=BJ(u),a=(n.binSuffix||"")+(n.suffix||"")):c?h$(c)?(o=".".concat(r),r="argmax_".concat(c.argmax)):f$(c)?(o=".".concat(r),r="argmin_".concat(c.argmin)):s=String(c):l&&(s=String(l))}s&&(r=r?"".concat(s,"_").concat(r):s)}return a&&(r="".concat(r,"_").concat(a)),i&&(r="".concat(i,"_").concat(r)),n.forAs?r:n.expr?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(e,"[").concat(GY(zY(t).join(".")),"]")}(r,n.expr)+o:FV(r)+o}function _J(t){return!function(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!t.bin;case"temporal":return!1}throw new Error(RK.invalidFieldType(t.type))}(t)}function wJ(t,e){var n=t.field,r=t.bin,i=t.timeUnit,a=t.aggregate;if("count"===a)return e.countTitle;if(UJ(r))return"".concat(n," (binned)");if(i){var o=function(t){return $K.reduce((function(e,n){return tJ(t,n)?[].concat(Object(id.a)(e),[n]):e}),[])}(i).join("-");return"".concat(n," (").concat(o,")")}return a?h$(a)?"".concat(n," for max ").concat(a.argmax):f$(a)?"".concat(n," for min ").concat(a.argmin):"".concat(MV(a)," of ").concat(n):n}var xJ=function(t,e){switch(e.fieldTitle){case"plain":return t.field;case"functional":return function(t){var e=t.aggregate,n=t.bin,r=t.timeUnit,i=t.field;if(h$(e))return"".concat(i," for argmax(").concat(e.argmax,")");if(f$(e))return"".concat(i," for argmin(").concat(e.argmin,")");var a=e||r||UJ(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}(t);default:return wJ(t,e)}},kJ=xJ;function EJ(t){kJ=t}function SJ(t,e,n){var r=n.allowDisabling,i=n.includeDefault,a=void 0===i||i,o=(OJ(t)||{}).title,s=a?AJ(t,e):void 0;return r?IV(o,t.title,s):o||t.title||s}function OJ(t){return(e=t)&&(e.axis||e.stack||e.impute)&&t.axis?t.axis:function(t){return!!t&&!!t.legend}(t)&&t.legend?t.legend:function(t){return!!t&&!!t.header}(t)&&t.header?t.header:void 0;var e}function AJ(t,e){return kJ(t,e)}function TJ(t){return yJ(t)&&t.format?t.format:(OJ(t)||{}).format}function CJ(t){return dJ(t)?t:hJ(t)?t.condition:void 0}function jJ(t){return dJ(t)?t:hJ(t)?t.condition:void 0}function DJ(t,e){if(HY(t)||ZY(t)||JY(t)){var n=HY(t)?"string":ZY(t)?"number":"boolean";return NK(RK.primitiveChannelDef(e,n,t)),{value:t}}return dJ(t)?RJ(t,e):hJ(t)?Object.assign({},t,{condition:RJ(t.condition,e)}):t}function RJ(t,e){var n=t,r=n.aggregate,i=n.timeUnit,a=n.bin;if(r&&!d$(r)&&!h$(r)&&!f$(r)){t.aggregate;var o=S(t,["aggregate"]);NK(RK.invalidAggregate(r)),t=o}if(i&&(t=Object.assign({},t,{timeUnit:rJ(i)})),UJ(a)&&(t=Object.assign({},t,{bin:MJ(a,e)})),zJ(a)&&!mV(uX,e)&&NK("Channel ".concat(e,' should not be used with "binned" bin')),pJ(t)){var s=t.type,u=function(t){if(t)switch(t=t.toLowerCase()){case"q":case aJ:return"quantitative";case"t":case sJ:return"temporal";case"o":case oJ:return"ordinal";case"n":case uJ:return"nominal";case cJ:return"geojson"}}(s);s!==u&&(t=Object.assign({},t,{type:u})),"quantitative"!==s&&v$(r)&&(NK(RK.invalidFieldTypeForCountAggregate(s,r)),t=Object.assign({},t,{type:"quantitative"}))}else if(!rX(e)){var c=function(t,e){if(t.timeUnit)return"temporal";if(UJ(t.bin))return"quantitative";switch(mX(e)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(t,e);NK(RK.missingFieldType(e,c)),t=Object.assign({},t,{type:c})}if(pJ(t)){var l=function(t,e){var n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:"Channel ".concat(e," should not be used with a geojson data.")};switch(e){case"row":case"column":case"facet":return _J(t)?{compatible:!1,warning:RK.facetChannelShouldBeDiscrete(e)}:PJ;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return PJ;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==aJ?{compatible:!1,warning:"Channel ".concat(e," should be used with a quantitative field only, not ").concat(t.type," field.")}:PJ;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return"nominal"!==n||t.sort?PJ:{compatible:!1,warning:"Channel ".concat(e," should not be used with an unsorted discrete field.")};case"shape":return mV(["ordinal","nominal","geojson"],t.type)?PJ:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==t.type||"sort"in t?PJ:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}throw new Error("channelCompatability not implemented for channel "+e)}(t,e),f=l.compatible,h=l.warning;f||NK(h)}return Object.assign({},t,void 0!==t.field?{field:"".concat(t.field)}:{})}function MJ(t,e){return JY(t)?{maxbins:WJ(e)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:Object.assign({},t,{maxbins:WJ(e)})}var PJ={compatible:!0};function FJ(t){var e=OJ(t),n=e&&e.formatType||yJ(t)&&t.formatType;return"time"===n||!n&&function(t){return"temporal"===t.type||!!t.timeUnit}(t)}function NJ(t,e){var n,r,i=e.timeUnit,a=e.type,o=e.time,s=e.undefinedIfExprNotRequired;return IK(t)?n=HK(t,!0):(HY(t)||ZY(t))&&(i||"temporal"===a)&&(n=function(t){return!!VK[t]}(i)?HK(Object(fp.a)({},i,t),!0):function(t){return!!XK[t]}(i)?NJ(t,{timeUnit:(r=i,r.substr(3))}):"datetime(".concat(JSON.stringify(t),")")),n?o?"time(".concat(n,")"):n:s?void 0:JSON.stringify(t)}function LJ(t,e){var n=t.timeUnit,r=t.type;return e.map((function(t){var e=NJ(t,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return void 0!==e?{signal:e}:t}))}function IJ(t,e){return UJ(t.bin)?dX(e)&&mV(["ordinal","nominal"],t.type):(console.warn("Only use this method with binned field defs"),!1)}function BJ(t){return JY(t)&&(t=MJ(t,void 0)),"bin"+AV(t).map((function(e){return jV("_".concat(e,"_").concat(t[e]))})).join("")}function UJ(t){return!0===t||qJ(t)&&!t.binned}function zJ(t){return"binned"===t||qJ(t)&&t.binned}function qJ(t){return WY(t)}function WJ(t){switch(t){case y$:case b$:case M$:case C$:case j$:case D$:case L$:case P$:case F$:case N$:case R$:return 6;default:return 10}}function HJ(t,e){var n=t&&t[e];return!!n&&(qY(n)?yV(n,(function(t){return!!t.field})):dJ(n)||hJ(n))}function GJ(t){return yV(Z$,(function(e){if(HJ(t,e)){var n=t[e];if(qY(n))return yV(n,(function(t){return!!t.aggregate}));var r=CJ(n);return r&&!!r.aggregate}return!1}))}function YJ(t,e){var n=[],r=[],i=[],a=[],o={};return XJ(t,(function(s,u){if(dJ(s)){var c=s.field,l=s.aggregate,f=s.timeUnit,h=s.bin,d=S(s,["field","aggregate","timeUnit","bin"]);if(l||f||h){var p,v=OJ(s),g=v&&v.title,m=bJ(s,{forAs:!0}),y=Object.assign({},g?[]:{title:SJ(s,e,{allowDisabling:!0})},d,{field:m}),b="x"===u||"y"===u;if(l){if(h$(l)?(p="argmax",m=bJ({aggregate:"argmax",field:l.argmax},{forAs:!0}),y.field="".concat(m,".").concat(c)):f$(l)?(p="argmin",m=bJ({aggregate:"argmin",field:l.argmin},{forAs:!0}),y.field="".concat(m,".").concat(c)):"boxplot"!==l&&"errorbar"!==l&&"errorband"!==l&&(p=l),p){var _={op:p,as:m};c&&(_.field=c),a.push(_)}}else if(n.push(m),pJ(s)&&UJ(h)){if(r.push({bin:h,field:c,as:m}),n.push(bJ(s,{binSuffix:"end"})),IJ(s,u)&&n.push(bJ(s,{binSuffix:"range"})),b){var w={field:m+"_end"};o[u+"2"]=w}y.bin="binned",rX(u)||(y.type="quantitative")}else if(f){i.push({timeUnit:f,field:c,as:m});var x=nJ(f,e.axis.shortTimeLabels).join(" "),k=pJ(s)&&s.type!==sJ&&"time";"text"===u||"tooltip"===u?(y.format=y.format||x,k&&(y.formatType=k)):!function(t){return!!aX[t]}(u)?b&&(y.axis=Object.assign({format:x},k?{formatType:k}:{},y.axis)):y.legend=Object.assign({format:x},k?{formatType:k}:{},y.legend)}o[u]=y}else n.push(c),o[u]=t[u]}else o[u]=t[u]})),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:o}}function VJ(t,e){return AV(t).reduce((function(n,r){if(!eX(r))return NK(RK.invalidEncodingChannel(r)),n;if(!function(t,e,n){var r=pX(e,n);if(!r)return!1;if("binned"===r){var i=t["x2"===e?"x":"y"];return!!(dJ(i)&&dJ(t[e])&&zJ(i.bin))}return!0}(t,r,e))return NK(RK.incompatibleChannel(r,e)),n;if("size"===r&&"line"===e){var i=jJ(t[r]);if(i&&i.aggregate)return NK(RK.LINE_WITH_VARYING_SIZE),n}if("color"===r&&("fill"in t||"stroke"in t))return NK(RK.droppingColor("encoding",{fill:"fill"in t,stroke:"stroke"in t})),n;var a=t[r];if("detail"===r||"order"===r&&!qY(a)&&!gJ(a)||"tooltip"===r&&qY(a))a&&(n[r]=(qY(a)?a:[a]).reduce((function(t,e){return dJ(e)?t.push(RJ(e,r)):NK(RK.emptyFieldDef(e,r)),t}),[]));else{if("tooltip"===r&&null===a)n[r]=null;else if(!dJ(a)&&!gJ(a)&&!fJ(a))return NK(RK.emptyFieldDef(a,r)),n;n[r]=DJ(a,r)}return n}),{})}function $J(t){var e=[],n=!0,r=!1,i=void 0;try{for(var a,o=AV(t)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(HJ(t,s)){var u=t[s];(qY(u)?u:[u]).forEach((function(t){dJ(t)?e.push(t):hJ(t)&&e.push(t.condition)}))}}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}function XJ(t,e,n){if(t){var r=!0,i=!1,a=void 0;try{for(var o,s=function(){var r=o.value,i=t[r];qY(i)?i.forEach((function(t){e.call(n,t,r)})):e.call(n,i,r)},u=AV(t)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}}function KJ(t,e,n,r){return t?AV(t).reduce((function(n,i){var a=t[i];return qY(a)?a.reduce((function(t,n){return e.call(r,t,n,i)}),n):e.call(r,n,a,i)}),n):n}function JJ(t,e){return AV(e).reduce((function(n,r){switch(r){case"x":case"y":case"href":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return n;case"order":if("line"===t||"trail"===t)return n;case"detail":case"key":var i=e[r];return(qY(i)||dJ(i))&&(qY(i)?i:[i]).forEach((function(t){t.aggregate||n.push(bJ(t,{}))})),n;case"size":if("trail"===t)return n;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":var a=jJ(e[r]);return a&&!a.aggregate&&n.push(bJ(a,{})),n}}),[])}function ZJ(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var i=t.map((function(t){var n=t.fieldPrefix,i=t.titlePrefix;return{field:n+e.field,type:e.type,title:i+(r?" of "+e.field:"")}}));return{tooltip:[].concat(Object(id.a)(i),Object(id.a)($J(n)))}}function QJ(t,e,n,r,i){var a=n.scale,o=n.axis;return function(s){var u=s.partName,c=s.mark,l=s.positionPrefix,f=s.endPositionPrefix,h=void 0===f?void 0:f,d=s.extraEncoding,p=void 0===d?{}:d,v=o&&void 0!==o.title?void 0:void 0!==n.title?n.title:n.field;return tZ(t,u,i,{mark:c,encoding:Object.assign(Object(fp.a)({},e,Object.assign({field:l+"_"+n.field,type:n.type},v?{title:v}:{},a?{scale:a}:{},o?{axis:o}:{})),HY(h)?Object(fp.a)({},e+"2",{field:h+"_"+n.field,type:n.type}):{},r,p)})}}function tZ(t,e,n,r){var i=t.clip,a=t.color,o=t.opacity,s=t.type;return t[e]||void 0===t[e]&&n[e]?[Object.assign({},r,{mark:Object.assign({},n[e],i?{clip:i}:{},a?{color:a}:{},o?{opacity:o}:{},r$(r.mark)?r.mark:{type:r.mark},{style:"".concat(s,"-").concat(e)},JY(t[e])?{}:t[e])})]:[]}function eZ(t,e,n){var r=t.encoding,i="vertical"===e?"y":"x",a=r[i],o=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:nZ(a,n),continuousAxisChannelDef2:nZ(o,n),continuousAxisChannelDefError:nZ(s,n),continuousAxisChannelDefError2:nZ(u,n),continuousAxis:i}}function nZ(t,e){if(t&&t.aggregate){var n=t.aggregate,r=S(t,["aggregate"]);return n!==e&&NK(RK.errorBarContinuousAxisHasCustomizedAggregate(n,e)),r}return t}function rZ(t,e){var n=t.mark,r=t.encoding;if(dJ(r.x)&&_J(r.x)){if(dJ(r.y)&&_J(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===e)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===e)return"horizontal";if(r.x.aggregate===e&&r.y.aggregate===e)throw new Error("Both x and y cannot have aggregate");return r$(n)&&n.orient?n.orient:"vertical"}return"horizontal"}if(dJ(r.y)&&_J(r.y))return"vertical";throw new Error("Need a valid continuous axis for "+e+"s")}var iZ="boxplot",aZ=AV({box:1,median:1,outliers:1,rule:1,ticks:1}),oZ=new c$(iZ,uZ);function sZ(t){return ZY(t)?"tukey":t}function uZ(t,e){var n=e.config,r=t.mark,i=(t.encoding,t.selection),a=(t.projection,S(t,["mark","encoding","selection","projection"])),o=r$(r)?r:{type:r};i&&NK(RK.selectionNotSupported("boxplot"));var s,u=o.extent||n.boxplot.extent,c=IV(o.size,n.boxplot.size),l=sZ(u),f=function(t,e,n){var r=rZ(t,iZ),i=eZ(t,r,iZ),a=i.continuousAxisChannelDef,o=i.continuousAxis,s=a.field,u=sZ(e),c=[].concat(Object(id.a)(cZ(s)),[{op:"median",field:s,as:"mid_box_"+s},{op:"min",field:s,as:("min-max"===u?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===u?"upper_whisker_":"max_")+s}]),l="min-max"===u||"tukey"===u?[]:[{calculate:'datum["upper_box_'.concat(s,'"] - datum["lower_box_').concat(s,'"]'),as:"iqr_"+s},{calculate:'min(datum["upper_box_'.concat(s,'"] + datum["iqr_').concat(s,'"] * ').concat(e,', datum["max_').concat(s,'"])'),as:"upper_whisker_"+s},{calculate:'max(datum["lower_box_'.concat(s,'"] - datum["iqr_').concat(s,'"] * ').concat(e,', datum["min_').concat(s,'"])'),as:"lower_whisker_"+s}],f=t.encoding,h=o,d=(f[h],function(t){var e,n,r=t.tooltip,i=S(t,["tooltip"]);return r?(qY(r)?(r.forEach((function(t){t.aggregate?(e||(e=[]),e.push(t)):(n||(n=[]),n.push(t))})),e&&(i.tooltip=e)):r.aggregate?i.tooltip=r:n=r,qY(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:i}):{filteredEncoding:t}}(S(f,["symbol"===typeof h?h:h+""]))),p=d.customTooltipWithoutAggregatedField,v=YJ(d.filteredEncoding,n),g=v.bins,m=v.timeUnits,y=v.aggregate,b=v.groupby,_=v.encoding,w="vertical"===r?"horizontal":"vertical";return{transform:[].concat(Object(id.a)(g),Object(id.a)(m),[{aggregate:[].concat(Object(id.a)(y),Object(id.a)(c)),groupby:b}],l),groupby:b,aggregate:y,continuousAxisChannelDef:a,continuousAxis:o,encodingWithoutContinuousAxis:_,ticksOrient:w,customTooltipWithoutAggregatedField:p}}(t,u,n),h=f.transform,d=f.continuousAxisChannelDef,p=f.continuousAxis,v=f.groupby,g=f.aggregate,m=f.encodingWithoutContinuousAxis,y=f.ticksOrient,b=f.customTooltipWithoutAggregatedField,_=(m.color,m.size),w=S(m,["color","size"]),x=function(t){return QJ(o,p,d,t,n.boxplot)},k=x(w),E=x(m),O=x(Object.assign({},w,_?{size:_}:{})),A=ZJ([{fieldPrefix:"min-max"===l?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===l?"lower_whisker_":"min_",titlePrefix:"Min"}],d,m),T={type:"tick",color:"black",opacity:1,orient:y},C="min-max"===l?A:ZJ([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],d,m),j=[].concat(Object(id.a)(k({partName:"rule",mark:"rule",positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:C})),Object(id.a)(k({partName:"rule",mark:"rule",positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:C})),Object(id.a)(k({partName:"ticks",mark:T,positionPrefix:"lower_whisker",extraEncoding:C})),Object(id.a)(k({partName:"ticks",mark:T,positionPrefix:"upper_whisker",extraEncoding:C}))),D=[].concat(Object(id.a)("tukey"!==l?j:[]),Object(id.a)(E({partName:"box",mark:Object.assign({type:"bar"},c?{size:c}:{}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:A})),Object(id.a)(O({partName:"median",mark:Object.assign({type:"tick"},WY(n.boxplot.median)&&n.boxplot.median.color?{color:n.boxplot.median.color}:{},c?{size:c}:{},{orient:y}),positionPrefix:"mid_box",extraEncoding:A})));if("min-max"!==l){var R='datum["lower_box_'.concat(d.field,'"]'),M='datum["upper_box_'.concat(d.field,'"]'),P="(".concat(M," - ").concat(R,")"),F="".concat(R," - ").concat(u," * ").concat(P),N="".concat(M," + ").concat(u," * ").concat(P),L='datum["'.concat(d.field,'"]'),I={joinaggregate:cZ(d.field),groupby:v},B=void 0;"tukey"===l&&(B={transform:[{filter:"(".concat(F," <= ").concat(L,") && (").concat(L," <= ").concat(N,")")},{aggregate:[{op:"min",field:d.field,as:"lower_whisker_"+d.field},{op:"max",field:d.field,as:"upper_whisker_"+d.field},{op:"min",field:"lower_box_"+d.field,as:"lower_box_"+d.field},{op:"max",field:"upper_box_"+d.field,as:"upper_box_"+d.field}].concat(Object(id.a)(g)),groupby:v}],layer:j});w.tooltip;var U=S(w,["tooltip"]),z=tZ(o,"outliers",n.boxplot,{transform:[{filter:"(".concat(L," < ").concat(F,") || (").concat(L," > ").concat(N,")")}],mark:"point",encoding:Object.assign(Object(fp.a)({},p,{field:d.field,type:d.type}),U,b?{tooltip:b}:{})})[0];z&&B?s={transform:[I],layer:[z,B]}:z?(s=z).transform.unshift(I):B&&(s=B).transform.unshift(I)}return s?Object.assign({},a,{layer:[].concat(Object(id.a)(s?[s]:[]),[{transform:h,layer:D}])}):Object.assign({},a,{transform:(a.transform||[]).concat(h),layer:D})}function cZ(t){return[{op:"q1",field:t,as:"lower_box_"+t},{op:"q3",field:t,as:"upper_box_"+t}]}var lZ="errorbar",fZ=AV({ticks:1,rule:1}),hZ=new c$(lZ,dZ);function dZ(t,e){var n=e.config,r=vZ(t,lZ,n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,s=r.encodingWithoutContinuousAxis,u=r.ticksOrient,c=r.markDef,l=r.outerSpec,f=r.tooltipEncoding,h=QJ(c,o,a,s,n.errorbar),d={type:"tick",orient:u};return Object.assign({},l,{transform:i,layer:[].concat(Object(id.a)(h({partName:"ticks",mark:d,positionPrefix:"lower",extraEncoding:f})),Object(id.a)(h({partName:"ticks",mark:d,positionPrefix:"upper",extraEncoding:f})),Object(id.a)(h({partName:"rule",mark:"rule",positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})))})}function pZ(t,e){var n=t.encoding;if(function(t){return(dJ(t.x)||dJ(t.y))&&!dJ(t.x2)&&!dJ(t.y2)&&!dJ(t.xError)&&!dJ(t.xError2)&&!dJ(t.yError)&&!dJ(t.yError2)}(n))return{orient:rZ(t,e),inputType:"raw"};var r=function(t){return dJ(t.x2)||dJ(t.y2)}(n),i=function(t){return dJ(t.xError)||dJ(t.xError2)||dJ(t.yError)||dJ(t.yError2)}(n),a=n.x,o=n.y;if(r){if(i)throw new Error(e+" cannot be both type aggregated-upper-lower and aggregated-error");var s=n.x2,u=n.y2;if(dJ(s)&&dJ(u))throw new Error(e+" cannot have both x2 and y2");if(dJ(s)){if(dJ(a)&&_J(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+e)}if(dJ(u)){if(dJ(o)&&_J(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+e)}throw new Error("No ranged axis")}var c=n.xError,l=n.xError2,f=n.yError,h=n.yError2;if(dJ(l)&&!dJ(c))throw new Error(e+" cannot have xError2 without xError");if(dJ(h)&&!dJ(f))throw new Error(e+" cannot have yError2 without yError");if(dJ(c)&&dJ(f))throw new Error(e+" cannot have both xError and yError with both are quantiative");if(dJ(c)){if(dJ(a)&&_J(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(dJ(f)){if(dJ(o)&&_J(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function vZ(t,e,n){var r=t.mark,i=t.encoding,a=t.selection,o=(t.projection,S(t,["mark","encoding","selection","projection"])),s=r$(r)?r:{type:r};a&&NK(RK.selectionNotSupported(e));var u=pZ(t,e),c=u.orient,l=u.inputType,f=eZ(t,c,e),h=f.continuousAxisChannelDef,d=f.continuousAxisChannelDef2,p=f.continuousAxisChannelDefError,v=f.continuousAxisChannelDefError2,g=f.continuousAxis,m=function(t,e,n,r,i,a,o,s){var u,c=[],l=[],f=e.field,h=!1;if("raw"===a){var d,p,v,g=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":s.errorbar.center,m=t.extent?t.extent:"mean"===g?"stderr":"iqr";if("median"===g!==("iqr"===m)&&NK(RK.errorBarCenterIsUsedWithWrongExtent(g,m,o)),"stderr"===m||"stdev"===m)c=[{op:m,field:f,as:"extent_"+f},{op:g,field:f,as:"center_"+f}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],u=[{fieldPrefix:"center_",titlePrefix:MV(g)},{fieldPrefix:"upper_",titlePrefix:gZ(g,m,"+")},{fieldPrefix:"lower_",titlePrefix:gZ(g,m,"-")}],h=!0;else t.center&&t.extent&&NK(RK.errorBarCenterIsNotNeeded(t.extent,o)),"ci"===m?(d="mean",p="ci0",v="ci1"):(d="median",p="q1",v="q3"),c=[{op:p,field:f,as:"lower_"+f},{op:v,field:f,as:"upper_"+f},{op:d,field:f,as:"center_"+f}],u=[{fieldPrefix:"upper_",titlePrefix:SJ({field:f,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:SJ({field:f,aggregate:p,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:SJ({field:f,aggregate:d,type:"quantitative"},s,{allowDisabling:!1})}]}else{(t.center||t.extent)&&NK(RK.errorBarCenterAndExtentAreNotNeeded(t.center,t.extent)),"aggregated-upper-lower"===a?(u=[],l=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===a&&(u=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],i?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_"+f}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var y=!0,b=!1,_=void 0;try{for(var w,x=l[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;u.push({fieldPrefix:k.as.substring(0,6),titlePrefix:k.calculate.replace(new RegExp('datum\\[\\"',"g"),"").replace(new RegExp('\\"\\]',"g"),"")})}}catch(E){b=!0,_=E}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:u,tooltipTitleWithFieldName:h}}(s,h,d,p,v,l,e,n),y=m.errorBarSpecificAggregate,b=m.postAggregateCalculates,_=m.tooltipSummary,w=m.tooltipTitleWithFieldName,x=g,k=(i[x],"x"===g?"x2":"y2"),E=(i[k],"x"===g?"xError":"yError"),O=(i[E],"x"===g?"xError2":"yError2"),A=(i[O],YJ(S(i,["symbol"===typeof x?x:x+"","symbol"===typeof k?k:k+"","symbol"===typeof E?E:E+"","symbol"===typeof O?O:O+""]),n)),T=A.bins,C=A.timeUnits,j=A.aggregate,D=A.groupby,R=A.encoding,M=[].concat(Object(id.a)(j),Object(id.a)(y)),P="raw"!==l?[]:D,F=ZJ(_,h,R,w);return{transform:[].concat(Object(id.a)(o.transform||[]),Object(id.a)(T),Object(id.a)(C),Object(id.a)(M.length?[{aggregate:M,groupby:P}]:[]),Object(id.a)(b)),groupby:P,continuousAxisChannelDef:h,continuousAxis:g,encodingWithoutContinuousAxis:R,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:s,outerSpec:o,tooltipEncoding:F}}function gZ(t,e,n){return MV(t)+" "+n+" "+e}var mZ="errorband",yZ=AV({band:1,borders:1}),bZ=new c$(mZ,_Z);function _Z(t,e){var n=e.config,r=vZ(t,mZ,n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,s=r.encodingWithoutContinuousAxis,u=r.markDef,c=r.outerSpec,l=r.tooltipEncoding,f=u,h=QJ(f,o,a,s,n.errorband),d=void 0!==t.encoding.x&&void 0!==t.encoding.y,p={type:d?"area":"rect"},v={type:d?"line":"rule"},g=Object.assign({},f.interpolate?{interpolate:f.interpolate}:{},f.tension&&f.interpolate?{interpolate:f.tension}:{});return d?(p=Object.assign({},p,g),v=Object.assign({},v,g)):f.interpolate?NK(RK.errorBand1DNotSupport("interpolate")):f.tension&&NK(RK.errorBand1DNotSupport("tension")),Object.assign({},c,{transform:i,layer:[].concat(Object(id.a)(h({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})),Object(id.a)(h({partName:"borders",mark:v,positionPrefix:"lower",extraEncoding:l})),Object(id.a)(h({partName:"borders",mark:v,positionPrefix:"upper",extraEncoding:l})))})}var wZ={};function xZ(t,e,n){var r=new c$(t,e);wZ[t]={normalizer:r,parts:n}}xZ(iZ,uZ,aZ),xZ(lZ,dZ,fZ),xZ(mZ,_Z,yZ);var kZ,EZ=["shortTimeLabels"],SZ=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength"],OZ={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},AZ=Object.assign({},OZ,{opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,encode:1}),TZ=AV(OZ),CZ=AV(AZ);!function(t){t.LINEAR="linear",t.LOG="log",t.POW="pow",t.SQRT="sqrt",t.SYMLOG="symlog",t.TIME="time",t.UTC="utc",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.BIN_ORDINAL="bin-ordinal",t.ORDINAL="ordinal",t.POINT="point",t.BAND="band"}(kZ||(kZ={}));var jZ={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},DZ=AV(jZ);var RZ={linear:0,log:1,pow:1,sqrt:1,symlog:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function MZ(t){return RZ[t]}var PZ=["linear","log","pow","sqrt","symlog","time","utc"],FZ=QY(PZ),NZ=QY(["quantile","quantize","threshold"]),LZ=QY(PZ.concat(["quantile","quantize","threshold"])),IZ=QY(["ordinal","bin-ordinal","point","band"]);function BZ(t){return t in IZ}function UZ(t){return t in LZ}function zZ(t){return t in FZ}function qZ(t){return t in NZ}var WZ={textXRangeStep:90,rangeStep:20,pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function HZ(t){return t&&t.selection}var GZ={type:1,domain:1,align:1,range:1,rangeStep:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},YZ=(AV(GZ),S(GZ,["type","domain","range","rangeStep","scheme"])),VZ=AV(YZ);!function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,a=Z$[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=AV(iJ)[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=!0,p=!1,v=void 0;try{for(var g,m=DZ[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var y=g.value,b=ZZ(o,h);JZ(o,y)&&KZ(y,h)&&(t[b]=t[b]||[],t[b].push(y))}}catch(_){p=!0,v=_}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}}catch(_){u=!0,c=_}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}}catch(_){n=!0,r=_}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}();function $Z(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!mV(["point","band","identity"],t);case"bins":return!mV(["point","band","identity","ordinal"],t);case"round":return zZ(t)||"band"===t||"point"===t;case"padding":return zZ(t)||mV(["point","band"],t);case"paddingOuter":case"rangeStep":case"align":return mV(["point","band"],t);case"paddingInner":return"band"===t;case"clamp":return zZ(t);case"nice":return zZ(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return UZ(t)&&!mV(["log","time","utc","threshold","quantile"],t)}}function XZ(t,e){switch(e){case"interpolate":case"scheme":return $$(t)?void 0:RK.cannotUseScalePropertyWithNonColor(t);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}}function KZ(t,e){return mV([oJ,uJ],e)?void 0===t||BZ(t):e===sJ?mV([kZ.TIME,kZ.UTC,void 0],t):e!==aJ||mV([kZ.LOG,kZ.POW,kZ.SQRT,kZ.SYMLOG,kZ.QUANTILE,kZ.QUANTIZE,kZ.THRESHOLD,kZ.LINEAR,void 0],t)}function JZ(t,e){switch(t){case w$:case x$:return zZ(e)||mV(["band","point"],e);case M$:case L$:case P$:case F$:case N$:return zZ(e)||qZ(e)||mV(["band","point"],e);case C$:case j$:case D$:return"band"!==e;case R$:return"ordinal"===e}return!1}function ZZ(t,e){return t+"_"+e}var QZ="_vgsid_";function tQ(t){return"interval"===t.type}var eQ={single:{on:"click",fields:[QZ],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[QZ],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function nQ(t){return void 0!==t.concat}function rQ(t){return void 0!==t.vconcat}function iQ(t){return void 0!==t.hconcat}function aQ(t){return void 0!==t.repeat}var oQ=AV({align:1,bounds:1,center:1,columns:1,spacing:1});function sQ(t){var e=t.anchor,n=t.frame,r=t.offset,i=t.orient,a=t.color,o=S(t,["anchor","frame","offset","orient","color"]);return{mark:Object.assign({},o,a?{fill:a}:{}),nonMark:Object.assign({},e?{anchor:e}:{},n?{frame:n}:{},r?{offset:r}:{},i?{orient:i}:{})}}var uQ={padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",invalidValues:"filter",view:{width:200,height:200},mark:{color:"#4c78a8",tooltip:{content:"encoding"}},area:{},bar:o$,circle:{},geoshape:{},line:{},point:{},rect:s$,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:WZ,projection:{},axis:{},axisX:{},axisY:{},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:eQ,style:{},title:{},facet:{spacing:20},repeat:{spacing:20},concat:{spacing:20}};function cQ(t){return wV(fV(uQ),t)}var lQ=["view"].concat(Object(id.a)(n$)),fQ=["padding","facet","concat","repeat","numberFormat","timeFormat","countTitle","header","stack","scale","selection","invalidValues","overlay"],hQ=Object.assign({view:["width","height"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]});function dQ(t){t=fV(t);var e=!0,n=!1,r=void 0;try{for(var i,a=fQ[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){delete t[i.value]}}catch(et){n=!0,r=et}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}if(t.axis){var o=!0,s=!1,u=void 0;try{for(var c,l=EZ[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;delete t.axis[f]}}catch(et){s=!0,u=et}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}if(t.legend){var h=!0,d=!1,p=void 0;try{for(var v,g=EZ[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;delete t.legend[m]}}catch(et){d=!0,p=et}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}var y=!0,b=!1,_=void 0;try{for(var w,x=SZ[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;delete t.legend[k]}}catch(et){b=!0,_=et}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}if(t.mark){var E=!0,S=!1,O=void 0;try{for(var A,T=a$[Symbol.iterator]();!(E=(A=T.next()).done);E=!0){var C=A.value;delete t.mark[C]}}catch(et){S=!0,O=et}finally{try{E||null==T.return||T.return()}finally{if(S)throw O}}}var j=!0,D=!1,R=void 0;try{for(var M,P=lQ[Symbol.iterator]();!(j=(M=P.next()).done);j=!0){var F=M.value,N=!0,L=!1,I=void 0;try{for(var B,U=a$[Symbol.iterator]();!(N=(B=U.next()).done);N=!0){var z=B.value;delete t[F][z]}}catch(et){L=!0,I=et}finally{try{N||null==U.return||U.return()}finally{if(L)throw I}}var q=hQ[F];if(q){var W=!0,H=!1,G=void 0;try{for(var Y,V=q[Symbol.iterator]();!(W=(Y=V.next()).done);W=!0){var $=Y.value;delete t[F][$]}}catch(et){H=!0,G=et}finally{try{W||null==V.return||V.return()}finally{if(H)throw G}}}pQ(t,F)}}catch(et){D=!0,R=et}finally{try{j||null==P.return||P.return()}finally{if(D)throw R}}var X=!0,K=!1,J=void 0;try{for(var Z,Q=AV(wZ)[Symbol.iterator]();!(X=(Z=Q.next()).done);X=!0){delete t[Z.value]}}catch(et){K=!0,J=et}finally{try{X||null==Q.return||Q.return()}finally{if(K)throw J}}for(var tt in pQ(t,"title","group-title"),t)WY(t[tt])&&0===AV(t[tt]).length&&delete t[tt];return AV(t).length>0?t:void 0}function pQ(t,e,n,r){var i="title"===e?sQ(t.title).mark:r?t[e][r]:t[e];"view"===e&&(n="cell");var a=Object.assign({},i,t.style[e]);AV(a).length>0&&(t.style[n||e]=a),r||delete t[e]}var vQ=n(7),gQ=n(4);function mQ(t,e,n){return(mQ="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(gQ.a)(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var yQ=n(8);function bQ(t){return void 0!==t.layer}var _Q=function(){function t(){Object(vO.a)(this,t)}return Object(gO.a)(t,[{key:"map",value:function(t,e){return YK(t)?this.mapFacet(t,e):aQ(t)?this.mapRepeat(t,e):iQ(t)?this.mapHConcat(t,e):rQ(t)?this.mapVConcat(t,e):nQ(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}},{key:"mapLayerOrUnit",value:function(t,e){if(bQ(t))return this.mapLayer(t,e);if(u$(t))return this.mapUnit(t,e);throw new Error(RK.INVALID_SPEC)}},{key:"mapLayer",value:function(t,e){var n=this;return Object.assign({},t,{layer:t.layer.map((function(t){return n.mapLayerOrUnit(t,e)}))})}},{key:"mapHConcat",value:function(t,e){var n=this;return Object.assign({},t,{hconcat:t.hconcat.map((function(t){return n.map(t,e)}))})}},{key:"mapVConcat",value:function(t,e){var n=this;return Object.assign({},t,{vconcat:t.vconcat.map((function(t){return n.map(t,e)}))})}},{key:"mapConcat",value:function(t,e){var n=this,r=t.concat,i=S(t,["concat"]);return Object.assign({},i,{concat:r.map((function(t){return n.map(t,e)}))})}},{key:"mapFacet",value:function(t,e){return Object.assign({},t,{spec:this.map(t.spec,e)})}},{key:"mapRepeat",value:function(t,e){return Object.assign({},t,{spec:this.map(t.spec,e)})}}]),t}(),wQ={zero:1,center:1,normalize:1};var xQ=[WV,qV,VV,GV,JV,ZV,HV,$V,XV],kQ=[WV,qV];function EQ(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r$(t)?t.type:t;if(!mV(xQ,i))return null;var a=function(t){var e=t.x,n=t.y;if(dJ(e)&&dJ(n))if("quantitative"===e.type&&"quantitative"===n.type){if(e.stack)return"x";if(n.stack)return"y";if(!!e.aggregate!==!!n.aggregate)return e.aggregate?"x":"y"}else{if("quantitative"===e.type)return"x";if("quantitative"===n.type)return"y"}else{if(dJ(e)&&"quantitative"===e.type)return"x";if(dJ(n)&&"quantitative"===n.type)return"y"}}(e);if(!a)return null;var o,s=e[a],u=vJ(s)?bJ(s,{}):void 0,c="x"===a?"y":"x",l=e[c],f=vJ(l)?bJ(l,{}):void 0,h=oX.reduce((function(t,n){if("tooltip"!==n&&HJ(e,n)){var r=e[n];(qY(r)?r:[r]).forEach((function(e){var r=jJ(e);if(!r.aggregate){var i=vJ(r)?bJ(r,{}):void 0;(!i||i!==f&&i!==u)&&t.push({channel:n,fieldDef:r})}}))}return t}),[]);if(void 0!==s.stack?o=JY(s.stack)?s.stack?"zero":null:s.stack:h.length>0&&(o=mV(kQ,i)?IV(n,"zero"):n),!o||!wQ[o])return null;if(s.scale&&s.scale.type&&s.scale.type!==kZ.LINEAR){if(r.disallowNonLinearStack)return null;NK(RK.cannotStackNonLinearScale(s.scale.type))}return HJ(e,a===w$?k$:E$)?(void 0!==s.stack&&NK(RK.cannotStackRangedMark(a)),null):(s.aggregate&&!mV(g$,s.aggregate)&&NK(RK.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:l?c:void 0,fieldChannel:a,impute:e$(i),stackBy:h,offset:o})}function SQ(t){t.point,t.line;var e=S(t,["point","line"]);return AV(e).length>1?e:e.type}function OQ(t){for(var e=0,n=["line","area","rule","trail"];e<n.length;e++){var r=n[e];t[r]&&(t=Object.assign({},t,Object(fp.a)({},r,dV(t[r],["point","line"]))))}return t}function AQ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===t.point?{opacity:0}:t.point?WY(t.point)?t.point:{}:void 0!==t.point?null:e.point||n.shape?WY(e.point)?e.point:{}:void 0}function TQ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}var CQ=function(){function t(){Object(vO.a)(this,t),this.name="path-overlay"}return Object(gO.a)(t,[{key:"hasMatchingType",value:function(t,e){if(u$(t)){var n=t.mark,r=t.encoding,i=r$(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!AQ(i,e[i.type],r);case"area":return!!AQ(i,e[i.type],r)||!!TQ(i,e[i.type])}}return!1}},{key:"run",value:function(t,e,n){var r=e.config,i=t.selection,a=t.projection,o=t.encoding,s=t.mark,u=S(t,["selection","projection","encoding","mark"]),c=r$(s)?s:{type:s},l=AQ(c,r[c.type],o),f="area"===c.type&&TQ(c,r[c.type]),h=[Object.assign({},i?{selection:i}:{},{mark:SQ(Object.assign({},c,"area"===c.type?{opacity:.7}:{})),encoding:dV(o,["shape"])})],d=EQ(c,o,r?r.stack:void 0),p=o;if(d){var v=d.fieldChannel,g=d.offset;p=Object.assign({},o,Object(fp.a)({},v,Object.assign({},o[v],g?{stack:g}:{})))}return f&&h.push(Object.assign({},a?{projection:a}:{},{mark:Object.assign({type:"line"},hV(c,["clip","interpolate","tension","tooltip"]),f),encoding:p})),l&&h.push(Object.assign({},a?{projection:a}:{},{mark:Object.assign({type:"point",opacity:1,filled:!0},hV(c,["clip","tooltip"]),l),encoding:p})),n(Object.assign({},u,{layer:h}),Object.assign({},e,{config:OQ(r)}))}}]),t}(),jQ=function(){function t(){Object(vO.a)(this,t),this.name="RuleForRangedLine"}return Object(gO.a)(t,[{key:"hasMatchingType",value:function(t){if(u$(t)){var e=t.encoding;if("line"===t.mark){var n=!0,r=!1,i=void 0;try{for(var a,o=nX[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=e[iX(s)];if(e[s]&&dJ(u)&&!zJ(u.bin))return!0}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}return!1}},{key:"run",value:function(t,e,n){var r=t.encoding;return NK(RK.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign({},t,{mark:"rule"}),e)}}]),t}();function DQ(t){var e=t.parentEncoding,n=t.encoding;if(e&&n){var r=AV(e).reduce((function(t,e){return n[e]&&t.push(e),t}),[]);r.length>0&&NK(RK.encodingOverridden(r))}var i=Object.assign({},e||{},n||{});return AV(i).length>0?i:void 0}function RQ(t){var e=t.parentProjection,n=t.projection;return e&&n&&NK(RK.projectionOverridden({parentProjection:e,projection:n})),n||e}function MQ(t,e){return void 0===e&&(e=cQ(t.config)),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return PQ.map(t,{config:e})}(t,e)}var PQ=new(function(t){function e(){var t;return Object(vO.a)(this,e),(t=Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))).nonFacetUnitNormalizers=[oZ,hZ,bZ,new CQ,new jQ],t}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"map",value:function(t,n){if(u$(t)){var r=HJ(t.encoding,y$),i=HJ(t.encoding,b$),a=HJ(t.encoding,_$);if(r||i||a)return this.mapFacetedUnit(t,n)}return mQ(Object(gQ.a)(e.prototype),"map",this).call(this,t,n)}},{key:"mapUnit",value:function(t,e){var n=e.parentEncoding,r=e.parentProjection;if(n||r)return this.mapUnitWithParentEncodingOrProjection(t,e);var i=this.mapLayerOrUnit.bind(this),a=!0,o=!1,s=void 0;try{for(var u,c=this.nonFacetUnitNormalizers[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(l.hasMatchingType(t,e.config))return l.run(t,e,i)}}catch(f){o=!0,s=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return t}},{key:"mapRepeat",value:function(t,e){var n=t.repeat;return!qY(n)&&t.columns&&(t=dV(t,["columns"]),NK(RK.columnsNotSupportByRowCol("repeat"))),Object.assign({},t,{spec:this.map(t.spec,e)})}},{key:"mapFacet",value:function(t,n){return GK(t.facet)&&t.columns&&(t=dV(t,["columns"]),NK(RK.columnsNotSupportByRowCol("facet"))),mQ(Object(gQ.a)(e.prototype),"mapFacet",this).call(this,t,n)}},{key:"mapUnitWithParentEncodingOrProjection",value:function(t,e){var n=t.encoding,r=t.projection,i=e.parentEncoding,a=e.parentProjection,o=e.config,s=RQ({parentProjection:a,projection:r}),u=DQ({parentEncoding:i,encoding:n});return this.mapUnit(Object.assign({},t,s?{projection:s}:{},u?{encoding:u}:{}),{config:o})}},{key:"mapFacetedUnit",value:function(t,e){var n=t.encoding,r=n.row,i=n.column,a=n.facet,o=S(n,["row","column","facet"]),s=t.mark,u=t.width,c=t.projection,l=t.height,f=t.selection,h=(t.encoding,S(t,["mark","width","projection","height","selection","encoding"]));return a&&(r||i)&&NK(RK.facetChannelDropped([].concat(Object(id.a)(r?[y$]:[]),Object(id.a)(i?[b$]:[])))),this.mapFacet(Object.assign({},h,{facet:r||i?Object.assign({},r?{row:r}:{},i?{column:i}:{}):a,spec:Object.assign({},c?{projection:c}:{},{mark:s},u?{width:u}:{},l?{height:l}:{},{encoding:o},f?{selection:f}:{})}),e)}},{key:"mapLayer",value:function(t,n){var r=n.parentEncoding,i=n.parentProjection,a=S(n,["parentEncoding","parentProjection"]),o=t.encoding,s=t.projection,u=S(t,["encoding","projection"]),c=Object.assign({},a,{parentEncoding:DQ({parentEncoding:r,encoding:o}),parentProjection:RQ({parentProjection:i,projection:s})});return mQ(Object(gQ.a)(e.prototype),"mapLayer",this).call(this,u,c)}}]),e}(_Q));function FQ(t){return HY(t)?{type:t}:t||{}}var NQ=["background","padding"];function LQ(t){return NQ.reduce((function(e,n){return t&&void 0!==t[n]&&(e[n]=t[n]),e}),{})}var IQ=n(5);function BQ(t){return!!t.url}function UQ(t){return!!t.values}function zQ(t){return!!t.name&&!BQ(t)&&!UQ(t)&&!qQ(t)}function qQ(t){return t&&(WQ(t)||HQ(t)||GQ(t))}function WQ(t){return!!t.sequence}function HQ(t){return!!t.sphere}function GQ(t){return!!t.graticule}var YQ="main",VQ="raw";function $Q(t){return t&&!!t.field&&void 0!==t.equal}function XQ(t){return t&&!!t.field&&void 0!==t.lt}function KQ(t){return t&&!!t.field&&void 0!==t.lte}function JQ(t){return t&&!!t.field&&void 0!==t.gt}function ZQ(t){return t&&!!t.field&&void 0!==t.gte}function QQ(t){return!!(t&&t.field&&qY(t.range)&&2===t.range.length)}function t0(t){return t&&!!t.field&&(qY(t.oneOf)||qY(t.in))}function e0(t){return t0(t)||$Q(t)||QQ(t)||XQ(t)||JQ(t)||KQ(t)||ZQ(t)}function n0(t,e){return NJ(t,{timeUnit:e,time:!0})}function r0(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.field,r=t.timeUnit,i=r?"time("+eJ(r,n)+")":bJ(t,{expr:"datum"});if($Q(t))return i+"==="+n0(t.equal,r);if(XQ(t)){var a=t.lt;return"".concat(i,"<").concat(n0(a,r))}if(JQ(t)){var o=t.gt;return"".concat(i,">").concat(n0(o,r))}if(KQ(t)){var s=t.lte;return"".concat(i,"<=").concat(n0(s,r))}if(ZQ(t)){var u=t.gte;return"".concat(i,">=").concat(n0(u,r))}if(t0(t))return"indexof([".concat(function(t,e){return t.map((function(t){return n0(t,e)}))}(t.oneOf,r).join(","),"], ").concat(i,") !== -1");if(function(t){return t&&!!t.field&&void 0!==t.valid}(t))return t.valid?"".concat(i,"!==null&&!isNaN(").concat(i,")"):"".concat(i,"===null||isNaN(").concat(i,")");if(QQ(t)){var c=t.range[0],l=t.range[1];if(null!==c&&null!==l&&e)return"inrange("+i+", ["+n0(c,r)+", "+n0(l,r)+"])";var f=[];return null!==c&&f.push("".concat(i," >= ").concat(n0(c,r))),null!==l&&f.push("".concat(i," <= ").concat(n0(l,r))),f.length>0?f.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(t)))}function i0(t){return e0(t)&&t.timeUnit?Object.assign({},t,{timeUnit:rJ(t.timeUnit)}):t}function a0(t){return void 0!==t.filter}function o0(t){return void 0!==t.lookup}function s0(t){return void 0!==t.sample}function u0(t){return void 0!==t.window}function c0(t){return void 0!==t.joinaggregate}function l0(t){return void 0!==t.flatten}function f0(t){return void 0!==t.calculate}function h0(t){return!!t.bin}function d0(t){return void 0!==t.impute}function p0(t){return void 0!==t.timeUnit}function v0(t){return void 0!==t.aggregate}function g0(t){return void 0!==t.stack}function m0(t){return void 0!==t.fold}function y0(t){return!!t.signal}function b0(t){return!!t.step}function _0(t){return!qY(t)&&("field"in t&&"data"in t)}var w0=AV({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1,tooltip:1,cornerRadius:1,x:1,y:1,x2:1,y2:1,width:1,height:1}),x0=["domain","grid","labels","ticks","title"],k0={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"both",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},E0={orient:1,bandPosition:1,domain:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,zindex:1},S0=Object.assign({},E0,{encoding:1}),O0=Object.assign({gridScale:1,scale:1},E0,{encode:1});var A0=AV(O0);AV(S0);function T0(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},i=t.combine(),a=i.orient,o=i.scale,s=i.title,u=i.zindex,c=S(i,["orient","scale","title","zindex"]);if(AV(c).forEach((function(t){var n=k0[t];n&&n!==e&&"both"!==n&&delete c[t]})),"grid"===e){if(!c.grid)return;if(c.encode){var l=c.encode.grid;c.encode=Object.assign({},l?{grid:l}:{}),0===AV(c.encode).length&&delete c.encode}return Object.assign({scale:o,orient:a},c,{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:IV(u,0)})}if(r.header||!t.mainExtracted){if(c.encode){var f=!0,h=!1,d=void 0;try{for(var p,v=x0[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;t.hasAxisPart(g)||delete c.encode[g]}}catch(y){h=!0,d=y}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}0===AV(c.encode).length&&delete c.encode}var m=function(t,e){return qY(t)?t.map((function(t){return AJ(t,e)})).join(", "):t}(s,n);return Object.assign({scale:o,orient:a,grid:!1},m?{title:m}:{},c,{zindex:IV(u,1)})}}function C0(t){var e=t.component.axes,n=!0,r=!1,i=void 0;try{for(var a,o=uX[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(e[s]){var u=!0,c=!1,l=void 0;try{for(var f,h=e[s][Symbol.iterator]();!(u=(f=h.next()).done);u=!0){if(!f.value.get("gridScale")){var d="x"===s?"height":"width";return[{name:d,update:t.getSizeSignalRef(d).signal}]}}}catch(p){c=!0,l=p}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return[]}var j0={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleOrient:"orient",titlePadding:"offset"},D0={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelLimit:"limit",labelOrient:"orient",labelPadding:"offset"},R0=AV(j0),M0=AV(D0),P0="mean";function F0(t){return!!t&&("count"===t.op||!!t.field)}function N0(t){return!!t&&qY(t)}function L0(t,e,n,r,i){var a=[].concat(Object(id.a)("band"===i?["axisBand"]:[]),["x"===n?"axisX":"axisY"],Object(id.a)(r?["axis"+r.substr(0,1).toUpperCase()+r.substr(1)]:[]),["axis"]),o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;if(e[f]&&void 0!==e[f][t])return e[f][t]}}catch(h){s=!0,u=h}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}function I0(t,e){if(void 0!==t)return t=zV(t),"top"===e||"bottom"===e?t<=45||315<=t?"top"===e?"bottom":"top":135<=t&&t<=225?"top"===e?"top":"bottom":"middle":t<=45||315<=t||135<=t&&t<=225?"middle":45<=t&&t<=135?"left"===e?"top":"bottom":"left"===e?"bottom":"top"}function B0(t,e){if(void 0!==t)return t=zV(t),"top"===e||"bottom"===e?t%180===0?"center":0<t&&t<180?"top"===e?"right":"left":"top"===e?"left":"right":(t+90)%180===0?"center":90<=t&&t<270?"left"===e?"left":"right":"left"===e?"right":"left"}function U0(t){switch(t){case w$:return"bottom";case x$:return"left"}throw new Error(RK.INVALID_CHANNEL_FOR_AXIS)}function z0(t){return[].concat(t.type,t.style||[])}function q0(t,e,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).vgChannel;return IV(r?W0(t,e,n.style):void 0,W0(t,e,n.style),r?n[e.type][r]:void 0,n[e.type][t],r?n.mark[r]:n.mark[t])}function W0(t,e,n){var r,i=z0(e),a=!0,o=!1,s=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=n[u.value],f=t;l&&void 0!==l[f]&&(r=l[f])}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return r}function H0(t,e,n,r){if(FJ(t)){var i=mJ(t)&&t.scale&&t.scale.type===kZ.UTC;return{signal:X0(bJ(t,{expr:n}),t.timeUnit,e,r.text.shortTimeLabels,r.timeFormat,i,!0)}}var a=G0(t,e,r);return UJ(t.bin)?{signal:$0(bJ(t,{expr:n}),bJ(t,{expr:n,binSuffix:"end"}),a,r)}:"quantitative"===t.type||a?{signal:"".concat(Y0(bJ(t,{expr:n,binSuffix:"range"}),a))}:{signal:"''+".concat(bJ(t,{expr:n}))}}function G0(t,e,n){return e||(t.type===aJ?n.numberFormat:void 0)}function Y0(t,e){return"format(".concat(t,', "').concat(e||"",'")')}function V0(t,e,n){return Y0(t,e||n.numberFormat)}function $0(t,e,n,r){return"".concat(t," === null || isNaN(").concat(t,') ? "null" : ').concat(V0(t,n,r),' + " - " + ').concat(V0(e,n,r))}function X0(t,e,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return!e||n?(n=n||i)||o?"".concat(a?"utc":"time","Format(").concat(t,", '").concat(n,"')"):void 0:function(t,e,n,r){if(t){var i=nJ(t,n),a="";return tJ(t,BK.QUARTER)&&(a="'Q' + quarter(".concat(e,")")),i.length>0&&(a&&(a+=" + ' ' + "),a+=r?"utcFormat(".concat(e,", '").concat(i.join(" "),"')"):"timeFormat(".concat(e,", '").concat(i.join(" "),"')")),a||void 0}}(e,t,r,a)}function K0(t,e){return(qY(t)?t:[t]).reduce((function(t,n){return t.field.push(bJ(n,e)),t.order.push(n.sort||"ascending"),t}),{field:[],order:[]})}function J0(t,e){var n=Object(id.a)(t);return e.forEach((function(t){var e=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var s=a.value;if(pV(s)===pV(t))return}}catch(u){r=!0,i=u}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}n.push(t)})),n}function Z0(t,e){return t!==e&&e?t?t+", "+e:e:t}function Q0(t,e){if(qY(t.value)&&qY(e.value))return{explicit:t.explicit,value:J0(t.value,e.value)};if(!qY(t.value)&&!qY(e.value))return{explicit:t.explicit,value:Z0(t.value,e.value)};throw new Error("It should never reach here")}var t1=function(){function t(e,n){Object(vO.a)(this,t),this.debugName=n,this._children=[],this._parent=null,e&&(this.parent=e)}return Object(gO.a)(t,[{key:"clone",value:function(){throw new Error("Cannot clone node")}},{key:"hash",value:function(){return void 0===this._hash&&(this._hash=UV()),this._hash}},{key:"producedFields",value:function(){return new Set}},{key:"dependentFields",value:function(){return new Set}},{key:"numChildren",value:function(){return this._children.length}},{key:"addChild",value:function(t,e){this._children.indexOf(t)>-1?console.warn("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return this._children.splice(e,1),e}},{key:"remove",value:function(){var t=this._parent.removeChild(this),e=!0,n=!1,r=void 0;try{for(var i,a=this._children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o._parent=this._parent,this._parent.addChild(o,t++)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"insertAsParentOf",value:function(t){var e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}},{key:"swapWithParent",value:function(){var t=this._parent,e=t.parent,n=!0,r=!1,i=void 0;try{for(var a,o=this._children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.parent=t}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,t&&t.addChild(this)}},{key:"children",get:function(){return this._children}}]),t}(),e1=function(t){function e(t,n,r,i){var a;return Object(vO.a)(this,e),(a=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,n))).type=r,a.refCounts=i,a._source=a._name=n,!a.refCounts||a._name in a.refCounts||(a.refCounts[a._name]=0),a}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){var t=new this.constructor;return t.debugName="clone_"+this.debugName,t._source=this._source,t._name="clone_"+this._name,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}},{key:"getSource",value:function(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function(){return!!this.refCounts[this._name]}},{key:"setSource",value:function(t){this._source=t}}]),e}(t1);function n1(t){var e=TL(t),n=new Set;return e.visit((function(t){"MemberExpression"===t.type&&function t(e){return"MemberExpression"===e.object.type?t(e.object):"datum"===e.object.name}(t)&&n.add(function t(e){var n=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(n.push.apply(n,Object(id.a)(t(e.object))),n.push.apply(n,Object(id.a)(t(e.property)))),n)}(t).slice(1).join("."))})),n}var r1=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r._dependentFields=n1(r.transform.calculate),r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.as])}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function(){return"Calculate ".concat(vV(this.transform))}}],[{key:"parseAllForSortIndex",value:function(t,n){return n.forEachFieldDef((function(n,r){if(mJ(n)&&N0(n.sort)){var i=n.field,a=n.timeUnit,o=n.sort,s=o.map((function(t,e){return"".concat(r0({field:i,timeUnit:a,equal:t})," ? ").concat(e," : ")})).join("")+o.length;t=new e(t,{calculate:s,as:i1(n,r,{forAs:!0})})}})),t}}]),e}(t1);function i1(t,e,n){return bJ(t,Object.assign({prefix:e,suffix:"sort_index"},n||{}))}function a1(t,e){return mV(["top","bottom"],e)?"column":mV(["left","right"],e)?"row":"row"===t?"row":"column"}function o1(t,e,n,r){var i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return IV(e&&e.header?e.header[t]:void 0,i[t],n.header[t])}function s1(t,e,n,r){var i={},a=!0,o=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=o1(l,e,n,r);void 0!==f&&(i[l]=f)}}catch(h){o=!0,s=h}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}var u1=["row","column"],c1=["header","footer"];function l1(t,e){var n=t.component.layoutHeaders[e].title,r=t.config?t.config:void 0,i=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,a=s1(["titleAnchor","titleAngle","titleOrient"],i,r,e),o=a.titleAnchor,s=a.titleAngle,u=a1(e,a.titleOrient);return{name:"".concat(e,"-title"),type:"group",role:"".concat(u,"-title"),title:Object.assign({text:n},"row"===e?{orient:"left"}:{},{style:"guide-title"},h1(s,u),f1(u,s,o),b1(r,i,e,R0,j0))}}function f1(t,e){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle"){case"start":return{align:"left"};case"end":return{align:"right"}}var n=B0(e,"row"===t?"left":"top");return n?{align:n}:{}}function h1(t,e){var n=I0(t,"row"===e?"left":"top");return n?{baseline:n}:{}}function d1(t,e){var n=t.component.layoutHeaders[e],r=[],i=!0,a=!1,o=void 0;try{for(var s,u=c1[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(n[c]){var l=!0,f=!1,h=void 0;try{for(var d,p=n[c][Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;r.push(g1(t,e,c,n,v))}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}}}catch(g){a=!0,o=g}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function p1(t,e){var n=t.sort;return F0(n)?{field:bJ(n,{expr:"datum"}),order:n.order||"ascending"}:qY(n)?{field:i1(t,e,{expr:"datum"}),order:"ascending"}:{field:bJ(t,{expr:"datum"}),order:n||"ascending"}}function v1(t,e,n){var r=s1(["format","labelAngle","labelAnchor","labelOrient"],t,n,e),i=r.format,a=r.labelAngle,o=r.labelAnchor,s=a1(e,r.labelOrient);return Object.assign({text:H0(t,i,"parent",n)},"row"===e?{orient:"left"}:{},{style:"guide-label",frame:"group"},h1(a,s),f1(s,a,o),b1(n,t,e,M0,D0))}function g1(t,e,n,r,i){if(i){var a=null,o=r.facetFieldDef,s=t.config?t.config:void 0;if(o&&i.labels){var u=s1(["labelOrient"],o,s,e).labelOrient;("row"===e&&!mV(["top","bottom"],u)||"column"===e&&!mV(["left","right"],u))&&(a=v1(o,e,s))}var c=T5(t)&&!GK(t.facet),l=i.axes,f=l&&l.length>0;if(a||f){var h="row"===e?"height":"width";return Object.assign({name:t.getName("".concat(e,"_").concat(n)),type:"group",role:"".concat(e,"-").concat(n)},r.facetFieldDef?{from:{data:t.getName(e+"_domain")},sort:p1(o,e)}:{},f&&c?{from:{data:t.getName("facet_domain_".concat(e))}}:{},a?{title:a}:{},i.sizeSignal?{encode:{update:Object(fp.a)({},h,i.sizeSignal)}}:{},f?{axes:l}:{})}}return null}var m1={column:{start:0,end:1},row:{start:1,end:0}};function y1(t,e){return m1[e][t]}function b1(t,e,n,r,i){var a={},o=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;if(i[f]){var h=o1(f,e,t,n);void 0!==h&&(a[i[f]]=h)}}}catch(d){s=!0,u=d}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return a}function _1(t){return[].concat(Object(id.a)(w1(t,"width")),Object(id.a)(w1(t,"height")))}function w1(t,e){var n="width"===e?"x":"y",r=t.component.layoutSize.get(e);if(!r||"merged"===r)return[];var i=t.getSizeSignalRef(e).signal;if("range-step"===r){var a=t.getScaleComponent(n);if(a){var o=a.get("type"),s=a.get("range");if(BZ(o)&&b0(s)){var u=t.scaleName(n);if(T5(t.parent))if("independent"===t.parent.component.resolve.scale[n])return[x1(u,s)];return[x1(u,s),{name:i,update:k1(u,a,"domain('".concat(u,"').length"))}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:i,value:r}]}function x1(t,e){return{name:t+"_step",value:e.step}}function k1(t,e,n){var r=e.get("type"),i=e.get("padding"),a=IV(e.get("paddingOuter"),i),o=e.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace(".concat(n,", ").concat(o,", ").concat(a,") * ").concat(t,"_step")}var E1=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).formula=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.formula))}},{key:"merge",value:function(t){this.formula=Object.assign({},this.formula,t.formula);var e=!0,n=!1,r=void 0;try{for(var i,a=t.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;t.removeChild(o),o.parent=this}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}t.remove()}},{key:"producedFields",value:function(){return new Set(TV(this.formula).map((function(t){return t.as})))}},{key:"dependentFields",value:function(){return new Set(TV(this.formula).map((function(t){return t.field})))}},{key:"hash",value:function(){return"TimeUnit ".concat(vV(this.formula))}},{key:"assemble",value:function(){return TV(this.formula).map((function(t){return{type:"formula",as:t.as,expr:eJ(t.timeUnit,t.field)}}))}}],[{key:"makeFromEncoding",value:function(t,n){var r=n.reduceFieldDef((function(t,e){var n=e.timeUnit,r=e.field;if(n){var i={as:bJ(e,{forAs:!0}),timeUnit:n,field:r};t[vV(i)]=i}return t}),{});return 0===AV(r).length?null:new e(t,r)}},{key:"makeFromTransform",value:function(t,n){var r=Object.assign({},n);return new e(t,Object(fp.a)({},vV(r),r))}}]),e}(t1),S1={has:function(t){return"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind},parse:function(t,e,n){var r=jV(n.name),i=n.scales=[],a=!0,o=!1,s=void 0;try{for(var u,c=n.project.items[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=l.channel;if(dX(f)){var h=t.getScaleComponent(f),d=h?h.get("type"):void 0;if(h&&UZ(d)){if(h.set("domainRaw",{signal:PV(l.field,r)},!0),i.push(l),t.repeater&&t.repeater.row===t.repeater.column)t.getScaleComponent(f===w$?x$:w$).set("domainRaw",{signal:PV(l.field,r)},!0)}else NK(RK.SCALE_BINDINGS_CONTINUOUS)}}}catch(p){o=!0,s=p}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}},topLevelSignals:function(t,e,n){var r=e.scales.filter((function(t){return!n.filter((function(e){return e.name===t.signals.data})).length}));if(!t.parent||!r.length)return n;var i=n.filter((function(t){return t.name===e.name}))[0],a=i.update;if(a.indexOf(B1)>=0)i.update="{".concat(r.map((function(t){return"".concat(GY(t.field),": ").concat(t.signals.data)})).join(", "),"}");else{var o=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=", ".concat(GY(f.field),": ").concat(f.signals.data);a.indexOf(h)<0&&(i.update=a.substring(0,a.length-1)+h+"}")}}catch(d){s=!0,u=d}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}return n.concat(r.map((function(t){return{name:t.signals.data}})))},signals:function(t,e,n){if(t.parent){var r=!0,i=!1,a=void 0;try{for(var o,s=function(){var t=o.value,e=n.filter((function(e){return e.name===t.signals.data}))[0];e.push="outer",delete e.value,delete e.update},u=e.scales[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(c){i=!0,a=c}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}return n}};function O1(t,e){var n=GY(t.scaleName(e));return"domain(".concat(n,")")}var A1="_tuple_fields",T1=function t(){Object(vO.a)(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.items=n,this.has={}},C1="_scale_trigger",j1={signals:function(t,e){var n=e.name,r=n+A1,i=S1.has(e),a=[],o=[],s=[];if(e.translate&&!i){var u="!event.item || event.item.mark.name !== ".concat(GY(n+"_brush"));D1(e,(function(t,e){var n=e.between[0].filter||(e.between[0].filter=[]);n.indexOf(u)<0&&n.push(u)}))}e.project.items.forEach((function(n,r){var i=n.channel;if(i===w$||i===x$){var u=e.init?e.init[r]:null,c=function(t,e,n,r){var i=n.channel,a=n.signals.visual,o=n.signals.data,s=S1.has(e),u=GY(t.scaleName(i)),c=t.getScaleComponent(i),l=c?c.get("type"):void 0,f=function(t){return"scale(".concat(u,", ").concat(t,")")},h=t.getSizeSignalRef(i===w$?"width":"height").signal,d="".concat(i,"(unit)"),p=D1(e,(function(t,e){return[].concat(Object(id.a)(t),[{events:e.between[0],update:"[".concat(d,", ").concat(d,"]")},{events:e,update:"[".concat(a,"[0], clamp(").concat(d,", 0, ").concat(h,")]")}])}));return p.push({events:{signal:e.name+C1},update:UZ(l)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),s?[{name:o,on:[]}]:[Object.assign({name:a},r?{init:i2(r,f)}:{value:[]},{on:p}),Object.assign({name:o},r?{init:i2(r)}:{},{on:[{events:{signal:a},update:"".concat(a,"[0] === ").concat(a,"[1] ? null : invert(").concat(u,", ").concat(a,")")}]})]}(t,e,n,u),l=n.signals.data,f=n.signals.visual,h=GY(t.scaleName(i)),d=UZ(t.getScaleComponent(i).get("type"))?"+":"";a.push.apply(a,Object(id.a)(c)),o.push(l),s.push({scaleName:t.scaleName(i),expr:"(!isArray(".concat(l,") || ")+"(".concat(d,"invert(").concat(h,", ").concat(f,")[0] === ").concat(d).concat(l,"[0] && ")+"".concat(d,"invert(").concat(h,", ").concat(f,")[1] === ").concat(d).concat(l,"[1]))")})}else NK("Interval selections only support x and y encoding channels.")})),i||a.push({name:n+C1,value:{},on:[{events:s.map((function(t){return{scale:t.scaleName}})),update:s.map((function(t){return t.expr})).join(" && ")+" ? ".concat(n+C1," : {}")}]});var c=e.init,l="unit: ".concat(q1(t),", fields: ").concat(r,", values");return a.concat(Object.assign({name:n+N1},c?{init:"{".concat(l,": ").concat(i2(c),"}")}:{},{on:[{events:[{signal:o.join(" || ")}],update:o.join(" && ")+" ? {".concat(l,": [").concat(o,"]} : null")}]}))},modifyExpr:function(t,e){return e.name+N1+", "+("global"===e.resolve?"true":"{unit: ".concat(q1(t),"}"))},marks:function(t,e,n){var r=e.name,i=e.project.has,a=i.x,o=i.y,s=a&&a.signals.visual,u=o&&o.signals.visual,c="data(".concat(GY(e.name+F1),")");if(S1.has(e))return n;var l={x:void 0!==a?{signal:"".concat(s,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(u,"[0]")}:{value:0},x2:void 0!==a?{signal:"".concat(s,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(u,"[1]")}:{field:{group:"height"}}};if("global"===e.resolve){var f=!0,h=!1,d=void 0;try{for(var p,v=AV(l)[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;l[g]=[Object.assign({test:"".concat(c,".length && ").concat(c,"[0].unit === ").concat(q1(t))},l[g]),{value:0}]}}catch(x){h=!0,d=x}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}var m=e.mark,y=m.fill,b=m.fillOpacity,_=S(m,["fill","fillOpacity"]),w=AV(_).reduce((function(t,e){return t[e]=[{test:[void 0!==a&&"".concat(s,"[0] !== ").concat(s,"[1]"),void 0!==o&&"".concat(u,"[0] !== ").concat(u,"[1]")].filter((function(t){return t})).join(" && "),value:_[e]},{value:null}],t}),{});return[{name:r+"_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:y},fillOpacity:{value:b}},update:l}}].concat(Object(id.a)(n),[{name:r+"_brush",type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Object.assign({},l,w)}}])}};function D1(t,e){return t.events.reduce((function(t,n){return n.between?e(t,n):(NK("".concat(n," is not an ordered event stream for interval selections")),t)}),[])}function R1(t,e){var n=e.name,r=n+A1,i=e.project,a="(item().isVoronoi ? datum.datum : datum)",o=i.items.map((function(e){var n=t.fieldDef(e.channel);return n&&n.bin?"[".concat(PV(t.vgField(e.channel,{}),a),", ")+"".concat(PV(t.vgField(e.channel,{binSuffix:"end"}),a),"]"):"".concat(PV(e.field,a))})).join(", "),s="unit: ".concat(q1(t),", fields: ").concat(r,", values");return[{name:n+N1,on:[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? {".concat(s,": [").concat(o,"]} : null"),force:!0}]}]}var M1={signals:R1,modifyExpr:function(t,e){return e.name+N1+", "+("global"===e.resolve?"null":"{unit: ".concat(q1(t),"}"))}},P1={signals:R1,modifyExpr:function(t,e){return e.name+N1+", "+("global"===e.resolve?"true":"{unit: ".concat(q1(t),"}"))}},F1="_store",N1="_tuple",L1="_modify",I1="_selection_domain_",B1="vlSelectionResolve",U1={single:P1,multi:M1,interval:j1};function z1(t,e){var n=t.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];e(i,U1[i.type])}}function q1(t){var e=GY(t.name),n=function(t){for(var e=t.parent;e&&!T5(e);)e=e.parent;return e}(t);if(n){var r=n.facet,i=!0,a=!1,o=void 0;try{for(var s,u=K$[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r[c]&&(e+=" + '__facet_".concat(c,"_' + (").concat(PV(n.vgField(c),"facet"),")"))}}catch(l){a=!0,o=l}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}return e}function W1(t){var e=!1;return z1(t,(function(t){e=e||t.project.items.some((function(t){return t.field===QZ}))})),e}var H1={has:function(t){return"interval"!==t.type&&t.nearest},marks:function(t,e,n){var r=e.project.has,i=r.x,a=r.y,o=t.mark;if(e$(o))return NK(RK.nearestNotSupportForContinuous(o)),n;var s={name:t.getName("voronoi"),type:"path",from:{data:t.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},M2(t,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!i&&!a?"datum.datum.x || 0":"0"},y:{expr:a||!i&&!a?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]},u=0,c=!1;return n.forEach((function(e,n){var r=e.name||"";r===t.component.mark[0].name?u=n:r.indexOf("voronoi")>=0&&(c=!0)})),c||n.splice(u+1,0,s),n}},G1={has:function(t){return"single"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind},topLevelSignals:function(t,e,n){var r=e.name,i=e.project,a=e.bind,o=e.init&&e.init[0],s=H1.has(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((function(t,i){var u=jV("".concat(r,"_").concat(t.field));n.filter((function(t){return t.name===u})).length||n.unshift(Object.assign({name:u},o?{init:i2(o[i])}:{value:null},{on:[{events:e.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(PV(t.field,s)," : null")}],bind:a[t.field]||a[t.channel]||a}))})),n},signals:function(t,e,n){var r=e.name,i=e.project,a=n.filter((function(t){return t.name===r+N1}))[0],o=r+A1,s=i.items.map((function(t){return jV("".concat(r,"_").concat(t.field))})),u=s.map((function(t){return"".concat(t," !== null")})).join(" && ");return s.length&&(a.update="".concat(u," ? {fields: ").concat(o,", values: [").concat(s.join(", "),"]} : null")),delete a.value,delete a.on,n}},Y1={has:function(t){return"multi"===t.type&&t.toggle},signals:function(t,e,n){return n.concat({name:e.name+"_toggle",value:!1,on:[{events:e.events,update:e.toggle}]})},modifyExpr:function(t,e){var n=e.name+N1,r=e.name+"_toggle";return"".concat(r," ? null : ").concat(n,", ")+("global"===e.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(q1(t),"}, "))+"".concat(r," ? ").concat(n," : null")}},V1={has:function(t){return!1!==t.clear},parse:function(t,e,n){e.clear&&(n.clear=hW(e.clear,"scope"))},topLevelSignals:function(t,e,n){return G1.has(e)&&e.project.items.forEach((function(t){var r=n.findIndex((function(n){return n.name===jV("".concat(e.name,"_").concat(t.field))}));-1!==r&&n[r].on.push({events:e.clear,update:"null"})})),n},signals:function(t,e,n){function r(t,r){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:r})}if("interval"===e.type)e.project.items.forEach((function(t){var e=n.findIndex((function(e){return e.name===t.signals.visual}));(r(e,"[0, 0]"),-1===e)&&r(n.findIndex((function(e){return e.name===t.signals.data})),"null")}));else{var i=n.findIndex((function(t){return t.name===e.name+N1}));r(i,"null"),Y1.has(e)&&r(i=n.findIndex((function(t){return t.name===e.name+"_toggle"})),"false")}return n}},$1="_translate_anchor",X1="_translate_delta",K1={has:function(t){return"interval"===t.type&&t.translate},signals:function(t,e,n){var r=e.name,i=S1.has(e),a=r+$1,o=e.project.has,s=o.x,u=o.y,c=hW(e.translate,"scope");return i||(c=c.map((function(t){return t.between[0].markname=r+"_brush",t}))),n.push({name:a,value:{},on:[{events:c.map((function(t){return t.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==s?", extent_x: "+(i?O1(t,w$):"slice(".concat(s.signals.visual,")")):"")+(void 0!==u?", extent_y: "+(i?O1(t,x$):"slice(".concat(u.signals.visual,")")):"")+"}"}]},{name:r+X1,value:{},on:[{events:c,update:"{x: ".concat(a,".x - x(unit), y: ").concat(a,".y - y(unit)}")}]}),void 0!==s&&J1(t,e,s,"width",n),void 0!==u&&J1(t,e,u,"height",n),n}};function J1(t,e,n,r,i){var a=e.name,o=a+$1,s=a+X1,u=n.channel,c=S1.has(e),l=i.filter((function(t){return t.name===n.signals[c?"data":"visual"]}))[0],f=t.getSizeSignalRef(r).signal,h=t.getScaleComponent(u),d=h.get("type"),p=c&&u===w$?"-":"",v="".concat(o,".extent_").concat(u),g="".concat(p).concat(s,".").concat(u," / ")+(c?"".concat(f):"span(".concat(v,")")),m="".concat(c?"log"===d?"panLog":"pow"===d?"panPow":"panLinear":"panLinear","(").concat(v,", ").concat(g)+(c&&"pow"===d?", ".concat(h.get("exponent")||1):"")+")";l.on.push({events:{signal:s},update:c?m:"clampRange(".concat(m,", 0, ").concat(f,")")})}var Z1="_zoom_anchor",Q1="_zoom_delta",t2={has:function(t){return"interval"===t.type&&t.zoom},signals:function(t,e,n){var r=e.name,i=S1.has(e),a=r+Q1,o=e.project.has,s=o.x,u=o.y,c=GY(t.scaleName(w$)),l=GY(t.scaleName(x$)),f=hW(e.zoom,"scope");return i||(f=f.map((function(t){return t.markname=r+"_brush",t}))),n.push({name:r+Z1,on:[{events:f,update:i?"{"+[c?"x: invert(".concat(c,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((function(t){return!!t})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&e2(t,e,s,"width",n),void 0!==u&&e2(t,e,u,"height",n),n}};function e2(t,e,n,r,i){var a=e.name,o=n.channel,s=S1.has(e),u=i.filter((function(t){return t.name===n.signals[s?"data":"visual"]}))[0],c=t.getSizeSignalRef(r).signal,l=t.getScaleComponent(o),f=l.get("type"),h=s?O1(t,o):u.name,d=a+Q1,p="".concat(a).concat(Z1,".").concat(o),v="".concat(s?"log"===f?"zoomLog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear","(").concat(h,", ").concat(p,", ").concat(d)+(s&&"pow"===f?", ".concat(l.get("exponent")||1):"")+")";u.on.push({events:{signal:d},update:s?v:"clampRange(".concat(v,", 0, ").concat(c,")")})}var n2=[{has:function(){return!0},parse:function(t,e,n){var r=n.name,i=n.project||(n.project=new T1),a={},o={},s=new Set,u=function(t,e){for(var n="visual"===e?t.channel:t.field,i=jV("".concat(r,"_").concat(n)),a=1;s.has(i);a++)i=jV("".concat(r,"_").concat(n,"_").concat(a));return s.add(i),Object(fp.a)({},e,i)};if(!e.fields&&!e.encodings){var c=t.config.selection[e.type];if(e.init){var l=!0,f=!1,h=void 0;try{for(var d,p=XY(e.init)[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value,g=!0,m=!1,y=void 0;try{for(var b,_=AV(v)[Symbol.iterator]();!(g=(b=_.next()).done);g=!0){var w=b.value;tX[w]?(e.encodings||(e.encodings=[])).push(w):tQ(e)?(NK('Interval selections should be initialized using "x" and/or "y" keys.'),e.encodings=c.encodings):(e.fields||(e.fields=[])).push(w)}}catch(z){m=!0,y=z}finally{try{g||null==_.return||_.return()}finally{if(m)throw y}}}}catch(z){f=!0,h=z}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}else e.encodings=c.encodings,e.fields=c.fields}var x=!0,k=!1,E=void 0;try{for(var S,O=(e.fields||[])[Symbol.iterator]();!(x=(S=O.next()).done);x=!0){var A={type:"E",field:S.value};A.signals=Object.assign({},u(A,"data")),i.items.push(A)}}catch(z){k=!0,E=z}finally{try{x||null==O.return||O.return()}finally{if(k)throw E}}var T=!0,C=!1,j=void 0;try{for(var D,R=(e.encodings||[])[Symbol.iterator]();!(T=(D=R.next()).done);T=!0){var M=D.value,P=t.fieldDef(M);if(P){var F=P.field;if(P.timeUnit){var N={as:F=t.vgField(M),field:P.field,timeUnit:P.timeUnit};o[vV(N)]=N}if(!a[F]){var L="E";if("interval"===n.type)UZ(t.getScaleComponent(M).get("type"))&&(L="R");else P.bin&&(L="R-RE");var I={field:F,channel:M,type:L};I.signals=Object.assign({},u(I,"data"),u(I,"visual")),i.items.push(a[F]=I),i.has[M]=a[F]}}else NK(RK.cannotProjectOnChannelWithoutField(M))}}catch(z){C=!0,j=z}finally{try{T||null==R.return||R.return()}finally{if(C)throw j}}if(e.init)if(S1.has(n))NK(RK.NO_INIT_SCALE_BINDINGS);else{var B=function(t){return i.items.map((function(e){return void 0!==t[e.channel]?t[e.channel]:t[e.field]}))};if(tQ(e))n.init=B(e.init);else{var U=qY(e.init)?e.init:[e.init];n.init=U.map(B)}}AV(o).length&&(i.timeUnit=new E1(null,o))},signals:function(t,e,n){var r=e.name+A1;return n.filter((function(t){return t.name===r})).length?n:n.concat({name:r,value:e.project.items.map((function(t){t.signals;return S(t,["signals"])}))})}},Y1,S1,K1,t2,G1,H1,V1];function r2(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=n2[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.has(t)&&e(s)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}function i2(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VY;if(qY(t)){var n=t.map((function(t){return i2(t,e)})).join(", ");return"[".concat(n,"]")}return IK(t)?e(HK(t)):e(JSON.stringify(t))}function a2(t,e){return z1(t,(function(n){var r={name:n.name+F1};if(n.init){var i=n.project.items.map((function(t){t.signals;return S(t,["signals"])})),a=n.init.map((function(t){return function t(e){return qY(e)?e.map((function(e){return t(e)})):IK(e)?HK(e,!1,!0):e}(t)}));r.values="interval"===n.type?[{unit:q1(t),fields:i,values:a}]:a.map((function(e){return{unit:q1(t),fields:i,values:e}}))}e.filter((function(t){return t.name===n.name+F1})).length||e.push(r)})),e}function o2(t,e){return z1(t,(function(n,r){e=r.marks?r.marks(t,n,e):e,r2(n,(function(r){r.marks&&(e=r.marks(t,n,e))}))})),e}function s2(t,e,n){var r=[];var i=DV(e,(function(e){var i=jV(e),a=t.getSelectionComponent(i,e),o=GY(i+F1);if(a.project.timeUnit){var s=n||t.component.data.raw,u=a.project.timeUnit.clone();s.parent?u.insertAsParentOf(s):s.parent=u}return"none"!==a.empty&&r.push(o),"vlSelectionTest(".concat(o,", datum")+("global"===a.resolve?")":", ".concat(GY(a.resolve),")"))}));return(r.length?"!("+r.map((function(t){return"length(data(".concat(t,"))")})).join(" || ")+") || ":"")+"(".concat(i,")")}function u2(t,e,n){return DV(e,(function(e){return HY(e)?e:function(t){return t&&t.selection}(e)?s2(t,e.selection,n):r0(e)}))}function c2(t){var e=t.channel,n=t.channelDef,r=t.mark,i=t.scale,a=y2(t);return dJ(n)&&!v$(n.aggregate)&&i&&zZ(i.get("type"))&&!1===i.get("zero")?l2({fieldDef:n,channel:e,mark:r,ref:a}):a}function l2(t){var e=t.fieldDef,n=t.channel,r=t.mark,i=t.ref;return e$(r)?i:[f2(e,n),i]}function f2(t,e){var n=h2(t,!0),r="x"===iX(e)?{value:0}:{field:{group:"height"}};return Object.assign({test:n},r)}function h2(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=HY(t)?t:bJ(t,{expr:"datum"});var n=e?"||":"&&",r=e?"===":"!==";return"".concat(t," ").concat(r," null ").concat(n," ").concat(e?"":"!","isNaN(").concat(t,")")}function d2(t,e){var n=e[t+"Offset"];if(n)return n}function p2(t){var e=t.channel,n=t.fieldDef,r=t.scaleName,i=t.mark,a=t.side,o=t.offset;return l2({fieldDef:n,channel:e,mark:i,ref:v2(n,r,{binSuffix:"start"===a?void 0:"end"},o?{offset:o}:{})})}function v2(t,e,n,r){var i=Object.assign({},e?{scale:e}:{},{field:bJ(t,n)});if(r){var a=r.offset,o=r.band;return Object.assign({},i,a?{offset:a}:{},o?{band:o}:{})}return i}function g2(t){return{scale:t,band:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function m2(t){var e=t.scaleName,n=t.fieldDef,r=t.fieldDef2,i=t.offset,a=t.band;a=IV(a,.5);var o=bJ(n,{expr:"datum"}),s=void 0!==r?bJ(r,{expr:"datum"}):bJ(n,{binSuffix:"end",expr:"datum"});return Object.assign({signal:'scale("'.concat(e,'", ').concat(a," * ").concat(o," + ").concat(1-a," * ").concat(s,")")},i?{offset:i}:{})}function y2(t){var e=t.channel,n=t.channelDef,r=t.channel2Def,i=t.scaleName,a=t.scale,o=t.stack,s=t.offset,u=t.defaultRef;if(n){if(dJ(n)){if(pJ(n)){if(UJ(n.bin))return mV([w$,x$],e)&&n.type===aJ?o&&o.impute?v2(n,i,{binSuffix:"mid"},{offset:s}):m2({scaleName:i,fieldDef:n,offset:s}):v2(n,i,IJ(n,e)?{binSuffix:"range"}:{},{offset:s});if(zJ(n.bin)){if(dJ(r))return m2({scaleName:i,fieldDef:n,fieldDef2:r,offset:s});var c=e===w$?k$:E$;NK(RK.channelRequiredForBinned(c))}}if(a){var l=a.get("type");if(BZ(l))return v2(n,i,{binSuffix:"range"},"band"===l?{band:.5,offset:s}:{offset:s})}return v2(n,i,{},{offset:s})}if(gJ(n)){var f=n.value,h=s?{offset:s}:{};return Object.assign({},b2(e,f),h)}}return KY(u)?u():u}function b2(t,e){return mV(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:mV(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:{value:e}}function _2(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).reactiveGeom,r=[],i={},a={},o=n?"datum.datum":"datum",s=[];function u(n,r){var i=iX(r),u=pJ(n)?n:Object.assign({},n,{type:t[i].type}),c=SJ(u,e,{allowDisabling:!1}),l=w2(u,e,o).signal;if("x"===r||"y"===r){var f="x"===r?"x2":"y2",h=CJ(t[f]);if(zJ(u.bin)&&h)l=$0(bJ(u,{expr:o}),bJ(h,{expr:o}),TJ(u),e),a[f]=!0}s.push({channel:r,key:c,value:l})}XJ(t,(function(t,e){dJ(t)?u(t,e):hJ(t)&&u(t.condition,e)}));for(var c=0,l=s;c<l.length;c++){var f=l[c],h=f.channel,d=f.key,p=f.value;a[h]||i[d]||(r.push("".concat(GY(d),": ").concat(p)),i[d]=!0)}return r.length?{signal:"{".concat(r.join(", "),"}")}:void 0}function w2(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(t){if(gJ(t))return{value:t.value};if(pJ(t))return H0(t,TJ(t),n,e)}}function x2(t){return Object.assign({},t,{mult:.5})}function k2(t){var e=t.markDef,n=t.config,r=t.defaultRef,i=t.channel,a=t.scaleName,o=t.scale,s=t.mark,u=t.checkBarAreaWithoutZero;return function(){var t=iX(i),c=IV(e[i],q0(i,e,n));if(void 0!==c)return b2(i,c);if(HY(r)){if(a){var l=o.get("type");if(mV([kZ.LOG,kZ.TIME,kZ.UTC],l))!u||"bar"!==s&&"area"!==s||NK(RK.nonZeroScaleUsedWithLengthMark(s,t,{scaleType:l}));else{if(o.domainDefinitelyIncludesZero())return{scale:a,value:0};!u||"bar"!==s&&"area"!==s||NK(RK.nonZeroScaleUsedWithLengthMark(s,t,{zeroFalse:!1===o.explicit.zero}))}}return"zeroOrMin"===r?"x"===t?{value:0}:{field:{group:"height"}}:"x"===t?{field:{group:"width"}}:{value:0}}return r}}function E2(t){return"transparent"!==t&&null!==t&&void 0!==t}function S2(t){var e=t.markDef,n=t.encoding,r=t.config,i=e.filled,a=e.type,o={fill:q0("fill",e,r),stroke:q0("stroke",e,r),color:q0("color",e,r)},s=mV(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,u=IV(e.fill,o.fill,s),c=IV(e.stroke,o.stroke),l=i?"fill":"stroke",f=Object.assign({},u?{fill:{value:u}}:{},c?{stroke:{value:c}}:{});return n.fill||n.stroke?(e.color&&NK(RK.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),Object.assign({},D2("fill",t,{defaultValue:IV(u,s)}),D2("stroke",t,{defaultValue:c}))):n.color?Object.assign({},f,D2("color",t,{vgChannel:l,defaultValue:IV(e[l],e.color,o[l],o.color,i?s:void 0)})):E2(e.fill)||E2(e.stroke)?(e.color&&NK(RK.droppingColor("property",{fill:"fill"in e,stroke:"stroke"in e})),f):e.color?Object.assign({},f,Object(fp.a)({},l,{value:e.color})):E2(o.fill)||E2(o.stroke)?f:o.color?Object.assign({},s?{fill:{value:"transparent"}}:{},Object(fp.a)({},l,{value:o.color})):{}}function O2(t,e){var n=S2(t),r=n.fill,i=n.stroke;return Object.assign({},function(t,e){return w0.reduce((function(n,r){return void 0!==t[r]&&"ignore"!==e[r]&&(n[r]={value:t[r]}),n}),{})}(t.markDef,e),A2(t,"fill",r),A2(t,"stroke",i),D2("opacity",t),D2("fillOpacity",t),D2("strokeOpacity",t),D2("strokeWidth",t),M2(t),P2(t,"href"))}function A2(t,e,n){var r=t.config,i=t.mark;if("hide"===r.invalidValues&&n&&!e$(i)){var a=C2(t,{invalid:!0,channels:hX});if(a)return Object(fp.a)({},e,[{test:a,value:null}].concat(Object(id.a)(XY(n))))}return n?Object(fp.a)({},e,n):{}}function T2(t,e){if(void 0!==e)return Object(fp.a)({},t,{value:e})}function C2(t,e){var n=e.invalid,r=void 0!==n&&n,i=e.channels.reduce((function(e,n){var r=t.getScaleComponent(n);if(r){var i=r.get("type"),a=t.vgField(n,{expr:"datum"});a&&UZ(i)&&(e[a]=!0)}return e}),{}),a=AV(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(t){return h2(t,r)})).join(" ".concat(o," "))}}function j2(t){if(t.config.invalidValues){var e=C2(t,{channels:["x","y"]});if(e)return{defined:{signal:e}}}return{}}function D2(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.markDef,i=e.encoding,a=e.config,o=n.vgChannel,s=void 0===o?t:o,u=n.defaultRef,c=n.defaultValue;void 0===u&&(c=c||(s===t?r[t]:IV(r[t],r[s],q0(t,r,a,{vgChannel:s}))),u=c?{value:c}:void 0);var l=i[t];return R2(e,l,s,(function(n){return y2({channel:t,channelDef:n,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:u})}))}function R2(t,e,n,r){var i=e&&e.condition,a=r(e);if(i){var o=(qY(i)?i:[i]).map((function(e){var n=r(e),i=function(t){return t.selection}(e)?s2(t,e.selection):u2(t,e.test);return Object.assign({test:i},n)}));return Object(fp.a)({},n,[].concat(Object(id.a)(o),Object(id.a)(void 0!==a?[a]:[])))}return void 0!==a?Object(fp.a)({},n,a):{}}function M2(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.encoding,r=t.markDef,i=t.config,a=n.tooltip;return qY(a)?{tooltip:_2({tooltip:a},i,e)}:R2(t,a,"tooltip",(function(a){var o=w2(a,t.config,e.reactiveGeom?"datum.datum":"datum");if(o)return o;if(null!==a){var s=IV(r.tooltip,q0("tooltip",r,i));return HY(s)?{value:s}:WY(s)?"encoding"===s.content?_2(n,i,e):{signal:"datum"}:void 0}}))}function P2(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=t.encoding[e];return R2(t,n,e,(function(e){return w2(e,t.config)}))}function F2(t,e,n,r){var i=e.encoding,a=e.mark,o=e.markDef,s=e.config,u=e.stack,c=i[t],l=i[t===w$?k$:E$],f=e.scaleName(t),h=e.getScaleComponent(t),d=d2(t,e.markDef),p=c||!i.latitude&&!i.longitude?function(t){var e=t.channel,n=t.channelDef,r=t.scaleName,i=t.stack,a=t.offset;return dJ(n)&&i&&e===i.fieldChannel?v2(n,r,{suffix:"end"},{offset:a}):c2(t)}({channel:t,channelDef:c,channel2Def:l,scaleName:f,scale:h,stack:u,mark:a,offset:d,defaultRef:k2({markDef:o,config:s,defaultRef:n,channel:t,scaleName:f,scale:h,mark:a,checkBarAreaWithoutZero:!l})}):{field:e.getName(t)};return Object(fp.a)({},r||t,p)}function N2(t,e,n){var r,i=t.encoding,a=t.mark,o=t.markDef,s=t.stack,u=t.config,c="x2"===n?"x":"y",l="x2"===n?"width":"height",f=i[c],h=t.scaleName(c),d=t.getScaleComponent(c),p=d2(n,t.markDef);if(!f&&(i.latitude||i.longitude))return Object(fp.a)({},n,{field:t.getName(n)});var v=function(t){var e=t.channel,n=t.channelDef,r=t.channel2Def,i=t.scaleName,a=t.scale,o=t.stack,s=t.mark,u=t.offset,c=t.defaultRef;return dJ(n)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?v2(n,i,{suffix:"start"},{offset:u}):c2({channel:e,channelDef:r,scaleName:i,scale:a,stack:o,mark:s,offset:u,defaultRef:c})}({channel:n,channelDef:f,channel2Def:i[n],scaleName:h,scale:d,stack:s,mark:a,offset:p,defaultRef:void 0});return void 0!==v?Object(fp.a)({},n,v):IV(L2(n,o),L2(n,(r={},Object(fp.a)(r,n,W0(n,o,u.style)),Object(fp.a)(r,l,W0(l,o,u.style)),r)),L2(n,u[a]),L2(n,u.mark),Object(fp.a)({},n,k2({markDef:o,config:u,defaultRef:e,channel:n,scaleName:h,scale:d,mark:a,checkBarAreaWithoutZero:!i[n]})()))}function L2(t,e){var n="x2"===t?"width":"height";return e[t]?Object(fp.a)({},t,b2(t,e[t])):e[n]?Object(fp.a)({},n,{value:e[n]}):void 0}function I2(t,e){return AV(t).reduce((function(n,r){var i=t[r];return Object.assign({},n,R2(e,i,r,(function(t){return{value:t.value}})))}),{})}function B2(t,e){var n=t.scale[e],r=mV(uX,e)?"axis":"legend";return"independent"===n?("shared"===t[r][e]&&NK(RK.independentScaleMeansIndependentGuide(e)),"independent"):t[r][e]||"shared"}var U2=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(vO.a)(this,t),this.explicit=e,this.implicit=n}return Object(gO.a)(t,[{key:"clone",value:function(){return new t(fV(this.explicit),fV(this.implicit))}},{key:"combine",value:function(){return Object.assign({},this.explicit,this.implicit)}},{key:"get",value:function(t){return IV(this.explicit[t],this.implicit[t])}},{key:"getWithExplicit",value:function(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function(t,e){void 0!==e.value&&this.set(t,e.value,e.explicit)}},{key:"set",value:function(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}},{key:"copyKeyFromSplit",value:function(t,e){void 0!==e.explicit[t]?this.set(t,e.explicit[t],!0):void 0!==e.implicit[t]&&this.set(t,e.implicit[t],!1)}},{key:"copyKeyFromObject",value:function(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}},{key:"copyAll",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=AV(t.combine())[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=t.getWithExplicit(o);this.setWithExplicit(o,s)}}catch(u){n=!0,r=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}}]),t}();function z2(t){return{explicit:!0,value:t}}function q2(t){return{explicit:!1,value:t}}function W2(t){return function(e,n,r,i){var a=t(e.value,n.value);return a>0?e:a<0?n:H2(e,n,r,i)}}function H2(t,e,n,r){return t.explicit&&e.explicit&&NK(RK.mergeConflictingProperty(n,r,t.value,e.value)),t}function G2(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:H2;return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:pV(t.value)===pV(e.value)?t:i(t,e,n,r)}var Y2=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),e}(U2);function V2(t){return IV(t.legend.type,$2(t))}function $2(t){var e=t.channel,n=t.timeUnit,r=t.scaleType,i=t.alwaysReturn;if($$(e)){if(mV(["quarter","month","day"],n))return"symbol";if(zZ(r))return i?"gradient":void 0}return i?"symbol":void 0}function X2(t){var e=t.legend,n=t.legendConfig,r=t.timeUnit,i=t.channel,a=t.scaleType,o=IV(e.orient,n.orient,"right"),s=V2({legend:e,channel:i,timeUnit:r,scaleType:a,alwaysReturn:!0});return IV(e.direction,n[s?"gradientDirection":"symbolDirection"],function(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}(o,s))}function K2(t,e,n,r){var i=t.getSizeSignalRef(e).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function J2(t,e,n){var r=e.getScaleComponent(n).get("type");return IV(t.get("type"),$2({channel:n,scaleType:r,alwaysReturn:!0}))}function Z2(t,e,n,r,i){if("symbol"===J2(i,n,r)){var a=Object.assign({},function(t,e,n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=q0(u,e.markDef,e.config);void 0!==c&&(t[u]={value:c})}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}({},n,i$),S2(n)),o=n.markDef,s=n.encoding,u=n.config,c=o.filled,l=e3(s.opacity)||o.opacity;if(a.fill)if("fill"===r||c&&r===C$)delete a.fill;else if(a.fill.field)i.get("symbolFillColor")?delete a.fill:(a.fill={value:u.legend.symbolBaseFillColor||"black"},a.fillOpacity={value:l||1});else if(qY(a.fill)){var f=n3(s.fill||s.color)||o.fill||c&&o.color;f&&(a.fill={value:f})}if(a.stroke)if("stroke"===r||!c&&r===C$)delete a.stroke;else if(a.stroke.field)delete a.stroke;else if(qY(a.stroke)){var h=IV(n3(s.stroke||s.color),o.stroke,c?o.color:void 0);h&&(a.stroke={value:h})}return r!==P$&&l&&(a.opacity={value:l}),a=Object.assign({},a,e),AV(a).length>0?a:void 0}}function Q2(t,e,n,r,i){if("gradient"===J2(i,n,r)){var a={},o=e3(n.encoding.opacity)||n.markDef.opacity;return o&&(a.opacity={value:o}),a=Object.assign({},a,e),AV(a).length>0?a:void 0}}function t3(t,e,n,r){var i=n.legend(r),a=n.config,o={};if(FJ(t)){var s=n.getScaleComponent(r).get("type")===kZ.UTC,u=X0("datum.value",t.timeUnit,i.format,a.legend.shortTimeLabels,a.timeFormat,s);e=Object.assign({},u?{text:{signal:u}}:{},e)}return o=Object.assign({},o,e),AV(o).length>0?o:void 0}function e3(t){return r3(t,(function(t,e){return Math.max(t,e.value)}))}function n3(t){return r3(t,(function(t,e){return IV(t,e.value)}))}function r3(t,e){return function(t){return!!t&&!!t.condition&&(qY(t.condition)||gJ(t.condition))}(t)?(qY(t.condition)?t.condition:[t.condition]).reduce(e,t.value):gJ(t)?t.value:void 0}function i3(t){A5(t)?t.component.legends=function(t){var e=t.encoding;return[C$,j$,D$,L$,M$,R$,P$,F$,N$].reduce((function(n,r){var i=e[r];return!t.legend(r)||!t.getScaleComponent(r)||dJ(i)&&r===R$&&i.type===cJ||(n[r]=function(t,e){var n=t.fieldDef(e),r=t.legend(e),i=new Y2({},function(t,e){var n=t.scaleName(C$);if("color"===e)return t.markDef.filled?{fill:n}:{stroke:n};return Object(fp.a)({},e,t.scaleName(e))}(t,e)),a=!0,o=!1,s=void 0;try{for(var u,c=TZ[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=o3(l,r,e,t);if(void 0!==f){var h=a3(f,l,r,n);(h||void 0===t.config.legend[l])&&i.set(l,f,h)}}}catch(v){o=!0,s=v}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var d=r.encoding||{},p=["labels","legend","title","symbols","gradient"].reduce((function(r,a){var o=I2(d[a]||{},t),s=g[a]?g[a](n,o,t,e,i):o;return void 0!==s&&AV(s).length>0&&(r[a]={update:s}),r}),{});AV(p).length>0&&i.set("encode",p,!!r.encoding);return i}(t,r)),n}),{})}(t):t.component.legends=function(t){var e=t.component,n=e.legends,r=e.resolve,i=!0,a=!1,o=void 0;try{for(var s,u=function(){var e=s.value;i3(e),AV(e.component.legends).forEach((function(i){r.legend[i]=B2(t.component.resolve,i),"shared"===r.legend[i]&&(n[i]=s3(n[i],e.component.legends[i]),n[i]||(r.legend[i]="independent",delete n[i]))}))},c=t.children[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u()}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return AV(n).forEach((function(e){var n=!0,i=!1,a=void 0;try{for(var o,s=t.children[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.component.legends[e]&&("shared"===r.legend[e]&&delete u.component.legends[e])}}catch(l){i=!0,a=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}})),n}(t)}function a3(t,e,n,r){switch(e){case"values":return!!n.values;case"title":if("title"===e&&t===r.title)return!0}return t===n[e]}function o3(t,e,n,r){var i=r.encoding,a=r.mark,o=jJ(i[n]),s=r.config.legend,u=o.timeUnit,c=r.getScaleComponent(n).get("type");switch(t){case"direction":return X2({legend:e,legendConfig:s,timeUnit:u,channel:n,scaleType:c});case"format":if(FJ(o))return;return G0(o,e.format,r.config);case"formatType":if(FJ(o))return;return e.formatType;case"gradientLength":return IV(e.gradientLength,s.gradientLength,function(t){var e=t.legend,n=t.legendConfig,r=t.model,i=t.channel,a=t.scaleType,o=n.gradientHorizontalMaxLength,s=n.gradientHorizontalMinLength,u=n.gradientVerticalMaxLength,c=n.gradientVerticalMinLength;if("horizontal"===X2({legend:e,legendConfig:n,channel:i,scaleType:a})){var l=IV(e.orient,n.orient);return"top"===l||"bottom"===l?K2(r,"width",s,o):s}return K2(r,"height",c,u)}({model:r,legend:e,legendConfig:s,channel:n,scaleType:c}));case"labelOverlap":return IV(e.labelOverlap,function(t){if(mV(["quantile","threshold","log"],t))return"greedy"}(c));case"symbolType":return IV(e.symbolType,function(t,e,n,r){if("shape"!==e){var i=n3(n)||r;if(i)return i}switch(t){case"bar":case"rect":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(a,n,i.shape,r.markDef.shape));case"title":return SJ(o,r.config,{allowDisabling:!0})||void 0;case"type":return V2({legend:e,channel:n,timeUnit:u,scaleType:c,alwaysReturn:!1});case"values":return function(t,e){var n=t.values;if(n)return LJ(e,n)}(e,o)}return e[t]}function s3(t,e){if(!t)return e.clone();var n=t.getWithExplicit("orient"),r=e.getWithExplicit("orient");if(!n.explicit||!r.explicit||n.value===r.value){var i=!1,a=!0,o=!1,s=void 0;try{for(var u,c=function(){var n=u.value,r=G2(t.getWithExplicit(n),e.getWithExplicit(n),n,"legend",(function(t,e){switch(n){case"symbolType":return function(t,e){if("circle"===e.value)return e;return t}(t,e);case"title":return Q0(t,e);case"type":return i=!0,q2("symbol")}return H2(t,e,n,"legend")}));t.setWithExplicit(n,r)},l=CZ[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)c()}catch(f){o=!0,s=f}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i&&(((t.implicit||{}).encode||{}).gradient&&RV(t.implicit,["encode","gradient"]),((t.explicit||{}).encode||{}).gradient&&RV(t.explicit,["encode","gradient"])),t}}function u3(t){var e=t.component.legends,n={},r=!0,i=!1,a=void 0;try{for(var o,s=AV(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=t.getScaleComponent(u),l=pV(c.get("domains"));if(n[l]){var f=!0,h=!1,d=void 0;try{for(var p,v=n[l][Symbol.iterator]();!(f=(p=v.next()).done);f=!0){s3(p.value,e[u])||n[l].push(e[u])}}catch(g){h=!0,d=g}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}else n[l]=[e[u].clone()]}}catch(g){i=!0,a=g}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return _V(TV(n)).map((function(t){var e=t.combine();if(e.encode&&e.encode.symbols){var n=e.encode.symbols.update;!n.fill||"transparent"===n.fill.value||n.stroke||e.stroke||(n.stroke={value:"transparent"}),e.fill&&delete n.fill}return e}))}function c3(t){return D5(t)||j5(t)||C5(t)?function(t){return t.children.reduce((function(t,e){return t.concat(e.assembleProjections())}),l3(t))}(t):l3(t)}function l3(t){var e=t.component.projection;if(!e||e.merged)return[];var n=e.combine(),r=n.name,i=S(n,["name"]);if(e.data){var a={signal:"[".concat(e.size.map((function(t){return t.signal})).join(", "),"]")},o=e.data.reduce((function(e,n){var r=y0(n)?n.signal:"data('".concat(t.lookupDataSource(n),"')");return mV(e,r)||e.push(r),e}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:a,fit:{signal:o.length>1?"[".concat(o.join(", "),"]"):o[0]}},i)]}return[Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}},i)]}var f3=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],h3=function(t){function e(t,n,r,i){var a;return Object(vO.a)(this,e),(a=Object(vQ.a)(this,Object(gQ.a)(e).call(this,Object.assign({},n),{name:t}))).specifiedProjection=n,a.size=r,a.data=i,a.merged=!1,a}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"isFit",get:function(){return!!this.data}}]),e}(U2);function d3(t){t.component.projection=A5(t)?function(t){if(t.hasProjection){var e=t.specifiedProjection,n=!(e&&(null!=e.scale||null!=e.translate)),r=n?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,i=n?function(t){var e=[];[[O$,S$],[T$,A$]].forEach((function(n){(t.channelHasField(n[0])||t.channelHasField(n[1]))&&e.push({signal:t.getName("geojson_".concat(e.length))})})),t.channelHasField(R$)&&t.fieldDef(R$).type===cJ&&e.push({signal:t.getName("geojson_".concat(e.length))});0===e.length&&e.push(t.requestDataName(YQ));return e}(t):void 0;return new h3(t.projectionName(!0),Object.assign({},t.config.projection||{},e||{}),r,i)}return}(t):function(t){if(0===t.children.length)return;var e;t.children.forEach((function(t){return d3(t)}));var n=bV(t.children,(function(t){var n=t.component.projection;if(n){if(e){var r=function(t,e){var n=bV(f3,(function(n){return!t.explicit.hasOwnProperty(n)&&!e.explicit.hasOwnProperty(n)||!(!t.explicit.hasOwnProperty(n)||!e.explicit.hasOwnProperty(n)||pV(t.get(n))!==pV(e.get(n)))}));if(pV(t.size)===pV(e.size)){if(n)return t;if(pV(t.explicit)===pV({}))return e;if(pV(e.explicit)===pV({}))return t}return null}(e,n);return r&&(e=r),!!r}return e=n,!0}return!0}));if(e&&n){var r=t.projectionName(!0),i=new h3(r,e.specifiedProjection,e.size,fV(e.data));return t.children.forEach((function(t){var e=t.component.projection;if(e){var n;if(e.isFit)(n=i.data).push.apply(n,Object(id.a)(t.component.projection.data));t.renameProjection(e.get("name"),r),e.merged=!0}})),i}return}(t)}var p3=n(76),v3=n(78),g3=n(77);function m3(t,e){return"".concat(BJ(t),"_").concat(e)}function y3(t,e,n){var r=m3(MJ(n,void 0)||{},e);return t.getName("".concat(r,"_bins"))}function b3(t,e,n){var r;r=function(t){return"as"in t}(t)?HY(t.as)?[t.as,"".concat(t.as,"_end")]:[t.as[0],t.as[1]]:[bJ(t,{forAs:!0}),bJ(t,{binSuffix:"end",forAs:!0})];var i=MJ(e,void 0)||{},a=m3(i,t.field),o=function(t,e){return{signal:t.getName("".concat(e,"_bins")),extentSignal:t.getName("".concat(e,"_extent"))}}(n,a),s=o.signal,u=o.extentSignal;return{key:a,binComponent:Object.assign({bin:i,field:t.field,as:[r]},s?{signal:s}:{},u?{extentSignal:u}:{})}}var _3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).bins=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.bins))}},{key:"merge",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=AV(t.bins)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s in this.bins?(e(t.bins[s].signal,this.bins[s].signal),this.bins[s].as=kV([].concat(Object(id.a)(this.bins[s].as),Object(id.a)(t.bins[s].as)),vV)):this.bins[s]=t.bins[s]}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=t.children[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;t.removeChild(d),d.parent=this}}catch(p){c=!0,l=p}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}t.remove()}},{key:"producedFields",value:function(){return new Set(_V(_V(TV(this.bins).map((function(t){return t.as})))))}},{key:"dependentFields",value:function(){return new Set(TV(this.bins).map((function(t){return t.field})))}},{key:"hash",value:function(){return"Bin ".concat(vV(this.bins))}},{key:"assemble",value:function(){return _V(TV(this.bins).map((function(t){var e,n=[],r=(e=t.as,Object(p3.a)(e)||Object(v3.a)(e)||Object(g3.a)()),i=r[0],a=r.slice(1),o=Object.assign({type:"bin",field:FV(t.field),as:i,signal:t.signal},t.bin);!t.bin.extent&&t.extentSignal&&(n.push({type:"extent",field:FV(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);var s=!0,u=!1,c=void 0;try{for(var l,f=a[Symbol.iterator]();!(s=(l=f.next()).done);s=!0)for(var h=l.value,d=0;d<2;d++)n.push({type:"formula",expr:bJ({field:i[d]},{expr:"datum"}),as:h[d]})}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})))}}],[{key:"makeFromEncoding",value:function(t,n){var r=n.reduceFieldDef((function(t,e,r){if(pJ(e)&&UJ(e.bin)){var i=b3(e,e.bin,n),a=i.key,o=i.binComponent;t[a]=Object.assign({},o,t[a],function(t,e,n,r){if(IJ(e,n)){var i=A5(t)&&(t.axis(n)||t.legend(n))||{},a=bJ(e,{expr:"datum"}),o=bJ(e,{expr:"datum",binSuffix:"end"});return{formulaAs:bJ(e,{binSuffix:"range",forAs:!0}),formula:$0(a,o,i.format,r)}}return{}}(n,e,r,n.config))}return t}),{});return 0===AV(r).length?null:new e(t,r)}},{key:"makeFromTransform",value:function(t,n,r){var i=b3(n,n.bin,r),a=i.key,o=i.binComponent;return new e(t,Object(fp.a)({},a,o))}}]),e}(t1),w3=function(t){function e(t){var n,r;if(Object(vO.a)(this,e),n=Object(vQ.a)(this,Object(gQ.a)(e).call(this,null)),qQ(t=t||{name:"source"})||(r=t.format?Object.assign({},dV(t.format,["parse"])):{}),UQ(t))n._data={values:t.values};else if(BQ(t)){if(n._data={url:t.url},!r.type){var i=/(?:\.([^.]+))?$/.exec(t.url)[1];mV(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else HQ(t)?n._data={values:[{type:"Sphere"}]}:(zQ(t)||qQ(t))&&(n._data={});return n._generator=qQ(t),t.name&&(n._name=t.name),r&&AV(r).length>0&&(n._data.format=r),n}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"hasName",value:function(){return!!this._name}},{key:"remove",value:function(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function(){return Object.assign({name:this._name},this._data,{transform:[]})}},{key:"data",get:function(){return this._data}},{key:"isGenerator",get:function(){return this._generator}},{key:"dataName",get:function(){return this._name},set:function(t){this._name=t}},{key:"parent",set:function(t){throw new Error("Source nodes have to be roots.")}}]),e}(t1);function x3(t){var e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=o.children[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;if(h.parent!==o)return console.error("Dataflow graph is inconsistent.",o,h),!1}}catch(d){u=!0,c=d}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}if(!x3(o.children))return!1}}catch(d){n=!0,r=d}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return!0}var k3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).params=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,this.params)}},{key:"assemble",value:function(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),e}(t1),E3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).params=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,this.params)}},{key:"producedFields",value:function(){return new Set([this.params.as||"data"])}},{key:"assemble",value:function(){return Object.assign({type:"sequence"},this.params)}}]),e}(t1);function S3(t){return t instanceof w3||t instanceof k3||t instanceof E3}var O3=function(){function t(){Object(vO.a)(this,t),this._mutated=!1}return Object(gO.a)(t,[{key:"setMutated",value:function(){this._mutated=!0}},{key:"mutatedFlag",get:function(){return this._mutated}}]),t}(),A3=function(t){function e(){var t;return Object(vO.a)(this,e),(t=Object(vQ.a)(this,Object(gQ.a)(e).call(this)))._continue=!1,t}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"setContinue",value:function(){this._continue=!0}},{key:"reset",value:function(){}},{key:"optimizeNextFromLeaves",value:function(t){if(S3(t))return!1;var e=t.parent;return this.run(t).continueFlag&&this.optimizeNextFromLeaves(e),this.mutatedFlag}},{key:"continueFlag",get:function(){return this._continue}},{key:"flags",get:function(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function(t){var e=t.continueFlag,n=t.mutatedFlag;e&&this.setContinue(),n&&this.setMutated()}}]),e}(O3),T3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),e}(O3);function C3(t,e,n,r){if(pJ(n)&&UJ(n.bin))t.add(bJ(n,{})),t.add(bJ(n,{binSuffix:"end"})),IJ(n,e)&&t.add(bJ(n,{binSuffix:"range"}));else if(e in G$){var i=function(t){switch(t){case S$:return"y";case A$:return"y2";case O$:return"x";case T$:return"x2"}}(e);t.add(r.getName(i))}else t.add(bJ(n));return t}var j3=function(t){function e(t,n,r){var i;return Object(vO.a)(this,e),(i=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).dimensions=n,i.measures=r,i}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,new Set(this.dimensions),fV(this.measures))}},{key:"merge",value:function(t){return function(t,e){if(t.size!==e.size)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!e.has(s))return!1}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(this.dimensions,t.dimensions)?(function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=AV(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=e[s],c=!0,l=!1,f=void 0;try{for(var h,d=AV(u)[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;s in t?t[s][p]=new Set([].concat(Object(id.a)(t[s][p]||[]),Object(id.a)(u[p]))):t[s]=Object(fp.a)({},p,u[p])}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(v){r=!0,i=v}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(this.measures,t.measures),!0):(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];PK.debug.apply(PK,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function(t){t.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function(){return new Set([].concat(Object(id.a)(this.dimensions),Object(id.a)(AV(this.measures))))}},{key:"producedFields",value:function(){var t=new Set,e=!0,n=!1,r=void 0;try{for(var i,a=AV(this.measures)[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=AV(this.measures[o])[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=this.measures[o][h];0===d.size?t.add("".concat(h,"_").concat(o)):d.forEach(t.add,t)}}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}}catch(p){n=!0,r=p}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}},{key:"hash",value:function(){return"Aggregate ".concat(vV({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function(){var t=[],e=[],n=[],r=!0,i=!1,a=void 0;try{for(var o,s=AV(this.measures)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=!0,l=!1,f=void 0;try{for(var h,d=AV(this.measures[u])[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value,v=!0,g=!1,m=void 0;try{for(var y,b=this.measures[u][p][Symbol.iterator]();!(v=(y=b.next()).done);v=!0){var _=y.value;n.push(_),t.push(p),e.push("*"===u?null:FV(u))}}catch(w){g=!0,m=w}finally{try{v||null==b.return||b.return()}finally{if(g)throw m}}}}catch(w){l=!0,f=w}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}catch(w){i=!0,a=w}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{type:"aggregate",groupby:Object(id.a)(this.dimensions),ops:t,fields:e,as:n}}},{key:"groupBy",get:function(){return this.dimensions}}],[{key:"makeFromEncoding",value:function(t,n){var r=!1;n.forEachFieldDef((function(t){t.aggregate&&(r=!0)}));var i={},a=new Set;return r?(n.forEachFieldDef((function(t,e){var r=t.aggregate,o=t.field;if(r)if("count"===r)i["*"]=i["*"]||{},i["*"].count=new Set([bJ(t,{forAs:!0})]);else{if(f$(r)||h$(r)){var s=f$(r)?"argmin":"argmax",u=r[s];i[u]=i[u]||{},i[u][s]=new Set([bJ({op:s,field:u},{forAs:!0})])}else i[o]=i[o]||{},i[o][r]=new Set([bJ(t,{forAs:!0})]);dX(e)&&"unaggregated"===n.scaleDomain(e)&&(i[o]=i[o]||{},i[o].min=new Set([bJ({field:o,aggregate:"min"},{forAs:!0})]),i[o].max=new Set([bJ({field:o,aggregate:"max"},{forAs:!0})]))}else C3(a,e,t,n)})),a.size+AV(i).length===0?null:new e(t,a,i)):null}},{key:"makeFromTransform",value:function(t,n){var r=new Set,i={},a=!0,o=!1,s=void 0;try{for(var u,c=n.aggregate[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=l.op,h=l.field,d=l.as;f&&("count"===f?(i["*"]=i["*"]||{},i["*"].count=new Set([d||bJ(l,{forAs:!0})])):(i[h]=i[h]||{},i[h][f]=new Set([d||bJ(l,{forAs:!0})])))}}catch(_){o=!0,s=_}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var p=!0,v=!1,g=void 0;try{for(var m,y=(n.groupby||[])[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value;r.add(b)}}catch(_){v=!0,g=_}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}return r.size+AV(i).length===0?null:new e(t,r,i)}}]),e}(t1),D3=function(t){function e(t,n,r,i){var a;Object(vO.a)(this,e),(a=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).model=n,a.name=r,a.data=i;var o=!0,s=!1,u=void 0;try{for(var c,l=K$[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=n.facet[f];if(h){var d=h.bin,p=h.sort;a[f]=Object.assign({name:n.getName("".concat(f,"_domain")),fields:[bJ(h)].concat(Object(id.a)(UJ(d)?[bJ(h,{binSuffix:"end"})]:[]))},F0(p)?{sortField:p}:qY(p)?{sortIndexField:i1(h,f)}:{})}}}catch(v){s=!0,u=v}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return a.childModel=n.child,a}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"hash",value:function(){var t="Facet",e=!0,n=!1,r=void 0;try{for(var i,a=K$[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;this[o]&&(t+=" ".concat(o.charAt(0),":").concat(vV(this[o])))}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}},{key:"getSource",value:function(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function(){for(var t={},e=0,n=["x","y"];e<n.length;e++){var r=n[e],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(BZ(a)&&b0(o)){var s=u5(c5(this.childModel,r));s?t[r]=s:NK("Unknown field for ${channel}.  Cannot calculate view size.")}}}return t}},{key:"assembleRowColumnHeaderData",value:function(t,e,n){var r={row:"y",column:"x"}[t],i=[],a=[],o=[];n&&n[r]&&(e?(i.push("distinct_".concat(n[r])),a.push("max")):(i.push(n[r]),a.push("distinct")),o.push("distinct_".concat(n[r])));var s=this[t],u=s.sortField,c=s.sortIndexField;if(u){var l=u.op,f=void 0===l?P0:l,h=u.field;i.push(h),a.push(f),o.push(bJ(u,{forAs:!0}))}else c&&(i.push(c),a.push("max"),o.push(c));return{name:this[t].name,source:e||this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},i.length?{fields:i,ops:a,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function(t){var e=this.model.layout.columns,n=this.model.component.layoutHeaders,r=[],i={},a=!0,o=!1,s=void 0;try{for(var u,c=u1[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=!0,h=!1,d=void 0;try{for(var p,v=c1[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value,m=n[l]&&n[l][g]||[],y=!0,b=!1,_=void 0;try{for(var w,x=m[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;if(k.axes&&k.axes.length>0){i[l]=!0;break}}}catch(T){b=!0,_=T}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}}catch(T){h=!0,d=T}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}if(i[l]){var E='length(data("'.concat(this.facet.name,'"))'),S="row"===l?e?{signal:"ceil(".concat(E," / ").concat(e,")")}:1:e?{signal:"min(".concat(E,", ").concat(e,")")}:{signal:E};r.push({name:"".concat(this.facet.name,"_").concat(l),transform:[{type:"sequence",start:0,stop:S}]})}}}catch(T){o=!0,s=T}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var O=i.row,A=i.column;return(O||A)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}},{key:"assemble",value:function(){var t=[],e=null,n=this.getChildIndependentFieldsWithStep(),r=this.column,i=this.row,a=this.facet;if(r&&i&&(n.x||n.y)){e="cross_".concat(this.column.name,"_").concat(this.row.name);var o=[].concat(n.x||[],n.y||[]),s=o.map((function(){return"distinct"}));t.push({name:e,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:s}]})}for(var u=0,c=[b$,y$];u<c.length;u++){var l=c[u];this[l]&&t.push(this.assembleRowColumnHeaderData(l,e,n))}if(a){var f=this.assembleFacetHeaderData(n);f&&t.push.apply(t,Object(id.a)(f))}return t}},{key:"fields",get:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,a=K$[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;this[o]&&this[o].fields&&t.push.apply(t,Object(id.a)(this[o].fields))}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}}]),e}(t1),R3=function(t){function e(t,n,r){var i;return Object(vO.a)(this,e),(i=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).model=n,i.filter=r,i.expr=u2(i.model,i.filter,Object(IQ.a)(i)),i._dependentFields=n1(i.expr),i}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,this.model,fV(this.filter))}},{key:"dependentFields",value:function(){return this._dependentFields}},{key:"assemble",value:function(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function(){return"Filter ".concat(this.expr)}}]),e}(t1);function M3(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function P3(t,e){var n=PV(t);if("number"===e)return"toNumber(".concat(n,")");if("boolean"===e)return"toBoolean(".concat(n,")");if("string"===e)return"toString(".concat(n,")");if("date"===e)return"toDate(".concat(n,")");if("flatten"===e)return n;if(0===e.indexOf("date:")){var r=M3(e.slice(5,e.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===e.indexOf("utc:")){var i=M3(e.slice(4,e.length));return"utcParse(".concat(n,",'").concat(i,"')")}return NK(RK.unrecognizedParse(e)),null}var F3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t)))._parse=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this._parse))}}]),Object(gO.a)(e,[{key:"hash",value:function(){return"Parse ".concat(vV(this._parse))}},{key:"merge",value:function(t){this._parse=Object.assign({},this._parse,t.parse),t.remove()}},{key:"assembleFormatParse",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,a=AV(this._parse)[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=this._parse[o];1===LV(o)&&(t[o]=s)}}catch(u){n=!0,r=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}},{key:"producedFields",value:function(){return new Set(AV(this._parse))}},{key:"dependentFields",value:function(){return new Set(AV(this._parse))}},{key:"assembleTransforms",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return AV(this._parse).filter((function(t){return!e||LV(t)>1})).map((function(e){var n=P3(e,t._parse[e]);return n?{type:"formula",expr:n,as:NV(e)}:null})).filter((function(t){return null!==t}))}},{key:"parse",get:function(){return this._parse}}],[{key:"makeExplicit",value:function(t,e,n){var r={},i=e.data;return!qQ(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(t,r,{},n)}},{key:"makeImplicitFromFilterTransform",value:function(t,e,n){var r={};return function t(e,n){if(uV(e))t(e.not,n);else if(sV(e)){var r=!0,i=!1,a=void 0;try{for(var o,s=e.and[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){t(o.value,n)}}catch(d){i=!0,a=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else if(oV(e)){var u=!0,c=!1,l=void 0;try{for(var f,h=e.or[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){t(f.value,n)}}catch(d){c=!0,l=d}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}}else n(e)}(e.filter,(function(t){if(e0(t)){var e=null;$Q(t)?e=t.equal:QQ(t)?e=t.range[0]:t0(t)&&(e=(t.oneOf||t.in)[0]),e&&(IK(e)?r[t.field]="date":ZY(e)?r[t.field]="number":HY(e)&&(r[t.field]="string")),t.timeUnit&&(r[t.field]="date")}})),0===AV(r).length?null:this.makeWithAncestors(t,{},r,n)}},{key:"makeImplicitFromEncoding",value:function(t,e,n){var r={};function i(t){var e;FJ(t)?r[t.field]="date":"quantitative"===t.type&&((e=t.aggregate)&&HY(e)&&mV(["min","max"],e))?r[t.field]="number":LV(t.field)>1?t.field in r||(r[t.field]="flatten"):mJ(t)&&F0(t.sort)&&LV(t.sort.field)>1&&(t.sort.field in r||(r[t.sort.field]="flatten"))}if((A5(e)||T5(e))&&e.forEachFieldDef((function(t,n){if(pJ(t))i(t);else{var r=iX(n),a=e.fieldDef(r);i(Object.assign({},t,{type:a.type}))}})),A5(e)){var a=e.mark,o=e.markDef,s=e.encoding;if(e$(a)&&!e.encoding.order){var u=s["horizontal"===o.orient?"y":"x"];!dJ(u)||"quantitative"!==u.type||u.field in r||(r[u.field]="number")}}return this.makeWithAncestors(t,{},r,n)}},{key:"makeWithAncestors",value:function(t,n,r,i){var a=!0,o=!1,s=void 0;try{for(var u,c=AV(r)[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,f=i.getWithExplicit(l);void 0!==f.value&&(f.explicit||f.value===r[l]||"derived"===f.value||"flatten"===r[l]?delete r[l]:NK(RK.differentParse(l,r[l],f.value)))}}catch(T){o=!0,s=T}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var h=!0,d=!1,p=void 0;try{for(var v,g=AV(n)[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value,y=i.get(m);void 0!==y&&(y===n[m]?delete n[m]:NK(RK.differentParse(m,n[m],y)))}}catch(T){d=!0,p=T}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}var b=new U2(n,r);i.copyAll(b);var _={},w=!0,x=!1,k=void 0;try{for(var E,S=AV(b.combine())[Symbol.iterator]();!(w=(E=S.next()).done);w=!0){var O=E.value,A=b.get(O);null!==A&&(_[O]=A)}}catch(T){x=!0,k=T}finally{try{w||null==S.return||S.return()}finally{if(x)throw k}}return 0===AV(_).length||i.parseNothing?null:new e(t,_)}}]),e}(t1),N3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=kV(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t=new Set;return this.transform.groupby&&this.transform.groupby.forEach((function(e){return t.add(e)})),this.transform.joinaggregate.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach((function(e){return t.add(e)})),t}},{key:"producedFields",value:function(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){return t.as||bJ(t)}},{key:"hash",value:function(){return"JoinAggregateTransform ".concat(vV(this.transform))}},{key:"assemble",value:function(){var t=[],e=[],n=[],r=!0,i=!1,a=void 0;try{for(var o,s=this.transform.joinaggregate[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.push(u.op),n.push(this.getDefaultName(u)),t.push(void 0===u.field?null:u.field)}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==c?{groupby:c}:{})}}]),e}(t1);var L3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t)))._stack=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this._stack))}}]),Object(gO.a)(e,[{key:"addDimensions",value:function(t){var e;(e=this._stack.facetby).push.apply(e,Object(id.a)(t))}},{key:"dependentFields",value:function(){var t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach((function(e){return t.add(e)})),this._stack.facetby.forEach((function(e){return t.add(e)})),this._stack.sort.field.forEach((function(e){return t.add(e)})),t}},{key:"producedFields",value:function(){return new Set(this._stack.as)}},{key:"hash",value:function(){return"Stack ".concat(vV(this._stack))}},{key:"getGroupbyFields",value:function(){var t=this._stack,e=t.dimensionFieldDef,n=t.impute,r=t.groupby;return e?e.bin?n?[bJ(e,{binSuffix:"mid"})]:[bJ(e,{}),bJ(e,{binSuffix:"end"})]:[bJ(e)]:r||[]}},{key:"assemble",value:function(){var t=[],e=this._stack,n=e.facetby,r=e.dimensionFieldDef,i=e.stackField,a=e.stackby,o=e.sort,s=e.offset,u=e.impute,c=e.as;return u&&r&&(r.bin&&t.push({type:"formula",expr:"0.5*"+bJ(r,{expr:"datum"})+"+0.5*"+bJ(r,{expr:"datum",binSuffix:"end"}),as:bJ(r,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[].concat(Object(id.a)(a),Object(id.a)(n)),key:bJ(r,{binSuffix:"mid"}),method:"value",value:0})),t.push({type:"stack",groupby:[].concat(Object(id.a)(this.getGroupbyFields()),Object(id.a)(n)),field:i,sort:o,as:c,offset:s}),t}},{key:"stack",get:function(){return this._stack}}],[{key:"makeFromTransform",value:function(t,n){var r=n.stack,i=n.groupby,a=n.as,o=n.offset,s=void 0===o?"zero":o,u=[],c=[];if(void 0!==n.sort){var l=!0,f=!1,h=void 0;try{for(var d,p=n.sort[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;u.push(v.field),c.push(IV(v.order,"ascending"))}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}}return new e(t,{stackField:r,groupby:i,offset:s,sort:{field:u,order:c},facetby:[],as:function(t){return qY(t)&&t.every((function(t){return HY(t)}))&&t.length>1}(a)?a:HY(a)?[a,a+"_end"]:[n.stack+"_start",n.stack+"_end"]})}},{key:"makeFromEncoding",value:function(t,n){var r,i=n.stack,a=n.encoding;if(!i)return null;i.groupbyChannel&&(r=jJ(a[i.groupbyChannel]));var o,s=function(t){return t.stack.stackBy.reduce((function(t,e){var n=bJ(e.fieldDef);return n&&t.push(n),t}),[])}(n),u=n.encoding.order;return o=qY(u)||dJ(u)?K0(u):s.reduce((function(t,e){return t.field.push(e),t.order.push("descending"),t}),{field:[],order:[]}),new e(t,{dimensionFieldDef:r,stackField:n.vgField(i.fieldChannel),facetby:[],stackby:s,sort:o,offset:i.offset,impute:i.impute,as:[n.vgField(i.fieldChannel,{suffix:"start",forAs:!0}),n.vgField(i.fieldChannel,{suffix:"end",forAs:!0})]})}}]),e}(t1),I3=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform))}},{key:"addDimensions",value:function(t){this.transform.groupby=kV(this.transform.groupby.concat(t),(function(t){return t}))}},{key:"dependentFields",value:function(){var t=new Set;return(this.transform.groupby||[]).forEach((function(e){return t.add(e)})),(this.transform.sort||[]).forEach((function(e){return t.add(e.field)})),this.transform.window.map((function(t){return t.field})).filter((function(t){return void 0!==t})).forEach((function(e){return t.add(e)})),t}},{key:"producedFields",value:function(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function(t){return t.as||bJ(t)}},{key:"hash",value:function(){return"WindowTransform ".concat(vV(this.transform))}},{key:"assemble",value:function(){var t=[],e=[],n=[],r=[],i=!0,a=!1,o=void 0;try{for(var s,u=this.transform.window[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;e.push(c.op),n.push(this.getDefaultName(c)),r.push(void 0===c.param?null:c.param),t.push(void 0===c.field?null:c.field)}}catch(x){a=!0,o=x}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var l=this.transform.frame,f=this.transform.groupby;if(l&&null===l[0]&&null===l[1]&&e.every((function(t){return d$(t)})))return Object.assign({type:"joinaggregate",as:n,ops:e,fields:t},void 0!==f?{groupby:f}:{});var h=[],d=[];if(void 0!==this.transform.sort){var p=!0,v=!1,g=void 0;try{for(var m,y=this.transform.sort[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value;h.push(b.field),d.push(b.order||"ascending")}}catch(x){v=!0,g=x}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}}var _={field:h,order:d},w=this.transform.ignorePeers;return Object.assign({type:"window",params:r,as:n,ops:e,fields:t,sort:_},void 0!==w?{ignorePeers:w}:{},void 0!==f?{groupby:f}:{},void 0!==l?{frame:l}:{})}}]),e}(t1),B3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){var e=t.parent;if(t instanceof F3){if(S3(e))return this.flags;if(e.numChildren()>1)return this.setContinue(),this.flags;if(e instanceof F3)this.setMutated(),e.merge(t);else{if(OV(e.producedFields(),t.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),t.swapWithParent()}}return this.setContinue(),this.flags}}]),e}(A3),U3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"mergeNodes",value:function(t,e){var n=e.shift(),r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;t.removeChild(u),u.parent=n,u.remove()}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"run",value:function(t){for(var e=t.children.map((function(t){return t.hash()})),n={},r=0;r<e.length;r++)void 0===n[e[r]]?n[e[r]]=[t.children[r]]:n[e[r]].push(t.children[r]);var i=!0,a=!1,o=void 0;try{for(var s,u=AV(n)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;n[c].length>1&&(this.setMutated(),this.mergeNodes(t,n[c]))}}catch(g){a=!0,o=g}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var l=!0,f=!1,h=void 0;try{for(var d,p=t.children[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var v=d.value;this.run(v)}}catch(g){f=!0,h=g}finally{try{l||null==p.return||p.return()}finally{if(f)throw h}}return this.mutatedFlag}}]),e}(T3),z3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){return t instanceof e1||t.numChildren()>0||t instanceof D3?this.flags:(this.setMutated(),t.remove(),this.flags)}}]),e}(A3),q3=function(t){function e(){var t;return Object(vO.a)(this,e),(t=Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))).fields=new Set,t}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){if(this.setContinue(),t instanceof E1){var e=t.producedFields();EV(e,this.fields)?(this.setMutated(),t.remove()):this.fields=new Set([].concat(Object(id.a)(this.fields),Object(id.a)(e)))}return this.flags}},{key:"reset",value:function(){this.fields.clear()}}]),e}(A3),W3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){this.setContinue();var e=t.parent.children.filter((function(t){return t instanceof E1})),n=e.pop(),r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.setMutated(),n.merge(u)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this.flags}}]),e}(A3);function H3(t){if(t instanceof D3)if(1!==t.numChildren()||t.children[0]instanceof e1){var e=t.model.component.data.main;!function t(e){if(e instanceof e1&&e.type===YQ&&1===e.numChildren()){var n=e.children[0];n instanceof D3||(n.swapWithParent(),t(e))}}(e);var n=(l=t,function t(e){if(!(e instanceof D3)){var n=e.clone();if(n instanceof e1){var r=K3+n.getSource();n.setSource(r),l.model.component.data.outputNodes[r]=n}else(n instanceof j3||n instanceof L3||n instanceof I3||n instanceof N3)&&n.addDimensions(l.fields);return _V(e.children.map(t)).forEach((function(t){return t.parent=n})),[n]}return _V(e.children.map(t))}),r=_V(t.children.map(n)),i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.parent=e}}catch(f){a=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var c=t.children[0];(c instanceof j3||c instanceof L3||c instanceof I3||c instanceof N3)&&c.addDimensions(t.fields),c.swapWithParent(),H3(t)}else t.children.map(H3);var l}var G3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){t instanceof e1&&!t.isRequired()&&(this.setMutated(),t.remove());var e=!0,n=!1,r=void 0;try{for(var i,a=t.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;this.run(o)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return this.mutatedFlag}}]),e}(T3),Y3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){var e=t.parent,n=Object(id.a)(e.children),r=e.children.filter((function(t){return t instanceof F3}));if(e.numChildren()>1&&r.length>=1){var i={},a=new Set,o=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value.parse,h=!0,d=!1,p=void 0;try{for(var v,g=AV(f)[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;m in i?i[m]!==f[m]&&a.add(m):i[m]=f[m]}}catch(N){d=!0,p=N}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}}}catch(N){s=!0,u=N}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}var y=!0,b=!1,_=void 0;try{for(var w,x=a[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){delete i[w.value]}}catch(N){b=!0,_=N}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}if(0!==AV(i).length){this.setMutated();var k=new F3(e,i),E=!0,S=!1,O=void 0;try{for(var A,T=n[Symbol.iterator]();!(E=(A=T.next()).done);E=!0){var C=A.value;if(C instanceof F3){var j=!0,D=!1,R=void 0;try{for(var M,P=AV(i)[Symbol.iterator]();!(j=(M=P.next()).done);j=!0){var F=M.value;delete C.parse[F]}}catch(N){D=!0,R=N}finally{try{j||null==P.return||P.return()}finally{if(D)throw R}}}e.removeChild(C),C.parent=k,C instanceof F3&&0===AV(C.parse).length&&C.remove()}}catch(N){S=!0,O=N}finally{try{E||null==T.return||T.return()}finally{if(S)throw O}}}}return this.setContinue(),this.flags}}]),e}(A3),V3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){var e=t.parent,n=e.children.filter((function(t){return t instanceof j3})),r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=vV(c.groupBy);l in r||(r[l]=[]),r[l].push(c)}}catch(E){a=!0,o=E}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var f=!0,h=!1,d=void 0;try{for(var p,v=AV(r)[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=r[p.value];if(g.length>1){var m=g.pop(),y=!0,b=!1,_=void 0;try{for(var w,x=g[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;m.merge(k)&&(e.removeChild(k),k.parent=m,k.remove(),this.setMutated())}}catch(E){b=!0,_=E}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}}}catch(E){h=!0,d=E}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}return this.setContinue(),this.flags}}]),e}(A3),$3=function(t){function e(t){var n;return Object(vO.a)(this,e),(n=Object(vQ.a)(this,Object(gQ.a)(e).call(this))).model=t,n}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){var e=t.parent,n=!(S3(e)||e instanceof R3||e instanceof F3),r=[],i=[],a=!0,o=!1,s=void 0;try{for(var u,c=e.children[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;l instanceof _3&&(n&&!OV(e.producedFields(),l.dependentFields())?r.push(l):i.push(l))}}catch(S){o=!0,s=S}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(r.length>0){var f=r.pop(),h=!0,d=!1,p=void 0;try{for(var v,g=r[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;f.merge(m,this.model.renameSignal.bind(this.model))}}catch(S){d=!0,p=S}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}this.setMutated(),e instanceof _3?e.merge(f,this.model.renameSignal.bind(this.model)):f.swapWithParent()}if(i.length>1){var y=i.pop(),b=!0,_=!1,w=void 0;try{for(var x,k=i[Symbol.iterator]();!(b=(x=k.next()).done);b=!0){var E=x.value;y.merge(E,this.model.renameSignal.bind(this.model))}}catch(S){_=!0,w=S}finally{try{b||null==k.return||k.return()}finally{if(_)throw w}}this.setMutated()}return this.setContinue(),this.flags}}]),e}(A3),X3=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"run",value:function(t){var e=t.parent,n=Object(id.a)(e.children);if(!yV(n,(function(t){return t instanceof e1}))||e.numChildren()<=1)return this.setContinue(),this.flags;var r,i=[],a=!0,o=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;if(l instanceof e1){for(var f=l;1===f.numChildren();){var h=f.children[0];if(!(h instanceof e1))break;f=h}i.push.apply(i,Object(id.a)(f.children)),r?(e.removeChild(l),l.parent=r.parent,r.parent.removeChild(r),r.parent=f,this.setMutated()):r=f}else i.push(l)}}catch(b){o=!0,s=b}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(i.length){this.setMutated();var d=!0,p=!1,v=void 0;try{for(var g,m=i[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var y=g.value;y.parent.removeChild(y),y.parent=r}}catch(b){p=!0,v=b}finally{try{d||null==m.return||m.return()}finally{if(p)throw v}}}return this.setContinue(),this.flags}}]),e}(A3),K3="scale_",J3=5;function Z3(t){var e=[];return t.forEach((function t(n){0===n.numChildren()?e.push(n):n.children.forEach(t)})),e}function Q3(t){return t}function t5(t,e){return e.map((function(e){if(t instanceof A3){var n=t.optimizeNextFromLeaves(e);return t.reset(),n}return t.run(e)})).some(Q3)}function e5(t,e){var n=t.sources,r=new Set;return r.add(t5(new G3,n)),n=n.filter((function(t){return t.numChildren()>0})),r.add(t5(new z3,Z3(n))),n=n.filter((function(t){return t.numChildren()>0})),r.add(t5(new B3,Z3(n))),r.add(t5(new $3(e),Z3(n))),r.add(t5(new q3,Z3(n))),r.add(t5(new Y3,Z3(n))),r.add(t5(new V3,Z3(n))),r.add(t5(new W3,Z3(n))),r.add(t5(new U3,n)),r.add(t5(new X3,Z3(n))),t.sources=n,r.has(!0)}var n5=function(){function t(e){Object(vO.a)(this,t),Object.defineProperty(this,"signal",{enumerable:!0,get:e})}return Object(gO.a)(t,null,[{key:"fromName",value:function(e,n){return new t((function(){return e(n)}))}}]),t}();function r5(t){A5(t)?function(t){var e=t.specifiedScales,n=t.component.scales;AV(n).forEach((function(r){var i=e[r],a=i?i.domain:void 0,o=function(t,e){var n=t.getScaleComponent(e).get("type"),r=function(t,e,n,r){if("unaggregated"===t){var i=o5(e,n),a=i.valid,o=i.reason;if(!a)return void NK(o)}else if(void 0===t&&r.useUnaggregatedDomain){if(o5(e,n).valid)return"unaggregated"}return t}(t.scaleDomain(e),t.fieldDef(e),n,t.config.scale);r!==t.scaleDomain(e)&&(t.specifiedScales[e]=Object.assign({},t.specifiedScales[e],{domain:r}));if("x"===e&&t.channelHasField("x2"))return t.channelHasField("x")?G2(i5(n,r,t,"x"),i5(n,r,t,"x2"),"domain","scale",s5):i5(n,r,t,"x2");if("y"===e&&t.channelHasField("y2"))return t.channelHasField("y")?G2(i5(n,r,t,"y"),i5(n,r,t,"y2"),"domain","scale",s5):i5(n,r,t,"y2");return i5(n,r,t,e)}(t,r),s=n[r];if(s.setWithExplicit("domains",o),HZ(a)&&s.set("domainRaw",{signal:I1+vV(a)},!0),t.component.data.isFaceted){for(var u=t;!T5(u)&&u.parent;)u=u.parent;if("shared"===u.component.resolve.scale[r]){var c=!0,l=!1,f=void 0;try{for(var h,d=o.value[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;_0(p)&&(p.data=K3+p.data.replace(K3,""))}}catch(v){l=!0,f=v}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}}))}(t):function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=t.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){r5(i.value)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}var o=t.component.scales;AV(o).forEach((function(e){var n,r=null,i=!0,a=!1,u=void 0;try{for(var c,l=t.children[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var f=c.value.component.scales[e];if(f){n=void 0===n?f.getWithExplicit("domains"):G2(n,f.getWithExplicit("domains"),"domains","scale",s5);var h=f.get("domainRaw");r&&h&&r.signal!==h.signal&&NK("The same selection must be used to override scale domains in a layered view."),r=h}}}catch(s){a=!0,u=s}finally{try{i||null==l.return||l.return()}finally{if(a)throw u}}o[e].setWithExplicit("domains",n),r&&o[e].set("domainRaw",r,!0)}))}(t)}function i5(t,e,n,r){var i=n.fieldDef(r);if(e&&"unaggregated"!==e&&!HZ(e)){var a=i.type,o=i.timeUnit;return z2("temporal"===a||o?function(t,e,n){return t.map((function(t){var r=NJ(t,{timeUnit:n,type:e});return{signal:"{data: ".concat(r,"}")}}))}(e,a,o):[e])}var s=n.stack;if(s&&r===s.fieldChannel){if("normalize"===s.offset)return q2([[0,1]]);var u=n.requestDataName(YQ);return q2([{data:u,field:n.vgField(r,{suffix:"start"})},{data:u,field:n.vgField(r,{suffix:"end"})}])}var c=dX(r)?function(t,e,n){if(!BZ(n))return;var r=t.fieldDef(e),i=r.sort;if(N0(i))return{op:"min",field:i1(r,e),order:"ascending"};var a=null!==t.stack;if(F0(i))return a5(i,a);if(function(t){return!!t&&!!t.encoding}(i)){var o=i.encoding,s=i.order,u=t.fieldDef(o),c=u.aggregate,l=u.field;return a5({op:c,field:l,order:s},a)}if("descending"===i)return{op:"min",field:t.vgField(e),order:"descending"};if(mV(["ascending",void 0],i))return!0;return}(n,r,t):void 0;if("unaggregated"===e){var l=n.requestDataName(YQ),f=i.field;return q2([{data:l,field:bJ({field:f,aggregate:"min"})},{data:l,field:bJ({field:f,aggregate:"max"})}])}if(UJ(i.bin)){if(BZ(t))return q2("bin-ordinal"===t?[]:[{data:CV(c)?n.requestDataName(YQ):n.requestDataName(VQ),field:n.vgField(r,IJ(i,r)?{binSuffix:"range"}:{}),sort:!0!==c&&WY(c)?c:{field:n.vgField(r,{}),op:"min"}}]);var h=i.bin;if(UJ(h)){var d=y3(n,i.field,h);return q2([new n5((function(){var t=n.getSignalName(d);return"[".concat(t,".start, ").concat(t,".stop]")}))])}return q2([{data:n.requestDataName(YQ),field:n.vgField(r,{})}])}return q2(c?[{data:CV(c)?n.requestDataName(YQ):n.requestDataName(VQ),field:n.vgField(r),sort:c}]:[{data:n.requestDataName(YQ),field:n.vgField(r)}])}function a5(t,e){var n=t.op,r=t.field,i=t.order;return Object.assign({op:n||(e?"sum":P0)},r?{field:FV(r)}:{},i?{order:i}:{})}function o5(t,e){var n=t.aggregate,r=t.type;return n?HY(n)&&!m$[n]?{valid:!1,reason:RK.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===e?{valid:!1,reason:RK.unaggregatedDomainWithLogScale(t)}:{valid:!0}:{valid:!1,reason:RK.unaggregateDomainHasNoEffectForRawField(t)}}function s5(t,e,n,r){return t.explicit&&e.explicit&&NK(RK.mergeConflictingDomainProperty(n,r,t.value,e.value)),{explicit:t.explicit,value:[].concat(Object(id.a)(t.value),Object(id.a)(e.value))}}function u5(t){if(_0(t)&&HY(t.field))return t.field;if(function(t){return!qY(t)&&("fields"in t&&!("data"in t))}(t)){var e,n=!0,r=!1,i=void 0;try{for(var a,o=t.fields[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(_0(s)&&HY(s.field))if(e){if(e!==s.field)return NK("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),e}else e=s.field}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return NK("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),e}if(function(t){return!qY(t)&&("fields"in t&&"data"in t)}(t)){NK("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var u=t.fields[0];return HY(u)?u:void 0}}function c5(t,e){return function(t){var e=kV(t.map((function(t){if(_0(t)){t.sort;return S(t,["sort"])}return t})),vV),n=kV(t.map((function(t){if(_0(t)){var e=t.sort;return void 0===e||CV(e)||("count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}})).filter((function(t){return void 0!==t})),vV);if(0!==e.length){if(1===e.length){var r=t[0];if(_0(r)&&n.length>0){var i=n[0];return n.length>1&&(NK(RK.MORE_THAN_ONE_SORT),i=!0),Object.assign({},r,{sort:i})}return r}var a,o=kV(n.map((function(t){return CV(t)||"count"===t.op?t:(NK(RK.domainSortDropped(t)),!0)})),vV);1===o.length?a=o[0]:o.length>1&&(NK(RK.MORE_THAN_ONE_SORT),a=!0);var s=kV(t.map((function(t){return _0(t)?t.data:null})),(function(t){return t}));return 1===s.length&&null!==s[0]?Object.assign({data:s[0],fields:e.map((function(t){return t.field}))},a?{sort:a}:{}):Object.assign({fields:e},a?{sort:a}:{})}}(t.component.scales[e].get("domains").map((function(e){return _0(e)&&(e.data=t.lookupDataSource(e.data)),e})))}function l5(t){return D5(t)||j5(t)||C5(t)?t.children.reduce((function(t,e){return t.concat(l5(e))}),f5(t)):f5(t)}function f5(t){return AV(t.component.scales).reduce((function(e,n){var r=t.component.scales[n];if(r.merged)return e;var i=r.combine(),a=i.domainRaw,o=i.name,s=i.type,u=(i.domains,i.domainRaw,i.range,S(i,["name","type","domains","domainRaw","range"])),c=function(t,e,n){if(("x"===n||"y"===n)&&b0(t))return{step:{signal:e+"_step"}};return t}(i.range,o,n);a&&function(t){return t.signal.indexOf(I1)>=0}(a)&&(a=function(t,e){var n=JSON.parse(e.signal.replace(I1,"")),r=jV(n.selection),i=n.encoding,a=n.field,o=t.component.selection&&t.component.selection[r];if(!o){if(o=t.getSelectionComponent(r,n.selection),i||a){if(i&&!a){var s=o.project.items.filter((function(t){return t.channel===i}));!s.length||s.length>1?(a=o.project.items[0].field,NK((s.length?"Multiple ":"No ")+"matching ".concat(GY(i)," encoding found for selection ").concat(GY(n.selection),". ")+'Using "field": '.concat(GY(a),"."))):a=s[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&NK('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(GY(a),"."));return{signal:PV(a,r)}}return NK('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}}(t,a));var l=c5(t,n);return e.push(Object.assign({name:o,type:s},l?{domain:l}:{},a?{domainRaw:a}:{},{range:c},u)),e}),[])}var h5=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,{},{name:t}))).merged=!1,r.setWithExplicit("type",n),r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"domainDefinitelyIncludesZero",value:function(){return!1!==this.get("zero")||yV(this.get("domains"),(function(t){return qY(t)&&2===t.length&&t[0]<=0&&t[1]>=0}))}}]),e}(U2),d5=["range","rangeStep","scheme"];function p5(t){return"x"===t?"width":"y"===t?"height":void 0}function v5(t){var e=t.component.scales;hX.forEach((function(n){var r=e[n];if(r){var i=t.getScaleComponent(n),a=t.specifiedScales[n],o=t.fieldDef(n),s=p5(n),u=s?!!t.component.layoutSize.get(s):void 0,c=i.get("type"),l=mV(["point","band"],c)||!!a.rangeStep;s&&t.fit&&!u&&l&&(NK(RK.CANNOT_FIX_RANGE_STEP_WITH_FIT),u=!0);var f=function(t){var e=[],n=!0,r=!1,i=void 0;try{for(var a,o=uX[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=g5(t,s);void 0!==u&&e.push(u)}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}(t),h=function(t,e,n,r,i,a,o,s,u,c,l){var f=u||null===i.rangeStep,h=!0,d=!1,p=void 0;try{for(var v,g=d5[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;if(void 0!==i[m]){var y=$Z(n,m),b=XZ(t,m);if(y)if(b)NK(b);else switch(m){case"range":return z2(i[m]);case"scheme":return z2(m5(i[m]));case"rangeStep":var _=i[m];if(null!==_){if(!u)return z2({step:_});NK(RK.rangeStepDropped(t))}}else NK(RK.scalePropertyNotWorkWithScaleType(n,m,t))}}}catch(w){d=!0,p=w}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}return q2(function(t,e,n,r,i,a,o,s,u,c,l){switch(t){case w$:case x$:if(mV(["point","band"],n)&&!c)if(t===w$&&"text"===o){if(i.scale.textXRangeStep)return{step:i.scale.textXRangeStep}}else if(i.scale.rangeStep)return{step:i.scale.rangeStep};return t===x$&&UZ(n)?[n5.fromName(e,s),0]:[0,n5.fromName(e,s)];case M$:var f=function(t,e,n){if(e)return 0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(RK.incompatibleChannel("size",t))}(o,a,i),h=function(t,e,n){var r=n.scale;switch(t){case"bar":case"tick":if(void 0!==n.scale.maxBandSize)return n.scale.maxBandSize;var i=b5(e,n.scale);return ZY(i)?i-1:new n5((function(){return"".concat(i.signal," - 1")}));case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var a=b5(e,r);return ZY(a)?Math.pow(y5*a,2):new n5((function(){return"pow(".concat(y5," * ").concat(a.signal,", 2)")}))}throw new Error(RK.incompatibleChannel("size",t))}(o,u,i);return qZ(n)?function(t,e,n){var r=function(){var r=y0(e)?e.signal:e,i="(".concat(r," - ").concat(t,") / (").concat(n," - 1)");return"sequence(".concat(t,", ").concat(e," + ").concat(i,", ").concat(i,")")};return y0(e)?new n5(r):{signal:r()}}(f,h,function(t,e,n,r){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return void 0!==n&&qY(n)?n.length+1:(NK(RK.domainRequiredForThresholdScale(r)),3)}}(n,i,l,t)):[f,h];case L$:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case R$:return"symbol";case C$:case j$:case D$:return"ordinal"===n?"nominal"===r?"category":"ordinal":"rect"===o||"geoshape"===o?"heatmap":"ramp";case P$:case F$:case N$:return[i.scale.minOpacity,i.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(t))}(t,e,n,r,a,o,s,c,l,f,i.domain))}(n,t.getSignalName.bind(t),c,o.type,a,t.config,r.get("zero"),t.mark,u,t.getName(s),f);r.setWithExplicit("range",h)}}))}function g5(t,e){var n=t.getScaleComponent(e);if(n){var r=n.get("type"),i=t.fieldDef(e);if(BZ(r)){var a=n&&n.get("range");if(a&&b0(a)&&ZY(a.step))return a.step}else if(i&&i.bin&&UJ(i.bin)){var o=y3(t,i.field,i.bin),s=p5(e),u=t.getName(s);return new n5((function(){var e=t.getSignalName(o),n="(".concat(e,".stop - ").concat(e,".start) / ").concat(e,".step");return"".concat(t.getSignalName(u)," / (").concat(n,")")}))}}}function m5(t){return function(t){return t&&!!t.name}(t)?Object.assign({scheme:t.name},dV(t,["name"])):{scheme:t}}var y5=.95;function b5(t,e){if(t.length>0){var n=1/0,r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;y0(u)?n=void 0:void 0!==n&&u<n&&(n=u)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return void 0!==n?n:new n5((function(){var e=t.map((function(t){return y0(t)?t.signal:t}));return"min(".concat(e.join(", "),")")}))}return e.rangeStep?e.rangeStep:21}function _5(t,e){A5(t)?function(t,e){var n=t.component.scales;AV(n).forEach((function(r){var i=t.specifiedScales[r],a=n[r],o=t.getScaleComponent(r),s=t.fieldDef(r),u=t.config,c=i[e],l=o.get("type"),f=$Z(l,e),h=XZ(r,e);if(void 0!==c&&(f?h&&NK(h):NK(RK.scalePropertyNotWorkWithScaleType(l,e,r))),f&&void 0===h)if(void 0!==c)a.copyKeyFromObject(e,i);else{var d=function(t,e,n,r,i,a,o,s,u,c){var l=c.scale,f=r.type,h=r.sort;switch(t){case"bins":return function(t,e){var n=e.bin;if(UJ(n)){var r=y3(t,e.field,n);return new n5((function(){return t.getSignalName(r)}))}if(zJ(n)&&qJ(n)&&void 0!==n.step)return{step:n.step};return}(e,r);case"interpolate":return function(t,e){if(mV([C$,j$,D$],t)&&"nominal"!==e)return"hcl";return}(n,f);case"nice":return function(t,e,n){if(n.bin||mV([kZ.TIME,kZ.UTC],t))return;return!!mV([w$,x$],e)||void 0}(i,n,r);case"padding":return function(t,e,n,r,i,a){if(mV([w$,x$],t)){if(zZ(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=i.type,s=i.orient;if("bar"===o&&!r.bin&&("vertical"===s&&"x"===t||"horizontal"===s&&"y"===t))return a.continuousBandSize}if(e===kZ.POINT)return n.pointPadding}return}(n,i,l,r,u,c.bar);case"paddingInner":return function(t,e,n,r){if(void 0!==t)return;if(mV([w$,x$],e)){var i=r.bandPaddingInner,a=r.barBandPaddingInner,o=r.rectBandPaddingInner;return IV(i,"bar"===n?a:o)}return}(a,n,u.type,l);case"paddingOuter":return function(t,e,n,r,i,a){if(void 0!==t)return;if(mV([w$,x$],e)&&n===kZ.BAND){var o=a.bandPaddingOuter,s=a.barBandPaddingOuter,u=a.rectBandPaddingOuter;return IV(o,"bar"===r?s:u,i/2)}return}(a,n,i,u.type,o,l);case"reverse":return function(t,e){if(UZ(t)&&"descending"===e)return!0;return}(i,h);case"zero":return function(t,e,n,r,i){if(n&&"unaggregated"!==n&&UZ(i)){if(qY(n)){var a=n[0],o=n[n.length-1];if(a<=0&&o>=0)return!0}return!1}if("size"===t&&"quantitative"===e.type&&!qZ(i))return!0;if(!e.bin&&mV([w$,x$],t)){var s=r.orient;return!mV(["bar","area","line","trail"],r.type)||!("horizontal"===s&&"y"===t||"vertical"===s&&"x"===t)}return!1}(n,r,s,u,i)}return l[t]}(e,t,r,s,o.get("type"),o.get("padding"),o.get("paddingInner"),i.domain,t.markDef,u);void 0!==d&&a.set(e,d,!1)}}))}(t,e):x5(t,e)}function w5(t){A5(t)?v5(t):x5(t,"range")}function x5(t,e){var n=t.component.scales,r=!0,i=!1,a=void 0;try{for(var o,s=t.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;"range"===e?w5(u):_5(u,e)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}AV(n).forEach((function(r){var i,a=!0,o=!1,s=void 0;try{for(var u,l=t.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value.component.scales[r];if(f)i=G2(i,f.getWithExplicit(e),e,"scale",W2((function(t,n){switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0})))}}catch(c){o=!0,s=c}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}n[r].setWithExplicit(e,i)}))}function k5(t,e,n,r){var i=function(t,e,n){switch(e.type){case"nominal":case"ordinal":if($$(t)||"discrete"===mX(t))return"shape"===t&&"ordinal"===e.type&&NK(RK.discreteChannelCannotEncode(t,"ordinal")),"ordinal";if(mV(["x","y"],t)){if(mV(["rect","bar","rule"],n))return"band";if("bar"===n)return"band"}return"point";case"temporal":return $$(t)?"time":"discrete"===mX(t)?(NK(RK.discreteChannelCannotEncode(t,"temporal")),"ordinal"):"time";case"quantitative":return $$(t)?UJ(e.bin)?"bin-ordinal":"linear":"discrete"===mX(t)?(NK(RK.discreteChannelCannotEncode(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(RK.invalidFieldType(e.type))}(e,n,r),a=t.type;return dX(e)?void 0!==a?JZ(e,a)?KZ(a,n.type)?a:(NK(RK.scaleTypeNotWorkWithFieldDef(a,i)),i):(NK(RK.scaleTypeNotWorkWithChannel(e,a,i)),i):i:null}function E5(t){A5(t)?t.component.scales=function(t){var e=t.encoding,n=t.mark;return hX.reduce((function(r,i){var a,o,s=e[i];if(dJ(s)&&n===QV&&i===R$&&s.type===cJ)return r;if(dJ(s)?(a=s,o=s.scale):hJ(s)&&(a=s.condition,o=s.condition.scale),a&&null!==o&&!1!==o){var u=k5(o=o||{},i,a,n);r[i]=new h5(t.scaleName(i+"",!0),{value:u,explicit:o.type===u})}return r}),{})}(t):t.component.scales=function(t){var e=t.component.scales={},n={},r=t.component.resolve,i=!0,a=!1,o=void 0;try{for(var s,u=function(){var e=s.value;E5(e),AV(e.component.scales).forEach((function(i){if(r.scale[i]=r.scale[i]||function(t,e){if(D5(e)||T5(e))return"shared";if(j5(e)||C5(e))return mV(uX,t)?"independent":"shared";throw new Error("invalid model type for resolve")}(i,t),"shared"===r.scale[i]){var a=n[i],o=e.component.scales[i].getWithExplicit("type");a?!function(t,e){var n=jZ[t],r=jZ[e];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}(a.value,o.value)?(r.scale[i]="independent",delete n[i]):n[i]=G2(a,o,"type","scale",S5):n[i]=o}}))},c=t.children[Symbol.iterator]();!(i=(s=c.next()).done);i=!0)u()}catch(l){a=!0,o=l}finally{try{i||null==c.return||c.return()}finally{if(a)throw o}}return AV(n).forEach((function(r){var i=t.scaleName(r,!0),a=n[r];e[r]=new h5(i,a);var o=!0,s=!1,u=void 0;try{for(var c,f=t.children[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var h=c.value,d=h.component.scales[r];d&&(h.renameScale(d.get("name"),i),d.merged=!0)}}catch(l){s=!0,u=l}finally{try{o||null==f.return||f.return()}finally{if(s)throw u}}})),e}(t)}var S5=W2((function(t,e){return MZ(t)-MZ(e)}));var O5=function(){function t(){Object(vO.a)(this,t),this.nameMap={}}return Object(gO.a)(t,[{key:"rename",value:function(t,e){this.nameMap[t]=e}},{key:"has",value:function(t){return void 0!==this.nameMap[t]}},{key:"get",value:function(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}]),t}();function A5(t){return t&&"unit"===t.type}function T5(t){return t&&"facet"===t.type}function C5(t){return t&&"repeat"===t.type}function j5(t){return t&&"concat"===t.type}function D5(t){return t&&"layer"===t.type}var R5=function(){function t(e,n,r,i,a,o,s,u){var c=this;Object(vO.a)(this,t),this.type=n,this.parent=r,this.config=a,this.repeater=o,this.view=u,this.children=[],this.correctDataNames=function(t){return t.from&&t.from.data&&(t.from.data=c.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=c.lookupDataSource(t.from.facet.data)),t},this.parent=r,this.config=a,this.repeater=o,this.name=e.name||i,this.title=HY(e.title)?{text:e.title}:e.title,this.scaleNameMap=r?r.scaleNameMap:new O5,this.projectionNameMap=r?r.projectionNameMap:new O5,this.signalNameMap=r?r.signalNameMap:new O5,this.data=e.data,this.description=e.description,this.transforms=(e.transform||[]).map((function(t){return a0(t)?{filter:cV(t.filter,i0)}:t})),this.layout=u$(e)||bQ(e)?{}:function(t,e,n){var r=n[e],i={},a=r.spacing,o=r.columns;void 0!==a&&(i.spacing=a),void 0!==o&&(YK(t)&&!GK(t.facet)||aQ(t)&&qY(t.repeat)||nQ(t))&&(i.columns=o);var s=!0,u=!1,c=void 0;try{for(var l,f=oQ[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;if(void 0!==t[h])if("spacing"===h){var d=t[h];i[h]=ZY(d)?d:{row:d.row||a,column:d.column||a}}else i[h]=t[h]}}catch(p){u=!0,c=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return i}(e,n,a),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:YK(e)||r&&r.component.data.isFaceted&&void 0===e.data},layoutSize:new U2,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},s?fV(s):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(gO.a)(t,[{key:"initSize",value:function(t){var e=t.width,n=t.height;e&&this.component.layoutSize.set("width",e,!0),n&&this.component.layoutSize.set("height",n,!0)}},{key:"parse",value:function(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function(){!function(t){E5(t),r5(t);var e=!0,n=!1,r=void 0;try{for(var i,a=VZ[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){_5(t,i.value)}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}w5(t)}(this)}},{key:"parseProjection",value:function(){d3(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function(){i3(this)}},{key:"assembleGroupStyle",value:function(){if("unit"===this.type||"layer"===this.type)return this.view&&this.view.style||"cell"}},{key:"assembleEncodeFromView",value:function(t){t.style;var e=S(t,["style"]),n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];void 0!==i&&(n[r]={value:i})}return n}},{key:"assembleGroupEncodeEntry",value:function(t){var e=void 0;return this.view&&(e=this.assembleEncodeFromView(this.view)),t||"unit"!==this.type&&"layer"!==this.type?e:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},e||{})}},{key:"assembleLayout",value:function(){if(this.layout){var t=this.layout,e=t.spacing,n=S(t,["spacing"]),r=this.component,i=this.config,a=function(t,e){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=K$[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,c=t[u];if(c&&c.facetFieldDef){var l=s1(["titleAnchor","titleOrient"],c.facetFieldDef,e,u),f=l.titleAnchor,h=a1(u,l.titleOrient),d=y1(f,h);void 0!==d&&(n[h]=d)}}}catch(p){i=!0,a=p}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return AV(n).length>0?n:void 0}(r.layoutHeaders,i);return Object.assign({padding:e},this.assembleDefaultLayout(),n,a?{titleBand:a}:{})}}},{key:"assembleDefaultLayout",value:function(){return{}}},{key:"assembleHeaderMarks",value:function(){var t=this.component.layoutHeaders,e=[],n=!0,r=!1,i=void 0;try{for(var a,o=K$[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t[s].title&&e.push(l1(this,s))}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=u1[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;e=e.concat(d1(this,d))}}catch(p){c=!0,l=p}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return e}},{key:"assembleAxes",value:function(){return function(t,e){var n=t.x,r=void 0===n?[]:n,i=t.y,a=void 0===i?[]:i;return[].concat(Object(id.a)(r.map((function(t){return T0(t,"main",e)}))),Object(id.a)(r.map((function(t){return T0(t,"grid",e)}))),Object(id.a)(a.map((function(t){return T0(t,"main",e)}))),Object(id.a)(a.map((function(t){return T0(t,"grid",e)})))).filter((function(t){return t}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function(){return u3(this)}},{key:"assembleProjections",value:function(){return c3(this)}},{key:"assembleTitle",value:function(){var t=this.title||{},e=t.encoding,n=S(t,["encoding"]),r=Object.assign({},sQ(this.config.title).nonMark,n,e?{encode:{update:e}}:{});if(r.text)return mV(["unit","layer"],this.type)?mV(["middle",void 0],r.anchor)&&(r.frame=r.frame||"group"):r.anchor=r.anchor||"start",AV(r).length>0?r:void 0}},{key:"assembleGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};(t=t.concat(this.assembleSignals())).length>0&&(e.signals=t);var n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||T5(this.parent)?l5(this):[];r.length>0&&(e.scales=r);var i=this.assembleAxes();i.length>0&&(e.axes=i);var a=this.assembleLegends();return a.length>0&&(e.legends=a),e}},{key:"hasDescendantWithFieldOnChannel",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;if(A5(o)){if(o.channelHasField(t))return!0}else if(o.hasDescendantWithFieldOnChannel(t))return!0}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"getName",value:function(t){return jV((this.name?this.name+"_":"")+t)}},{key:"requestDataName",value:function(t){var e=this.getName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e}},{key:"getSizeSignalRef",value:function(t){if(T5(this.parent)){var e="width"===t?"x":"y",n=this.component.scales[e];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(BZ(r)&&b0(i)){var a=n.get("name"),o=u5(c5(this,e));return o?{signal:k1(a,n,bJ({aggregate:"distinct",field:o},{expr:"datum"}))}:(NK("Unknown field for ${channel}.  Cannot calculate view size."),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}},{key:"lookupDataSource",value:function(t){var e=this.component.data.outputNodes[t];return e?e.getSource():t}},{key:"getSignalName",value:function(t){return this.signalNameMap.get(t)}},{key:"renameSignal",value:function(t,e){this.signalNameMap.rename(t,e)}},{key:"renameScale",value:function(t,e){this.scaleNameMap.rename(t,e)}},{key:"renameProjection",value:function(t,e){this.projectionNameMap.rename(t,e)}},{key:"scaleName",value:function(t,e){return e?this.getName(t):eX(t)&&dX(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}},{key:"projectionName",value:function(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}},{key:"getSelectionComponent",value:function(t,e){var n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(RK.selectionNotFound(e));return n}},{key:"width",get:function(){return this.getSizeSignalRef("width")}},{key:"height",get:function(){return this.getSizeSignalRef("height")}}]),t}(),M5=function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"vgField",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(t);if(n)return bJ(n,e)}},{key:"reduceFieldDef",value:function(t,e,n){return KJ(this.getMapping(),(function(e,n,r){var i=CJ(n);return i?t(e,i,r):e}),e,n)}},{key:"forEachFieldDef",value:function(t,e){XJ(this.getMapping(),(function(e,n){var r=CJ(e);r&&t(r,n)}),e)}}]),e}(R5),P5=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).filter=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function(){return new Set(AV(this.filter))}},{key:"assemble",value:function(){var t=this,e=AV(this.filter).reduce((function(e,n){var r=t.filter[n],i=bJ(r,{expr:"datum"});return null!==r&&(e.push("".concat(i," !== null")),e.push("!isNaN(".concat(i,")"))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}],[{key:"make",value:function(t,n){var r=n.config,i=n.mark;if("filter"!==r.invalidValues)return null;var a=n.reduceFieldDef((function(t,e,r){var a=dX(r)&&n.getScaleComponent(r);a&&(!UZ(a.get("type"))||e.aggregate||e$(i)||(t[e.field]=e));return t}),{});return AV(a).length?new e(t,a):null}}]),e}(t1),F5=function(t){function e(t,n){var r;Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r.transform=fV(n);var i=r.transform,a=i.flatten,o=i.as,s=void 0===o?[]:o;return r.transform.as=a.map((function(t,e){return s[e]||t})),r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(this.parent,fV(this.transform))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FlattenTransform ".concat(vV(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"flatten",fields:t.flatten,as:t.as}}}]),e}(t1),N5=function(t){function e(t,n){var r;Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r.transform=fV(n);var i=r.transform.as||[void 0,void 0];return r.transform.as=[i[0]||"key",i[1]||"value"],r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform))}},{key:"producedFields",value:function(){return new Set(this.transform.as)}},{key:"hash",value:function(){return"FoldTransform ".concat(vV(this.transform))}},{key:"assemble",value:function(){var t=this.transform;return{type:"fold",fields:t.fold,as:t.as}}}]),e}(t1),L5=function(t){function e(t,n,r,i){var a;return Object(vO.a)(this,e),(a=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).fields=n,a.geojson=r,a.signal=i,a}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.fields),this.geojson,this.signal)}},{key:"assemble",value:function(){return Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})}}],[{key:"parseAll",value:function(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;var r=0;if([[O$,S$],[T$,A$]].forEach((function(i){var a=i.map((function(t){return n.channelHasField(t)?n.fieldDef(t).field:gJ(n.encoding[t])?{expr:n.encoding[t].value+""}:void 0}));(a[0]||a[1])&&(t=new e(t,a,null,n.getName("geojson_".concat(r++))))})),n.channelHasField(R$)){var i=n.fieldDef(R$);i.type===cJ&&(t=new e(t,null,i.field,n.getName("geojson_".concat(r++))))}return t}}]),e}(t1),I5=function(t){function e(t,n,r,i){var a;return Object(vO.a)(this,e),(a=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).projection=n,a.fields=r,a.as=i,a}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,this.projection,fV(this.fields),fV(this.as))}},{key:"assemble",value:function(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function(t,n){return n.projectionName()?([[O$,S$],[T$,A$]].forEach((function(r){var i=r.map((function(t){return n.channelHasField(t)?n.fieldDef(t).field:gJ(n.encoding[t])?{expr:n.encoding[t].value+""}:void 0})),a=r[0]===T$?"2":"";(i[0]||i[1])&&(t=new e(t,n.projectionName(),i,[n.getName("x"+a),n.getName("y"+a)]))})),t):t}}]),e}(t1),B5=function(t){function e(t){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null)}}]),Object(gO.a)(e,[{key:"producedFields",value:function(){return new Set([QZ])}},{key:"hash",value:function(){return"Identifier"}},{key:"assemble",value:function(){return{type:"identifier",as:QZ}}}]),e}(t1),U5=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform))}},{key:"producedFields",value:function(){return new Set([this.transform.impute])}},{key:"processSequence",value:function(t){var e=t.start,n=void 0===e?0:e,r=t.stop,i=t.step,a=[n,r].concat(Object(id.a)(i?[i]:[])).join(",");return{signal:"sequence(".concat(a,")")}}},{key:"hash",value:function(){return"Impute ".concat(vV(this.transform))}},{key:"assemble",value:function(){var t,e,n=this.transform,r=n.impute,i=n.key,a=n.keyvals,o=n.method,s=n.groupby,u=n.value,c=n.frame,l=void 0===c?[null,null]:c,f=Object.assign({type:"impute",field:r,key:i},a?{keyvals:(t=a,t&&void 0!==t.stop?this.processSequence(a):a)}:{},{method:"value"},s?{groupby:s}:{},{value:null});o&&"value"!==o?e=[Object.assign({type:"window",as:["imputed_".concat(r,"_value")],ops:[o],fields:[r],frame:l,ignorePeers:!1},s?{groupby:s}:{}),{type:"formula",expr:"datum.".concat(r," === null ? datum.imputed_").concat(r,"_value : datum.").concat(r),as:r}]:e=[{type:"formula",expr:"datum.".concat(r," === null ? ").concat(u," : datum.").concat(r),as:r}];return[f].concat(Object(id.a)(e))}}],[{key:"makeFromTransform",value:function(t,n){return new e(t,n)}},{key:"makeFromEncoding",value:function(t,n){var r=n.encoding,i=r.x,a=r.y;if(dJ(i)&&dJ(a)){var o=i.impute?i:a.impute?a:void 0;if(void 0===o)return;var s=i.impute?a:a.impute?i:void 0,u=o.impute,c=u.method,l=u.value,f=u.frame,h=u.keyvals,d=JJ(n.mark,r);return new e(t,Object.assign({impute:o.field,key:s.field},c?{method:c}:{},void 0!==l?{value:l}:{},f?{frame:f}:{},void 0!==h?{keyvals:h}:{},d.length?{groupby:d}:{}))}return null}}]),e}(t1),z5=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(vO.a)(this,e),(t=Object(vQ.a)(this,Object(gQ.a)(e).call(this,n,r))).explicit=n,t.implicit=r,t.parseNothing=i,t}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){var t=mQ(Object(gQ.a)(e.prototype),"clone",this).call(this);return t.parseNothing=this.parseNothing,t}}]),e}(U2),q5=function(t){function e(t,n,r){var i;return Object(vO.a)(this,e),(i=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,i.secondary=r,i}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform),this.secondary)}},{key:"producedFields",value:function(){return new Set(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))}},{key:"hash",value:function(){return"Lookup ".concat(vV({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function(){var t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var e=this.transform.as;HY(e)||(NK(RK.NO_FIELDS_NEEDS_AS),e="_lookup"),t={as:[e]}}return Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t,this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function(t,n,r,i){var a=n.component.data.sources,o=o4(r.from.data,a);o||(o=new w3(r.from.data),a.push(o));var s=n.getName("lookup_".concat(i)),u=new e1(o,s,"lookup",n.component.data.outputNodeRefCounts);return n.component.data.outputNodes[s]=u,new e(t,r,u.getSource())}}]),e}(t1),W5=function(t){function e(t,n){var r;return Object(vO.a)(this,e),(r=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t))).transform=n,r}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(null,fV(this.transform))}},{key:"hash",value:function(){return"SampleTransform ".concat(vV(this.transform))}},{key:"assemble",value:function(){return{type:"sample",size:this.transform.sample}}}]),e}(t1);function H5(t){var e=0;return function n(r,i){var a,o,s;r instanceof w3&&(r.isGenerator||BQ(r.data)||(t.push(i),i={name:null,source:i.name,transform:[]}));r instanceof F3&&(r.parent instanceof w3&&!i.source?(i.format=Object.assign({},i.format||{},{parse:r.assembleFormatParse()}),(a=i.transform).push.apply(a,Object(id.a)(r.assembleTransforms(!0)))):(o=i.transform).push.apply(o,Object(id.a)(r.assembleTransforms())));if(r instanceof D3)return i.name||(i.name="data_".concat(e++)),!i.source||i.transform.length>0?(t.push(i),r.data=i.name):r.data=i.source,void r.assemble().forEach((function(e){return t.push(e)}));(r instanceof k3||r instanceof E3||r instanceof P5||r instanceof R3||r instanceof r1||r instanceof I5||r instanceof L5||r instanceof j3||r instanceof q5||r instanceof I3||r instanceof N3||r instanceof N5||r instanceof F5||r instanceof B5||r instanceof W5)&&i.transform.push(r.assemble()),(r instanceof _3||r instanceof E1||r instanceof U5||r instanceof L3)&&(s=i.transform).push.apply(s,Object(id.a)(r.assemble()));if(r instanceof e1)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof e1)r.setSource(i.name);else{if(i.name||(i.name="data_".concat(e++)),r.setSource(i.name),1===r.numChildren())t.push(i),i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof e1&&(!i.source||i.transform.length>0)&&t.push(i);break;case 1:n(r.children[0],i);break;default:i.name||(i.name="data_".concat(e++));var u=i.name;!i.source||i.transform.length>0?t.push(i):u=i.source,r.children.forEach((function(t){n(t,{name:null,source:u,transform:[]})}))}}}function G5(t,e){if(t.channelHasField(e)){var n=t.facet[e],r=o1("title",null,t.config,e),i=SJ(n,t.config,{allowDisabling:!0,includeDefault:void 0===r||!!r});t.child.component.layoutHeaders[e].title&&(i+=" / "+t.child.component.layoutHeaders[e].title,t.child.component.layoutHeaders[e].title=null);var a=o1("labelOrient",n,t.config,e),o=IV((n.header||{}).labels,!0),s=mV(["bottom","right"],a)?"footer":"header";t.component.layoutHeaders[e]=Object(fp.a)({title:i,facetFieldDef:n},s,"facet"===e?[]:[Y5(t,e,o)])}}function Y5(t,e,n){var r="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(r)?t.child.getSizeSignalRef(r):void 0,axes:[]}}function V5(t,e){var n,r=t.child;if(r.component.axes[e]){var i=t.component,a=i.layoutHeaders,o=i.resolve;if(o.axis[e]=B2(o,e),"shared"===o.axis[e]){var s="x"===e?"column":"row",u=a[s],c=!0,l=!1,f=void 0;try{for(var h,d=r.component.axes[e][Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value,v="top"===(n=p.get("orient"))||"left"===n?"header":"footer";u[v]=u[v]||[Y5(t,s,!1)];var g=T0(p,"main",t.config,{header:!0});u[v][0].axes.push(g),p.mainExtracted=!0}}catch(m){l=!0,f=m}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}}}function $5(t){J5(t);var e=t.component.layoutSize;e.setWithExplicit("width",Z5(t,"width")),e.setWithExplicit("height",Z5(t,"height"))}var X5=$5,K5={vconcat:"width",hconcat:"height"};function J5(t){var e=!0,n=!1,r=void 0;try{for(var i,a=t.children[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.parseLayoutSize()}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}function Z5(t,e){var n,r="width"===e?"x":"y",i=t.component.resolve,a=!0,o=!1,s=void 0;try{for(var u,c=t.children[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value.component.layoutSize.getWithExplicit(e),f=i.scale[r];if("independent"===f&&"range-step"===l.value){n=void 0;break}if(n){if("independent"===f&&n.value!==l.value){n=void 0;break}n=G2(n,l,e,"")}else n=l}}catch(y){o=!0,s=y}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}if(n){var h=!0,d=!1,p=void 0;try{for(var v,g=t.children[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;t.renameSignal(m.getName(e),t.getName(e)),m.component.layoutSize.set(e,"merged",!1)}}catch(y){d=!0,p=y}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}return n}return{explicit:!1,value:void 0}}function Q5(t,e){var n="width"===e?"x":"y",r=t.config,i=t.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");return BZ(a)&&b0(o)?"range-step":r.view[e]}return t.hasProjection?r.view[e]:"width"===e&&"text"===t.mark?r.scale.textXRangeStep:r.scale.rangeStep||WZ.rangeStep}function t4(t,e){return(n=t.field)&&!HY(n)&&"repeat"in n?t.field.repeat in e?Object.assign({},t,{field:e[t.field.repeat]}):void NK(RK.noSuchRepeatedValue(t.field.repeat)):t;var n}function e4(t,e){if(void 0!==(t=t4(t,e))){if(null===t)return null;if(function(t){return pJ(t)&&!!t.sort}(t)&&F0(t.sort)){var n=t4(t.sort,e);t=Object.assign({},t,n?{sort:n}:{})}return t}}function n4(t,e){if(!dJ(t)){if(hJ(t)){var n=e4(t.condition,e);if(n)return Object.assign({},t,{condition:n});t.condition;return S(t,["condition"])}return t}var r=e4(t,e);return r||(fJ(t)?{condition:t.condition}:void 0)}function r4(t,e){var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(qY(i))n[r]=i.map((function(t){return n4(t,e)})).filter((function(t){return t}));else{var a=n4(i,e);void 0!==a&&(n[r]=a)}}return n}function i4(t,e,n){return bJ(e,Object.assign({suffix:"by_".concat(bJ(t))},n||{}))}var a4=function(t){function e(t,n,r,i,a){var o;Object(vO.a)(this,e),(o=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,"facet",n,r,a,i,t.resolve))).child=T4(t.spec,Object(IQ.a)(o),o.getName("child"),void 0,i,a,!1),o.children=[o.child];var s=function(t,e){return GK(t)?r4(t,e):e4(t,e)}(t.facet,i);return o.facet=o.initFacet(s),o}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"initFacet",value:function(t){return GK(t)?KJ(t,(function(t,e,n){return mV([y$,b$],n)?void 0===e.field?(NK(RK.emptyFieldDef(e,n)),t):(t[n]=DJ(e,n),t):(NK(RK.incompatibleChannel(n,"facet")),t)}),{}):{facet:DJ(t,"facet")}}},{key:"channelHasField",value:function(t){return!!this.facet[t]}},{key:"fieldDef",value:function(t){return this.facet[t]}},{key:"parseData",value:function(){this.component.data=s4(this),this.child.parseData()}},{key:"parseLayoutSize",value:function(){J5(this)}},{key:"parseSelections",value:function(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function(){this.child.parseAxesAndHeaders(),function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=K$[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){G5(t,i.value)}}catch(o){n=!0,r=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}V5(t,"x"),V5(t,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.child.assembleSelectionTopLevelSignals(t)}},{key:"assembleSignals",value:function(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function(t){return this.child.assembleSelectionData(t)}},{key:"getHeaderLayoutMixins",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var i,a=K$[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value,s=!0,u=!1,c=void 0;try{for(var l,f=c1[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=this.component.layoutHeaders[o],p=d[h],v=d.facetFieldDef;if(v){var g=o1("titleOrient",v,this.config,o);if(mV(["right","bottom"],g)){var m=a1(o,g);t.titleAnchor=t.titleAnchor||{},t.titleAnchor[m]="end"}}if(p&&p[0]){var y="row"===o?"height":"width",b="header"===h?"headerBand":"footerBand";"facet"===o||this.child.component.layoutSize.get(y)||(t[b]=t[b]||{},t[b][o]=.5),d.title&&(t.offset=t.offset||{},t.offset["row"===o?"rowTitle":"columnTitle"]=10)}}}catch(_){u=!0,c=_}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}}catch(_){n=!0,r=_}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}},{key:"assembleDefaultLayout",value:function(){var t=this.facet,e=t.column,n=t.row,r=e?this.columnDistinctSignal():n?1:void 0,i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign({},this.getHeaderLayoutMixins(),r?{columns:r}:{},{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function(){if(!(this.parent&&this.parent instanceof e)){var t=this.getName("column_domain");return{signal:"length(data('".concat(t,"'))")}}}},{key:"assembleGroup",value:function(t){return this.parent&&this.parent instanceof e?Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:bJ(this.facet.column,{prefix:"distinct"})}}}}:{},mQ(Object(gQ.a)(e.prototype),"assembleGroup",this).call(this,t)):mQ(Object(gQ.a)(e.prototype),"assembleGroup",this).call(this,t)}},{key:"getCardinalityAggregateForChild",value:function(){var t=[],n=[],r=[];if(this.child instanceof e){if(this.child.channelHasField("column")){var i=bJ(this.child.facet.column);t.push(i),n.push("distinct"),r.push("distinct_".concat(i))}}else for(var a=0,o=["x","y"];a<o.length;a++){var s=o[a],u=this.child.component.scales[s];if(u&&!u.merged){var c=u.get("type"),l=u.get("range");if(BZ(c)&&b0(l)){var f=u5(c5(this.child,s));f?(t.push(f),n.push("distinct"),r.push("distinct_".concat(f))):NK("Unknown field for ${channel}.  Cannot calculate view size.")}}}return{fields:t,ops:n,as:r}}},{key:"assembleFacet",value:function(){var t=this.component.data.facetRoot,e=t.name,n=t.data,r=this.facet,i=r.row,a=r.column,o=this.getCardinalityAggregateForChild(),s=o.fields,u=o.ops,c=o.as,l=[],f=!0,h=!1,d=void 0;try{for(var p,v=K$[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value,m=this.facet[g];if(m){l.push(bJ(m));var y=m.bin,b=m.sort;if(UJ(y)&&l.push(bJ(m,{binSuffix:"end"})),F0(b)){var _=b.field,w=b.op,x=void 0===w?P0:w,k=i4(m,b);i&&a?(s.push(k),u.push("max"),c.push(k)):(s.push(_),u.push(x),c.push(k))}else if(qY(b)){var E=i1(m,g);s.push(E),u.push("max"),c.push(E)}}}}catch(O){h=!0,d=O}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}var S=!!i&&!!a;return Object.assign({name:e,data:n,groupby:l},S||s.length?{aggregate:Object.assign({},S?{cross:S}:{},s.length?{fields:s,ops:u,as:c}:{})}:{})}},{key:"facetSortFields",value:function(t){var e=this.facet[t];return e?F0(e.sort)?[i4(e,e.sort,{expr:"datum"})]:qY(e.sort)?[i1(e,t,{expr:"datum"})]:[bJ(e,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function(t){var e=this.facet[t];if(e){var n=e.sort;return[(F0(n)?n.order:!qY(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function(){var t=this.facet,e=this.config;if(t.facet)return v1(t.facet,"facet",e);var n={row:["top","bottom"],column:["left","right"]},r=!0,i=!1,a=void 0;try{for(var o,s=u1[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(t[u]){var c=o1("labelOrient",t[u],e,u);if(mV(n[u],c))return v1(t[u],u,e)}}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"assembleMarks",value:function(){var t=this,e=this.child,n=function(t){var e=[],n=H5(e);return t.children.forEach((function(e){return n(e,{source:t.name,name:null,transform:[]})})),e}(this.component.data.facetRoot),r=e.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||e.assembleTitle(),a=e.assembleGroupStyle();return[Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{},a?{style:a}:{},{from:{facet:this.assembleFacet()},sort:{field:_V(K$.map((function(e){return t.facetSortFields(e)}))),order:_V(K$.map((function(e){return t.facetSortOrder(e)})))}},n.length>0?{data:n}:{},r?{encode:{update:r}}:{},e.assembleGroup(function(t,e){if(t.component.selection&&AV(t.component.selection).length){var n=GY(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:hW("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return e}(this,[])))]}},{key:"getMapping",value:function(){return this.facet}}]),e}(M5);function o4(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.data;if((!t.name||!s.hasName()||t.name===s.dataName)&&!(t.format&&t.format.mesh&&u.format&&u.format.feature))if(UQ(t)&&UQ(u)){if(lV(t.values,u.values))return s}else if(BQ(t)&&BQ(u)){if(t.url===u.url)return s}else if(zQ(t)&&t.name===s.dataName)return s}}catch(c){r=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function s4(t){var e=function(t,e){if(void 0===t.data&&t.parent)return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main;if(null===t.data){var n=new w3([]);return e.push(n),n}var r=o4(t.data,e);if(r)return qQ(t.data)||(r.data.format=wV({},t.data.format,r.data.format)),!r.hasName()&&t.data.name&&(r.dataName=t.data.name),r;var i=new w3(t.data);return e.push(i),i}(t,t.component.data.sources),n=t.component.data,r=n.outputNodes,i=n.outputNodeRefCounts,a=t.parent?t.parent.component.data.ancestorParse.clone():new z5,o=t.data;qQ(o)?(WQ(o)?e=new E3(e,o.sequence):GQ(o)&&(e=new k3(e,o.graticule)),a.parseNothing=!0):o&&o.format&&null===o.format.parse&&(a.parseNothing=!0),e=F3.makeExplicit(e,t,a)||e,!W1(t)||!A5(t)&&!D5(t)||t.parent&&D5(t.parent)||(e=new B5(e));var s=t.parent&&D5(t.parent);(A5(t)||T5(t))&&s&&(e=_3.makeFromEncoding(e,t)||e),t.transforms.length>0&&(e=function(t,e,n){var r=0,i=!0,a=!1,o=void 0;try{for(var s,u=e.transforms[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=void 0,f=void 0;if(f0(c))f=t=new r1(t,c),l="derived";else if(a0(c))f=t=F3.makeImplicitFromFilterTransform(t,c,n)||t,t=new R3(t,e,c.filter);else if(h0(c))f=t=_3.makeFromTransform(t,c,e),l="number";else if(p0(c)){l="date",void 0===n.getWithExplicit(c.field).value&&(t=new F3(t,Object(fp.a)({},c.field,l)),n.set(c.field,l,!1)),f=t=E1.makeFromTransform(t,c)}else if(v0(c))f=t=j3.makeFromTransform(t,c),l="number",W1(e)&&(t=new B5(t));else if(o0(c))f=t=q5.make(t,e,c,r++),l="derived";else if(u0(c))f=t=new I3(t,c),l="number";else if(c0(c))f=t=new N3(t,c),l="number";else if(g0(c))f=t=L3.makeFromTransform(t,c),l="derived";else if(m0(c))f=t=new N5(t,c),l="derived";else if(l0(c))f=t=new F5(t,c),l="derived";else if(s0(c))t=new W5(t,c);else{if(!d0(c)){NK(RK.invalidTransformIgnored(c));continue}f=t=U5.makeFromTransform(t,c),l="derived"}if(f&&void 0!==l){var h=!0,d=!1,p=void 0;try{for(var v,g=f.producedFields()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var m=v.value;n.set(m,l,!1)}}catch(y){d=!0,p=y}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}}}}catch(y){a=!0,o=y}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return t}(e,t,a)),e=F3.makeImplicitFromEncoding(e,t,a)||e,A5(t)&&(e=L5.parseAll(e,t),e=I5.parseAll(e,t)),(A5(t)||T5(t))&&(s||(e=_3.makeFromEncoding(e,t)||e),e=E1.makeFromEncoding(e,t)||e,e=r1.parseAllForSortIndex(e,t));var u=t.getName(VQ),c=new e1(e,u,VQ,i);if(r[u]=c,e=c,A5(t)){var l=j3.makeFromEncoding(e,t);l&&(e=l,W1(t)&&(e=new B5(e))),e=U5.makeFromEncoding(e,t)||e,e=L3.makeFromEncoding(e,t)||e}A5(t)&&(e=P5.make(e,t)||e);var f=t.getName(YQ),h=new e1(e,f,YQ,i);r[f]=h,e=h;var d=null;if(T5(t)){var p=t.getName("facet");e=function(t,e){var n=e.row,r=e.column;if(n&&r){for(var i=null,a=0,o=[n,r];a<o.length;a++){var s=o[a];if(F0(s.sort)){var u=s.sort,c=u.field,l=u.op;t=i=new N3(t,{joinaggregate:[{op:void 0===l?P0:l,field:c,as:i4(s,s.sort,{forAs:!0})}],groupby:[bJ(s)]})}}return i}return null}(e=r1.parseAllForSortIndex(e,t),t.facet)||e,d=new D3(e,t,p,h.getSource()),r[p]=d,e=d}return Object.assign({},t.component.data,{outputNodes:r,outputNodeRefCounts:i,raw:c,main:h,facetRoot:d,ancestorParse:a})}var u4=function(t){function e(t,n,r,i,a,o,s){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,n,r,i,a,o,s))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"parseData",value:function(){this.component.data=s4(this),this.children.forEach((function(t){t.parseData()}))}},{key:"parseSelections",value:function(){var t=this;this.component.selection={};var e=!0,n=!1,r=void 0;try{for(var i,a=function(){var e=i.value;e.parseSelections(),AV(e.component.selection).forEach((function(n){t.component.selection[n]=e.component.selection[n]}))},o=this.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)a()}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"parseMarkGroup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseMarkGroup()}}catch(a){e=!0,n=a}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"parseAxesAndHeaders",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseAxesAndHeaders()}}catch(a){e=!0,n=a}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.forEach((function(t){return t.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(t,e){return[].concat(Object(id.a)(t),Object(id.a)(e.assembleLayoutSignals()))}),_1(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionData(t)}),t)}},{key:"assembleMarks",value:function(){return this.children.map((function(t){var e=t.assembleTitle(),n=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign({type:"group",name:t.getName("group")},e?{title:e}:{},n?{style:n}:{},r?{encode:{update:r}}:{},t.assembleGroup())}))}}]),e}(R5),c4=function(t){function e(t,n,r,i,a){var o;return Object(vO.a)(this,e),o=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,"concat",n,r,a,i,t.resolve)),t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&NK(RK.CONCAT_CANNOT_SHARE_AXIS),o.concatType=rQ(t)?"vconcat":iQ(t)?"hconcat":"concat",o.children=o.getChildren(t).map((function(t,e){return T4(t,Object(IQ.a)(o),o.getName("concat_"+e),void 0,i,a,!1)})),o}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"getChildren",value:function(t){return rQ(t)?t.vconcat:iQ(t)?t.hconcat:t.concat}},{key:"parseLayoutSize",value:function(){!function(t){J5(t);var e=t.component.layoutSize,n=K5[t.concatType];n&&e.setWithExplicit(n,Z5(t,n))}(this)}},{key:"parseAxisGroup",value:function(){return null}},{key:"assembleDefaultLayout",value:function(){return Object.assign({},"vconcat"===this.concatType?{columns:1}:{},{bounds:"full",align:"each"})}}]),e}(u4);var l4=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(vO.a)(this,e),(t=Object(vQ.a)(this,Object(gQ.a)(e).call(this))).explicit=n,t.implicit=r,t.mainExtracted=i,t}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"clone",value:function(){return new e(fV(this.explicit),fV(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function(t){return"axis"===t||("grid"===t||"title"===t?!!this.get(t):!(!1===(e=this.get(t))||null===e));var e}}]),e}(U2);var f4={bottom:"top",top:"bottom",left:"right",right:"left"};function h4(t,e){if(!t)return e.map((function(t){return t.clone()}));if(t.length===e.length){for(var n=t.length,r=0;r<n;r++){var i=t[r],a=e[r];if(!!i!==!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),s=a.getWithExplicit("orient");if(o.explicit&&s.explicit&&o.value!==s.value)return;t[r]=d4(i,a)}}return t}}function d4(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=function(){var n=a.value,r=G2(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(function(t,e){switch(n){case"title":return Q0(t,e);case"gridScale":return{explicit:t.explicit,value:IV(t.value,e.value)}}return H2(t,e,n,"axis")}));t.setWithExplicit(n,r)},s=A0[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)o()}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}function p4(t,e){var n="x"===e?"x2":"y2",r=t.fieldDef(e),i=t.fieldDef(n),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?Z0(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}function v4(t,e){var n=e.axis(t),r=new l4;A0.forEach((function(i){var a=function(t,e,n,r){var i=r.fieldDef(n),a=function(t,e,n,r){if(void 0!==e.labelAngle)return zV(e.labelAngle);var i=L0("labelAngle",t.config,n,U0(n),t.getScaleComponent(n).get("type"));return void 0!==i?zV(i):n===w$&&mV([uJ,oJ],r.type)?270:void 0}(r,e,n,i),o=IV(e.orient,U0(n));switch(t){case"scale":return r.scaleName(n);case"gridScale":return function(t,e){var n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}(r,n);case"format":if(FJ(i))return;return G0(i,e.format,r.config);case"formatType":if(FJ(i))return;return e.formatType;case"grid":if(zJ(r.fieldDef(n).bin))return!1;var s=r.getScaleComponent(n).get("type");return IV(e.grid,function(t,e){return!BZ(t)&&!UJ(e.bin)}(s,i));case"labelAlign":return IV(e.labelAlign,B0(a,o));case"labelAngle":return a;case"labelBaseline":return IV(e.labelBaseline,I0(a,o));case"labelFlush":return IV(e.labelFlush,function(t,e){if("x"===e&&mV(["quantitative","temporal"],t.type))return!0}(i,n));case"labelOverlap":var u=r.getScaleComponent(n).get("type");return IV(e.labelOverlap,function(t,e){if("nominal"!==t.type)return"log"!==e||"greedy"}(i,u));case"orient":return o;case"tickCount":var c=r.getScaleComponent(n).get("type"),l="x"===n?"width":"y"===n?"height":void 0,f=l?r.getSizeSignalRef(l):void 0;return IV(e.tickCount,function(t){var e=t.fieldDef,n=t.scaleType,r=t.size;if(!BZ(n)&&"log"!==n&&!mV(["month","hours","day","quarter"],e.timeUnit))return UJ(e.bin)?{signal:"ceil(".concat(r.signal,"/10)")}:{signal:"ceil(".concat(r.signal,"/40)")}}({fieldDef:i,scaleType:c,size:f}));case"title":var h="x"===n?"x2":"y2",d=r.fieldDef(h);return IV(e.title,p4(r,n),J0([lJ(i)],d?[lJ(d)]:[]));case"values":return function(t,e,n){var r=t.values;if(r)return LJ(n,r)}(e,0,i)}return p=t,S0[p]?e[t]:void 0;var p}(i,n,t,e);if(void 0!==a){var o=function(t,e,n,r,i){switch(e){case"titleAngle":case"labelAngle":return t===zV(n[e]);case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===p4(r,i))return!0}return t===n[e]}(a,i,n,e,t),s=L0(i,e.config,t,r.get("orient"),e.getScaleComponent(t).get("type"));o||void 0===s?r.set(i,a,o):mV(["grid","orient"],i)&&s&&r.set(i,s,!1)}}));var i=n.encoding||{},a=x0.reduce((function(n,a){if(!r.hasAxisPart(a))return n;var o=I2(i[a]||{},e),s="labels"===a?function(t,e,n){var r=t.fieldDef(e)||("x"===e?t.fieldDef("x2"):"y"===e?t.fieldDef("y2"):void 0),i=t.axis(e),a=t.config,o={};if(FJ(r)){var s=t.getScaleComponent(e).get("type")===kZ.UTC,u=X0("datum.value",r.timeUnit,i.format,a.axis.shortTimeLabels,null,s);u&&(o.text={signal:u})}return o=Object.assign({},o,n),0===AV(o).length?void 0:o}(e,t,o):o;return void 0!==s&&AV(s).length>0&&(n[a]={update:s}),n}),{});return AV(a).length>0&&r.set("encode",a,!!n.encoding||void 0!==n.labelAngle),r}function g4(t,e,n){var r=r$(t)?Object.assign({},t):{type:t},i=r.orient||q0("orient",r,n);return r.orient=function(t,e,n){switch(t){case GV:case JV:case ZV:case $V:case YV:return}var r=e.x,i=e.y,a=e.x2,o=e.y2;switch(t){case WV:if(dJ(r)&&zJ(r.bin))return"vertical";if(dJ(i)&&zJ(i.bin))return"horizontal";if(o||a){if(n)return n;if(!a&&dJ(r)&&r.type===aJ&&!UJ(r.bin))return"horizontal";if(!o&&dJ(i)&&i.type===aJ&&!UJ(i.bin))return"vertical"}case VV:if(a&&o)return;case qV:if(o)return dJ(i)&&zJ(i.bin)?"horizontal":"vertical";if(a)return dJ(r)&&zJ(r.bin)?"vertical":"horizontal";if(t===VV){if(e.x&&!e.y)return"vertical";if(e.y&&!e.x)return"horizontal"}case HV:case XV:var s=dJ(e.x)&&_J(e.x),u=dJ(e.y)&&_J(e.y);if(s&&!u)return"tick"!==t?"horizontal":"vertical";if(!s&&u)return"tick"!==t?"vertical":"horizontal";if(s&&u){var c=e.x,l=e.y,f=c.type===sJ,h=l.type===sJ;return f&&!h?"tick"!==t?"vertical":"horizontal":!f&&h?"tick"!==t?"horizontal":"vertical":!c.aggregate&&l.aggregate?"tick"!==t?"vertical":"horizontal":c.aggregate&&!l.aggregate?"tick"!==t?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(r.type,e,i),void 0!==i&&i!==r.orient&&NK(RK.orientOverridden(r.orient,i)),void 0===IV(r.opacity,q0("opacity",r,n))&&(r.opacity=function(t,e){if(mV([GV,XV,JV,ZV],t)&&!GJ(e))return.7;return}(r.type,e)),void 0===r.filled&&(r.filled=function(t,e){var n=q0("filled",t,e),r=t.type;return IV(n,r!==GV&&r!==HV&&r!==VV)}(r,n)),void 0===(r.cursor||q0("cursor",r,n))&&(r.cursor=function(t,e,n){if(e.href||t.href||q0("href",t,n))return"pointer";return t.cursor}(r,e,n)),r}function m4(t,e,n){var r=t.config,i=t.encoding,a=t.markDef,o="x"===e?"x2":"y2",s="x"===e?"width":"height",u=i[e],c=i[o],l=t.getScaleComponent(e),f=l?l.get("type"):void 0,h=t.scaleName(e),d=a.orient,p=i[s]||i.size||a[s]||a.size||q0("size",a,r,{vgChannel:s}),v="x"===e?"vertical"===d:"horizontal"===d;return!dJ(u)||!UJ(u.bin)&&!zJ(u.bin)||p||BZ(f)?(dJ(u)&&BZ(f)||v)&&!c?dJ(u)&&f===kZ.BAND?function(t,e,n,r){var i,a=n.scaleName(e),o="x"===e?"width":"height";if(n.encoding.size||void 0!==n.markDef.size||r&&void 0!==r.value)if(n.markDef.orient){var s=Object(fp.a)({},e+"c",v2(t,a,{},{band:.5}));if(jJ(n.encoding.size))return Object.assign({},s,D2("size",n,{vgChannel:o}));if(gJ(n.encoding.size))return Object.assign({},s,D2("size",n,{vgChannel:o}));if(void 0!==n.markDef.size)return Object.assign({},s,Object(fp.a)({},o,{value:n.markDef.size}));if(r&&void 0!==r.value)return Object.assign({},s,Object(fp.a)({},o,r))}else NK(RK.cannotApplySizeToNonOrientedMark(n.markDef.type));return i={},Object(fp.a)(i,e,v2(t,a,{binSuffix:"range"},{})),Object(fp.a)(i,o,r||g2(a)),i}(u,e,t,y4(n,a,s,h,l,r)):function(t,e,n,r){var i="x"===t?"xc":"yc",a="x"===t?"width":"height";return Object.assign({},F2(t,e,n,i),D2("size",e,{defaultRef:r,vgChannel:a}))}(e,t,x2(t[s]),y4(n,a,s,h,l,r)):Object.assign({},F2(e,t,"zeroOrMax"),N2(t,"zeroOrMin",o)):function(t){var e,n,r=t.fieldDef,i=t.fieldDef2,a=t.channel,o=t.scaleName,s=t.mark,u=t.spacing,c=void 0===u?0:u,l=t.reverse,f={x:l?c:0,x2:l?0:c,y:l?0:c,y2:l?c:0},h=a===w$?k$:E$;return UJ(r.bin)?(e={},Object(fp.a)(e,h,p2({channel:a,fieldDef:r,scaleName:o,mark:s,side:"start",offset:f["".concat(a,"2")]})),Object(fp.a)(e,a,p2({channel:a,fieldDef:r,scaleName:o,mark:s,side:"end",offset:f[a]})),e):zJ(r.bin)&&dJ(i)?(n={},Object(fp.a)(n,h,v2(r,o,{},{offset:f["".concat(a,"2")]})),Object(fp.a)(n,a,v2(i,o,{},{offset:f[a]})),n):void NK(RK.channelRequiredForBinned(h))}({fieldDef:u,fieldDef2:c,channel:e,mark:n,scaleName:h,spacing:IV(a.binSpacing,r[n].binSpacing),reverse:l.get("reverse")})}function y4(t,e,n,r,i,a){var o=IV(e[n],e.size,q0("size",e,a,{vgChannel:n}));if(void 0!==o)return{value:o};if(i){var s=i.get("type");if("point"!==s&&"band"!==s)return{value:a[t].continuousBandSize};if(void 0!==a[t].discreteBandSize)return{value:a[t].discreteBandSize};if(s!==kZ.POINT)return g2(r);var u=i.get("range");if(b0(u)&&ZY(u.step))return{value:u.step-1};NK(RK.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}return{value:IV(a[t].discreteBandSize,a.scale.rangeStep?a.scale.rangeStep-1:void 0,20)}}function b4(t,e){t.config;var n=t.width,r=t.height;return Object.assign({},O2(t,{size:"include",orient:"ignore"}),F2("x",t,x2(n)),F2("y",t,x2(r)),D2("size",t),function(t,e,n){if(n)return{shape:{value:n}};return D2("shape",t)}(t,0,e))}function _4(t){var e=t.config,n=t.markDef,r=n.orient,i="horizontal"===r?"width":"height",a=t.getScaleComponent("horizontal"===r?"x":"y"),o=IV(n[i],n.size,q0("size",n,e,{vgChannel:i}),e.tick.bandSize);if(void 0!==o)return o;var s=a?a.get("range"):void 0,u=s&&b0(s)?s.step:e.scale.rangeStep;if("number"!==typeof u)throw new Error("Function does not handle non-numeric rangeStep");return 3*u/4}var w4={area:{vgMark:"area",encodeEntry:function(t){return Object.assign({},O2(t,{size:"ignore",orient:"include"}),F2("x",t,"zeroOrMin"),F2("y",t,"zeroOrMin"),N2(t,"zeroOrMin","horizontal"===t.markDef.orient?"x2":"y2"),j2(t))}},bar:{vgMark:"rect",encodeEntry:function(t){return Object.assign({},O2(t,{size:"ignore",orient:"ignore"}),m4(t,"x","bar"),m4(t,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function(t){return b4(t,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function(t){return Object.assign({},O2(t,{size:"ignore",orient:"ignore"}))},postEncodingTransform:function(t){var e=t.encoding.shape;return[Object.assign({type:"geoshape",projection:t.projectionName()},e&&dJ(e)&&e.type===cJ?{field:bJ(e,{expr:"datum"})}:{})]}},line:{vgMark:"line",encodeEntry:function(t){var e=t.width,n=t.height;return Object.assign({},O2(t,{size:"ignore",orient:"ignore"}),F2("x",t,x2(e)),F2("y",t,x2(n)),D2("size",t,{vgChannel:"strokeWidth"}),j2(t))}},point:{vgMark:"symbol",encodeEntry:function(t){return b4(t)}},rect:{vgMark:"rect",encodeEntry:function(t){return Object.assign({},O2(t,{size:"ignore",orient:"ignore"}),m4(t,"x","rect"),m4(t,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function(t){var e=t.markDef,n=t.width,r=t.height,i=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?Object.assign({},O2(t,{size:"ignore",orient:"ignore"}),F2("x",t,"horizontal"===i?"zeroOrMin":x2(n)),F2("y",t,"vertical"===i?"zeroOrMin":x2(r)),"vertical"!==i?N2(t,"zeroOrMax","x2"):{},"horizontal"!==i?N2(t,"zeroOrMax","y2"):{},D2("size",t,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function(t){return b4(t,"square")}},text:{vgMark:"text",encodeEntry:function(t){var e=t.config,n=(t.encoding,t.width),r=t.height;return Object.assign({},O2(t,{size:"ignore",orient:"ignore"}),F2("x",t,x2(n)),F2("y",t,x2(r)),P2(t),D2("size",t,{vgChannel:"fontSize"}),T2("align",function(t,e,n){if(void 0===(t.align||q0("align",t,n)))return"center";return}(t.markDef,0,e)),T2("baseline",function(t,e,n){if(void 0===(t.baseline||q0("baseline",t,n)))return"middle";return}(t.markDef,0,e)))}},tick:{vgMark:"rect",encodeEntry:function(t){var e=t.config,n=t.markDef,r=t.width,i=t.height,a=n.orient,o="horizontal"===a?"width":"height",s="horizontal"===a?"height":"width";return Object.assign({},O2(t,{size:"ignore",orient:"ignore"}),F2("x",t,x2(r),"xc"),F2("y",t,x2(i),"yc"),D2("size",t,{defaultValue:_4(t),vgChannel:o}),Object(fp.a)({},s,{value:IV(n.thickness,e.tick.thickness)}))}},trail:{vgMark:"trail",encodeEntry:function(t){var e=t.width,n=t.height;return Object.assign({},O2(t,{size:"include",orient:"ignore"}),F2("x",t,x2(e)),F2("y",t,x2(n)),D2("size",t),j2(t))}}};function x4(t){return mV([HV,qV,KV],t.mark)?function(t){var e=JJ(t.mark,t.encoding),n=E4(t,{fromPrefix:e.length>0?k4:""});return e.length>0?[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:k4+t.requestDataName(YQ),data:t.requestDataName(YQ),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(t):E4(t)}var k4="faceted_path_";function E4(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=t.mark,r=IV(t.markDef.clip,function(t){var e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("domainRaw")||n&&n.get("domainRaw"))||void 0}(t),function(t){var e=t.component.projection;return!(!e||e.isFit)||void 0}(t)),i=z0(t.markDef),a=t.encoding.key,o=function(t){var e=t.encoding,n=t.stack,r=t.mark,i=t.markDef,a=t.config,o=e.order;if(!(!qY(o)&&gJ(o)&&gV(o.value)||!o&&gV(i.order)||gV(q0("order",i,a)))){if((qY(o)||dJ(o))&&!n)return K0(o,{expr:"datum"});if(e$(r)){var s="horizontal"===i.orient?"y":"x",u=e[s];if(dJ(u)){var c=u.sort;return qY(c)?{field:bJ(u,{prefix:s,suffix:"sort_index",expr:"datum"})}:F0(c)?{field:bJ({aggregate:GJ(t.encoding)?c.op:void 0,field:c.field},{expr:"datum"})}:{field:bJ(u,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}(t),s=w4[n].postEncodingTransform?w4[n].postEncodingTransform(t):null;return[Object.assign({name:t.getName("marks"),type:w4[n].vgMark},r?{clip:!0}:{},i?{style:i}:{},a?{key:{field:a.field}}:{},o?{sort:o}:{},{from:{data:e.fromPrefix+t.requestDataName(YQ)},encode:{update:w4[n].encodeEntry(t)}},s?{transform:s}:{})]}var S4=function(t){function e(t,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0;Object(vO.a)(this,e),(i=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,"unit",n,r,s,o,void 0,t.view))).fit=u,i.specifiedScales={},i.specifiedAxes={},i.specifiedLegends={},i.specifiedProjection={},i.selection={},i.children=[],i.initSize(Object.assign({},a,t.width?{width:t.width}:{},t.height?{height:t.height}:{}));var c=r$(t.mark)?t.mark.type:t.mark,l=i.encoding=VJ(function(t,e){return r4(t,e)}(t.encoding||{},o),c);return i.markDef=g4(t.mark,l,s),i.stack=EQ(c,l,i.config.stack),i.specifiedScales=i.initScales(c,l),i.specifiedAxes=i.initAxes(l),i.specifiedLegends=i.initLegend(l),i.specifiedProjection=t.projection,i.selection=t.selection,i}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"scaleDomain",value:function(t){var e=this.specifiedScales[t];return e?e.domain:void 0}},{key:"axis",value:function(t){return this.specifiedAxes[t]}},{key:"legend",value:function(t){return this.specifiedLegends[t]}},{key:"initScales",value:function(t,e){return hX.reduce((function(t,n){var r,i,a=e[n];return dJ(a)?(r=a,i=a.scale):hJ(a)&&(r=a.condition,i=a.condition.scale),r&&(t[n]=i||{}),t}),{})}},{key:"initAxes",value:function(t){return[w$,x$].reduce((function(e,n){var r=t[n];if(dJ(r)||n===w$&&dJ(t.x2)||n===x$&&dJ(t.y2)){var i=dJ(r)?r.axis:null;null!==i&&(e[n]=Object.assign({},i))}return e}),{})}},{key:"initLegend",value:function(t){return lX.reduce((function(e,n){var r=t[n];if(r){var i=dJ(r)?r.legend:hJ(r)?r.condition.legend:null;null!==i&&!1!==i&&function(t){switch(t){case C$:case j$:case D$:case M$:case R$:case P$:case L$:return!0;case F$:case N$:return!1}}(n)&&(e[n]=Object.assign({},i))}return e}),{})}},{key:"parseData",value:function(){this.component.data=s4(this)}},{key:"parseLayoutSize",value:function(){!function(t){var e=t.component.layoutSize;if(!e.explicit.width){var n=Q5(t,"width");e.set("width",n,!1)}if(!e.explicit.height){var r=Q5(t,"height");e.set("height",r,!1)}}(this)}},{key:"parseSelections",value:function(){this.component.selection=function(t,e){var n={},r=t.config.selection;e&&(e=fV(e));var i=function(i){if(!e.hasOwnProperty(i))return a=i,"continue";var o=e[i],s=r[o.type],u=(s.fields,s.encodings,S(s,["fields","encodings"]));for(var c in u)"encodings"===c&&o.fields||"fields"===c&&o.encodings||("mark"===c&&(o[c]=Object.assign({},u[c],o[c])),void 0!==o[c]&&!0!==o[c]||(o[c]=u[c]||o[c]));i=jV(i);var l=n[i]=Object.assign({},o,{name:i,events:HY(o.on)?hW(o.on,"scope"):o.on});r2(l,(function(e){e.parse&&e.parse(t,o,l)})),a=i};for(var a in e)i(a);return n}(this,this.selection)}},{key:"parseMarkGroup",value:function(){this.component.mark=x4(this)}},{key:"parseAxesAndHeaders",value:function(){var t;this.component.axes=(t=this,uX.reduce((function(e,n){return t.component.scales[n]&&t.axis(n)&&(e[n]=[v4(n,t)]),e}),{}))}},{key:"assembleSelectionTopLevelSignals",value:function(t){return function(t,e){var n=!1;return z1(t,(function(r,i){var a=r.name,o=GY(a+F1);e.filter((function(t){return t.name===a})).length||e.push({name:r.name,update:"".concat(B1,"(").concat(o)+("global"===r.resolve?")":", ".concat(GY(r.resolve),")"))}),n=!0,i.topLevelSignals&&(e=i.topLevelSignals(t,r,e)),r2(r,(function(n){n.topLevelSignals&&(e=n.topLevelSignals(t,r,e))}))})),n&&(e.filter((function(t){return"unit"===t.name})).length||e.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),e}(this,t)}},{key:"assembleSignals",value:function(){return[].concat(Object(id.a)(C0(this)),Object(id.a)((e=[],z1(t=this,(function(n,r){var i,a=n.name,o=r.modifyExpr(t,n);(i=e).push.apply(i,Object(id.a)(r.signals(t,n))),r2(n,(function(r){r.signals&&(e=r.signals(t,n,e)),r.modifyExpr&&(o=r.modifyExpr(t,n,o))})),e.push({name:a+L1,update:"modify(".concat(GY(n.name+F1),", ").concat(o,")")})})),e)));var t,e}},{key:"assembleSelectionData",value:function(t){return a2(this,t)}},{key:"assembleLayout",value:function(){return null}},{key:"assembleLayoutSignals",value:function(){return _1(this)}},{key:"assembleMarks",value:function(){var t=this.component.mark||[];return this.parent&&D5(this.parent)||(t=o2(this,t)),t.map(this.correctDataNames)}},{key:"getMapping",value:function(){return this.encoding}},{key:"channelHasField",value:function(t){return HJ(this.encoding,t)}},{key:"fieldDef",value:function(t){return jJ(this.encoding[t])}},{key:"hasProjection",get:function(){var t=this.encoding,e=this.mark===QV,n=t&&Y$.some((function(e){return dJ(t[e])}));return e||n}},{key:"mark",get:function(){return this.markDef.type}}]),e}(M5),O4=function(t){function e(t,n,r,i,a,o,s){var u;Object(vO.a)(this,e),u=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,"layer",n,r,o,a,t.resolve,t.view));var c=Object.assign({},i,t.width?{width:t.width}:{},t.height?{height:t.height}:{});return u.initSize(c),u.children=t.layer.map((function(t,n){if(bQ(t))return new e(t,Object(IQ.a)(u),u.getName("layer_"+n),c,a,o,s);if(u$(t))return new S4(t,Object(IQ.a)(u),u.getName("layer_"+n),c,a,o,s);throw new Error(RK.INVALID_SPEC)})),u}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"parseData",value:function(){this.component.data=s4(this);var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseData()}}catch(a){e=!0,n=a}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"parseLayoutSize",value:function(){$5(this)}},{key:"parseSelections",value:function(){var t=this;this.component.selection={};var e=!0,n=!1,r=void 0;try{for(var i,a=function(){var e=i.value;e.parseSelections(),AV(e.component.selection).forEach((function(n){t.component.selection[n]=e.component.selection[n]}))},o=this.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)a()}catch(s){n=!0,r=s}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"parseMarkGroup",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.parseMarkGroup()}}catch(a){e=!0,n=a}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"parseAxesAndHeaders",value:function(){!function(t){var e=t.component,n=e.axes,r=e.resolve,i={top:0,bottom:0,right:0,left:0},a=!0,o=!1,s=void 0;try{for(var u,c=t.children[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;l.parseAxesAndHeaders();var f=!0,h=!1,d=void 0;try{for(var p,v=AV(l.component.axes)[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var g=p.value;r.axis[g]=B2(t.component.resolve,g),"shared"===r.axis[g]&&(n[g]=h4(n[g],l.component.axes[g]),n[g]||(r.axis[g]="independent",delete n[g]))}}catch(q){h=!0,d=q}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}}}catch(q){o=!0,s=q}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}for(var m=0,y=[w$,x$];m<y.length;m++){var b=y[m],_=!0,w=!1,x=void 0;try{for(var k,E=t.children[Symbol.iterator]();!(_=(k=E.next()).done);_=!0){var S=k.value;if(S.component.axes[b]){if("independent"===r.axis[b]){n[b]=(n[b]||[]).concat(S.component.axes[b]);var O=!0,A=!1,T=void 0;try{for(var C,j=S.component.axes[b][Symbol.iterator]();!(O=(C=j.next()).done);O=!0){var D=C.value,R=D.getWithExplicit("orient"),M=R.value,P=R.explicit;if(i[M]>0&&!P){var F=f4[M];i[M]>i[F]&&D.set("orient",F,!1)}i[M]++}}catch(q){A=!0,T=q}finally{try{O||null==j.return||j.return()}finally{if(A)throw T}}}delete S.component.axes[b]}}}catch(q){w=!0,x=q}finally{try{_||null==E.return||E.return()}finally{if(w)throw x}}if("independent"===r.axis[b]&&n[b]&&n[b].length>1){var N=!0,L=!1,I=void 0;try{for(var B,U=n[b][Symbol.iterator]();!(N=(B=U.next()).done);N=!0){var z=B.value;z.get("grid")&&!z.explicit.grid&&(z.implicit.grid=!1)}}catch(q){L=!0,I=q}finally{try{N||null==U.return||U.return()}finally{if(L)throw I}}}}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionTopLevelSignals(t)}),t)}},{key:"assembleSignals",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleSignals())}),C0(this))}},{key:"assembleLayoutSignals",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleLayoutSignals())}),_1(this))}},{key:"assembleSelectionData",value:function(t){return this.children.reduce((function(t,e){return e.assembleSelectionData(t)}),t)}},{key:"assembleTitle",value:function(){var t=mQ(Object(gQ.a)(e.prototype),"assembleTitle",this).call(this);if(t)return t;var n=!0,r=!1,i=void 0;try{for(var a,o=this.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){if(t=a.value.assembleTitle())return t}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"assembleLayout",value:function(){return null}},{key:"assembleMarks",value:function(){return function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=t.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;A5(s)&&(e=o2(s,e))}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}(this,_V(this.children.map((function(t){return t.assembleMarks()}))))}},{key:"assembleLegends",value:function(){return this.children.reduce((function(t,e){return t.concat(e.assembleLegends())}),u3(this))}}]),e}(R5),A4=function(t){function e(t,n,r,i,a){var o;return Object(vO.a)(this,e),o=Object(vQ.a)(this,Object(gQ.a)(e).call(this,t,"repeat",n,r,a,i,t.resolve)),t.resolve&&t.resolve.axis&&("shared"===t.resolve.axis.x||"shared"===t.resolve.axis.y)&&NK(RK.REPEAT_CANNOT_SHARE_AXIS),o.repeat=t.repeat,o.children=o._initChildren(t,o.repeat,i,a),o}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"_initChildren",value:function(t,e,n,r){var i=[],a=!qY(e)&&e.row||[n?n.row:null],o=!qY(e)&&e.column||[n?n.column:null],s=qY(e)&&e||[n?n.repeat:null],u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=!0,v=!1,g=void 0;try{for(var m,y=a[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value,_=!0,w=!1,x=void 0;try{for(var k,E=o[Symbol.iterator]();!(_=(k=E.next()).done);_=!0){var S=k.value,O=(d?"__repeat_repeat_".concat(d):"")+(b?"__repeat_row_".concat(b):"")+(S?"__repeat_column_".concat(S):""),A={repeat:d,row:b,column:S};i.push(T4(t.spec,this,this.getName("child"+O),void 0,A,r,!1))}}catch(T){w=!0,x=T}finally{try{_||null==E.return||E.return()}finally{if(w)throw x}}}}catch(T){v=!0,g=T}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}}}catch(T){c=!0,l=T}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return i}},{key:"parseLayoutSize",value:function(){X5(this)}},{key:"assembleDefaultLayout",value:function(){var t=this.repeat,e=qY(t)?void 0:t.column?t.column.length:1;return Object.assign({},e?{columns:e}:{},{bounds:"full",align:"all"})}}]),e}(u4);function T4(t,e,n,r,i,a,o){if(YK(t))return new a4(t,e,n,i,a);if(bQ(t))return new O4(t,e,n,r,i,a,o);if(u$(t))return new S4(t,e,n,r,i,a,o);if(aQ(t))return new A4(t,e,n,i,a);if(function(t){return rQ(t)||iQ(t)||nQ(t)}(t))return new c4(t,e,n,i,a);throw new Error(RK.INVALID_SPEC)}function C4(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.logger&&(e=n.logger,PK=e),n.fieldTitle&&EJ(n.fieldTitle);try{var r=cQ(wV({},n.config,t.config)),i=MQ(t,r),a=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object.assign({type:"pad"},FQ(e),FQ(t));return"fit"===r.type&&(n||(NK(RK.FIT_NON_SINGLE),r.type="pad")),r}(t.autosize,r.autosize,bQ(i)||u$(i)),o=T4(i,null,"",void 0,void 0,r,"fit"===a.type);return o.parse(),function(t,e){x3(t.sources);for(var n=0,r=0,i=0;i<J3&&e5(t,e);i++)n++;t.sources.map(H3);for(var a=0;a<J3&&e5(t,e);a++)r++;x3(t.sources),Math.max(n,r)===J3&&NK("Maximum optimization runs(".concat(J3,") reached."))}(o.component.data,o),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=t.config?dQ(t.config):void 0,a=[].concat(t.assembleSelectionData([]),function(t,e){var n=[],r=H5(n),i=0;t.sources.forEach((function(t){t.hasName()||(t.dataName="source_".concat(i++));var e=t.assemble();r(t,e)})),n.forEach((function(t){0===t.transform.length&&delete t.transform}));var a=0,o=!0,s=!1,u=void 0;try{for(var c,l=n.entries()[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value,h=Object(ga.a)(f,2),d=h[0],p=h[1];0!==(p.transform||[]).length||p.source||n.splice(a++,0,n.splice(d,1)[0])}}catch(A){s=!0,u=A}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}for(var v=0,g=n;v<g.length;v++){var m=g[v],y=!0,b=!1,_=void 0;try{for(var w,x=(m.transform||[])[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;"lookup"===k.type&&(k.from=t.outputNodes[k.from].getSource())}}catch(A){b=!0,_=A}finally{try{y||null==x.return||x.return()}finally{if(b)throw _}}}for(var E=0,S=n;E<S.length;E++){var O=S[E];O.name in e&&(O.values=e[O.name])}return n}(t.component.data,n)),o=t.assembleProjections(),s=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0),l=t.assembleLayoutSignals();return l=l.filter((function(t){return"width"!==t.name&&"height"!==t.name||void 0===t.value||(e[t.name]=+t.value,!1)})),{spec:Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},t.description?{description:t.description}:{},e,s?{title:s}:{},u?{style:u}:{},c?{encode:{update:c}}:{},{data:a},o.length>0?{projections:o}:{},t.assembleGroup([].concat(Object(id.a)(l),Object(id.a)(t.assembleSelectionTopLevelSignals([])))),i?{config:i}:{},r?{usermeta:r}:{})}}(o,function(t,e,n){return Object.assign({autosize:1===AV(n).length&&n.type?n.type:n},LQ(e),LQ(t))}(t,r,a),t.datasets,t.usermeta)}finally{n.logger&&FK(),n.fieldTitle&&EJ(xJ)}}var j4=new(function(t){function e(){return Object(vO.a)(this,e),Object(vQ.a)(this,Object(gQ.a)(e).apply(this,arguments))}return Object(yQ.a)(e,t),Object(gO.a)(e,[{key:"mapUnit",value:function(t,e){var n=e.config;if(t.encoding){var r=t.encoding,i=t.transform,a=YJ(r,n),o=a.bins,s=a.timeUnits,u=a.aggregate,c=a.groupby,l=a.encoding,f=[].concat(Object(id.a)(i||[]),Object(id.a)(o),Object(id.a)(s),Object(id.a)(u.length?[{aggregate:u,groupby:c}]:[]));return Object.assign({},t,f.length>0?{transform:f}:{},{encoding:l})}return t}}]),e}(_Q));function D4(t,e){return j4.map(t,{config:e})}var R4=IY.version,M4=n(131),P4=n.n(M4),F4=n(224),N4={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},L4={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},I4={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},style:{bar:{binSpacing:2,fill:"#30a2da",stroke:null}},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},B4={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},U4="Benton Gothic Bold, sans-serif",z4={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},q4={background:"#ffffff",title:{anchor:"start",color:"#000000",font:U4,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:U4,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:U4,titleFontSize:13,titleFontWeight:"normal"},range:{category:z4["category-6"],diverging:z4["fireandice-6"],heatmap:z4["fire-7"],ordinal:z4["fire-7"],ramp:z4["fire-7"]}},W4={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},H4={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},G4=F4.version,Y4=n(225),V4="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n",$4="vg-tooltip-element",X4={offsetX:10,offsetY:10,id:$4,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var K4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function J4(t,e){return JSON.stringify(t,function(t){var e=[];return function(n,r){if("object"!==typeof r||null===r)return r;var i=e.indexOf(this)+1;return e.length=i,e.length>t?"[Object]":e.indexOf(r)>=0?"[Circular]":(e.push(r),r)}}(e))}var Z4=function(){function t(e){Object(vO.a)(this,t),this.options=Object.assign({},X4,e);var n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return V4.toString().replace($4,t)}(n);var i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return Object(gO.a)(t,[{key:"tooltipHandler",value:function(t,e,n,r){if(null!=r&&""!==r){this.el.innerHTML=function(t,e,n){if(Object(Ut.A)(t))return"[".concat(t.map((function(t){return e(Object(Ut.H)(t)?t:J4(t,n))})).join(", "),"]");if(Object(Ut.F)(t)){var r="",i=t,a=i.title,o=K4(i,["title"]);a&&(r+="<h2>".concat(e(a),"</h2>"));var s=Object.keys(o);if(s.length>0){r+="<table>";var u=!0,c=!1,l=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=o[d];void 0!==p&&(Object(Ut.F)(p)&&(p=J4(p,n)),r+='<tr><td class="key">'.concat(e(d),':</td><td class="value">').concat(e(p),"</td></tr>"))}}catch(v){c=!0,l=v}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}r+="</table>"}return r||"{}"}return e(t)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var i=function(t,e,n,r){var i=t.clientX+n;i+e.width>window.innerWidth&&(i=+t.clientX-n-e.width);var a=t.clientY+r;return a+e.height>window.innerHeight&&(a=+t.clientY-r-e.height),{x:i,y:a}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),a=i.x,o=i.y;this.el.setAttribute("style","top: ".concat(o,"px; left: ").concat(a,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),t}(),Q4=(Y4.version,function(t,e,n){var r=t.open(e),i=250,a=~~(1e4/i);t.addEventListener("message",(function e(n){n.source===r&&(a=0,t.removeEventListener("message",e,!1))}),!1),setTimeout((function t(){a<=0||(r.postMessage(n,"*"),setTimeout(t,i),a-=1)}),i)}),t6='.vega-embed {\n  position: relative;\n  display: inline-block;\n  padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    display: flex;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5); }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function e6(t,e){if("object"!==typeof e||null===e)return t;for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&("object"!==typeof e[n]||Object(Ut.A)(e[n])||null===e[n]?t[n]=e[n]:"object"!==typeof t[n]||null===t[n]?t[n]=n6(Object(Ut.A)(e[n].constructor)?[]:{},e[n]):n6(t[n],e[n]));return t}function n6(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){t=e6(t,a[i])}return t}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});var r6=p,i6=m,a6={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},o6={vega:"Vega","vega-lite":"Vega-Lite"},s6={vega:r6.version,"vega-lite":i6?i6.version:"not available"},u6={vega:function(t){return t},"vega-lite":function(t,e){return i6.compile(t,{config:e}).spec}},c6='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function l6(t,e,n,r){var i="<html><head>".concat(e,'</head><body><pre><code class="json">'),a="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(i+t+a),o.document.title="".concat(o6[r]," JSON Source")}function f6(t,e){if(t.$schema){var n=P4()(t.$schema);e&&e!==n.library&&console.warn("The given visualization spec is written in ".concat(o6[n.library],", but mode argument sets ").concat(o6[e]||e,"."));var r=n.library;return Object(Bt.satisfies)(s6[r],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(o6[r]," ").concat(n.version,", but the current version of ").concat(o6[r]," is v").concat(s6[r],".")),r}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e||"vega"}function h6(t,e){var n,r,i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=this,r=void 0,i=void 0,a=E.a.mark((function n(){var r,i,a,s,u,c,l,f,h,d,p,v,g,m,b,_,w,x,k,S,O,A,T,C,j,D,R,M,P,F,N,L;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(I=o.loader,r=I&&"load"in I?o.loader:r6.loader(o.loader),!r6.isString(e)){n.next=6;break}return n.next=4,r.load(e);case 4:return i=n.sent,n.abrupt("return",h6(t,JSON.parse(i),o));case 6:if(o=n6(o,e.usermeta&&e.usermeta.embedOptions),a=o.patch||o.onBeforeParse,s=!0===o.actions||!1===o.actions?o.actions:n6({},{export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},o.actions||{}),u=Object.assign({},a6,o.i18n),c=o.renderer||"canvas",l=o.logLevel||r6.Warn,f=o.downloadFileName||"visualization",h=o.config||{},!r6.isString(h)){n.next=19;break}return n.next=17,r.load(h);case 17:return d=n.sent,n.abrupt("return",h6(t,e,Object.assign({},o,{config:JSON.parse(d)})));case 19:if(!1!==o.defaultStyle&&(p="vega-embed-style",document.getElementById(p)||((v=document.createElement("style")).id=p,v.innerText=void 0===o.defaultStyle||!0===o.defaultStyle?(t6||"").toString():o.defaultStyle,document.head.appendChild(v))),o.theme&&(h=n6({},y[o.theme],h)),g=f6(e,o.mode),m=u6[g](e,h),"vega-lite"===g&&m.$schema&&(b=P4()(m.$schema),Object(Bt.satisfies)(s6.vega,"^".concat(b.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(b.version,", but current version is v").concat(s6.vega,"."))),_=Pt(t).classed("vega-embed",!0).html(""),!a){n.next=38;break}if(!(a instanceof Function)){n.next=30;break}m=a(m),n.next=38;break;case 30:if(!r6.isString(a)){n.next=37;break}return n.next=33,r.load(a);case 33:w=n.sent,m=n6({},m,JSON.parse(w)),n.next=38;break;case 37:m=n6({},m,a);case 38:return x=r6.parse(m,"vega-lite"===g?{}:h),k=new r6.View(x,{loader:r,logLevel:l,renderer:c}),!1!==o.tooltip&&(E=o.tooltip,S="function"===typeof E?o.tooltip:new Z4(!0===o.tooltip?{}:o.tooltip).call,k.tooltip(S)),void 0===(O=o.hover)&&(O="vega"===g),O&&(T=(A="boolean"===typeof O?{}:O).hoverSet,C=A.updateSet,k.hover(T,C)),o&&(o.width&&k.width(o.width),o.height&&k.height(o.height),o.padding&&k.padding(o.padding)),n.next=47,k.initialize(t).runAsync();case 47:if(!1!==s){if(j=_,!1!==o.defaultStyle&&(D=_.append("details").attr("title",u.CLICK_TO_VIEW_ACTIONS),j=D,D.insert("summary").html(c6),R=D.node(),document.addEventListener("click",(function(t){R.contains(t.target)||R.removeAttribute("open")}))),M=j.insert("div").attr("class","vega-actions"),!0===s||!1!==s.export)for(P=function(){var t=N[F];if(!0===s||!0===s.export||s.export[t]){var e=u["".concat(t.toUpperCase(),"_ACTION")];M.append("a").text(e).attr("href","#").attr("target","_blank").attr("download","".concat(f,".").concat(t)).on("mousedown",(function(){var e=this;k.toImageURL(t,o.scaleFactor).then((function(t){e.href=t})).catch((function(t){throw t})),xt.preventDefault()}))}},F=0,N=["svg","png"];F<N.length;F++)P();!0!==s&&!1===s.source||M.append("a").text(u.SOURCE_ACTION).attr("href","#").on("mousedown",(function(){l6(It()(e),o.sourceHeader||"",o.sourceFooter||"",g),xt.preventDefault()})),"vega-lite"!==g||!0!==s&&!1===s.compiled||M.append("a").text(u.COMPILED_ACTION).attr("href","#").on("mousedown",(function(){l6(It()(m),o.sourceHeader||"",o.sourceFooter||"","vega"),xt.preventDefault()})),!0!==s&&!1===s.editor||(L=o.editorUrl||"https://vega.github.io/editor/",M.append("a").text(u.EDITOR_ACTION).attr("href","#").on("mousedown",(function(){Q4(window,L,{config:h,mode:g,renderer:c,spec:It()(e)}),xt.preventDefault()})))}return n.abrupt("return",{view:k,spec:e,vgSpec:m});case 49:case"end":return n.stop()}var E,I}),n)})),new(i||(i=Promise))((function(t,e){function o(t){try{u(a.next(t))}catch(n){e(n)}}function s(t){try{u(a.throw(t))}catch(n){e(n)}}function u(e){e.done?t(e.value):new i((function(t){t(e.value)})).then(o,s)}u((a=a.apply(n,r||[])).next())}))}var d6={};function p6(t,e){void 0===t&&(t=d6),void 0===e&&(e=d6);var n=Object.keys(t),r=Object.keys(e);return t===e||n.length===r.length&&n.every((function(n){return t[n]===e[n]}))}var v6=function(){};function g6(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y6=function(t){function e(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return m6(g6(e=t.call.apply(t,[this].concat(r))||this),"containerRef",x.a.createRef()),m6(g6(e),"viewPromise",void 0),m6(g6(e),"handleError",(function(t){var n=e.props.onError;return(void 0===n?v6:n)(t),void console.warn(t)})),m6(g6(e),"modifyView",(function(t){e.viewPromise&&e.viewPromise.then((function(e){return e&&t(e),!0})).catch(e.handleError)})),e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.componentDidMount=function(){this.createView()},n.componentDidUpdate=function(t){var e=this,n=function(t){var e=new Set;return t.forEach((function(t){Object.keys(t).forEach((function(t){e.add(t)}))})),e}([this.props,t]);n.delete("className"),n.delete("style"),n.delete("signalListeners"),(Array.from(n).some((function(n){return e.props[n]!==t[n]}))||!p6(this.props.signalListeners,t.signalListeners))&&(this.clearView(),this.createView())},n.componentWillUnmount=function(){this.clearView()},n.createView=function(){var t=this.props,e=t.spec,n=t.onNewView,r=(t.onError,t.signalListeners),i=void 0===r?{}:r,a=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],0<=e.indexOf(n)||(i[n]=t[n]);return i}(t,["spec","onNewView","onError","signalListeners"]);this.containerRef.current&&(this.viewPromise=h6(this.containerRef.current,e,a).then((function(t){var e=t.view,n=Object.keys(i);return n.forEach((function(t){try{e.addSignalListener(t,i[t])}catch(t){console.warn("Cannot add invalid signal handler >>",t)}})),0<n.length&&e.run(),e})).catch(this.handleError),n&&this.modifyView(n))},n.clearView=function(){return this.modifyView((function(t){t.finalize()})),this.viewPromise=void 0,this},n.render=function(){var t=this.props,e=t.className,n=t.style;return x.a.createElement("div",{ref:this.containerRef,className:e,style:n})},e}(x.a.PureComponent);function b6(){return(b6=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function _6(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w6(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}m6(y6,"propTypes",{className:_.a.string,spec:_.a.any.isRequired,signalListeners:_.a.any,style:_.a.any,onNewView:_.a.any,onError:_.a.func}),n.d(e,"a",(function(){return x6}));var x6=function(t){function e(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return w6(_6(e=t.call.apply(t,[this].concat(r))||this),"vegaEmbed",x.a.createRef()),w6(_6(e),"handleNewView",(function(t){e.update();var n=e.props.onNewView;(void 0===n?v6:n)(t)})),e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.componentDidMount=function(){this.update()},n.componentDidUpdate=function(t){p6(this.props.data,t.data)||this.update()},n.update=function(){var t=this.props,e=t.data,n=t.spec;if(e){var r=function(t){var e=t.data;if(e){if(Array.isArray(e))return e.map((function(t){return t.name}));if("string"==typeof e.name)return[e.name]}return[]}(n).filter((function(t){return e[t]}));this.vegaEmbed.current&&0<r.length&&this.vegaEmbed.current.modifyView((function(t){r.forEach((function(n){!function(t,e,n){n&&(function(t){return!!t&&"[object Function]"==={}.toString.call(t)}(n)?n(t.data(e)):t.change(e,r6.changeset().remove((function(){return!0})).insert(n)))}(t,n,e[n])})),t.run()}))}},n.render=function(){var t=this.props,e=(t.data,function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],0<=e.indexOf(n)||(i[n]=t[n]);return i}(t,["data"]));return x.a.createElement(y6,b6({ref:this.vegaEmbed},e,{onNewView:this.handleNewView}))},e}(x.a.PureComponent);w6(x6,"propTypes",{data:_.a.any}),w6(x6,"defaultProps",{data:{}})}]]);
//# sourceMappingURL=2.f5ab1118.chunk.js.map