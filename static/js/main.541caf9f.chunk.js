(this["webpackJsonpcan-explorer"]=this["webpackJsonpcan-explorer"]||[]).push([[0],{126:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(5),n(10),n(11);function a(e,t){return Object.keys(e).reduce((function(t,n){return t[e[n]]=n,t}),{})}},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),s=n(3),i=function(){function e(t){Object(a.a)(this,e),this.name=t,this.attributes={},this.comment=null}return Object(s.a)(e,[{key:"text",value:function(){return this.name}}]),e}()},128:function(e,t,n){"use strict";var a=n(218),s=n(14),i=n.n(s);t.a=function(){var e=[],t=[];return[].forEach.call(arguments,(function(n){n&&n._definition&&n._name?e.push(n):t.push(n)})),i.a.apply(null,[].concat(t,[Object(a.css)(e)]))}},129:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(11);function s(e,t){var n=Object(a.a)(e,3),s=n[0],i=n[1],r=n[2],o=t<0?0:255,l=Math.abs(t);return[Math.round((o-s)*l)+s,Math.round((o-i)*l)+i,Math.round((o-r)*l)+r]}},13:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"b",(function(){return m}));var a=n(22),s="4b43250e7499a97d62a5",i="https://api.comma.ai/cabana/ghcallback",r="gh_access_token",o="commaai/opendbc",l="undefined"!==typeof window&&null!==Object(a.a)("unlogger"),c="http://localhost:8080/unlogger",u="4bc98019-8277-4fe0-867c-ed21ea843cc5",d=3,h=5e3,g=60,m="https://my.comma.ai/"},17:function(e,t,n){"use strict";(function(e){function n(e,t,n,a){var s=e.getMessageFrame(t),i=s?s.size:8;return{address:t,id:n,bus:a,entries:[],frame:s,byteColors:Array(i).fill(0),byteStateChangeCounts:Array(i).fill(0)}}function a(t,n,a,s,i,r){return{signals:t.getSignalValues(n,i),time:a,relTime:s,hexData:e.from(i).toString("hex"),byteStateChangeTimes:r,updated:Date.now()}}function s(t,n,s,i,r,o){var l;"string"===typeof i?(l=i,i=e.from(i,"hex")):l=e.from(i).toString("hex");var c=t.getMessageFrame(s),u=n-r,d=function(e,t,n,a){var s,i=Array(n).fill(0);if(a){s=Array.from(a.byteStateChangeTimes);for(var r=0;r<s.length;r++){e.substr(2*r,2)!==a.hexData.substr(2*r,2)&&(s[r]=t,i[r]=1)}}else s=Array(n).fill(t);return{byteStateChangeTimes:s,byteStateChangeCounts:i}}(l,u,c?c.size:8,o),h=d.byteStateChangeTimes,g=d.byteStateChangeCounts;return{msgEntry:a(t,s,n,u,i,h),byteStateChangeCounts:g}}for(var i=[],r=0;r<64;r+=8)for(var o=7;o>-1;o--)i.push(r+o);t.a={bigEndianBitIndex:function(e){return i.indexOf(e)},addCanMessage:function(e,t,a,i,r,o){var l=e.address,c=e.busTime,u=e.data,d=e.bus,h=d+":"+l.toString(16);void 0===i[h]&&(i[h]=n(t,l,h,d));var g=i[h].entries.length>0?i[h].entries[i[h].entries.length-1]:r[h]||null;o[h]&&i[h].byteStateChangeCounts.every((function(e){return 0===e}))&&(i[h].byteStateChangeCounts=o[h]);var m=s(t,c,l,u,a,g),p=m.msgEntry,f=m.byteStateChangeCounts;return i[h].byteStateChangeCounts=f.map((function(e,t){return i[h].byteStateChangeCounts[t]+e})),i[h].entries.push(p),p},createMessageSpec:n,matrixBitNumber:function(e){return i[e]},parseMessage:s,findMaxByteStateChangeCount:function(e){return Object.values(e).map((function(e){return e.byteStateChangeCounts})).reduce((function(e,t){return e.concat(t)}),[]).reduce((function(e,t){return e>t?e:t}),0)},setMessageByteColors:function(e,t){return e.byteColors=e.byteStateChangeCounts.map((function(e){return isNaN(e)?0:Math.min(255,75+e/t*180)})).map((function(e){return"rgb("+Math.round(e)+",0,0)"})),e},createMessageEntry:a}}).call(this,n(20).Buffer)},215:function(e,t,n){"use strict";(function(e){var a=n(2),s=n(3),i=n(59),r=n(13),o=function(){function t(){Object(a.a)(this,t),i.a.init({token:r.f,no_format:!0,catchall:!1}),this.context={}}return Object(s.a)(t,[{key:"bind",value:function(e){this.context.update(e)}},{key:"emit",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";if("undefined"===typeof e.__JEST__){var a={ctx:this.context,created:(new Date).getTime()/1e3,msg:t,src:"JSCloudLog"};"log"===n?i.a.log(a):"warn"===n?i.a.warn(a):"error"===n&&i.a.error(a)}}},{key:"log",value:function(e){this.emit(e)}},{key:"warn",value:function(e){this.emit(e,"warn")}},{key:"error",value:function(e){this.emit(e,"error")}}]),t}();t.a=new o}).call(this,n(19))},217:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var a=n(10),s=n(11),i=n(2),r=n(3),o=n(7),l=n(4),c=n(8),u=n(1),d=n.n(u),h=n(32),g=n(128),m=n(231),p=n(38),f=n(129),v=n(17);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var S=h.StyleSheet.create({bit:{margin:0,padding:12,userSelect:"none",cursor:"pointer",textAlign:"center",position:"relative"},bitSelectedStyle:{backgroundColor:"rgba(0,119,158,0.5)"},bitSignificance:{fontSize:12,display:"block",position:"absolute",bottom:0,left:0,right:0,margin:"0 auto"},highlightedSignalTitle:{backgroundColor:"rgba(0,0,0,0.2)"}}),E=function(t){function n(e){var t;Object(i.a)(this,n),(t=Object(o.a)(this,Object(l.a)(n).call(this,e))).updateSignalStyles=function(){var e=t.calcSignalStyles(t.state.signals);t.setState({signalStyles:e})},t.onSignalHover=function(e){e&&t.setState({highlightedSignal:e.name},t.updateSignalStyles)},t.onBitHover=function(e,n){var a=t.state,s=a.dragStartBit,i=a.signals,r=a.dragSignal;if(null!==s)if(null!==r){if(i=t.copySignals(i),s===(r=Object.assign(Object.create(r),r)).startBit&&r.size>1){if(r.isLittleEndian){if(e>r.msbBitIndex())return}else if(v.a.bigEndianBitIndex(e)>r.lsbBitNumber())return;var o=e-s;r.isLittleEndian?r.size-=o:null===r.bitDescription(e)?r.size+=Math.abs(o):r.size-=Math.abs(o),r.startBit+=o,i[r.name]=r,s=r.startBit}else if(1===r.size)Math.floor(e/8)===Math.floor(s/8)&&(e>s?r.isLittleEndian?r.size=e-r.startBit:(r.startBit=e,r.size=e-s+1,s=e):r.isLittleEndian?(r.startBit=e,r.size=s-e+1,s=e):(r.size=s-e+1,s=e)),i[r.name]=r;else if(r.isLittleEndian&&s===r.msbBitIndex()){if(e<r.startBit)return;var l=e-s;null===r.bitDescription(e)?r.size+=Math.abs(l):r.size-=Math.abs(l),i[r.name]=r,s=r.msbBitIndex()}else if(!r.isLittleEndian&&s===r.lsbBitIndex()){var c=e-s;null===r.bitDescription(e)?r.size+=Math.abs(c):r.size-=Math.abs(c),i[r.name]=r,s=r.lsbBitIndex()}t.setState({signals:i,dragSignal:r,dragCurrentBit:e,dragStartBit:s})}else t.setState({dragCurrentBit:e});n&&t.onSignalHover(n)},t.onSignalHoverEnd=function(e){e&&t.setState({highlightedSignal:null},t.updateSignalStyles)},t.resetDragState=function(){t.setState({dragStartBit:null,dragSignal:null,dragCurrentBit:null})},t.onTentativeSignalChange=function(e){var n=t.state.signals;n[e.name]=e,t.setState({signals:n})},t.onSignalChange=function(e,n){var a=t.state.signals;for(var s in a)a[s].uid===e.uid&&delete a[s];a[e.name]=e,t.setState({signals:a},t.propagateUpSignalChange)},t.onSignalRemove=function(e){var n=t.state.signals;delete n[e.name],t.setState({signals:n},t.propagateUpSignalChange)},t.onSignalPlotChange=function(e,n){var a=t.props.message;t.props.onSignalPlotChange(e,a.id,n)};var a={};return e.message&&e.message.frame&&e.message.frame.signals&&(a=t.copySignals(e.message.frame.signals)),t.state={bits:[],signals:a,signalStyles:t.calcSignalStyles(a),highlightedSignal:null,dragStartBit:null,dragSignal:null,dragCurrentBit:null},t}return Object(c.a)(n,t),Object(r.a)(n,[{key:"copySignals",value:function(e){return Object.entries(e).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],i=n[1];return e[a]=Object.assign(Object.create(i),i),e}),{})}},{key:"shouldComponentUpdate",value:function(e,t){return e.message.hexData!==this.props.message.hexData||e.messageIndex!==this.props.messageIndex||JSON.stringify(e.plottedSignalUids)!==JSON.stringify(this.props.plottedSignalUids)||JSON.stringify(this.state)!==JSON.stringify(t)}},{key:"signalColorStyle",value:function(e){var t,n,a=e.colors;if(this.state&&this.state.highlightedSignal===e.name){var s=Object(f.a)(a,-.5),i=Object(f.a)(a,.9);t="rgb(".concat(i.join(","),")"),n="rgba(".concat(s.join(","),",0.5)")}else{var r=a.join(",");t="rgb(".concat(r,")"),n="rgba(".concat(r,",0.2)")}return h.StyleSheet.create({signal:{color:t,backgroundColor:n}}).signal}},{key:"calcSignalStyles",value:function(e){var t=this,n={};return Object.values(e).forEach((function(e){n[e.name]=t.signalColorStyle(e)})),n}},{key:"componentWillReceiveProps",value:function(e){var t=e.message;if(t.address!==this.props.message.address){var n=t.frame?t.frame.signals:{};this.setState({signals:this.copySignals(n)},this.updateSignalStyles)}}},{key:"signalForBit",value:function(e){return Object.values(this.state.signals).filter((function(t){return null!==t.bitDescription(e)}))[0]}},{key:"signalBitIndex",value:function(e,t){var n=t.startBit;return t.isLittleEndian||(n=v.a.bigEndianBitIndex(n)),e-n}},{key:"nextNewSignalName",value:function(){var e,t=Object.keys(this.state.signals),n=1;do{e="NEW_SIGNAL_"+n,n++}while(-1!==t.indexOf(e));return e}},{key:"onBitMouseDown",value:function(e,t){this.setState({dragStartBit:e,dragSignal:t||null})}},{key:"createSignal",value:function(e){var t=e.startBit,n=e.size,s=e.isLittleEndian,i=new p.a({name:this.nextNewSignalName(),startBit:t,size:n,isLittleEndian:s}),r=this.state.signals;(r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r))[i.name]=i,this.setState({signals:r},this.propagateUpSignalChange)}},{key:"createSignalIfNotExtendingOne",value:function(e,t){if(null===this.state.dragSignal){for(var n=e;n<=t;n++)if(void 0!==this.signalForBit(n))return;var a,s=Math.floor(t/8)===Math.floor(e/8);a=s||!(!s&&t<e)?e%8<4:e%8>=4;var i,r=e;s?i=Math.abs(t-e)+1:a?t>e?(r=e,i=t-e+1):(r=t,i=e-t+1):(t<e&&(r=t),i=Math.abs(v.a.bigEndianBitIndex(t)-v.a.bigEndianBitIndex(e))+1),this.createSignal({startBit:r,size:i,isLittleEndian:a})}}},{key:"onBitMouseUp",value:function(e,t){if(null!==this.state.dragStartBit){var n=this.state.dragStartBit;e!==n&&this.createSignalIfNotExtendingOne(n,e),this.propagateUpSignalChange(),this.resetDragState()}}},{key:"byteValueHex",value:function(e){var t=this.props.message.entries;return this.props.messageIndex<t.length?t[this.props.messageIndex].hexData.substr(2*e,2):"--"}},{key:"bitValue",value:function(t,n){var a=this.props.message.entries;if(this.props.messageIndex<a.length){var s=a[this.props.messageIndex],i=e.from(s.hexData,"hex");return t>=i.length?"-":i.readInt8(t)>>n&1}return"-"}},{key:"bitIsContainedInSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state,a=n.dragStartBit,s=n.dragCurrentBit;if(t||a%8<4)return null!==a&&null!==s&&e>=a&&e<=s;var i=v.a.bigEndianBitIndex(a),r=v.a.bigEndianBitIndex(s),o=v.a.bigEndianBitIndex(e);return null!==a&&null!==s&&o>=i&&o<=r}},{key:"onBitDoubleClick",value:function(e,t){void 0===t&&this.createSignal({startBit:e,size:1,isLittleEndian:!1})}},{key:"renderBitMatrix",value:function(){var e,t=this,n=this.props.message,a=[];e=n.frame&&n.frame.size?Math.floor(8*n.frame.size/8):8;for(var s=0;s<e;s++){for(var i=[],r=function(){var e=8*s+o,n=t.signalForBit(e),a=null,r="";if(n){a=t.state.signalStyles[n.name]||null;var l=n.bitDescription(e);r=l.isMsb?"msb":l.isLsb?"lsb":""}else t.bitIsContainedInSelection(e)&&(a=S.bitSelectedStyle);var c=Object(g.a)("bit",S.bit,a),u=t.bitValue(s,o);i.push(d.a.createElement("td",{key:o.toString(),className:c,onMouseEnter:function(){return t.onBitHover(e,n)},onMouseLeave:function(){return t.onSignalHoverEnd(n)},onMouseDown:t.onBitMouseDown.bind(t,e,n),onMouseUp:t.onBitMouseUp.bind(t,e,n),onDoubleClick:function(){return t.onBitDoubleClick(e,n)}},d.a.createElement("span",null,u),d.a.createElement("span",{className:Object(g.a)(S.bitSignificance)},r)))},o=7;o>=0;o--)r();i.push(d.a.createElement("td",{key:"hex-repr"},this.byteValueHex(s))),a.push(d.a.createElement("tr",{key:s.toString()},i))}return d.a.createElement("div",{className:"cabana-explorer-signals-matrix"},d.a.createElement("table",{cellSpacing:0,onMouseLeave:this.resetDragState},d.a.createElement("tbody",null,a)))}},{key:"propagateUpSignalChange",value:function(){var e=this.state.signals;this.props.onConfirmedSignalChange(this.props.message,this.copySignals(e))}},{key:"render",value:function(){return d.a.createElement("div",{className:"cabana-explorer-signals-controller"},0===Object.keys(this.state.signals).length?d.a.createElement("p",null,"Double click or drag to add a signal"):null,this.props.message.entries[this.props.messageIndex]?d.a.createElement("div",{className:"cabana-explorer-signals-time"},d.a.createElement("p",null,"time:"," ",this.props.message.entries[this.props.messageIndex].relTime.toFixed(3))):null,this.props.message.isLogEvent||this.renderBitMatrix(),d.a.createElement(m.a,{isLogEvent:!!this.props.message.isLogEvent,signals:this.state.signals,signalStyles:this.state.signalStyles,highlightedSignal:this.state.highlightedSignal,onSignalHover:this.onSignalHover,onSignalHoverEnd:this.onSignalHoverEnd,onTentativeSignalChange:this.onTentativeSignalChange,onSignalChange:this.onSignalChange,onSignalRemove:this.onSignalRemove,onSignalPlotChange:this.onSignalPlotChange,plottedSignalUids:this.props.plottedSignalUids}))}}]),n}(u.Component)}).call(this,n(20).Buffer)},22:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(10);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){return Object.keys(e).map((function(t){return t+"="+encodeURIComponent(decodeURIComponent(e[t]))})).join("&")}function r(e){var t=window.location;e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t.search);return null===n?null:decodeURIComponent(n[1].replace(/\+/g," "))}function o(e){var t=e.add,n=e.remove,r=void 0===n?[]:n,o=new RegExp("[\\?&]([^&#]+)=([^&#]*)").exec(location.search),l={};if(null!=o){for(var c=1;c<o.length-1;c+=2){var u=o[c],d=o[c+1];l[u]=d}for(var h in l)-1!==r.indexOf(h)&&delete l[h];l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l,{},t)}else l=t;return location.origin+location.pathname+"?"+i(l)}},231:function(e,t,n){"use strict";var a=n(11),s=n(5),i=n(2),r=n(3),o=n(7),l=n(4),c=n(8),u=n(1),d=n.n(u),h=n(14),g=n.n(h),m=(n(38),n(17)),p=function(e){return function(t,n){return""!==t&&(t=Number(t)||0)<0&&(t=0),n[e]=t,n}},f=[{field:"name",title:"Name",type:"string"},{field:"size",title:"Size",type:"number",transform:p("size")},{field:"startBit",title:function(e){return e.isLittleEndian?"Least significant bit":"Most significant bit"},type:"number",transform:p("startBit")},{field:"isLittleEndian",title:"Endianness",type:"option",options:{options:["Little","Big"],optionValues:{Little:!0,Big:!1}},transform:function(e,t){if(t.isLittleEndian!==e){var n=t.startBit;if(e){var a=Math.floor(t.startBit/8),s=Math.floor((t.startBit-t.size+1)/8);t.startBit=a===s?t.startBit-t.size+1:m.a.matrixBitNumber(n)}else{var i=Math.floor(t.startBit/8),r=Math.floor((t.startBit+t.size-1)/8);t.startBit=i===r?t.startBit+t.size-1:m.a.bigEndianBitIndex(n)}t.isLittleEndian=e}return t}},{field:"isSigned",title:"Sign",type:"option",options:{options:["Signed","Unsigned"],optionValues:{Signed:!0,Unsigned:!1}}},{field:"factor",title:"Factor",type:"number"},{field:"offset",title:"Offset",type:"number"},{field:"unit",title:"Unit",type:"string"},{field:"comment",title:"Comment",type:"string"},{field:"min",title:"Minimum value",type:"number"},{field:"max",title:"Maximum value",type:"number"}],v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.htmlFor,a=e.children;return d.a.createElement("div",{className:"form-field form-field--small"},d.a.createElement("label",{htmlFor:n},t),a)}}]),t}(u.Component),b=n(126),S={number:function(e){var t,n=e.fieldSpec,a=e.signal,s=e.isExpanded,i=e.signalEdited,r=e.updateField,o=n.field,l=n.title,c="".concat(a.name,"_").concat(o);if(s){var u=i;if(""!==u){var h=Number(u);u=isNaN(h)?"":h}t=d.a.createElement("input",{id:c,type:"number",value:u,onChange:function(e){r(n,e.target.value)}})}else{var g=a[o];t=d.a.createElement("span",null,g)}return d.a.createElement(v,{title:"function"===typeof l?l(a):l,htmlFor:c},t)},option:function(e){var t,n=e.fieldSpec,a=e.signal,s=e.isExpanded,i=e.signalEdited,r=e.updateField,o=n.field,l=n.title,c="".concat(a.name,"_").concat(o),u=n.options,h=u.options,g=u.optionValues,m=Object(b.a)(g);if(s){var p=h.map((function(e){return d.a.createElement("option",{key:e,value:g[e]},e)}));t=d.a.createElement("select",{id:c,defaultValue:i,onChange:function(e){r(n,"true"===e.target.value)}},p)}else t=d.a.createElement("span",null,m[a[o]]);return d.a.createElement(v,{title:"function"===typeof l?l(a):l,htmlFor:c},t)},string:function(e){var t,n=e.fieldSpec,a=e.signal,s=e.isExpanded,i=e.signalEdited,r=e.updateField,o=n.field,l=n.title,c="".concat(a.name,"_").concat(o);return t=s?d.a.createElement("input",{id:c,type:"text",value:i||"",onChange:function(e){r(n,e.target.value)}}):d.a.createElement("span",null,a[o]),d.a.createElement(v,{title:"function"===typeof l?l(a):l,htmlFor:c},t)}},E=function(e){var t=e.signal,n=e.onSignalRemove,a=e.isExpanded,s=e.getSignalEdited,i=e.update;return d.a.createElement("div",{className:"signals-legend-entry-form"},f.map((function(e){var n=S[e.type];return d.a.createElement("div",{className:"signals-legend-entry-form-field",key:e.field},d.a.createElement(n,{fieldSpec:e,signal:t,isExpanded:a,signalEdited:s(e.field),updateField:i}))})),d.a.createElement("div",{className:"signals-legend-entry-form-remove"},d.a.createElement("button",{className:"button--tiny button--alpha",onClick:function(){return n(t)}},"Remove Signal")))},y=n(57),O=n(58);function k(){var e=Object(y.a)(["\n  display: block;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  width: 1.5%;\n  opacity: ",";\n  background-color: rgb(",");\n"]);return k=function(){return e},e}var _=Object(O.a)("div")(k(),(function(e){return e.isHighlighted?.5:.3}),(function(e){return e.rgb.join(",")})),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).updateField=function(e,t){var s=n.state.signalEdited,i=n.props.signal;e.transform?s=e.transform(t,s):s[e.field]=t,n.setState({signalEdited:s});var r=Object.assign(Object.create(i),i);Object.entries(s).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],s=t[1];r[n]=s})),n.props.onSignalChange(r,i)},n.toggleEditing=function(e){if(!n.props.isLogEvent){var s=n.state.signalEdited,i=n.props,r=i.signal,o=i.isExpanded,l=Object.assign(Object.create(r),r);o?(Object.entries(s).forEach((function(e){var n=Object(a.a)(e,2),s=n[0],i=n[1],r=t.fieldSpecForName(s);r&&"number"===r.type&&isNaN(parseInt(i,10))&&(i=0),l[s]=i})),n.props.onSignalChange(l,r)):s=l,n.setState({signalEdited:s}),n.props.toggleExpandSignal(r),e.stopPropagation()}},n.toggleSignalPlot=function(e){var t=n.props,a=t.signal,s=t.isPlotted;e.preventDefault(),n.props.onSignalPlotChange(!s,a.uid)},n.getSignalEdited=function(e){return n.state.signalEdited[e]},n.state={signalEdited:Object.assign(Object.create(e.signal),e.signal)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.signal.equals(this.props.signal)||this.setState({signalEdited:Object.assign(Object.create(e.signal),e.signal)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.signal,a=t.isHighlighted,s=t.color,i=t.isPlotted,r=t.isExpanded,o=r?"is-expanded":null,l=i?"button":"button--alpha";return d.a.createElement("div",{className:g()("signals-legend-entry",o),onMouseEnter:function(){return e.props.onSignalHover(n)},onMouseLeave:function(){return e.props.onSignalHoverEnd(n)}},d.a.createElement(_,{isHighlighted:a,rgb:s}),d.a.createElement("div",{className:"signals-legend-entry-header"},d.a.createElement("div",{className:"signals-legend-entry-header-name",onClick:this.toggleEditing},d.a.createElement("strong",null,n.name)),d.a.createElement("div",{className:"signals-legend-entry-header-action",onClick:this.toggleSignalPlot},d.a.createElement("button",{className:g()("button--tiny",l)},i?"Hide Plot":"Show Plot"))),d.a.createElement("div",{className:"signals-legend-entry-body"},r&&d.a.createElement(E,{signal:n,onSignalRemove:this.props.onSignalRemove,isExpanded:r,getSignalEdited:this.getSignalEdited,update:this.updateField})))}}]),t}(u.Component);C.fieldSpecForName=function(e){return f.find((function(t){return t.field===e}))},n.d(t,"a",(function(){return x}));var x=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={expandedSignals:[]},n.toggleExpandSignal=function(e){var t=n.state.expandedSignals;if(t.includes(e.uid)){var a=t.filter((function(t){return t!==e.uid}));n.setState({expandedSignals:a})}else{var i=[].concat(Object(s.a)(t),[e.uid]);n.setState({expandedSignals:i})}},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"checkExpandedSignal",value:function(e){return this.state.expandedSignals.includes(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.signals,s=t.highlightedSignal,i=Object.entries(n).sort((function(e,t){var n=Object(a.a)(e,2),s=(n[0],n[1]),i=Object(a.a)(t,2),r=(i[0],i[1]);return s.startBit<r.startBit?-1:1})).map((function(t){var i=Object(a.a)(t,2),r=i[0],o=i[1],l=n[r].colors,c=s===r;return d.a.createElement(C,{isLogEvent:e.props.isLogEvent,key:o.uid,signal:o,isHighlighted:c,color:l,onSignalHover:e.props.onSignalHover,onSignalHoverEnd:e.props.onSignalHoverEnd,onTentativeSignalChange:e.props.onTentativeSignalChange,onSignalChange:e.props.onSignalChange,onSignalRemove:e.props.onSignalRemove,onSignalPlotChange:e.props.onSignalPlotChange,toggleExpandSignal:e.toggleExpandSignal,isPlotted:-1!==e.props.plottedSignalUids.indexOf(o.uid),isExpanded:e.checkExpandedSignal(o.uid)})})).filter((function(e){return null!=e})).reduce((function(e,t){return e.concat(t)}),[]);return d.a.createElement("div",{className:"cabana-explorer-signals-legend"},i)}}]),t}(u.Component)},232:function(e,t,n){e.exports=n(531)},266:function(e,t){},30:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));var a=n(11),s=n(2),i=n(3),r=n(214),o=n.n(r),l=n(215),c=n(38),u=n(56),d=n(127),h=n(17),g=n(85),m=n(379).UINT64,p=/^CM_ *"(.*)";/,f=/^CM_ *"(.*)/,v=/^BO_ (\w+) (\w+) *: (\w+) (\w+)/,b=/^SG_ (\w+) : (\d+)\|(\d+)@(\d+)([+|-]) \(([0-9.+-eE]+),([0-9.+-eE]+)\) \[([0-9.+-eE]+)\|([0-9.+-eE]+)\] "(.*)" (.*)/,S=/^SG_ (\w+) (\w+) *: (\d+)\|(\d+)@(\d+)([+|-]) \(([0-9.+-eE]+),([0-9.+-eE]+)\) \[([0-9.+-eE]+)\|([0-9.+-eE]+)\] "(.*)" (.*)/,E=/^VAL_ (\w+) (\w+) (.*);/,y=/^VAL_TABLE_ (\w+) (.*);/,O=/^BO_TX_BU_ ([0-9]+) *: *(.+);/,k=/^CM_ SG_ *(\w+) *(\w+) *"(.*)";/,_=/^CM_ SG_ *(\w+) *(\w+) *"(.*)/,C=/^CM_ BO_ *(\w+) *"(.*)";/,x=/^CM_ BO_ *(\w+) *"(.*)/,M=/^BU_:(.*)/,w=/^CM_ BU_ *(\w+) *"(.*)";/,T=/^CM_ BU_ *(\w+) *"(.*)/;function P(e){return Number.isInteger(e)?parseInt(e,10):parseFloat(e)}var j=function(){function t(e){Object(s.a)(this,t),this.boardUnits=[],this.comments=[],this.messages=new Map,void 0!==e&&(this.dbcText=e,this.importDbcString(e))}return Object(i.a)(t,[{key:"getMessageFrame",value:function(e){return g.b(e)?g.a(e):this.messages.get(e)}},{key:"nextNewFrameName",value:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var s,i=this.messages.values()[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value;e.push(r.name)}}catch(c){n=!0,a=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}var o,l=1;do{o="NEW_MSG_"+l,l++}while(-1!==e.indexOf(o));return o}},{key:"updateBoardUnits",value:function(){var e=this.boardUnits.map((function(e){return e.name})),t=Array.from(this.messages.entries()).map((function(e){var t=Object(a.a)(e,2),n=(t[0],t[1]);return Object.values(n.signals)})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.receiver})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e,t,n){return n.indexOf(e)===t})).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return new d.a(e)}));this.boardUnits=this.boardUnits.concat(t)}},{key:"text",value:function(){this.updateBoardUnits();var e='VERSION ""\n\n\n';e+="NS_ :"+this._newSymbols(),e+="\n\nBS_:\n",e+="\nBU_: "+this.boardUnits.map((function(e){return e.text()})).join(" ")+"\n\n\n";var t=[],n=!0,s=!1,i=void 0;try{for(var r,o=this.messages.values()[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;t.push(l)}}catch(u){s=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}e+=t.map((function(e){return e.text()})).join("\n\n")+"\n\n",e+=t.map((function(e){return[e.id,e.transmitters.slice(1)]})).filter((function(e){var t=Object(a.a)(e,2);t[0];return t[1].length>0})).map((function(e){var t=Object(a.a)(e,2),n=t[0],s=t[1];return"BO_TX_BU_ ".concat(n," : ").concat(s.join(","),";")})).join("\n")+"\n\n\n",e+=this.boardUnits.filter((function(e){return null!==e.comment})).map((function(e){return"CM_ BU_ ".concat(e.name,' "').concat(e.comment,'";')})).join("\n"),e+=t.filter((function(e){return null!==e.comment})).map((function(e){return"CM_ BO_ ".concat(e.address,' "').concat(e.comment,'";')})).join("\n");var c=t.map((function(e){return Object.values(e.signals).map((function(t){return[e.id,t]}))})).reduce((function(e,t){return e.concat(t)}),[]);return e+=c.filter((function(e){var t=Object(a.a)(e,2);t[0];return null!==t[1].comment})).map((function(e){var t=Object(a.a)(e,2),n=t[0],s=t[1];return"CM_ SG_ ".concat(n," ").concat(s.name,' "').concat(s.comment,'";')})).join("\n")+"\n",e+=c.filter((function(e){var t=Object(a.a)(e,2);t[0];return t[1].valueDescriptions.size>0})).map((function(e){var t=Object(a.a)(e,2),n=t[0];return t[1].valueDescriptionText(n)})).join("\n")+"\n",(e+=this.comments.map((function(e){return'CM_ "'.concat(e,'";')})).join("\n")).trim()+"\n"}},{key:"getMessageName",value:function(e){var t=this.getMessageFrame(e);return t&&t.frame?t.frame.name:null}},{key:"getSignals",value:function(e){var t=this.getMessageFrame(e);return t?t.signals:{}}},{key:"createFrame",value:function(e){var t=new u.a({name:this.nextNewFrameName(),id:e,size:8});return this.messages.set(e,t),t}},{key:"setSignals",value:function(e,t){var n=this.getMessageFrame(e);if(n){var a=Object.assign(Object.create(n),n);a.signals=t,this.messages.set(e,a)}else{var s=this.createFrame(e);s.signals=t,this.messages.set(e,s),this.updateBoardUnits()}}},{key:"addSignal",value:function(e,t){var n=this.getMessageFrame(e);n&&(n.signals[t.name]=t,this.updateBoardUnits())}},{key:"importDbcString",value:function(e){for(var t=[],n=new Map,s=[],i=new Map,r=0,o=null,h=e.split("\n"),g=0;g<h.length;g++){var m=h[g].trim();if(0!==m.length){if(null!=o){var j=o,D=j.type,N=j.data;m=m.replace(/" *;/,"");var B="\n".concat(m.substr(0,m.length));if(-1!==m.indexOf('"')&&(o=null,B=B.substr(0,B.length-1)),"FollowUpSignalComment"===D)N.comment+=B;else if("FollowUpMsgComment"===D){N.comment+=B}else if("FollowUpBoardUnitComment"===D){N.comment+=B}else if("FollowUpDbcComment"===D){var R=this.comments[this.comments.length-1];this.comments[this.comments.length-1]=R+B}}if(0===m.indexOf("BO_ ")){var L=m.match(v);if(null===L){t.push("failed to parse message definition on line ".concat(g+1," -- ").concat(m));continue}var I=L.slice(1),A=Object(a.a)(I,4),G=A[0],U=A[1],F=A[2],X=A[3];r=parseInt(G,0),F=parseInt(F,10);var H=new u.a({name:U,id:r,size:F,transmitters:[X]});n.set(r,H)}else if(0===m.indexOf("SG_")){var W=m.match(b);if(null===W){if(null===(W=m.match(S))){t.push("failed to parse signal definition on line ".concat(g+1," -- ").concat(m));continue}W=W[1]+W.slice(3)}else W=W.slice(1);var V=W,z=Object(a.a)(V,11),Y=z[0],K=z[1],J=z[2],q=z[3],Q=z[4],Z=z[5],$=z[6],ee=z[7],te=z[8],ne=z[9],ae=z[10],se={name:Y,startBit:K=parseInt(K,10),size:J=parseInt(J,10),isLittleEndian:q=1===parseInt(q,10),isSigned:Q="-"===Q,factor:Z=P(Z),offset:$=P($),unit:ne,min:ee=P(ee),max:te=P(te),receiver:ae.split(",").map((function(e){return e.trim()}))},ie=new c.a(se);void 0!==n.get(r)?n.get(r).signals[Y]=ie:l.a.warn("importDbcString: could not add signal: "+Y+" due to missing message: "+r)}else if(0===m.indexOf("VAL_ ")){var re=m.match(E);if(null!==re){var oe=re.slice(1),le=Object(a.a)(oe,3),ce=le[0],ue=le[1],de=le[2];de=de.split('"').map((function(e){return e.trim()})).filter((function(e){return e.length>0})),ce=parseInt(ce,10);var he=n.get(ce).signals[ue];if(void 0===he){t.push("could not find signal for value description on line ".concat(g+1," -- ").concat(m));continue}for(var ge=0;ge<de.length;ge+=2){var me=de[ge].trim(),pe=de[ge+1].trim();he.valueDescriptions.set(me,pe)}}else t.push("failed to parse value description on line ".concat(g+1," -- ").concat(m))}else if(0===m.indexOf("VAL_TABLE_ ")){var fe=m.match(y);if(null!==fe){var ve=new Map,be=fe.slice(1),Se=Object(a.a)(be,2),Ee=Se[0],ye=Se[1];ye=ye.split('"').map((function(e){return e.trim()})).filter((function(e){return e.length>0}));for(var Oe=0;Oe<ye.length;Oe+=2){var ke=ye[Oe],_e=ye[Oe+1];ve.set(ke,_e)}i.set(Ee,ve)}else t.push("failed to parse value table on line ".concat(g+1," -- ").concat(m))}else if(0===m.indexOf("BO_TX_BU_ ")){var Ce=m.match(O);if(null!==Ce){var xe=Ce.slice(1),Me=Object(a.a)(xe,2),we=Me[0],Te=Me[1];we=parseInt(we,10);var Pe=n.get(we);Pe.transmitters.push(Te),n.set(we,Pe)}else t.push("failed to parse message transmitter definition on line ".concat(g+1," -- ").concat(m))}else if(0===m.indexOf("CM_ SG_ ")){var je=m.match(k),De=!1;if(null===je&&(je=m.match(_),De=!0),null===je){t.push("failed to parse signal comment on line ".concat(g+1," -- ").concat(m));continue}var Ne=je.slice(1),Be=Object(a.a)(Ne,3),Re=Be[0],Le=Be[1],Ie=Be[2];Re=parseInt(Re,10);var Ae=n.get(Re);if(void 0===Ae){t.push("failed to parse signal comment on line ".concat(g+1," -- ").concat(m,":\n                                    message id ").concat(Re," does not exist prior to this line"));continue}var Ge=Ae.signals[Le];if(void 0===Ge){t.push("failed to parse signal comment on line ".concat(g+1," -- ").concat(m));continue}Ge.comment=Ie,n.set(Re,Ae),De&&(o={type:"FollowUpSignalComment",data:Ge})}else if(0===m.indexOf("CM_ BO_ ")){var Ue=m.match(C),Fe=!1;if(null===Ue&&(Fe=!0,null===(Ue=m.match(x)))){t.push("failed to message comment on line ".concat(g+1," -- ").concat(m));continue}var Xe=Ue.slice(1),He=Object(a.a)(Xe,2),We=He[0],Ve=He[1];We=parseInt(We,10);var ze=n.get(We);ze.comment=Ve,Fe&&(o={type:"FollowUpMsgComment",data:ze})}else if(0===m.indexOf("BU_: ")){var Ye=m.match(M);if(null===Ye){t.push("failed to parse board unit definition on line ".concat(g+1," -- ").concat(m));continue}var Ke=Ye.slice(1),Je=Object(a.a)(Ke,1)[0].split(" ").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return new d.a(e)}));s=s.concat(Je)}else if(0===m.indexOf("CM_ BU_ ")){if("continue"===function(){var e=m.match(w),n=!1;if(null===e&&(n=!0,null===(e=m.match(T))))return t.push("failed to parse board unit comment on line ".concat(g+1," -- ").concat(m)),"continue";var i=e.slice(1),r=Object(a.a)(i,2),l=r[0],c=r[1],u=s.find((function(e){return e.name===l}));u&&(u.comment=c),n&&(o={type:"FollowUpBoardUnitComment",data:u})}())continue}else if(0===m.indexOf("CM_ ")){var qe=m.match(p),Qe=!1;if(null===qe){if(null===(qe=m.match(f))){t.push("failed to parse dbc comment on line ".concat(g+1," -- ").concat(m));continue}Qe=!0}var Ze=qe.slice(1),$e=Object(a.a)(Ze,1)[0];this.comments.push($e),Qe&&(o={type:"FollowUpDbcComment",data:$e})}}}t.length,this.messages=n,this.boardUnits=s,this.valueTables=i}},{key:"valueForInt64Signal",value:function(e,t){var n,a,s,i=4*t.length;if(e.isLittleEndian?(n=m(function(e,t,n){for(var a=[],s=0;s<e.length;s+=t)for(var i=e.slice(s,s+t),r=t-n;r>-n;r-=n)a.push(i.slice(r,r+n));return a.join("")}(t,16,2),16),a=e.startBit,s=m(a)):(n=m(t,16),a=h.a.bigEndianBitIndex(e.startBit),s=m(i-(a+e.size))),s<0)return null;var r=m(Math.pow(2,e.size)-1),o=n.shiftr(s).and(r).toNumber();return e.isSigned&&o&Math.pow(2,e.size-1)&&(o-=Math.pow(2,e.size)),o=o*e.factor+e.offset}},{key:"valueForInt32Signal",value:function(e,t){var n,a,s;if(e.isLittleEndian)n=64-e.startBit-e.size;else{var i=(-e.startBit-1)%8;i<0&&(i+=8),n=8*Math.floor(e.startBit/8)+i}var r=Math.min(4,Math.floor(e.startBit/8));return e.isLittleEndian?(s=t.readUInt32LE(r),a=e.startBit-8*r):(s=t.readUInt32BE(r),a=32-(n-8*r+e.size)),s=s>>>a&(1<<e.size)-1,e.isSigned&&s>>>e.size-1&&(s-=1<<e.size),s*e.factor+e.offset}},{key:"getSignalValues",value:function(t,n){var a=this;if(!this.messages.has(t)&&!g.b(t))return{};var s=this.getMessageFrame(t),i=e.from(n),r=i;if(8!==i.length){var l=o()(i.toString("hex"),16,"0");r=e.from(l,"hex")}var c=r.toString("hex"),u={};return Object.values(s.signals).forEach((function(e){var t;t=e.size>32?a.valueForInt64Signal(e,c):a.valueForInt32Signal(e,r),u[e.name]=t})),u}},{key:"getChffrMetricMappings",value:function(){var e=this.comments.find((function(e){return 0===e.indexOf("CHFFR_METRIC")}));return e?e.split(";").map((function(e){return e.trim().split(" ")})).reduce((function(e,t){var n=Object(a.a)(t,6),s=(n[0],n[1]),i=n[2],r=n[3],o=n[4],l=n[5];return e[r]={messageId:parseInt(s,10),signalName:i,factor:parseFloat(o),offset:parseFloat(l)},e}),{}):null}},{key:"_newSymbols",value:function(){return"\n    NS_DESC_\n    CM_\n    BA_DEF_\n    BA_\n    VAL_\n    CAT_DEF_\n    CAT_\n    FILTER\n    BA_DEF_DEF_\n    EV_DATA_\n    ENVVAR_DATA_\n    SGTYPE_\n    SGTYPE_VAL_\n    BA_DEF_SGTYPE_\n    BA_SGTYPE_\n    SIG_TYPE_REF_\n    VAL_TABLE_\n    SIG_GROUP_\n    SIG_VALTYPE_\n    SIGTYPE_VALTYPE_\n    BO_TX_BU_\n    BA_DEF_REL_\n    BA_REL_\n    BA_DEF_DEF_REL_\n    BU_SG_REL_\n    BU_EV_REL_\n    BU_BO_REL_\n    SG_MUL_VAL_"}}]),t}()}).call(this,n(20).Buffer)},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(11),s=n(2),i=n(3),r=n(17),o=function(){function e(t){var n=t.name,a=t.startBit,i=void 0===a?0:a,r=t.size,o=void 0===r?0:r,l=t.isLittleEndian,c=void 0===l||l,u=t.isSigned,d=void 0!==u&&u,h=t.isFloat,g=void 0!==h&&h,m=t.factor,p=void 0===m?1:m,f=t.offset,v=void 0===f?0:f,b=t.unit,S=void 0===b?"":b,E=t.receiver,y=void 0===E?["XXX"]:E,O=t.comment,k=void 0===O?null:O,_=t.multiplex,C=void 0===_?null:_,x=t.min,M=void 0===x?null:x,w=t.max,T=void 0===w?null:w,P=t.valueDescriptions,j=void 0===P?new Map:P;Object(s.a)(this,e),Object.assign(this,{name:n,startBit:i,size:o,isLittleEndian:c,isSigned:d,isFloat:g,factor:p,offset:v,unit:S,receiver:y,comment:k,multiplex:C,valueDescriptions:j});var D=Math.random().toString(36);null==M&&(M=this.calculateMin()),null==T&&(T=this.calculateMax());var N=this.generateColors();Object.assign(this,{min:M,max:T,uid:D,colors:N})}return Object(i.a)(e,[{key:"text",value:function(){var e=this.multiplex?" "+this.multiplex:"",t=this.isLittleEndian?1:0,n=this.isSigned?"-":"+";return"SG_ ".concat(this.name).concat(e," : ")+"".concat(this.startBit,"|").concat(this.size,"@").concat(t).concat(n)+" (".concat(this.factor,",").concat(this.offset,")")+" [".concat(this.min,"|").concat(this.max,"]")+' "'.concat(this.unit,'" ').concat(this.receiver)}},{key:"valueDescriptionText",value:function(e){var t=Array.from(this.valueDescriptions.entries()).reduce((function(e,t){var n=Object(a.a)(t,2),s=n[0],i=n[1];return e+s+' "'.concat(i,'" ')}),"");return"VAL_ ".concat(e," ").concat(this.name," ").concat(t,";")}},{key:"lsbBitIndex",value:function(){if(this.isLittleEndian)return this.startBit;var e=this.lsbBitNumber();return r.a.matrixBitNumber(e)}},{key:"lsbBitNumber",value:function(){return r.a.bigEndianBitIndex(this.startBit)+this.size-1}},{key:"msbBitIndex",value:function(){return this.isLittleEndian?this.startBit+this.size-1:this.startBit}},{key:"littleEndianBitDescription",value:function(e){var t=[this.startBit,this.startBit+this.size-1];return e<t[0]||e>t[1]?null:{bitNumber:e-t[0],isLsb:e===t[0],isMsb:e===t[1]}}},{key:"bigEndianBitDescription",value:function(e){var t=r.a.bigEndianBitIndex(this.startBit),n=[t,t+this.size-1],a=r.a.bigEndianBitIndex(e);return a<n[0]||a>n[1]?null:{bitNumber:a,isLsb:a===n[1],isMsb:e===this.startBit,range:n}}},{key:"bitDescription",value:function(e){return this.isLittleEndian?this.littleEndianBitDescription(e):this.bigEndianBitDescription(e)}},{key:"calculateRawRange",value:function(){var e=Math.pow(2,this.size);return this.isSigned&&(e/=2),[this.isSigned?-1*e:0,e-1]}},{key:"calculateMin",value:function(){var e=this.calculateRawRange()[0];return this.offset+e*this.factor}},{key:"calculateMax",value:function(){var e=this.calculateRawRange()[1];return this.offset+e*this.factor}},{key:"generateColors",value:function(){for(var e=Array(3),t=0;t<3;t++)e[t]=Math.floor(211*Math.random());return e}},{key:"equals",value:function(e){var t=this;return e.name===this.name&&e.startBit===this.startBit&&e.size===this.size&&e.isLittleEndian===this.isLittleEndian&&e.isSigned===this.isSigned&&e.isFloat===this.isFloat&&e.factor===this.factor&&e.offset===this.offset&&e.unit===this.unit&&e.receiver.length===this.receiver.length&&e.receiver.every((function(e,n){return e===t.receiver[n]}))&&e.comment===this.comment&&e.multiplex===this.multiplex}}]),e}()},465:function(e,t,n){e.exports=n.p+"static/media/webusb-enable-experimental-features.e5a08e76.png"},466:function(e,t,n){e.exports=n.p+"static/media/webusb-enable-webusb.aceef6a0.png"},522:function(e,t){},525:function(e,t,n){e.exports=function(){return new Worker(n.p+"9bd0af2c9ba4d028a9ad.worker.js")}},526:function(e,t,n){e.exports=function(){return new Worker(n.p+"2464c3ee509aca09191d.worker.js")}},527:function(e,t,n){e.exports=function(){return new Worker(n.p+"616fbedcdb356e57bfec.worker.js")}},528:function(e,t,n){e.exports=function(){return new Worker(n.p+"5f65f42d446e84a5a6bf.worker.js")}},529:function(e,t,n){e.exports=function(){return new Worker(n.p+"d32516387821fe8f3ce5.worker.js")}},530:function(e,t,n){},531:function(e,t,n){"use strict";n.r(t);var a=n(9),s=n.n(a),i=n(12),r=n(11),o=n(210),l=n.n(o);var c={init:function(){var e={};"undefined"!==typeof __webpack_hash__&&(e.release=__webpack_hash__),l.a.config("https://50006e5d91894f508dd288bbbf4585a6@sentry.io/185303",e).install()}},u=n(1),d=n.n(u),h=n(211),g=n.n(h),m=n(49),p=n.n(m),f=n(31),v=n(5),b=n(10),S=n(2),E=n(3),y=n(7),O=n(4),k=n(6),_=n(8),C=n(50),x=n.n(C),M=n(14),w=n.n(M),T=n(212),P=n(213),j=n.n(P),D=n(13),N=n(22);function B(e){var t={client_id:D.d,redirect_uri:D.e,scope:"user:email public_repo",state:JSON.stringify({route:e})};return"http://github.com/login/oauth/authorize?".concat(Object(N.c)(t))}var R=n(30),L=n(216),I=n.n(L),A=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={isVisible:!0,lastMessageIndex:0,lastSeekTime:0},n.onVisibilityChange=n.onVisibilityChange.bind(Object(k.a)(n)),n.onCanvasRefAvailable=n.onCanvasRefAvailable.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){if(e.live){var n=e.message.entries[e.message.entries.length-1],a=this.props.message.entries[this.props.message.entries.length-1];return n.hexData!==a.hexData}return e.seekTime!==this.props.seekTime}},{key:"componentWillReceiveProps",value:function(e){function t(e){return~~(60*e)}this.props.seekIndex===e.seekIndex&&t(this.props.seekTime)===t(e.seekTime)||this.updateCanvas(e)}},{key:"findMostRecentMessage",value:function(e){var t=this.props.message,n=this.state,a=n.lastMessageIndex,s=n.lastSeekTime,i=null;if(e>=s)for(var r=a;r<t.entries.length;++r){var o=t.entries[r];if(o&&o.relTime>=e){i=r;break}}if(i||(i=t.entries.findIndex((function(t){return t.relTime>=e}))),i)return this.setState({lastMessageIndex:i,lastSeekTime:e}),t.entries[i]}},{key:"updateCanvas",value:function(e){var t=e.message,n=e.live,a=e.seekTime;if(this.canvas&&0!==t.entries.length){var s=t.entries[t.entries.length-1];n||(s=this.findMostRecentMessage(a))||(s=t.entries[0]);for(var i=this.canvas.getContext("2d"),r=0;r<t.byteStateChangeCounts.length;++r){var o=s.hexData.substr(2*r,2);i.fillStyle=t.byteColors[r],i.fillRect(20*r,0,20,15),i.font="12px Courier",i.fillStyle="white",o?i.fillText(o,20*r+2,12):i.fillText("-",20*r+7,12)}}}},{key:"onVisibilityChange",value:function(e){e!==this.state.isVisible&&this.setState({isVisible:e})}},{key:"onCanvasRefAvailable",value:function(e){e&&(this.canvas=e,this.canvas.width=160*window.devicePixelRatio,this.canvas.height=15*window.devicePixelRatio,this.canvas.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio))}},{key:"render",value:function(){return d.a.createElement("canvas",{ref:this.onCanvasRefAvailable,className:"cabana-meta-messages-list-item-bytes-canvas"})}}]),t}(u.Component),G=n(389).ckmeans,U=function(e){function t(e){var n;Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).onFilterChanged=n.onFilterChanged.bind(Object(k.a)(n)),n.onFilterFocus=n.onFilterFocus.bind(Object(k.a)(n)),n.onFilterUnfocus=n.onFilterUnfocus.bind(Object(k.a)(n)),n.canMsgFilter=n.canMsgFilter.bind(Object(k.a)(n)),n.logEventMsgFilter=n.logEventMsgFilter.bind(Object(k.a)(n)),n.renderMessageBytes=n.renderMessageBytes.bind(Object(k.a)(n)),n.toggleShowLogEvents=n.toggleShowLogEvents.bind(Object(k.a)(n));var a=e.dbcLastSaved;return n.state={filterText:"Filter",lastSaved:null!==a?n.props.dbcLastSaved.fromNow():null,hoveredMessages:[],orderedMessageKeys:[],showLogEvents:!1},n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.lastSavedTimer=setInterval((function(){null!==e.props.dbcLastSaved&&e.setState({lastSaved:e.props.dbcLastSaved.fromNow()})}),3e4)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.lastSavedTimer)}},{key:"componentWillReceiveProps",value:function(e){e.lastSaved!==this.props.lastSaved&&"object"===typeof e&&this.setState({lastSaved:e.dbcLastSaved.fromNow()});var t=Object.keys(e.messages);if(JSON.stringify(t)!==JSON.stringify(Object.keys(this.props.messages))){var n=this.sortMessages(e.messages);this.setState({hoveredMessages:[],orderedMessageKeys:n})}else if(0===this.state.orderedMessageKeys.length||!this.props.live&&this.props.messages&&e.messages&&this.byteCountsDidUpdate(this.props.messages,e.messages)){var a=this.sortMessages(e.messages);this.setState({orderedMessageKeys:a})}}},{key:"byteCountsDidUpdate",value:function(e,t){return Object.entries(t).some((function(t){var n=Object(r.a)(t,2),a=n[0],s=n[1];return JSON.stringify(s.byteStateChangeCounts)!==JSON.stringify(e[a].byteStateChangeCounts)}))}},{key:"sortMessages",value:function(e){if(0===Object.keys(e).length)return[];var t=Object.entries(e).reduce((function(e,t){var n=Object(r.a)(t,2),a=(n[0],n[1]),s=a.entries.length.toString();return e[s]?e[s].push(a):e[s]=[a],e}),{}),n=Object.keys(t).map((function(e){return parseInt(e,10)}));return G(n,Math.min(n.length,10)).map((function(e){return e.map((function(e){return t[e.toString()]})).reduce((function(e,t){return e.concat(t)}),[]).sort((function(e,t){return e.address<t.address?1:-1})).map((function(e){return e.id}))})).reduce((function(e,t){return e.concat(t)}),[]).reverse()}},{key:"toggleShowLogEvents",value:function(){this.setState({showLogEvents:!this.state.showLogEvents})}},{key:"onFilterChanged",value:function(e){var t=e.target.value;"Filter"===t.trim()&&(t=""),this.setState({filterText:t})}},{key:"onFilterFocus",value:function(e){"Filter"===this.state.filterText.trim()&&this.setState({filterText:""})}},{key:"onFilterUnfocus",value:function(e){""===this.state.filterText.trim()&&this.setState({filterText:"Filter"})}},{key:"canMsgFilter",value:function(e){if(!e.isLogEvent){var t=this.state.filterText,n=e.frame?e.frame.name:"";return"Filter"===t||""===t||-1!==e.id.toLowerCase().indexOf(t.toLowerCase())||-1!==n.toLowerCase().indexOf(t.toLowerCase())}}},{key:"logEventMsgFilter",value:function(e){if(e.isLogEvent){var t=this.state.filterText,n=e.frame?e.frame.name:"";return"Filter"===t||""===t||-1!==e.id.toLowerCase().indexOf(t.toLowerCase())||-1!==n.toLowerCase().indexOf(t.toLowerCase())}}},{key:"lastSavedPretty",value:function(){return this.props.dbcLastSaved.fromNow()}},{key:"onMessageHover",value:function(e){var t=this.state.hoveredMessages;-1===t.indexOf(e)&&(t.push(e),this.setState({hoveredMessages:t}))}},{key:"onMessageHoverEnd",value:function(e){var t=this.state.hoveredMessages;t=t.filter((function(t){return t!==e})),this.setState({hoveredMessages:t})}},{key:"onMsgRemoveClick",value:function(e){var t=this.state.selectedMessages;t=t.filter((function(t){return t!==e})),this.props.onMessageUnselected(e),this.setState({selectedMessages:t})}},{key:"onMessageSelected",value:function(e){var t=[];t.push(e),this.props.updateSelectedMessages(t),this.props.onMessageSelected(e)}},{key:"orderedMessages",value:function(){var e=this.state.orderedMessageKeys,t=this.props.messages;return e.map((function(e){return t[e]}))}},{key:"selectedMessageClass",value:function(e){return this.props.selectedMessages.includes(e)?"is-selected":null}},{key:"renderMessageBytes",value:function(e){var t=this;return d.a.createElement("tr",{onClick:function(){t.onMessageSelected(e.id)},key:e.id,className:w()("cabana-meta-messages-list-item",this.selectedMessageClass(e.id))},e.isLogEvent?d.a.createElement("td",{colSpan:"2"},e.id):d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null,e.frame?e.frame.name:"untitled"),d.a.createElement("td",null,e.id)),d.a.createElement("td",null,e.entries.length),d.a.createElement("td",null,d.a.createElement("div",{className:"cabana-meta-messages-list-item-bytes"},d.a.createElement(A,{key:e.id,message:e,seekIndex:this.props.seekIndex,seekTime:this.props.seekTime,live:this.props.live}))))}},{key:"renderCanMessages",value:function(){return this.orderedMessages().filter(this.canMsgFilter).map(this.renderMessageBytes)}},{key:"renderLogEventMessages",value:function(){return this.orderedMessages().filter(this.logEventMsgFilter).map(this.renderMessageBytes)}},{key:"renderAvailableMessagesList",value:function(){return 0===Object.keys(this.props.messages).length?d.a.createElement("p",null,"Loading messages..."):d.a.createElement(d.a.Fragment,null,d.a.createElement("table",{cellPadding:"5"},this.state.showLogEvents&&d.a.createElement(d.a.Fragment,null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",{colSpan:"2"},"Name"),d.a.createElement("td",null,"Count"),d.a.createElement("td",null,"Bytes"))),d.a.createElement("tbody",null,this.renderLogEventMessages(),d.a.createElement("tr",null,d.a.createElement("td",{colSpan:"4"},d.a.createElement("hr",null))))),d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null,"Name"),d.a.createElement("td",null,"ID"),d.a.createElement("td",null,"Count"),d.a.createElement("td",null,"Bytes"))),d.a.createElement("tbody",null,this.renderCanMessages())))}},{key:"saveable",value:function(){try{return"serviceWorker"in navigator&&new ReadableStream&&new WritableStream,"saveable"}catch(e){return!1}}},{key:"render",value:function(){return d.a.createElement("div",{className:"cabana-meta"},d.a.createElement("div",{className:"cabana-meta-header"},d.a.createElement("h5",{className:"cabana-meta-header-label t-capline"},"Currently editing:"),d.a.createElement("strong",{className:"cabana-meta-header-filename"},this.props.dbcFilename),null!==this.props.dbcLastSaved?d.a.createElement("div",{className:"cabana-meta-header-last-saved"},d.a.createElement("p",null,"Last saved: ",this.lastSavedPretty())):null,d.a.createElement("div",{className:"cabana-meta-header-actions ".concat(this.saveable())},d.a.createElement("div",{className:"cabana-meta-header-action"},d.a.createElement("button",{onClick:this.props.showLoadDbc},"Load DBC")),this.saveable()&&d.a.createElement("div",{className:"cabana-meta-header-action"},d.a.createElement("button",{onClick:this.props.saveLog},"Save Log")),this.props.shareUrl?d.a.createElement("div",{className:"cabana-meta-header-action special-wide","data-clipboard-text":this.props.shareUrl,"data-clipboard-action":"copy",ref:function(e){return e?new I.a(e):null}},d.a.createElement("a",{className:"button",href:this.props.shareUrl,onClick:function(e){return e.preventDefault()}},"Copy Share Link")):null,d.a.createElement("div",{className:"cabana-meta-header-action"},d.a.createElement("button",{onClick:this.props.showSaveDbc},"Save DBC")))),d.a.createElement("div",{className:"cabana-meta-messages"},d.a.createElement("div",{className:"cabana-meta-messages-header"},d.a.createElement("div",{style:{display:"inline-block",float:"right"}},d.a.createElement("h5",{className:"t-capline"},"Show log events",d.a.createElement("input",{type:"checkbox",onChange:this.toggleShowLogEvents,checked:!!this.state.showLogEvents}))),d.a.createElement("h5",{className:"t-capline"},"Available messages")),d.a.createElement("div",{className:"cabana-meta-messages-window"},d.a.createElement("div",{className:"cabana-meta-messages-filter"},d.a.createElement("div",{className:"form-field form-field--small"},d.a.createElement("input",{type:"text",value:this.state.filterText,onFocus:this.onFilterFocus,onBlur:this.onFilterUnfocus,onChange:this.onFilterChanged}))),d.a.createElement("div",{className:"cabana-meta-messages-list"},this.renderAvailableMessagesList()))))}}]),t}(u.Component),F=n(217),X=n(84),H=n(533);n(38);var W={elementWiseEquals:function(e,t){return e.length===t.length&&e.every((function(e,n){return t[n]===e}))},findIndexRight:function(e,t){for(var n=e.length-1;n>=0;n--)if(t(e[n]))return n}};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e,t,n){if(!e)return null;var a=Object.values(e.frame.signals).find((function(e){return e.uid===t}));if(!a)return console.warn("_calcGraphData: no signal",t,e),null;var s=[],i=Math.floor(e.entries.length/D.a);if(0===i)s=e.entries;else{for(var r=0;r<e.entries.length;r+=i)s.push(e.entries[r]);s.push(e.entries[e.entries.length-1])}if(!s.length)return[];var o=s[0].relTime;return s.filter((function(e){return void 0!==e.signals[a.name]})).map((function(e){return e.relTime-o>2&&(t=Math.random().toString(36)),o=e.relTime,{x:e.time,relTime:e.relTime,y:e.signals[a.name],unit:a.unit,color:"rgba(".concat(a.colors.join(","),", 0.5)"),signalName:a.name,signalUid:t}}))}var Y={_calcGraphData:z,appendNewGraphData:function(e,t,n,a){return e.map((function(e){return e.reduce((function(e,t){var n=t.messageId;t.signalUid;return e.push(n),e}),[])})).map((function(e,t){return{plottedMessageIds:e,index:t}})).filter((function(e){var a=e.plottedMessageIds,s=e.index;if(s<t.length){var i=0,r=t[s].series;return r.length>0&&(i=r[t[s].series.length-1].relTime),a.some((function(e){return n[e].entries.length>0&&0===r.length||n[e].entries.some((function(e){return e.relTime>i}))}))}return!1})).map((function(e){var t=e.plottedMessageIds,n=e.index;return{plottedMessageIds:t=t.reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),[]),index:n}})).forEach((function(a){var s=a.plottedMessageIds,i=a.index,r=e[i].reduce((function(e,t){var n=t.messageId,a=t.signalUid;return e[n]||(e[n]=[]),e[n].push(a),e}),{}),o=t[i].series,l=s.reduce((function(e,t){var n=r[t],a=W.findIndexRight(o,(function(e){return-1!==n.indexOf(e.signalUid)}));return a?e[t]=o[a].relTime:o.length>0?e[t]=o[o.length-1].relTime:e[t]=-1,e}),{}),c=[];s.map((function(e){return{messageId:e,entries:n[e].entries}})).filter((function(e){var t=e.messageId,n=e.entries;return n[n.length-1].relTime>l[t]})).forEach((function(e){var t=e.messageId,a=e.entries,s=a.findIndex((function(e){return e.relTime>l[t]})),i=a.slice(s);r[t].forEach((function(e){var a=z(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n[t],{entries:i}),e);c=c.concat(a)}))}));var u=o.length>0&&s.find((function(e){return n[e].entries.length>0&&o[0].relTime<n[e].entries[0].relTime}));if(t[i]={series:t[i].series.concat(c),updated:Date.now()},u){var d=t[i].series.findIndex((function(e){return e.relTime>n[u].entries[0].relTime}));d&&(t[i].series=t[i].series.slice(d))}})),Object(v.a)(t)}},K={$schema:"https://vega.github.io/schema/vega/v5.6.json",width:400,height:200,padding:{top:5,left:30,right:5,bottom:10},signals:[{name:"tipTime",on:[{events:"mousemove",update:"invert('xrelscale', x())"}]},{name:"clickTime",on:[{events:"click",update:"invert('xrelscale', x())"}]},{name:"videoTime"},{name:"segment",value:{data:"table",field:"relTime"}}],data:[{name:"table"},{name:"segment"},{name:"tooltip",source:"table",transform:[{type:"filter",expr:"abs(datum.relTime - tipTime) <= 0.01"},{type:"aggregate",fields:["relTime","y","unit"],ops:["min","argmin","argmin"],as:["min","argmin","argmin"]}]},{name:"ySegmentScale",source:"table",transform:[{type:"filter",expr:"length(segment) != 2 || (datum.relTime >= segment[0] && datum.relTime <= segment[1])"},{type:"extent",field:"y",signal:"ySegment"}]}],scales:[{name:"xscale",type:"linear",range:"width",domain:{data:"table",field:"x"},zero:!1},{name:"xrelscale",type:"linear",range:"width",domain:{data:"table",field:"relTime"},zero:!1,clamp:!0,domainRaw:{signal:"segment"}},{name:"yscale",type:"linear",range:"height",clamp:!0,zero:!1,domain:{signal:"ySegment"}},{name:"color",type:"ordinal",domain:{data:"table",field:"color"},range:{data:"table",field:"color"}}],axes:[{orient:"bottom",scale:"xrelscale",labelOverlap:!0},{orient:"left",scale:"yscale"}],marks:[{type:"group",name:"plot",interactive:!0,encode:{enter:{width:{signal:"width"},height:{signal:"height"},fill:{value:"transparent"}}},signals:[{name:"brush",value:0,on:[{events:"@boundingRect:mousedown",update:"[x(), x()]"},{events:"[@boundingRect:mousedown, window:mouseup] > window:mousemove!",update:"[brush[0], clamp(x(), 0, width)]"},{events:{signal:"delta"},update:"clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)"}]},{name:"anchor",value:null,on:[{events:"@brush:mousedown",update:"slice(brush)"}]},{name:"xdown",value:0,on:[{events:"@brush:mousedown",update:"x()"}]},{name:"xup",value:0,on:[{events:"@brush:mouseup",update:"x()"}]},{name:"delta",value:0,on:[{events:"[@brush:mousedown, window:mouseup] > window:mousemove!",update:"x() - xdown"}]},{name:"segment",push:"outer",on:[{events:"window:mouseup",update:"span(brush) && span(brush) > 15 ? invert('xrelscale', brush) : segment"}]}],marks:[{type:"group",from:{facet:{name:"series",data:"table",groupby:"signalUid"}},marks:{type:"line",name:"lineMark",from:{data:"series"},interactive:!0,encode:{update:{interpolate:{value:"step"},x:{scale:"xrelscale",field:"relTime"},y:{scale:"yscale",field:"y"}},hover:{fillOpacity:{value:.5}},enter:{clip:{value:!0},stroke:{scale:"color",field:"color"},strokeWidth:{value:2}}}}},{type:"rect",interactive:!0,name:"brush",encode:{enter:{y:{value:0},height:{signal:"height"},fill:{value:"#333"},fillOpacity:{value:.2}},update:{x:{signal:"brush[0]"},x2:{signal:"brush[1]"}}}},{type:"rule",encode:{update:{y:{value:0},y2:{field:{group:"height"}},stroke:{value:"#000"},strokeWidth:{value:2},x:{scale:"xrelscale",signal:"videoTime",offset:.5}}}},{type:"symbol",from:{data:"tooltip"},encode:{update:{x:{scale:"xrelscale",field:"argmin.relTime"},y:{scale:"yscale",field:"argmin.y"},size:{value:50},fill:{value:"black"}}}},{type:"group",from:{data:"tooltip"},interactive:!1,name:"tooltipGroup",encode:{update:{x:[{test:"inrange(datum.argmin.relTime + 80, domain('xrelscale'))",scale:"xrelscale",field:"argmin.relTime"},{scale:"xrelscale",field:"argmin.relTime",offset:-80}],y:{scale:"yscale",field:"argmin.y"},height:{value:20},width:{value:80},fill:{value:"#fff"},fillOpacity:{value:.85},stroke:{value:"#aaa"},strokeWidth:{value:.5}}},marks:[{type:"text",interactive:!1,encode:{update:{text:{signal:"format(parent.argmin.relTime, ',.2f') + ': ' + format(parent.argmin.y, ',.2f') + ' ' + parent.argmin.unit"},fill:{value:"black"},fontWeight:{value:"bold"},y:{value:20}}}}]},{type:"rect",name:"boundingRect",interactive:!0,encode:{enter:{width:{signal:"width"},height:{signal:"height"},fill:{value:"transparent"}}}}]}]};function J(e,t,n){var a;return function(){var s=this,i=arguments,r=function(){a=null,n||e.apply(s,i)},o=n&&!a;clearTimeout(a),a=setTimeout(r,t),o&&e.apply(s,i)}}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z={position:"absolute",top:0,left:0},$=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).updateBounds=J((function(){n.view.signal("width",n.state.bounds.width-70),n.view.signal("height",.4*(n.state.bounds.width-70)),n.view.run()}),100),n.insertData=J((function(){if(n.view){var e=n.state.data.series,t=n.view.changeset().remove((function(e){return!0})).insert(e);n.view.change("table",t),n.view.run()}else console.log("Cannot insertData")}),250),n.state={plotInnerStyle:null,shiftX:0,shiftY:0,bounds:null,isDataInserted:!1,data:n.getGraphData(e),spec:n.getGraphSpec(e)},n.onNewView=n.onNewView.bind(Object(k.a)(n)),n.onSignalClickTime=n.onSignalClickTime.bind(Object(k.a)(n)),n.onSignalSegment=n.onSignalSegment.bind(Object(k.a)(n)),n.onDragAnchorMouseDown=n.onDragAnchorMouseDown.bind(Object(k.a)(n)),n.onDragAnchorMouseUp=n.onDragAnchorMouseUp.bind(Object(k.a)(n)),n.onDragStart=n.onDragStart.bind(Object(k.a)(n)),n.onPlotResize=n.onPlotResize.bind(Object(k.a)(n)),n.insertData=n.insertData.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"getGraphData",value:function(e){var t=-1,n=-1,a=e.plottedSignals.map((function(a){var s=a.messageId,i=a.signalUid,r=e.messages[s].entries;if(r.length){var o=r[0].relTime;t=-1===t?o:Math.min(t,o),o=r[r.length-1].relTime,n=Math.max(n,o)}return Y._calcGraphData(e.messages[s],i,0)})).reduce((function(e,t){return e.concat(t)}),[]);return{updated:Date.now(),series:a,firstRelTime:t,lastRelTime:n}}},{key:"getGraphSpec",value:function(e){return Q({},K,{scales:[Q({},K.scales[0],{domainMin:e.segment[0],domainMax:e.segment[1]})].concat(Object(v.a)(K.scales.slice(1)))})}},{key:"segmentIsNew",value:function(e){var t=this;return e.length!==this.props.segment.length||!e.every((function(e,n){return t.props.segment[n]===e}))}},{key:"visualChanged",value:function(e,t){return e.canReceiveGraphDrop!==t.canReceiveGraphDrop||JSON.stringify(e.dragPos)!==JSON.stringify(t.dragPos)}},{key:"onPlotResize",value:function(e){if(this.view){e&&e.bounds?(this.setState({bounds:e.bounds}),e.bounds):this.state.bounds,this.view.runAfter(this.updateBounds)}}},{key:"componentWillReceiveProps",value:function(e){if(e.dragPos&&JSON.stringify(e.dragPos)!==JSON.stringify(this.props.dragPos)?this.updateStyleFromDragPos(e.dragPos):e.dragPos||null===this.state.plotInnerStyle||this.setState({plotInnerStyle:null}),this.props.messages!==e.messages||this.props.plottedSignal!==e.plottedSignal){var t=this.getGraphData(e);t.series.length===this.state.data.series.length&&t.firstRelTime===this.state.data.firstRelTime&&t.lastRelTime===this.state.data.lastRelTime||this.setState({data:t})}this.segmentIsNew(e.segment)&&this.setState({spec:this.getGraphSpec(e)})}},{key:"shouldComponentUpdate",value:function(e,t){return!this.view||(this.state.spec!==t.spec||(this.state.data!==t.data&&this.insertData(),this.props.currentTime!==e.currentTime&&this.view.signal("videoTime",e.currentTime),this.segmentIsNew(e.segment)&&(e.segment.length>0?this.view.signal("segment",e.segment):this.view.signal("segment",0)),this.view.runAsync(),!1))}},{key:"componentDidUpdate",value:function(e,t){this.view&&(this.props.segment.length>0?this.view.signal("segment",this.props.segment):this.view.signal("segment",0),this.view.signal("videoTime",this.props.currentTime),this.view.runAsync())}},{key:"updateStyleFromDragPos",value:function(e){var t=e.left,n=e.top,a=Q({},this.state.plotInnerStyle);a.left=t,a.top=n,this.setState({plotInnerStyle:a})}},{key:"onNewView",value:function(e){this.view=e,this.state.bounds&&this.onPlotResize(),this.props.segment.length>0&&e.signal("segment",this.props.segment),e.signal("videoTime",this.props.currentTime),this.insertData()}},{key:"onSignalClickTime",value:function(e,t){void 0!==t&&this.props.onRelativeTimeClick(this.props.messageId,t)}},{key:"onSignalSegment",value:function(e,t){var n=this;Array.isArray(t)&&(this.props.onSegmentChanged(this.props.messageId,t),this.view&&this.view.runAfter((function(){var e=n.view.getState();e.subcontext[0].signals.brush=0,n.view.setState(e),n.insertData()})))}},{key:"plotInnerStyleFromMouseEvent",value:function(e){var t=this.state,n=t.shiftX,a=t.shiftY,s=Q({},Z),i=this.props.container.getBoundingClientRect(),r=e.clientX-i.left-n,o=e.clientY-i.top-a;return s.left=r,s.top=o,s}},{key:"onDragAnchorMouseDown",value:function(e){var t=this;e.persist();var n=e.clientX-e.target.getBoundingClientRect().left,a=e.clientY-e.target.getBoundingClientRect().top;this.setState({shiftX:n,shiftY:a},(function(){t.setState({plotInnerStyle:t.plotInnerStyleFromMouseEvent(e)})})),this.props.onDragStart(this.props.messageId,this.props.signalSpec.uid,n,a)}},{key:"onDragAnchorMouseUp",value:function(e){this.props.onDragEnd(),this.setState({plotInnerStyle:null,shiftX:0,shiftY:0})}},{key:"onDragStart",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){var e=this,t=this.state.plotInnerStyle,n=this.props.canReceiveGraphDrop?"is-droppable":null;return d.a.createElement("div",{className:"cabana-explorer-visuals-plot",ref:this.props.onGraphRefAvailable},d.a.createElement("div",{className:w()("cabana-explorer-visuals-plot-inner",n),style:t||null},d.a.createElement("div",{className:"cabana-explorer-visuals-plot-draganchor",onMouseDown:this.onDragAnchorMouseDown},d.a.createElement("span",{className:"fa fa-bars"})),this.props.plottedSignals.map((function(t){var n=t.messageId,a=t.signalUid,s=t.messageName,i=Object.values(e.props.messages[n].frame.signals).find((function(e){return e.uid===a})),r=i.colors;return d.a.createElement("div",{className:"cabana-explorer-visuals-plot-header",key:n+"_"+i.uid},d.a.createElement("div",{className:"cabana-explorer-visuals-plot-header-toggle"},d.a.createElement("button",{className:"button--tiny",onClick:function(){return e.props.unplot(n,a)}},d.a.createElement("span",null,"Hide Plot"))),d.a.createElement("div",{className:"cabana-explorer-visuals-plot-header-copy"},d.a.createElement("div",{className:"cabana-explorer-visuals-plot-message"},d.a.createElement("span",null,s)),d.a.createElement("div",{className:"cabana-explorer-visuals-plot-signal"},d.a.createElement("div",{className:"cabana-explorer-visuals-plot-signal-color",style:{background:"rgb(".concat(r)}}),d.a.createElement("strong",null,i.name))))})),d.a.createElement(X.a,{bounds:!0,onResize:this.onPlotResize},(function(t){var n=t.measureRef;return d.a.createElement("div",{ref:n,className:"cabana-explorer-visuals-plot-container"},d.a.createElement(H.a,{onNewView:e.onNewView,logLevel:1,signalListeners:{clickTime:e.onSignalClickTime,segment:e.onSignalSegment},renderer:"canvas",spec:e.state.spec,actions:!1,data:{table:e.state.data.series}}))}))))}}]),t}(u.Component);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}$.emptyTable=[],n(463);var te=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={draggingSignal:{},dragPos:null,dragShift:null,graphToReceiveDrop:null},n.plotListRef=null,n.plotRefs=[],n.renderSignalPlot=n.renderSignalPlot.bind(Object(k.a)(n)),n.onPlotListRefReady=n.onPlotListRefReady.bind(Object(k.a)(n)),n.onGraphDragStart=n.onGraphDragStart.bind(Object(k.a)(n)),n.onGraphDragEnd=n.onGraphDragEnd.bind(Object(k.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"onGraphDragStart",value:function(e,t,n,a){this.setState({draggingSignal:{messageId:e,signalUid:t},dragShift:{x:n,y:a}})}},{key:"determineDraggingGraph",value:function(){var e=this.state.draggingSignal;return this.plotRefs.find((function(t){var n=t.messageId,a=t.signalUid;return e.messageId===n&&e.signalUid===a}))}},{key:"onMouseMove",value:function(e){var t=this.state.dragShift;if(null!==t){var n=this.plotListRef.getBoundingClientRect(),a=this.determineDraggingGraph();if(a){a.ref.hidden=!0;var s=document.elementFromPoint(e.clientX,e.clientY);a.ref.hidden=!1;var i=s.closest(".cabana-explorer-visuals-plot"),r=this.plotRefs.find((function(e){var t=e.ref,n=e.messageId,s=e.signalUid;return!(n===a.messageId&&s===a.signalUid)&&t.isEqualNode(i)}));r?this.setState({graphToReceiveDrop:r}):this.setState({graphToReceiveDrop:null})}var o=e.clientX-n.left-t.x,l=e.clientY-n.top-t.y;this.setState({dragPos:{left:o,top:l}})}else null!==this.state.graphToReceiveDrop&&this.setState({graphToReceiveDrop:null})}},{key:"onGraphDragEnd",value:function(){null!==this.state.graphToReceiveDrop&&this.props.mergePlots({fromPlot:this.state.draggingSignal,toPlot:this.state.graphToReceiveDrop}),this.setState({draggingSignal:{},dragShift:null,dragPos:null,graphToReceiveDrop:null})}},{key:"addCanGraphRef",value:function(e,t,n){if(e){var a=this.plotRefs;a=a.filter((function(e){return!(e.messageId===t&&e.signalUid===n)})).concat([{messageId:t,signalUid:n,ref:e}]),this.plotRefs=a}}},{key:"renderSignalPlot",value:function(e,t){var n=this,a=this.state,s=a.draggingSignal,i=a.graphToReceiveDrop,r=e[0],o=r.messageId,l=r.signalUid,c=this.props.messages[o],u=Object.values(c.frame.signals).find((function(e){return e.uid===l}));if(!this.plotListRef)return[];var h=s.signalUid===l&&s.messageId===o,g=i&&i.signalUid===l&&i.messageId===o,m=(e=e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({messageName:n.props.messages[e.messageId].frame.name},e)}))).reduce((function(e,t){return e+t.messageId+"_"+t.signalUid}),"");return d.a.createElement($,{onGraphRefAvailable:function(e){n.addCanGraphRef(e,o,l)},key:m,unplot:this.props.onSignalUnplotPressed,messages:this.props.messages,messageId:o,messageName:c.frame?c.frame.name:null,signalSpec:Object.assign(Object.create(u),u),onSegmentChanged:this.props.onSegmentChanged,segment:this.props.segment,onRelativeTimeClick:this.props.onGraphTimeClick,currentTime:this.props.seekTime,onDragStart:this.onGraphDragStart,onDragEnd:this.onGraphDragEnd,container:this.plotListRef,dragPos:h?this.state.dragPos:null,canReceiveGraphDrop:g,plottedSignals:e,live:this.props.live})}},{key:"onPlotListRefReady",value:function(e){this.plotListRef=e}},{key:"render",value:function(){return d.a.createElement("div",{className:"cabana-explorer-visuals-plots",ref:this.onPlotListRefReady,onMouseMove:this.onMouseMove,onMouseLeave:this.onGraphDragEnd,onMouseUp:this.onGraphDragEnd},this.props.plottedSignals.map(this.renderSignalPlot))}}]),t}(u.Component),ne=n(32),ae=n(226),se=n.n(ae),ie=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(y.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(s)))).onSeeking=function(){n.props.playing||(n.props.onLoadStart(),n.props.onPlaySeek(n.videoElement.currentTime))},n.shouldInitVideoTime=!0,n.onSeeked=function(){n.props.playing||(n.shouldInitVideoTime&&(n.videoElement.currentTime=n.props.startTime,n.shouldInitVideoTime=!1),n.props.onLoadEnd())},n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.videoElement.playbackRate=e.playbackSpeed,e.source!==this.props.source&&this.loadSource(e.source),e.playing?this.videoElement&&(this.videoElement.paused||this.videoElement.currentTime<.01)&&this.videoElement.play():this.videoElement.pause()}},{key:"componentDidMount",value:function(){this.player=new se.a({disablePtsDtsCorrectionInMp4Remux:!0}),this.loadSource()}},{key:"loadSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.source;this.videoElement&&(this.player.loadSource(e),this.player.attachMedia(this.videoElement),this.props.onVideoElementAvailable(this.videoElement),this.videoElement.currentTime=this.props.startTime)}},{key:"componentWillUnmount",value:function(){this.player&&this.player.destroy()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"cabana-explorer-visuals-camera-wrapper",onClick:this.props.onClick},d.a.createElement("video",{ref:function(t){e.videoElement=t},autoPlay:this.props.playing,muted:!0,onWaiting:this.props.onLoadStart,onPlaying:this.props.onLoadEnd,onSeeking:this.onSeeking,onSeeked:this.onSeeked}))}}]),t}(u.Component),re=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={hover:!1},n.onClick=n.onClick.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"imageSource",value:function(){var e=this.state.hover;return this.props.isPlaying?e?"/cabana/img/ic_pause_circle_filled_white_24px.svg":"/cabana/img/ic_pause_circle_outline_white_24px.svg":e?"/cabana/img/ic_play_circle_filled_white_24px.svg":"/cabana/img/ic_play_circle_outline_white_24px.svg"}},{key:"onClick",value:function(e){this.props.isPlaying?this.props.onPause():this.props.onPlay()}},{key:"render",value:function(){var e=this;return d.a.createElement("img",{src:this.imageSource(),alt:this.props.isPlaying?"Pause":"Play",className:this.props.className,onClick:this.onClick,onMouseOver:function(){return e.setState({hover:!0})},onMouseLeave:function(){return e.setState({hover:!1})}})}}]),t}(u.Component),oe=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).updateDraggingSeek=J((function(e){return n.props.onUserSeek(e)}),250),n.state={seekedBarStyle:t.zeroSeekedBarStyle,markerStyle:t.hiddenMarkerStyle,tooltipStyle:t.hiddenTooltipStyle,ratio:0,tooltipTime:"0:00",isPlaying:!1,isDragging:!1},n.onMouseMove=n.onMouseMove.bind(Object(k.a)(n)),n.onMouseLeave=n.onMouseLeave.bind(Object(k.a)(n)),n.onMouseDown=n.onMouseDown.bind(Object(k.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(k.a)(n)),n.onClick=n.onClick.bind(Object(k.a)(n)),n.onPlay=n.onPlay.bind(Object(k.a)(n)),n.onPause=n.onPause.bind(Object(k.a)(n)),n.executePlayTimer=n.executePlayTimer.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){var n=this.state.ratio;if(JSON.stringify(this.props.segmentIndices)!==JSON.stringify(e.segmentIndices))this.setState({seekedBarStyle:t.zeroSeekedBarStyle,markerStyle:t.hiddenMarkerStyle,ratio:0});else if(e.videoLength!==this.props.videoLength){var a=n*this.props.videoLength/e.videoLength;this.updateSeekedBar(a)}if(this.props.nearestFrameTime!==e.nearestFrameTime){var s=this.props.segmentProgress(e.nearestFrameTime);this.updateSeekedBar(s)}e.playing&&!this.state.isPlaying?this.onPlay():!e.playing&&this.state.isPlaying&&this.onPause()}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.playTimer)}},{key:"mouseEventXOffsetPercent",value:function(e){var t=this.progressBar.getBoundingClientRect();return(e.clientX-t.left)/this.progressBar.offsetWidth*100}},{key:"onMouseMove",value:function(e){var n=this.mouseEventXOffsetPercent(e);if(n<0)this.onMouseLeave();else{var a=t.markerWidth,s={display:"",left:"calc(".concat(n+"%"," - ").concat(a/2,"px)")},i=t.tooltipWidth,r={display:"flex",left:"calc(".concat(n+"%"," - ").concat(i/2,"px)")},o=Math.max(0,n/100);this.state.isDragging&&(this.updateSeekedBar(o),this.updateDraggingSeek(o)),this.setState({markerStyle:s,tooltipStyle:r,tooltipTime:this.props.ratioTime(o).toFixed(3)})}}},{key:"onMouseLeave",value:function(e){this.setState({markerStyle:t.hiddenMarkerStyle,tooltipStyle:t.hiddenTooltipStyle,isDragging:!1})}},{key:"updateSeekedBar",value:function(e){var t={width:100*e+"%"};this.setState({seekedBarStyle:t,ratio:e})}},{key:"onClick",value:function(e){var t=this.mouseEventXOffsetPercent(e)/100;t=Math.min(1,Math.max(0,t)),this.updateSeekedBar(t),this.props.onUserSeek(t)}},{key:"onPlay",value:function(){this.playTimer=window.requestAnimationFrame(this.executePlayTimer);var e=this.state.ratio;e>=1&&(e=0),this.setState({isPlaying:!0,ratio:e}),this.props.onPlay()}},{key:"executePlayTimer",value:function(){var e=this.props.videoElement;if(null!==e){var t=this.props,n=t.videoLength,a=t.startTime,s=e.currentTime,i=e.duration;s=le(s),a=le(a),n=le(n),i=le(i);var r=(s-a)/n;r!==this.state.ratio?((r>=1||r<0)&&(r=0,s=a,this.props.onUserSeek(r)),r>=0&&(this.updateSeekedBar(r),this.props.onPlaySeek(s)),this.playTimer=window.requestAnimationFrame(this.executePlayTimer)):this.playTimer=window.requestAnimationFrame(this.executePlayTimer)}else this.playTimer=window.requestAnimationFrame(this.executePlayTimer)}},{key:"onPause",value:function(){window.cancelAnimationFrame(this.playTimer),this.setState({isPlaying:!1}),this.props.onPause()}},{key:"onMouseDown",value:function(){this.state.isDragging||this.setState({isDragging:!0})}},{key:"onMouseUp",value:function(){this.state.isDragging&&this.setState({isDragging:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.seekedBarStyle,a=t.markerStyle,s=t.tooltipStyle;return d.a.createElement("div",{className:"cabana-explorer-visuals-camera-seeker"},d.a.createElement(re,{className:"cabana-explorer-visuals-camera-seeker-playbutton",onPlay:this.onPlay,onPause:this.onPause,isPlaying:this.state.isPlaying}),d.a.createElement("div",{className:"cabana-explorer-visuals-camera-seeker-progress",onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onClick:this.onClick,ref:function(t){return e.progressBar=t}},d.a.createElement("div",{className:"cabana-explorer-visuals-camera-seeker-progress-tooltip",style:s},this.state.tooltipTime),d.a.createElement("div",{className:"cabana-explorer-visuals-camera-seeker-progress-marker",style:a}),d.a.createElement("div",{className:"cabana-explorer-visuals-camera-seeker-progress-inner",style:n})))}}]),t}(u.Component);function le(e){return Math.round(1e3*e)/1e3}oe.hiddenMarkerStyle={display:"none",left:0},oe.zeroSeekedBarStyle={width:0},oe.hiddenTooltipStyle={display:"none",left:0},oe.markerWidth=20,oe.tooltipWidth=50;var ce=ne.StyleSheet.create({loadingOverlay:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:3},loadingSpinner:{width:"25%",height:"25%",display:"block"},img:{height:480,display:"block",position:"absolute",zIndex:2},hls:{zIndex:1,height:480,backgroundColor:"rgba(0,0,0,0.9)"},seekBar:{position:"absolute",bottom:0,left:0,width:"100%",zIndex:4}}),ue=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={shouldShowJpeg:!0,isLoading:!0,videoElement:null,shouldRestartHls:!1},n.onLoadStart=n.onLoadStart.bind(Object(k.a)(n)),n.onLoadEnd=n.onLoadEnd.bind(Object(k.a)(n)),n.segmentProgress=n.segmentProgress.bind(Object(k.a)(n)),n.onVideoElementAvailable=n.onVideoElementAvailable.bind(Object(k.a)(n)),n.onUserSeek=n.onUserSeek.bind(Object(k.a)(n)),n.onHlsRestart=n.onHlsRestart.bind(Object(k.a)(n)),n.ratioTime=n.ratioTime.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){(this.props.userSeekIndex!==e.userSeekIndex||this.props.canFrameOffset!==e.canFrameOffset||this.props.message&&e.message&&this.props.message.entries.length!==e.message.entries.length)&&this.setState({shouldRestartHls:!0}),e.userSeekTime&&this.props.userSeekTime!==e.userSeekTime&&this.state.videoElement&&(this.state.videoElement.currentTime=e.userSeekTime)}},{key:"nearestFrameUrl",value:function(){var e=this.props.url,t=Math.round(this.props.userSeekTime);return isNaN(t),Object(f.derived)(e).getJpegUrl(t)}},{key:"loadingOverlay",value:function(){return d.a.createElement("div",{className:Object(ne.css)(ce.loadingOverlay)},d.a.createElement("img",{className:Object(ne.css)(ce.loadingSpinner),src:"/cabana/img/loading.svg",alt:"Loading video"}))}},{key:"onLoadStart",value:function(){this.setState({shouldShowJpeg:!0,isLoading:!0})}},{key:"onLoadEnd",value:function(){this.setState({shouldShowJpeg:!1,isLoading:!1})}},{key:"videoLength",value:function(){return this.props.segment.length?this.props.segment[1]-this.props.segment[0]:this.state.videoElement?this.state.videoElement.duration:0}},{key:"startTime",value:function(){return this.props.segment.length?this.props.segment[0]:0}},{key:"segmentProgress",value:function(e){var t=this.startTime();e<t&&(e=t);var n=(e-t)/this.videoLength();return Math.max(0,Math.min(1,n))}},{key:"ratioTime",value:function(e){return e*this.videoLength()+this.startTime()}},{key:"onVideoElementAvailable",value:function(e){this.setState({videoElement:e})}},{key:"onUserSeek",value:function(e){var t=this,n=this.state.videoElement;if(isNaN(n.duration))this.setState({shouldRestartHls:!0},s);else{var a=this.ratioTime(e);n.currentTime=a;var s=function(){return t.props.onUserSeek(a)};0===e?this.setState({shouldRestartHls:!0},s):s()}}},{key:"onHlsRestart",value:function(){this.setState({shouldRestartHls:!1})}},{key:"render",value:function(){return d.a.createElement("div",{className:"cabana-explorer-visuals-camera"},this.state.isLoading?this.loadingOverlay():null,this.state.shouldShowJpeg?d.a.createElement("img",{src:this.nearestFrameUrl(),className:Object(ne.css)(ce.img),alt:"Camera preview at t = "+Math.round(this.props.userSeekTime)}):null,d.a.createElement(ie,{className:Object(ne.css)(ce.hls),source:Object(f.video)(this.props.url,"https://cabana-video.azureedge.net").getRearCameraStreamIndexUrl(),startTime:this.startTime(),videoLength:this.videoLength(),playbackSpeed:this.props.playSpeed,onVideoElementAvailable:this.onVideoElementAvailable,playing:this.props.playing,onClick:this.props.onVideoClick,onLoadStart:this.onLoadStart,onLoadEnd:this.onLoadEnd,onUserSeek:this.onUserSeek,onPlaySeek:this.props.onPlaySeek,segmentProgress:this.segmentProgress,shouldRestart:this.state.shouldRestartHls,onRestart:this.onHlsRestart}),d.a.createElement(oe,{className:Object(ne.css)(ce.seekBar),nearestFrameTime:this.props.userSeekTime,segmentProgress:this.segmentProgress,startTime:this.startTime(),videoLength:this.videoLength(),segmentIndices:this.props.segmentIndices,onUserSeek:this.onUserSeek,onPlaySeek:this.props.onPlaySeek,videoElement:this.state.videoElement,onPlay:this.props.onPlay,onPause:this.props.onPause,playing:this.props.playing,ratioTime:this.ratioTime}))}}]),t}(u.Component),de=n(227),he=n.n(de),ge=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={length:0,expandedMessages:[],messageHeights:[],allPacketsExpanded:!1},n.renderLogListItemMessage=n.renderLogListItemMessage.bind(Object(k.a)(n)),n.addDisplayedMessages=n.addDisplayedMessages.bind(Object(k.a)(n)),n.renderLogListItem=n.renderLogListItem.bind(Object(k.a)(n)),n.renderLogList=n.renderLogList.bind(Object(k.a)(n)),n.onExpandAllChanged=n.onExpandAllChanged.bind(Object(k.a)(n)),n.toggleExpandAllPackets=n.toggleExpandAllPackets.bind(Object(k.a)(n)),n.toggleSignalPlot=n.toggleSignalPlot.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.message&&!this.props.message&&this.addDisplayedMessages()}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.message?this.props.message.entries.length:0,a=e.message?e.message.entries.length:0;return this.props.message!==e.message||a!==n||e.messageIndex!==this.props.messageIndex||e.plottedSignals.length!==this.props.plottedSignals.length||JSON.stringify(e.segmentIndices)!==JSON.stringify(this.props.segmentIndices)||JSON.stringify(t)!==JSON.stringify(this.state)||this.props.message!==e.message||void 0!==this.props.message&&void 0!==e.message&&void 0!==this.props.message.frame&&void 0!==e.message.frame&&JSON.stringify(this.props.message.frame)!==JSON.stringify(e.message.frame)}},{key:"addDisplayedMessages",value:function(){var e=this.state.length+t.ITEMS_PER_PAGE;this.setState({length:e})}},{key:"expandMessage",value:function(e,t){this.setState({expandedMessages:this.state.expandedMessages.concat([e.time])}),this.props.onMessageExpanded()}},{key:"collapseMessage",value:function(e,t){this.setState({expandedMessages:this.state.expandedMessages.filter((function(t){return t!==e.time}))})}},{key:"isSignalPlotted",value:function(e,t){return void 0!==this.props.plottedSignals.find((function(n){return n.some((function(n){return n.messageId===e&&n.signalUid===t}))}))}},{key:"signalValuePretty",value:function(e,t){return e.isFloat?t.toFixed(3):t}},{key:"isMessageExpanded",value:function(e){return-1!==this.state.expandedMessages.indexOf(e.time)}},{key:"toggleSignalPlot",value:function(e,t,n){n?this.props.onSignalUnplotPressed(e,t):this.props.onSignalPlotPressed(e,t)}},{key:"toggleExpandPacketSignals",value:function(e){if(this.props.message.frame){var t=this.state.allPacketsExpanded||this.isMessageExpanded(e),n=Object.keys(this.props.message.frame.signals).length>0;if(t&&n)this.setState({expandedMessages:this.state.expandedMessages.filter((function(t){return t!==e.time}))});else{if(!n)return;this.setState({expandedMessages:this.state.expandedMessages.concat([e.time])}),this.props.onMessageExpanded()}}}},{key:"renderLogListItemSignals",value:function(e){var t=this,n=this.props.message;return d.a.createElement("div",{className:"signals-log-list-signals"},Object.entries(e.signals).map((function(e){var a=Object(r.a)(e,2),s=a[0],i=a[1],o=n.frame.signals[s];if(void 0===o)return null;var l=o.unit.length>0?o.unit:"units",c=t.isSignalPlotted(n.id,o.uid),u=c?null:"button--alpha",h=c?"Hide Plot":"Show Plot";return d.a.createElement("div",{key:s,className:"signals-log-list-signal"},d.a.createElement("div",{className:"signals-log-list-signal-message"},d.a.createElement("span",null,s)),d.a.createElement("div",{className:"signals-log-list-signal-value"},d.a.createElement("span",null,"(",d.a.createElement("strong",null,t.signalValuePretty(o,i))," ",l,")")),d.a.createElement("div",{className:"signals-log-list-signal-action",onClick:function(){t.toggleSignalPlot(n.id,o.uid,c)}},d.a.createElement("button",{className:w()("button--tiny",u)},d.a.createElement("span",null,h))))})))}},{key:"renderLogListItemMessage",value:function(e,t){var n=this,a=this.props.message,s=this.state.allPacketsExpanded||this.isMessageExpanded(e),i=Object.keys(e.signals).length>0?"has-signals":null,r=s?"is-expanded":null;return d.a.createElement("div",{key:t,className:w()("signals-log-list-item",i,r)},d.a.createElement("div",{className:"signals-log-list-item-header",onClick:function(){n.toggleExpandPacketSignals(e)}},d.a.createElement("div",{className:"signals-log-list-message"},d.a.createElement("strong",null,(a.frame?a.frame.name:null)||a.id)),d.a.createElement("div",{className:"signals-log-list-time"},d.a.createElement("span",null,"[",e.relTime.toFixed(3),"]")),d.a.createElement("div",{className:"signals-log-list-bytes"},d.a.createElement("span",{className:"t-mono"},e.hexData))),d.a.createElement("div",{className:"signals-log-list-item-body"},s?this.renderLogListItemSignals(e):null))}},{key:"renderLogListItem",value:function(e,t){var n=this.props.messageIndex;return 0===n&&2===this.props.segmentIndices.length&&(n=this.props.segmentIndices[0]),n+e<this.props.message.entries.length?this.renderLogListItemMessage(this.props.message.entries[n+e],t):null}},{key:"renderLogList",value:function(e,t){return d.a.createElement("div",{className:"signals-log-list"},d.a.createElement("div",{className:"signals-log-list-header"},d.a.createElement("div",{className:"signals-log-list-message"},"Message"),d.a.createElement("div",{className:"signals-log-list-time"},"Time"),d.a.createElement("div",{className:"signals-log-list-bytes"},"Bytes")),d.a.createElement("div",{className:"signals-log-list-items",ref:t},e))}},{key:"listLength",value:function(){var e=this.props,t=e.segmentIndices,n=e.messageIndex;return n>0?this.props.message.entries.length-n:2===t.length?t[1]-t[0]:this.props.message?this.props.message.entries.length:0}},{key:"onExpandAllChanged",value:function(e){this.setState({allPacketsExpanded:e.target.checked})}},{key:"toggleExpandAllPackets",value:function(){this.setState({allPacketsExpanded:!this.state.allPacketsExpanded})}},{key:"render",value:function(){var e=this.state.allPacketsExpanded?"Collapse All":"Expand All",t=this.state.allPacketsExpanded?null:"button--alpha";return d.a.createElement("div",{className:"cabana-explorer-signals-log"},d.a.createElement("div",{className:"cabana-explorer-signals-log-header"},d.a.createElement("strong",null,"Message Packets"),d.a.createElement("button",{className:w()("button--tiny",t),onClick:this.toggleExpandAllPackets},e)),d.a.createElement("div",{className:"cabana-explorer-signals-log-body"},d.a.createElement(he.a,{itemRenderer:this.renderLogListItem,itemsRenderer:this.renderLogList,length:this.listLength(),pageSize:50,updateWhenThisValueChanges:this.props.messageIndex,type:"variable"})))}}]),t}(u.Component);function me(e,t){return e.findIndex((function(e){return e.time>=t}))}function pe(e,t){return e.findIndex((function(e){return e.relTime>=t}))}ge.ITEMS_PER_PAGE=50;var fe={findTimeIndex:me,findRelativeTimeIndex:pe,findSegmentIndices:function(e,t,n){var a=Object(r.a)(t,2),s=a[0],i=a[1],o=!0===n?pe:me,l=Math.max(0,o(e,s)),c=o(e.slice(l),i),u=c>=0?c+l+1:e.length-1;return[l,Math.max(0,Math.min(u,e.length-1))]}};(function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={selectedPartStyle:n.makePartStyle(e.partsCount,0),isDragging:!1},n.selectNextPart=n.selectNextPart.bind(Object(k.a)(n)),n.selectPrevPart=n.selectPrevPart.bind(Object(k.a)(n)),n.onSelectedPartDragStart=n.onSelectedPartDragStart.bind(Object(k.a)(n)),n.onSelectedPartMouseMove=n.onSelectedPartMouseMove.bind(Object(k.a)(n)),n.onSelectedPartDragEnd=n.onSelectedPartDragEnd.bind(Object(k.a)(n)),n.onClick=n.onClick.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"makePartStyle",value:function(e,n){return{left:n/e*t.selectorWidth,width:D.h/e*t.selectorWidth}}},{key:"componentWillUpdate",value:function(e,t){if(e.selectedPart!==this.props.selectedPart){console.log("updating styles for part picker");var n=this.makePartStyle(e.partsCount,e.selectedPart);this.setState({selectedPartStyle:n})}}},{key:"selectPart",value:function(e){(e=Math.max(0,Math.min(this.props.partsCount-D.h,e)))!==this.props.selectedPart&&this.props.onPartChange(e)}},{key:"selectNextPart",value:function(){var e=this.props.selectedPart;++e+D.h>=this.props.partsCount||this.selectPart(e)}},{key:"selectPrevPart",value:function(){var e=this.props.selectedPart;--e<0||this.selectPart(e)}},{key:"partAtClientX",value:function(e){var n=e-this.selectorRect.getBoundingClientRect().left;return Math.floor(n*this.props.partsCount/t.selectorWidth)}},{key:"onSelectedPartDragStart",value:function(e){this.setState({isDragging:!0}),document.addEventListener("mouseup",this.onSelectedPartDragEnd)}},{key:"onSelectedPartMouseMove",value:function(e){if(this.state.isDragging){var t=this.partAtClientX(e.clientX);this.selectPart(t)}}},{key:"onSelectedPartDragEnd",value:function(e){this.setState({isDragging:!1}),document.removeEventListener("mouseup",this.onSelectedPartDragEnd)}},{key:"onClick",value:function(e){var t=this.partAtClientX(e.clientX);this.selectPart(t)}},{key:"render",value:function(){var e=this,n=this.state.selectedPartStyle;return this.props.partsCount<=D.h?null:d.a.createElement("div",{className:"cabana-explorer-part-selector"},d.a.createElement("div",{className:"cabana-explorer-part-selector-track",ref:function(t){return e.selectorRect=t},style:{width:t.selectorWidth},onMouseMove:this.onSelectedPartMouseMove,onClick:this.onClick},d.a.createElement("div",{className:"cabana-explorer-part-selector-track-active",style:n,onMouseDown:this.onSelectedPartDragStart,onMouseUp:this.onSelectedPartDragEnd})))}}]),t}(u.Component)).selectorWidth=150;var ve=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).onChange=n.onChange.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"onChange",value:function(e){this.props.onPlaySpeedChanged&&this.props.onPlaySpeedChanged(Number(e.currentTarget.value))}},{key:"render",value:function(){return d.a.createElement("div",{style:{display:"inline-block",float:"right",margin:10}},d.a.createElement("label",null,"Play speed:\xa0"),d.a.createElement("select",{id:"playSpeed",style:{width:70},onChange:this.onChange,value:this.props.playSpeed},d.a.createElement("option",{value:"0.1"},"0.1x"),d.a.createElement("option",{value:"0.5"},"0.5x"),d.a.createElement("option",{value:"1"},"1x"),d.a.createElement("option",{value:"2"},"2x")))}}]),t}(u.Component),be=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).updateSegment=J((function(e,t){var a=n.props.messages[n.props.selectedMessage].entries,s=fe.findSegmentIndices(a,t,!0);t[0]===60*n.props.currentParts[0]&&t[1]===60*(n.props.currentParts[1]+1)&&(t=[],s=[]),n.setState({segment:t,segmentIndices:s,userSeekIndex:s[0],userSeekTime:t[0]||0})}),250),n.state={plottedSignals:[],segment:[],segmentIndices:[],shouldShowAddSignal:!0,userSeekIndex:0,userSeekTime:0,playing:e.autoplay,signals:{},playSpeed:1},n.onSignalPlotPressed=n.onSignalPlotPressed.bind(Object(k.a)(n)),n.onSignalUnplotPressed=n.onSignalUnplotPressed.bind(Object(k.a)(n)),n.onSegmentChanged=n.onSegmentChanged.bind(Object(k.a)(n)),n.showAddSignal=n.showAddSignal.bind(Object(k.a)(n)),n.onGraphTimeClick=n.onGraphTimeClick.bind(Object(k.a)(n)),n.onUserSeek=n.onUserSeek.bind(Object(k.a)(n)),n.onPlaySeek=n.onPlaySeek.bind(Object(k.a)(n)),n.onPlay=n.onPlay.bind(Object(k.a)(n)),n.onPause=n.onPause.bind(Object(k.a)(n)),n.onVideoClick=n.onVideoClick.bind(Object(k.a)(n)),n.onSignalPlotChange=n.onSignalPlotChange.bind(Object(k.a)(n)),n._onKeyDown=n._onKeyDown.bind(Object(k.a)(n)),n.mergePlots=n.mergePlots.bind(Object(k.a)(n)),n.toggleShouldShowAddSignal=n.toggleShouldShowAddSignal.bind(Object(k.a)(n)),n.changePlaySpeed=n.changePlaySpeed.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"_onKeyDown",value:function(e){27===e.keyCode&&this.resetSegment()}},{key:"componentWillMount",value:function(){document.addEventListener("keydown",this._onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._onKeyDown)}},{key:"clipSegment",value:function(e,t,n){if(2===e.length){var a=n.entries.findIndex((function(t){return t.relTime>=e[0]})),s=n.entries.findIndex((function(t){return t.relTime>=e[1]}));if(-1!==a){-1===s&&(s=n.entries.length-1);var i=n.entries[a].relTime,r=n.entries[s].relTime;e=[i,r],t=[a,s]}else e=[],t=[]}return{segment:e,segmentIndices:t}}},{key:"componentWillReceiveProps",value:function(e){var t=e.messages[e.selectedMessage],n=this.props.messages[this.props.selectedMessage],a=this.state.plottedSignals;(0===Object.keys(e.messages).length&&this.resetSegment(),t&&t.frame&&t!==n)&&(0===Object.keys(t.frame.signals).length&&this.setState({shouldShowAddSignal:!0}));if(a=a.map((function(t){return t.filter((function(t,n){var a=t.messageId,s=t.signalUid,i=!!e.messages[a],r=!0;return i&&(r=Object.values(e.messages[a].frame.signals).some((function(e){return e.uid===s}))),i&&r}))})).filter((function(e){return e.length>0})),this.setState({plottedSignals:a}),e.selectedMessage&&e.selectedMessage!==this.props.selectedMessage){var s,i=this.clipSegment(this.state.segment,this.state.segmentIndices,t),r=i.segment,o=i.segmentIndices,l=t.entries[e.seekIndex];s=l?l.relTime:2===r.length?r[0]:t.entries[0],this.setState({segment:r,segmentIndices:o,userSeekIndex:e.seekIndex,userSeekTime:s})}if(t&&n&&t.entries.length!==n.entries.length){var c=this.clipSegment(this.state.segment,this.state.segmentIndices,t),u=c.segment,d=c.segmentIndices;this.setState({segment:u,segmentIndices:d})}}},{key:"changePlaySpeed",value:function(e){this.setState({playSpeed:e})}},{key:"timeWindow",value:function(){var e=this.props,t=e.routeStartTime,n=e.currentParts;if(t){var a=60*n[0],s=60*(n[1]+1),i=t.clone().add(a,"s").format("HH:mm:ss"),r=t.clone().add(s,"s").format("HH:mm:ss");return"".concat(i," - ").concat(r)}return""}},{key:"onSignalPlotPressed",value:function(e,t){var n=this.state.plottedSignals;n=[[{messageId:e,signalUid:t}]].concat(Object(v.a)(n)),this.setState({plottedSignals:n})}},{key:"onSignalUnplotPressed",value:function(e,t){var n=this.state.plottedSignals.map((function(n){return n.filter((function(n){return!(n.messageId===e&&n.signalUid===t)}))})).filter((function(e){return e.length>0}));this.setState({plottedSignals:n})}},{key:"onSegmentChanged",value:function(e,t){Array.isArray(t)&&this.updateSegment(e,t)}},{key:"resetSegment",value:function(){var e=this.state,t=e.segment,n=e.segmentIndices,a=this.props;a.messages,a.selectedMessage;(t.length>0||n.length>0)&&this.setState({segment:[],segmentIndices:[],userSeekIndex:0})}},{key:"showAddSignal",value:function(){this.setState({shouldShowAddSignal:!0})}},{key:"toggleShouldShowAddSignal",value:function(){this.setState({shouldShowAddSignal:!this.state.shouldShowAddSignal})}},{key:"indexFromSeekTime",value:function(e){var t=this.props.messages[this.props.selectedMessage].entries;if(0===t.length)return null;var n=this.state.segmentIndices;if(2===n.length&&n[0]>=0){for(var a=n[0],s=Math.min(t.length-1,n[1]);a<=s;a++)if(t[a].relTime>=e)return a;return n[1]}for(var i=0;i<t.length;i++)if(t[i].relTime>=e)return i;return t.length-1}},{key:"onUserSeek",value:function(e){this.setState({userSeekTime:e});this.props.messages[this.props.selectedMessage];this.props.onUserSeek(e),this.setState({userSeekTime:e})}},{key:"onPlaySeek",value:function(e){var t=this.props.messages[this.props.selectedMessage];if(t&&0!==t.entries.length){var n=this.indexFromSeekTime(e),a=e;this.props.onSeek(n,a)}else this.props.onSeek(0,e)}},{key:"onGraphTimeClick",value:function(e,t){this.onUserSeek(t)}},{key:"onPlay",value:function(){this.setState({playing:!0})}},{key:"onPause",value:function(){this.setState({playing:!1})}},{key:"secondsLoadedRouteRelative",value:function(e){return 60*(e[1]-e[0]+1)}},{key:"secondsLoaded",value:function(){return 60*this.props.partsCount}},{key:"onVideoClick",value:function(){var e=!this.state.playing;this.setState({playing:e})}},{key:"seekTime",value:function(){var e=this.state.userSeekIndex;return this.props.messages[this.props.selectedMessage].entries[e].time}},{key:"onSignalPlotChange",value:function(e,t,n){e?this.onSignalPlotPressed(t,n):this.onSignalUnplotPressed(t,n)}},{key:"renderSelectMessagePrompt",value:function(){return d.a.createElement("div",{className:"cabana-explorer-select-prompt"},d.a.createElement("h1",null,"Select a message"))}},{key:"selectedMessagePlottedSignalUids",value:function(){var e=this;return this.state.plottedSignals.map((function(t){return t.filter((function(t){var n=t.messageId;t.signalUid;return n===e.props.selectedMessage})).map((function(e){return e.signalUid}))})).reduce((function(e,t){return e.concat(t)}),[])}},{key:"renderExplorerSignals",value:function(){var e=this,t=this.props.selectedMessage,n=this.props.messages[t],a=void 0!==n.frame?n.frame.name:"undefined";return d.a.createElement("div",{className:"cabana-explorer-signals-wrapper"},d.a.createElement("div",{className:"cabana-explorer-signals-header"},d.a.createElement("div",{className:"cabana-explorer-signals-header-context"},d.a.createElement("h5",{className:"t-capline"},"Selected Message:"),d.a.createElement("h3",null,a)),d.a.createElement("div",{className:"cabana-explorer-signals-header-action"},d.a.createElement("button",{className:"button--small",onClick:function(){return e.props.showEditMessageModal(t)}},"Edit"))),d.a.createElement("div",{className:"cabana-explorer-signals-subheader",onClick:this.toggleShouldShowAddSignal},d.a.createElement("strong",null,"Edit Signals")),d.a.createElement("div",{className:"cabana-explorer-signals-window"},this.state.shouldShowAddSignal?d.a.createElement(F.a,{onConfirmedSignalChange:this.props.onConfirmedSignalChange,message:this.props.messages[this.props.selectedMessage],onClose:function(){e.setState({shouldShowAddSignal:!1})},messageIndex:this.props.seekIndex,onSignalPlotChange:this.onSignalPlotChange,plottedSignalUids:this.selectedMessagePlottedSignalUids()}):null,d.a.createElement(ge,{message:this.props.messages[this.props.selectedMessage],messageIndex:this.props.seekIndex,segmentIndices:this.state.segmentIndices,plottedSignals:this.state.plottedSignals,onSignalPlotPressed:this.onSignalPlotPressed,onSignalUnplotPressed:this.onSignalUnplotPressed,showAddSignal:this.showAddSignal,onMessageExpanded:this.onPause})))}},{key:"mergePlots",value:function(e){var t=e.fromPlot,n=e.toPlot,a=this.state.plottedSignals,s=a.findIndex((function(e){return e.some((function(e){return e.signalUid===t.signalUid&&e.messageId===t.messageId}))}));a.splice(s,1);var i=a.findIndex((function(e){return e.some((function(e){return e.signalUid===n.signalUid&&e.messageId===n.messageId}))}));a[i]=[t,n],this.setState({plottedSignals:a})}},{key:"render",value:function(){var e=this,t=this.state.shouldShowAddSignal?"is-expanded":null,n=this.state.segment;return!n.length&&this.props.currentParts&&(n=[60*this.props.currentParts[0],60*(this.props.currentParts[1]+1)]),d.a.createElement("div",{className:"cabana-explorer"},d.a.createElement("div",{className:w()("cabana-explorer-signals",t)},this.props.messages[this.props.selectedMessage]?this.renderExplorerSignals():this.renderSelectMessagePrompt()),d.a.createElement("div",{className:"cabana-explorer-visuals"},!1===this.props.live?d.a.createElement("div",null,d.a.createElement(ve,{playSpeed:this.state.playSpeed,onPlaySpeedChanged:this.changePlaySpeed}),d.a.createElement("div",{className:"cabana-explorer-visuals-header g-row"}),d.a.createElement("br",null),d.a.createElement(ue,{message:this.props.messages[this.props.selectedMessage],segment:this.state.segment,seekIndex:this.props.seekIndex,userSeekIndex:this.state.userSeekIndex,playing:this.state.playing,url:this.props.url,canFrameOffset:this.props.canFrameOffset,firstCanTime:this.props.firstCanTime,onVideoClick:this.onVideoClick,onPlaySeek:this.onPlaySeek,onUserSeek:this.onUserSeek,onPlay:this.onPlay,onPause:this.onPause,userSeekTime:this.state.userSeekTime,playSpeed:this.state.playSpeed})):null,this.state.segment.length>0?d.a.createElement("div",{className:"cabana-explorer-visuals-segmentreset",onClick:function(){e.resetSegment()}},d.a.createElement("p",null,"Reset Segment")):null,d.a.createElement(te,{plottedSignals:this.state.plottedSignals,messages:this.props.messages,onGraphTimeClick:this.onGraphTimeClick,seekTime:this.props.seekTime,onSegmentChanged:this.onSegmentChanged,onSignalUnplotPressed:this.onSignalUnplotPressed,segment:n,mergePlots:this.mergePlots,live:this.props.live})))}}]),t}(u.Component),Se=(n(464),function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={windowHeight:{},modalHeight:{}},n.updateHeights=n.updateHeights.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"updateHeights",value:function(e){this.setState({windowHeight:window.innerHeight}),this.setState({modalHeight:e.bounds.height})}},{key:"readVariationClasses",value:function(){if(this.props.variations)return this.props.variations.reduce((function(e,t){return e+"cabana-modal--".concat(t," ")}),"")}},{key:"checkClosability",value:function(){return this.props.disableClose||!1}},{key:"checkYScrollability",value:function(){return this.state.modalHeight>this.state.windowHeight}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:w()("cabana-modal",this.readVariationClasses(),{"cabana-modal--not-closable":this.checkClosability(),"cabana-modal--scrollable-y":this.checkYScrollability()})},d.a.createElement(X.a,{bounds:!0,onResize:function(t){e.updateHeights(t)}},(function(t){var n=t.measureRef;return d.a.createElement("div",{ref:n,className:"cabana-modal-container"},d.a.createElement("div",{className:"cabana-modal-close-icon",onClick:e.props.handleClose}),d.a.createElement("div",{className:"cabana-modal-header"},d.a.createElement("h1",null,e.props.title),d.a.createElement("p",null,e.props.subtitle)),d.a.createElement("div",{className:"cabana-modal-navigation"},e.props.navigation),d.a.createElement("div",{className:"cabana-modal-body"},d.a.createElement("div",{className:"cabana-modal-body-window"},e.props.children),d.a.createElement("div",{className:"cabana-modal-body-gradient"})),d.a.createElement("div",{className:"cabana-modal-actions"},e.props.actions),d.a.createElement("div",{className:"cabana-modal-footer"},e.props.footer))})),d.a.createElement("div",{className:"cabana-modal-backdrop",onClick:this.props.handleClose}))}}]),t}(u.Component)),Ee=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={webUsbEnabled:!!navigator.usb,viewingUsbInstructions:!1,pandaConnected:!1},n.attemptPandaConnection=n.attemptPandaConnection.bind(Object(k.a)(n)),n.toggleUsbInstructions=n.toggleUsbInstructions.bind(Object(k.a)(n)),n.navigateToExplorer=n.navigateToExplorer.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"attemptPandaConnection",value:function(){this.state.webUsbEnabled&&this.props.handlePandaConnect()}},{key:"toggleUsbInstructions",value:function(){this.setState({viewingUsbInstructions:!this.state.viewingUsbInstructions})}},{key:"navigateToExplorer",value:function(){window.location.href=D.b}},{key:"filterRoutesWithCan",value:function(e){return!0===e.can}},{key:"renderPandaEligibility",value:function(){var e=this.state,t=e.webUsbEnabled,n=e.pandaConnected,a=this.props.attemptingPandaConnection;return t?!n&&a?d.a.createElement("p",null,d.a.createElement("i",{className:"fa fa-spinner animate-spin"}),d.a.createElement("span",{className:"animate-pulse-opacity"},"Waiting for panda USB connection")):void 0:d.a.createElement("p",null,d.a.createElement("i",{className:"fa fa-exclamation-triangle"}),d.a.createElement("a",{onClick:this.toggleUsbInstructions},d.a.createElement("span",null,"WebUSB is not enabled in your Chrome settings")))}},{key:"renderLogin",value:function(){return d.a.createElement("button",{onClick:this.navigateToExplorer,className:"button--primary button--kiosk"},d.a.createElement("i",{className:"fa fa-video-camera"}),d.a.createElement("strong",null,p.a.isAuthenticated()?"Find a drive in Explorer":"Log in with Explorer"),d.a.createElement("sup",null,'Click "View CAN Data" while replaying a drive'))}},{key:"renderOnboardingOptions",value:function(){return d.a.createElement("div",{className:"cabana-onboarding-modes"},d.a.createElement("div",{className:"cabana-onboarding-mode"},this.renderLogin()),d.a.createElement("div",{className:"cabana-onboarding-mode"},d.a.createElement("button",{className:w()("button--secondary button--kiosk",{"is-disabled":!this.state.webUsbEnabled||this.props.attemptingPandaConnection}),onClick:this.attemptPandaConnection},d.a.createElement("i",{className:"fa fa-bolt"}),d.a.createElement("strong",null,"Launch Realtime Streaming"),d.a.createElement("sup",null,"Interactively stream car data over USB with ",d.a.createElement("em",null,"panda")),this.renderPandaEligibility())))}},{key:"renderUsbInstructions",value:function(){return d.a.createElement("div",{className:"cabana-onboarding-instructions"},d.a.createElement("button",{className:"button--small button--inverted",onClick:this.toggleUsbInstructions},d.a.createElement("i",{className:"fa fa-chevron-left"}),d.a.createElement("span",null," Go back")),d.a.createElement("h3",null,"Follow these directions to enable WebUSB:"),d.a.createElement("ol",{className:"cabana-onboarding-instructions-list list--bubbled"},d.a.createElement("li",null,d.a.createElement("p",null,d.a.createElement("strong",null,"Open your Chrome settings:")),d.a.createElement("div",{className:"inset"},d.a.createElement("span",null,"chrome://flags/#enable-experimental-web-platform-features"))),d.a.createElement("li",null,d.a.createElement("p",null,d.a.createElement("strong",null,"Enable Experimental Platform features:")),d.a.createElement("img",{alt:"Screenshot of Google Chrome Experimental Platform features",src:t.instructionalImages.step2})),d.a.createElement("li",null,d.a.createElement("p",null,d.a.createElement("strong",null,"Enable WebUSB:")),d.a.createElement("img",{alt:"Screenshot of Google Chrome enable WebUSB",src:t.instructionalImages.step3})),d.a.createElement("li",null,d.a.createElement("p",null,d.a.createElement("strong",null,"Relaunch your Chrome browser and try enabling live mode again.")))))}},{key:"renderModalContent",value:function(){return this.state.viewingUsbInstructions?this.renderUsbInstructions():this.renderOnboardingOptions()}},{key:"renderModalFooter",value:function(){return d.a.createElement("p",null,d.a.createElement("span",null,"Don't have a"," ",d.a.createElement("a",{href:"https://panda.comma.ai",target:"_blank",rel:"noopener noreferrer"},"panda"),"?"," "),d.a.createElement("span",null,d.a.createElement("a",{href:"https://panda.comma.ai",target:"_blank",rel:"noopener noreferrer"},"Get one here")," "),d.a.createElement("span",null,"or ",d.a.createElement("a",{href:"".concat(window.location.href,"?demo=1")},"try the demo"),"."))}},{key:"render",value:function(){return d.a.createElement(Se,{title:"Welcome to Cabana",subtitle:"Get started by selecting a drive from Explorer or enabling live mode",footer:this.renderModalFooter(),disableClose:!0,variations:["wide","dark"]},this.renderModalContent())}}]),t}(u.Component);Ee.instructionalImages={step2:n(465),step3:n(466)};var ye=n(228),Oe=n.n(ye),ke=n(229),_e=n.n(ke),Ce=function(){function e(t){Object(S.a)(this,e),this.token=t,this.github=new _e.a({token:t}),this.sourceRepo=this.github.getRepo("commaai","opendbc"),this.githubUsername=null}return Object(E.a)(e,[{key:"hasAuth",value:function(){return null!==this.token}},{key:"getGithubUsername",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.githubUsername){e.next=4;break}return e.abrupt("return",this.githubUsername);case 4:return e.next=6,this.fetchGithubUsername();case 6:if(!(t=e.sent)){e.next=9;break}return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGithubUsername",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.github.getUser();case 3:if(!(t=e.sent)){e.next=10;break}return e.next=7,t.getProfile();case 7:if(!(n=e.sent)){e.next=10;break}return e.abrupt("return",n.data.login);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,i,o,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t?n=this.sourceRepo:(a=t.split("/"),i=Object(r.a)(a,2),o=i[0],l=i[1],n=this.github.getRepo(o,l)),e.prev=1,e.next=4,n.getContents("master","");case 4:return c=e.sent,e.abrupt("return",c.data.map((function(e){return e.path})));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getDbcContents",value:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var a,i,o,l,c,u,d,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n?a=this.sourceRepo:(i=n.split("/"),o=Object(r.a)(i,2),l=o[0],c=o[1],a=this.github.getRepo(l,c)),e.next=3,a.getContents("master",t);case 3:return u=e.sent,d=u.data.download_url,e.next=7,fetch(d,{cache:"no-cache"});case 7:return h=e.sent,e.abrupt("return",h.text());case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"repoSourceIsOpenDbc",value:function(e){return e.source&&e.source.full_name===D.g}},{key:"getUserOpenDbcFork",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGithubUsername();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.github.getRepo(t,"opendbc"),e.next=8,n.getDetails();case 8:if(a=e.sent,i=a.data,!this.repoSourceIsOpenDbc(i)){e.next=14;break}return e.abrupt("return",i.full_name);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fork",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sourceRepo.fork();case 2:if(202!==e.sent.status){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"commitFile",value:function(){var e=Object(i.a)(s.a.mark((function e(t,n,a,i){var o,l,c,u,d,h,g,m,p,f,v,b,S,E,y,O,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.split("/"),l=Object(r.a)(o,2),c=l[0],u=l[1],d=this.github.getRepo(c,u),e.next=4,d.getRef("heads/master");case 4:return h=e.sent,g=h.data,e.next=8,d.getCommit(g.object.sha);case 8:return m=e.sent,p=m.data,e.next=12,d.getTree(p.tree.sha);case 12:return f=e.sent,v=f.data,b=[{mode:"100644",path:n,type:"blob",content:a}],e.next=17,d.createTree(b,v.sha);case 17:return S=e.sent,E=S.data,e.next=21,d.commit(p.sha,E.sha,i||"OpenDBC updates");case 21:return y=e.sent,O=y.data,e.next=25,d.updateHead("heads/master",O.sha,!1);case 25:return k=e.sent,e.abrupt("return",200===k.status);case 27:case"end":return e.stop()}}),e,this)})));return function(t,n,a,s){return e.apply(this,arguments)}}()}]),e}(),xe=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={tab:"GitHub",openDbcFork:null,dbcFilename:n.props.sourceDbcFilename,tabs:["GitHub","Download"],commitMessage:"OpenDBC updates"},n.commitToGitHub=n.commitToGitHub.bind(Object(k.a)(n)),n.downloadDbcFile=n.downloadDbcFile.bind(Object(k.a)(n)),n.forkOpenDbcAndWait=n.forkOpenDbcAndWait.bind(Object(k.a)(n)),n.renderForkButton=n.renderForkButton.bind(Object(k.a)(n)),n.renderTabNavigation=n.renderTabNavigation.bind(Object(k.a)(n)),n.renderActions=n.renderActions.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.openDbcClient.getUserOpenDbcFork();case 2:t=e.sent,this.setState({openDbcFork:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"commitToGitHub",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.openDbcFork,a=t.dbcFilename,i=a.replace(/\.dbc/g,"")+".dbc",e.next=4,this.props.openDbcClient.commitFile(n,i,this.props.dbc.text(),this.state.commitMessage);case 4:e.sent&&this.props.onDbcSaved(i);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadDbcFile",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Blob([this.props.dbc.text()],{type:"text/plain;charset=utf-8"}),n=this.state.dbcFilename.replace(/\.dbc/g,"")+".dbc",Oe.a.saveAs(t,n,!0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"forkOpenDbcAndWait",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,a,i=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.openDbcClient.fork();case 2:e.sent&&(t=!1,n=window.setTimeout((function(){t=!0}),3e4),a=window.setInterval((function(){t?window.clearInterval(a):i.props.openDbcClient.getUserOpenDbcFork().then((function(e){null!==e&&(i.setState({openDbcFork:e}),window.clearInterval(a),window.clearTimeout(n))}))}),3e3));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"primaryActionDisabled",value:function(){var e=this.state.tab;return"GitHub"===e?null!=this.state.openDbcFork&&this.state.dbcFilename.length>0:"Download"===e||void 0}},{key:"renderForkButton",value:function(){return d.a.createElement("button",{onClick:this.forkOpenDbcAndWait},d.a.createElement("i",{className:"fa fa-code-fork"}),d.a.createElement("span",null," Fork OpenDBC"))}},{key:"renderForkStep",value:function(){var e,t=this.state.openDbcFork;return e=null!==t?d.a.createElement("button",{disabled:!0},d.a.createElement("i",{className:"fa fa-code-fork"}),d.a.createElement("span",null," Forked: ",t)):this.props.hasGithubAuth?this.renderForkButton():this.props.loginWithGithub,d.a.createElement("div",null,null!==t?this.renderForkButton():null,e,d.a.createElement("hr",null))}},{key:"renderFilenameField",value:function(){var e=this;return d.a.createElement("div",{className:"form-field","data-extension":".dbc"},d.a.createElement("label",{htmlFor:"filename"},d.a.createElement("span",null,"Choose a filename:"),d.a.createElement("sup",null,"Pick a unique name for your car DBC file")),d.a.createElement("input",{type:"text",id:"filename",value:this.state.dbcFilename.replace(/\.dbc/g,""),size:this.state.dbcFilename.length+2,onChange:function(t){return e.setState({dbcFilename:t.target.value})}}))}},{key:"renderTabNavigation",value:function(){var e=this;return d.a.createElement("div",{className:"cabana-tabs-navigation"},this.state.tabs.map((function(t){return d.a.createElement("a",{className:w()({"is-active":e.state.tab===t}),onClick:function(){e.setState({tab:t})},key:t},d.a.createElement("span",null,t))})))}},{key:"renderCommitMessage",value:function(){var e=this;return d.a.createElement("div",{className:"form-field"},d.a.createElement("label",{htmlFor:"commit-message"},d.a.createElement("span",null,"Commit Message:"),d.a.createElement("sup",null,"Message appears in git logs")),d.a.createElement("input",{type:"text",id:"commit-message",value:this.state.commitMessage,onChange:function(t){return e.setState({commitMessage:t.target.value})}}))}},{key:"renderTabContent",value:function(){var e=this.state.tab;return"GitHub"===e?d.a.createElement("div",null,this.renderForkStep(),this.renderFilenameField(),this.renderCommitMessage()):"Download"===e?d.a.createElement("div",null,this.renderFilenameField()):void 0}},{key:"renderActions",value:function(){var e=this.state.tab;return"GitHub"===e?d.a.createElement("div",null,d.a.createElement("button",{className:"button--inverted",onClick:this.props.handleClose},d.a.createElement("span",null,"Cancel")),d.a.createElement("button",{className:"button--primary",onClick:this.commitToGitHub},d.a.createElement("span",null,"Commit to GitHub"))):"Download"===e?d.a.createElement("div",null,d.a.createElement("button",{className:"button--inverted",onClick:this.props.handleClose},d.a.createElement("span",null,"Cancel")),d.a.createElement("button",{className:"button--primary",onClick:this.downloadDbcFile},d.a.createElement("span",null,"Download"))):void 0}},{key:"render",value:function(){return d.a.createElement(Se,{title:"Save DBC File",subtitle:"Save your progress and output to a DBC file",handleClose:this.props.handleClose,navigation:this.renderTabNavigation(),actions:this.renderActions()},this.renderTabContent())}}]),t}(u.Component),Me=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={paths:[],selectedPath:null,pathQuery:""},n.updatePathQuery=n.updatePathQuery.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.repo!==this.props.repo&&this.props.openDbcClient.list(e.repo).then((function(e){t.setState({paths:e,selectedPath:null})}))}},{key:"componentWillMount",value:function(){var e=this;this.props.openDbcClient.list(this.props.repo).then((function(t){t=t.filter((function(e){return-1!==e.indexOf(".dbc")})),e.setState({paths:t})}))}},{key:"updatePathQuery",value:function(e){this.setState({pathQuery:e.target.value})}},{key:"selectPath",value:function(e){var t=this;this.setState({selectedPath:e}),this.props.openDbcClient.getDbcContents(e,this.props.repo).then((function(n){t.props.onDbcLoaded(e,n)}))}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"cabana-dbc-list"},d.a.createElement("div",{className:"cabana-dbc-list-header"},d.a.createElement("a",{href:"https://github.com/".concat(this.props.repo),target:"_blank"},d.a.createElement("i",{className:"fa fa-github"}),d.a.createElement("span",null,this.props.repo)),d.a.createElement("div",{className:"form-field form-field--small"},d.a.createElement("input",{type:"text",placeholder:"Search DBC Files",onChange:this.updatePathQuery}))),d.a.createElement("div",{className:"cabana-dbc-list-files"},this.state.paths.filter((function(t){return""===e.state.pathQuery|t.includes(e.state.pathQuery)})).map((function(t){return d.a.createElement("div",{className:w()("cabana-dbc-list-file",{"is-selected":e.state.selectedPath===t}),onClick:function(){e.selectPath(t)},key:t},d.a.createElement("span",null,t))}))))}}]),t}(u.Component),we=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={dbcText:""},n.onTextChanged=n.onTextChanged.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"onTextChanged",value:function(e){var t=e.target.value;this.setState({dbcText:t}),this.props.onDbcLoaded("from paste",t)}},{key:"render",value:function(){return d.a.createElement("div",{className:"cabana-dbc-upload-raw"},d.a.createElement("div",{className:"form-field"},d.a.createElement("label",{htmlFor:"raw_dbc_upload"},d.a.createElement("span",null,"Raw DBC File:"),d.a.createElement("sup",null,"Paste your DBC text output within this box")),d.a.createElement("textarea",{value:this.state.dbcText,id:"raw_dbc_upload",className:"t-mono",placeholder:"PASTE DBC FILE HERE",onChange:this.onTextChanged})))}}]),t}(u.Component),Te=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={tab:"OpenDBC",tabs:["OpenDBC","GitHub","Upload"],dbc:null,dbcSource:null,userOpenDbcRepo:null},n.onDbcLoaded=n.onDbcLoaded.bind(Object(k.a)(n)),n.handleSave=n.handleSave.bind(Object(k.a)(n)),n.renderTabNavigation=n.renderTabNavigation.bind(Object(k.a)(n)),n.renderTabContent=n.renderTabContent.bind(Object(k.a)(n)),n.renderActions=n.renderActions.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.openDbcClient.getUserOpenDbcFork().then((function(t){e.setState({userOpenDbcRepo:t})}))}},{key:"onDbcLoaded",value:function(e,t){var n=new R.a(t);this.setState({dbcSource:e,dbc:n})}},{key:"handleSave",value:function(){var e=this.state,t=e.dbc,n=e.dbcSource;null!==t&&this.props.onDbcSelected(n,t)}},{key:"renderTabNavigation",value:function(){var e=this;return d.a.createElement("div",{className:"cabana-tabs-navigation"},this.state.tabs.map((function(t){return d.a.createElement("a",{className:w()({"is-active":e.state.tab===t}),onClick:function(){e.setState({tab:t})},key:t},d.a.createElement("span",null,t))})))}},{key:"renderTabContent",value:function(){var e=this.state.tab;return"OpenDBC"===e?d.a.createElement(Me,{onDbcLoaded:this.onDbcLoaded,repo:"commaai/opendbc",openDbcClient:this.props.openDbcClient}):"GitHub"===e?this.props.openDbcClient.hasAuth()?null===this.state.userOpenDbcRepo?d.a.createElement("div",null,"Fork it"):d.a.createElement(Me,{onDbcLoaded:this.onDbcLoaded,repo:this.state.userOpenDbcRepo,openDbcClient:this.props.openDbcClient}):this.props.loginWithGithub:"Upload"===e?d.a.createElement(we,{onDbcLoaded:this.onDbcLoaded}):void 0}},{key:"renderActions",value:function(){return d.a.createElement("div",null,d.a.createElement("button",{className:"button--inverted",onClick:this.props.handleClose},d.a.createElement("span",null,"Cancel")),d.a.createElement("button",{className:"button--primary",onClick:this.handleSave},d.a.createElement("span",null,"Load DBC")))}},{key:"render",value:function(){return d.a.createElement(Se,{title:"Load DBC File",subtitle:"Modify an existing DBC file with Cabana",handleClose:this.props.handleClose,navigation:this.renderTabNavigation(),actions:this.renderActions()},this.renderTabContent())}}]),t}(u.Component),Pe=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={messageFrame:e.message.frame.copy()},n.handleSave=n.handleSave.bind(Object(k.a)(n)),n.editTransmitter=n.editTransmitter.bind(Object(k.a)(n)),n.addTransmitter=n.addTransmitter.bind(Object(k.a)(n)),n.renderActions=n.renderActions.bind(Object(k.a)(n)),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"handleSave",value:function(){this.props.handleSave(this.state.messageFrame)}},{key:"addTransmitter",value:function(){var e=this.state.messageFrame;e.addTransmitter(),this.setState({messageFrame:e})}},{key:"editTransmitter",value:function(e){}},{key:"renderActions",value:function(){return d.a.createElement("div",null,d.a.createElement("button",{className:"button--inverted",onClick:this.props.handleClose},"Cancel"),d.a.createElement("button",{className:"button--primary",onClick:this.handleSave},"Save Message"))}},{key:"render",value:function(){var e=this;return d.a.createElement(Se,{title:"Edit Message: (".concat(this.props.message.id,")"),subtitle:"Make changes and update defaults of this message",handleClose:this.props.handleClose,handleSave:this.handleSave,actions:this.renderActions()},d.a.createElement("div",{className:"form-field"},d.a.createElement("label",{htmlFor:"message_name"},d.a.createElement("span",null,"Name"),d.a.createElement("sup",null,"Customize the name of this message")),d.a.createElement("input",{type:"text",id:"message_name",value:this.state.messageFrame.name,onChange:function(t){var n=e.state.messageFrame;n.name=t.target.value,e.setState({messageFrame:n})}})),d.a.createElement("div",{className:"form-field"},d.a.createElement("label",{htmlFor:"message_size"},d.a.createElement("span",null,"Size"),d.a.createElement("sup",null,"Add a size parameter to this message")),d.a.createElement("input",{type:"number",id:"message_size",value:this.state.messageFrame.size,onChange:function(t){var n=e.state.messageFrame;t.target.value>8||(n.size=parseInt(t.target.value,10),e.setState({messageFrame:n}))}})),d.a.createElement("div",{className:"form-field u-hidden"},d.a.createElement("label",{htmlFor:"message_transmitters"},d.a.createElement("span",null,"Transmitters"),d.a.createElement("sup",null,"Add the physical ECU units that this message is coming from.")),d.a.createElement("div",{className:"form-field-inset"},d.a.createElement("ul",{className:"form-field-inset-list"},this.state.messageFrame.transmitters.map((function(e){return d.a.createElement("li",{className:"form-field-inset-list-item",key:e},d.a.createElement("div",{className:"form-field-inset-list-item-title"},d.a.createElement("span",null,e)),d.a.createElement("div",{className:"form-field-inset-list-item-action"},d.a.createElement("button",{className:"button--tiny button--alpha"},"Edit")))})),d.a.createElement("button",{className:"button--tiny button--alpha"},d.a.createElement("span",null,d.a.createElement("i",{className:"fa fa-plus"})," Add Transmitter"))))))}}]),t}(u.Component),je=n(57),De=n(58);function Ne(){var e=Object(je.a)(["\n  display: block;\n  animation-name: ",";\n  animation-duration: 2s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n  background-color: ",";\n  background-image: linear-gradient(\n    to right,\n    "," 0,\n    "," 50%,\n    "," 50%,\n    "," 100%\n  );\n  background-repeat: repeat-x;\n  background-size: 25pc 25pc;\n  width: 200%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 2;\n"]);return Ne=function(){return e},e}function Be(){var e=Object(je.a)(["\n  0% {\n    transform: translateX(0)\n  }\n  to {\n    transform: translateX(-400px)\n  }\n"]);return Be=function(){return e},e}var Re=Object(De.b)(Be()),Le=Object(De.a)("div")(Ne(),Re,"rgba(74, 242, 161, 1.00)","rgba(140, 169, 197, 1.00)","rgba(140, 169, 197, 1.00)","rgba(74, 242, 161, 1.00)","rgba(74, 242, 161, 1.00)");function Ie(e){var t=window.localStorage.getItem(e);if(null!==t){var n=JSON.parse(t),a=n.dbcFilename,s=n.dbcText;return{dbc:new R.a(s),dbcText:s,dbcFilename:a}}return null}function Ae(e,t){var n=t.dbcFilename,a=t.dbc,s=JSON.stringify({dbcFilename:n,dbcText:a.text()});window.localStorage.setItem(e,s)}var Ge="gh_auth_token";var Ue=n(230),Fe=n.n(Ue),Xe=function(){function e(){Object(S.a)(this,e),this.socket=Fe()(D.j)}return Object(E.a)(e,[{key:"seek",value:function(e,t,n){this.socket.emit("seek",e,t,n)}}]),e}();n(126);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve=n(525),ze=n(526),Ye=n(527),Ke=n(528),Je=n(529),qe=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(y.a)(this,Object(O.a)(t).call(this,e))).partChangeDebounced=J((function(){var e=Object(r.a)(n.state.currentParts,2),t=e[0],a=e[1],s=We({},n.state.messages),i=60*t,o=60*a+60;Object.keys(s).forEach((function(e){for(var t=s[e].entries,n=0,a=t.length-1;n<t.length&&t[n].relTime<i;)n++;for(;a>n&&t[a].relTime>o;)a--;(n>0||a<t.length-1)&&(s[e].entries=t.slice(n,a+1))})),n.setState({messages:s}),n.spawnWorker()}),500),n.state={messages:{},selectedMessages:[],route:null,canFrameOffset:0,firstCanTime:null,lastBusTime:null,selectedMessage:null,currentParts:[0,0],currentPart:0,currentWorkers:{},loadingParts:[],loadedParts:[],showOnboarding:!1,showLoadDbc:!1,showSaveDbc:!1,showEditMessageModal:!1,editMessageModalMessage:null,dbc:e.dbc?e.dbc:new R.a,dbcText:e.dbc?e.dbc.text():(new R.a).text(),dbcFilename:e.dbcFilename?e.dbcFilename:"New_DBC",dbcLastSaved:null,seekTime:0,seekIndex:0,maxByteStateChangeCount:0,isLoading:!0,partsLoaded:0,spawnWorkerHash:null,attemptingPandaConnection:!1,pandaNoDeviceSelected:!1,live:!1,isGithubAuthenticated:null!==e.githubAuthToken&&void 0!==e.githubAuthToken,shareUrl:null,logUrls:null},n.openDbcClient=new Ce(e.githubAuthToken),D.k&&(n.unloggerClient=new Xe),n.showOnboarding=n.showOnboarding.bind(Object(k.a)(n)),n.hideOnboarding=n.hideOnboarding.bind(Object(k.a)(n)),n.showLoadDbc=n.showLoadDbc.bind(Object(k.a)(n)),n.hideLoadDbc=n.hideLoadDbc.bind(Object(k.a)(n)),n.showSaveDbc=n.showSaveDbc.bind(Object(k.a)(n)),n.hideSaveDbc=n.hideSaveDbc.bind(Object(k.a)(n)),n.showEditMessageModal=n.showEditMessageModal.bind(Object(k.a)(n)),n.hideEditMessageModal=n.hideEditMessageModal.bind(Object(k.a)(n)),n.onDbcSelected=n.onDbcSelected.bind(Object(k.a)(n)),n.onDbcSaved=n.onDbcSaved.bind(Object(k.a)(n)),n.onConfirmedSignalChange=n.onConfirmedSignalChange.bind(Object(k.a)(n)),n.onPartChange=n.onPartChange.bind(Object(k.a)(n)),n.onMessageFrameEdited=n.onMessageFrameEdited.bind(Object(k.a)(n)),n.onSeek=n.onSeek.bind(Object(k.a)(n)),n.onUserSeek=n.onUserSeek.bind(Object(k.a)(n)),n.onMessageSelected=n.onMessageSelected.bind(Object(k.a)(n)),n.onMessageUnselected=n.onMessageUnselected.bind(Object(k.a)(n)),n.initCanData=n.initCanData.bind(Object(k.a)(n)),n.updateSelectedMessages=n.updateSelectedMessages.bind(Object(k.a)(n)),n.handlePandaConnect=n.handlePandaConnect.bind(Object(k.a)(n)),n.processStreamedCanMessages=n.processStreamedCanMessages.bind(Object(k.a)(n)),n.onStreamedCanMessagesProcessed=n.onStreamedCanMessagesProcessed.bind(Object(k.a)(n)),n.showingModal=n.showingModal.bind(Object(k.a)(n)),n.lastMessageEntriesById=n.lastMessageEntriesById.bind(Object(k.a)(n)),n.githubSignOut=n.githubSignOut.bind(Object(k.a)(n)),n.downloadLogAsCSV=n.downloadLogAsCSV.bind(Object(k.a)(n)),n.pandaReader=new j.a,n.pandaReader.onMessage(n.processStreamedCanMessages),n}return Object(_.a)(t,e),Object(E.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.dongleId,a=t.name;if(p.a.isAuthenticated()&&!a)this.showOnboarding();else if(this.props.max&&this.props.url&&!this.props.exp&&!this.props.sig){var s=this.props,i=s.max,o=s.url,l=x()(a,"YYYY-MM-DD--H-m-s"),c={fullname:n+"|"+a,proclog:i,url:o,start_time:l};this.setState({route:c,currentParts:[0,Math.min(i,D.h-1)]},this.initCanData)}else if(n&&a){var u,d,h=n+"|"+a;u=this.props.url?Promise.resolve(this.props.url):f.drives.getRouteInfo(h).then((function(e){return e.url})),d=this.props.sig&&this.props.exp?f.raw.getLogUrls(h,{sig:this.props.sig,exp:this.props.exp}):f.raw.getLogUrls(h),Promise.all([u,d]).then((function(t){var n=Object(r.a)(t,2),s=n[0],i=n[1],o={route:{fullname:h,proclog:i.length-1,start_time:x()(a,"YYYY-MM-DD--H-m-s"),url:s},currentParts:[0,Math.min(i.length-1,D.h-1)],logUrls:i};e.setState(o,e.initCanData),f.drives.getShareSignature(h).then((function(t){return e.setState({shareUrl:Object(N.b)({add:{exp:t.exp,sig:t.sig,max:i.length-1,url:s},remove:[D.c]})})}))})).catch((function(t){console.error(t),e.showOnboarding()}))}else this.showOnboarding()}},{key:"initCanData",value:function(){var e=this,t=this.state.route,n=new Ke;n.postMessage({partCount:t.proclog,base:t.url}),n.onmessage=function(t){if("error"in t.data)e.spawnWorker();else{var n=t.data,a=n.canFrameOffset,s=n.firstCanTime;e.setState({canFrameOffset:a,firstCanTime:s},(function(){e.spawnWorker()}))}}}},{key:"onDbcSelected",value:function(e,t){var n=this,a=this.state.route;this.hideLoadDbc(),this.persistDbc({dbcFilename:e,dbc:t}),a?this.setState({dbc:t,dbcFilename:e,dbcText:t.text(),partsLoaded:0,selectedMessage:null,messages:{}},(function(){n.spawnWorker()})):this.setState({dbc:t,dbcFilename:e,dbcText:t.text(),messages:{}})}},{key:"onDbcSaved",value:function(e){var t=x()();this.setState({dbcLastSaved:t,dbcFilename:e}),this.hideSaveDbc()}},{key:"downloadLogAsCSV",value:function(){console.log("downloadLogAsCSV:start");var e=this.state.dbcFilename,t=Object(T.createWriteStream)("".concat(e.replace(/\.dbc/g,"-")).concat(+new Date,".csv")).getWriter(),n=new TextEncoder;return this.state.live?this.downloadLiveLogAsCSV(a):this.downloadRawLogAsCSV(a);function a(e){var a=e.data,s=a.logData,i=a.shouldClose,r=a.progress;if(i)return console.log("downloadLogAsCSV:close"),void t.close();console.log("CSV export progress:",r);var o=n.encode(s+"\n");t.write(o)}}},{key:"downloadRawLogAsCSV",value:function(e){var t=this.state,n=t.firstCanTime,a=t.canFrameOffset,s=t.route,i=new ze;i.onmessage=e,i.postMessage({base:s.url,parts:[0,s.proclog],canStartTime:n-a})}},{key:"downloadLiveLogAsCSV",value:function(e){var t=this,n=this.state,a=n.firstCanTime,s=n.canFrameOffset,i=new ze;i.onmessage=e,i.postMessage({data:Object.keys(this.state.messages).map((function(e){var n=t.state.messages[e];return{id:n.id,bus:n.bus,address:n.address,entries:n.entries.slice()}})),canStartTime:a-s})}},{key:"addAndRehydrateMessages",value:function(e,t){t=t||{};var n=We({},this.state.messages);for(var a in e)if(!0!==t.replace&&a in n){var s=n[a].entries,i=e[a].entries,r=s.length,o=i.length,l=r+o;n[a].entries=Array(l);for(var c=0,u=0,d=0;d<l;++d)u>=o?n[a].entries[d]=s[c++]:c>=r?n[a].entries[d]=i[u++]:s[c].relTime<=i[u].relTime?n[a].entries[d]=s[c++]:s[c].relTime>=i[u].relTime&&(n[a].entries[d]=i[u++]);n[a].byteStateChangeCounts=e[a].byteStateChangeCounts}else n[a]=e[a],n[a].frame=this.state.dbc.getMessageFrame(n[a].address);return n}},{key:"cancelWorker",value:function(e){var t=We({},this.state.currentWorkers),n=t[e],a=n.worker,s=n.part,i=this.state.loadingParts.filter((function(e){return e!==s})),r=this.state.loadedParts.filter((function(e){return e!==s}));delete t[e],console.log("Stoping worker",e,"for part",s),a.postMessage({action:"terminate"}),this.setState({currentWorkers:t,loadingParts:i,loadedParts:r})}},{key:"spawnWorker",value:function(e){var t=this,n=this.state,a=n.currentParts,s=n.currentWorkers;console.log("Checking worker for",a),this.state.isLoading||this.setState({isLoading:!0});var i=Object(r.a)(a,2),o=i[0],l=i[1];Object.keys(s).forEach((function(e){(s[e].part<o||s[e].part>l)&&t.cancelWorker(e)})),s=We({},this.state.currentWorkers);var c=this.state,u=c.loadingParts,d=c.loadedParts,h=c.currentPart;u=u.filter((function(e){return e>=o&&e<=l})),d=d.filter((function(e){return e>=o&&e<=l}));for(var g=-1,m=Object.keys(s).map((function(e){return s[e].part})),p=0;p<=l-o;++p){var f=h+p;if(f>l&&(f=o+(f-o)%(l-o+1)),-1===m.indexOf(f)){g=f;break}}if(-1===g)return console.log("Loading complete"),void this.setState({isLoading:!1});console.log("Starting worker for part",g);var b=(e=e||{}).prevMsgEntries,S=this.state,E=S.dbc,y=S.dbcFilename,O=S.route,k=S.firstCanTime,_=S.canFrameOffset,C=S.maxByteStateChangeCount;if(!b){var x=this.state.messages;b={},Object.keys(x).forEach((function(e){var t=x[e].entries;b[e]=t[t.length-1]}))}var M=new Ve,w=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString(16)}(Math.random().toString(16));s[w]={part:g,worker:M},u=[g].concat(Object(v.a)(u)),this.setState({currentWorkers:s,loadingParts:u}),M.onmessage=function(e){if(void 0!==t.state.currentWorkers[w]){if(t.state.dbcFilename===y){var n=e.data,a=n.newMessages,s=n.maxByteStateChangeCount,i=n.isFinished;s>t.state.maxByteStateChangeCount?t.setState({maxByteStateChangeCount:s}):s=t.state.maxByteStateChangeCount;var r=t.addAndRehydrateMessages(a,s),o={};for(var l in a)o[l]=a[l].entries[a[l].entries.length-1];if(i){var c=t.state.loadingParts.filter((function(e){return e!==g})),u=[g].concat(Object(v.a)(t.state.loadedParts));t.setState({messages:r,partsLoaded:t.state.partsLoaded+1,loadingParts:c,loadedParts:u},(function(){t.spawnWorker({prevMsgEntries:o,spawnWorkerHash:w,prepend:!1})}))}else t.setState({messages:r})}}else console.log("Worker was canceled")},M.postMessage({base:O.url,num:g,isDemo:this.props.isDemo,isLegacyShare:this.props.isLegacyShare,logUrls:this.state.logUrls,dbcText:E.text(),route:O.fullname,part:g,canStartTime:null!=k?k-_:null,prevMsgEntries:b,maxByteStateChangeCount:C})}},{key:"showingModal",value:function(){var e=this.state,t=e.showOnboarding,n=e.showLoadDbc,a=e.showSaveDbc,s=e.showAddSignal,i=e.showEditMessageModal;return t||n||a||s||i}},{key:"showOnboarding",value:function(){this.setState({showOnboarding:!0})}},{key:"hideOnboarding",value:function(){this.setState({showOnboarding:!1})}},{key:"showLoadDbc",value:function(){this.setState({showLoadDbc:!0})}},{key:"hideLoadDbc",value:function(){this.setState({showLoadDbc:!1})}},{key:"showSaveDbc",value:function(){this.setState({showSaveDbc:!0})}},{key:"hideSaveDbc",value:function(){this.setState({showSaveDbc:!1})}},{key:"reparseMessages",value:function(e){var t=this;this.setState({isLoading:!0});var n=this.state.dbc,a=new Ye;a.onmessage=function(e){var n=e.data;n=t.addAndRehydrateMessages(n,{replace:!0}),t.setState({messages:n,isLoading:!1})},a.postMessage({messages:e,dbcText:n.text(),canStartTime:this.state.firstCanTime})}},{key:"updateMessageFrame",value:function(e,t){var n=this.state.messages;n[e].frame=t,this.setState({messages:n})}},{key:"persistDbc",value:function(e){var t=e.dbcFilename,n=e.dbc,a=this.state.route;Ae(a?a.fullname:"live",{dbcFilename:t,dbc:n})}},{key:"onConfirmedSignalChange",value:function(e,t){var n=this,a=this.state,s=a.dbc,i=a.dbcFilename;s.setSignals(e.address,We({},t)),this.updateMessageFrame(e.id,s.getMessageFrame(e.address)),this.persistDbc({dbcFilename:i,dbc:s});var r={},o=We({},e),l=s.getMessageFrame(e.address);o.frame=l,r[e.id]=o,this.setState({dbc:s,dbcText:s.text()},(function(){return n.reparseMessages(r)}))}},{key:"onPartChange",value:function(e){var t=this.state,n=t.currentParts,a=t.currentPart,s=t.canFrameOffset,i=t.route;if(-1!==s&&e!==a){var r=Math.min(i.proclog,e+1),o=Math.max(0,r-D.h+1);0===o&&(r=Math.min(i.proclog,2));n[1],n[0];n=[o,r],(a=e)===this.state.currentPart&&n[0]===this.state.currentParts[0]&&n[1]===this.state.currentParts[1]||this.setState({currentParts:n,currentPart:a},this.partChangeDebounced)}}},{key:"showEditMessageModal",value:function(e){var t=this.state.messages[e];t.frame||(t.frame=this.state.dbc.createFrame(t.address)),this.setState({showEditMessageModal:!0,editMessageModalMessage:e,messages:this.state.messages,dbcText:this.state.dbc.text()})}},{key:"hideEditMessageModal",value:function(){this.setState({showEditMessageModal:!1})}},{key:"onMessageFrameEdited",value:function(e){var t=this.state,n=t.messages,a=t.dbcFilename,s=t.dbc,i=t.editMessageModalMessage,r=Object.assign({},n[i]);r.frame=e,s.messages.set(e.id,e),this.persistDbc({dbcFilename:a,dbc:s}),n[i]=r,this.setState({messages:n,dbc:s,dbcText:s.text()}),this.hideEditMessageModal()}},{key:"onSeek",value:function(e,t){this.setState({seekIndex:e,seekTime:t});var n=~~(t/60);n!==this.state.currentPart&&this.onPartChange(n)}},{key:"onUserSeek",value:function(e){D.k&&this.unloggerClient.seek(this.props.dongleId,this.props.name,e);var t,n=this.state.messages[this.state.selectedMessage];n?-1===(t=n.entries.findIndex((function(t){return t.relTime>=e})))&&(t=0):t=0,this.onSeek(t,e)}},{key:"onMessageSelected",value:function(e){var t=this.state,n=t.seekTime,a=t.seekIndex,s=t.messages[e];n>0&&s.entries.length>0&&(-1===(a=s.entries.findIndex((function(e){return e.relTime>=n})))&&(a=0),n=s.entries[a].relTime),this.setState({seekTime:n,seekIndex:a,selectedMessage:e})}},{key:"updateSelectedMessages",value:function(e){this.setState({selectedMessages:e})}},{key:"onMessageUnselected",value:function(e){this.setState({selectedMessage:null})}},{key:"loginWithGithub",value:function(){var e=this.state.route;return d.a.createElement("a",{href:B(e&&e.fullname?e.fullname:""),className:"button button--dark button--inline"},d.a.createElement("i",{className:"fa fa-github"}),d.a.createElement("span",null," Log in with Github"))}},{key:"lastMessageEntriesById",value:function(e,t){var n=Object(r.a)(t,2),a=n[0],s=n[1];return e[a]=s.entries[s.entries.length-1],e}},{key:"processStreamedCanMessages",value:function(e){var t=this.state.dbcText,n=this.state,a=n.firstCanTime,s=n.lastBusTime,i=n.messages,o=n.maxByteStateChangeCount,l=Object.entries(i).reduce(this.lastMessageEntriesById,{}),c=Object.entries(i).reduce((function(e,t){var n=Object(r.a)(t,2),a=n[0],s=n[1];return e[a]=s.byteStateChangeCounts,e}),{});this.canStreamerWorker.postMessage({newCanMessages:e,prevMsgEntries:l,firstCanTime:a,dbcText:t,lastBusTime:s,byteStateChangeCountsByMessage:c,maxByteStateChangeCount:o})}},{key:"firstEntryIndexInsideStreamingWindow",value:function(e){for(var t=e[e.length-1].relTime-D.i,n=0;n<e.length;n++)if(e[n].relTime>t)return n;return 0}},{key:"enforceStreamingMessageWindow",value:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var a=t[n],s=e[a];if(!(s.entries.length<2))if(s.entries[s.entries.length-1].relTime-s.entries[0].relTime>D.i){var i=this.firstEntryIndexInsideStreamingWindow(s.entries);s.entries=s.entries.slice(i),e[a]=s}}return e}},{key:"_onStreamedCanMessagesProcessed",value:function(e){var t=e.newMessages,n=e.seekTime,a=e.lastBusTime,s=e.firstCanTime,i=e.maxByteStateChangeCount;i<this.state.maxByteStateChangeCount&&(i=this.state.maxByteStateChangeCount);var r=this.addAndRehydrateMessages(t);r=this.enforceStreamingMessageWindow(r);var o=this.state,l=o.seekIndex,c=o.selectedMessages;c.length>0&&void 0!==r[c[0]]&&(l=Math.max(0,r[c[0]].entries.length-1)),this.setState({messages:r,seekTime:n,seekIndex:l,lastBusTime:a,firstCanTime:s,maxByteStateChangeCount:i})}},{key:"onStreamedCanMessagesProcessed",value:function(e){this._onStreamedCanMessagesProcessed(e.data)}},{key:"handlePandaConnect",value:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,i,r,o=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({attemptingPandaConnection:!0,live:!0}),(n=Ie("live"))&&(a=n.dbc,i=n.dbcText,this.setState({dbc:a,dbcText:i})),this.canStreamerWorker=new Je,this.canStreamerWorker.onmessage=this.onStreamedCanMessagesProcessed,r=this.pandaReader.onError((function(e){console.error(e.stack||e),o.setState({attemptingPandaConnection:!1})})),e.prev=6,e.next=9,this.pandaReader.start();case 9:this.setState({showOnboarding:!1,showLoadDbc:!0}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:this.setState({attemptingPandaConnection:!1}),r();case 16:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"githubSignOut",value:function(e,t){window.localStorage.removeItem(Ge),this.setState({isGithubAuthenticated:!1}),e.preventDefault()}},{key:"render",value:function(){return d.a.createElement("div",{id:"cabana",className:w()({"is-showing-modal":this.showingModal()})},this.state.isLoading?d.a.createElement(Le,{isLoading:this.state.isLoading}):null,d.a.createElement("div",{className:"cabana-header"},d.a.createElement("a",{className:"cabana-header-logo",href:""},"Comma Cabana"),d.a.createElement("div",{className:"cabana-header-account"},this.state.isGithubAuthenticated?d.a.createElement("div",null,d.a.createElement("p",null,"GitHub Authenticated"),d.a.createElement("p",{className:"cabana-header-account-signout",onClick:this.githubSignOut},"Sign out")):this.loginWithGithub())),d.a.createElement("div",{className:"cabana-window"},d.a.createElement(U,{url:this.state.route?this.state.route.url:null,messages:this.state.messages,selectedMessages:this.state.selectedMessages,updateSelectedMessages:this.updateSelectedMessages,showEditMessageModal:this.showEditMessageModal,currentParts:this.state.currentParts,onMessageSelected:this.onMessageSelected,onMessageUnselected:this.onMessageUnselected,showLoadDbc:this.showLoadDbc,showSaveDbc:this.showSaveDbc,dbcFilename:this.state.dbcFilename,dbcLastSaved:this.state.dbcLastSaved,dongleId:this.props.dongleId,name:this.props.name,route:this.state.route,seekTime:this.state.seekTime,seekIndex:this.state.seekIndex,shareUrl:this.state.shareUrl,maxByteStateChangeCount:this.state.maxByteStateChangeCount,isDemo:this.props.isDemo,live:this.state.live,saveLog:J(this.downloadLogAsCSV,500)}),this.state.route||this.state.live?d.a.createElement(be,{url:this.state.route?this.state.route.url:null,live:this.state.live,messages:this.state.messages,selectedMessage:this.state.selectedMessage,onConfirmedSignalChange:this.onConfirmedSignalChange,onSeek:this.onSeek,onUserSeek:this.onUserSeek,canFrameOffset:this.state.canFrameOffset,firstCanTime:this.state.firstCanTime,seekTime:this.state.seekTime,seekIndex:this.state.seekIndex,currentParts:this.state.currentParts,selectedPart:this.state.currentPart,partsLoaded:this.state.partsLoaded,autoplay:this.props.autoplay,showEditMessageModal:this.showEditMessageModal,onPartChange:this.onPartChange,routeStartTime:this.state.route?this.state.route.start_time:x()(),partsCount:this.state.route?this.state.route.proclog:0}):null),this.state.showOnboarding?d.a.createElement(Ee,{handlePandaConnect:this.handlePandaConnect,attemptingPandaConnection:this.state.attemptingPandaConnection,routes:this.state.routes}):null,this.state.showLoadDbc?d.a.createElement(Te,{onDbcSelected:this.onDbcSelected,handleClose:this.hideLoadDbc,openDbcClient:this.openDbcClient,loginWithGithub:this.loginWithGithub()}):null,this.state.showSaveDbc?d.a.createElement(xe,{dbc:this.state.dbc,sourceDbcFilename:this.state.dbcFilename,onDbcSaved:this.onDbcSaved,handleClose:this.hideSaveDbc,openDbcClient:this.openDbcClient,hasGithubAuth:null!==this.props.githubAuthToken,loginWithGithub:this.loginWithGithub()}):null,this.state.showEditMessageModal?d.a.createElement(Pe,{handleClose:this.hideEditMessageModal,handleSave:this.onMessageFrameEdited,message:this.state.messages[this.state.editMessageModalMessage]}):null)}}]),t}(u.Component),Qe=new R.a('\nVERSION ""\n\n\nNS_ :\n    NS_DESC_\n    CM_\n    BA_DEF_\n    BA_\n    VAL_\n    CAT_DEF_\n    CAT_\n    FILTER\n    BA_DEF_DEF_\n    EV_DATA_\n    ENVVAR_DATA_\n    SGTYPE_\n    SGTYPE_VAL_\n    BA_DEF_SGTYPE_\n    BA_SGTYPE_\n    SIG_TYPE_REF_\n    VAL_TABLE_\n    SIG_GROUP_\n    SIG_VALTYPE_\n    SIGTYPE_VALTYPE_\n    BO_TX_BU_\n    BA_DEF_REL_\n    BA_REL_\n    BA_DEF_DEF_REL_\n    BU_SG_REL_\n    BU_EV_REL_\n    BU_BO_REL_\n    SG_MUL_VAL_\n\nBS_:\n\nBU_: INTERCEPTOR EBCM NEO ADAS PCM EPS VSA SCM BDY XXX\n\n\nBO_ 57 XXX_1: 3 XXX\n\nBO_ 145 XXX_2: 8 XXX\n SG_ LAT_ACCEL : 7|10@0+ (0.02,-512) [-20|20] "m/s2" NEO\n\nBO_ 228 STEERING_CONTROL: 5 ADAS\n SG_ STEER_TORQUE : 7|16@0- (1,0) [-3840|3840] "" EPS\n SG_ STEER_TORQUE_REQUEST : 23|1@0+ (1,0) [0|1] "" EPS\n SG_ SET_ME_X00 : 31|8@0+ (1,0) [0|0] "" EPS\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] "" EPS\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] "" EPS\n\nBO_ 304 GAS_PEDAL2: 8 PCM\n SG_ ENGINE_TORQUE_ESTIMATE : 7|16@0- (1,0) [-1000|1000] "Nm" NEO\n SG_ ENGINE_TORQUE_REQUEST : 23|16@0- (1,0) [-1000|1000] "Nm" NEO\n SG_ CAR_GAS : 39|8@0+ (1,0) [0|255] "" NEO\n\nBO_ 316 GAS_PEDAL: 8 PCM\n SG_ CAR_GAS : 39|8@0+ (1,0) [0|255] "" NEO\n\nBO_ 342 STEERING_SENSORS: 6 EPS\n SG_ STEER_ANGLE : 7|16@0- (-0.1,0) [-500|500] "deg" NEO\n SG_ STEER_ANGLE_RATE : 23|16@0- (1,0) [-3000|3000] "deg/s" NEO\n SG_ COUNTER : 45|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 43|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 344 POWERTRAIN_DATA: 8 PCM\n SG_ XMISSION_SPEED : 7|16@0+ (0.002759506,0) [0|70] "m/s" NEO\n SG_ ENGINE_RPM : 23|16@0+ (1,0) [0|15000] "rpm" NEO\n SG_ XMISSION_SPEED2 : 39|16@0+ (0.002759506,0) [0|70] "m/s" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n SG_ ODOMETER : 55|8@0+ (1,0) [0|255] "" XXX\n\nBO_ 380 POWERTRAIN_DATA2: 8 PCM\n SG_ PEDAL_GAS : 7|8@0+ (1,0) [0|255] "" NEO\n SG_ ENGINE_RPM : 23|16@0+ (1,0) [0|15000] "rpm" NEO\n SG_ GAS_PRESSED : 39|1@0+ (1,0) [0|1] "" NEO\n SG_ ACC_STATUS : 38|1@0+ (1,0) [0|1] "rpm" NEO\n SG_ BOH_17C : 37|5@0+ (1,0) [0|1] "rpm" NEO\n SG_ BRAKE_SWITCH : 32|1@0+ (1,0) [0|1] "rpm" NEO\n SG_ BOH2_17C : 47|10@0+ (1,0) [0|1] "rpm" NEO\n SG_ BRAKE_PRESSED : 53|1@0+ (1,0) [0|1] "" NEO\n SG_ BOH3_17C : 52|5@0+ (1,0) [0|1] "rpm" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 398 XXX_3: 3 XXX\n\nBO_ 399 STEER_STATUS: 7 EPS\n SG_ STEER_TORQUE_SENSOR : 7|16@0- (1,0) [-31000|31000] "tbd" NEO\n SG_ STEER_TORQUE_MOTOR : 23|16@0- (1,0) [-31000|31000] "tbd" NEO\n SG_ STEER_STATUS : 39|4@0+ (1,0) [0|15] "" NEO\n SG_ STEER_CONTROL_ACTIVE : 35|1@0+ (1,0) [0|1] "" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 419 GEARBOX: 8 PCM\n SG_ GEAR : 7|8@0+ (1,0) [0|256] "" NEO\n SG_ GEAR_SHIFTER : 35|4@0+ (1,0) [0|15] "" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 420 VSA_STATUS: 8 VSA\n SG_ USER_BRAKE : 7|16@0+ (0.015625,-1.609375) [0|1000] "" NEO\n SG_ ESP_DISABLED : 28|1@0+ (1,0) [0|1] "" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 422 SCM_BUTTONS: 8 SCM\n SG_ CRUISE_BUTTONS : 7|3@0+ (1,0) [0|7] "" NEO\n SG_ LIGHTS_SETTING : 1|2@0+ (1,0) [0|3] "" NEO\n SG_ MAIN_ON : 47|1@0+ (1,0) [0|1] "" NEO\n SG_ CRUISE_SETTING : 43|2@0+ (1,0) [0|3] "" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 428 XXX_4: 8 XXX\n\nBO_ 432 STANDSTILL: 7 VSA\n SG_ WHEELS_MOVING : 12|1@0+ (1,0) [0|1] "" NEO\n SG_ BRAKE_ERROR_1 : 11|1@0+ (1,0) [0|1] "" NEO\n SG_ BRAKE_ERROR_2 : 9|1@0+ (1,0) [0|1] "" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 464 WHEEL_SPEEDS: 8 VSA\n SG_ WHEEL_SPEED_FL : 7|15@0+ (0.002759506,0) [0|70] "m/s" NEO\n SG_ WHEEL_SPEED_FR : 8|15@0+ (0.002759506,0) [0|70] "m/s" NEO\n SG_ WHEEL_SPEED_RL : 25|15@0+ (0.002759506,0) [0|70] "m/s" NEO\n SG_ WHEEL_SPEED_RR : 42|15@0+ (0.002759506,0) [0|70] "m/s" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 476 XXX_5: 4 XXX\n\nBO_ 490 VEHICLE_DYNAMICS: 8 VSA\n SG_ LONG_ACCEL : 23|16@0- (0.0015384,0) [-20|20] "m/s2" NEO\n\nBO_ 506 BRAKE_COMMAND: 8 ADAS\n SG_ COMPUTER_BRAKE : 7|10@0+ (0.003906248,0) [0|1] "" EBCM\n SG_ ZEROS_BOH : 13|5@0+ (1,0) [0|1] "" EBCM\n SG_ COMPUTER_BRAKE_REQUEST : 8|1@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_BOH2 : 23|3@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_OVERRIDE : 20|1@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_BOH3 : 19|1@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_FAULT_CMD : 18|1@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_CANCEL_CMD : 17|1@0+ (1,0) [0|1] "" EBCM\n SG_ COMPUTER_BRAKE_REQUEST_2 : 16|1@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_BOH4 : 31|8@0+ (1,0) [0|1] "" EBCM\n SG_ BRAKE_LIGHTS : 39|1@0+ (1,0) [0|1] "" EBCM\n SG_ CRUISE_BOH5 : 38|7@0+ (1,0) [0|1] "" EBCM\n SG_ CHIME : 47|3@0+ (1,0) [0|7] "" EBCM\n SG_ CRUISE_BOH6 : 44|1@0+ (1,0) [0|1] "" EBCM\n SG_ FCW : 43|2@0+ (1,0) [0|3] "" EBCM\n SG_ CRUISE_BOH7 : 41|10@0+ (1,0) [0|0] "" EBCM\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" EBCM\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" EBCM\n\nBO_ 512 GAS_COMMAND: 3 NEO\n SG_ GAS_COMMAND : 7|16@0+ (0.253984064,-83.3) [0|1] "" INTERCEPTOR\n SG_ COUNTER : 21|2@0+ (1,0) [0|3] "" INTERCEPTOR\n SG_ CHECKSUM : 19|4@0+ (1,0) [0|3] "" INTERCEPTOR\n\nBO_ 513 GAS_SENSOR: 5 INTERCEPTOR\n SG_ INTERCEPTOR_GAS : 7|16@0+ (0.253984064,-83.3) [0|1] "" NEO\n SG_ INTERCEPTOR_GAS2 : 23|16@0+ (0.126992032,-83.3) [0|1] "" NEO\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 542 XXX_6: 7 XXX\n\nBO_ 545 XXX_7: 4 XXX\n\nBO_ 597 ROUGH_WHEEL_SPEED: 8 VSA\n SG_ WHEEL_SPEED_FL : 7|8@0+ (1,0) [0|255] "mph" NEO\n SG_ WHEEL_SPEED_FR : 15|8@0+ (1,0) [0|255] "mph" NEO\n SG_ WHEEL_SPEED_RL : 23|8@0+ (1,0) [0|255] "mph" NEO\n SG_ WHEEL_SPEED_RR : 31|8@0+ (1,0) [0|255] "mph" NEO\n SG_ SET_TO_X55 : 47|8@0+ (1,0) [0|255] "" NEO\n\nBO_ 660 SCM_COMMANDS: 8 SCM\n SG_ RIGHT_BLINKER : 6|1@0+ (1,0) [0|1] "" NEO\n SG_ LEFT_BLINKER : 5|1@0+ (1,0) [0|1] "" NEO\n SG_ WIPERS_SPEED : 4|2@0+ (1,0) [0|3] "" NEO\n\nBO_ 773 SEATBELT_STATUS: 7 BDY\n SG_ SEATBELT_DRIVER_LAMP : 7|1@0+ (1,0) [0|1] "" NEO\n SG_ SEATBELT_DRIVER_LATCHED : 13|1@0+ (1,0) [0|1] "" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 777 XXX_8: 8 XXX\n\nBO_ 780 ACC_HUD: 8 ADAS\n SG_ PCM_SPEED : 7|16@0+ (0.002763889,0) [0|100] "m/s" BDY\n SG_ PCM_GAS : 23|7@0+ (1,0) [0|127] "" BDY\n SG_ ZEROS_BOH : 16|1@0+ (1,0) [0|255] "" BDY\n SG_ CRUISE_SPEED : 31|8@0+ (1,0) [0|255] "" BDY\n SG_ DTC_MODE : 39|1@0+ (1,0) [0|1] "" BDY\n SG_ BOH : 38|1@0+ (1,0) [0|1] "" BDY\n SG_ ACC_PROBLEM : 37|1@0+ (1,0) [0|1] "" BDY\n SG_ FCM_OFF : 36|1@0+ (1,0) [0|1] "" BDY\n SG_ BOH_2 : 35|1@0+ (1,0) [0|1] "" BDY\n SG_ FCM_PROBLEM : 34|1@0+ (1,0) [0|1] "" BDY\n SG_ RADAR_OBSTRUCTED : 33|1@0+ (1,0) [0|1] "" BDY\n SG_ ENABLE_MINI_CAR : 32|1@0+ (1,0) [0|1] "" BDY\n SG_ SET_ME_X03 : 47|2@0+ (1,0) [0|3] "" BDY\n SG_ HUD_LEAD : 45|2@0+ (1,0) [0|3] "" BDY\n SG_ BOH_3 : 43|1@0+ (1,0) [0|3] "" BDY\n SG_ BOH_4 : 42|1@0+ (1,0) [0|3] "" BDY\n SG_ BOH_5 : 41|1@0+ (1,0) [0|3] "" BDY\n SG_ CRUISE_CONTROL_LABEL : 40|1@0+ (1,0) [0|3] "" BDY\n SG_ HUD_DISTANCE_3 : 52|1@0+ (1,0) [0|1] "" BDY\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" BDY\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" BDY\n\nBO_ 800 XXX_9: 8 XXX\n\nBO_ 804 CRUISE: 8 PCM\n SG_ HUD_SPEED_KPH : 7|8@0+ (1,0) [0|255] "kph"  NEO\n SG_ HUD_SPEED_MPH : 15|8@0+ (1,0) [0|255] "mph"  NEO\n SG_ TRIP_FUEL_CONSUMED : 23|16@0+ (1,0) [0|255] "" NEO\n SG_ CRUISE_SPEED_PCM : 39|8@0+ (1,0) [0|255] "" NEO\n SG_ BOH2 : 47|8@0- (1,0) [0|255] "" NEO\n SG_ BOH3 : 55|8@0+ (1,0) [0|255] "" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 808 XXX_10: 8 XXX\n\nBO_ 819 XXX_11: 7 XXX\n\nBO_ 821 XXX_12: 5 XXX\n\nBO_ 829 LKAS_HUD_2: 5 ADAS\n SG_ CAM_TEMP_HIGH : 7|1@0+ (1,0) [0|255] "" BDY\n SG_ BOH : 23|2@0+ (1,0) [0|4] "" BDY\n SG_ DASHED_LANES : 14|1@0+ (1,0) [0|1] "" BDY\n SG_ DTC : 13|1@0+ (1,0) [0|1] "" BDY\n SG_ LKAS_PROBLEM : 12|1@0+ (1,0) [0|1] "" BDY\n SG_ LKAS_OFF : 11|1@0+ (1,0) [0|1] "" BDY\n SG_ SOLID_LANES : 10|1@0+ (1,0) [0|1] "" BDY\n SG_ LDW_RIGHT : 9|1@0+ (1,0) [0|1] "" BDY\n SG_ STEERING_REQUIRED : 8|1@0+ (1,0) [0|1] "" BDY\n SG_ LDW_PROBLEM : 21|1@0+ (1,0) [0|1] "" BDY\n SG_ BEEP : 17|2@0+ (1,0) [0|1] "" BDY\n SG_ LDW_ON : 28|1@0+ (1,0) [0|1] "" BDY\n SG_ LDW_OFF : 27|1@0+ (1,0) [0|1] "" BDY\n SG_ CLEAN_WINDSHIELD : 26|1@0+ (1,0) [0|1] "" BDY\n SG_ SET_ME_X48 : 31|8@0+ (1,0) [0|255] "" BDY\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] "" BDY\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] "" BDY\n\nBO_ 882 XXX_13: 2 XXX\n\nBO_ 884 XXX_14: 7 XXX\n\nBO_ 887 XXX_15: 8 XXX\n\nBO_ 888 XXX_16: 8 XXX\n\nBO_ 892 CRUISE_PARAMS: 8 PCM\n SG_ CRUISE_SPEED_OFFSET : 31|8@0- (0.1,0) [-128|127] "kph"  NEO\n\nBO_ 923 XXX_18: 2 XXX\n\nBO_ 929 XXX_19: 4 XXX\n\nBO_ 983 XXX_20: 8 XXX\n\nBO_ 985 XXX_21: 3 XXX\n\nBO_ 1024 XXX_22: 5 XXX\n\nBO_ 1027 XXX_23: 5 XXX\n\nBO_ 1029 DOORS_STATUS: 8 BDY\n SG_ DOOR_OPEN_FL : 37|1@0+ (1,0) [0|1] "" NEO\n SG_ DOOR_OPEN_FR : 38|1@0+ (1,0) [0|1] "" NEO\n SG_ DOOR_OPEN_RL : 39|1@0+ (1,0) [0|1] "" NEO\n SG_ DOOR_OPEN_RR : 40|1@0+ (1,0) [0|1] "" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] "" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] "" NEO\n\nBO_ 1030 XXX_24: 5 VSA\n\nBO_ 1034 XXX_25: 5 XXX\n\nBO_ 1036 XXX_26: 8 XXX\n\nBO_ 1039 XXX_27: 8 XXX\n\nBO_ 1057 XXX_28: 5 EPS\n\nBO_ 1064 XXX_29: 7 XXX\n\nBO_ 1108 XXX_30: 8 XXX\n\nBO_ 1365 XXX_31: 5 XXX\n\nBO_ 1600 XXX_32: 5 XXX\n\nBO_ 1601 XXX_33: 8 XXX\n\nBO_TX_BU_ 228 : NEO,ADAS;\nBO_TX_BU_ 506 : NEO,ADAS;\nBO_TX_BU_ 780 : NEO,ADAS;\nBO_TX_BU_ 829 : NEO,ADAS;\n\nCM_ SG_ 419 GEAR "10 = reverse, 11 = transition";\nCM_ SG_ 490 LONG_ACCEL "wheel speed derivative, noisy and zero snapping";\nCM_ SG_ 780 CRUISE_SPEED "255 = no speed";\nCM_ SG_ 804 CRUISE_SPEED_PCM "255 = no speed";\nCM_ SG_ 829 BEEP "beeps are pleasant, chimes are for warnngs etc...";\nVAL_ 399 STEER_STATUS 5 "fault" 4 "no_torque_alert_2" 2 "no_torque_alert_1" 0 "normal" ;\nVAL_ 419 GEAR_SHIFTER 10 "S" 4 "D" 3 "N" 2 "R" 1 "P" ;\nVAL_ 422 CRUISE_BUTTONS 7 "tbd" 6 "tbd" 5 "tbd" 4 "accel_res" 3 "decel_set" 2 "cancel" 1 "main" 0 "none" ;\nVAL_ 422 LIGHTS_SETTING 3 "high_beam" 2 "low_beam" 1 "position" 0 "no_lights" ;\nVAL_ 422 CRUISE_SETTING 3 "distance_adj" 2 "tbd" 1 "lkas_button" 0 "none" ;\nVAL_ 506 CHIME 4 "double_chime" 3 "single_chime" 2 "continuous_chime" 1 "repeating_chime" 0 "no_chime" ;\nVAL_ 506 FCW 3 "fcw" 2 "fcw" 1 "fcw" 0 "no_fcw" ;\nVAL_ 780 HUD_LEAD 3 "no_car" 2 "solid_car" 1 "dashed_car" 0 "no_car" ;\nVAL_ 829 BEEP 3 "single_beep" 2 "triple_beep" 1 "repeated_beep" 0 "no_beep" ;\n\nCM_ "CHFFR_METRIC 342 STEER_ANGLE STEER_ANGLE 0.36 180; CHFFR_METRIC 380 ENGINE_RPM ENGINE_RPM 1 0; CHFFR_METRIC 804 ENGINE_TEMPERATURE ENGINE_TEMPERATURE 1 0";\n');n(530);c.init();var Ze=Object(N.a)("route"),$e=!Ze,et={autoplay:!0,isDemo:$e},tt=null;if(Ze){var nt=Ze.split("|"),at=Object(r.a)(nt,2),st=at[0],it=at[1];et.dongleId=st,et.name=it,tt=Ie(Ze);var rt=Object(N.a)("max"),ot=Object(N.a)("url"),lt=Object(N.a)("exp"),ct=Object(N.a)("sig");rt&&(et.max=Number(rt)),ot&&(et.url=ot),lt&&(et.exp=lt),ct&&(et.sig=ct),et.isLegacyShare=rt&&ot&&!lt&&!ct,et.isShare=rt&&ot&&lt&&ct}else Object(N.a)("demo")&&(et.max=12,et.url="https://chffrprivate.blob.core.windows.net/chffrprivate3-permanent/v2/cb38263377b873ee/78392b99580c5920227cc5b43dff8a70_2017-06-12--18-51-47",et.name="2017-06-12--18-51-47",et.dongleId="cb38263377b873ee",et.dbc=Qe,et.isDemo=!0,et.dbcFilename="acura_ilx_2016_can.dbc");if(tt){var ut=tt,dt=ut.dbcFilename,ht=ut.dbc;et.dbc=ht,et.dbcFilename=dt}var gt,mt=Object(N.a)(D.c);if(null!==mt){et.githubAuthToken=mt,gt=mt,window.localStorage.setItem(Ge,gt);var pt=Object(N.b)({remove:[D.c]});window.location.href=pt}else et.githubAuthToken=window.localStorage.getItem(Ge);function ft(){return(ft=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.init();case 2:(t=e.sent)&&f.request.configure(t),g.a.render(d.a.createElement(qe,et),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Ze||$e)!function(){ft.apply(this,arguments)}();else{var vt=document.createElement("img");vt.src="/cabana/img/cabana.jpg",vt.style.width="100%";var bt=document.createComment("7/6/17");document.getElementById("root").appendChild(vt),document.getElementById("root").appendChild(bt)}},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),s=n(3),i=function(){function e(t){var n=t.name,s=t.id,i=void 0===s?0:s,r=t.size,o=void 0===r?0:r,l=t.transmitters,c=void 0===l?[]:l,u=t.extended,d=void 0===u?0:u,h=t.comment,g=void 0===h?null:h,m=t.signals,p=void 0===m?{}:m;Object(a.a)(this,e),Object.assign(this,{name:n,id:i,size:o,transmitters:c,extended:d,comment:g,signals:p})}return Object(s.a)(e,[{key:"nextNewTransmitterName",value:function(){var e,t=1;do{e="NEW_TRANSMITTER_"+t,t++}while(-1!==this.transmitters.indexOf(e));return e}},{key:"addTransmitter",value:function(){var e=this.nextNewTransmitterName();return this.transmitters.push(e),e}},{key:"header",value:function(){return"BO_ ".concat(this.id," ").concat(this.name,": ").concat(this.size," ")+"".concat(this.transmitters[0]||"XXX")}},{key:"text",value:function(){var e=Object.values(this.signals).map((function(e){return" "+e.text()})).join("\n");return e.length>0?this.header()+"\n"+e:this.header()}},{key:"copy",value:function(){var e=Object.assign(Object.create(this),this);return e}}]),e}()},59:function(e,t,n){"use strict";if("undefined"===typeof a)var a=self;var s=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},i=function(){return"undefined"!==typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest};function r(e){var t,n=e.trace?(Math.random()+Math.PI).toString(36).substring(2,10):null,r=e.page_info,o=e.token,l=e.print,c=e.no_format,u="undefined"===typeof XDomainRequest?e.ssl:"https:"===a.location.protocol;t=(u?"https://":"http://")+(t=a.LEENDPOINT?a.LEENDPOINT:c?"webhook.logentries.com/noformat":"js.logentries.com/v1")+"/logs/"+o;var d=[],h=!1,g=!1,m=function e(n,a){h=!0;var s=i();s.constructor===XMLHttpRequest?s.onreadystatechange=function(){4===s.readyState&&(s.status>=400?(console.error("Couldn't submit events."),410===s.status&&console.warn("This version of le_js is no longer supported!")):(301===s.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),d.length>0?e(n,d.shift()):h=!1))}:s.onload=function(){d.length>0?e(n,d.shift()):h=!1},s.open("POST",t,!0),s.constructor===XMLHttpRequest&&(s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/json")),s.overrideMimeType&&s.overrideMimeType("text"),s.send(a)},p=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)throw new Error("No arguments!");return 1===e.length?e[0]:e},f=function(){var e=a.navigator||{doNotTrack:void 0},t=a.screen||{};return{url:(a.location||{}).pathname,referrer:document.referrer,screen:{width:t.width,height:t.height},window:{width:a.innerWidth,height:a.innerHeight},browser:{name:e.appName,version:e.appVersion,cookie_enabled:e.cookieEnabled,do_not_track:e.doNotTrack},platform:e.platform}},v=function e(t){var a=p.apply(this,arguments),i={event:a};return"never"!==r&&(g&&"per-entry"!==r||(g=!0,"undefined"===typeof a.screen&&"undefined"===typeof a.browser&&e(f()).level("PAGE").send())),n&&(i.trace=n),{level:function(e){if(l&&"undefined"!==typeof console&&"PAGE"!==e){var t=null;"undefined"!==typeof XDomainRequest&&(t=i.trace+" "+i.event);try{console[e.toLowerCase()].call(console,t||i)}catch(n){console.log(t||i)}}return i.level=e,{send:function(){var e=[],t=JSON.stringify(i,(function(t,n){if("undefined"===typeof n)return"undefined";if("object"===typeof n&&null!==n){if(-1!==s(e,n))return"<?>";e.push(n)}return n}));h?d.push(t):m(o,t)}}}}};if(e.catchall){var b=a.onerror;a.onerror=function(e,t,n){return v({error:e,line:n,location:t}).level("ERROR").send(),!!b&&b(e,t,n)}}this.log=v}function o(e){var t,n={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1,endpoint:null,token:null};if("object"!==typeof e)throw new Error("Invalid parameters for createLogStream()");for(var a in e)n[a]=e[a];if(null===n.token)throw new Error("Token not present.");t=new r(n);var s=function(e){if(t)return t.log.apply(this,arguments);throw new Error("You must call LE.init(...) first.")};return{log:function(){s.apply(this,arguments).level("LOG").send()},warn:function(){s.apply(this,arguments).level("WARN").send()},error:function(){s.apply(this,arguments).level("ERROR").send()},info:function(){s.apply(this,arguments).level("INFO").send()}}}var l={},c=function(e){if("string"!==typeof e.name)throw new Error("Name not present.");if(l.hasOwnProperty(e.name))throw new Error("A logger with that name already exists!");return l[e.name]=new o(e),!0};t.a={init:function(e){var t={name:"default"};if("object"===typeof e)for(var n in e)t[n]=e[n];else{if("string"!==typeof e)throw new Error("Invalid parameters for init()");t.token=e}return c(t)},createLogStream:c,to:function(e){if(!l.hasOwnProperty(e))throw new Error("Invalid name for logStream");return l[e]},destroy:function(e){"undefined"===typeof e&&(e="default"),delete l[e]},log:function(){for(var e in l)l[e].log.apply(this,arguments)},warn:function(){for(var e in l)l[e].warn.apply(this,arguments)},error:function(){for(var e in l)l[e].error.apply(this,arguments)},info:function(){for(var e in l)l[e].info.apply(this,arguments)}}},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var a=n(10),s=n(56),i=n(38);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={"CarState:WheelSpeeds":{FrontLeftWheel:d({index:0,factor:.001}),FrontRightWheel:d({index:1,factor:.001}),RearLeftWheel:d({index:2,factor:.001}),RearRightWheel:d({index:3,factor:.001})},"CarState:Ego":{VEgo:d({index:0,factor:.001}),AEgo:d({index:1,factor:.001}),VEgoRaw:d({index:2,factor:.001}),YawRate:d({index:3,factor:.001})},"CarState:Controls":{SteeringAngle:u({index:0,factor:.001}),Brake:d({index:2,factor:.001}),Gas:d({index:3,factor:.001})},"CarState:Flags":{LeftBlinker:g({index:0}),RightBlinker:g({index:1}),GenericToggle:g({index:2}),DoorOpen:g({index:3}),SeatbeltUnlatched:g({index:4}),GasPressed:g({index:5}),BrakeLights:g({index:6}),SteeringPressed:g({index:7}),Standstill:g({index:8}),"CruiseState.Enabled":g({index:9}),"CruiseState.Available":g({index:10}),"CruiseState.Standstill":g({index:11}),GearShifter:{startBit:15,size:4,unsigned:!0},"CruiseState.Speed":h({index:2})},"UbloxGnss:MeasurementReport":{RcvTow:u({index:0}),GpsWeek:d({index:2}),LeapSeconds:{startBit:55,size:8},NumMeas:{startBit:63,size:8}},"Health:Data":{Voltage:d({index:0}),Current:h({index:2}),Started:g({index:24}),ControlsAllowed:g({index:25}),GasInterceptorDetected:g({index:26}),StartedSignalDetected:g({index:27})},"Thermal:CPU":{Cpu0:d({index:0,unsigned:!0}),Cpu1:d({index:1,unsigned:!0}),Cpu2:d({index:2,unsigned:!0}),Cpu3:d({index:3,unsigned:!0})},"Thermal:Data":{Mem:d({index:0,unsigned:!0}),Gpu:d({index:1,unsigned:!0}),FanSpeed:d({index:2,unsigned:!0}),BatteryPercent:h({index:6,unsigned:!0}),UsbOnline:g({index:56}),Started:g({index:57})},"Thermal:FreeSpace":{FreeSpace:u({index:0,unsigned:!0,factor:1e-9})}},c=[];function u(e){return o({},e,{size:32,startBit:32*e.index+7})}function d(e){return o({},e,{size:16,startBit:16*e.index+7})}function h(e){return o({},e,{size:8,startBit:8*e.index+7})}function g(e){return o({},e,{size:1,startBit:e.index,unsigned:!0})}function m(e){return e>=4096?c[e-4096]:null}function p(e){return!!m(e)}function f(e){var t=m(e);return new s.a({id:t,name:t,size:8,signals:l[t]})}Object.keys(l).forEach((function(e){Object.keys(l[e]).forEach((function(t){var n;l[e][t]=(n=o({name:t},l[e][t]),new i.a({name:n.name,startBit:n.startBit,size:n.size,isLittleEndian:!1,isSigned:!n.unsigned,factor:n.factor||1,offset:n.offset||0,unit:n.unit||""}))})),function(e){var t=c.indexOf(e);if(-1===t)return c.push(e),c.indexOf(e)+4096}(e)}))}},[[232,1,2]]]);
//# sourceMappingURL=main.541caf9f.chunk.js.map