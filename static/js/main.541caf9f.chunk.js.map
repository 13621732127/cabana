{"version":3,"sources":["utils/object.js","models/can/BoardUnit.js","utils/css.js","utils/color.js","config.js","utils/dbc.js","logging/CloudLog.js","components/AddSignals.js","utils/url.js","components/SignalLegendEntry/FIELDS.js","components/SignalLegendEntry/Field.js","components/SignalLegendEntry/SignalForm.js","components/SignalLegendEntry/NumberField.js","components/SignalLegendEntry/OptionField.js","components/SignalLegendEntry/StringField.js","components/SignalLegendEntry/ColorBar.js","components/SignalLegendEntry/index.js","components/SignalLegend.js","models/can/dbc.js","models/can/signal.js","images/webusb-enable-experimental-features.png","images/webusb-enable-webusb.png","workers/rlog-downloader.worker.js","workers/dbc-csv-downloader.worker.js","workers/message-parser.worker.js","workers/can-offset-finder.worker.js","workers/CanStreamerWorker.worker.js","logging/Sentry.js","api/github-auth.js","components/MessageBytes.js","components/Meta.js","utils/array.js","models/graph-data.js","vega/CanPlot.js","utils/debounce.js","components/CanGraph.js","components/CanGraphList.js","components/HLS.js","components/PlayButton.js","components/RouteSeeker/RouteSeeker.js","components/RouteVideoSync.js","components/CanLog.js","models/can/entries.js","components/PartSelector.js","components/PlaySpeedSelector.js","components/Explorer.js","components/Modals/baseModal.js","components/Modals/OnboardingModal.js","api/OpenDbc.js","components/SaveDbcModal.js","components/GithubDbcList.js","components/DbcUpload.js","components/LoadDbcModal.js","components/EditMessageModal.js","components/LoadingBar.js","api/localstorage.js","api/unlogger.js","CanExplorer.js","utils/string.js","acura-dbc.js","index.js","models/can/frame.js","logging/LogEntries.js","models/can/logSignals.js"],"names":["swapKeysAndValues","obj","f","Object","keys","reduce","acc","k","BoardUnit","name","this","attributes","comment","styles","classes","forEach","call","arguments","it","_definition","_name","push","classNames","apply","css","shade","opacity","r","g","b","t","opacityPos","Math","abs","round","GITHUB_CLIENT_ID","GITHUB_REDIRECT_URL","GITHUB_AUTH_TOKEN_KEY","OPENDBC_SOURCE_REPO","USE_UNLOGGER","window","getUrlParameter","UNLOGGER_HOST","LOGENTRIES_TOKEN","PART_SEGMENT_LENGTH","CAN_GRAPH_MAX_POINTS","STREAMING_WINDOW","EXPLORER_URL","createMessageSpec","dbc","address","id","bus","frame","getMessageFrame","size","entries","byteColors","Array","fill","byteStateChangeCounts","createMessageEntry","time","relTime","data","byteStateChangeTimes","signals","getSignalValues","hexData","Buffer","from","toString","updated","Date","now","parseMessage","timeStart","lastParsedMessage","msgSpec","msgSize","i","length","substr","determineByteStateChangeTimes","msgEntry","BIG_ENDIAN_START_BITS","j","bigEndianBitIndex","matrixBitIndex","indexOf","addCanMessage","canMessage","canStartTime","messages","prevMsgEntries","byteStateChangeCountsByMessage","busTime","undefined","prevMsgEntry","every","c","map","count","idx","matrixBitNumber","bigEndianIndex","findMaxByteStateChangeCount","values","m","counts","countArr","concat","count1","count2","setMessageByteColors","message","maxByteStateChangeCount","isNaN","min","red","CloudLog","LogEntries","init","token","no_format","catchall","context","update","level","global","__JEST__","entry","ctx","created","getTime","msg","src","log","warn","error","emit","Styles","StyleSheet","create","bit","margin","padding","userSelect","cursor","textAlign","position","bitSelectedStyle","backgroundColor","bitSignificance","fontSize","display","bottom","left","right","highlightedSignalTitle","AddSignals","props","updateSignalStyles","signalStyles","calcSignalStyles","state","setState","onSignalHover","signal","highlightedSignal","onBitHover","bitIdx","dragStartBit","dragSignal","copySignals","assign","startBit","isLittleEndian","msbBitIndex","DbcUtils","lsbBitNumber","diff","bitDescription","floor","lsbBitIndex","dragCurrentBit","onSignalHoverEnd","resetDragState","onTentativeSignalChange","onSignalChange","oldSignal","signalName","uid","propagateUpSignalChange","onSignalRemove","onSignalPlotChange","shouldPlot","signalUid","bits","signalsCopy","nextProps","nextState","messageIndex","JSON","stringify","plottedSignalUids","colorRgbStr","colors","darkenedColors","lightenedColors","join","colorsCommaSep","color","signalColorStyle","filter","existingNames","signalNum","Signal","nextNewSignalName","dragEndBit","signalForBit","isDragAcrossSingleByte","createSignal","createSignalIfNotExtendingOne","byteIdx","byteBitIdx","readInt8","bigEndianStartBit","bigEndianCurrentBit","bigEndianBitIdx","rowCount","rows","rowBits","bitStyle","bitDesc","isMsb","isLsb","bitIsContainedInSelection","className","bitValue","key","onMouseEnter","onMouseLeave","onMouseDown","onBitMouseDown","bind","onMouseUp","onBitMouseUp","onDoubleClick","onBitDoubleClick","byteValueHex","cellSpacing","onConfirmedSignalChange","toFixed","isLogEvent","renderBitMatrix","Component","objToQuery","encodeURIComponent","decodeURIComponent","location","replace","results","RegExp","exec","search","modifyQueryParameters","add","remove","params","value","origin","pathname","unsignedTransformation","field","Number","title","type","transform","options","optionValues","Little","Big","startByte","endByte","Signed","Unsigned","Field","htmlFor","children","FieldMap","number","valueCol","fieldSpec","isExpanded","signalEdited","updateField","num","onChange","e","target","option","valueOptions","optionEles","opt","defaultValue","string","getSignalEdited","FIELDS","Node","onClick","styled","isHighlighted","rgb","SignalLegendEntry","signalCopy","toggleEditing","fieldSpecForName","parseInt","toggleExpandSignal","stopPropagation","toggleSignalPlot","isPlotted","preventDefault","equals","expandedEntryClass","plottedButtonClass","cx","ColorBar","SignalForm","find","SignalLegend","expandedSignals","s","includes","updatedExpandedSignals","signalRows","sort","signal1","signal2","checkExpandedSignal","row","a","UINT64","require","DBC_COMMENT_RE","DBC_COMMENT_MULTI_LINE_RE","MSG_RE","SIGNAL_RE","MP_SIGNAL_RE","VAL_RE","VAL_TABLE_RE","MSG_TRANSMITTER_RE","SIGNAL_COMMENT_RE","SIGNAL_COMMENT_MULTI_LINE_RE","MESSAGE_COMMENT_RE","MESSAGE_COMMENT_MULTI_LINE_RE","BOARD_UNIT_RE","BOARD_UNIT_COMMENT_RE","BOARD_UNIT_COMMENT_MULTI_LINE_RE","floatOrInt","numericStr","isInteger","parseFloat","DBC","dbcString","boardUnits","comments","Map","dbcText","importDbcString","LogSignals","get","messageNames","msgName","msgNum","boardUnitNames","bu","missingBoardUnits","arr","receiver","receivers","recv","array","updateBoardUnits","txt","_newSymbols","text","frames","transmitters","slice","addr","txs","signalsByMsgId","sig","s1","s2","msgAddr","valueDescriptions","valueDescriptionText","trim","msgId","Frame","nextNewFrameName","set","newMsg","createFrame","warnings","valueTables","followUp","lines","split","line","followUpLine","partialComment","matches","match","idString","transmitter","isSigned","factor","offset","max","unit","receiverStr","signalProperties","messageId","vals","description","table","tableName","items","hasFollowUp","newBoardUnits","boardUnitName","boardUnit","signalSpec","dataBitPos","blen","wordSize","gSize","swappedWords","word","swapOrder","rightHandAnd","pow","ival","shiftr","and","toNumber","buf","shiftAmount","signalValue","bitPos","byteOffset","readUInt32LE","readUInt32BE","has","buffer","paddedBuffer","paddedDataHex","rightPad","signalValuesByName","valueForInt64Signal","valueForInt32Signal","metricComment","metric","metrics","metricName","isFloat","multiplex","random","calculateMin","calculateMax","generateColors","byteOrder","signedChar","str","desc","bitIndex","bitRange","bitNumber","start","range","littleEndianBitDescription","bigEndianBitDescription","rawRange","rawMin","calculateRawRange","rawMax","otherSignal","v","module","exports","Worker","opts","__webpack_hash__","Raven","config","install","authorizeUrl","route","client_id","redirect_uri","scope","MessageBytes","isVisible","lastMessageIndex","lastSeekTime","onVisibilityChange","onCanvasRefAvailable","live","nextLastEntry","curLastEntry","seekTime","frameForTime","seekIndex","updateCanvas","mostRecentMessageIndex","findIndex","canvas","mostRecentMsg","findMostRecentMessage","getContext","fillStyle","fillRect","font","fillText","ref","width","devicePixelRatio","height","scale","ckmeans","Meta","onFilterChanged","onFilterFocus","onFilterUnfocus","canMsgFilter","logEventMsgFilter","renderMessageBytes","toggleShowLogEvents","dbcLastSaved","filterText","lastSaved","fromNow","hoveredMessages","orderedMessageKeys","showLogEvents","lastSavedTimer","setInterval","clearInterval","nextMsgKeys","sortMessages","byteCountsDidUpdate","prevMessages","nextMessages","some","messagesByEntryCount","partialMapping","entryCountKey","entryCounts","bin","entryCount","partial","msg1","msg2","reverse","val","toLowerCase","selectedMessages","onMessageUnselected","updateSelectedMessages","onMessageSelected","selectedMessageClass","colSpan","Fragment","orderedMessages","cellPadding","renderLogEventMessages","renderCanMessages","navigator","ReadableStream","WritableStream","dbcFilename","lastSavedPretty","saveable","showLoadDbc","saveLog","shareUrl","data-clipboard-text","data-clipboard-action","Clipboard","href","showSaveDbc","style","float","checked","onFocus","onBlur","renderAvailableMessagesList","elementWiseEquals","arr1","arr2","ele","findIndexRight","condition","_calcGraphData","firstCanTime","console","samples","skip","lastEntry","x","y","appendNewGraphData","plottedSignals","graphData","plottedMessages","plottedMessageIds","index","maxGraphTime","series","signalUidsByMessageId","graphDataMaxMessageTimes","signalUids","maxIndex","ArrayUtils","newGraphData","firstNewEntryIdx","newEntries","signalGraphData","messageIdOutOfBounds","graphDataLowerBound","$schema","top","on","events","source","expr","fields","ops","as","scales","domain","zero","clamp","domainRaw","axes","orient","labelOverlap","marks","interactive","encode","enter","facet","groupby","interpolate","hover","fillOpacity","clip","stroke","strokeWidth","x2","y2","group","test","fontWeight","debounce","func","wait","immediate","timeout","args","later","callNow","clearTimeout","setTimeout","DefaultPlotInnerStyle","CanGraph","updateBounds","view","bounds","run","insertData","changeset","insert","change","plotInnerStyle","shiftX","shiftY","isDataInserted","getGraphData","spec","getGraphSpec","onNewView","onSignalClickTime","onSignalSegment","onDragAnchorMouseDown","onDragAnchorMouseUp","onDragStart","onPlotResize","firstRelTime","lastRelTime","messageRelTime","GraphData","CanPlotSpec","domainMin","segment","domainMax","newSegment","prevProps","canReceiveGraphDrop","dragPos","runAfter","updateStyleFromDragPos","plottedSignal","segmentIsNew","currentTime","runAsync","oldProps","oldState","clickTime","onRelativeTimeClick","isArray","onSegmentChanged","getState","subcontext","brush","rect","container","getBoundingClientRect","clientX","clientY","persist","plotInnerStyleFromMouseEvent","onDragEnd","canReceiveDropClass","onGraphRefAvailable","messageName","unplot","background","onResize","measureRef","Vega","logLevel","signalListeners","renderer","actions","emptyTable","CanGraphList","draggingSignal","dragShift","graphToReceiveDrop","plotListRef","plotRefs","renderSignalPlot","onPlotListRefReady","onGraphDragStart","onGraphDragEnd","onMouseMove","draggingGraph","determineDraggingGraph","hidden","document","elementFromPoint","closestPlot","closest","closestPlotRef","isEqualNode","mergePlots","fromPlot","toPlot","isDragging","addCanGraphRef","onSignalUnplotPressed","onGraphTimeClick","HLS","onSeeking","playing","onLoadStart","onPlaySeek","videoElement","shouldInitVideoTime","onSeeked","startTime","onLoadEnd","playbackRate","playbackSpeed","loadSource","paused","play","pause","player","Hls","disablePtsDtsCorrectionInMp4Remux","attachMedia","onVideoElementAvailable","destroy","video","autoPlay","muted","onWaiting","onPlaying","PlayButton","isPlaying","process","onPause","onPlay","imageSource","alt","onMouseOver","RouteSeeker","updateDraggingSeek","ratio","onUserSeek","seekedBarStyle","zeroSeekedBarStyle","markerStyle","hiddenMarkerStyle","tooltipStyle","hiddenTooltipStyle","tooltipTime","executePlayTimer","segmentIndices","videoLength","newRatio","updateSeekedBar","nearestFrameTime","segmentProgress","cancelAnimationFrame","playTimer","progressBar","offsetWidth","markerOffsetPct","mouseEventXOffsetPercent","markerWidth","tooltipWidth","ratioTime","requestAnimationFrame","duration","roundTime","loadingOverlay","justifyContent","alignItems","zIndex","loadingSpinner","img","hls","seekBar","RouteVideoSync","shouldShowJpeg","isLoading","shouldRestartHls","onHlsRestart","userSeekIndex","canFrameOffset","userSeekTime","url","sec","RouteApi","getJpegUrl","funcSeekToRatio","nearestFrameUrl","VideoApi","getRearCameraStreamIndexUrl","playSpeed","onVideoClick","shouldRestart","onRestart","CanLog","expandedMessages","messageHeights","allPacketsExpanded","renderLogListItemMessage","addDisplayedMessages","renderLogListItem","renderLogList","onExpandAllChanged","toggleExpandAllPackets","curMessageLength","nextMessageLength","newLength","ITEMS_PER_PAGE","msgIdx","onMessageExpanded","expMsgTime","plot","plotted","onSignalPlotPressed","msgIsExpanded","isMessageExpanded","msgHasSignals","isSignalPlotted","plottedButtonText","signalValuePretty","hasSignalsClass","expandedClass","toggleExpandPacketSignals","renderLogListItemSignals","expandAllText","expandAllClass","itemRenderer","itemsRenderer","listLength","pageSize","updateWhenThisValueChanges","findTimeIndex","findRelativeTimeIndex","findSegmentIndices","isRelative","segmentTimeLow","segmentTimeHi","timeIndexFunc","segmentIdxLow","upperSegmentIdxHi","segmentIdxHi","selectedPartStyle","makePartStyle","partsCount","selectNextPart","selectPrevPart","onSelectedPartDragStart","onSelectedPartMouseMove","onSelectedPartDragEnd","selectedPart","PartSelector","selectorWidth","part","onPartChange","selectPart","selectorRect","addEventListener","partAtClientX","removeEventListener","selector","PlaySpeedSelector","onPlaySpeedChanged","currentTarget","Explorer","updateSegment","selectedMessage","Entries","currentParts","shouldShowAddSignal","autoplay","showAddSignal","_onKeyDown","toggleShouldShowAddSignal","changePlaySpeed","keyCode","resetSegment","nextMessage","segmentStartIdx","segmentEndIdx","segmentStartTime","segmentEndTime","curMessage","messageExists","signalExists","nextSeekTime","clipSegment","nextSeekMsgEntry","routeStartTime","partStartOffset","partEndOffset","windowStartTime","clone","format","windowEndTime","newPlottedSignals","l","indexFromSeekTime","onSeek","selectedMessageKey","selectedMessageName","showEditMessageModal","onClose","selectedMessagePlottedSignalUids","fromPlotIdx","splice","toPlotIdx","signalsExpandedClass","graphSegment","renderExplorerSignals","renderSelectMessagePrompt","Modal","windowHeight","modalHeight","updateHeights","contentRect","innerHeight","variations","variation","disableClose","readVariationClasses","checkClosability","checkYScrollability","handleClose","subtitle","navigation","footer","OnboardingModal","webUsbEnabled","usb","viewingUsbInstructions","pandaConnected","attemptPandaConnection","toggleUsbInstructions","navigateToExplorer","handlePandaConnect","drive","can","attemptingPandaConnection","CommaAuth","isAuthenticated","renderLogin","renderPandaEligibility","instructionalImages","step2","step3","renderUsbInstructions","renderOnboardingOptions","rel","renderModalFooter","renderModalContent","OpenDBC","github","GitHub","sourceRepo","getRepo","githubUsername","fetchGithubUsername","getUser","user","getProfile","profile","login","repoFullName","repo","username","repoName","getContents","response","content","path","dbcPath","fileContents","rawContentsUrl","download_url","fetch","cache","resp","repoDetails","full_name","getGithubUsername","openDbcFork","getDetails","repoDetailResp","repoSourceIsOpenDbc","fork","status","contents","commitMessage","getRef","refResp","getCommit","object","sha","headCommitResp","headCommit","getTree","tree","headTreeResp","headTree","mode","createTree","createTreeResp","createdTree","commit","commitResp","updateHead","updateHeadResp","SaveDbcModal","tab","sourceDbcFilename","tabs","commitToGitHub","downloadDbcFile","forkOpenDbcAndWait","renderForkButton","renderTabNavigation","renderActions","openDbcClient","getUserOpenDbcFork","filename","commitFile","onDbcSaved","blob","Blob","FileSaver","saveAs","isTimedOut","interval","then","disabled","hasGithubAuth","loginWithGithub","data-extension","renderForkStep","renderFilenameField","renderCommitMessage","renderTabContent","GithubDbcList","paths","selectedPath","pathQuery","updatePathQuery","list","getDbcContents","dbcContents","onDbcLoaded","placeholder","p","selectPath","DbcUpload","onTextChanged","LoadDbcModal","dbcSource","userOpenDbcRepo","handleSave","onDbcSelected","hasAuth","EditMessageModal","messageFrame","copy","editTransmitter","addTransmitter","keyframes","fetchPersistedDbc","routeName","maybeDbc","localStorage","getItem","parse","persistDbc","dbcJson","setItem","GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY","UnloggerClient","socket","SocketIO","dongleId","baseTime","seekSeconds","RLogDownloader","LogCSVDownloader","MessageParser","CanOffsetFinder","CanStreamerWorker","CanExplorer","partChangeDebounced","minPart","maxPart","minTime","maxTime","minIndex","spawnWorker","lastBusTime","currentPart","currentWorkers","loadingParts","loadedParts","showOnboarding","editMessageModalMessage","partsLoaded","spawnWorkerHash","pandaNoDeviceSelected","isGithubAuthenticated","githubAuthToken","logUrls","OpenDbc","unloggerClient","hideOnboarding","hideLoadDbc","hideSaveDbc","hideEditMessageModal","onMessageFrameEdited","initCanData","processStreamedCanMessages","onStreamedCanMessagesProcessed","showingModal","lastMessageEntriesById","githubSignOut","downloadLogAsCSV","pandaReader","Panda","onMessage","exp","Moment","fullname","proclog","start_time","urlPromise","logUrlsPromise","Promise","resolve","DrivesApi","getRouteInfo","RawDataApi","getLogUrls","all","initData","newState","getShareSignature","shareSignature","catch","err","offsetFinder","postMessage","partCount","base","onmessage","writer","createWriteStream","getWriter","encoder","TextEncoder","downloadLiveLogAsCSV","dataHandler","downloadRawLogAsCSV","logData","shouldClose","progress","close","uint8array","write","handler","worker","parts","sourceId","newMessages","msgEntries","newMsgEntries","msgLength","newMsgLength","entryLength","msgIndex","newMsgIndex","workerHash","action","cancelWorker","allWorkerParts","partOffset","tempPart","hash","charCodeAt","isFinished","addAndRehydrateMessages","prepend","isDemo","isLegacyShare","setSignals","updateMessageFrame","newMessage","reparseMessages","msgKey","seek","GithubAuth","newCanMessages","canStreamerWorker","windowFloor","messageIds","newEntryFloor","firstEntryIndexInsideStreamingWindow","enforceStreamingMessageWindow","_onStreamedCanMessagesProcessed","persistedDbc","unlisten","onError","stack","dataArray","removeItem","LoadingBar","routes","AcuraDbc","Sentry","routeFullName","isShare","authTokenQueryParam","urlNoAuthToken","Request","configure","ReactDOM","render","getElementById","createElement","createComment","appendChild","extended","txName","txNum","nextNewTransmitterName","header","self","_indexOf","_getAjaxObject","XDomainRequest","XMLHttpRequest","LogStream","_endpoint","_traceCode","trace","PI","substring","_pageInfo","page_info","_token","_print","print","_noFormat","_SSL","ssl","protocol","LEENDPOINT","_backlog","_active","_sentPageInfo","_apiCall","request","constructor","onreadystatechange","readyState","shift","onload","open","setRequestHeader","overrideMimeType","send","_getEvent","prototype","Error","_agentInfo","nav","doNotTrack","screen","referrer","innerWidth","browser","appName","version","appVersion","cookie_enabled","cookieEnabled","do_not_track","platform","_rawLog","event","serialized","ex","oldHandler","onerror","Logger","logger","dict","endpoint","_log","info","loggers","_createLogStream","hasOwnProperty","createLogStream","to","signalMap","FrontLeftWheel","shortSignal","FrontRightWheel","RearLeftWheel","RearRightWheel","VEgo","AEgo","VEgoRaw","YawRate","SteeringAngle","longSignal","Brake","Gas","LeftBlinker","boolSignal","RightBlinker","GenericToggle","DoorOpen","SeatbeltUnlatched","GasPressed","BrakeLights","SteeringPressed","Standstill","GearShifter","unsigned","charSignal","RcvTow","GpsWeek","LeapSeconds","NumMeas","Voltage","Current","Started","ControlsAllowed","GasInterceptorDetected","StartedSignalDetected","Cpu0","Cpu1","Cpu2","Cpu3","Mem","Gpu","FanSpeed","BatteryPercent","UsbOnline","FreeSpace","ADDRESS_LIST","nameForAddress","isLogAddress","frameForAddress","addressForName"],"mappings":"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","file":"static/js/main.541caf9f.chunk.js","sourcesContent":["export function swapKeysAndValues(obj, f) {\n  return Object.keys(obj).reduce(function(acc, k) {\n    acc[obj[k]] = k;\n    return acc;\n  }, {});\n}\n\nexport function fromArray(arr) {\n  // arr is an array of array key-value pairs\n  // like [['a', 1], ['b', 2]]\n\n  const pairs = arr.map(([k, v]) => ({ [k]: v }));\n  if (pairs.length > 0) {\n    return Object.assign(...pairs);\n  } else {\n    return {};\n  }\n}\n","export default class BoardUnit {\n  constructor(name) {\n    this.name = name;\n    this.attributes = {};\n    this.comment = null;\n  }\n\n  text() {\n    return this.name;\n  }\n}\n","// Wrapper of aphrodite css() function\n// that supports string class names in\n// addition to style objects.\n\n// Useful for component testing\n\nimport { css } from \"aphrodite\";\nimport classNames from \"classnames\";\n\nexport default function() {\n  const styles = [];\n  const classes = [];\n\n  [].forEach.call(arguments, it => {\n    if (it && it._definition && it._name) styles.push(it);\n    else classes.push(it);\n  });\n\n  return classNames.apply(null, [...classes, css(styles)]);\n}\n","export function shade([r, g, b], opacity) {\n  /*\n    @param {Array} rgb\n    @param {Number} opacity -1.0 -> +1.0\n        negative opacity will darken image\n\n    returns new RGB array\n    */\n  const t = opacity < 0 ? 0 : 255;\n  const opacityPos = Math.abs(opacity);\n\n  return [\n    Math.round((t - r) * opacityPos) + r,\n    Math.round((t - g) * opacityPos) + g,\n    Math.round((t - b) * opacityPos) + b\n  ];\n}\n","import { getUrlParameter } from \"./utils/url\";\n\nconst ENV = process.env.NODE_ENV === \"production\" ? \"prod\" : \"debug\";\n\nconst ENV_GITHUB_CLIENT_ID = {\n  debug: \"f1e42d14f45491f9ca34\",\n  prod: \"4b43250e7499a97d62a5\"\n};\nexport const GITHUB_CLIENT_ID = ENV_GITHUB_CLIENT_ID[ENV];\n\nconst ENV_GITHUB_REDIRECT_URL = {\n  debug: \"http://127.0.0.1:1235/callback\",\n  prod: \"https://api.comma.ai/cabana/ghcallback\"\n};\nexport const GITHUB_REDIRECT_URL = ENV_GITHUB_REDIRECT_URL[ENV];\nexport const GITHUB_AUTH_TOKEN_KEY = \"gh_access_token\";\nexport const OPENDBC_SOURCE_REPO = \"commaai/opendbc\";\n\nexport const USE_UNLOGGER =\n  typeof window !== \"undefined\" && getUrlParameter(\"unlogger\") !== null;\nexport const UNLOGGER_HOST = \"http://localhost:8080/unlogger\";\n\nexport const LOGENTRIES_TOKEN = \"4bc98019-8277-4fe0-867c-ed21ea843cc5\";\n\nexport const PART_SEGMENT_LENGTH = 3;\n\nexport const CAN_GRAPH_MAX_POINTS = 5000;\n\nexport const STREAMING_WINDOW = 60;\n\nconst ENV_EXPLORER_URL = {\n  debug: \"http://127.0.0.1:3000/\",\n  prod: \"https://my.comma.ai/\"\n};\nexport const EXPLORER_URL = ENV_EXPLORER_URL[ENV];\n","function findMaxByteStateChangeCount(messages) {\n  return Object.values(messages)\n    .map(m => m.byteStateChangeCounts)\n    .reduce((counts, countArr) => counts.concat(countArr), []) // flatten arrays\n    .reduce((count1, count2) => (count1 > count2 ? count1 : count2), 0); // find max\n}\n\nfunction addCanMessage(\n  canMessage,\n  dbc,\n  canStartTime,\n  messages,\n  prevMsgEntries,\n  byteStateChangeCountsByMessage\n) {\n  var { address, busTime, data, bus } = canMessage;\n  var id = bus + \":\" + address.toString(16);\n\n  if (messages[id] === undefined)\n    messages[id] = createMessageSpec(dbc, address, id, bus);\n\n  const prevMsgEntry =\n    messages[id].entries.length > 0\n      ? messages[id].entries[messages[id].entries.length - 1]\n      : prevMsgEntries[id] || null;\n\n  if (\n    byteStateChangeCountsByMessage[id] &&\n    messages[id].byteStateChangeCounts.every(c => c === 0)\n  ) {\n    messages[id].byteStateChangeCounts = byteStateChangeCountsByMessage[id];\n  }\n\n  const { msgEntry, byteStateChangeCounts } = parseMessage(\n    dbc,\n    busTime,\n    address,\n    data,\n    canStartTime,\n    prevMsgEntry\n  );\n\n  messages[id].byteStateChangeCounts = byteStateChangeCounts.map(\n    (count, idx) => messages[id].byteStateChangeCounts[idx] + count\n  );\n\n  messages[id].entries.push(msgEntry);\n\n  return msgEntry;\n}\n\nfunction createMessageSpec(dbc, address, id, bus) {\n  const frame = dbc.getMessageFrame(address);\n  const size = frame ? frame.size : 8;\n\n  return {\n    address: address,\n    id: id,\n    bus: bus,\n    entries: [],\n    frame: frame,\n    byteColors: Array(size).fill(0),\n    byteStateChangeCounts: Array(size).fill(0)\n  };\n}\n\nfunction determineByteStateChangeTimes(\n  hexData,\n  time,\n  msgSize,\n  lastParsedMessage\n) {\n  const byteStateChangeCounts = Array(msgSize).fill(0);\n  let byteStateChangeTimes;\n\n  if (!lastParsedMessage) {\n    byteStateChangeTimes = Array(msgSize).fill(time);\n  } else {\n    byteStateChangeTimes = Array.from(lastParsedMessage.byteStateChangeTimes);\n\n    for (let i = 0; i < byteStateChangeTimes.length; i++) {\n      const currentData = hexData.substr(i * 2, 2),\n        prevData = lastParsedMessage.hexData.substr(i * 2, 2);\n\n      if (currentData !== prevData) {\n        byteStateChangeTimes[i] = time;\n        byteStateChangeCounts[i] = 1;\n      }\n    }\n  }\n\n  return { byteStateChangeTimes, byteStateChangeCounts };\n}\n\nfunction createMessageEntry(\n  dbc,\n  address,\n  time,\n  relTime,\n  data,\n  byteStateChangeTimes\n) {\n  return {\n    signals: dbc.getSignalValues(address, data),\n    time,\n    relTime,\n    hexData: Buffer.from(data).toString(\"hex\"),\n    byteStateChangeTimes,\n    updated: Date.now()\n  };\n}\n\nfunction parseMessage(dbc, time, address, data, timeStart, lastParsedMessage) {\n  let hexData;\n  if (typeof data === \"string\") {\n    hexData = data;\n    data = Buffer.from(data, \"hex\");\n  } else {\n    hexData = Buffer.from(data).toString(\"hex\");\n  }\n  const msgSpec = dbc.getMessageFrame(address);\n  const msgSize = msgSpec ? msgSpec.size : 8;\n  const relTime = time - timeStart;\n\n  const {\n    byteStateChangeTimes,\n    byteStateChangeCounts\n  } = determineByteStateChangeTimes(\n    hexData,\n    relTime,\n    msgSize,\n    lastParsedMessage\n  );\n  const msgEntry = createMessageEntry(\n    dbc,\n    address,\n    time,\n    relTime,\n    data,\n    byteStateChangeTimes\n  );\n\n  return { msgEntry, byteStateChangeCounts };\n}\n\nconst BIG_ENDIAN_START_BITS = [];\nfor (let i = 0; i < 64; i += 8) {\n  for (let j = 7; j > -1; j--) {\n    BIG_ENDIAN_START_BITS.push(i + j);\n  }\n}\n\nfunction bigEndianBitIndex(matrixBitIndex) {\n  return BIG_ENDIAN_START_BITS.indexOf(matrixBitIndex);\n}\n\nfunction matrixBitNumber(bigEndianIndex) {\n  return BIG_ENDIAN_START_BITS[bigEndianIndex];\n}\n\nfunction setMessageByteColors(message, maxByteStateChangeCount) {\n  message.byteColors = message.byteStateChangeCounts\n    .map(\n      count =>\n        isNaN(count)\n          ? 0\n          : Math.min(255, 75 + 180 * (count / maxByteStateChangeCount))\n    )\n    .map(red => \"rgb(\" + Math.round(red) + \",0,0)\");\n\n  return message;\n}\n\nexport default {\n  bigEndianBitIndex,\n  addCanMessage,\n  createMessageSpec,\n  matrixBitNumber,\n  parseMessage,\n  findMaxByteStateChangeCount,\n  setMessageByteColors,\n  createMessageEntry\n};\n","import LogEntries from \"./LogEntries\";\nimport { LOGENTRIES_TOKEN } from \"../config\";\n\nclass CloudLog {\n  constructor() {\n    LogEntries.init({\n      token: LOGENTRIES_TOKEN,\n      no_format: true,\n      catchall: false\n    });\n    this.context = {};\n  }\n\n  bind(obj) {\n    this.context.update(obj);\n  }\n\n  emit(message, level = \"log\") {\n    if (typeof global.__JEST__ !== \"undefined\") {\n      // Don't log in testing environment\n      return;\n    }\n\n    const entry = {\n      ctx: this.context,\n      created: new Date().getTime() / 1000,\n      msg: message,\n      src: \"JSCloudLog\"\n    };\n\n    if (level === \"log\") {\n      LogEntries.log(entry);\n    } else if (level === \"warn\") {\n      LogEntries.warn(entry);\n    } else if (level === \"error\") {\n      LogEntries.error(entry);\n    }\n  }\n\n  log(message) {\n    this.emit(message);\n  }\n\n  warn(message) {\n    this.emit(message, \"warn\");\n  }\n\n  error(message) {\n    this.emit(message, \"error\");\n  }\n}\n\nexport default new CloudLog();\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { StyleSheet } from \"aphrodite/no-important\";\nimport css from \"../utils/css\";\n\nimport SignalLegend from \"./SignalLegend\";\nimport Signal from \"../models/can/signal\";\nimport { shade } from \"../utils/color\";\nimport DbcUtils from \"../utils/dbc\";\n\n/*\nAddSignals component draws an 8x8 matrix\nrepresenting the bytes in a CAN message, alongside\na signal legend. Dragging on the matrix\neither extends or creates a signal, which is\nconfigurable in the legend.\n*/\n\nconst Styles = StyleSheet.create({\n  bit: {\n    margin: 0,\n    padding: 12,\n    userSelect: \"none\",\n    cursor: \"pointer\",\n    textAlign: \"center\",\n    position: \"relative\"\n  },\n  bitSelectedStyle: {\n    backgroundColor: \"rgba(0,119,158,0.5)\"\n  },\n  bitSignificance: {\n    fontSize: 12,\n    display: \"block\",\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n    margin: \"0 auto\"\n  },\n  highlightedSignalTitle: {\n    backgroundColor: \"rgba(0,0,0,0.2)\"\n  }\n});\n\nexport default class AddSignals extends Component {\n  static propTypes = {\n    message: PropTypes.object,\n    onConfirmedSignalChange: PropTypes.func,\n    messageIndex: PropTypes.number,\n    onSignalPlotChange: PropTypes.func,\n    plottedSignalUids: PropTypes.array\n  };\n\n  constructor(props) {\n    super(props);\n\n    let signals = {};\n    if (props.message && props.message.frame && props.message.frame.signals) {\n      signals = this.copySignals(props.message.frame.signals);\n    }\n\n    this.state = {\n      bits: [],\n      signals: signals,\n      signalStyles: this.calcSignalStyles(signals),\n      highlightedSignal: null,\n      dragStartBit: null,\n      dragSignal: null,\n      dragCurrentBit: null\n    };\n  }\n\n  copySignals(signals) {\n    return Object.entries(signals).reduce(\n      (signalsCopy, [signalName, signal]) => {\n        signalsCopy[signalName] = Object.assign(Object.create(signal), signal);\n        return signalsCopy;\n      },\n      {}\n    );\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      nextProps.message.hexData !== this.props.message.hexData ||\n      nextProps.messageIndex !== this.props.messageIndex ||\n      JSON.stringify(nextProps.plottedSignalUids) !==\n        JSON.stringify(this.props.plottedSignalUids) ||\n      JSON.stringify(this.state) !== JSON.stringify(nextState)\n    );\n  }\n\n  signalColorStyle(signal) {\n    const { colors } = signal;\n\n    let colorRgbStr, backgroundColor;\n    if (this.state && this.state.highlightedSignal === signal.name) {\n      // when signal highlighted,\n      // darkened background and lightened text.\n\n      const darkenedColors = shade(colors, -0.5);\n      const lightenedColors = shade(colors, 0.9);\n      colorRgbStr = `rgb(${lightenedColors.join(\",\")})`;\n      backgroundColor = `rgba(${darkenedColors.join(\",\")},0.5)`;\n    } else {\n      const colorsCommaSep = colors.join(\",\");\n      colorRgbStr = `rgb(${colorsCommaSep})`;\n      backgroundColor = `rgba(${colorsCommaSep},0.2)`;\n    }\n\n    const style = StyleSheet.create({\n      signal: { color: colorRgbStr, backgroundColor }\n    }).signal;\n    return style;\n  }\n\n  updateSignalStyles = () => {\n    const signalStyles = this.calcSignalStyles(this.state.signals);\n\n    this.setState({ signalStyles });\n  };\n\n  calcSignalStyles(signals) {\n    const signalStyles = {};\n    Object.values(signals).forEach(signal => {\n      signalStyles[signal.name] = this.signalColorStyle(signal);\n    });\n\n    return signalStyles;\n  }\n\n  componentWillReceiveProps({ message }) {\n    const isNewMessage = message.address !== this.props.message.address;\n    if (isNewMessage) {\n      const signals = message.frame ? message.frame.signals : {};\n\n      this.setState(\n        { signals: this.copySignals(signals) },\n        this.updateSignalStyles\n      );\n    }\n  }\n\n  signalForBit(bitIdx) {\n    // bitIdx in [0,64)\n    // returns instance of Signal\n\n    return Object.values(this.state.signals).filter(signal => {\n      return signal.bitDescription(bitIdx) !== null;\n    })[0];\n  }\n\n  onSignalHover = signal => {\n    if (!signal) return;\n\n    this.setState({ highlightedSignal: signal.name }, this.updateSignalStyles);\n  };\n\n  signalBitIndex(bitIdx, signal) {\n    // todo does this work for both big and little endian?\n    let { startBit } = signal;\n    if (!signal.isLittleEndian) {\n      startBit = DbcUtils.bigEndianBitIndex(startBit);\n    }\n    return bitIdx - startBit;\n  }\n\n  onBitHover = (bitIdx, signal) => {\n    let { dragStartBit, signals, dragSignal } = this.state;\n\n    if (dragStartBit !== null) {\n      if (dragSignal !== null) {\n        signals = this.copySignals(signals);\n        dragSignal = Object.assign(Object.create(dragSignal), dragSignal);\n\n        if (dragStartBit === dragSignal.startBit && dragSignal.size > 1) {\n          if (!dragSignal.isLittleEndian) {\n            // should not be able to drag the msb past the lsb\n            const hoveredBigEndian = DbcUtils.bigEndianBitIndex(bitIdx);\n            const lsbBigEndian = dragSignal.lsbBitNumber();\n\n            if (hoveredBigEndian > lsbBigEndian) {\n              return;\n            }\n          } else {\n            // should not be able to drag the lsb past the msb\n            if (bitIdx > dragSignal.msbBitIndex()) {\n              return;\n            }\n          }\n\n          const diff = bitIdx - dragStartBit;\n\n          if (dragSignal.isLittleEndian) {\n            dragSignal.size -= diff;\n          } else if (dragSignal.bitDescription(bitIdx) === null) {\n            dragSignal.size += Math.abs(diff);\n          } else {\n            dragSignal.size -= Math.abs(diff);\n          }\n\n          dragSignal.startBit += diff;\n\n          signals[dragSignal.name] = dragSignal;\n          dragStartBit = dragSignal.startBit;\n        } else if (dragSignal.size === 1) {\n          // 1-bit signals can be dragged in either direction\n          if (Math.floor(bitIdx / 8) === Math.floor(dragStartBit / 8)) {\n            if (bitIdx > dragStartBit) {\n              if (dragSignal.isLittleEndian) {\n                dragSignal.size = bitIdx - dragSignal.startBit;\n              } else {\n                dragSignal.startBit = bitIdx;\n                dragSignal.size = bitIdx - dragStartBit + 1;\n                dragStartBit = bitIdx;\n              }\n            } else {\n              if (dragSignal.isLittleEndian) {\n                dragSignal.startBit = bitIdx;\n                dragSignal.size = dragStartBit - bitIdx + 1;\n                dragStartBit = bitIdx;\n              } else {\n                dragSignal.size = dragStartBit - bitIdx + 1;\n                dragStartBit = bitIdx;\n              }\n            }\n          }\n\n          signals[dragSignal.name] = dragSignal;\n        } else if (\n          dragSignal.isLittleEndian &&\n          dragStartBit === dragSignal.msbBitIndex()\n        ) {\n          if (bitIdx < dragSignal.startBit) {\n            // should not be able to drag the MSB past the LSB\n            return;\n          }\n          const diff = bitIdx - dragStartBit;\n          if (dragSignal.bitDescription(bitIdx) === null) {\n            dragSignal.size += Math.abs(diff);\n          } else {\n            dragSignal.size -= Math.abs(diff);\n          }\n          signals[dragSignal.name] = dragSignal;\n          dragStartBit = dragSignal.msbBitIndex();\n        } else if (\n          !dragSignal.isLittleEndian &&\n          dragStartBit === dragSignal.lsbBitIndex()\n        ) {\n          const diff = bitIdx - dragStartBit;\n          if (dragSignal.bitDescription(bitIdx) === null) {\n            dragSignal.size += Math.abs(diff);\n          } else {\n            dragSignal.size -= Math.abs(diff);\n          }\n          signals[dragSignal.name] = dragSignal;\n          dragStartBit = dragSignal.lsbBitIndex();\n        }\n        this.setState({\n          signals,\n          dragSignal,\n          dragCurrentBit: bitIdx,\n          dragStartBit\n        });\n      } else {\n        this.setState({ dragCurrentBit: bitIdx });\n      }\n    }\n    if (signal) {\n      this.onSignalHover(signal);\n    }\n  };\n\n  onSignalHoverEnd = signal => {\n    if (!signal) return;\n\n    this.setState({ highlightedSignal: null }, this.updateSignalStyles);\n  };\n\n  nextNewSignalName() {\n    const existingNames = Object.keys(this.state.signals);\n    let signalNum = 1,\n      signalName;\n    do {\n      signalName = \"NEW_SIGNAL_\" + signalNum;\n      signalNum++;\n    } while (existingNames.indexOf(signalName) !== -1);\n\n    return signalName;\n  }\n\n  onBitMouseDown(dragStartBit, dragSignal) {\n    this.setState({\n      dragStartBit,\n      dragSignal: dragSignal || null\n    });\n  }\n\n  createSignal({ startBit, size, isLittleEndian }) {\n    const signal = new Signal({\n      name: this.nextNewSignalName(),\n      startBit,\n      size: size,\n      isLittleEndian\n    });\n    let { signals } = this.state;\n    signals = { ...signals };\n    signals[signal.name] = signal;\n\n    this.setState({ signals }, this.propagateUpSignalChange);\n  }\n\n  createSignalIfNotExtendingOne(dragStartBit, dragEndBit) {\n    if (this.state.dragSignal === null) {\n      // check for overlapping bits\n      for (let i = dragStartBit; i <= dragEndBit; i++) {\n        if (this.signalForBit(i) !== undefined) {\n          // Don't create signal if a signal is already defined in the selected range.\n          return;\n        }\n      }\n      const isDragAcrossSingleByte =\n        Math.floor(dragEndBit / 8) === Math.floor(dragStartBit / 8);\n      const isDragDirectionUp =\n        !isDragAcrossSingleByte && dragEndBit < dragStartBit;\n\n      let isLittleEndian;\n      if (isDragAcrossSingleByte || !isDragDirectionUp) {\n        isLittleEndian = dragStartBit % 8 < 4;\n      } else {\n        isLittleEndian = dragStartBit % 8 >= 4;\n      }\n      let size,\n        startBit = dragStartBit;\n\n      if (isDragAcrossSingleByte) {\n        size = Math.abs(dragEndBit - dragStartBit) + 1;\n      } else {\n        if (isLittleEndian) {\n          if (dragEndBit > dragStartBit) {\n            startBit = dragStartBit;\n            size = dragEndBit - dragStartBit + 1;\n          } else {\n            startBit = dragEndBit;\n            size = dragStartBit - dragEndBit + 1;\n          }\n        } else {\n          if (dragEndBit < dragStartBit) {\n            startBit = dragEndBit;\n          }\n          size =\n            Math.abs(\n              DbcUtils.bigEndianBitIndex(dragEndBit) -\n                DbcUtils.bigEndianBitIndex(dragStartBit)\n            ) + 1;\n        }\n      }\n\n      this.createSignal({ startBit, size, isLittleEndian });\n    }\n  }\n\n  onBitMouseUp(dragEndBit, signal) {\n    if (this.state.dragStartBit !== null) {\n      let { dragStartBit } = this.state;\n\n      if (dragEndBit !== dragStartBit) {\n        // one-bit signal requires double click\n        // see onBitDoubleClick\n        this.createSignalIfNotExtendingOne(dragStartBit, dragEndBit);\n      }\n      this.propagateUpSignalChange();\n      this.resetDragState();\n    }\n  }\n\n  byteValueHex(byteIdx) {\n    const { entries } = this.props.message;\n    if (this.props.messageIndex < entries.length) {\n      const entry = entries[this.props.messageIndex];\n\n      return entry.hexData.substr(byteIdx * 2, 2);\n    } else {\n      return \"--\";\n    }\n  }\n\n  bitValue(byteIdx, byteBitIdx) {\n    const { entries } = this.props.message;\n    if (this.props.messageIndex < entries.length) {\n      const entry = entries[this.props.messageIndex];\n      const data = Buffer.from(entry.hexData, \"hex\");\n      if (byteIdx >= data.length) {\n        return \"-\";\n      }\n      const byte = data.readInt8(byteIdx);\n      return (byte >> byteBitIdx) & 1;\n    } else {\n      return \"-\";\n    }\n  }\n\n  bitIsContainedInSelection(bitIdx, isLittleEndian = false) {\n    const { dragStartBit, dragCurrentBit } = this.state;\n\n    if (isLittleEndian || dragStartBit % 8 < 4) {\n      return (\n        dragStartBit !== null &&\n        dragCurrentBit !== null &&\n        bitIdx >= dragStartBit &&\n        bitIdx <= dragCurrentBit\n      );\n    } else {\n      const bigEndianStartBit = DbcUtils.bigEndianBitIndex(dragStartBit);\n      const bigEndianCurrentBit = DbcUtils.bigEndianBitIndex(dragCurrentBit);\n      const bigEndianBitIdx = DbcUtils.bigEndianBitIndex(bitIdx);\n      return (\n        dragStartBit !== null &&\n        dragCurrentBit !== null &&\n        bigEndianBitIdx >= bigEndianStartBit &&\n        bigEndianBitIdx <= bigEndianCurrentBit\n      );\n    }\n  }\n\n  onBitDoubleClick(startBit, signal) {\n    if (signal === undefined) {\n      this.createSignal({ startBit, size: 1, isLittleEndian: false });\n    }\n  }\n\n  renderBitMatrix() {\n    const { message } = this.props;\n    const rows = [];\n    let rowCount;\n    if (message.frame && message.frame.size) {\n      rowCount = Math.floor(message.frame.size * 8 / 8);\n    } else {\n      rowCount = 8;\n    }\n\n    for (var i = 0; i < rowCount; i++) {\n      const rowBits = [];\n      for (var j = 7; j >= 0; j--) {\n        const bitIdx = i * 8 + j;\n        const signal = this.signalForBit(bitIdx);\n        let bitStyle = null,\n          bitSignificance = \"\";\n        if (signal) {\n          bitStyle = this.state.signalStyles[signal.name] || null;\n          const bitDesc = signal.bitDescription(bitIdx);\n          bitSignificance = bitDesc.isMsb ? \"msb\" : bitDesc.isLsb ? \"lsb\" : \"\";\n        } else if (this.bitIsContainedInSelection(bitIdx)) {\n          bitStyle = Styles.bitSelectedStyle;\n        }\n        const className = css(\"bit\", Styles.bit, bitStyle);\n        const bitValue = this.bitValue(i, j);\n\n        rowBits.push(\n          <td\n            key={j.toString()}\n            className={className}\n            onMouseEnter={() => this.onBitHover(bitIdx, signal)}\n            onMouseLeave={() => this.onSignalHoverEnd(signal)}\n            onMouseDown={this.onBitMouseDown.bind(this, bitIdx, signal)}\n            onMouseUp={this.onBitMouseUp.bind(this, bitIdx, signal)}\n            onDoubleClick={() => this.onBitDoubleClick(bitIdx, signal)}\n          >\n            <span>{bitValue}</span>\n            <span className={css(Styles.bitSignificance)}>\n              {bitSignificance}\n            </span>\n          </td>\n        );\n      }\n\n      rowBits.push(<td key={\"hex-repr\"}>{this.byteValueHex(i)}</td>);\n      rows.push(<tr key={i.toString()}>{rowBits}</tr>);\n    }\n\n    return (\n      <div className=\"cabana-explorer-signals-matrix\">\n        <table cellSpacing={0} onMouseLeave={this.resetDragState}>\n          <tbody>{rows}</tbody>\n        </table>\n      </div>\n    );\n  }\n\n  resetDragState = () => {\n    this.setState({\n      dragStartBit: null,\n      dragSignal: null,\n      dragCurrentBit: null\n    });\n  };\n\n  onTentativeSignalChange = signal => {\n    // Tentative signal changes are not propagated up\n    // but their effects are displayed in the bitmatrix\n    const { signals } = this.state;\n    signals[signal.name] = signal;\n    this.setState({ signals });\n  };\n\n  onSignalChange = (signal, oldSignal) => {\n    const { signals } = this.state;\n\n    for (let signalName in signals) {\n      if (signals[signalName].uid === signal.uid) {\n        delete signals[signalName];\n      }\n    }\n    signals[signal.name] = signal;\n\n    this.setState({ signals }, this.propagateUpSignalChange);\n  };\n\n  onSignalRemove = signal => {\n    const { signals } = this.state;\n    delete signals[signal.name];\n    this.setState({ signals }, this.propagateUpSignalChange);\n  };\n\n  propagateUpSignalChange() {\n    const { signals } = this.state;\n\n    this.props.onConfirmedSignalChange(\n      this.props.message,\n      this.copySignals(signals)\n    );\n  }\n\n  onSignalPlotChange = (shouldPlot, signalUid) => {\n    const { message } = this.props;\n\n    this.props.onSignalPlotChange(shouldPlot, message.id, signalUid);\n  };\n\n  render() {\n    return (\n      <div className=\"cabana-explorer-signals-controller\">\n        {Object.keys(this.state.signals).length === 0 ? (\n          <p>Double click or drag to add a signal</p>\n        ) : null}\n        {this.props.message.entries[this.props.messageIndex] ? (\n          <div className=\"cabana-explorer-signals-time\">\n            <p>\n              time:{\" \"}\n              {this.props.message.entries[\n                this.props.messageIndex\n              ].relTime.toFixed(3)}\n            </p>\n          </div>\n        ) : null}\n        {this.props.message.isLogEvent || this.renderBitMatrix()}\n        <SignalLegend\n          isLogEvent={!!this.props.message.isLogEvent}\n          signals={this.state.signals}\n          signalStyles={this.state.signalStyles}\n          highlightedSignal={this.state.highlightedSignal}\n          onSignalHover={this.onSignalHover}\n          onSignalHoverEnd={this.onSignalHoverEnd}\n          onTentativeSignalChange={this.onTentativeSignalChange}\n          onSignalChange={this.onSignalChange}\n          onSignalRemove={this.onSignalRemove}\n          onSignalPlotChange={this.onSignalPlotChange}\n          plottedSignalUids={this.props.plottedSignalUids}\n        />\n      </div>\n    );\n  }\n}\n","/* eslint-disable no-restricted-globals*/\nexport function objToQuery(obj) {\n  return Object.keys(obj)\n    .map(k => k + \"=\" + encodeURIComponent(decodeURIComponent(obj[k])))\n    .join(\"&\");\n}\n\nexport function getUrlParameter(name) {\n  var location = window.location;\n  name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n  var results = regex.exec(location.search);\n\n  return results === null\n    ? null\n    : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\nexport function modifyQueryParameters({ add, remove = [] }) {\n  var regex = new RegExp(\"[\\\\?&]([^&#]+)=([^&#]*)\");\n  var results = regex.exec(location.search);\n\n  let params = {};\n  if (results != null) {\n    for (let i = 1; i < results.length - 1; i += 2) {\n      let key = results[i],\n        value = results[i + 1];\n      params[key] = value;\n    }\n    for (let key in params) {\n      if (remove.indexOf(key) !== -1) {\n        delete params[key];\n      }\n    }\n    params = { ...params, ...add };\n  } else {\n    params = add;\n  }\n\n  return location.origin + location.pathname + \"?\" + objToQuery(params);\n}\n","import DbcUtils from \"../../utils/dbc\";\n\nconst unsignedTransformation = field => {\n  return (value, signal) => {\n    if (value !== \"\") {\n      value = Number(value) || 0;\n\n      if (value < 0) {\n        value = 0;\n      }\n    }\n    signal[field] = value;\n    return signal;\n  };\n};\n\nexport default [\n  {\n    field: \"name\",\n    title: \"Name\",\n    type: \"string\"\n  },\n  {\n    field: \"size\",\n    title: \"Size\",\n    type: \"number\",\n    transform: unsignedTransformation(\"size\")\n  },\n  {\n    field: \"startBit\",\n    title: signal =>\n      signal.isLittleEndian ? \"Least significant bit\" : \"Most significant bit\",\n    type: \"number\",\n    transform: unsignedTransformation(\"startBit\")\n  },\n  {\n    field: \"isLittleEndian\",\n    title: \"Endianness\",\n    type: \"option\",\n    options: {\n      options: [\"Little\", \"Big\"],\n      optionValues: { Little: true, Big: false }\n    },\n    transform: (isLittleEndian, signal) => {\n      if (signal.isLittleEndian !== isLittleEndian) {\n        const { startBit } = signal;\n\n        if (isLittleEndian) {\n          // big endian -> little endian\n          const startByte = Math.floor(signal.startBit / 8),\n            endByte = Math.floor((signal.startBit - signal.size + 1) / 8);\n\n          if (startByte === endByte) {\n            signal.startBit = signal.startBit - signal.size + 1;\n          } else {\n            signal.startBit = DbcUtils.matrixBitNumber(startBit);\n          }\n        } else {\n          // little endian -> big endian\n          const startByte = Math.floor(signal.startBit / 8),\n            endByte = Math.floor((signal.startBit + signal.size - 1) / 8);\n\n          if (startByte === endByte) {\n            signal.startBit = signal.startBit + signal.size - 1;\n          } else {\n            signal.startBit = DbcUtils.bigEndianBitIndex(startBit);\n          }\n        }\n        signal.isLittleEndian = isLittleEndian;\n      }\n      return signal;\n    }\n  },\n  {\n    field: \"isSigned\",\n    title: \"Sign\",\n    type: \"option\",\n    options: {\n      options: [\"Signed\", \"Unsigned\"],\n      optionValues: { Signed: true, Unsigned: false }\n    }\n  },\n  {\n    field: \"factor\",\n    title: \"Factor\",\n    type: \"number\"\n  },\n  {\n    field: \"offset\",\n    title: \"Offset\",\n    type: \"number\"\n  },\n  {\n    field: \"unit\",\n    title: \"Unit\",\n    type: \"string\"\n  },\n  {\n    field: \"comment\",\n    title: \"Comment\",\n    type: \"string\"\n  },\n  {\n    field: \"min\",\n    title: \"Minimum value\",\n    type: \"number\"\n  },\n  {\n    field: \"max\",\n    title: \"Maximum value\",\n    type: \"number\"\n  }\n];\n","import React, { Component } from \"react\";\n\nexport default class Field extends Component {\n  render() {\n    const { title, htmlFor, children } = this.props;\n    return (\n      <div className=\"form-field form-field--small\">\n        <label htmlFor={htmlFor}>{title}</label>\n        {children}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport FIELDS from \"./FIELDS\";\nimport NumberField from \"./NumberField\";\nimport StringField from \"./StringField\";\nimport OptionField from \"./OptionField\";\n\nconst FieldMap = {\n  number: NumberField,\n  option: OptionField,\n  string: StringField\n};\n\nexport default ({\n  signal,\n  onSignalRemove,\n  isExpanded,\n  getSignalEdited,\n  update\n}) => {\n  return (\n    <div className=\"signals-legend-entry-form\">\n      {FIELDS.map(field => {\n        const Node = FieldMap[field.type];\n        return (\n          <div className=\"signals-legend-entry-form-field\" key={field.field}>\n            <Node\n              fieldSpec={field}\n              signal={signal}\n              isExpanded={isExpanded}\n              signalEdited={getSignalEdited(field.field)}\n              updateField={update}\n            />\n          </div>\n        );\n      })}\n      <div className=\"signals-legend-entry-form-remove\">\n        <button\n          className=\"button--tiny button--alpha\"\n          onClick={() => onSignalRemove(signal)}\n        >\n          Remove Signal\n        </button>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport Field from \"./Field\";\n\nexport default ({\n  fieldSpec,\n  signal,\n  isExpanded,\n  signalEdited,\n  updateField\n}) => {\n  const { field, title } = fieldSpec;\n  const htmlFor = `${signal.name}_${field}`;\n  let valueCol;\n\n  if (isExpanded) {\n    let value = signalEdited;\n    if (value !== \"\") {\n      let num = Number(value);\n      value = isNaN(num) ? \"\" : num;\n    }\n    valueCol = (\n      <input\n        id={htmlFor}\n        type=\"number\"\n        value={value}\n        onChange={e => {\n          updateField(fieldSpec, e.target.value);\n        }}\n      />\n    );\n  } else {\n    let value = signal[field];\n    valueCol = <span>{value}</span>;\n  }\n  return (\n    <Field\n      title={typeof title === \"function\" ? title(signal) : title}\n      htmlFor={htmlFor}\n    >\n      {valueCol}\n    </Field>\n  );\n};\n","import React from \"react\";\nimport Field from \"./Field\";\n\nimport { swapKeysAndValues } from \"../../utils/object\";\n\nexport default ({\n  fieldSpec,\n  signal,\n  isExpanded,\n  signalEdited,\n  updateField\n}) => {\n  let valueCol;\n  const { field, title } = fieldSpec;\n  const htmlFor = `${signal.name}_${field}`;\n  const { options, optionValues } = fieldSpec.options;\n  let valueOptions = swapKeysAndValues(optionValues);\n\n  if (isExpanded) {\n    const optionEles = options.map(opt => (\n      <option key={opt} value={optionValues[opt]}>\n        {opt}\n      </option>\n    ));\n    valueCol = (\n      <select\n        id={htmlFor}\n        defaultValue={signalEdited}\n        onChange={e => {\n          updateField(fieldSpec, e.target.value === \"true\");\n        }}\n      >\n        {optionEles}\n      </select>\n    );\n  } else {\n    valueCol = <span>{valueOptions[signal[field]]}</span>;\n  }\n\n  return (\n    <Field\n      title={typeof title === \"function\" ? title(signal) : title}\n      htmlFor={htmlFor}\n    >\n      {valueCol}\n    </Field>\n  );\n};\n","import React from \"react\";\nimport Field from \"./Field\";\n\nexport default ({\n  fieldSpec,\n  signal,\n  isExpanded,\n  signalEdited,\n  updateField\n}) => {\n  const { field, title } = fieldSpec;\n  const htmlFor = `${signal.name}_${field}`;\n  let valueCol;\n  if (isExpanded) {\n    valueCol = (\n      <input\n        id={htmlFor}\n        type=\"text\"\n        value={signalEdited || \"\"}\n        onChange={e => {\n          updateField(fieldSpec, e.target.value);\n        }}\n      />\n    );\n  } else {\n    valueCol = <span>{signal[field]}</span>;\n  }\n\n  return (\n    <Field\n      title={typeof title === \"function\" ? title(signal) : title}\n      htmlFor={htmlFor}\n    >\n      {valueCol}\n    </Field>\n  );\n};\n","import styled from \"react-emotion\";\n\n// color bar on the left side of the signals legend\nexport default styled(\"div\")`\n  display: block;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  width: 1.5%;\n  opacity: ${({ isHighlighted }) => (isHighlighted ? 0.5 : 0.3)};\n  background-color: rgb(${({ rgb }) => rgb.join(\",\")});\n`;\n","// SignalLegendEntry.js\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport Signal from \"../../models/can/signal\";\nimport SignalForm from \"./SignalForm\";\nimport ColorBar from \"./ColorBar\";\nimport FIELDS from \"./FIELDS\";\n\nexport default class SignalLegendEntry extends Component {\n  static propTypes = {\n    isLogEvent: PropTypes.bool,\n    signal: PropTypes.instanceOf(Signal).isRequired,\n    isHighlighted: PropTypes.bool,\n    onSignalHover: PropTypes.func,\n    onSignalHoverEnd: PropTypes.func,\n    onTentativeSignalChange: PropTypes.func,\n    onSignalChange: PropTypes.func,\n    onSignalRemove: PropTypes.func,\n    onSignalPlotChange: PropTypes.func,\n    toggleExpandSignal: PropTypes.func,\n    isPlotted: PropTypes.bool,\n    isExpanded: PropTypes.bool\n  };\n\n  static fieldSpecForName = name => {\n    return FIELDS.find(field => field.field === name);\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      signalEdited: Object.assign(Object.create(props.signal), props.signal)\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.signal.equals(this.props.signal)) {\n      this.setState({\n        signalEdited: Object.assign(\n          Object.create(nextProps.signal),\n          nextProps.signal\n        )\n      });\n    }\n  }\n\n  updateField = (fieldSpec, value) => {\n    let { signalEdited } = this.state;\n    const { signal } = this.props;\n\n    if (fieldSpec.transform) {\n      signalEdited = fieldSpec.transform(value, signalEdited);\n    } else {\n      signalEdited[fieldSpec.field] = value;\n    }\n\n    // Save entire signal while editing\n    this.setState({ signalEdited });\n    const signalCopy = Object.assign(Object.create(signal), signal);\n    Object.entries(signalEdited).forEach(([field, value]) => {\n      signalCopy[field] = value;\n    });\n    this.props.onSignalChange(signalCopy, signal);\n  };\n\n  toggleEditing = e => {\n    if (this.props.isLogEvent) {\n      return;\n    }\n    let { signalEdited } = this.state;\n    const { signal, isExpanded } = this.props;\n    const signalCopy = Object.assign(Object.create(signal), signal);\n\n    if (isExpanded) {\n      // Finished editing, save changes & reset intermediate\n      // signalEdited state.\n      Object.entries(signalEdited).forEach(([field, value]) => {\n        const fieldSpec = SignalLegendEntry.fieldSpecForName(field);\n\n        if (\n          fieldSpec &&\n          fieldSpec.type === \"number\" &&\n          isNaN(parseInt(value, 10))\n        ) {\n          value = 0;\n        }\n\n        signalCopy[field] = value;\n      });\n      this.props.onSignalChange(signalCopy, signal);\n    } else {\n      signalEdited = signalCopy;\n    }\n\n    // Expand and enable signal editing\n    this.setState({\n      signalEdited\n    });\n    this.props.toggleExpandSignal(signal);\n    e.stopPropagation();\n  };\n\n  toggleSignalPlot = e => {\n    const { signal, isPlotted } = this.props;\n    e.preventDefault();\n    this.props.onSignalPlotChange(!isPlotted, signal.uid);\n  };\n\n  getSignalEdited = field => {\n    return this.state.signalEdited[field];\n  };\n  render() {\n    const { signal, isHighlighted, color, isPlotted, isExpanded } = this.props;\n    const expandedEntryClass = isExpanded ? \"is-expanded\" : null;\n    const plottedButtonClass = isPlotted ? \"button\" : \"button--alpha\";\n    return (\n      <div\n        className={cx(\"signals-legend-entry\", expandedEntryClass)}\n        onMouseEnter={() => this.props.onSignalHover(signal)}\n        onMouseLeave={() => this.props.onSignalHoverEnd(signal)}\n      >\n        <ColorBar isHighlighted={isHighlighted} rgb={color} />\n        <div className=\"signals-legend-entry-header\">\n          <div\n            className=\"signals-legend-entry-header-name\"\n            onClick={this.toggleEditing}\n          >\n            <strong>{signal.name}</strong>\n          </div>\n          <div\n            className=\"signals-legend-entry-header-action\"\n            onClick={this.toggleSignalPlot}\n          >\n            <button className={cx(\"button--tiny\", plottedButtonClass)}>\n              {isPlotted ? \"Hide Plot\" : \"Show Plot\"}\n            </button>\n          </div>\n        </div>\n        <div className=\"signals-legend-entry-body\">\n          {isExpanded && (\n            <SignalForm\n              signal={signal}\n              onSignalRemove={this.props.onSignalRemove}\n              isExpanded={isExpanded}\n              getSignalEdited={this.getSignalEdited}\n              update={this.updateField}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","// SignalLegend.js\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport SignalLegendEntry from \"./SignalLegendEntry\";\n\nexport default class SignalLegend extends Component {\n  static propTypes = {\n    isLogEvent: PropTypes.bool,\n    signals: PropTypes.object,\n    signalStyles: PropTypes.object,\n    highlightedSignal: PropTypes.string,\n    onSignalHover: PropTypes.func,\n    onSignalHoverEnd: PropTypes.func,\n    onTentativeSignalChange: PropTypes.func,\n    onSignalChange: PropTypes.func,\n    onSignalRemove: PropTypes.func,\n    onSignalPlotChange: PropTypes.func,\n    plottedSignalUids: PropTypes.array\n  };\n\n  state = {\n    expandedSignals: []\n  };\n\n  toggleExpandSignal = s => {\n    const { expandedSignals } = this.state;\n    if (!expandedSignals.includes(s.uid)) {\n      const updatedExpandedSignals = [...expandedSignals, s.uid];\n      this.setState({ expandedSignals: updatedExpandedSignals });\n    } else {\n      const updatedExpandedSignals = expandedSignals.filter(i => i !== s.uid);\n      this.setState({ expandedSignals: updatedExpandedSignals });\n    }\n  };\n\n  checkExpandedSignal(s) {\n    return this.state.expandedSignals.includes(s);\n  }\n\n  render() {\n    const { signals, highlightedSignal } = this.props;\n    const signalRowsNested = Object.entries(signals)\n      .sort(([_, signal1], [__, signal2]) => {\n        if (signal1.startBit < signal2.startBit) {\n          return -1;\n        } else {\n          return 1;\n        }\n      })\n      .map(([signalName, signal]) => {\n        const { colors } = signals[signalName];\n        const isHighlighted = highlightedSignal === signalName;\n\n        return (\n          <SignalLegendEntry\n            isLogEvent={this.props.isLogEvent}\n            key={signal.uid}\n            signal={signal}\n            isHighlighted={isHighlighted}\n            color={colors}\n            onSignalHover={this.props.onSignalHover}\n            onSignalHoverEnd={this.props.onSignalHoverEnd}\n            onTentativeSignalChange={this.props.onTentativeSignalChange}\n            onSignalChange={this.props.onSignalChange}\n            onSignalRemove={this.props.onSignalRemove}\n            onSignalPlotChange={this.props.onSignalPlotChange}\n            toggleExpandSignal={this.toggleExpandSignal}\n            isPlotted={this.props.plottedSignalUids.indexOf(signal.uid) !== -1}\n            isExpanded={this.checkExpandedSignal(signal.uid)}\n          />\n        );\n      });\n\n    const signalRows = signalRowsNested\n      .filter(row => row != null)\n      .reduce((a, b) => {\n        return a.concat(b);\n      }, []);\n\n    return <div className=\"cabana-explorer-signals-legend\">{signalRows}</div>;\n  }\n}\n","import rightPad from \"right-pad\";\nimport CloudLog from \"../../logging/CloudLog\";\nimport Signal from \"./signal\";\nimport Frame from \"./frame\";\nimport BoardUnit from \"./BoardUnit\";\nimport DbcUtils from \"../../utils/dbc\";\nimport * as LogSignals from \"./logSignals\";\n\nconst UINT64 = require(\"cuint\").UINT64;\n\nconst DBC_COMMENT_RE = /^CM_ *\"(.*)\";/;\nconst DBC_COMMENT_MULTI_LINE_RE = /^CM_ *\"(.*)/;\n\nconst MSG_RE = /^BO_ (\\w+) (\\w+) *: (\\w+) (\\w+)/;\n\nconst SIGNAL_RE = /^SG_ (\\w+) : (\\d+)\\|(\\d+)@(\\d+)([+|-]) \\(([0-9.+-eE]+),([0-9.+-eE]+)\\) \\[([0-9.+-eE]+)\\|([0-9.+-eE]+)\\] \"(.*)\" (.*)/;\n// Multiplexed signal\nconst MP_SIGNAL_RE = /^SG_ (\\w+) (\\w+) *: (\\d+)\\|(\\d+)@(\\d+)([+|-]) \\(([0-9.+-eE]+),([0-9.+-eE]+)\\) \\[([0-9.+-eE]+)\\|([0-9.+-eE]+)\\] \"(.*)\" (.*)/;\n\nconst VAL_RE = /^VAL_ (\\w+) (\\w+) (.*);/;\nconst VAL_TABLE_RE = /^VAL_TABLE_ (\\w+) (.*);/;\n\nconst MSG_TRANSMITTER_RE = /^BO_TX_BU_ ([0-9]+) *: *(.+);/;\n\nconst SIGNAL_COMMENT_RE = /^CM_ SG_ *(\\w+) *(\\w+) *\"(.*)\";/;\nconst SIGNAL_COMMENT_MULTI_LINE_RE = /^CM_ SG_ *(\\w+) *(\\w+) *\"(.*)/;\n\n// Message Comments (CM_ BO_ )\nconst MESSAGE_COMMENT_RE = /^CM_ BO_ *(\\w+) *\"(.*)\";/;\nconst MESSAGE_COMMENT_MULTI_LINE_RE = /^CM_ BO_ *(\\w+) *\"(.*)/;\n\nconst BOARD_UNIT_RE = /^BU_:(.*)/;\nconst BOARD_UNIT_COMMENT_RE = /^CM_ BU_ *(\\w+) *\"(.*)\";/;\nconst BOARD_UNIT_COMMENT_MULTI_LINE_RE = /^CM_ BU_ *(\\w+) *\"(.*)/;\n\n// Follow ups are used to parse multi-line comment definitions\nconst FOLLOW_UP_DBC_COMMENT = \"FollowUpDbcComment\";\nconst FOLLOW_UP_SIGNAL_COMMENT = \"FollowUpSignalComment\";\nconst FOLLOW_UP_MSG_COMMENT = \"FollowUpMsgComment\";\nconst FOLLOW_UP_BOARD_UNIT_COMMENT = \"FollowUpBoardUnitComment\";\n\nfunction floatOrInt(numericStr) {\n  if (Number.isInteger(numericStr)) {\n    return parseInt(numericStr, 10);\n  } else {\n    return parseFloat(numericStr);\n  }\n}\n\nexport function swapOrder(arr, wordSize, gSize) {\n  const swappedWords = [];\n\n  for (let i = 0; i < arr.length; i += wordSize) {\n    const word = arr.slice(i, i + wordSize);\n    for (let j = wordSize - gSize; j > -gSize; j -= gSize) {\n      swappedWords.push(word.slice(j, j + gSize));\n    }\n  }\n\n  return swappedWords.join(\"\");\n}\n\nexport default class DBC {\n  constructor(dbcString) {\n    this.boardUnits = [];\n    this.comments = [];\n    this.messages = new Map();\n\n    if (dbcString !== undefined) {\n      this.dbcText = dbcString;\n      this.importDbcString(dbcString);\n    }\n  }\n\n  getMessageFrame(address) {\n    if (LogSignals.isLogAddress(address)) {\n      return LogSignals.frameForAddress(address);\n    }\n    return this.messages.get(address);\n  }\n\n  nextNewFrameName() {\n    const messageNames = [];\n\n    for (let msg of this.messages.values()) {\n      messageNames.push(msg.name);\n    }\n\n    let msgNum = 1,\n      msgName;\n    do {\n      msgName = \"NEW_MSG_\" + msgNum;\n      msgNum++;\n    } while (messageNames.indexOf(msgName) !== -1);\n\n    return msgName;\n  }\n\n  updateBoardUnits() {\n    const boardUnitNames = this.boardUnits.map(bu => bu.name);\n    const missingBoardUnits = Array.from(this.messages.entries())\n      .map(([msgId, frame]) => Object.values(frame.signals))\n      .reduce((arr, signals) => arr.concat(signals), [])\n      .map(signal => signal.receiver)\n      .reduce((arr, receivers) => arr.concat(receivers), [])\n      .filter((recv, idx, array) => array.indexOf(recv) === idx)\n      .filter(recv => boardUnitNames.indexOf(recv) === -1)\n      .map(recv => new BoardUnit(recv));\n\n    this.boardUnits = this.boardUnits.concat(missingBoardUnits);\n  }\n\n  text() {\n    this.updateBoardUnits();\n\n    let txt = 'VERSION \"\"\\n\\n\\n';\n    txt += \"NS_ :\" + this._newSymbols();\n    txt += \"\\n\\nBS_:\\n\";\n\n    const boardUnitsText = this.boardUnits.map(bu => bu.text()).join(\" \");\n    txt += \"\\nBU_: \" + boardUnitsText + \"\\n\\n\\n\";\n\n    const frames = [];\n    for (let frame of this.messages.values()) {\n      frames.push(frame);\n    }\n    txt += frames.map(f => f.text()).join(\"\\n\\n\") + \"\\n\\n\";\n\n    const messageTxs = frames\n      .map(f => [f.id, f.transmitters.slice(1)])\n      .filter(([addr, txs]) => txs.length > 0);\n    txt +=\n      messageTxs\n        .map(([addr, txs]) => `BO_TX_BU_ ${addr} : ${txs.join(\",\")};`)\n        .join(\"\\n\") + \"\\n\\n\\n\";\n\n    txt += this.boardUnits\n      .filter(bu => bu.comment !== null)\n      .map(bu => `CM_ BU_ ${bu.name} \"${bu.comment}\";`)\n      .join(\"\\n\");\n\n    txt += frames\n      .filter(f => f.comment !== null)\n      .map(msg => `CM_ BO_ ${msg.address} \"${msg.comment}\";`)\n      .join(\"\\n\");\n\n    const signalsByMsgId = frames\n      .map(f => Object.values(f.signals).map(sig => [f.id, sig]))\n      .reduce((s1, s2) => s1.concat(s2), []);\n\n    txt +=\n      signalsByMsgId\n        .filter(([msgAddr, sig]) => sig.comment !== null)\n        .map(\n          ([msgAddr, sig]) => `CM_ SG_ ${msgAddr} ${sig.name} \"${sig.comment}\";`\n        )\n        .join(\"\\n\") + \"\\n\";\n\n    txt +=\n      signalsByMsgId\n        .filter(([msgAddr, sig]) => sig.valueDescriptions.size > 0)\n        .map(([msgAddr, sig]) => sig.valueDescriptionText(msgAddr))\n        .join(\"\\n\") + \"\\n\";\n\n    txt += this.comments.map(comment => `CM_ \"${comment}\";`).join(\"\\n\");\n\n    return txt.trim() + \"\\n\";\n  }\n\n  getMessageName(msgId) {\n    const msg = this.getMessageFrame(msgId);\n    if (msg && msg.frame) return msg.frame.name;\n    return null;\n  }\n\n  getSignals(msgId) {\n    const msg = this.getMessageFrame(msgId);\n    if (msg) return msg.signals;\n    return {};\n  }\n\n  createFrame(msgId) {\n    const msg = new Frame({\n      name: this.nextNewFrameName(),\n      id: msgId,\n      size: 8\n    });\n\n    this.messages.set(msgId, msg);\n    return msg;\n  }\n\n  setSignals(msgId, signals) {\n    const msg = this.getMessageFrame(msgId);\n    if (msg) {\n      const newMsg = Object.assign(Object.create(msg), msg);\n      newMsg.signals = signals;\n      this.messages.set(msgId, newMsg);\n    } else {\n      const msg = this.createFrame(msgId);\n      msg.signals = signals;\n\n      this.messages.set(msgId, msg);\n      this.updateBoardUnits();\n    }\n  }\n\n  addSignal(msgId, signal) {\n    const msg = this.getMessageFrame(msgId);\n\n    if (msg) {\n      msg.signals[signal.name] = signal;\n      this.updateBoardUnits();\n    }\n  }\n\n  importDbcString(dbcString) {\n    const warnings = [];\n    const messages = new Map();\n    let boardUnits = [];\n    let valueTables = new Map();\n    let id = 0;\n    let followUp = null;\n\n    const lines = dbcString.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n      let line = lines[i].trim();\n\n      if (line.length === 0) continue;\n\n      if (followUp != null) {\n        const { type, data } = followUp;\n        line = line.replace(/\" *;/, \"\");\n        let followUpLine = `\\n${line.substr(0, line.length)}`;\n        if (line.indexOf('\"') !== -1) {\n          followUp = null;\n          followUpLine = followUpLine.substr(0, followUpLine.length - 1);\n        }\n        if (type === FOLLOW_UP_SIGNAL_COMMENT) {\n          const signal = data;\n          signal.comment += followUpLine;\n        } else if (type === FOLLOW_UP_MSG_COMMENT) {\n          const msg = data;\n          msg.comment += followUpLine;\n        } else if (type === FOLLOW_UP_BOARD_UNIT_COMMENT) {\n          const boardUnit = data;\n          boardUnit.comment += followUpLine;\n        } else if (type === FOLLOW_UP_DBC_COMMENT) {\n          //          const comment = data;\n          const partialComment = this.comments[this.comments.length - 1];\n          this.comments[this.comments.length - 1] =\n            partialComment + followUpLine;\n        }\n      }\n\n      if (line.indexOf(\"BO_ \") === 0) {\n        let matches = line.match(MSG_RE);\n        if (matches === null) {\n          warnings.push(\n            `failed to parse message definition on line ${i + 1} -- ${line}`\n          );\n          continue;\n        }\n        let [idString, name, size, transmitter] = matches.slice(1);\n        id = parseInt(idString, 0); // 0 radix parses hex or dec\n        size = parseInt(size, 10);\n        const frame = new Frame({\n          name,\n          id,\n          size,\n          transmitters: [transmitter]\n        });\n        messages.set(id, frame);\n      } else if (line.indexOf(\"SG_\") === 0) {\n        let matches = line.match(SIGNAL_RE);\n\n        if (matches === null) {\n          matches = line.match(MP_SIGNAL_RE);\n          if (matches === null) {\n            warnings.push(\n              `failed to parse signal definition on line ${i + 1} -- ${line}`\n            );\n            continue;\n          }\n          // for now, ignore multiplex which is matches[1]\n          matches = matches[1] + matches.slice(3);\n        } else {\n          matches = matches.slice(1);\n        }\n\n        let [\n          name,\n          startBit,\n          size,\n          isLittleEndian,\n          isSigned,\n          factor,\n          offset,\n          min,\n          max,\n          unit,\n          receiverStr\n        ] = matches;\n        startBit = parseInt(startBit, 10);\n        size = parseInt(size, 10);\n        isLittleEndian = parseInt(isLittleEndian, 10) === 1;\n        isSigned = isSigned === \"-\";\n        factor = floatOrInt(factor);\n        offset = floatOrInt(offset);\n        min = floatOrInt(min);\n        max = floatOrInt(max);\n        const receiver = receiverStr.split(\",\").map(s => s.trim());\n\n        const signalProperties = {\n          name,\n          startBit,\n          size,\n          isLittleEndian,\n          isSigned,\n          factor,\n          offset,\n          unit,\n          min,\n          max,\n          receiver\n        };\n        const signal = new Signal(signalProperties);\n\n        if (messages.get(id) !== undefined) {\n          messages.get(id).signals[name] = signal;\n        } else {\n          CloudLog.warn(\n            \"importDbcString: could not add signal: \" +\n              name +\n              \" due to missing message: \" +\n              id\n          );\n        }\n      } else if (line.indexOf(\"VAL_ \") === 0) {\n        let matches = line.match(VAL_RE);\n\n        if (matches !== null) {\n          let [messageId, signalName, vals] = matches.slice(1);\n          vals = vals\n            .split('\"')\n            .map(s => s.trim())\n            .filter(s => s.length > 0);\n\n          messageId = parseInt(messageId, 10);\n          const msg = messages.get(messageId);\n          const signal = msg.signals[signalName];\n          if (signal === undefined) {\n            warnings.push(\n              `could not find signal for value description on line ${i +\n                1} -- ${line}`\n            );\n            continue;\n          }\n          for (let i = 0; i < vals.length; i += 2) {\n            const value = vals[i].trim(),\n              description = vals[i + 1].trim();\n            signal.valueDescriptions.set(value, description);\n          }\n        } else {\n          warnings.push(\n            `failed to parse value description on line ${i + 1} -- ${line}`\n          );\n        }\n      } else if (line.indexOf(\"VAL_TABLE_ \") === 0) {\n        let matches = line.match(VAL_TABLE_RE);\n\n        if (matches !== null) {\n          const table = new Map();\n          let [tableName, items] = matches.slice(1);\n          items = items\n            .split('\"')\n            .map(s => s.trim())\n            .filter(s => s.length > 0);\n\n          for (let i = 0; i < items.length; i += 2) {\n            const key = items[i],\n              value = items[i + 1];\n            table.set(key, value);\n          }\n          valueTables.set(tableName, table);\n        } else {\n          warnings.push(\n            `failed to parse value table on line ${i + 1} -- ${line}`\n          );\n        }\n      } else if (line.indexOf(\"BO_TX_BU_ \") === 0) {\n        let matches = line.match(MSG_TRANSMITTER_RE);\n\n        if (matches !== null) {\n          let [messageId, transmitter] = matches.slice(1);\n          messageId = parseInt(messageId, 10);\n\n          const msg = messages.get(messageId);\n          msg.transmitters.push(transmitter);\n          messages.set(messageId, msg);\n        } else {\n          warnings.push(\n            `failed to parse message transmitter definition on line ${i +\n              1} -- ${line}`\n          );\n        }\n      } else if (line.indexOf(\"CM_ SG_ \") === 0) {\n        let matches = line.match(SIGNAL_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(SIGNAL_COMMENT_MULTI_LINE_RE);\n          hasFollowUp = true;\n        }\n        if (matches === null) {\n          warnings.push(\n            `failed to parse signal comment on line ${i + 1} -- ${line}`\n          );\n          continue;\n        }\n\n        let [messageId, signalName, comment] = matches.slice(1);\n\n        messageId = parseInt(messageId, 10);\n        const msg = messages.get(messageId);\n        if (msg === undefined) {\n          warnings.push(`failed to parse signal comment on line ${i +\n            1} -- ${line}:\n                                    message id ${messageId} does not exist prior to this line`);\n          continue;\n        }\n        const signal = msg.signals[signalName];\n        if (signal === undefined) {\n          warnings.push(\n            `failed to parse signal comment on line ${i + 1} -- ${line}`\n          );\n          continue;\n        } else {\n          signal.comment = comment;\n          messages.set(messageId, msg);\n        }\n\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_SIGNAL_COMMENT, data: signal };\n        }\n      } else if (line.indexOf(\"CM_ BO_ \") === 0) {\n        let matches = line.match(MESSAGE_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(MESSAGE_COMMENT_MULTI_LINE_RE);\n          hasFollowUp = true;\n          if (matches === null) {\n            warnings.push(\n              `failed to message comment on line ${i + 1} -- ${line}`\n            );\n            continue;\n          }\n        }\n\n        let [messageId, comment] = matches.slice(1);\n        messageId = parseInt(messageId, 10);\n        const msg = messages.get(messageId);\n        msg.comment = comment;\n\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_MSG_COMMENT, data: msg };\n        }\n      } else if (line.indexOf(\"BU_: \") === 0) {\n        let matches = line.match(BOARD_UNIT_RE);\n\n        if (matches !== null) {\n          const [boardUnitNameStr] = matches.slice(1);\n          const newBoardUnits = boardUnitNameStr\n            .split(\" \")\n            .map(s => s.trim())\n            .filter(s => s.length > 0)\n            .map(name => new BoardUnit(name));\n\n          boardUnits = boardUnits.concat(newBoardUnits);\n        } else {\n          warnings.push(\n            `failed to parse board unit definition on line ${i + 1} -- ${line}`\n          );\n          continue;\n        }\n      } else if (line.indexOf(\"CM_ BU_ \") === 0) {\n        let matches = line.match(BOARD_UNIT_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(BOARD_UNIT_COMMENT_MULTI_LINE_RE);\n          hasFollowUp = true;\n          if (matches === null) {\n            warnings.push(\n              `failed to parse board unit comment on line ${i + 1} -- ${line}`\n            );\n            continue;\n          }\n        }\n\n        let [boardUnitName, comment] = matches.slice(1);\n        let boardUnit = boardUnits.find(bu => bu.name === boardUnitName);\n        if (boardUnit) {\n          boardUnit.comment = comment;\n        }\n\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_BOARD_UNIT_COMMENT, data: boardUnit };\n        }\n      } else if (line.indexOf(\"CM_ \") === 0) {\n        let matches = line.match(DBC_COMMENT_RE);\n        let hasFollowUp = false;\n        if (matches === null) {\n          matches = line.match(DBC_COMMENT_MULTI_LINE_RE);\n          if (matches === null) {\n            warnings.push(\n              `failed to parse dbc comment on line ${i + 1} -- ${line}`\n            );\n            continue;\n          } else {\n            hasFollowUp = true;\n          }\n        }\n\n        let [comment] = matches.slice(1);\n        this.comments.push(comment);\n        if (hasFollowUp) {\n          followUp = { type: FOLLOW_UP_DBC_COMMENT, data: comment };\n        }\n      }\n    }\n\n    // Disabled b/c live mode frequently calls this function\n    // and executes way too many network requests\n    if (warnings.length > 0) {\n      // warnings.forEach((warning) => CloudLog.warn('importDbcString: ' + warning));\n      // warnings.forEach((warning) => console.log('importDbcString: ' + warning));\n    }\n\n    this.messages = messages;\n    this.boardUnits = boardUnits;\n    this.valueTables = valueTables;\n  }\n\n  valueForInt64Signal(signalSpec, hexData) {\n    const blen = hexData.length * 4;\n    let value, startBit, dataBitPos;\n\n    if (signalSpec.isLittleEndian) {\n      value = UINT64(swapOrder(hexData, 16, 2), 16);\n      startBit = signalSpec.startBit;\n      dataBitPos = UINT64(startBit);\n    } else {\n      // big endian\n      value = UINT64(hexData, 16);\n\n      startBit = DbcUtils.bigEndianBitIndex(signalSpec.startBit);\n      dataBitPos = UINT64(blen - (startBit + signalSpec.size));\n    }\n    if (dataBitPos < 0) {\n      return null;\n    }\n\n    let rightHandAnd = UINT64(Math.pow(2, signalSpec.size) - 1);\n    let ival = value\n      .shiftr(dataBitPos)\n      .and(rightHandAnd)\n      .toNumber();\n\n    if (signalSpec.isSigned && ival & Math.pow(2, signalSpec.size - 1)) {\n      ival -= Math.pow(2, signalSpec.size);\n    }\n    ival = ival * signalSpec.factor + signalSpec.offset;\n    return ival;\n  }\n\n  valueForInt32Signal(signalSpec, buf) {\n    var startBit;\n    if (signalSpec.isLittleEndian) {\n      startBit = 64 - signalSpec.startBit - signalSpec.size;\n    } else {\n      var bitPos = (-signalSpec.startBit - 1) % 8;\n      if (bitPos < 0) {\n        bitPos += 8; // mimic python modulo behavior\n      }\n\n      startBit = Math.floor(signalSpec.startBit / 8) * 8 + bitPos;\n    }\n\n    var shiftAmount, signalValue;\n    let byteOffset = Math.min(4, Math.floor(signalSpec.startBit / 8));\n    if (signalSpec.isLittleEndian) {\n      signalValue = buf.readUInt32LE(byteOffset);\n      shiftAmount = signalSpec.startBit - 8 * byteOffset;\n    } else {\n      signalValue = buf.readUInt32BE(byteOffset);\n      shiftAmount = 32 - (startBit - 8 * byteOffset + signalSpec.size);\n    }\n\n    signalValue = (signalValue >>> shiftAmount) & ((1 << signalSpec.size) - 1);\n    if (signalSpec.isSigned && signalValue >>> (signalSpec.size - 1)) {\n      signalValue -= 1 << signalSpec.size;\n    }\n\n    return signalValue * signalSpec.factor + signalSpec.offset;\n  }\n\n  getSignalValues(messageId, data) {\n    if (!this.messages.has(messageId) && !LogSignals.isLogAddress(messageId)) {\n      return {};\n    }\n    const frame = this.getMessageFrame(messageId);\n\n    let buffer = Buffer.from(data);\n    let paddedBuffer = buffer;\n    if (buffer.length !== 8) {\n      // pad data it's 64 bits long\n      const paddedDataHex = rightPad(buffer.toString(\"hex\"), 16, \"0\");\n      paddedBuffer = Buffer.from(paddedDataHex, \"hex\");\n    }\n    const hexData = paddedBuffer.toString(\"hex\");\n\n    const signalValuesByName = {};\n    Object.values(frame.signals).forEach(signalSpec => {\n      let value;\n      if (signalSpec.size > 32) {\n        value = this.valueForInt64Signal(signalSpec, hexData);\n      } else {\n        value = this.valueForInt32Signal(signalSpec, paddedBuffer);\n      }\n      signalValuesByName[signalSpec.name] = value;\n    });\n\n    return signalValuesByName;\n  }\n\n  getChffrMetricMappings() {\n    const metricComment = this.comments.find(\n      comment => comment.indexOf(\"CHFFR_METRIC\") === 0\n    );\n    if (!metricComment) {\n      return null;\n    }\n\n    return metricComment\n      .split(\";\")\n      .map(metric => metric.trim().split(\" \"))\n      .reduce(\n        (metrics, [_, messageId, signalName, metricName, factor, offset]) => {\n          metrics[metricName] = {\n            messageId: parseInt(messageId, 10),\n            signalName,\n            factor: parseFloat(factor),\n            offset: parseFloat(offset)\n          };\n          return metrics;\n        },\n        {}\n      );\n  }\n\n  _newSymbols() {\n    return `\n    NS_DESC_\n    CM_\n    BA_DEF_\n    BA_\n    VAL_\n    CAT_DEF_\n    CAT_\n    FILTER\n    BA_DEF_DEF_\n    EV_DATA_\n    ENVVAR_DATA_\n    SGTYPE_\n    SGTYPE_VAL_\n    BA_DEF_SGTYPE_\n    BA_SGTYPE_\n    SIG_TYPE_REF_\n    VAL_TABLE_\n    SIG_GROUP_\n    SIG_VALTYPE_\n    SIGTYPE_VALTYPE_\n    BO_TX_BU_\n    BA_DEF_REL_\n    BA_REL_\n    BA_DEF_DEF_REL_\n    BU_SG_REL_\n    BU_EV_REL_\n    BU_BO_REL_\n    SG_MUL_VAL_`;\n  }\n}\n","import DbcUtils from \"../../utils/dbc\";\n\nexport default class Signal {\n  constructor({\n    name,\n    startBit = 0,\n    size = 0,\n    isLittleEndian = true,\n    isSigned = false,\n    isFloat = false,\n    factor = 1,\n    offset = 0,\n    unit = \"\",\n    receiver = [\"XXX\"],\n    comment = null,\n    multiplex = null,\n    min = null,\n    max = null,\n    valueDescriptions = new Map()\n  }) {\n    Object.assign(this, {\n      name,\n      startBit,\n      size,\n      isLittleEndian,\n      isSigned,\n      isFloat,\n      factor,\n      offset,\n      unit,\n      receiver,\n      comment,\n      multiplex,\n      valueDescriptions\n    });\n\n    const uid = Math.random().toString(36);\n\n    if (min == null) {\n      min = this.calculateMin();\n    }\n    if (max == null) {\n      max = this.calculateMax();\n    }\n\n    const colors = this.generateColors();\n\n    Object.assign(this, { min, max, uid, colors });\n  }\n\n  text() {\n    const multiplex = this.multiplex ? \" \" + this.multiplex : \"\";\n    const byteOrder = this.isLittleEndian ? 1 : 0;\n    const signedChar = this.isSigned ? \"-\" : \"+\";\n\n    return (\n      `SG_ ${this.name}${multiplex} : ` +\n      `${this.startBit}|${this.size}@${byteOrder}${signedChar}` +\n      ` (${this.factor},${this.offset})` +\n      ` [${this.min}|${this.max}]` +\n      ` \"${this.unit}\" ${this.receiver}`\n    );\n  }\n\n  valueDescriptionText(msgId) {\n    const entryPairs = Array.from(this.valueDescriptions.entries());\n    const values = entryPairs.reduce(\n      (str, [value, desc]) => str + value + ` \"${desc}\" `,\n      \"\"\n    );\n    return `VAL_ ${msgId} ${this.name} ${values};`;\n  }\n\n  lsbBitIndex() {\n    // Returns LSB bit index in matrix order (see AddSignals.js)\n\n    if (this.isLittleEndian) {\n      return this.startBit;\n    } else {\n      const lsbBitNumber = this.lsbBitNumber();\n\n      return DbcUtils.matrixBitNumber(lsbBitNumber);\n    }\n  }\n\n  lsbBitNumber() {\n    // Returns LSB bit number in big endian ordering\n\n    return DbcUtils.bigEndianBitIndex(this.startBit) + this.size - 1;\n  }\n\n  msbBitIndex() {\n    if (this.isLittleEndian) {\n      return this.startBit + this.size - 1;\n    } else {\n      return this.startBit;\n    }\n  }\n\n  littleEndianBitDescription(bitIndex) {\n    const bitRange = [this.startBit, this.startBit + this.size - 1];\n    if (bitIndex < bitRange[0] || bitIndex > bitRange[1]) {\n      return null;\n    } else {\n      const bitNumber = bitIndex - bitRange[0];\n      const isLsb = bitIndex === bitRange[0];\n      const isMsb = bitIndex === bitRange[1];\n      return { bitNumber, isLsb, isMsb };\n    }\n  }\n\n  bigEndianBitDescription(bitIndex) {\n    const start = DbcUtils.bigEndianBitIndex(this.startBit);\n    const range = [start, start + this.size - 1];\n    const bitNumber = DbcUtils.bigEndianBitIndex(bitIndex);\n\n    if (bitNumber < range[0] || bitNumber > range[1]) {\n      return null;\n    }\n\n    const isLsb = bitNumber === range[1];\n    const isMsb = bitIndex === this.startBit;\n    return { bitNumber, isLsb, isMsb, range };\n  }\n\n  bitDescription(bitIndex) {\n    if (this.isLittleEndian) {\n      return this.littleEndianBitDescription(bitIndex);\n    } else {\n      return this.bigEndianBitDescription(bitIndex);\n    }\n  }\n\n  calculateRawRange() {\n    let rawRange = Math.pow(2, this.size);\n    if (this.isSigned) {\n      rawRange /= 2;\n    }\n    return [this.isSigned ? -1 * rawRange : 0, rawRange - 1];\n  }\n\n  calculateMin() {\n    const rawMin = this.calculateRawRange()[0];\n    return this.offset + rawMin * this.factor;\n  }\n\n  calculateMax() {\n    const rawMax = this.calculateRawRange()[1];\n    return this.offset + rawMax * this.factor;\n  }\n\n  generateColors() {\n    let colors = Array(3);\n    for (let i = 0; i < 3; i++) {\n      colors[i] = Math.floor(Math.random() * 211);\n    }\n\n    return colors;\n  }\n\n  equals(otherSignal) {\n    return (\n      otherSignal.name === this.name &&\n      otherSignal.startBit === this.startBit &&\n      otherSignal.size === this.size &&\n      otherSignal.isLittleEndian === this.isLittleEndian &&\n      otherSignal.isSigned === this.isSigned &&\n      otherSignal.isFloat === this.isFloat &&\n      otherSignal.factor === this.factor &&\n      otherSignal.offset === this.offset &&\n      otherSignal.unit === this.unit &&\n      otherSignal.receiver.length === this.receiver.length &&\n      otherSignal.receiver.every((v, i) => v === this.receiver[i]) &&\n      otherSignal.comment === this.comment &&\n      otherSignal.multiplex === this.multiplex\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/webusb-enable-experimental-features.e5a08e76.png\";","module.exports = __webpack_public_path__ + \"static/media/webusb-enable-webusb.aceef6a0.png\";","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"9bd0af2c9ba4d028a9ad.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"2464c3ee509aca09191d.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"616fbedcdb356e57bfec.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"5f65f42d446e84a5a6bf.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"d32516387821fe8f3ce5.worker.js\");\n};","import Raven from \"raven-js\";\n\nfunction init() {\n  if (process.env.NODE_ENV === \"production\") {\n    const opts = {};\n\n    if (typeof __webpack_hash__ !== \"undefined\") {\n      opts[\"release\"] = __webpack_hash__; // eslint-disable-line no-undef\n    }\n\n    Raven.config(\n      \"https://50006e5d91894f508dd288bbbf4585a6@sentry.io/185303\",\n      opts\n    ).install();\n  }\n}\n\nexport default { init };\n","import { GITHUB_CLIENT_ID, GITHUB_REDIRECT_URL } from \"../config\";\nimport { objToQuery } from \"../utils/url\";\n\nexport function authorizeUrl(route) {\n  const params = {\n    client_id: GITHUB_CLIENT_ID,\n    redirect_uri: GITHUB_REDIRECT_URL,\n    scope: \"user:email public_repo\",\n    state: JSON.stringify({ route })\n  };\n\n  return `http://github.com/login/oauth/authorize?${objToQuery(params)}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class MessageBytes extends Component {\n  static propTypes = {\n    seekTime: PropTypes.number.isRequired,\n    message: PropTypes.object.isRequired,\n    seekIndex: PropTypes.number,\n    live: PropTypes.bool.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isVisible: true,\n      lastMessageIndex: 0,\n      lastSeekTime: 0\n    };\n\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.onCanvasRefAvailable = this.onCanvasRefAvailable.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.live) {\n      const nextLastEntry =\n        nextProps.message.entries[nextProps.message.entries.length - 1];\n      const curLastEntry = this.props.message.entries[\n        this.props.message.entries.length - 1\n      ];\n\n      return nextLastEntry.hexData !== curLastEntry.hexData;\n    } else {\n      return nextProps.seekTime !== this.props.seekTime;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      this.props.seekIndex !== nextProps.seekIndex ||\n      frameForTime(this.props.seekTime) !== frameForTime(nextProps.seekTime)\n    ) {\n      this.updateCanvas(nextProps);\n    }\n\n    function frameForTime(t) {\n      return ~~(t * 60);\n    }\n  }\n\n  findMostRecentMessage(seekTime) {\n    const { message } = this.props;\n    const { lastMessageIndex, lastSeekTime } = this.state;\n    let mostRecentMessageIndex = null;\n    if (seekTime >= lastSeekTime) {\n      for (let i = lastMessageIndex; i < message.entries.length; ++i) {\n        const msg = message.entries[i];\n        if (msg && msg.relTime >= seekTime) {\n          mostRecentMessageIndex = i;\n          break;\n        }\n      }\n    }\n\n    if (!mostRecentMessageIndex) {\n      // TODO this can be faster with binary search, not currently a bottleneck though.\n\n      mostRecentMessageIndex = message.entries.findIndex(\n        e => e.relTime >= seekTime\n      );\n    }\n\n    if (mostRecentMessageIndex) {\n      this.setState({\n        lastMessageIndex: mostRecentMessageIndex,\n        lastSeekTime: seekTime\n      });\n      return message.entries[mostRecentMessageIndex];\n    }\n  }\n\n  updateCanvas(props) {\n    const { message, live, seekTime } = props;\n    if (!this.canvas || message.entries.length === 0) return;\n\n    let mostRecentMsg = message.entries[message.entries.length - 1];\n    if (!live) {\n      mostRecentMsg = this.findMostRecentMessage(seekTime);\n\n      if (!mostRecentMsg) {\n        mostRecentMsg = message.entries[0];\n      }\n    }\n\n    const ctx = this.canvas.getContext(\"2d\");\n    // ctx.clearRect(0, 0, 180, 15);\n\n    for (let i = 0; i < message.byteStateChangeCounts.length; ++i) {\n      const hexData = mostRecentMsg.hexData.substr(i * 2, 2);\n      ctx.fillStyle = message.byteColors[i];\n\n      ctx.fillRect(i * 20, 0, 20, 15);\n\n      ctx.font = \"12px Courier\";\n      ctx.fillStyle = \"white\";\n      if (hexData) {\n        ctx.fillText(hexData, i * 20 + 2, 12);\n      } else {\n        ctx.fillText(\"-\", i * 20 + 7, 12);\n      }\n    }\n  }\n\n  onVisibilityChange(isVisible) {\n    if (isVisible !== this.state.isVisible) {\n      this.setState({ isVisible });\n    }\n  }\n\n  onCanvasRefAvailable(ref) {\n    if (!ref) return;\n\n    this.canvas = ref;\n    this.canvas.width = 160 * window.devicePixelRatio;\n    this.canvas.height = 15 * window.devicePixelRatio;\n    const ctx = this.canvas.getContext(\"2d\");\n    ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n  }\n\n  render() {\n    return (\n      <canvas\n        ref={this.onCanvasRefAvailable}\n        className=\"cabana-meta-messages-list-item-bytes-canvas\"\n      />\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport cx from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport Clipboard from \"clipboard\";\n\nimport MessageBytes from \"./MessageBytes\";\nconst { ckmeans } = require(\"simple-statistics\");\n\nexport default class Meta extends Component {\n  static propTypes = {\n    onMessageSelected: PropTypes.func,\n    onMessageUnselected: PropTypes.func,\n    dongleId: PropTypes.string,\n    name: PropTypes.string,\n    messages: PropTypes.objectOf(PropTypes.object),\n    selectedMessages: PropTypes.array,\n    onPartChanged: PropTypes.func,\n    partsCount: PropTypes.number,\n    showLoadDbc: PropTypes.func,\n    showSaveDbc: PropTypes.func,\n    dbcFilename: PropTypes.string,\n    dbcLastSaved: PropTypes.object, // moment.js object,\n    showEditMessageModal: PropTypes.func,\n    route: PropTypes.object,\n    partsLoaded: PropTypes.number,\n    currentParts: PropTypes.array,\n    seekTime: PropTypes.number,\n    loginWithGithub: PropTypes.element,\n    isDemo: PropTypes.bool,\n    live: PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.onFilterChanged = this.onFilterChanged.bind(this);\n    this.onFilterFocus = this.onFilterFocus.bind(this);\n    this.onFilterUnfocus = this.onFilterUnfocus.bind(this);\n    this.canMsgFilter = this.canMsgFilter.bind(this);\n    this.logEventMsgFilter = this.logEventMsgFilter.bind(this);\n    this.renderMessageBytes = this.renderMessageBytes.bind(this);\n    this.toggleShowLogEvents = this.toggleShowLogEvents.bind(this);\n\n    const { dbcLastSaved } = props;\n\n    this.state = {\n      filterText: \"Filter\",\n      lastSaved:\n        dbcLastSaved !== null ? this.props.dbcLastSaved.fromNow() : null,\n      hoveredMessages: [],\n      orderedMessageKeys: [],\n      showLogEvents: false\n    };\n  }\n\n  componentWillMount() {\n    this.lastSavedTimer = setInterval(() => {\n      if (this.props.dbcLastSaved !== null) {\n        this.setState({ lastSaved: this.props.dbcLastSaved.fromNow() });\n      }\n    }, 30000);\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.lastSavedTimer);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.lastSaved !== this.props.lastSaved &&\n      typeof nextProps === \"object\"\n    ) {\n      this.setState({ lastSaved: nextProps.dbcLastSaved.fromNow() });\n    }\n\n    const nextMsgKeys = Object.keys(nextProps.messages);\n    if (\n      JSON.stringify(nextMsgKeys) !==\n      JSON.stringify(Object.keys(this.props.messages))\n    ) {\n      const orderedMessageKeys = this.sortMessages(nextProps.messages);\n      this.setState({ hoveredMessages: [], orderedMessageKeys });\n    } else if (\n      this.state.orderedMessageKeys.length === 0 ||\n      (!this.props.live &&\n        this.props.messages &&\n        nextProps.messages &&\n        this.byteCountsDidUpdate(this.props.messages, nextProps.messages))\n    ) {\n      const orderedMessageKeys = this.sortMessages(nextProps.messages);\n      this.setState({ orderedMessageKeys });\n    }\n  }\n\n  byteCountsDidUpdate(prevMessages, nextMessages) {\n    return Object.entries(nextMessages).some(\n      ([msgId, msg]) =>\n        JSON.stringify(msg.byteStateChangeCounts) !==\n        JSON.stringify(prevMessages[msgId].byteStateChangeCounts)\n    );\n  }\n\n  sortMessages(messages) {\n    // Returns list of message keys, ordered as follows:\n    // messages are binned into at most 10 bins based on entry count\n    // each bin is sorted by message CAN address\n    // then the list of bins is flattened and reversed to\n    // yield a count-descending, address-ascending order.\n\n    if (Object.keys(messages).length === 0) return [];\n    const messagesByEntryCount = Object.entries(messages).reduce(\n      (partialMapping, [msgId, msg]) => {\n        const entryCountKey = msg.entries.length.toString(); // js object keys are strings\n        if (!partialMapping[entryCountKey]) {\n          partialMapping[entryCountKey] = [msg];\n        } else {\n          partialMapping[entryCountKey].push(msg);\n        }\n        return partialMapping;\n      },\n      {}\n    );\n\n    const entryCounts = Object.keys(messagesByEntryCount).map(count =>\n      parseInt(count, 10)\n    );\n    const binnedEntryCounts = ckmeans(\n      entryCounts,\n      Math.min(entryCounts.length, 10)\n    );\n    const sortedKeys = binnedEntryCounts\n      .map(bin =>\n        bin\n          .map(entryCount => messagesByEntryCount[entryCount.toString()])\n          .reduce((messages, partial) => messages.concat(partial), [])\n          .sort((msg1, msg2) => {\n            if (msg1.address < msg2.address) {\n              return 1;\n            } else {\n              return -1;\n            }\n          })\n          .map(msg => msg.id)\n      )\n      .reduce((keys, bin) => keys.concat(bin), [])\n      .reverse();\n\n    return sortedKeys;\n  }\n\n  toggleShowLogEvents() {\n    this.setState({\n      showLogEvents: !this.state.showLogEvents\n    });\n  }\n\n  onFilterChanged(e) {\n    let val = e.target.value;\n    if (val.trim() === \"Filter\") val = \"\";\n\n    this.setState({ filterText: val });\n  }\n\n  onFilterFocus(e) {\n    if (this.state.filterText.trim() === \"Filter\") {\n      this.setState({ filterText: \"\" });\n    }\n  }\n\n  onFilterUnfocus(e) {\n    if (this.state.filterText.trim() === \"\") {\n      this.setState({ filterText: \"Filter\" });\n    }\n  }\n\n  canMsgFilter(msg) {\n    if (msg.isLogEvent) {\n      return;\n    }\n    const { filterText } = this.state;\n    const msgName = msg.frame ? msg.frame.name : \"\";\n\n    return (\n      filterText === \"Filter\" ||\n      filterText === \"\" ||\n      msg.id.toLowerCase().indexOf(filterText.toLowerCase()) !== -1 ||\n      msgName.toLowerCase().indexOf(filterText.toLowerCase()) !== -1\n    );\n  }\n\n  logEventMsgFilter(msg) {\n    if (!msg.isLogEvent) {\n      return;\n    }\n    const { filterText } = this.state;\n    const msgName = msg.frame ? msg.frame.name : \"\";\n\n    return (\n      filterText === \"Filter\" ||\n      filterText === \"\" ||\n      msg.id.toLowerCase().indexOf(filterText.toLowerCase()) !== -1 ||\n      msgName.toLowerCase().indexOf(filterText.toLowerCase()) !== -1\n    );\n  }\n\n  lastSavedPretty() {\n    const { dbcLastSaved } = this.props;\n    return dbcLastSaved.fromNow();\n  }\n\n  onMessageHover(key) {\n    let { hoveredMessages } = this.state;\n    if (hoveredMessages.indexOf(key) !== -1) return;\n\n    hoveredMessages.push(key);\n    this.setState({ hoveredMessages });\n  }\n\n  onMessageHoverEnd(key) {\n    let { hoveredMessages } = this.state;\n    hoveredMessages = hoveredMessages.filter(m => m !== key);\n    this.setState({ hoveredMessages });\n  }\n\n  onMsgRemoveClick(key) {\n    let { selectedMessages } = this.state;\n    selectedMessages = selectedMessages.filter(m => m !== key);\n    this.props.onMessageUnselected(key);\n    this.setState({ selectedMessages });\n  }\n\n  onMessageSelected(key) {\n    // uncomment when we support multiple messages\n    // const selectedMessages = this.state.selectedMessages.filter((m) => m !== key);\n    const selectedMessages = [];\n    selectedMessages.push(key);\n    this.props.updateSelectedMessages(selectedMessages);\n    this.props.onMessageSelected(key);\n  }\n\n  orderedMessages() {\n    const { orderedMessageKeys } = this.state;\n    const { messages } = this.props;\n    return orderedMessageKeys.map(key => messages[key]);\n  }\n\n  selectedMessageClass(messageId) {\n    return this.props.selectedMessages.includes(messageId)\n      ? \"is-selected\"\n      : null;\n  }\n\n  renderMessageBytes(msg) {\n    return (\n      <tr\n        onClick={() => {\n          this.onMessageSelected(msg.id);\n        }}\n        key={msg.id}\n        className={cx(\n          \"cabana-meta-messages-list-item\",\n          this.selectedMessageClass(msg.id)\n        )}\n      >\n        {msg.isLogEvent ? (\n          <td colSpan=\"2\">{msg.id}</td>\n        ) : (\n          <React.Fragment>\n            <td>{msg.frame ? msg.frame.name : \"untitled\"}</td>\n            <td>{msg.id}</td>\n          </React.Fragment>\n        )}\n        <td>{msg.entries.length}</td>\n        <td>\n          <div className=\"cabana-meta-messages-list-item-bytes\">\n            <MessageBytes\n              key={msg.id}\n              message={msg}\n              seekIndex={this.props.seekIndex}\n              seekTime={this.props.seekTime}\n              live={this.props.live}\n            />\n          </div>\n        </td>\n      </tr>\n    );\n  }\n\n  renderCanMessages() {\n    return this.orderedMessages()\n      .filter(this.canMsgFilter)\n      .map(this.renderMessageBytes);\n  }\n\n  renderLogEventMessages() {\n    return this.orderedMessages()\n      .filter(this.logEventMsgFilter)\n      .map(this.renderMessageBytes);\n  }\n\n  renderAvailableMessagesList() {\n    if (Object.keys(this.props.messages).length === 0) {\n      return <p>Loading messages...</p>;\n    }\n    return (\n      <React.Fragment>\n        <table cellPadding=\"5\">\n          {this.state.showLogEvents && (\n            <React.Fragment>\n              <thead>\n                <tr>\n                  <td colSpan=\"2\">Name</td>\n                  <td>Count</td>\n                  <td>Bytes</td>\n                </tr>\n              </thead>\n              <tbody>\n                {this.renderLogEventMessages()}\n                <tr>\n                  <td colSpan=\"4\">\n                    <hr />\n                  </td>\n                </tr>\n              </tbody>\n            </React.Fragment>\n          )}\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>ID</td>\n              <td>Count</td>\n              <td>Bytes</td>\n            </tr>\n          </thead>\n          <tbody>{this.renderCanMessages()}</tbody>\n        </table>\n      </React.Fragment>\n    );\n  }\n\n  saveable() {\n    try {\n      // eslint-disable-next-line\n      \"serviceWorker\" in navigator &&\n        !!new ReadableStream() &&\n        !!new WritableStream(); // eslint-disable-line no-undef\n      return \"saveable\";\n    } catch (e) {\n      return false;\n    }\n  }\n  render() {\n    return (\n      <div className=\"cabana-meta\">\n        <div className=\"cabana-meta-header\">\n          <h5 className=\"cabana-meta-header-label t-capline\">\n            Currently editing:\n          </h5>\n          <strong className=\"cabana-meta-header-filename\">\n            {this.props.dbcFilename}\n          </strong>\n          {this.props.dbcLastSaved !== null ? (\n            <div className=\"cabana-meta-header-last-saved\">\n              <p>Last saved: {this.lastSavedPretty()}</p>\n            </div>\n          ) : null}\n          <div className={`cabana-meta-header-actions ${this.saveable()}`}>\n            <div className=\"cabana-meta-header-action\">\n              <button onClick={this.props.showLoadDbc}>Load DBC</button>\n            </div>\n            {this.saveable() && (\n              <div className=\"cabana-meta-header-action\">\n                <button onClick={this.props.saveLog}>Save Log</button>\n              </div>\n            )}\n            {this.props.shareUrl ? (\n              <div\n                className=\"cabana-meta-header-action special-wide\"\n                data-clipboard-text={this.props.shareUrl}\n                data-clipboard-action=\"copy\"\n                ref={ref => (ref ? new Clipboard(ref) : null)}\n              >\n                <a\n                  className=\"button\"\n                  href={this.props.shareUrl}\n                  onClick={e => e.preventDefault()}\n                >\n                  Copy Share Link\n                </a>\n              </div>\n            ) : null}\n            <div className=\"cabana-meta-header-action\">\n              <button onClick={this.props.showSaveDbc}>Save DBC</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"cabana-meta-messages\">\n          <div className=\"cabana-meta-messages-header\">\n            <div\n              style={{\n                display: \"inline-block\",\n                float: \"right\"\n              }}\n            >\n              <h5 className=\"t-capline\">\n                Show log events\n                <input\n                  type=\"checkbox\"\n                  onChange={this.toggleShowLogEvents}\n                  checked={!!this.state.showLogEvents}\n                />\n              </h5>\n            </div>\n            <h5 className=\"t-capline\">Available messages</h5>\n          </div>\n          <div className=\"cabana-meta-messages-window\">\n            <div className=\"cabana-meta-messages-filter\">\n              <div className=\"form-field form-field--small\">\n                <input\n                  type=\"text\"\n                  value={this.state.filterText}\n                  onFocus={this.onFilterFocus}\n                  onBlur={this.onFilterUnfocus}\n                  onChange={this.onFilterChanged}\n                />\n              </div>\n            </div>\n            <div className=\"cabana-meta-messages-list\">\n              {this.renderAvailableMessagesList()}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","function elementWiseEquals(arr1, arr2) {\n  return (\n    arr1.length === arr2.length && arr1.every((ele, idx) => arr2[idx] === ele)\n  );\n}\n\nfunction findIndexRight(arr, condition) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    if (condition(arr[i])) {\n      return i;\n    }\n  }\n}\n\nexport default { elementWiseEquals, findIndexRight };\n","import ArrayUtils from \"../utils/array\";\nimport { CAN_GRAPH_MAX_POINTS } from \"../config\";\n\nfunction _calcGraphData(msg, signalUid, firstCanTime) {\n  if (!msg) return null;\n\n  const signal = Object.values(msg.frame.signals).find(\n    s => s.uid === signalUid\n  );\n  if (!signal) {\n    console.warn(\"_calcGraphData: no signal\", signalUid, msg);\n    return null;\n  }\n  let samples = [];\n  let skip = Math.floor(msg.entries.length / CAN_GRAPH_MAX_POINTS);\n\n  if (skip === 0) {\n    samples = msg.entries;\n  } else {\n    for (let i = 0; i < msg.entries.length; i += skip) {\n      samples.push(msg.entries[i]);\n    }\n    // Always include last message entry, which faciliates graphData comparison\n    samples.push(msg.entries[msg.entries.length - 1]);\n  }\n  if (!samples.length) {\n    return [];\n  }\n  // sorting these doesn't fix the phantom lines\n  let lastEntry = samples[0].relTime;\n  return samples\n    .filter(e => e.signals[signal.name] !== undefined)\n    .map(entry => {\n      if (entry.relTime - lastEntry > 2) {\n        signalUid = Math.random().toString(36);\n      }\n      lastEntry = entry.relTime;\n      // console.log(entry.relTime - lastEntry);\n      return {\n        x: entry.time,\n        relTime: entry.relTime,\n        y: entry.signals[signal.name],\n        unit: signal.unit,\n        color: `rgba(${signal.colors.join(\",\")}, 0.5)`,\n        signalName: signal.name,\n        signalUid\n      };\n    });\n}\n\nfunction appendNewGraphData(plottedSignals, graphData, messages, firstCanTime) {\n  const messagesPerPlot = plottedSignals.map(plottedMessages =>\n    plottedMessages.reduce((messages, { messageId, signalUid }) => {\n      messages.push(messageId);\n      return messages;\n    }, [])\n  );\n\n  const extendedPlots = messagesPerPlot\n    .map((plottedMessageIds, index) => {\n      return { plottedMessageIds, index };\n    }) // preserve index so we can look up graphData\n    .filter(({ plottedMessageIds, index }) => {\n      if (index < graphData.length) {\n        let maxGraphTime = 0;\n        const { series } = graphData[index];\n        if (series.length > 0) {\n          maxGraphTime = series[graphData[index].series.length - 1].relTime;\n        }\n\n        return plottedMessageIds.some(\n          messageId =>\n            (messages[messageId].entries.length > 0 && series.length === 0) ||\n            messages[messageId].entries.some(e => e.relTime > maxGraphTime)\n        );\n      } else {\n        return false;\n      }\n    })\n    .map(({ plottedMessageIds, index }) => {\n      plottedMessageIds = plottedMessageIds.reduce((arr, messageId) => {\n        if (arr.indexOf(messageId) === -1) {\n          arr.push(messageId);\n        }\n        return arr;\n      }, []);\n      return { plottedMessageIds, index };\n    });\n\n  extendedPlots.forEach(({ plottedMessageIds, index }) => {\n    const signalUidsByMessageId = plottedSignals[index].reduce(\n      (obj, { messageId, signalUid }) => {\n        if (!obj[messageId]) {\n          obj[messageId] = [];\n        }\n        obj[messageId].push(signalUid);\n        return obj;\n      },\n      {}\n    );\n    const { series } = graphData[index];\n    const graphDataMaxMessageTimes = plottedMessageIds.reduce(\n      (obj, messageId) => {\n        const signalUids = signalUidsByMessageId[messageId];\n        const maxIndex = ArrayUtils.findIndexRight(series, entry => {\n          return signalUids.indexOf(entry.signalUid) !== -1;\n        });\n        if (maxIndex) {\n          obj[messageId] = series[maxIndex].relTime;\n        } else if (series.length > 0) {\n          obj[messageId] = series[series.length - 1].relTime;\n        } else {\n          // Graph data is empty\n          obj[messageId] = -1;\n        }\n\n        return obj;\n      },\n      {}\n    );\n\n    let newGraphData = [];\n    plottedMessageIds\n      .map(messageId => {\n        return { messageId, entries: messages[messageId].entries };\n      })\n      .filter(\n        (\n          { messageId, entries } // Filter to only messages with stale graphData\n        ) =>\n          entries[entries.length - 1].relTime >\n          graphDataMaxMessageTimes[messageId]\n      )\n      .forEach(({ messageId, entries }) => {\n        // Compute and append new graphData\n        let firstNewEntryIdx = entries.findIndex(\n          entry => entry.relTime > graphDataMaxMessageTimes[messageId]\n        );\n\n        const newEntries = entries.slice(firstNewEntryIdx);\n        signalUidsByMessageId[messageId].forEach(signalUid => {\n          const signalGraphData = _calcGraphData(\n            {\n              ...messages[messageId],\n              entries: newEntries\n            },\n            signalUid,\n            firstCanTime\n          );\n\n          newGraphData = newGraphData.concat(signalGraphData);\n        });\n      });\n\n    const messageIdOutOfBounds =\n      series.length > 0 &&\n      plottedMessageIds.find(\n        messageId =>\n          messages[messageId].entries.length > 0 &&\n          series[0].relTime < messages[messageId].entries[0].relTime\n      );\n    graphData[index] = {\n      series: graphData[index].series.concat(newGraphData),\n      updated: Date.now()\n    };\n\n    if (messageIdOutOfBounds) {\n      const graphDataLowerBound = graphData[index].series.findIndex(\n        e => e.relTime > messages[messageIdOutOfBounds].entries[0].relTime\n      );\n\n      if (graphDataLowerBound) {\n        graphData[index].series = graphData[index].series.slice(\n          graphDataLowerBound\n        );\n      }\n    }\n  });\n\n  return [...graphData];\n}\n\nexport default { _calcGraphData, appendNewGraphData };\n","export default {\n  $schema: \"https://vega.github.io/schema/vega/v5.6.json\",\n  width: 400,\n  height: 200,\n  padding: {\n    top: 5,\n    left: 30,\n    right: 5,\n    bottom: 10\n  },\n  signals: [\n    {\n      name: \"tipTime\",\n      on: [\n        {\n          events: \"mousemove\",\n          update: \"invert('xrelscale', x())\"\n        }\n      ]\n    },\n    {\n      name: \"clickTime\",\n      on: [\n        {\n          events: \"click\",\n          update: \"invert('xrelscale', x())\"\n        }\n      ]\n    },\n    { name: \"videoTime\" },\n    {\n      name: \"segment\",\n      value: { data: \"table\", field: \"relTime\" }\n    }\n  ],\n  data: [\n    {\n      name: \"table\"\n    },\n    {\n      name: \"segment\"\n    },\n    {\n      name: \"tooltip\",\n      source: \"table\",\n      transform: [\n        {\n          type: \"filter\",\n          expr: \"abs(datum.relTime - tipTime) <= 0.01\"\n        },\n        {\n          type: \"aggregate\",\n          fields: [\"relTime\", \"y\", \"unit\"],\n          ops: [\"min\", \"argmin\", \"argmin\"],\n          as: [\"min\", \"argmin\", \"argmin\"]\n        }\n      ]\n    },\n    {\n      name: \"ySegmentScale\",\n      source: \"table\",\n      transform: [\n        {\n          type: \"filter\",\n          expr:\n            \"length(segment) != 2 || (datum.relTime >= segment[0] && datum.relTime <= segment[1])\"\n        },\n        { type: \"extent\", field: \"y\", signal: \"ySegment\" }\n      ]\n    }\n  ],\n  scales: [\n    {\n      name: \"xscale\",\n      type: \"linear\",\n      range: \"width\",\n      domain: { data: \"table\", field: \"x\" },\n      zero: false\n    },\n    {\n      name: \"xrelscale\",\n      type: \"linear\",\n      range: \"width\",\n      domain: { data: \"table\", field: \"relTime\" },\n      zero: false,\n      clamp: true,\n      domainRaw: { signal: \"segment\" }\n    },\n    {\n      name: \"yscale\",\n      type: \"linear\",\n      range: \"height\",\n      clamp: true,\n      zero: false,\n      domain: { signal: \"ySegment\" }\n    },\n    {\n      name: \"color\",\n      type: \"ordinal\",\n      domain: { data: \"table\", field: \"color\" },\n      range: { data: \"table\", field: \"color\" }\n    }\n  ],\n  axes: [\n    { orient: \"bottom\", scale: \"xrelscale\", labelOverlap: true },\n    { orient: \"left\", scale: \"yscale\" }\n  ],\n  marks: [\n    {\n      type: \"group\",\n      name: \"plot\",\n      interactive: true,\n      encode: {\n        enter: {\n          width: { signal: \"width\" },\n          height: { signal: \"height\" },\n          fill: { value: \"transparent\" }\n        }\n      },\n      signals: [\n        {\n          name: \"brush\",\n          value: 0,\n          on: [\n            {\n              events: \"@boundingRect:mousedown\",\n              update: \"[x(), x()]\"\n            },\n            {\n              events:\n                \"[@boundingRect:mousedown, window:mouseup] > window:mousemove!\",\n              update: \"[brush[0], clamp(x(), 0, width)]\"\n            },\n            {\n              events: { signal: \"delta\" },\n              update:\n                \"clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)\"\n            }\n          ]\n        },\n        {\n          name: \"anchor\",\n          value: null,\n          on: [{ events: \"@brush:mousedown\", update: \"slice(brush)\" }]\n        },\n        {\n          name: \"xdown\",\n          value: 0,\n          on: [{ events: \"@brush:mousedown\", update: \"x()\" }]\n        },\n        {\n          name: \"xup\",\n          value: 0,\n          on: [{ events: \"@brush:mouseup\", update: \"x()\" }]\n        },\n        {\n          name: \"delta\",\n          value: 0,\n          on: [\n            {\n              events: \"[@brush:mousedown, window:mouseup] > window:mousemove!\",\n              update: \"x() - xdown\"\n            }\n          ]\n        },\n\n        {\n          name: \"segment\",\n          push: \"outer\",\n          on: [\n            {\n              events: \"window:mouseup\",\n              update:\n                \"span(brush) && span(brush) > 15 ? invert('xrelscale', brush) : segment\"\n            }\n          ]\n        }\n      ],\n      marks: [\n        {\n          type: \"group\",\n          from: {\n            facet: {\n              name: \"series\",\n              data: \"table\",\n              groupby: \"signalUid\"\n            }\n          },\n          marks: {\n            type: \"line\",\n            name: \"lineMark\",\n            from: { data: \"series\" },\n            interactive: true,\n            encode: {\n              update: {\n                interpolate: { value: \"step\" },\n                x: { scale: \"xrelscale\", field: \"relTime\" },\n                y: { scale: \"yscale\", field: \"y\" }\n              },\n              hover: {\n                fillOpacity: { value: 0.5 }\n              },\n              enter: {\n                clip: { value: true },\n                stroke: { scale: \"color\", field: \"color\" },\n                strokeWidth: { value: 2 }\n              }\n            }\n          }\n        },\n        {\n          type: \"rect\",\n          interactive: true,\n          name: \"brush\",\n          encode: {\n            enter: {\n              y: { value: 0 },\n              height: { signal: \"height\" },\n              fill: { value: \"#333\" },\n              fillOpacity: { value: 0.2 }\n            },\n            update: {\n              x: { signal: \"brush[0]\" },\n              x2: { signal: \"brush[1]\" }\n            }\n          }\n        },\n        // {\n        //   \"type\": \"rect\",\n        //   \"interactive\": false,\n        //   \"encode\": {\n        //     \"enter\": {\n        //       \"y\": {\"value\": 0},\n        //       \"height\": {\"value\": 200},\n        //       \"width\": {\"value\": 2},\n        //       \"fill\": {\"value\": \"firebrick\"}\n        //     },\n        //     \"update\": {\n        //       \"x\": {\"signal\": \"brush[0]\"}\n        //     }\n        //   }\n        // },\n        // {\n        //   \"type\": \"rect\",\n        //   \"interactive\": false,\n        //   \"encode\": {\n        //     \"enter\": {\n        //       \"y\": {\"value\": 0},\n        //       \"height\": {\"value\": 200},\n        //       \"width\": {\"value\": 2},\n        //       \"fill\": {\"value\": \"firebrick\"}\n        //     },\n        //     \"update\": {\n        //       \"x\": {\"signal\": \"brush[1]\"}\n        //     }\n        //   }\n        // },\n        {\n          type: \"rule\",\n          encode: {\n            update: {\n              y: { value: 0 },\n              y2: { field: { group: \"height\" } },\n              stroke: { value: \"#000\" },\n              strokeWidth: { value: 2 },\n              x: {\n                scale: \"xrelscale\",\n                signal: \"videoTime\",\n                offset: 0.5\n              }\n            }\n          }\n        },\n        {\n          type: \"symbol\",\n          from: { data: \"tooltip\" },\n          encode: {\n            update: {\n              x: { scale: \"xrelscale\", field: \"argmin.relTime\" },\n              y: { scale: \"yscale\", field: \"argmin.y\" },\n              size: { value: 50 },\n              fill: { value: \"black\" }\n            }\n          }\n        },\n        {\n          type: \"group\",\n          from: { data: \"tooltip\" },\n          interactive: false,\n          name: \"tooltipGroup\",\n          encode: {\n            update: {\n              x: [\n                {\n                  test:\n                    \"inrange(datum.argmin.relTime + 80, domain('xrelscale'))\",\n                  scale: \"xrelscale\",\n                  field: \"argmin.relTime\"\n                },\n                { scale: \"xrelscale\", field: \"argmin.relTime\", offset: -80 }\n              ],\n              y: { scale: \"yscale\", field: \"argmin.y\" },\n              height: { value: 20 },\n              width: { value: 80 },\n              fill: { value: \"#fff\" },\n              fillOpacity: { value: 0.85 },\n              stroke: { value: \"#aaa\" },\n              strokeWidth: { value: 0.5 }\n            }\n          },\n          marks: [\n            {\n              type: \"text\",\n              interactive: false,\n              encode: {\n                update: {\n                  text: {\n                    signal:\n                      \"format(parent.argmin.relTime, ',.2f') + ': ' + format(parent.argmin.y, ',.2f') + ' ' + parent.argmin.unit\"\n                  },\n                  fill: { value: \"black\" },\n                  fontWeight: { value: \"bold\" },\n                  y: { value: 20 }\n                }\n              }\n            }\n          ]\n        },\n        {\n          type: \"rect\",\n          name: \"boundingRect\",\n          interactive: true,\n          encode: {\n            enter: {\n              width: { signal: \"width\" },\n              height: { signal: \"height\" },\n              fill: { value: \"transparent\" }\n            }\n          }\n        }\n      ]\n    }\n  ]\n};\n","export default function debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this,\n      args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import React, { Component } from \"react\";\nimport Measure from \"react-measure\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { Vega } from \"react-vega\";\n\nimport Signal from \"../models/can/signal\";\nimport GraphData from \"../models/graph-data\";\nimport CanPlotSpec from \"../vega/CanPlot\";\nimport debounce from \"../utils/debounce\";\n\nconst DefaultPlotInnerStyle = {\n  position: \"absolute\",\n  top: 0,\n  left: 0\n};\n\nexport default class CanGraph extends Component {\n  static emptyTable = [];\n\n  static propTypes = {\n    plottedSignal: PropTypes.string,\n    messages: PropTypes.object,\n    messageId: PropTypes.string,\n    messageName: PropTypes.string,\n    signalSpec: PropTypes.instanceOf(Signal),\n    segment: PropTypes.array,\n    unplot: PropTypes.func,\n    onRelativeTimeClick: PropTypes.func,\n    currentTime: PropTypes.number,\n    onSegmentChanged: PropTypes.func,\n    onDragStart: PropTypes.func,\n    onDragEnd: PropTypes.func,\n    container: PropTypes.node,\n    dragPos: PropTypes.object,\n    canReceiveGraphDrop: PropTypes.bool,\n    onGraphRefAvailable: PropTypes.func,\n    plottedSignals: PropTypes.array\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      plotInnerStyle: null,\n      shiftX: 0,\n      shiftY: 0,\n      bounds: null,\n      isDataInserted: false,\n      data: this.getGraphData(props),\n      spec: this.getGraphSpec(props)\n    };\n    this.onNewView = this.onNewView.bind(this);\n    this.onSignalClickTime = this.onSignalClickTime.bind(this);\n    this.onSignalSegment = this.onSignalSegment.bind(this);\n    this.onDragAnchorMouseDown = this.onDragAnchorMouseDown.bind(this);\n    this.onDragAnchorMouseUp = this.onDragAnchorMouseUp.bind(this);\n    this.onDragStart = this.onDragStart.bind(this);\n    this.onPlotResize = this.onPlotResize.bind(this);\n    this.insertData = this.insertData.bind(this);\n  }\n\n  getGraphData(props) {\n    let firstRelTime = -1;\n    let lastRelTime = -1;\n    let series = props.plottedSignals\n      .map(signals => {\n        const { messageId, signalUid } = signals;\n        let entries = props.messages[messageId].entries;\n        if (entries.length) {\n          let messageRelTime = entries[0].relTime;\n          if (firstRelTime === -1) {\n            firstRelTime = messageRelTime;\n          } else {\n            firstRelTime = Math.min(firstRelTime, messageRelTime);\n          }\n          messageRelTime = entries[entries.length - 1].relTime;\n          lastRelTime = Math.max(lastRelTime, messageRelTime);\n        }\n        return GraphData._calcGraphData(\n          props.messages[messageId],\n          signalUid,\n          0\n        );\n      })\n      .reduce((m, v) => m.concat(v), []);\n\n    return {\n      updated: Date.now(),\n      series,\n      firstRelTime,\n      lastRelTime\n    };\n  }\n\n  getGraphSpec(props) {\n    return {\n      ...CanPlotSpec,\n      scales: [\n        {\n          ...CanPlotSpec.scales[0],\n          domainMin: props.segment[0],\n          domainMax: props.segment[1]\n        },\n        ...CanPlotSpec.scales.slice(1)\n      ]\n    };\n  }\n\n  segmentIsNew(newSegment) {\n    return (\n      newSegment.length !== this.props.segment.length ||\n      !newSegment.every((val, idx) => this.props.segment[idx] === val)\n    );\n  }\n\n  visualChanged(prevProps, nextProps) {\n    return (\n      prevProps.canReceiveGraphDrop !== nextProps.canReceiveGraphDrop ||\n      JSON.stringify(prevProps.dragPos) !== JSON.stringify(nextProps.dragPos)\n    );\n  }\n\n  onPlotResize(options) {\n    if (!this.view) {\n      return;\n    }\n\n    let bounds = null;\n    if (options && options.bounds) {\n      this.setState({ bounds: options.bounds });\n      bounds = options.bounds;\n    } else {\n      bounds = this.state.bounds;\n    }\n\n    this.view.runAfter(this.updateBounds);\n  }\n\n  updateBounds = debounce(() => {\n    this.view.signal(\"width\", this.state.bounds.width - 70);\n    this.view.signal(\"height\", 0.4 * (this.state.bounds.width - 70)); // 5:2 aspect ratio\n    this.view.run();\n  }, 100);\n\n  insertData = debounce(() => {\n    if (!this.view) {\n      console.log(\"Cannot insertData\");\n      return;\n    }\n\n    // adding plot points by diff isn't faster since it basically has to be n^2\n    // out-of-order events make it so that you can't just check the bounds\n    let { series } = this.state.data;\n    let changeset = this.view\n      .changeset()\n      .remove(v => true)\n      .insert(series);\n    this.view.change(\"table\", changeset);\n    this.view.run();\n  }, 250);\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      nextProps.dragPos &&\n      JSON.stringify(nextProps.dragPos) !== JSON.stringify(this.props.dragPos)\n    ) {\n      this.updateStyleFromDragPos(nextProps.dragPos);\n    } else if (!nextProps.dragPos && this.state.plotInnerStyle !== null) {\n      this.setState({ plotInnerStyle: null });\n    }\n    if (\n      this.props.messages !== nextProps.messages ||\n      this.props.plottedSignal !== nextProps.plottedSignal\n    ) {\n      let data = this.getGraphData(nextProps);\n      if (\n        data.series.length === this.state.data.series.length &&\n        data.firstRelTime === this.state.data.firstRelTime &&\n        data.lastRelTime === this.state.data.lastRelTime\n      ) {\n        // do nothing, the data didn't *actually* change\n      } else {\n        this.setState({ data });\n      }\n    }\n    if (this.segmentIsNew(nextProps.segment)) {\n      this.setState({ spec: this.getGraphSpec(nextProps) });\n    }\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!this.view) {\n      return true;\n    }\n    if (this.state.spec !== nextState.spec) {\n      return true;\n    }\n    if (this.state.data !== nextState.data) {\n      this.insertData();\n    }\n    if (this.props.currentTime !== nextProps.currentTime) {\n      this.view.signal(\"videoTime\", nextProps.currentTime);\n    }\n    if (this.segmentIsNew(nextProps.segment)) {\n      if (nextProps.segment.length > 0) {\n        // Set segmented domain\n        this.view.signal(\"segment\", nextProps.segment);\n      } else {\n        // Reset segment to full domain\n        this.view.signal(\"segment\", 0);\n      }\n    }\n    this.view.runAsync();\n    return false;\n  }\n  componentDidUpdate(oldProps, oldState) {\n    if (this.view) {\n      if (this.props.segment.length > 0) {\n        // Set segmented domain\n        this.view.signal(\"segment\", this.props.segment);\n      } else {\n        // Reset segment to full domain\n        this.view.signal(\"segment\", 0);\n      }\n      this.view.signal(\"videoTime\", this.props.currentTime);\n      this.view.runAsync();\n    }\n  }\n\n  updateStyleFromDragPos({ left, top }) {\n    const plotInnerStyle = { ...this.state.plotInnerStyle };\n    plotInnerStyle.left = left;\n    plotInnerStyle.top = top;\n    this.setState({ plotInnerStyle });\n  }\n\n  onNewView(view) {\n    this.view = view;\n\n    if (this.state.bounds) {\n      this.onPlotResize();\n    }\n    if (this.props.segment.length > 0) {\n      view.signal(\"segment\", this.props.segment);\n    }\n    view.signal(\"videoTime\", this.props.currentTime);\n\n    this.insertData();\n  }\n\n  onSignalClickTime(signal, clickTime) {\n    // console.log('onSignalClickTime', signal, clickTime);\n    if (clickTime !== undefined) {\n      this.props.onRelativeTimeClick(this.props.messageId, clickTime);\n    }\n  }\n\n  onSignalSegment(signal, segment) {\n    // console.log('onSignalSegment', signal, segment);\n    if (!Array.isArray(segment)) {\n      return;\n    }\n\n    this.props.onSegmentChanged(this.props.messageId, segment);\n\n    if (!this.view) {\n      return;\n    }\n\n    this.view.runAfter(() => {\n      const state = this.view.getState();\n      state.subcontext[0].signals.brush = 0;\n      this.view.setState(state);\n      this.insertData();\n    });\n  }\n\n  plotInnerStyleFromMouseEvent(e) {\n    const { shiftX, shiftY } = this.state;\n    const plotInnerStyle = { ...DefaultPlotInnerStyle };\n    const rect = this.props.container.getBoundingClientRect();\n\n    const x = e.clientX - rect.left - shiftX;\n    const y = e.clientY - rect.top - shiftY;\n    plotInnerStyle.left = x;\n    plotInnerStyle.top = y;\n    return plotInnerStyle;\n  }\n\n  onDragAnchorMouseDown(e) {\n    e.persist();\n    const shiftX = e.clientX - e.target.getBoundingClientRect().left;\n    const shiftY = e.clientY - e.target.getBoundingClientRect().top;\n    this.setState({ shiftX, shiftY }, () => {\n      this.setState({ plotInnerStyle: this.plotInnerStyleFromMouseEvent(e) });\n    });\n    this.props.onDragStart(\n      this.props.messageId,\n      this.props.signalSpec.uid,\n      shiftX,\n      shiftY\n    );\n  }\n\n  onDragAnchorMouseUp(e) {\n    this.props.onDragEnd();\n    this.setState({\n      plotInnerStyle: null,\n      shiftX: 0,\n      shiftY: 0\n    });\n  }\n\n  onDragStart(e) {\n    e.preventDefault();\n    return false;\n  }\n\n  render() {\n    const { plotInnerStyle } = this.state;\n    const canReceiveDropClass = this.props.canReceiveGraphDrop\n      ? \"is-droppable\"\n      : null;\n\n    return (\n      <div\n        className=\"cabana-explorer-visuals-plot\"\n        ref={this.props.onGraphRefAvailable}\n      >\n        <div\n          className={cx(\n            \"cabana-explorer-visuals-plot-inner\",\n            canReceiveDropClass\n          )}\n          style={plotInnerStyle || null}\n        >\n          <div\n            className=\"cabana-explorer-visuals-plot-draganchor\"\n            onMouseDown={this.onDragAnchorMouseDown}\n          >\n            <span className=\"fa fa-bars\" />\n          </div>\n          {this.props.plottedSignals.map(\n            ({ messageId, signalUid, messageName }) => {\n              const signal = Object.values(\n                this.props.messages[messageId].frame.signals\n              ).find(s => s.uid === signalUid);\n              const { colors } = signal;\n\n              return (\n                <div\n                  className=\"cabana-explorer-visuals-plot-header\"\n                  key={messageId + \"_\" + signal.uid}\n                >\n                  <div className=\"cabana-explorer-visuals-plot-header-toggle\">\n                    <button\n                      className=\"button--tiny\"\n                      onClick={() => this.props.unplot(messageId, signalUid)}\n                    >\n                      <span>Hide Plot</span>\n                    </button>\n                  </div>\n                  <div className=\"cabana-explorer-visuals-plot-header-copy\">\n                    <div className=\"cabana-explorer-visuals-plot-message\">\n                      <span>{messageName}</span>\n                    </div>\n                    <div className=\"cabana-explorer-visuals-plot-signal\">\n                      <div\n                        className=\"cabana-explorer-visuals-plot-signal-color\"\n                        style={{ background: `rgb(${colors}` }}\n                      />\n                      <strong>{signal.name}</strong>\n                    </div>\n                  </div>\n                </div>\n              );\n            }\n          )}\n          <Measure bounds onResize={this.onPlotResize}>\n            {({ measureRef }) => {\n              return (\n                <div\n                  ref={measureRef}\n                  className=\"cabana-explorer-visuals-plot-container\"\n                >\n                  <Vega\n                    onNewView={this.onNewView}\n                    logLevel={1}\n                    signalListeners={{\n                      clickTime: this.onSignalClickTime,\n                      segment: this.onSignalSegment\n                    }}\n                    renderer={\"canvas\"}\n                    spec={this.state.spec}\n                    actions={false}\n                    data={{\n                      table: this.state.data.series\n                    }}\n                  />\n                </div>\n              );\n            }}\n          </Measure>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport CanGraph from \"./CanGraph\";\n\nrequire(\"element-closest\");\n\nexport default class CanGraphList extends Component {\n  static propTypes = {\n    plottedSignals: PropTypes.array.isRequired,\n    messages: PropTypes.object.isRequired,\n    onGraphTimeClick: PropTypes.func.isRequired,\n    seekTime: PropTypes.number.isRequired,\n    onSegmentChanged: PropTypes.func.isRequired,\n    onSignalUnplotPressed: PropTypes.func.isRequired,\n    segment: PropTypes.array.isRequired,\n    mergePlots: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      draggingSignal: {},\n      dragPos: null,\n      dragShift: null,\n      graphToReceiveDrop: null\n    };\n\n    this.plotListRef = null;\n    this.plotRefs = [];\n    this.renderSignalPlot = this.renderSignalPlot.bind(this);\n    this.onPlotListRefReady = this.onPlotListRefReady.bind(this);\n    this.onGraphDragStart = this.onGraphDragStart.bind(this);\n    this.onGraphDragEnd = this.onGraphDragEnd.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n\n  onGraphDragStart(messageId, signalUid, shiftX, shiftY) {\n    this.setState({\n      draggingSignal: { messageId, signalUid },\n      dragShift: { x: shiftX, y: shiftY }\n    });\n  }\n\n  determineDraggingGraph() {\n    const { draggingSignal } = this.state;\n    return this.plotRefs.find(\n      ({ messageId, signalUid }) =>\n        draggingSignal.messageId === messageId &&\n        draggingSignal.signalUid === signalUid\n    );\n  }\n\n  onMouseMove(e) {\n    const { dragShift } = this.state;\n    if (dragShift === null) {\n      if (this.state.graphToReceiveDrop !== null) {\n        this.setState({ graphToReceiveDrop: null });\n      }\n      return;\n    }\n    const rect = this.plotListRef.getBoundingClientRect();\n    const draggingGraph = this.determineDraggingGraph();\n    if (draggingGraph) {\n      draggingGraph.ref.hidden = true;\n      const ele = document.elementFromPoint(e.clientX, e.clientY);\n      draggingGraph.ref.hidden = false;\n      const closestPlot = ele.closest(\".cabana-explorer-visuals-plot\");\n      const closestPlotRef = this.plotRefs.find(\n        ({ ref, messageId, signalUid }) =>\n          !(\n            messageId === draggingGraph.messageId &&\n            signalUid === draggingGraph.signalUid\n          ) && ref.isEqualNode(closestPlot)\n      );\n      if (closestPlotRef) {\n        this.setState({ graphToReceiveDrop: closestPlotRef });\n      } else {\n        this.setState({ graphToReceiveDrop: null });\n      }\n    }\n    const left = e.clientX - rect.left - dragShift.x;\n    const top = e.clientY - rect.top - dragShift.y;\n\n    this.setState({ dragPos: { left, top } });\n  }\n\n  onGraphDragEnd() {\n    if (this.state.graphToReceiveDrop !== null) {\n      this.props.mergePlots({\n        fromPlot: this.state.draggingSignal,\n        toPlot: this.state.graphToReceiveDrop\n      });\n    }\n\n    this.setState({\n      draggingSignal: {},\n      dragShift: null,\n      dragPos: null,\n      graphToReceiveDrop: null\n    });\n  }\n\n  addCanGraphRef(ref, messageId, signalUid) {\n    if (ref) {\n      let { plotRefs } = this;\n      plotRefs = plotRefs\n        .filter(\n          ref => !(ref.messageId === messageId && ref.signalUid === signalUid)\n        )\n        .concat([{ messageId, signalUid, ref }]);\n      this.plotRefs = plotRefs;\n    }\n  }\n\n  renderSignalPlot(plottedSignals, index) {\n    const { draggingSignal, graphToReceiveDrop } = this.state;\n    const { messageId, signalUid } = plottedSignals[0];\n    const msg = this.props.messages[messageId];\n    const signal = Object.values(msg.frame.signals).find(\n      s => s.uid === signalUid\n    );\n\n    if (!this.plotListRef) {\n      return [];\n    }\n\n    const isDragging =\n      draggingSignal.signalUid === signalUid &&\n      draggingSignal.messageId === messageId;\n    const canReceiveGraphDrop =\n      graphToReceiveDrop &&\n      graphToReceiveDrop.signalUid === signalUid &&\n      graphToReceiveDrop.messageId === messageId;\n    plottedSignals = plottedSignals.map(plottedSignal => {\n      return {\n        messageName: this.props.messages[plottedSignal.messageId].frame.name,\n        ...plottedSignal\n      };\n    });\n    const key = plottedSignals.reduce(\n      (key, { messageId, signalUid }) => key + messageId + \"_\" + signalUid,\n      \"\"\n    );\n    return (\n      <CanGraph\n        onGraphRefAvailable={ref => {\n          this.addCanGraphRef(ref, messageId, signalUid);\n        }}\n        key={key}\n        unplot={this.props.onSignalUnplotPressed}\n        messages={this.props.messages}\n        messageId={messageId}\n        messageName={msg.frame ? msg.frame.name : null}\n        signalSpec={Object.assign(Object.create(signal), signal)}\n        onSegmentChanged={this.props.onSegmentChanged}\n        segment={this.props.segment}\n        onRelativeTimeClick={this.props.onGraphTimeClick}\n        currentTime={this.props.seekTime}\n        onDragStart={this.onGraphDragStart}\n        onDragEnd={this.onGraphDragEnd}\n        container={this.plotListRef}\n        dragPos={isDragging ? this.state.dragPos : null}\n        canReceiveGraphDrop={canReceiveGraphDrop}\n        plottedSignals={plottedSignals}\n        live={this.props.live}\n      />\n    );\n  }\n\n  onPlotListRefReady(ref) {\n    this.plotListRef = ref;\n  }\n\n  render() {\n    return (\n      <div\n        className=\"cabana-explorer-visuals-plots\"\n        ref={this.onPlotListRefReady}\n        onMouseMove={this.onMouseMove}\n        onMouseLeave={this.onGraphDragEnd}\n        onMouseUp={this.onGraphDragEnd}\n      >\n        {this.props.plottedSignals.map(this.renderSignalPlot)}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Hls from \"hls.js\";\n\nexport default class HLS extends Component {\n  static propTypes = {\n    source: PropTypes.string.isRequired,\n    startTime: PropTypes.number.isRequired,\n    playbackSpeed: PropTypes.number.isRequired,\n    playing: PropTypes.bool.isRequired,\n    onVideoElementAvailable: PropTypes.func,\n    onClick: PropTypes.func,\n    onLoadStart: PropTypes.func,\n    onLoadEnd: PropTypes.func,\n    onPlaySeek: PropTypes.func,\n    segmentProgress: PropTypes.func,\n    shouldRestart: PropTypes.bool,\n    onRestart: PropTypes.func\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.videoElement.playbackRate = nextProps.playbackSpeed;\n\n    if (nextProps.source !== this.props.source) {\n      this.loadSource(nextProps.source);\n    }\n    if (nextProps.playing) {\n      if (\n        this.videoElement &&\n        (this.videoElement.paused || this.videoElement.currentTime < 0.01)\n      ) {\n        this.videoElement.play();\n      }\n    } else {\n      this.videoElement.pause();\n    }\n  }\n\n  onSeeking = () => {\n    if (!this.props.playing) {\n      this.props.onLoadStart();\n      this.props.onPlaySeek(this.videoElement.currentTime);\n    }\n  };\n\n  // legacy outer scope variable. Revisit this to see if putting in state\n  // makes more sense\n  shouldInitVideoTime = true;\n  onSeeked = () => {\n    if (!this.props.playing) {\n      if (this.shouldInitVideoTime) {\n        this.videoElement.currentTime = this.props.startTime;\n        this.shouldInitVideoTime = false;\n      }\n      this.props.onLoadEnd();\n    }\n  };\n\n  componentDidMount() {\n    this.player = new Hls({ disablePtsDtsCorrectionInMp4Remux: true });\n    this.loadSource();\n  }\n\n  loadSource(source = this.props.source) {\n    if (this.videoElement) {\n      this.player.loadSource(source);\n      this.player.attachMedia(this.videoElement);\n      this.props.onVideoElementAvailable(this.videoElement);\n      this.videoElement.currentTime = this.props.startTime;\n    }\n  }\n\n  componentWillUnmount() {\n    // destroy hls video source\n    if (this.player) {\n      this.player.destroy();\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"cabana-explorer-visuals-camera-wrapper\"\n        onClick={this.props.onClick}\n      >\n        <video\n          ref={video => {\n            this.videoElement = video;\n          }}\n          autoPlay={this.props.playing}\n          muted\n          onWaiting={this.props.onLoadStart}\n          onPlaying={this.props.onLoadEnd}\n          onSeeking={this.onSeeking}\n          onSeeked={this.onSeeked}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class PlayButton extends Component {\n  static propTypes = {\n    onPlay: PropTypes.func,\n    onPause: PropTypes.func,\n    isPlaying: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { hover: false };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  imageSource() {\n    const { hover } = this.state;\n    const { isPlaying } = this.props;\n    if (isPlaying) {\n      if (hover) {\n        return (\n          process.env.PUBLIC_URL + \"/img/ic_pause_circle_filled_white_24px.svg\"\n        );\n      } else {\n        return (\n          process.env.PUBLIC_URL + \"/img/ic_pause_circle_outline_white_24px.svg\"\n        );\n      }\n    } else {\n      if (hover) {\n        return (\n          process.env.PUBLIC_URL + \"/img/ic_play_circle_filled_white_24px.svg\"\n        );\n      } else {\n        return (\n          process.env.PUBLIC_URL + \"/img/ic_play_circle_outline_white_24px.svg\"\n        );\n      }\n    }\n  }\n\n  onClick(e) {\n    let { isPlaying } = this.props;\n\n    if (!isPlaying) {\n      this.props.onPlay();\n    } else {\n      this.props.onPause();\n    }\n  }\n\n  render() {\n    return (\n      <img\n        src={this.imageSource()}\n        alt={this.props.isPlaying ? \"Pause\" : \"Play\"}\n        className={this.props.className}\n        onClick={this.onClick}\n        onMouseOver={() => this.setState({ hover: true })}\n        onMouseLeave={() => this.setState({ hover: false })}\n      />\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport PlayButton from \"../PlayButton\";\nimport debounce from \"../../utils/debounce\";\n\nexport default class RouteSeeker extends Component {\n  static propTypes = {\n    videoLength: PropTypes.number.isRequired,\n    segmentIndices: PropTypes.arrayOf(PropTypes.number),\n    onUserSeek: PropTypes.func,\n    onPlaySeek: PropTypes.func,\n    video: PropTypes.node,\n    onPause: PropTypes.func,\n    onPlay: PropTypes.func,\n    playing: PropTypes.bool,\n    segmentProgress: PropTypes.func,\n    ratioTime: PropTypes.func,\n    nearestFrameTime: PropTypes.number\n  };\n\n  static hiddenMarkerStyle = { display: \"none\", left: 0 };\n  static zeroSeekedBarStyle = { width: 0 };\n  static hiddenTooltipStyle = { display: \"none\", left: 0 };\n  static markerWidth = 20;\n  static tooltipWidth = 50;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      seekedBarStyle: RouteSeeker.zeroSeekedBarStyle,\n      markerStyle: RouteSeeker.hiddenMarkerStyle,\n      tooltipStyle: RouteSeeker.hiddenTooltipStyle,\n      ratio: 0,\n      tooltipTime: \"0:00\",\n      isPlaying: false,\n      isDragging: false\n    };\n\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.onPlay = this.onPlay.bind(this);\n    this.onPause = this.onPause.bind(this);\n    this.executePlayTimer = this.executePlayTimer.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { ratio } = this.state;\n\n    if (\n      JSON.stringify(this.props.segmentIndices) !==\n      JSON.stringify(nextProps.segmentIndices)\n    ) {\n      this.setState({\n        seekedBarStyle: RouteSeeker.zeroSeekedBarStyle,\n        markerStyle: RouteSeeker.hiddenMarkerStyle,\n        ratio: 0\n      });\n    } else if (nextProps.videoLength !== this.props.videoLength) {\n      // adjust ratio in line with new videoLength\n      const secondsSeeked = ratio * this.props.videoLength;\n      const newRatio = secondsSeeked / nextProps.videoLength;\n      this.updateSeekedBar(newRatio);\n    }\n\n    if (this.props.nearestFrameTime !== nextProps.nearestFrameTime) {\n      const newRatio = this.props.segmentProgress(nextProps.nearestFrameTime);\n      this.updateSeekedBar(newRatio);\n    }\n\n    if (nextProps.playing && !this.state.isPlaying) {\n      this.onPlay();\n    } else if (!nextProps.playing && this.state.isPlaying) {\n      this.onPause();\n    }\n  }\n\n  componentWillUnmount() {\n    window.cancelAnimationFrame(this.playTimer);\n  }\n\n  mouseEventXOffsetPercent(e) {\n    const rect = this.progressBar.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n\n    return 100 * (x / this.progressBar.offsetWidth);\n  }\n\n  updateDraggingSeek = debounce(ratio => this.props.onUserSeek(ratio), 250);\n\n  onMouseMove(e) {\n    const markerOffsetPct = this.mouseEventXOffsetPercent(e);\n    if (markerOffsetPct < 0) {\n      this.onMouseLeave();\n      return;\n    }\n    const markerWidth = RouteSeeker.markerWidth;\n\n    const markerLeft = `calc(${markerOffsetPct + \"%\"} - ${markerWidth / 2}px)`;\n    const markerStyle = {\n      display: \"\",\n      left: markerLeft\n    };\n    const tooltipWidth = RouteSeeker.tooltipWidth;\n    const tooltipLeft = `calc(${markerOffsetPct + \"%\"} - ${tooltipWidth /\n      2}px)`;\n\n    const tooltipStyle = { display: \"flex\", left: tooltipLeft };\n    const ratio = Math.max(0, markerOffsetPct / 100);\n    if (this.state.isDragging) {\n      this.updateSeekedBar(ratio);\n      this.updateDraggingSeek(ratio);\n    }\n\n    this.setState({\n      markerStyle,\n      tooltipStyle,\n      tooltipTime: this.props.ratioTime(ratio).toFixed(3)\n    });\n  }\n\n  onMouseLeave(e) {\n    this.setState({\n      markerStyle: RouteSeeker.hiddenMarkerStyle,\n      tooltipStyle: RouteSeeker.hiddenTooltipStyle,\n      isDragging: false\n    });\n  }\n\n  updateSeekedBar(ratio) {\n    const seekedBarStyle = { width: 100 * ratio + \"%\" };\n    this.setState({ seekedBarStyle, ratio });\n  }\n\n  onClick(e) {\n    let ratio = this.mouseEventXOffsetPercent(e) / 100;\n    ratio = Math.min(1, Math.max(0, ratio));\n    this.updateSeekedBar(ratio);\n    this.props.onUserSeek(ratio);\n  }\n\n  onPlay() {\n    this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n    let { ratio } = this.state;\n    if (ratio >= 1) {\n      ratio = 0;\n    }\n    this.setState({ isPlaying: true, ratio });\n    this.props.onPlay();\n  }\n\n  executePlayTimer() {\n    const { videoElement } = this.props;\n    if (videoElement === null) {\n      this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n      return;\n    }\n\n    let { videoLength, startTime } = this.props;\n    let { currentTime, duration } = videoElement;\n\n    currentTime = roundTime(currentTime);\n    startTime = roundTime(startTime);\n    videoLength = roundTime(videoLength);\n    duration = roundTime(duration);\n\n    let newRatio = (currentTime - startTime) / videoLength;\n\n    if (newRatio === this.state.ratio) {\n      this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n      return;\n    }\n\n    if (newRatio >= 1 || newRatio < 0) {\n      newRatio = 0;\n      currentTime = startTime;\n      this.props.onUserSeek(newRatio);\n    }\n\n    if (newRatio >= 0) {\n      this.updateSeekedBar(newRatio);\n      this.props.onPlaySeek(currentTime);\n    }\n\n    this.playTimer = window.requestAnimationFrame(this.executePlayTimer);\n  }\n\n  onPause() {\n    window.cancelAnimationFrame(this.playTimer);\n    this.setState({ isPlaying: false });\n    this.props.onPause();\n  }\n\n  onMouseDown() {\n    if (!this.state.isDragging) {\n      this.setState({ isDragging: true });\n    }\n  }\n\n  onMouseUp() {\n    if (this.state.isDragging) {\n      this.setState({ isDragging: false });\n    }\n  }\n\n  render() {\n    const { seekedBarStyle, markerStyle, tooltipStyle } = this.state;\n    return (\n      <div className=\"cabana-explorer-visuals-camera-seeker\">\n        <PlayButton\n          className={\"cabana-explorer-visuals-camera-seeker-playbutton\"}\n          onPlay={this.onPlay}\n          onPause={this.onPause}\n          isPlaying={this.state.isPlaying}\n        />\n        <div\n          className={\"cabana-explorer-visuals-camera-seeker-progress\"}\n          onMouseMove={this.onMouseMove}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onMouseDown}\n          onMouseUp={this.onMouseUp}\n          onClick={this.onClick}\n          ref={ref => (this.progressBar = ref)}\n        >\n          <div\n            className={\"cabana-explorer-visuals-camera-seeker-progress-tooltip\"}\n            style={tooltipStyle}\n          >\n            {this.state.tooltipTime}\n          </div>\n          <div\n            className={\"cabana-explorer-visuals-camera-seeker-progress-marker\"}\n            style={markerStyle}\n          />\n          <div\n            className={\"cabana-explorer-visuals-camera-seeker-progress-inner\"}\n            style={seekedBarStyle}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction roundTime(time) {\n  return Math.round(time * 1000) / 1000;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { StyleSheet, css } from \"aphrodite/no-important\";\nimport { derived as RouteApi, video as VideoApi } from \"@commaai/comma-api\";\n\nimport HLS from \"./HLS\";\nimport RouteSeeker from \"./RouteSeeker/RouteSeeker\";\n\nconst Styles = StyleSheet.create({\n  loadingOverlay: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    zIndex: 3\n  },\n  loadingSpinner: {\n    width: \"25%\",\n    height: \"25%\",\n    display: \"block\"\n  },\n  img: {\n    height: 480,\n    display: \"block\",\n    position: \"absolute\",\n    zIndex: 2\n  },\n  hls: {\n    zIndex: 1,\n    height: 480,\n    backgroundColor: \"rgba(0,0,0,0.9)\"\n  },\n  seekBar: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    width: \"100%\",\n    zIndex: 4\n  }\n});\n\nexport default class RouteVideoSync extends Component {\n  static propTypes = {\n    userSeekIndex: PropTypes.number.isRequired,\n    segment: PropTypes.array.isRequired,\n    message: PropTypes.object,\n    canFrameOffset: PropTypes.number.isRequired,\n    url: PropTypes.string.isRequired,\n    playing: PropTypes.bool.isRequired,\n    onPlaySeek: PropTypes.func.isRequired,\n    onUserSeek: PropTypes.func.isRequired,\n    onPlay: PropTypes.func.isRequired,\n    onPause: PropTypes.func.isRequired,\n    userSeekTime: PropTypes.number.isRequired,\n    playSpeed: PropTypes.number.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      shouldShowJpeg: true,\n      isLoading: true,\n      videoElement: null,\n      shouldRestartHls: false\n    };\n\n    this.onLoadStart = this.onLoadStart.bind(this);\n    this.onLoadEnd = this.onLoadEnd.bind(this);\n    this.segmentProgress = this.segmentProgress.bind(this);\n    this.onVideoElementAvailable = this.onVideoElementAvailable.bind(this);\n    this.onUserSeek = this.onUserSeek.bind(this);\n    this.onHlsRestart = this.onHlsRestart.bind(this);\n    this.ratioTime = this.ratioTime.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      this.props.userSeekIndex !== nextProps.userSeekIndex ||\n      this.props.canFrameOffset !== nextProps.canFrameOffset ||\n      (this.props.message &&\n        nextProps.message &&\n        this.props.message.entries.length !== nextProps.message.entries.length)\n    ) {\n      this.setState({ shouldRestartHls: true });\n    }\n    if (\n      nextProps.userSeekTime &&\n      this.props.userSeekTime !== nextProps.userSeekTime\n    ) {\n      if (this.state.videoElement) {\n        this.state.videoElement.currentTime = nextProps.userSeekTime;\n      }\n    }\n  }\n\n  nearestFrameUrl() {\n    const { url } = this.props;\n    const sec = Math.round(this.props.userSeekTime);\n    if (isNaN(sec)) {\n      debugger;\n    }\n    return RouteApi(url).getJpegUrl(sec);\n  }\n\n  loadingOverlay() {\n    return (\n      <div className={css(Styles.loadingOverlay)}>\n        <img\n          className={css(Styles.loadingSpinner)}\n          src={process.env.PUBLIC_URL + \"/img/loading.svg\"}\n          alt={\"Loading video\"}\n        />\n      </div>\n    );\n  }\n\n  onLoadStart() {\n    this.setState({\n      shouldShowJpeg: true,\n      isLoading: true\n    });\n  }\n\n  onLoadEnd() {\n    this.setState({\n      shouldShowJpeg: false,\n      isLoading: false\n    });\n  }\n\n  videoLength() {\n    if (this.props.segment.length) {\n      return this.props.segment[1] - this.props.segment[0];\n    }\n\n    if (this.state.videoElement) {\n      return this.state.videoElement.duration;\n    }\n\n    return 0;\n  }\n\n  startTime() {\n    if (this.props.segment.length) {\n      return this.props.segment[0];\n    }\n\n    return 0;\n  }\n\n  segmentProgress(currentTime) {\n    // returns progress as number in [0,1]\n    let startTime = this.startTime();\n\n    if (currentTime < startTime) {\n      currentTime = startTime;\n    }\n\n    const ratio = (currentTime - startTime) / this.videoLength();\n    return Math.max(0, Math.min(1, ratio));\n  }\n\n  ratioTime(ratio) {\n    return ratio * this.videoLength() + this.startTime();\n  }\n\n  onVideoElementAvailable(videoElement) {\n    this.setState({ videoElement });\n  }\n\n  onUserSeek(ratio) {\n    /* ratio in [0,1] */\n\n    let { videoElement } = this.state;\n    if (isNaN(videoElement.duration)) {\n      this.setState({ shouldRestartHls: true }, funcSeekToRatio);\n      return;\n    }\n    let seekTime = this.ratioTime(ratio);\n    videoElement.currentTime = seekTime;\n\n    const funcSeekToRatio = () => this.props.onUserSeek(seekTime);\n    if (ratio === 0) {\n      this.setState({ shouldRestartHls: true }, funcSeekToRatio);\n    } else {\n      funcSeekToRatio();\n    }\n  }\n\n  onHlsRestart() {\n    this.setState({ shouldRestartHls: false });\n  }\n\n  render() {\n    return (\n      <div className=\"cabana-explorer-visuals-camera\">\n        {this.state.isLoading ? this.loadingOverlay() : null}\n        {this.state.shouldShowJpeg ? (\n          <img\n            src={this.nearestFrameUrl()}\n            className={css(Styles.img)}\n            alt={\"Camera preview at t = \" + Math.round(this.props.userSeekTime)}\n          />\n        ) : null}\n        <HLS\n          className={css(Styles.hls)}\n          source={VideoApi(\n            this.props.url,\n            process.env.REACT_APP_VIDEO_CDN\n          ).getRearCameraStreamIndexUrl()}\n          startTime={this.startTime()}\n          videoLength={this.videoLength()}\n          playbackSpeed={this.props.playSpeed}\n          onVideoElementAvailable={this.onVideoElementAvailable}\n          playing={this.props.playing}\n          onClick={this.props.onVideoClick}\n          onLoadStart={this.onLoadStart}\n          onLoadEnd={this.onLoadEnd}\n          onUserSeek={this.onUserSeek}\n          onPlaySeek={this.props.onPlaySeek}\n          segmentProgress={this.segmentProgress}\n          shouldRestart={this.state.shouldRestartHls}\n          onRestart={this.onHlsRestart}\n        />\n        <RouteSeeker\n          className={css(Styles.seekBar)}\n          nearestFrameTime={this.props.userSeekTime}\n          segmentProgress={this.segmentProgress}\n          startTime={this.startTime()}\n          videoLength={this.videoLength()}\n          segmentIndices={this.props.segmentIndices}\n          onUserSeek={this.onUserSeek}\n          onPlaySeek={this.props.onPlaySeek}\n          videoElement={this.state.videoElement}\n          onPlay={this.props.onPlay}\n          onPause={this.props.onPause}\n          playing={this.props.playing}\n          ratioTime={this.ratioTime}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactList from \"react-list\";\n\nimport cx from \"classnames\";\n\nexport default class CanLog extends Component {\n  static ITEMS_PER_PAGE = 50;\n\n  static propTypes = {\n    plottedSignals: PropTypes.array,\n    segmentIndices: PropTypes.array,\n    onSignalUnplotPressed: PropTypes.func,\n    onSignalPlotPressed: PropTypes.func,\n    message: PropTypes.object,\n    messageIndex: PropTypes.number,\n    onMessageExpanded: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    // only want to display up to length elements at a time\n    // offset, length\n\n    this.state = {\n      length: 0,\n      expandedMessages: [],\n      messageHeights: [],\n      allPacketsExpanded: false\n    };\n\n    this.renderLogListItemMessage = this.renderLogListItemMessage.bind(this);\n    this.addDisplayedMessages = this.addDisplayedMessages.bind(this);\n    this.renderLogListItem = this.renderLogListItem.bind(this);\n    this.renderLogList = this.renderLogList.bind(this);\n    this.onExpandAllChanged = this.onExpandAllChanged.bind(this);\n    this.toggleExpandAllPackets = this.toggleExpandAllPackets.bind(this);\n    this.toggleSignalPlot = this.toggleSignalPlot.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.message && !this.props.message) {\n      this.addDisplayedMessages();\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const curMessageLength = this.props.message\n      ? this.props.message.entries.length\n      : 0;\n    const nextMessageLength = nextProps.message\n      ? nextProps.message.entries.length\n      : 0;\n\n    const shouldUpdate =\n      this.props.message !== nextProps.message ||\n      nextMessageLength !== curMessageLength ||\n      nextProps.messageIndex !== this.props.messageIndex ||\n      nextProps.plottedSignals.length !== this.props.plottedSignals.length ||\n      JSON.stringify(nextProps.segmentIndices) !==\n        JSON.stringify(this.props.segmentIndices) ||\n      JSON.stringify(nextState) !== JSON.stringify(this.state) ||\n      this.props.message !== nextProps.message ||\n      (this.props.message !== undefined &&\n        nextProps.message !== undefined &&\n        this.props.message.frame !== undefined &&\n        nextProps.message.frame !== undefined &&\n        JSON.stringify(this.props.message.frame) !==\n          JSON.stringify(nextProps.message.frame));\n\n    return shouldUpdate;\n  }\n\n  addDisplayedMessages() {\n    const { length } = this.state;\n    const newLength = length + CanLog.ITEMS_PER_PAGE;\n\n    this.setState({ length: newLength });\n  }\n\n  expandMessage(msg, msgIdx) {\n    this.setState({\n      expandedMessages: this.state.expandedMessages.concat([msg.time])\n    });\n    this.props.onMessageExpanded();\n  }\n\n  collapseMessage(msg, msgIdx) {\n    this.setState({\n      expandedMessages: this.state.expandedMessages.filter(\n        expMsgTime => expMsgTime !== msg.time\n      )\n    });\n  }\n\n  isSignalPlotted(msgId, signalUid) {\n    const plottedSignal = this.props.plottedSignals.find(plot =>\n      plot.some(\n        signal => signal.messageId === msgId && signal.signalUid === signalUid\n      )\n    );\n    return plottedSignal !== undefined;\n  }\n\n  signalValuePretty(signal, value) {\n    if (signal.isFloat) {\n      return value.toFixed(3);\n    } else return value;\n  }\n\n  isMessageExpanded(msg) {\n    return this.state.expandedMessages.indexOf(msg.time) !== -1;\n  }\n\n  toggleSignalPlot(msg, signalUid, plotted) {\n    if (!plotted) {\n      this.props.onSignalPlotPressed(msg, signalUid);\n    } else {\n      this.props.onSignalUnplotPressed(msg, signalUid);\n    }\n  }\n\n  toggleExpandPacketSignals(msgEntry) {\n    if (!this.props.message.frame) {\n      return;\n    }\n    const msgIsExpanded =\n      this.state.allPacketsExpanded || this.isMessageExpanded(msgEntry);\n\n    const msgHasSignals =\n      Object.keys(this.props.message.frame.signals).length > 0;\n    if (msgIsExpanded && msgHasSignals) {\n      this.setState({\n        expandedMessages: this.state.expandedMessages.filter(\n          expMsgTime => expMsgTime !== msgEntry.time\n        )\n      });\n    } else if (msgHasSignals) {\n      this.setState({\n        expandedMessages: this.state.expandedMessages.concat([msgEntry.time])\n      });\n      this.props.onMessageExpanded();\n    } else {\n      return;\n    }\n  }\n\n  renderLogListItemSignals(msgEntry) {\n    const { message } = this.props;\n    return (\n      <div className=\"signals-log-list-signals\">\n        {Object.entries(msgEntry.signals).map(([name, value]) => {\n          const signal = message.frame.signals[name];\n          if (signal === undefined) {\n            // Signal removed?\n            return null;\n          }\n          const unit = signal.unit.length > 0 ? signal.unit : \"units\";\n          const isPlotted = this.isSignalPlotted(message.id, signal.uid);\n          const plottedButtonClass = isPlotted ? null : \"button--alpha\";\n          const plottedButtonText = isPlotted ? \"Hide Plot\" : \"Show Plot\";\n          return (\n            <div key={name} className=\"signals-log-list-signal\">\n              <div className=\"signals-log-list-signal-message\">\n                <span>{name}</span>\n              </div>\n              <div className=\"signals-log-list-signal-value\">\n                <span>\n                  (<strong>{this.signalValuePretty(signal, value)}</strong>{\" \"}\n                  {unit})\n                </span>\n              </div>\n              <div\n                className=\"signals-log-list-signal-action\"\n                onClick={() => {\n                  this.toggleSignalPlot(message.id, signal.uid, isPlotted);\n                }}\n              >\n                <button className={cx(\"button--tiny\", plottedButtonClass)}>\n                  <span>{plottedButtonText}</span>\n                </button>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  renderLogListItemMessage(msgEntry, key) {\n    const { message } = this.props;\n    const msgIsExpanded =\n      this.state.allPacketsExpanded || this.isMessageExpanded(msgEntry);\n    const msgHasSignals = Object.keys(msgEntry.signals).length > 0;\n    const hasSignalsClass = msgHasSignals ? \"has-signals\" : null;\n    const expandedClass = msgIsExpanded ? \"is-expanded\" : null;\n    const row = (\n      <div\n        key={key}\n        className={cx(\"signals-log-list-item\", hasSignalsClass, expandedClass)}\n      >\n        <div\n          className=\"signals-log-list-item-header\"\n          onClick={() => {\n            this.toggleExpandPacketSignals(msgEntry);\n          }}\n        >\n          <div className=\"signals-log-list-message\">\n            <strong>\n              {(message.frame ? message.frame.name : null) || message.id}\n            </strong>\n          </div>\n          <div className=\"signals-log-list-time\">\n            <span>[{msgEntry.relTime.toFixed(3)}]</span>\n          </div>\n          <div className=\"signals-log-list-bytes\">\n            <span className=\"t-mono\">{msgEntry.hexData}</span>\n          </div>\n        </div>\n        <div className=\"signals-log-list-item-body\">\n          {msgIsExpanded ? this.renderLogListItemSignals(msgEntry) : null}\n        </div>\n      </div>\n    );\n\n    return row;\n  }\n\n  renderLogListItem(index, key) {\n    let offset = this.props.messageIndex;\n    if (offset === 0 && this.props.segmentIndices.length === 2) {\n      offset = this.props.segmentIndices[0];\n    }\n    if (offset + index < 0) {\n      debugger;\n    }\n    if (offset + index < this.props.message.entries.length) {\n      return this.renderLogListItemMessage(\n        this.props.message.entries[offset + index],\n        key\n      );\n    } else {\n      return null;\n    }\n  }\n\n  renderLogList(items, ref) {\n    return (\n      <div className=\"signals-log-list\">\n        <div className=\"signals-log-list-header\">\n          <div className=\"signals-log-list-message\">Message</div>\n          <div className=\"signals-log-list-time\">Time</div>\n          <div className=\"signals-log-list-bytes\">Bytes</div>\n        </div>\n        <div className=\"signals-log-list-items\" ref={ref}>\n          {items}\n        </div>\n      </div>\n    );\n  }\n\n  listLength() {\n    const { segmentIndices, messageIndex } = this.props;\n    if (messageIndex > 0) {\n      return this.props.message.entries.length - messageIndex;\n    } else if (segmentIndices.length === 2) {\n      return segmentIndices[1] - segmentIndices[0];\n    } else if (this.props.message) {\n      return this.props.message.entries.length;\n    } else {\n      // no message yet\n      return 0;\n    }\n  }\n\n  onExpandAllChanged(e) {\n    this.setState({ allPacketsExpanded: e.target.checked });\n  }\n\n  toggleExpandAllPackets() {\n    this.setState({ allPacketsExpanded: !this.state.allPacketsExpanded });\n  }\n\n  render() {\n    let expandAllText = this.state.allPacketsExpanded\n      ? \"Collapse All\"\n      : \"Expand All\";\n    let expandAllClass = this.state.allPacketsExpanded ? null : \"button--alpha\";\n    return (\n      <div className=\"cabana-explorer-signals-log\">\n        <div className=\"cabana-explorer-signals-log-header\">\n          <strong>Message Packets</strong>\n          <button\n            className={cx(\"button--tiny\", expandAllClass)}\n            onClick={this.toggleExpandAllPackets}\n          >\n            {expandAllText}\n          </button>\n        </div>\n        <div className=\"cabana-explorer-signals-log-body\">\n          <ReactList\n            itemRenderer={this.renderLogListItem}\n            itemsRenderer={this.renderLogList}\n            length={this.listLength()}\n            pageSize={50}\n            updateWhenThisValueChanges={this.props.messageIndex}\n            type=\"variable\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","function findTimeIndex(entries, time) {\n  return entries.findIndex(e => e.time >= time);\n}\n\nfunction findRelativeTimeIndex(entries, relTime) {\n  return entries.findIndex(e => e.relTime >= relTime);\n}\n\nfunction findSegmentIndices(\n  entries,\n  [segmentTimeLow, segmentTimeHi],\n  isRelative\n) {\n  /*\n    Finds pair of indices (inclusive, exclusive) within entries array\n    whose timestamps match segmentTimeLow and segmentTimeHi.\n    if isRelative === true, then the segment times\n    are assumed to correspond to the `relTime` field of each entry.\n\n    Returns `[segmentIdxLow, segmentIdxHigh]`\n             (inclusive, exclusive)\n    */\n  let timeIndexFunc =\n    isRelative === true ? findRelativeTimeIndex : findTimeIndex;\n\n  const segmentIdxLow = Math.max(0, timeIndexFunc(entries, segmentTimeLow));\n\n  const upperSegments = entries.slice(segmentIdxLow);\n  let upperSegmentIdxHi = timeIndexFunc(upperSegments, segmentTimeHi);\n  const segmentIdxHi =\n    upperSegmentIdxHi >= 0\n      ? upperSegmentIdxHi + segmentIdxLow + 1\n      : entries.length - 1;\n\n  return [\n    segmentIdxLow,\n    Math.max(0, Math.min(segmentIdxHi, entries.length - 1))\n  ];\n}\n\nexport default { findTimeIndex, findRelativeTimeIndex, findSegmentIndices };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { PART_SEGMENT_LENGTH } from \"../config\";\n\nexport default class PartSelector extends Component {\n  static selectorWidth = 150;\n  static propTypes = {\n    onPartChange: PropTypes.func.isRequired,\n    partsCount: PropTypes.number.isRequired,\n    selectedPart: PropTypes.number.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedPartStyle: this.makePartStyle(props.partsCount, 0),\n      isDragging: false\n    };\n\n    this.selectNextPart = this.selectNextPart.bind(this);\n    this.selectPrevPart = this.selectPrevPart.bind(this);\n    this.onSelectedPartDragStart = this.onSelectedPartDragStart.bind(this);\n    this.onSelectedPartMouseMove = this.onSelectedPartMouseMove.bind(this);\n    this.onSelectedPartDragEnd = this.onSelectedPartDragEnd.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  makePartStyle(partsCount, selectedPart) {\n    return {\n      left: selectedPart / partsCount * PartSelector.selectorWidth,\n      width: PART_SEGMENT_LENGTH / partsCount * PartSelector.selectorWidth\n    };\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextProps.selectedPart !== this.props.selectedPart) {\n      console.log(\"updating styles for part picker\");\n      const selectedPartStyle = this.makePartStyle(\n        nextProps.partsCount,\n        nextProps.selectedPart\n      );\n      this.setState({ selectedPartStyle });\n    }\n  }\n\n  selectPart(part) {\n    part = Math.max(\n      0,\n      Math.min(this.props.partsCount - PART_SEGMENT_LENGTH, part)\n    );\n    if (part === this.props.selectedPart) {\n      return;\n    }\n\n    this.props.onPartChange(part);\n  }\n\n  selectNextPart() {\n    let { selectedPart } = this.props;\n    selectedPart++;\n    if (selectedPart + PART_SEGMENT_LENGTH >= this.props.partsCount) {\n      return;\n    }\n\n    this.selectPart(selectedPart);\n  }\n\n  selectPrevPart() {\n    let { selectedPart } = this.props;\n    selectedPart--;\n    if (selectedPart < 0) {\n      return;\n    }\n\n    this.selectPart(selectedPart);\n  }\n\n  partAtClientX(clientX) {\n    const rect = this.selectorRect.getBoundingClientRect();\n    const x = clientX - rect.left;\n    return Math.floor(x * this.props.partsCount / PartSelector.selectorWidth);\n  }\n\n  onSelectedPartDragStart(e) {\n    this.setState({ isDragging: true });\n    document.addEventListener(\"mouseup\", this.onSelectedPartDragEnd);\n  }\n\n  onSelectedPartMouseMove(e) {\n    if (!this.state.isDragging) return;\n\n    const part = this.partAtClientX(e.clientX);\n    this.selectPart(part);\n  }\n\n  onSelectedPartDragEnd(e) {\n    this.setState({ isDragging: false });\n    document.removeEventListener(\"mouseup\", this.onSelectedPartDragEnd);\n  }\n\n  onClick(e) {\n    const part = this.partAtClientX(e.clientX);\n    this.selectPart(part);\n  }\n\n  render() {\n    const { selectedPartStyle } = this.state;\n    if (this.props.partsCount <= PART_SEGMENT_LENGTH) {\n      // all parts are available so no need to render the partselector\n\n      return null;\n    }\n    return (\n      <div className=\"cabana-explorer-part-selector\">\n        <div\n          className=\"cabana-explorer-part-selector-track\"\n          ref={selector => (this.selectorRect = selector)}\n          style={{ width: PartSelector.selectorWidth }}\n          onMouseMove={this.onSelectedPartMouseMove}\n          onClick={this.onClick}\n        >\n          <div\n            className=\"cabana-explorer-part-selector-track-active\"\n            style={selectedPartStyle}\n            onMouseDown={this.onSelectedPartDragStart}\n            onMouseUp={this.onSelectedPartDragEnd}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nexport default class PlaySpeedSelector extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(value) {\n    if (this.props.onPlaySpeedChanged) {\n      this.props.onPlaySpeedChanged(Number(value.currentTarget.value));\n    }\n  }\n\n  render() {\n    return (\n      <div\n        style={{\n          display: \"inline-block\",\n          float: \"right\",\n          margin: 10\n        }}\n      >\n        <label>Play speed:&nbsp;</label>\n        <select\n          id=\"playSpeed\"\n          style={{\n            width: 70\n          }}\n          onChange={this.onChange}\n          value={this.props.playSpeed}\n        >\n          <option value=\"0.1\">0.1x</option>\n          <option value=\"0.5\">0.5x</option>\n          <option value=\"1\">1x</option>\n          <option value=\"2\">2x</option>\n        </select>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport cx from \"classnames\";\n\nimport AddSignals from \"./AddSignals\";\nimport CanGraphList from \"./CanGraphList\";\nimport RouteVideoSync from \"./RouteVideoSync\";\nimport CanLog from \"./CanLog\";\nimport Entries from \"../models/can/entries\";\nimport debounce from \"../utils/debounce\";\nimport PartSelector from \"./PartSelector\";\nimport PlaySpeedSelector from \"./PlaySpeedSelector\";\n\nexport default class Explorer extends Component {\n  static propTypes = {\n    selectedMessage: PropTypes.string,\n    url: PropTypes.string,\n    live: PropTypes.bool.isRequired,\n    messages: PropTypes.objectOf(PropTypes.object),\n    onConfirmedSignalChange: PropTypes.func.isRequired,\n    canFrameOffset: PropTypes.number,\n    firstCanTime: PropTypes.number,\n    onSeek: PropTypes.func.isRequired,\n    autoplay: PropTypes.bool.isRequired,\n    onPartChange: PropTypes.func.isRequired,\n    partsCount: PropTypes.number\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      plottedSignals: [],\n      segment: [],\n      segmentIndices: [],\n      shouldShowAddSignal: true,\n      userSeekIndex: 0,\n      userSeekTime: 0,\n      playing: props.autoplay,\n      signals: {},\n      playSpeed: 1\n    };\n    this.onSignalPlotPressed = this.onSignalPlotPressed.bind(this);\n    this.onSignalUnplotPressed = this.onSignalUnplotPressed.bind(this);\n    this.onSegmentChanged = this.onSegmentChanged.bind(this);\n    this.showAddSignal = this.showAddSignal.bind(this);\n    this.onGraphTimeClick = this.onGraphTimeClick.bind(this);\n    this.onUserSeek = this.onUserSeek.bind(this);\n    this.onPlaySeek = this.onPlaySeek.bind(this);\n    this.onPlay = this.onPlay.bind(this);\n    this.onPause = this.onPause.bind(this);\n    this.onVideoClick = this.onVideoClick.bind(this);\n    this.onSignalPlotChange = this.onSignalPlotChange.bind(this);\n    this._onKeyDown = this._onKeyDown.bind(this);\n    this.mergePlots = this.mergePlots.bind(this);\n    this.toggleShouldShowAddSignal = this.toggleShouldShowAddSignal.bind(this);\n    this.changePlaySpeed = this.changePlaySpeed.bind(this);\n  }\n\n  _onKeyDown(e) {\n    if (e.keyCode === 27) {\n      // escape\n      this.resetSegment();\n    }\n  }\n\n  componentWillMount() {\n    document.addEventListener(\"keydown\", this._onKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this._onKeyDown);\n  }\n\n  clipSegment(segment, segmentIndices, nextMessage) {\n    if (segment.length === 2) {\n      const segmentStartIdx = nextMessage.entries.findIndex(\n        e => e.relTime >= segment[0]\n      );\n      let segmentEndIdx = nextMessage.entries.findIndex(\n        e => e.relTime >= segment[1]\n      );\n      if (segmentStartIdx !== -1) {\n        if (segmentEndIdx === -1) {\n          // previous segment end is past bounds of this message\n          segmentEndIdx = nextMessage.entries.length - 1;\n        }\n        const segmentStartTime = nextMessage.entries[segmentStartIdx].relTime;\n        const segmentEndTime = nextMessage.entries[segmentEndIdx].relTime;\n\n        segment = [segmentStartTime, segmentEndTime];\n        segmentIndices = [segmentStartIdx, segmentEndIdx];\n      } else {\n        // segment times are out of boudns for this message\n        segment = [];\n        segmentIndices = [];\n      }\n    }\n\n    return { segment, segmentIndices };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextMessage = nextProps.messages[nextProps.selectedMessage];\n    const curMessage = this.props.messages[this.props.selectedMessage];\n    let { plottedSignals } = this.state;\n\n    if (Object.keys(nextProps.messages).length === 0) {\n      this.resetSegment();\n    }\n    if (nextMessage && nextMessage.frame && nextMessage !== curMessage) {\n      const nextSignalNames = Object.keys(nextMessage.frame.signals);\n\n      if (nextSignalNames.length === 0) {\n        this.setState({ shouldShowAddSignal: true });\n      }\n    }\n\n    // remove plottedSignals that no longer exist\n    plottedSignals = plottedSignals\n      .map(plot =>\n        plot.filter(({ messageId, signalUid }, index) => {\n          const messageExists = !!nextProps.messages[messageId];\n          let signalExists = true;\n          if (messageExists) {\n            signalExists = Object.values(\n              nextProps.messages[messageId].frame.signals\n            ).some(signal => signal.uid === signalUid);\n          }\n\n          return messageExists && signalExists;\n        })\n      )\n      .filter(plot => plot.length > 0);\n\n    this.setState({ plottedSignals });\n\n    if (\n      nextProps.selectedMessage &&\n      nextProps.selectedMessage !== this.props.selectedMessage\n    ) {\n      // Update segment and seek state\n      // by finding a entry indices\n      // corresponding to old message segment/seek times.\n\n      let { segment, segmentIndices } = this.clipSegment(\n        this.state.segment,\n        this.state.segmentIndices,\n        nextMessage\n      );\n\n      const nextSeekMsgEntry = nextMessage.entries[nextProps.seekIndex];\n      let nextSeekTime;\n      if (nextSeekMsgEntry) {\n        nextSeekTime = nextSeekMsgEntry.relTime;\n      } else if (segment.length === 2) {\n        nextSeekTime = segment[0];\n      } else {\n        nextSeekTime = nextMessage.entries[0];\n      }\n      // console.log(this.state.segment, '->', segment, segmentIndices, nextSeekTime);\n      this.setState({\n        segment,\n        segmentIndices,\n        userSeekIndex: nextProps.seekIndex,\n        userSeekTime: nextSeekTime\n      });\n    }\n\n    if (\n      nextMessage &&\n      curMessage &&\n      nextMessage.entries.length !== curMessage.entries.length\n    ) {\n      let { segment, segmentIndices } = this.clipSegment(\n        this.state.segment,\n        this.state.segmentIndices,\n        nextMessage\n      );\n      // console.log(this.state.segment, '->', segment, segmentIndices);\n      this.setState({ segment, segmentIndices });\n    }\n  }\n\n  changePlaySpeed(value) {\n    this.setState({\n      playSpeed: value\n    });\n  }\n\n  timeWindow() {\n    const { routeStartTime, currentParts } = this.props;\n\n    if (routeStartTime) {\n      const partStartOffset = currentParts[0] * 60,\n        partEndOffset = (currentParts[1] + 1) * 60;\n\n      const windowStartTime = routeStartTime\n        .clone()\n        .add(partStartOffset, \"s\")\n        .format(\"HH:mm:ss\");\n      const windowEndTime = routeStartTime\n        .clone()\n        .add(partEndOffset, \"s\")\n        .format(\"HH:mm:ss\");\n\n      return `${windowStartTime} - ${windowEndTime}`;\n    } else return \"\";\n  }\n\n  onSignalPlotPressed(messageId, signalUid) {\n    let { plottedSignals } = this.state;\n\n    plottedSignals = [[{ messageId, signalUid }], ...plottedSignals];\n\n    this.setState({ plottedSignals });\n  }\n\n  onSignalUnplotPressed(messageId, signalUid) {\n    const { plottedSignals } = this.state;\n    const newPlottedSignals = plottedSignals\n      .map(plot =>\n        plot.filter(\n          signal =>\n            !(signal.messageId === messageId && signal.signalUid === signalUid)\n        )\n      )\n      .filter(plot => plot.length > 0);\n\n    this.setState({ plottedSignals: newPlottedSignals });\n  }\n\n  updateSegment = debounce((messageId, segment) => {\n    const { entries } = this.props.messages[this.props.selectedMessage];\n    let segmentIndices = Entries.findSegmentIndices(entries, segment, true);\n\n    // console.log(this.state.segment, '->', segment, segmentIndices);\n    if (\n      segment[0] === this.props.currentParts[0] * 60 &&\n      segment[1] === (this.props.currentParts[1] + 1) * 60\n    ) {\n      segment = [];\n      segmentIndices = [];\n    }\n    this.setState({\n      segment,\n      segmentIndices,\n      userSeekIndex: segmentIndices[0],\n      userSeekTime: segment[0] || 0\n    });\n  }, 250);\n\n  onSegmentChanged(messageId, segment) {\n    if (Array.isArray(segment)) {\n      this.updateSegment(messageId, segment);\n    }\n  }\n\n  resetSegment() {\n    const { segment, segmentIndices } = this.state;\n    const { messages, selectedMessage } = this.props;\n    if (segment.length > 0 || segmentIndices.length > 0) {\n      // console.log(this.state.segment, '->', segment, segmentIndices);\n      this.setState({\n        segment: [],\n        segmentIndices: [],\n        userSeekIndex: 0\n      });\n    }\n  }\n\n  showAddSignal() {\n    this.setState({ shouldShowAddSignal: true });\n  }\n\n  toggleShouldShowAddSignal() {\n    this.setState({ shouldShowAddSignal: !this.state.shouldShowAddSignal });\n  }\n\n  indexFromSeekTime(time) {\n    // returns index guaranteed to be in [0, entries.length - 1]\n\n    const { entries } = this.props.messages[this.props.selectedMessage];\n    if (entries.length === 0) return null;\n\n    const { segmentIndices } = this.state;\n    if (segmentIndices.length === 2 && segmentIndices[0] >= 0) {\n      for (\n        let i = segmentIndices[0],\n          l = Math.min(entries.length - 1, segmentIndices[1]);\n        i <= l;\n        i++\n      ) {\n        if (entries[i].relTime >= time) {\n          return i;\n        }\n      }\n      return segmentIndices[1];\n    } else {\n      for (let i = 0; i < entries.length; i++) {\n        if (entries[i].relTime >= time) {\n          return i;\n        }\n      }\n      return entries.length - 1;\n    }\n  }\n\n  onUserSeek(time) {\n    this.setState({ userSeekTime: time });\n    const message = this.props.messages[this.props.selectedMessage];\n\n    this.props.onUserSeek(time);\n    this.setState({ userSeekTime: time });\n  }\n\n  onPlaySeek(time) {\n    const message = this.props.messages[this.props.selectedMessage];\n    if (!message || message.entries.length === 0) {\n      this.props.onSeek(0, time);\n      return;\n    }\n\n    const seekIndex = this.indexFromSeekTime(time);\n    const seekTime = time;\n    this.props.onSeek(seekIndex, seekTime);\n  }\n\n  onGraphTimeClick(messageId, time) {\n    this.onUserSeek(time);\n  }\n\n  onPlay() {\n    this.setState({ playing: true });\n  }\n\n  onPause() {\n    this.setState({ playing: false });\n  }\n\n  secondsLoadedRouteRelative(currentParts) {\n    return (currentParts[1] - currentParts[0] + 1) * 60;\n  }\n\n  secondsLoaded() {\n    return this.props.partsCount * 60;\n  }\n\n  onVideoClick() {\n    const playing = !this.state.playing;\n    this.setState({ playing });\n  }\n\n  seekTime() {\n    const { userSeekIndex } = this.state;\n    const msg = this.props.messages[this.props.selectedMessage];\n    return msg.entries[userSeekIndex].time;\n  }\n\n  onSignalPlotChange(shouldPlot, messageId, signalUid) {\n    if (shouldPlot) {\n      this.onSignalPlotPressed(messageId, signalUid);\n    } else {\n      this.onSignalUnplotPressed(messageId, signalUid);\n    }\n  }\n\n  renderSelectMessagePrompt() {\n    return (\n      <div className=\"cabana-explorer-select-prompt\">\n        <h1>Select a message</h1>\n      </div>\n    );\n  }\n\n  selectedMessagePlottedSignalUids() {\n    const { plottedSignals } = this.state;\n    return plottedSignals\n      .map(plot =>\n        plot\n          .filter(\n            ({ messageId, signalUid }) =>\n              messageId === this.props.selectedMessage\n          )\n          .map(({ signalUid }) => signalUid)\n      )\n      .reduce((arr, signalUid) => arr.concat(signalUid), []);\n  }\n\n  renderExplorerSignals() {\n    const selectedMessageKey = this.props.selectedMessage;\n    const selectedMessage = this.props.messages[selectedMessageKey];\n    const selectedMessageName =\n      selectedMessage.frame !== undefined\n        ? selectedMessage.frame.name\n        : \"undefined\";\n    return (\n      <div className=\"cabana-explorer-signals-wrapper\">\n        <div className=\"cabana-explorer-signals-header\">\n          <div className=\"cabana-explorer-signals-header-context\">\n            <h5 className=\"t-capline\">Selected Message:</h5>\n            <h3>{selectedMessageName}</h3>\n          </div>\n          <div className=\"cabana-explorer-signals-header-action\">\n            <button\n              className=\"button--small\"\n              onClick={() =>\n                this.props.showEditMessageModal(selectedMessageKey)\n              }\n            >\n              Edit\n            </button>\n          </div>\n        </div>\n        <div\n          className=\"cabana-explorer-signals-subheader\"\n          onClick={this.toggleShouldShowAddSignal}\n        >\n          <strong>Edit Signals</strong>\n        </div>\n        <div className=\"cabana-explorer-signals-window\">\n          {this.state.shouldShowAddSignal ? (\n            <AddSignals\n              onConfirmedSignalChange={this.props.onConfirmedSignalChange}\n              message={this.props.messages[this.props.selectedMessage]}\n              onClose={() => {\n                this.setState({ shouldShowAddSignal: false });\n              }}\n              messageIndex={this.props.seekIndex}\n              onSignalPlotChange={this.onSignalPlotChange}\n              plottedSignalUids={this.selectedMessagePlottedSignalUids()}\n            />\n          ) : null}\n          <CanLog\n            message={this.props.messages[this.props.selectedMessage]}\n            messageIndex={this.props.seekIndex}\n            segmentIndices={this.state.segmentIndices}\n            plottedSignals={this.state.plottedSignals}\n            onSignalPlotPressed={this.onSignalPlotPressed}\n            onSignalUnplotPressed={this.onSignalUnplotPressed}\n            showAddSignal={this.showAddSignal}\n            onMessageExpanded={this.onPause}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  mergePlots({ fromPlot, toPlot }) {\n    let { plottedSignals } = this.state;\n\n    // remove fromPlot from plottedSignals\n    const fromPlotIdx = plottedSignals.findIndex(plot =>\n      plot.some(\n        signal =>\n          signal.signalUid === fromPlot.signalUid &&\n          signal.messageId === fromPlot.messageId\n      )\n    );\n    plottedSignals.splice(fromPlotIdx, 1);\n\n    const toPlotIdx = plottedSignals.findIndex(plot =>\n      plot.some(\n        signal =>\n          signal.signalUid === toPlot.signalUid &&\n          signal.messageId === toPlot.messageId\n      )\n    );\n    plottedSignals[toPlotIdx] = [fromPlot, toPlot];\n\n    this.setState({ plottedSignals });\n  }\n\n  render() {\n    const signalsExpandedClass = this.state.shouldShowAddSignal\n      ? \"is-expanded\"\n      : null;\n\n    let graphSegment = this.state.segment;\n    if (!graphSegment.length && this.props.currentParts) {\n      graphSegment = [\n        this.props.currentParts[0] * 60,\n        (this.props.currentParts[1] + 1) * 60\n      ];\n    }\n\n    return (\n      <div className=\"cabana-explorer\">\n        <div className={cx(\"cabana-explorer-signals\", signalsExpandedClass)}>\n          {this.props.messages[this.props.selectedMessage]\n            ? this.renderExplorerSignals()\n            : this.renderSelectMessagePrompt()}\n        </div>\n        <div className=\"cabana-explorer-visuals\">\n          {this.props.live === false ? (\n            <div>\n              <PlaySpeedSelector\n                playSpeed={this.state.playSpeed}\n                onPlaySpeedChanged={this.changePlaySpeed}\n              />\n              <div className=\"cabana-explorer-visuals-header g-row\" />\n              <br />\n              <RouteVideoSync\n                message={this.props.messages[this.props.selectedMessage]}\n                segment={this.state.segment}\n                seekIndex={this.props.seekIndex}\n                userSeekIndex={this.state.userSeekIndex}\n                playing={this.state.playing}\n                url={this.props.url}\n                canFrameOffset={this.props.canFrameOffset}\n                firstCanTime={this.props.firstCanTime}\n                onVideoClick={this.onVideoClick}\n                onPlaySeek={this.onPlaySeek}\n                onUserSeek={this.onUserSeek}\n                onPlay={this.onPlay}\n                onPause={this.onPause}\n                userSeekTime={this.state.userSeekTime}\n                playSpeed={this.state.playSpeed}\n              />\n            </div>\n          ) : null}\n          {this.state.segment.length > 0 ? (\n            <div\n              className={\"cabana-explorer-visuals-segmentreset\"}\n              onClick={() => {\n                this.resetSegment();\n              }}\n            >\n              <p>Reset Segment</p>\n            </div>\n          ) : null}\n          <CanGraphList\n            plottedSignals={this.state.plottedSignals}\n            messages={this.props.messages}\n            onGraphTimeClick={this.onGraphTimeClick}\n            seekTime={this.props.seekTime}\n            onSegmentChanged={this.onSegmentChanged}\n            onSignalUnplotPressed={this.onSignalUnplotPressed}\n            segment={graphSegment}\n            mergePlots={this.mergePlots}\n            live={this.props.live}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Measure from \"react-measure\";\n\nexport default class Modal extends Component {\n  static propTypes = {\n    variations: PropTypes.array,\n    disableClose: PropTypes.bool,\n    handleClose: PropTypes.func,\n    handleSave: PropTypes.func,\n    title: PropTypes.string,\n    subtitle: PropTypes.string,\n    navigation: PropTypes.node,\n    actions: PropTypes.node,\n    footer: PropTypes.node\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      windowHeight: {},\n      modalHeight: {}\n    };\n\n    this.updateHeights = this.updateHeights.bind(this);\n  }\n\n  updateHeights(contentRect) {\n    this.setState({ windowHeight: window.innerHeight });\n    this.setState({ modalHeight: contentRect.bounds.height });\n  }\n\n  readVariationClasses() {\n    if (this.props.variations) {\n      const { variations } = this.props;\n      const classes = variations.reduce(\n        (classes, variation) => classes + `cabana-modal--${variation} `,\n        \"\"\n      );\n      return classes;\n    }\n  }\n\n  checkClosability() {\n    return this.props.disableClose || false;\n  }\n\n  checkYScrollability() {\n    return this.state.modalHeight > this.state.windowHeight;\n  }\n\n  render() {\n    return (\n      <div\n        className={cx(\"cabana-modal\", this.readVariationClasses(), {\n          \"cabana-modal--not-closable\": this.checkClosability(),\n          \"cabana-modal--scrollable-y\": this.checkYScrollability()\n        })}\n      >\n        <Measure\n          bounds\n          onResize={contentRect => {\n            this.updateHeights(contentRect);\n          }}\n        >\n          {({ measureRef }) => (\n            <div ref={measureRef} className=\"cabana-modal-container\">\n              <div\n                className=\"cabana-modal-close-icon\"\n                onClick={this.props.handleClose}\n              />\n              <div className=\"cabana-modal-header\">\n                <h1>{this.props.title}</h1>\n                <p>{this.props.subtitle}</p>\n              </div>\n              <div className=\"cabana-modal-navigation\">\n                {this.props.navigation}\n              </div>\n              <div className=\"cabana-modal-body\">\n                <div className=\"cabana-modal-body-window\">\n                  {this.props.children}\n                </div>\n                <div className=\"cabana-modal-body-gradient\" />\n              </div>\n              <div className=\"cabana-modal-actions\">{this.props.actions}</div>\n              <div className=\"cabana-modal-footer\">{this.props.footer}</div>\n            </div>\n          )}\n        </Measure>\n        <div\n          className=\"cabana-modal-backdrop\"\n          onClick={this.props.handleClose}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Moment from \"moment\";\nimport _ from \"lodash\";\nimport cx from \"classnames\";\nimport CommaAuth from \"@commaai/my-comma-auth\";\n\nimport { EXPLORER_URL } from \"../../config\";\nimport Modal from \"../Modals/baseModal\";\n\nexport default class OnboardingModal extends Component {\n  static propTypes = {\n    handlePandaConnect: PropTypes.func,\n    routes: PropTypes.array\n  };\n\n  static instructionalImages = {\n    step2: require(\"../../images/webusb-enable-experimental-features.png\"),\n    step3: require(\"../../images/webusb-enable-webusb.png\")\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      webUsbEnabled: !!navigator.usb,\n      viewingUsbInstructions: false,\n      pandaConnected: false\n    };\n\n    this.attemptPandaConnection = this.attemptPandaConnection.bind(this);\n    this.toggleUsbInstructions = this.toggleUsbInstructions.bind(this);\n    this.navigateToExplorer = this.navigateToExplorer.bind(this);\n  }\n\n  attemptPandaConnection() {\n    if (!this.state.webUsbEnabled) {\n      return;\n    }\n    this.props.handlePandaConnect();\n  }\n\n  toggleUsbInstructions() {\n    this.setState({\n      viewingUsbInstructions: !this.state.viewingUsbInstructions\n    });\n  }\n\n  navigateToExplorer() {\n    window.location.href = EXPLORER_URL;\n  }\n\n  filterRoutesWithCan(drive) {\n    return drive.can === true;\n  }\n\n  renderPandaEligibility() {\n    const { webUsbEnabled, pandaConnected } = this.state;\n    const { attemptingPandaConnection } = this.props;\n    if (!webUsbEnabled) {\n      return (\n        <p>\n          <i className=\"fa fa-exclamation-triangle\" />\n          <a onClick={this.toggleUsbInstructions}>\n            <span>WebUSB is not enabled in your Chrome settings</span>\n          </a>\n        </p>\n      );\n    } else if (!pandaConnected && attemptingPandaConnection) {\n      return (\n        <p>\n          <i className=\"fa fa-spinner animate-spin\" />\n          <span className=\"animate-pulse-opacity\">\n            Waiting for panda USB connection\n          </span>\n        </p>\n      );\n    }\n  }\n\n  renderLogin() {\n    return (\n      <button\n        onClick={this.navigateToExplorer}\n        className=\"button--primary button--kiosk\"\n      >\n        <i className=\"fa fa-video-camera\" />\n        <strong>\n          {CommaAuth.isAuthenticated()\n            ? \"Find a drive in Explorer\"\n            : \"Log in with Explorer\"}\n        </strong>\n        <sup>Click \"View CAN Data\" while replaying a drive</sup>\n      </button>\n    );\n  }\n\n  renderOnboardingOptions() {\n    return (\n      <div className=\"cabana-onboarding-modes\">\n        <div className=\"cabana-onboarding-mode\">{this.renderLogin()}</div>\n        <div className=\"cabana-onboarding-mode\">\n          <button\n            className={cx(\"button--secondary button--kiosk\", {\n              \"is-disabled\":\n                !this.state.webUsbEnabled ||\n                this.props.attemptingPandaConnection\n            })}\n            onClick={this.attemptPandaConnection}\n          >\n            <i className=\"fa fa-bolt\" />\n            <strong>Launch Realtime Streaming</strong>\n            <sup>\n              Interactively stream car data over USB with <em>panda</em>\n            </sup>\n            {this.renderPandaEligibility()}\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  renderUsbInstructions() {\n    return (\n      <div className=\"cabana-onboarding-instructions\">\n        <button\n          className=\"button--small button--inverted\"\n          onClick={this.toggleUsbInstructions}\n        >\n          <i className=\"fa fa-chevron-left\" />\n          <span> Go back</span>\n        </button>\n        <h3>Follow these directions to enable WebUSB:</h3>\n        <ol className=\"cabana-onboarding-instructions-list list--bubbled\">\n          <li>\n            <p>\n              <strong>Open your Chrome settings:</strong>\n            </p>\n            <div className=\"inset\">\n              <span>\n                chrome://flags/#enable-experimental-web-platform-features\n              </span>\n            </div>\n          </li>\n          <li>\n            <p>\n              <strong>Enable Experimental Platform features:</strong>\n            </p>\n            <img\n              alt={\"Screenshot of Google Chrome Experimental Platform features\"}\n              src={OnboardingModal.instructionalImages.step2}\n            />\n          </li>\n          <li>\n            <p>\n              <strong>Enable WebUSB:</strong>\n            </p>\n            <img\n              alt={\"Screenshot of Google Chrome enable WebUSB\"}\n              src={OnboardingModal.instructionalImages.step3}\n            />\n          </li>\n          <li>\n            <p>\n              <strong>\n                Relaunch your Chrome browser and try enabling live mode again.\n              </strong>\n            </p>\n          </li>\n        </ol>\n      </div>\n    );\n  }\n\n  renderModalContent() {\n    if (this.state.viewingUsbInstructions) {\n      return this.renderUsbInstructions();\n    } else {\n      return this.renderOnboardingOptions();\n    }\n  }\n\n  renderModalFooter() {\n    return (\n      <p>\n        <span>\n          Don't have a{\" \"}\n          <a\n            href=\"https://panda.comma.ai\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            panda\n          </a>?{\" \"}\n        </span>\n        <span>\n          <a\n            href=\"https://panda.comma.ai\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Get one here\n          </a>{\" \"}\n        </span>\n        <span>\n          or <a href={`${window.location.href}?demo=1`}>try the demo</a>.\n        </span>\n      </p>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Welcome to Cabana\"\n        subtitle=\"Get started by selecting a drive from Explorer or enabling live mode\"\n        footer={this.renderModalFooter()}\n        disableClose={true}\n        variations={[\"wide\", \"dark\"]}\n      >\n        {this.renderModalContent()}\n      </Modal>\n    );\n  }\n}\n","import GitHub from \"github-api\";\n\nimport { OPENDBC_SOURCE_REPO } from \"../config\";\n\nexport default class OpenDBC {\n  constructor(token) {\n    this.token = token;\n    this.github = new GitHub({ token });\n    this.sourceRepo = this.github.getRepo(\"commaai\", \"opendbc\");\n    this.githubUsername = null;\n  }\n\n  hasAuth() {\n    return this.token !== null;\n  }\n\n  async getGithubUsername() {\n    if (this.githubUsername) {\n      return this.githubUsername;\n    } else {\n      const githubUsername = await this.fetchGithubUsername();\n      if (githubUsername) {\n        return githubUsername;\n      }\n    }\n  }\n\n  async fetchGithubUsername() {\n    try {\n      const user = await this.github.getUser();\n      if (user) {\n        const profile = await user.getProfile();\n        if (profile) {\n          return profile.data.login;\n        }\n      }\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async list(repoFullName) {\n    /*\n    Lists files in a github repository.\n    If no argument provided, assumes OpenDBC source repo\n    (commaai/opendbc)\n    */\n\n    let repo;\n    if (repoFullName === undefined) {\n      repo = this.sourceRepo;\n    } else {\n      const [username, repoName] = repoFullName.split(\"/\");\n      repo = this.github.getRepo(username, repoName);\n    }\n    try {\n      const response = await repo.getContents(\"master\", \"\");\n\n      return response.data.map(content => content.path);\n    } catch (e) {\n      return [];\n    }\n  }\n\n  async getDbcContents(dbcPath, repoFullName) {\n    let repo;\n    if (repoFullName === undefined) {\n      repo = this.sourceRepo;\n    } else {\n      const [username, repoName] = repoFullName.split(\"/\");\n      repo = this.github.getRepo(username, repoName);\n    }\n\n    const fileContents = await repo.getContents(\"master\", dbcPath);\n\n    const rawContentsUrl = fileContents.data.download_url;\n\n    const resp = await fetch(rawContentsUrl, { cache: \"no-cache\" });\n\n    return resp.text();\n  }\n\n  repoSourceIsOpenDbc(repoDetails) {\n    return (\n      repoDetails.source && repoDetails.source.full_name === OPENDBC_SOURCE_REPO\n    );\n  }\n\n  async getUserOpenDbcFork() {\n    const githubUsername = await this.getGithubUsername();\n    if (!githubUsername) return null;\n\n    const openDbcFork = this.github.getRepo(githubUsername, \"opendbc\");\n    const repoDetailResp = await openDbcFork.getDetails();\n    const repoDetails = repoDetailResp.data;\n\n    if (this.repoSourceIsOpenDbc(repoDetails)) {\n      return repoDetails.full_name;\n    } else {\n      return null;\n    }\n  }\n\n  async fork() {\n    const forkResponse = await this.sourceRepo.fork();\n    if (forkResponse.status === 202) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  async commitFile(repoFullName, path, contents, commitMessage) {\n    /*\n      repo is of format username/reponame\n      authenciated user must have write access to repo\n      */\n    const [user, repoName] = repoFullName.split(\"/\");\n    const repo = this.github.getRepo(user, repoName);\n\n    // get HEAD reference\n    const refResp = await repo.getRef(\"heads/master\");\n    const ref = refResp.data;\n\n    // get HEAD commit sha\n    const headCommitResp = await repo.getCommit(ref.object.sha);\n    const headCommit = headCommitResp.data;\n\n    // get HEAD tree\n    const headTreeResp = await repo.getTree(headCommit.tree.sha);\n    const headTree = headTreeResp.data;\n\n    // create new tree\n    const tree = [\n      {\n        mode: \"100644\",\n        path: path,\n        type: \"blob\",\n        content: contents\n      }\n    ];\n\n    const createTreeResp = await repo.createTree(tree, headTree.sha);\n    const createdTree = createTreeResp.data;\n\n    // commit\n    const commitResp = await repo.commit(\n      headCommit.sha,\n      createdTree.sha,\n      commitMessage || \"OpenDBC updates\"\n    );\n    const commit = commitResp.data;\n\n    // update HEAD\n    const updateHeadResp = await repo.updateHead(\n      \"heads/master\",\n      commit.sha,\n      false\n    );\n\n    return updateHeadResp.status === 200;\n  }\n}\n","import React, { Component } from \"react\";\nimport cx from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport FileSaver from \"file-saver\";\n\nimport OpenDbc from \"../api/OpenDbc\";\nimport DBC from \"../models/can/dbc\";\nimport Modal from \"./Modals/baseModal\";\n// import TabStyles from '../styles/modal-tabs';\n\nexport default class SaveDbcModal extends Component {\n  static propTypes = {\n    dbc: PropTypes.instanceOf(DBC).isRequired,\n    sourceDbcFilename: PropTypes.string.isRequired,\n    handleClose: PropTypes.func.isRequired,\n    onDbcSaved: PropTypes.func.isRequired,\n    openDbcClient: PropTypes.instanceOf(OpenDbc).isRequired,\n    hasGithubAuth: PropTypes.bool.isRequired,\n    loginWithGithub: PropTypes.element.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tab: \"GitHub\",\n      openDbcFork: null,\n      dbcFilename: this.props.sourceDbcFilename,\n      tabs: [\"GitHub\", \"Download\"],\n      commitMessage: \"OpenDBC updates\"\n    };\n\n    this.commitToGitHub = this.commitToGitHub.bind(this);\n    this.downloadDbcFile = this.downloadDbcFile.bind(this);\n    this.forkOpenDbcAndWait = this.forkOpenDbcAndWait.bind(this);\n    this.renderForkButton = this.renderForkButton.bind(this);\n    this.renderTabNavigation = this.renderTabNavigation.bind(this);\n    this.renderActions = this.renderActions.bind(this);\n  }\n\n  async componentWillMount() {\n    const openDbcFork = await this.props.openDbcClient.getUserOpenDbcFork();\n    this.setState({ openDbcFork });\n  }\n\n  async commitToGitHub() {\n    const { openDbcFork, dbcFilename } = this.state;\n    const filename = dbcFilename.replace(/\\.dbc/g, \"\") + \".dbc\";\n    const success = await this.props.openDbcClient.commitFile(\n      openDbcFork,\n      filename,\n      this.props.dbc.text(),\n      this.state.commitMessage\n    );\n    if (success) {\n      this.props.onDbcSaved(filename);\n    }\n  }\n\n  async downloadDbcFile() {\n    const blob = new Blob([this.props.dbc.text()], {\n      type: \"text/plain;charset=utf-8\"\n    });\n    const filename = this.state.dbcFilename.replace(/\\.dbc/g, \"\") + \".dbc\";\n    FileSaver.saveAs(blob, filename, true);\n  }\n\n  async forkOpenDbcAndWait() {\n    const forkResponseSuccess = await this.props.openDbcClient.fork();\n    if (forkResponseSuccess) {\n      let isTimedOut = false;\n      const timeout = window.setTimeout(() => {\n        isTimedOut = true;\n      }, 30000);\n\n      const interval = window.setInterval(() => {\n        if (!isTimedOut) {\n          this.props.openDbcClient.getUserOpenDbcFork().then(openDbcFork => {\n            if (openDbcFork !== null) {\n              this.setState({ openDbcFork });\n              window.clearInterval(interval);\n              window.clearTimeout(timeout);\n            }\n          });\n        } else {\n          window.clearInterval(interval);\n        }\n      }, 3000);\n    } else {\n      // fork failed\n    }\n  }\n\n  primaryActionDisabled() {\n    const { tab } = this.state;\n    if (tab === \"GitHub\") {\n      return (\n        this.state.openDbcFork != null && this.state.dbcFilename.length > 0\n      );\n    } else if (tab === \"Download\") {\n      return true;\n    }\n  }\n\n  renderForkButton() {\n    return (\n      <button onClick={this.forkOpenDbcAndWait}>\n        <i className=\"fa fa-code-fork\" />\n        <span> Fork OpenDBC</span>\n      </button>\n    );\n  }\n\n  renderForkStep() {\n    const { openDbcFork } = this.state;\n    let content;\n    if (openDbcFork !== null) {\n      content = (\n        <button disabled>\n          <i className=\"fa fa-code-fork\" />\n          <span> Forked: {openDbcFork}</span>\n        </button>\n      );\n    } else if (this.props.hasGithubAuth) {\n      content = this.renderForkButton();\n    } else {\n      content = this.props.loginWithGithub;\n    }\n    return (\n      <div>\n        {openDbcFork !== null ? this.renderForkButton() : null}\n        {content}\n        <hr />\n      </div>\n    );\n  }\n\n  renderFilenameField() {\n    return (\n      <div className=\"form-field\" data-extension=\".dbc\">\n        <label htmlFor=\"filename\">\n          <span>Choose a filename:</span>\n          <sup>Pick a unique name for your car DBC file</sup>\n        </label>\n        <input\n          type=\"text\"\n          id=\"filename\"\n          value={this.state.dbcFilename.replace(/\\.dbc/g, \"\")}\n          size={this.state.dbcFilename.length + 2}\n          onChange={e => this.setState({ dbcFilename: e.target.value })}\n        />\n      </div>\n    );\n  }\n\n  renderTabNavigation() {\n    return (\n      <div className=\"cabana-tabs-navigation\">\n        {this.state.tabs.map(tab => {\n          return (\n            <a\n              className={cx({ \"is-active\": this.state.tab === tab })}\n              onClick={() => {\n                this.setState({ tab });\n              }}\n              key={tab}\n            >\n              <span>{tab}</span>\n            </a>\n          );\n        })}\n      </div>\n    );\n  }\n\n  renderCommitMessage() {\n    return (\n      <div className=\"form-field\">\n        <label htmlFor=\"commit-message\">\n          <span>Commit Message:</span>\n          <sup>Message appears in git logs</sup>\n        </label>\n        <input\n          type=\"text\"\n          id=\"commit-message\"\n          value={this.state.commitMessage}\n          onChange={e => this.setState({ commitMessage: e.target.value })}\n        />\n      </div>\n    );\n  }\n\n  renderTabContent() {\n    const { tab } = this.state;\n    if (tab === \"GitHub\") {\n      return (\n        <div>\n          {this.renderForkStep()}\n          {this.renderFilenameField()}\n          {this.renderCommitMessage()}\n        </div>\n      );\n    } else if (tab === \"Download\") {\n      return <div>{this.renderFilenameField()}</div>;\n    }\n  }\n\n  renderActions() {\n    const { tab } = this.state;\n    if (tab === \"GitHub\") {\n      return (\n        <div>\n          <button className=\"button--inverted\" onClick={this.props.handleClose}>\n            <span>Cancel</span>\n          </button>\n          <button className=\"button--primary\" onClick={this.commitToGitHub}>\n            <span>Commit to GitHub</span>\n          </button>\n        </div>\n      );\n    } else if (tab === \"Download\") {\n      return (\n        <div>\n          <button className=\"button--inverted\" onClick={this.props.handleClose}>\n            <span>Cancel</span>\n          </button>\n          <button className=\"button--primary\" onClick={this.downloadDbcFile}>\n            <span>Download</span>\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Save DBC File\"\n        subtitle=\"Save your progress and output to a DBC file\"\n        handleClose={this.props.handleClose}\n        navigation={this.renderTabNavigation()}\n        actions={this.renderActions()}\n      >\n        {this.renderTabContent()}\n      </Modal>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport cx from \"classnames\";\nimport PropTypes from \"prop-types\";\n\nimport OpenDbc from \"../api/OpenDbc\";\n\nexport default class GithubDbcList extends Component {\n  static propTypes = {\n    onDbcLoaded: PropTypes.func.isRequired,\n    repo: PropTypes.string.isRequired,\n    openDbcClient: PropTypes.instanceOf(OpenDbc).isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      paths: [],\n      selectedPath: null,\n      pathQuery: \"\"\n    };\n\n    this.updatePathQuery = this.updatePathQuery.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.repo !== this.props.repo) {\n      this.props.openDbcClient.list(nextProps.repo).then(paths => {\n        this.setState({ paths, selectedPath: null });\n      });\n    }\n  }\n\n  componentWillMount() {\n    this.props.openDbcClient.list(this.props.repo).then(paths => {\n      paths = paths.filter(path => path.indexOf(\".dbc\") !== -1);\n      this.setState({ paths });\n    });\n  }\n\n  updatePathQuery(e) {\n    this.setState({\n      pathQuery: e.target.value\n    });\n  }\n\n  selectPath(path) {\n    this.setState({ selectedPath: path });\n    this.props.openDbcClient\n      .getDbcContents(path, this.props.repo)\n      .then(dbcContents => {\n        this.props.onDbcLoaded(path, dbcContents);\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"cabana-dbc-list\">\n        <div className=\"cabana-dbc-list-header\">\n          <a href={`https://github.com/${this.props.repo}`} target=\"_blank\">\n            <i className=\"fa fa-github\" />\n            <span>{this.props.repo}</span>\n          </a>\n          <div className=\"form-field form-field--small\">\n            <input\n              type=\"text\"\n              placeholder=\"Search DBC Files\"\n              onChange={this.updatePathQuery}\n            />\n          </div>\n        </div>\n        <div className=\"cabana-dbc-list-files\">\n          {this.state.paths\n            .filter(\n              p =>\n                (this.state.pathQuery === \"\") | p.includes(this.state.pathQuery)\n            )\n            .map(path => {\n              return (\n                <div\n                  className={cx(\"cabana-dbc-list-file\", {\n                    \"is-selected\": this.state.selectedPath === path\n                  })}\n                  onClick={() => {\n                    this.selectPath(path);\n                  }}\n                  key={path}\n                >\n                  <span>{path}</span>\n                </div>\n              );\n            })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class DbcUpload extends Component {\n  static propTypes = {\n    onDbcLoaded: PropTypes.func\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      dbcText: \"\"\n    };\n\n    this.onTextChanged = this.onTextChanged.bind(this);\n  }\n\n  onTextChanged(e) {\n    const dbcText = e.target.value;\n    this.setState({ dbcText });\n    this.props.onDbcLoaded(\"from paste\", dbcText);\n  }\n\n  render() {\n    return (\n      <div className=\"cabana-dbc-upload-raw\">\n        <div className=\"form-field\">\n          <label htmlFor=\"raw_dbc_upload\">\n            <span>Raw DBC File:</span>\n            <sup>Paste your DBC text output within this box</sup>\n          </label>\n          <textarea\n            value={this.state.dbcText}\n            id=\"raw_dbc_upload\"\n            className=\"t-mono\"\n            placeholder=\"PASTE DBC FILE HERE\"\n            onChange={this.onTextChanged}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport DBC from \"../models/can/dbc\";\nimport OpenDbc from \"../api/OpenDbc\";\nimport Modal from \"./Modals/baseModal\";\nimport GithubDbcList from \"./GithubDbcList\";\nimport DbcUpload from \"./DbcUpload\";\n\nexport default class LoadDbcModal extends Component {\n  static propTypes = {\n    handleClose: PropTypes.func.isRequired,\n    onDbcSelected: PropTypes.func.isRequired,\n    openDbcClient: PropTypes.instanceOf(OpenDbc).isRequired,\n    loginWithGithub: PropTypes.element.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tab: \"OpenDBC\",\n      tabs: [\"OpenDBC\", \"GitHub\", \"Upload\"],\n      dbc: null,\n      dbcSource: null,\n      userOpenDbcRepo: null\n    };\n\n    this.onDbcLoaded = this.onDbcLoaded.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.renderTabNavigation = this.renderTabNavigation.bind(this);\n    this.renderTabContent = this.renderTabContent.bind(this);\n    this.renderActions = this.renderActions.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.openDbcClient.getUserOpenDbcFork().then(userOpenDbcRepo => {\n      this.setState({ userOpenDbcRepo });\n    });\n  }\n\n  onDbcLoaded(dbcSource, dbcText) {\n    const dbc = new DBC(dbcText);\n    this.setState({ dbcSource, dbc });\n  }\n\n  handleSave() {\n    const { dbc, dbcSource } = this.state;\n    if (dbc !== null) {\n      this.props.onDbcSelected(dbcSource, dbc);\n    }\n  }\n\n  renderTabNavigation() {\n    return (\n      <div className=\"cabana-tabs-navigation\">\n        {this.state.tabs.map(tab => {\n          return (\n            <a\n              className={cx({ \"is-active\": this.state.tab === tab })}\n              onClick={() => {\n                this.setState({ tab });\n              }}\n              key={tab}\n            >\n              <span>{tab}</span>\n            </a>\n          );\n        })}\n      </div>\n    );\n  }\n\n  renderTabContent() {\n    const { tab } = this.state;\n    if (tab === \"OpenDBC\") {\n      return (\n        <GithubDbcList\n          onDbcLoaded={this.onDbcLoaded}\n          repo=\"commaai/opendbc\"\n          openDbcClient={this.props.openDbcClient}\n        />\n      );\n    } else if (tab === \"GitHub\") {\n      if (!this.props.openDbcClient.hasAuth()) {\n        return this.props.loginWithGithub;\n      } else if (this.state.userOpenDbcRepo === null) {\n        return <div>Fork it</div>;\n      } else {\n        return (\n          <GithubDbcList\n            onDbcLoaded={this.onDbcLoaded}\n            repo={this.state.userOpenDbcRepo}\n            openDbcClient={this.props.openDbcClient}\n          />\n        );\n      }\n    } else if (tab === \"Upload\") {\n      return <DbcUpload onDbcLoaded={this.onDbcLoaded} />;\n    }\n  }\n\n  renderActions() {\n    return (\n      <div>\n        <button className=\"button--inverted\" onClick={this.props.handleClose}>\n          <span>Cancel</span>\n        </button>\n        <button className=\"button--primary\" onClick={this.handleSave}>\n          <span>Load DBC</span>\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        title=\"Load DBC File\"\n        subtitle=\"Modify an existing DBC file with Cabana\"\n        handleClose={this.props.handleClose}\n        navigation={this.renderTabNavigation()}\n        actions={this.renderActions()}\n      >\n        {this.renderTabContent()}\n      </Modal>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Modal from \"./Modals/baseModal\";\n\nexport default class EditMessageModal extends Component {\n  static propTypes = {\n    handleClose: PropTypes.func.isRequired,\n    handleSave: PropTypes.func.isRequired,\n    message: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      messageFrame: props.message.frame.copy()\n    };\n    this.handleSave = this.handleSave.bind(this);\n    this.editTransmitter = this.editTransmitter.bind(this);\n    this.addTransmitter = this.addTransmitter.bind(this);\n    this.renderActions = this.renderActions.bind(this);\n  }\n\n  handleSave() {\n    this.props.handleSave(this.state.messageFrame);\n  }\n\n  addTransmitter() {\n    const { messageFrame } = this.state;\n    messageFrame.addTransmitter();\n    this.setState({ messageFrame });\n  }\n\n  editTransmitter(transmitter) {\n    return;\n  }\n\n  renderActions() {\n    return (\n      <div>\n        <button className=\"button--inverted\" onClick={this.props.handleClose}>\n          Cancel\n        </button>\n        <button className=\"button--primary\" onClick={this.handleSave}>\n          Save Message\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Modal\n        title={`Edit Message: (${this.props.message.id})`}\n        subtitle=\"Make changes and update defaults of this message\"\n        handleClose={this.props.handleClose}\n        handleSave={this.handleSave}\n        actions={this.renderActions()}\n      >\n        <div className=\"form-field\">\n          <label htmlFor=\"message_name\">\n            <span>Name</span>\n            <sup>Customize the name of this message</sup>\n          </label>\n          <input\n            type=\"text\"\n            id=\"message_name\"\n            value={this.state.messageFrame.name}\n            onChange={e => {\n              const { messageFrame } = this.state;\n              messageFrame.name = e.target.value;\n              this.setState({ messageFrame });\n            }}\n          />\n        </div>\n        <div className=\"form-field\">\n          <label htmlFor=\"message_size\">\n            <span>Size</span>\n            <sup>Add a size parameter to this message</sup>\n          </label>\n          <input\n            type=\"number\"\n            id=\"message_size\"\n            value={this.state.messageFrame.size}\n            onChange={e => {\n              const { messageFrame } = this.state;\n              if (e.target.value > 8) {\n                return;\n              }\n              messageFrame.size = parseInt(e.target.value, 10);\n              this.setState({ messageFrame });\n            }}\n          />\n        </div>\n        <div className=\"form-field u-hidden\">\n          <label htmlFor=\"message_transmitters\">\n            <span>Transmitters</span>\n            <sup>\n              Add the physical ECU units that this message is coming from.\n            </sup>\n          </label>\n          <div className=\"form-field-inset\">\n            <ul className=\"form-field-inset-list\">\n              {this.state.messageFrame.transmitters.map(transmitter => {\n                return (\n                  <li className=\"form-field-inset-list-item\" key={transmitter}>\n                    <div className=\"form-field-inset-list-item-title\">\n                      <span>{transmitter}</span>\n                    </div>\n                    <div className=\"form-field-inset-list-item-action\">\n                      <button className=\"button--tiny button--alpha\">\n                        Edit\n                      </button>\n                    </div>\n                  </li>\n                );\n              })}\n              <button className=\"button--tiny button--alpha\">\n                <span>\n                  <i className=\"fa fa-plus\" /> Add Transmitter\n                </span>\n              </button>\n            </ul>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n","import styled, { keyframes } from \"react-emotion\";\n\nconst frames = keyframes`\n  0% {\n    transform: translateX(0)\n  }\n  to {\n    transform: translateX(-400px)\n  }\n`;\nconst animationColor1 = \"rgba(74, 242, 161, 1.00)\";\nconst animationColor2 = \"rgba(140, 169, 197, 1.00)\";\n\nexport default styled(\"div\")`\n  display: block;\n  animation-name: ${frames};\n  animation-duration: 2s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n  background-color: ${animationColor1};\n  background-image: linear-gradient(\n    to right,\n    ${animationColor2} 0,\n    ${animationColor2} 50%,\n    ${animationColor1} 50%,\n    ${animationColor1} 100%\n  );\n  background-repeat: repeat-x;\n  background-size: 25pc 25pc;\n  width: 200%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 2;\n`;\n","import DBC from \"../models/can/dbc\";\n\nexport function fetchPersistedDbc(routeName) {\n  const maybeDbc = window.localStorage.getItem(routeName);\n  if (maybeDbc !== null) {\n    const { dbcFilename, dbcText } = JSON.parse(maybeDbc);\n    const dbc = new DBC(dbcText);\n\n    return { dbc, dbcText, dbcFilename };\n  } else return null;\n}\n\nexport function persistDbc(routeName, { dbcFilename, dbc }) {\n  const dbcJson = JSON.stringify({\n    dbcFilename,\n    dbcText: dbc.text()\n  });\n  window.localStorage.setItem(routeName, dbcJson);\n}\n\nconst GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY = \"gh_auth_token\";\nexport function fetchPersistedGithubAuthToken() {\n  return window.localStorage.getItem(GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY);\n}\n\nexport function unpersistGithubAuthToken() {\n  window.localStorage.removeItem(GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY);\n}\n\nexport function persistGithubAuthToken(token) {\n  return window.localStorage.setItem(GITHUB_AUTH_TOKEN_LOCALSTORAGE_KEY, token);\n}\n","import SocketIO from \"socket.io-client\";\nimport { UNLOGGER_HOST } from \"../config\";\n\nexport default class UnloggerClient {\n  constructor() {\n    this.socket = SocketIO(UNLOGGER_HOST);\n  }\n\n  seek(dongleId, baseTime, seekSeconds) {\n    this.socket.emit(\"seek\", dongleId, baseTime, seekSeconds);\n  }\n}\n","import React, { Component } from \"react\";\nimport Moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { createWriteStream } from \"streamsaver\";\nimport Panda from \"@commaai/pandajs\";\nimport CommaAuth from \"@commaai/my-comma-auth\";\nimport { raw as RawDataApi, drives as DrivesApi } from \"@commaai/comma-api\";\nimport {\n  USE_UNLOGGER,\n  PART_SEGMENT_LENGTH,\n  STREAMING_WINDOW,\n  GITHUB_AUTH_TOKEN_KEY\n} from \"./config\";\nimport * as GithubAuth from \"./api/github-auth\";\n\nimport DBC from \"./models/can/dbc\";\nimport Meta from \"./components/Meta\";\nimport Explorer from \"./components/Explorer\";\nimport OnboardingModal from \"./components/Modals/OnboardingModal\";\nimport SaveDbcModal from \"./components/SaveDbcModal\";\nimport LoadDbcModal from \"./components/LoadDbcModal\";\nimport debounce from \"./utils/debounce\";\nimport EditMessageModal from \"./components/EditMessageModal\";\nimport LoadingBar from \"./components/LoadingBar\";\nimport {\n  persistDbc,\n  fetchPersistedDbc,\n  unpersistGithubAuthToken\n} from \"./api/localstorage\";\nimport OpenDbc from \"./api/OpenDbc\";\nimport UnloggerClient from \"./api/unlogger\";\nimport * as ObjectUtils from \"./utils/object\";\nimport { hash } from \"./utils/string\";\nimport { modifyQueryParameters } from \"./utils/url\";\n\nconst RLogDownloader = require(\"./workers/rlog-downloader.worker.js\");\nconst LogCSVDownloader = require(\"./workers/dbc-csv-downloader.worker.js\");\nconst MessageParser = require(\"./workers/message-parser.worker.js\");\nconst CanOffsetFinder = require(\"./workers/can-offset-finder.worker.js\");\nconst CanStreamerWorker = require(\"./workers/CanStreamerWorker.worker.js\");\n\nexport default class CanExplorer extends Component {\n  static propTypes = {\n    dongleId: PropTypes.string,\n    name: PropTypes.string,\n    dbc: PropTypes.instanceOf(DBC),\n    dbcFilename: PropTypes.string,\n    githubAuthToken: PropTypes.string,\n    autoplay: PropTypes.bool,\n    max: PropTypes.number,\n    url: PropTypes.string\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      messages: {},\n      selectedMessages: [],\n      route: null,\n      canFrameOffset: 0,\n      firstCanTime: null,\n      lastBusTime: null,\n      selectedMessage: null,\n      currentParts: [0, 0],\n      currentPart: 0,\n      currentWorkers: {},\n      loadingParts: [],\n      loadedParts: [],\n      showOnboarding: false,\n      showLoadDbc: false,\n      showSaveDbc: false,\n      showEditMessageModal: false,\n      editMessageModalMessage: null,\n      dbc: props.dbc ? props.dbc : new DBC(),\n      dbcText: props.dbc ? props.dbc.text() : new DBC().text(),\n      dbcFilename: props.dbcFilename ? props.dbcFilename : \"New_DBC\",\n      dbcLastSaved: null,\n      seekTime: 0,\n      seekIndex: 0,\n      maxByteStateChangeCount: 0,\n      isLoading: true,\n      partsLoaded: 0,\n      spawnWorkerHash: null,\n      attemptingPandaConnection: false,\n      pandaNoDeviceSelected: false,\n      live: false,\n      isGithubAuthenticated:\n        props.githubAuthToken !== null && props.githubAuthToken !== undefined,\n      shareUrl: null,\n      logUrls: null\n    };\n\n    this.openDbcClient = new OpenDbc(props.githubAuthToken);\n    if (USE_UNLOGGER) {\n      this.unloggerClient = new UnloggerClient();\n    }\n\n    this.showOnboarding = this.showOnboarding.bind(this);\n    this.hideOnboarding = this.hideOnboarding.bind(this);\n    this.showLoadDbc = this.showLoadDbc.bind(this);\n    this.hideLoadDbc = this.hideLoadDbc.bind(this);\n    this.showSaveDbc = this.showSaveDbc.bind(this);\n    this.hideSaveDbc = this.hideSaveDbc.bind(this);\n    this.showEditMessageModal = this.showEditMessageModal.bind(this);\n    this.hideEditMessageModal = this.hideEditMessageModal.bind(this);\n    this.onDbcSelected = this.onDbcSelected.bind(this);\n    this.onDbcSaved = this.onDbcSaved.bind(this);\n    this.onConfirmedSignalChange = this.onConfirmedSignalChange.bind(this);\n    this.onPartChange = this.onPartChange.bind(this);\n    this.onMessageFrameEdited = this.onMessageFrameEdited.bind(this);\n    this.onSeek = this.onSeek.bind(this);\n    this.onUserSeek = this.onUserSeek.bind(this);\n    this.onMessageSelected = this.onMessageSelected.bind(this);\n    this.onMessageUnselected = this.onMessageUnselected.bind(this);\n    this.initCanData = this.initCanData.bind(this);\n    this.updateSelectedMessages = this.updateSelectedMessages.bind(this);\n    this.handlePandaConnect = this.handlePandaConnect.bind(this);\n    this.processStreamedCanMessages = this.processStreamedCanMessages.bind(\n      this\n    );\n    this.onStreamedCanMessagesProcessed = this.onStreamedCanMessagesProcessed.bind(\n      this\n    );\n    this.showingModal = this.showingModal.bind(this);\n    this.lastMessageEntriesById = this.lastMessageEntriesById.bind(this);\n    this.githubSignOut = this.githubSignOut.bind(this);\n    this.downloadLogAsCSV = this.downloadLogAsCSV.bind(this);\n\n    this.pandaReader = new Panda();\n    this.pandaReader.onMessage(this.processStreamedCanMessages);\n  }\n\n  componentWillMount() {\n    const { dongleId, name } = this.props;\n    if (CommaAuth.isAuthenticated() && !name) {\n      this.showOnboarding();\n    } else if (\n      this.props.max &&\n      this.props.url &&\n      !this.props.exp &&\n      !this.props.sig\n    ) {\n      // probably the demo!\n      const { max, url } = this.props;\n      const startTime = Moment(name, \"YYYY-MM-DD--H-m-s\");\n\n      const route = {\n        fullname: dongleId + \"|\" + name,\n        proclog: max,\n        url: url,\n        start_time: startTime\n      };\n      this.setState(\n        {\n          route,\n          currentParts: [0, Math.min(max, PART_SEGMENT_LENGTH - 1)]\n        },\n        this.initCanData\n      );\n    } else if (dongleId && name) {\n      const routeName = dongleId + \"|\" + name;\n      let urlPromise, logUrlsPromise;\n\n      if (this.props.url) {\n        urlPromise = Promise.resolve(this.props.url);\n      } else {\n        urlPromise = DrivesApi.getRouteInfo(routeName).then(function(route) {\n          return route.url;\n        });\n      }\n\n      if (this.props.sig && this.props.exp) {\n        logUrlsPromise = RawDataApi.getLogUrls(routeName, {\n          sig: this.props.sig,\n          exp: this.props.exp\n        });\n      } else {\n        logUrlsPromise = RawDataApi.getLogUrls(routeName);\n      }\n      Promise.all([urlPromise, logUrlsPromise])\n        .then(initData => {\n          let [url, logUrls] = initData;\n          const newState = {\n            route: {\n              fullname: routeName,\n              proclog: logUrls.length - 1,\n              start_time: Moment(name, \"YYYY-MM-DD--H-m-s\"),\n              url\n            },\n            currentParts: [\n              0,\n              Math.min(logUrls.length - 1, PART_SEGMENT_LENGTH - 1)\n            ],\n            logUrls\n          };\n          this.setState(newState, this.initCanData);\n\n          DrivesApi.getShareSignature(routeName).then(shareSignature =>\n            this.setState({\n              shareUrl: modifyQueryParameters({\n                add: {\n                  exp: shareSignature.exp,\n                  sig: shareSignature.sig,\n                  max: logUrls.length - 1,\n                  url\n                },\n                remove: [GITHUB_AUTH_TOKEN_KEY]\n              })\n            })\n          );\n        })\n        .catch(err => {\n          console.error(err);\n          this.showOnboarding();\n        });\n    } else {\n      this.showOnboarding();\n    }\n  }\n\n  initCanData() {\n    const { route } = this.state;\n\n    const offsetFinder = new CanOffsetFinder();\n    offsetFinder.postMessage({\n      partCount: route.proclog,\n      base: route.url\n    });\n\n    offsetFinder.onmessage = e => {\n      if (\"error\" in e.data) {\n        this.spawnWorker();\n      } else {\n        const { canFrameOffset, firstCanTime } = e.data;\n\n        this.setState({ canFrameOffset, firstCanTime }, () => {\n          this.spawnWorker();\n        });\n      }\n    };\n  }\n\n  onDbcSelected(dbcFilename, dbc) {\n    const { route } = this.state;\n    this.hideLoadDbc();\n    this.persistDbc({ dbcFilename, dbc });\n\n    if (route) {\n      this.setState(\n        {\n          dbc,\n          dbcFilename,\n          dbcText: dbc.text(),\n          partsLoaded: 0,\n          selectedMessage: null,\n          messages: {}\n        },\n        () => {\n          // Pass DBC text to webworker b/c can't pass instance of es6 class\n          this.spawnWorker();\n        }\n      );\n    } else {\n      this.setState({ dbc, dbcFilename, dbcText: dbc.text(), messages: {} });\n    }\n  }\n\n  onDbcSaved(dbcFilename) {\n    const dbcLastSaved = Moment();\n    this.setState({ dbcLastSaved, dbcFilename });\n    this.hideSaveDbc();\n  }\n\n  // async downloadDbcFile() {\n  //   const blob = new Blob([this.props.dbc.text()], {type: \"text/plain;charset=utf-8\"});\n  //   const filename = this.state.dbcFilename.replace(/\\.dbc/g, '') + '.dbc';\n  //   FileSaver.saveAs(blob, filename, true);\n  // }\n\n  downloadLogAsCSV() {\n    console.log(\"downloadLogAsCSV:start\");\n    const { dbcFilename } = this.state;\n    const fileStream = createWriteStream(\n      `${dbcFilename.replace(/\\.dbc/g, \"-\")}${+new Date()}.csv`\n    );\n    const writer = fileStream.getWriter();\n    const encoder = new TextEncoder();\n\n    if (this.state.live) {\n      return this.downloadLiveLogAsCSV(dataHandler);\n    }\n    return this.downloadRawLogAsCSV(dataHandler);\n\n    function dataHandler(e) {\n      const { logData, shouldClose, progress } = e.data;\n      if (shouldClose) {\n        console.log(\"downloadLogAsCSV:close\");\n        writer.close();\n        return;\n      }\n      console.log(\"CSV export progress:\", progress);\n      const uint8array = encoder.encode(logData + \"\\n\");\n      writer.write(uint8array);\n    }\n  }\n  downloadRawLogAsCSV(handler) {\n    // Trigger file processing and dowload in worker\n    const { firstCanTime, canFrameOffset, route } = this.state;\n    const worker = new LogCSVDownloader();\n\n    worker.onmessage = handler;\n\n    worker.postMessage({\n      base: route.url,\n      parts: [0, route.proclog],\n      canStartTime: firstCanTime - canFrameOffset\n    });\n  }\n\n  downloadLiveLogAsCSV(handler) {\n    // Trigger processing of in-memory data in worker\n    // this method *could* just fetch the data needed for the worked, but\n    // eventually this might be in it's own worker instead of the shared one\n    const { firstCanTime, canFrameOffset } = this.state;\n    const worker = new LogCSVDownloader();\n\n    worker.onmessage = handler;\n\n    worker.postMessage({\n      data: Object.keys(this.state.messages).map(sourceId => {\n        var source = this.state.messages[sourceId];\n        return {\n          id: source.id,\n          bus: source.bus,\n          address: source.address,\n          entries: source.entries.slice()\n        };\n      }),\n      canStartTime: firstCanTime - canFrameOffset\n    });\n  }\n\n  addAndRehydrateMessages(newMessages, options) {\n    // Adds new message entries to messages state\n    // and \"rehydrates\" ES6 classes (message frame)\n    // lost from JSON serialization in webworker data cloning.\n    options = options || {};\n\n    const messages = { ...this.state.messages };\n    for (var key in newMessages) {\n      // add message\n      if (options.replace !== true && key in messages) {\n        // should merge here instead of concat\n        // assumes messages are always sequential\n        let msgEntries = messages[key].entries;\n        let newMsgEntries = newMessages[key].entries;\n        let msgLength = msgEntries.length;\n        let newMsgLength = newMsgEntries.length;\n        let entryLength = msgLength + newMsgLength;\n        messages[key].entries = Array(entryLength);\n\n        let msgIndex = 0;\n        let newMsgIndex = 0;\n\n        for (let i = 0; i < entryLength; ++i) {\n          if (newMsgIndex >= newMsgLength) {\n            messages[key].entries[i] = msgEntries[msgIndex++];\n          } else if (msgIndex >= msgLength) {\n            messages[key].entries[i] = newMsgEntries[newMsgIndex++];\n          } else if (\n            msgEntries[msgIndex].relTime <= newMsgEntries[newMsgIndex].relTime\n          ) {\n            messages[key].entries[i] = msgEntries[msgIndex++];\n          } else if (\n            msgEntries[msgIndex].relTime >= newMsgEntries[newMsgIndex].relTime\n          ) {\n            messages[key].entries[i] = newMsgEntries[newMsgIndex++];\n          }\n        }\n        messages[key].byteStateChangeCounts =\n          newMessages[key].byteStateChangeCounts;\n      } else {\n        messages[key] = newMessages[key];\n        messages[key].frame = this.state.dbc.getMessageFrame(\n          messages[key].address\n        );\n      }\n    }\n\n    return messages;\n  }\n\n  cancelWorker(workerHash) {\n    let currentWorkers = { ...this.state.currentWorkers };\n    let { worker, part } = currentWorkers[workerHash];\n    let loadingParts = this.state.loadingParts.filter(p => p !== part);\n    let loadedParts = this.state.loadedParts.filter(p => p !== part);\n    delete currentWorkers[workerHash];\n\n    console.log(\"Stoping worker\", workerHash, \"for part\", part);\n    worker.postMessage({\n      action: \"terminate\"\n    });\n\n    this.setState({\n      currentWorkers,\n      loadingParts,\n      loadedParts\n    });\n  }\n\n  spawnWorker(options) {\n    let { currentParts, currentWorkers } = this.state;\n    console.log(\"Checking worker for\", currentParts);\n    if (!this.state.isLoading) {\n      this.setState({ isLoading: true });\n    }\n    const [minPart, maxPart] = currentParts;\n    // cancel old workers that are still loading data no longer inside the window\n    Object.keys(currentWorkers).forEach(workerHash => {\n      if (\n        currentWorkers[workerHash].part < minPart ||\n        currentWorkers[workerHash].part > maxPart\n      ) {\n        this.cancelWorker(workerHash);\n      }\n    });\n    // updated worker list (post canceling, and this time a copy)\n    currentWorkers = { ...this.state.currentWorkers };\n\n    let { loadingParts, loadedParts, currentPart } = this.state;\n\n    // clean this up just in case, the cancel process above *should* have already done this\n    // they have at most 4 entries so it's trivial\n    loadingParts = loadingParts.filter(p => p >= minPart && p <= maxPart);\n    loadedParts = loadedParts.filter(p => p >= minPart && p <= maxPart);\n\n    let part = -1;\n    let allWorkerParts = Object.keys(currentWorkers).map(\n      i => currentWorkers[i].part\n    );\n\n    for (let partOffset = 0; partOffset <= maxPart - minPart; ++partOffset) {\n      let tempPart = currentPart + partOffset;\n      if (tempPart > maxPart) {\n        tempPart = minPart + ((tempPart - minPart) % (maxPart - minPart + 1));\n      }\n      if (allWorkerParts.indexOf(tempPart) === -1) {\n        part = tempPart;\n        break;\n      }\n    }\n    if (part === -1) {\n      console.log(\"Loading complete\");\n      this.setState({ isLoading: false });\n      return;\n    }\n    console.log(\"Starting worker for part\", part);\n    // options is object of {part, prevMsgEntries, spawnWorkerHash, prepend}\n    options = options || {};\n    let prevMsgEntries = options.prevMsgEntries;\n    let prepend = false;\n\n    const {\n      dbc,\n      dbcFilename,\n      route,\n      firstCanTime,\n      canFrameOffset,\n      maxByteStateChangeCount\n    } = this.state;\n\n    if (!prevMsgEntries) {\n      // we have previous messages loaded\n      let { messages } = this.state;\n      let canStartTime = firstCanTime - canFrameOffset;\n      prevMsgEntries = {};\n      Object.keys(messages).forEach(function(key) {\n        let entries = messages[key].entries;\n        prevMsgEntries[key] = entries[entries.length - 1];\n      });\n    }\n\n    // var worker = new CanFetcher();\n    var worker = new RLogDownloader();\n\n    let spawnWorkerHash = hash(Math.random().toString(16));\n    currentWorkers[spawnWorkerHash] = {\n      part,\n      worker\n    };\n\n    loadingParts = [part, ...loadingParts];\n\n    this.setState({\n      currentWorkers,\n      loadingParts\n    });\n\n    worker.onmessage = e => {\n      if (this.state.currentWorkers[spawnWorkerHash] === undefined) {\n        console.log(\"Worker was canceled\");\n        return;\n      }\n\n      if (this.state.dbcFilename !== dbcFilename) {\n        // DBC changed while this worker was running\n        // -- don't update messages and halt recursion.\n        return;\n      }\n\n      let { newMessages, maxByteStateChangeCount, isFinished } = e.data;\n      if (maxByteStateChangeCount > this.state.maxByteStateChangeCount) {\n        this.setState({ maxByteStateChangeCount });\n      } else {\n        maxByteStateChangeCount = this.state.maxByteStateChangeCount;\n      }\n\n      const messages = this.addAndRehydrateMessages(\n        newMessages,\n        maxByteStateChangeCount\n      );\n      const prevMsgEntries = {};\n      for (let key in newMessages) {\n        prevMsgEntries[key] =\n          newMessages[key].entries[newMessages[key].entries.length - 1];\n      }\n\n      if (!isFinished) {\n        this.setState({ messages });\n      } else {\n        let loadingParts = this.state.loadingParts.filter(p => p !== part);\n        let loadedParts = [part, ...this.state.loadedParts];\n\n        this.setState(\n          {\n            messages,\n            partsLoaded: this.state.partsLoaded + 1,\n            loadingParts,\n            loadedParts\n          },\n          () => {\n            this.spawnWorker({\n              prevMsgEntries,\n              spawnWorkerHash,\n              prepend\n            });\n          }\n        );\n      }\n    };\n\n    worker.postMessage({\n      // old stuff for reverse compatibility for easier testing\n      base: route.url,\n      num: part,\n\n      // so that we don't try to read metadata about it...\n      isDemo: this.props.isDemo,\n      isLegacyShare: this.props.isLegacyShare,\n      logUrls: this.state.logUrls,\n\n      // data that is used\n      dbcText: dbc.text(),\n      route: route.fullname,\n      part: part,\n      canStartTime: firstCanTime != null ? firstCanTime - canFrameOffset : null,\n      prevMsgEntries,\n      maxByteStateChangeCount\n    });\n  }\n\n  showingModal() {\n    const {\n      showOnboarding,\n      showLoadDbc,\n      showSaveDbc,\n      showAddSignal,\n      showEditMessageModal\n    } = this.state;\n    return (\n      showOnboarding ||\n      showLoadDbc ||\n      showSaveDbc ||\n      showAddSignal ||\n      showEditMessageModal\n    );\n  }\n\n  showOnboarding() {\n    this.setState({ showOnboarding: true });\n  }\n\n  hideOnboarding() {\n    this.setState({ showOnboarding: false });\n  }\n\n  showLoadDbc() {\n    this.setState({ showLoadDbc: true });\n  }\n\n  hideLoadDbc() {\n    this.setState({ showLoadDbc: false });\n  }\n\n  showSaveDbc() {\n    this.setState({ showSaveDbc: true });\n  }\n\n  hideSaveDbc() {\n    this.setState({ showSaveDbc: false });\n  }\n\n  reparseMessages(messages) {\n    this.setState({ isLoading: true });\n\n    const { dbc } = this.state;\n    var worker = new MessageParser();\n    worker.onmessage = e => {\n      let messages = e.data;\n      messages = this.addAndRehydrateMessages(messages, { replace: true });\n\n      this.setState({ messages, isLoading: false });\n    };\n\n    worker.postMessage({\n      messages,\n      dbcText: dbc.text(),\n      canStartTime: this.state.firstCanTime\n    });\n  }\n\n  updateMessageFrame(messageId, frame) {\n    const { messages } = this.state;\n\n    messages[messageId].frame = frame;\n    this.setState({ messages });\n  }\n\n  persistDbc({ dbcFilename, dbc }) {\n    const { route } = this.state;\n    if (route) {\n      persistDbc(route.fullname, { dbcFilename, dbc });\n    } else {\n      persistDbc(\"live\", { dbcFilename, dbc });\n    }\n  }\n\n  onConfirmedSignalChange(message, signals) {\n    const { dbc, dbcFilename } = this.state;\n    dbc.setSignals(message.address, { ...signals });\n\n    this.updateMessageFrame(message.id, dbc.getMessageFrame(message.address));\n\n    this.persistDbc({ dbcFilename, dbc });\n\n    const messages = {};\n    const newMessage = { ...message };\n    const frame = dbc.getMessageFrame(message.address);\n    newMessage.frame = frame;\n\n    messages[message.id] = newMessage;\n\n    this.setState({ dbc, dbcText: dbc.text() }, () =>\n      this.reparseMessages(messages)\n    );\n  }\n\n  partChangeDebounced = debounce(() => {\n    let [minPart, maxPart] = this.state.currentParts;\n    let messages = { ...this.state.messages };\n    // update messages to only preserve entries in new part range\n    let minTime = minPart * 60;\n    let maxTime = maxPart * 60 + 60;\n    Object.keys(messages).forEach(key => {\n      let entries = messages[key].entries;\n      let minIndex = 0;\n      let maxIndex = entries.length - 1;\n      while (minIndex < entries.length && entries[minIndex].relTime < minTime) {\n        minIndex++;\n      }\n      while (maxIndex > minIndex && entries[maxIndex].relTime > maxTime) {\n        maxIndex--;\n      }\n      if (minIndex > 0 || maxIndex < entries.length - 1) {\n        messages[key].entries = entries.slice(minIndex, maxIndex + 1);\n      }\n    });\n\n    this.setState({\n      messages\n    });\n\n    this.spawnWorker();\n  }, 500);\n\n  onPartChange(part) {\n    let { currentParts, currentPart, canFrameOffset, route } = this.state;\n    if (canFrameOffset === -1 || part === currentPart) {\n      return;\n    }\n\n    // determine new parts to load, whether to prepend or append\n    let maxPart = Math.min(route.proclog, part + 1);\n    let minPart = Math.max(0, maxPart - PART_SEGMENT_LENGTH + 1);\n    if (minPart === 0) {\n      maxPart = Math.min(route.proclog, 2);\n    }\n    const currentPartSpan = currentParts[1] - currentParts[0] + 1;\n\n    // update current parts\n    currentParts = [minPart, maxPart];\n    currentPart = part;\n\n    if (\n      currentPart !== this.state.currentPart ||\n      currentParts[0] !== this.state.currentParts[0] ||\n      currentParts[1] !== this.state.currentParts[1]\n    ) {\n      // update state then load new parts\n      this.setState({ currentParts, currentPart }, this.partChangeDebounced);\n    }\n  }\n\n  showEditMessageModal(msgKey) {\n    const msg = this.state.messages[msgKey];\n    if (!msg.frame) {\n      msg.frame = this.state.dbc.createFrame(msg.address);\n    }\n\n    this.setState({\n      showEditMessageModal: true,\n      editMessageModalMessage: msgKey,\n      messages: this.state.messages,\n      dbcText: this.state.dbc.text()\n    });\n  }\n\n  hideEditMessageModal() {\n    this.setState({ showEditMessageModal: false });\n  }\n\n  onMessageFrameEdited(messageFrame) {\n    const { messages, dbcFilename, dbc, editMessageModalMessage } = this.state;\n\n    const message = Object.assign({}, messages[editMessageModalMessage]);\n    message.frame = messageFrame;\n    dbc.messages.set(messageFrame.id, messageFrame);\n    this.persistDbc({ dbcFilename, dbc });\n\n    messages[editMessageModalMessage] = message;\n    this.setState({ messages, dbc, dbcText: dbc.text() });\n    this.hideEditMessageModal();\n  }\n\n  onSeek(seekIndex, seekTime) {\n    this.setState({ seekIndex, seekTime });\n\n    let { currentPart } = this.state;\n    let part = ~~(seekTime / 60);\n    if (part !== currentPart) {\n      this.onPartChange(part);\n    }\n  }\n\n  onUserSeek(seekTime) {\n    if (USE_UNLOGGER) {\n      this.unloggerClient.seek(this.props.dongleId, this.props.name, seekTime);\n    }\n\n    const msg = this.state.messages[this.state.selectedMessage];\n    let seekIndex;\n    if (msg) {\n      seekIndex = msg.entries.findIndex(e => e.relTime >= seekTime);\n      if (seekIndex === -1) {\n        seekIndex = 0;\n      }\n    } else {\n      seekIndex = 0;\n    }\n\n    this.onSeek(seekIndex, seekTime);\n  }\n\n  onMessageSelected(msgKey) {\n    let { seekTime, seekIndex, messages } = this.state;\n    const msg = messages[msgKey];\n\n    if (seekTime > 0 && msg.entries.length > 0) {\n      seekIndex = msg.entries.findIndex(e => e.relTime >= seekTime);\n      if (seekIndex === -1) {\n        seekIndex = 0;\n      }\n\n      seekTime = msg.entries[seekIndex].relTime;\n    }\n\n    this.setState({ seekTime, seekIndex, selectedMessage: msgKey });\n  }\n\n  updateSelectedMessages(selectedMessages) {\n    this.setState({ selectedMessages });\n  }\n\n  onMessageUnselected(msgKey) {\n    this.setState({ selectedMessage: null });\n  }\n\n  loginWithGithub() {\n    const { route } = this.state;\n    return (\n      <a\n        href={GithubAuth.authorizeUrl(\n          route && route.fullname ? route.fullname : \"\"\n        )}\n        className=\"button button--dark button--inline\"\n      >\n        <i className=\"fa fa-github\" />\n        <span> Log in with Github</span>\n      </a>\n    );\n  }\n\n  lastMessageEntriesById(obj, [msgId, message]) {\n    obj[msgId] = message.entries[message.entries.length - 1];\n    return obj;\n  }\n\n  processStreamedCanMessages(newCanMessages) {\n    const { dbcText } = this.state;\n    const {\n      firstCanTime,\n      lastBusTime,\n      messages,\n      maxByteStateChangeCount\n    } = this.state;\n    // map msg id to arrays\n    const prevMsgEntries = Object.entries(messages).reduce(\n      this.lastMessageEntriesById,\n      {}\n    );\n\n    const byteStateChangeCountsByMessage = Object.entries(messages).reduce(\n      (obj, [msgId, msg]) => {\n        obj[msgId] = msg.byteStateChangeCounts;\n        return obj;\n      },\n      {}\n    );\n\n    this.canStreamerWorker.postMessage({\n      newCanMessages,\n      prevMsgEntries,\n      firstCanTime,\n      dbcText,\n      lastBusTime,\n      byteStateChangeCountsByMessage,\n      maxByteStateChangeCount\n    });\n  }\n\n  firstEntryIndexInsideStreamingWindow(entries) {\n    const lastEntryTime = entries[entries.length - 1].relTime;\n    const windowFloor = lastEntryTime - STREAMING_WINDOW;\n\n    for (let i = 0; i < entries.length; i++) {\n      if (entries[i].relTime > windowFloor) {\n        return i;\n      }\n    }\n\n    return 0;\n  }\n\n  enforceStreamingMessageWindow(messages) {\n    let messageIds = Object.keys(messages);\n    for (let i = 0; i < messageIds.length; i++) {\n      const messageId = messageIds[i];\n      const message = messages[messageId];\n      if (message.entries.length < 2) {\n        continue;\n      }\n\n      const lastEntryTime = message.entries[message.entries.length - 1].relTime;\n      const entrySpan = lastEntryTime - message.entries[0].relTime;\n      if (entrySpan > STREAMING_WINDOW) {\n        const newEntryFloor = this.firstEntryIndexInsideStreamingWindow(\n          message.entries\n        );\n        message.entries = message.entries.slice(newEntryFloor);\n        messages[messageId] = message;\n      }\n    }\n\n    return messages;\n  }\n\n  _onStreamedCanMessagesProcessed(data) {\n    let {\n      newMessages,\n      seekTime,\n      lastBusTime,\n      firstCanTime,\n      maxByteStateChangeCount\n    } = data;\n\n    if (maxByteStateChangeCount < this.state.maxByteStateChangeCount) {\n      maxByteStateChangeCount = this.state.maxByteStateChangeCount;\n    }\n\n    let messages = this.addAndRehydrateMessages(newMessages);\n    messages = this.enforceStreamingMessageWindow(messages);\n    let { seekIndex, selectedMessages } = this.state;\n    if (\n      selectedMessages.length > 0 &&\n      messages[selectedMessages[0]] !== undefined\n    ) {\n      seekIndex = Math.max(0, messages[selectedMessages[0]].entries.length - 1);\n    }\n    this.setState({\n      messages,\n      seekTime,\n      seekIndex,\n      lastBusTime,\n      firstCanTime,\n      maxByteStateChangeCount\n    });\n  }\n\n  onStreamedCanMessagesProcessed(e) {\n    this._onStreamedCanMessagesProcessed(e.data);\n  }\n\n  async handlePandaConnect(e) {\n    this.setState({ attemptingPandaConnection: true, live: true });\n\n    const persistedDbc = fetchPersistedDbc(\"live\");\n    if (persistedDbc) {\n      let { dbc, dbcText } = persistedDbc;\n      this.setState({ dbc, dbcText });\n    }\n    this.canStreamerWorker = new CanStreamerWorker();\n    this.canStreamerWorker.onmessage = this.onStreamedCanMessagesProcessed;\n\n    // if any errors go off during connection, mark as not trying to connect anymore...\n    let unlisten = this.pandaReader.onError(err => {\n      console.error(err.stack || err);\n      this.setState({ attemptingPandaConnection: false });\n    });\n    try {\n      await this.pandaReader.start();\n      this.setState({\n        showOnboarding: false,\n        showLoadDbc: true\n      });\n    } catch (e) {}\n    this.setState({ attemptingPandaConnection: false });\n    unlisten();\n  }\n\n  githubSignOut(e, dataArray) {\n    unpersistGithubAuthToken();\n    this.setState({ isGithubAuthenticated: false });\n\n    e.preventDefault();\n  }\n\n  render() {\n    return (\n      <div\n        id=\"cabana\"\n        className={cx({ \"is-showing-modal\": this.showingModal() })}\n      >\n        {this.state.isLoading ? (\n          <LoadingBar isLoading={this.state.isLoading} />\n        ) : null}\n        <div className=\"cabana-header\">\n          <a className=\"cabana-header-logo\" href=\"\">\n            Comma Cabana\n          </a>\n          <div className=\"cabana-header-account\">\n            {this.state.isGithubAuthenticated ? (\n              <div>\n                <p>GitHub Authenticated</p>\n                <p\n                  className=\"cabana-header-account-signout\"\n                  onClick={this.githubSignOut}\n                >\n                  Sign out\n                </p>\n              </div>\n            ) : (\n              this.loginWithGithub()\n            )}\n          </div>\n        </div>\n        <div className=\"cabana-window\">\n          <Meta\n            url={this.state.route ? this.state.route.url : null}\n            messages={this.state.messages}\n            selectedMessages={this.state.selectedMessages}\n            updateSelectedMessages={this.updateSelectedMessages}\n            showEditMessageModal={this.showEditMessageModal}\n            currentParts={this.state.currentParts}\n            onMessageSelected={this.onMessageSelected}\n            onMessageUnselected={this.onMessageUnselected}\n            showLoadDbc={this.showLoadDbc}\n            showSaveDbc={this.showSaveDbc}\n            dbcFilename={this.state.dbcFilename}\n            dbcLastSaved={this.state.dbcLastSaved}\n            dongleId={this.props.dongleId}\n            name={this.props.name}\n            route={this.state.route}\n            seekTime={this.state.seekTime}\n            seekIndex={this.state.seekIndex}\n            shareUrl={this.state.shareUrl}\n            maxByteStateChangeCount={this.state.maxByteStateChangeCount}\n            isDemo={this.props.isDemo}\n            live={this.state.live}\n            saveLog={debounce(this.downloadLogAsCSV, 500)}\n          />\n          {this.state.route || this.state.live ? (\n            <Explorer\n              url={this.state.route ? this.state.route.url : null}\n              live={this.state.live}\n              messages={this.state.messages}\n              selectedMessage={this.state.selectedMessage}\n              onConfirmedSignalChange={this.onConfirmedSignalChange}\n              onSeek={this.onSeek}\n              onUserSeek={this.onUserSeek}\n              canFrameOffset={this.state.canFrameOffset}\n              firstCanTime={this.state.firstCanTime}\n              seekTime={this.state.seekTime}\n              seekIndex={this.state.seekIndex}\n              currentParts={this.state.currentParts}\n              selectedPart={this.state.currentPart}\n              partsLoaded={this.state.partsLoaded}\n              autoplay={this.props.autoplay}\n              showEditMessageModal={this.showEditMessageModal}\n              onPartChange={this.onPartChange}\n              routeStartTime={\n                this.state.route ? this.state.route.start_time : Moment()\n              }\n              partsCount={this.state.route ? this.state.route.proclog : 0}\n            />\n          ) : null}\n        </div>\n\n        {this.state.showOnboarding ? (\n          <OnboardingModal\n            handlePandaConnect={this.handlePandaConnect}\n            attemptingPandaConnection={this.state.attemptingPandaConnection}\n            routes={this.state.routes}\n          />\n        ) : null}\n\n        {this.state.showLoadDbc ? (\n          <LoadDbcModal\n            onDbcSelected={this.onDbcSelected}\n            handleClose={this.hideLoadDbc}\n            openDbcClient={this.openDbcClient}\n            loginWithGithub={this.loginWithGithub()}\n          />\n        ) : null}\n\n        {this.state.showSaveDbc ? (\n          <SaveDbcModal\n            dbc={this.state.dbc}\n            sourceDbcFilename={this.state.dbcFilename}\n            onDbcSaved={this.onDbcSaved}\n            handleClose={this.hideSaveDbc}\n            openDbcClient={this.openDbcClient}\n            hasGithubAuth={this.props.githubAuthToken !== null}\n            loginWithGithub={this.loginWithGithub()}\n          />\n        ) : null}\n\n        {this.state.showEditMessageModal ? (\n          <EditMessageModal\n            handleClose={this.hideEditMessageModal}\n            handleSave={this.onMessageFrameEdited}\n            message={this.state.messages[this.state.editMessageModalMessage]}\n          />\n        ) : null}\n      </div>\n    );\n  }\n}\n","export function hash(str) {\n  var hash = 5381,\n    i = str.length;\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  // to positive number\n  return (hash >>> 0).toString(16);\n}\n","import DBC from \"./models/can/dbc\";\n\nconst AcuraDbc = new DBC(`\nVERSION \"\"\n\n\nNS_ :\n    NS_DESC_\n    CM_\n    BA_DEF_\n    BA_\n    VAL_\n    CAT_DEF_\n    CAT_\n    FILTER\n    BA_DEF_DEF_\n    EV_DATA_\n    ENVVAR_DATA_\n    SGTYPE_\n    SGTYPE_VAL_\n    BA_DEF_SGTYPE_\n    BA_SGTYPE_\n    SIG_TYPE_REF_\n    VAL_TABLE_\n    SIG_GROUP_\n    SIG_VALTYPE_\n    SIGTYPE_VALTYPE_\n    BO_TX_BU_\n    BA_DEF_REL_\n    BA_REL_\n    BA_DEF_DEF_REL_\n    BU_SG_REL_\n    BU_EV_REL_\n    BU_BO_REL_\n    SG_MUL_VAL_\n\nBS_:\n\nBU_: INTERCEPTOR EBCM NEO ADAS PCM EPS VSA SCM BDY XXX\n\n\nBO_ 57 XXX_1: 3 XXX\n\nBO_ 145 XXX_2: 8 XXX\n SG_ LAT_ACCEL : 7|10@0+ (0.02,-512) [-20|20] \"m/s2\" NEO\n\nBO_ 228 STEERING_CONTROL: 5 ADAS\n SG_ STEER_TORQUE : 7|16@0- (1,0) [-3840|3840] \"\" EPS\n SG_ STEER_TORQUE_REQUEST : 23|1@0+ (1,0) [0|1] \"\" EPS\n SG_ SET_ME_X00 : 31|8@0+ (1,0) [0|0] \"\" EPS\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] \"\" EPS\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] \"\" EPS\n\nBO_ 304 GAS_PEDAL2: 8 PCM\n SG_ ENGINE_TORQUE_ESTIMATE : 7|16@0- (1,0) [-1000|1000] \"Nm\" NEO\n SG_ ENGINE_TORQUE_REQUEST : 23|16@0- (1,0) [-1000|1000] \"Nm\" NEO\n SG_ CAR_GAS : 39|8@0+ (1,0) [0|255] \"\" NEO\n\nBO_ 316 GAS_PEDAL: 8 PCM\n SG_ CAR_GAS : 39|8@0+ (1,0) [0|255] \"\" NEO\n\nBO_ 342 STEERING_SENSORS: 6 EPS\n SG_ STEER_ANGLE : 7|16@0- (-0.1,0) [-500|500] \"deg\" NEO\n SG_ STEER_ANGLE_RATE : 23|16@0- (1,0) [-3000|3000] \"deg/s\" NEO\n SG_ COUNTER : 45|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 43|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 344 POWERTRAIN_DATA: 8 PCM\n SG_ XMISSION_SPEED : 7|16@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ ENGINE_RPM : 23|16@0+ (1,0) [0|15000] \"rpm\" NEO\n SG_ XMISSION_SPEED2 : 39|16@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n SG_ ODOMETER : 55|8@0+ (1,0) [0|255] \"\" XXX\n\nBO_ 380 POWERTRAIN_DATA2: 8 PCM\n SG_ PEDAL_GAS : 7|8@0+ (1,0) [0|255] \"\" NEO\n SG_ ENGINE_RPM : 23|16@0+ (1,0) [0|15000] \"rpm\" NEO\n SG_ GAS_PRESSED : 39|1@0+ (1,0) [0|1] \"\" NEO\n SG_ ACC_STATUS : 38|1@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BOH_17C : 37|5@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BRAKE_SWITCH : 32|1@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BOH2_17C : 47|10@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ BRAKE_PRESSED : 53|1@0+ (1,0) [0|1] \"\" NEO\n SG_ BOH3_17C : 52|5@0+ (1,0) [0|1] \"rpm\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 398 XXX_3: 3 XXX\n\nBO_ 399 STEER_STATUS: 7 EPS\n SG_ STEER_TORQUE_SENSOR : 7|16@0- (1,0) [-31000|31000] \"tbd\" NEO\n SG_ STEER_TORQUE_MOTOR : 23|16@0- (1,0) [-31000|31000] \"tbd\" NEO\n SG_ STEER_STATUS : 39|4@0+ (1,0) [0|15] \"\" NEO\n SG_ STEER_CONTROL_ACTIVE : 35|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 419 GEARBOX: 8 PCM\n SG_ GEAR : 7|8@0+ (1,0) [0|256] \"\" NEO\n SG_ GEAR_SHIFTER : 35|4@0+ (1,0) [0|15] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 420 VSA_STATUS: 8 VSA\n SG_ USER_BRAKE : 7|16@0+ (0.015625,-1.609375) [0|1000] \"\" NEO\n SG_ ESP_DISABLED : 28|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 422 SCM_BUTTONS: 8 SCM\n SG_ CRUISE_BUTTONS : 7|3@0+ (1,0) [0|7] \"\" NEO\n SG_ LIGHTS_SETTING : 1|2@0+ (1,0) [0|3] \"\" NEO\n SG_ MAIN_ON : 47|1@0+ (1,0) [0|1] \"\" NEO\n SG_ CRUISE_SETTING : 43|2@0+ (1,0) [0|3] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 428 XXX_4: 8 XXX\n\nBO_ 432 STANDSTILL: 7 VSA\n SG_ WHEELS_MOVING : 12|1@0+ (1,0) [0|1] \"\" NEO\n SG_ BRAKE_ERROR_1 : 11|1@0+ (1,0) [0|1] \"\" NEO\n SG_ BRAKE_ERROR_2 : 9|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 464 WHEEL_SPEEDS: 8 VSA\n SG_ WHEEL_SPEED_FL : 7|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ WHEEL_SPEED_FR : 8|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ WHEEL_SPEED_RL : 25|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ WHEEL_SPEED_RR : 42|15@0+ (0.002759506,0) [0|70] \"m/s\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 476 XXX_5: 4 XXX\n\nBO_ 490 VEHICLE_DYNAMICS: 8 VSA\n SG_ LONG_ACCEL : 23|16@0- (0.0015384,0) [-20|20] \"m/s2\" NEO\n\nBO_ 506 BRAKE_COMMAND: 8 ADAS\n SG_ COMPUTER_BRAKE : 7|10@0+ (0.003906248,0) [0|1] \"\" EBCM\n SG_ ZEROS_BOH : 13|5@0+ (1,0) [0|1] \"\" EBCM\n SG_ COMPUTER_BRAKE_REQUEST : 8|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH2 : 23|3@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_OVERRIDE : 20|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH3 : 19|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_FAULT_CMD : 18|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_CANCEL_CMD : 17|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ COMPUTER_BRAKE_REQUEST_2 : 16|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH4 : 31|8@0+ (1,0) [0|1] \"\" EBCM\n SG_ BRAKE_LIGHTS : 39|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ CRUISE_BOH5 : 38|7@0+ (1,0) [0|1] \"\" EBCM\n SG_ CHIME : 47|3@0+ (1,0) [0|7] \"\" EBCM\n SG_ CRUISE_BOH6 : 44|1@0+ (1,0) [0|1] \"\" EBCM\n SG_ FCW : 43|2@0+ (1,0) [0|3] \"\" EBCM\n SG_ CRUISE_BOH7 : 41|10@0+ (1,0) [0|0] \"\" EBCM\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" EBCM\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" EBCM\n\nBO_ 512 GAS_COMMAND: 3 NEO\n SG_ GAS_COMMAND : 7|16@0+ (0.253984064,-83.3) [0|1] \"\" INTERCEPTOR\n SG_ COUNTER : 21|2@0+ (1,0) [0|3] \"\" INTERCEPTOR\n SG_ CHECKSUM : 19|4@0+ (1,0) [0|3] \"\" INTERCEPTOR\n\nBO_ 513 GAS_SENSOR: 5 INTERCEPTOR\n SG_ INTERCEPTOR_GAS : 7|16@0+ (0.253984064,-83.3) [0|1] \"\" NEO\n SG_ INTERCEPTOR_GAS2 : 23|16@0+ (0.126992032,-83.3) [0|1] \"\" NEO\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 542 XXX_6: 7 XXX\n\nBO_ 545 XXX_7: 4 XXX\n\nBO_ 597 ROUGH_WHEEL_SPEED: 8 VSA\n SG_ WHEEL_SPEED_FL : 7|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ WHEEL_SPEED_FR : 15|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ WHEEL_SPEED_RL : 23|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ WHEEL_SPEED_RR : 31|8@0+ (1,0) [0|255] \"mph\" NEO\n SG_ SET_TO_X55 : 47|8@0+ (1,0) [0|255] \"\" NEO\n\nBO_ 660 SCM_COMMANDS: 8 SCM\n SG_ RIGHT_BLINKER : 6|1@0+ (1,0) [0|1] \"\" NEO\n SG_ LEFT_BLINKER : 5|1@0+ (1,0) [0|1] \"\" NEO\n SG_ WIPERS_SPEED : 4|2@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 773 SEATBELT_STATUS: 7 BDY\n SG_ SEATBELT_DRIVER_LAMP : 7|1@0+ (1,0) [0|1] \"\" NEO\n SG_ SEATBELT_DRIVER_LATCHED : 13|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 53|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 51|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 777 XXX_8: 8 XXX\n\nBO_ 780 ACC_HUD: 8 ADAS\n SG_ PCM_SPEED : 7|16@0+ (0.002763889,0) [0|100] \"m/s\" BDY\n SG_ PCM_GAS : 23|7@0+ (1,0) [0|127] \"\" BDY\n SG_ ZEROS_BOH : 16|1@0+ (1,0) [0|255] \"\" BDY\n SG_ CRUISE_SPEED : 31|8@0+ (1,0) [0|255] \"\" BDY\n SG_ DTC_MODE : 39|1@0+ (1,0) [0|1] \"\" BDY\n SG_ BOH : 38|1@0+ (1,0) [0|1] \"\" BDY\n SG_ ACC_PROBLEM : 37|1@0+ (1,0) [0|1] \"\" BDY\n SG_ FCM_OFF : 36|1@0+ (1,0) [0|1] \"\" BDY\n SG_ BOH_2 : 35|1@0+ (1,0) [0|1] \"\" BDY\n SG_ FCM_PROBLEM : 34|1@0+ (1,0) [0|1] \"\" BDY\n SG_ RADAR_OBSTRUCTED : 33|1@0+ (1,0) [0|1] \"\" BDY\n SG_ ENABLE_MINI_CAR : 32|1@0+ (1,0) [0|1] \"\" BDY\n SG_ SET_ME_X03 : 47|2@0+ (1,0) [0|3] \"\" BDY\n SG_ HUD_LEAD : 45|2@0+ (1,0) [0|3] \"\" BDY\n SG_ BOH_3 : 43|1@0+ (1,0) [0|3] \"\" BDY\n SG_ BOH_4 : 42|1@0+ (1,0) [0|3] \"\" BDY\n SG_ BOH_5 : 41|1@0+ (1,0) [0|3] \"\" BDY\n SG_ CRUISE_CONTROL_LABEL : 40|1@0+ (1,0) [0|3] \"\" BDY\n SG_ HUD_DISTANCE_3 : 52|1@0+ (1,0) [0|1] \"\" BDY\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" BDY\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" BDY\n\nBO_ 800 XXX_9: 8 XXX\n\nBO_ 804 CRUISE: 8 PCM\n SG_ HUD_SPEED_KPH : 7|8@0+ (1,0) [0|255] \"kph\"  NEO\n SG_ HUD_SPEED_MPH : 15|8@0+ (1,0) [0|255] \"mph\"  NEO\n SG_ TRIP_FUEL_CONSUMED : 23|16@0+ (1,0) [0|255] \"\" NEO\n SG_ CRUISE_SPEED_PCM : 39|8@0+ (1,0) [0|255] \"\" NEO\n SG_ BOH2 : 47|8@0- (1,0) [0|255] \"\" NEO\n SG_ BOH3 : 55|8@0+ (1,0) [0|255] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 808 XXX_10: 8 XXX\n\nBO_ 819 XXX_11: 7 XXX\n\nBO_ 821 XXX_12: 5 XXX\n\nBO_ 829 LKAS_HUD_2: 5 ADAS\n SG_ CAM_TEMP_HIGH : 7|1@0+ (1,0) [0|255] \"\" BDY\n SG_ BOH : 23|2@0+ (1,0) [0|4] \"\" BDY\n SG_ DASHED_LANES : 14|1@0+ (1,0) [0|1] \"\" BDY\n SG_ DTC : 13|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LKAS_PROBLEM : 12|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LKAS_OFF : 11|1@0+ (1,0) [0|1] \"\" BDY\n SG_ SOLID_LANES : 10|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_RIGHT : 9|1@0+ (1,0) [0|1] \"\" BDY\n SG_ STEERING_REQUIRED : 8|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_PROBLEM : 21|1@0+ (1,0) [0|1] \"\" BDY\n SG_ BEEP : 17|2@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_ON : 28|1@0+ (1,0) [0|1] \"\" BDY\n SG_ LDW_OFF : 27|1@0+ (1,0) [0|1] \"\" BDY\n SG_ CLEAN_WINDSHIELD : 26|1@0+ (1,0) [0|1] \"\" BDY\n SG_ SET_ME_X48 : 31|8@0+ (1,0) [0|255] \"\" BDY\n SG_ COUNTER : 37|2@0+ (1,0) [0|3] \"\" BDY\n SG_ CHECKSUM : 35|4@0+ (1,0) [0|3] \"\" BDY\n\nBO_ 882 XXX_13: 2 XXX\n\nBO_ 884 XXX_14: 7 XXX\n\nBO_ 887 XXX_15: 8 XXX\n\nBO_ 888 XXX_16: 8 XXX\n\nBO_ 892 CRUISE_PARAMS: 8 PCM\n SG_ CRUISE_SPEED_OFFSET : 31|8@0- (0.1,0) [-128|127] \"kph\"  NEO\n\nBO_ 923 XXX_18: 2 XXX\n\nBO_ 929 XXX_19: 4 XXX\n\nBO_ 983 XXX_20: 8 XXX\n\nBO_ 985 XXX_21: 3 XXX\n\nBO_ 1024 XXX_22: 5 XXX\n\nBO_ 1027 XXX_23: 5 XXX\n\nBO_ 1029 DOORS_STATUS: 8 BDY\n SG_ DOOR_OPEN_FL : 37|1@0+ (1,0) [0|1] \"\" NEO\n SG_ DOOR_OPEN_FR : 38|1@0+ (1,0) [0|1] \"\" NEO\n SG_ DOOR_OPEN_RL : 39|1@0+ (1,0) [0|1] \"\" NEO\n SG_ DOOR_OPEN_RR : 40|1@0+ (1,0) [0|1] \"\" NEO\n SG_ COUNTER : 61|2@0+ (1,0) [0|3] \"\" NEO\n SG_ CHECKSUM : 59|4@0+ (1,0) [0|3] \"\" NEO\n\nBO_ 1030 XXX_24: 5 VSA\n\nBO_ 1034 XXX_25: 5 XXX\n\nBO_ 1036 XXX_26: 8 XXX\n\nBO_ 1039 XXX_27: 8 XXX\n\nBO_ 1057 XXX_28: 5 EPS\n\nBO_ 1064 XXX_29: 7 XXX\n\nBO_ 1108 XXX_30: 8 XXX\n\nBO_ 1365 XXX_31: 5 XXX\n\nBO_ 1600 XXX_32: 5 XXX\n\nBO_ 1601 XXX_33: 8 XXX\n\nBO_TX_BU_ 228 : NEO,ADAS;\nBO_TX_BU_ 506 : NEO,ADAS;\nBO_TX_BU_ 780 : NEO,ADAS;\nBO_TX_BU_ 829 : NEO,ADAS;\n\nCM_ SG_ 419 GEAR \"10 = reverse, 11 = transition\";\nCM_ SG_ 490 LONG_ACCEL \"wheel speed derivative, noisy and zero snapping\";\nCM_ SG_ 780 CRUISE_SPEED \"255 = no speed\";\nCM_ SG_ 804 CRUISE_SPEED_PCM \"255 = no speed\";\nCM_ SG_ 829 BEEP \"beeps are pleasant, chimes are for warnngs etc...\";\nVAL_ 399 STEER_STATUS 5 \"fault\" 4 \"no_torque_alert_2\" 2 \"no_torque_alert_1\" 0 \"normal\" ;\nVAL_ 419 GEAR_SHIFTER 10 \"S\" 4 \"D\" 3 \"N\" 2 \"R\" 1 \"P\" ;\nVAL_ 422 CRUISE_BUTTONS 7 \"tbd\" 6 \"tbd\" 5 \"tbd\" 4 \"accel_res\" 3 \"decel_set\" 2 \"cancel\" 1 \"main\" 0 \"none\" ;\nVAL_ 422 LIGHTS_SETTING 3 \"high_beam\" 2 \"low_beam\" 1 \"position\" 0 \"no_lights\" ;\nVAL_ 422 CRUISE_SETTING 3 \"distance_adj\" 2 \"tbd\" 1 \"lkas_button\" 0 \"none\" ;\nVAL_ 506 CHIME 4 \"double_chime\" 3 \"single_chime\" 2 \"continuous_chime\" 1 \"repeating_chime\" 0 \"no_chime\" ;\nVAL_ 506 FCW 3 \"fcw\" 2 \"fcw\" 1 \"fcw\" 0 \"no_fcw\" ;\nVAL_ 780 HUD_LEAD 3 \"no_car\" 2 \"solid_car\" 1 \"dashed_car\" 0 \"no_car\" ;\nVAL_ 829 BEEP 3 \"single_beep\" 2 \"triple_beep\" 1 \"repeated_beep\" 0 \"no_beep\" ;\n\nCM_ \"CHFFR_METRIC 342 STEER_ANGLE STEER_ANGLE 0.36 180; CHFFR_METRIC 380 ENGINE_RPM ENGINE_RPM 1 0; CHFFR_METRIC 804 ENGINE_TEMPERATURE ENGINE_TEMPERATURE 1 0\";\n`);\n\nexport default AcuraDbc;\n","import Sentry from \"./logging/Sentry\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport CommaAuth from \"@commaai/my-comma-auth\";\nimport { request as Request } from \"@commaai/comma-api\";\nimport CanExplorer from \"./CanExplorer\";\nimport AcuraDbc from \"./acura-dbc\";\nimport { getUrlParameter, modifyQueryParameters } from \"./utils/url\";\nimport { GITHUB_AUTH_TOKEN_KEY } from \"./config\";\nimport {\n  fetchPersistedDbc,\n  fetchPersistedGithubAuthToken,\n  persistGithubAuthToken\n} from \"./api/localstorage\";\nimport \"./index.css\";\n\nSentry.init();\n\nconst routeFullName = getUrlParameter(\"route\");\nlet isDemo = !routeFullName;\nlet props = { autoplay: true, isDemo };\nlet persistedDbc = null;\n\nif (routeFullName) {\n  const [dongleId, route] = routeFullName.split(\"|\");\n  props.dongleId = dongleId;\n  props.name = route;\n\n  persistedDbc = fetchPersistedDbc(routeFullName);\n\n  let max = getUrlParameter(\"max\"),\n    url = getUrlParameter(\"url\"),\n    exp = getUrlParameter(\"exp\"),\n    sig = getUrlParameter(\"sig\");\n\n  if (max) {\n    props.max = Number(max);\n  }\n  if (url) {\n    props.url = url;\n  }\n  if (exp) {\n    props.exp = exp;\n  }\n  if (sig) {\n    props.sig = sig;\n  }\n  props.isLegacyShare = max && url && !exp && !sig;\n  props.isShare = max && url && exp && sig;\n} else if (getUrlParameter(\"demo\")) {\n  props.max = 12;\n  props.url =\n    \"https://chffrprivate.blob.core.windows.net/chffrprivate3-permanent/v2/cb38263377b873ee/78392b99580c5920227cc5b43dff8a70_2017-06-12--18-51-47\";\n  props.name = \"2017-06-12--18-51-47\";\n  props.dongleId = \"cb38263377b873ee\";\n  props.dbc = AcuraDbc;\n  props.isDemo = true;\n  props.dbcFilename = \"acura_ilx_2016_can.dbc\";\n\n  // lots of 404s on this one\n  // props.max = 752;\n  // props.url = 'https://chffrprivate.blob.core.windows.net/chffrprivate3/v2/07e243287e48432a/d97fcc321a58e660a14de72b749269ba_2017-09-09--22-00-00';\n  // props.name = '2017-09-09--22-00-00';\n  // props.dongleId = '07e243287e48432a';\n  // props.dbc = AcuraDbc;\n  // props.dbcFilename = 'acura_ilx_2016_can.dbc';\n\n  // really long one with real content\n  // props.max = 597;\n  // props.url = 'https://chffrprivate.blob.core.windows.net/chffrprivate3/v2/0c249898b339e978/957935e6a75bc2bf6f626fcbe6db93ba_2017-08-11--04-47-54';\n  // props.name = '2017-08-11--04-47-54';\n  // props.dongleId = '0c249898b339e978';\n  // props.dbc = AcuraDbc;\n  // props.dbcFilename = 'acura_ilx_2016_can.dbc';\n}\n\nif (persistedDbc) {\n  const { dbcFilename, dbc } = persistedDbc;\n  props.dbc = dbc;\n  props.dbcFilename = dbcFilename;\n}\n\nconst authTokenQueryParam = getUrlParameter(GITHUB_AUTH_TOKEN_KEY);\nif (authTokenQueryParam !== null) {\n  props.githubAuthToken = authTokenQueryParam;\n  persistGithubAuthToken(authTokenQueryParam);\n  const urlNoAuthToken = modifyQueryParameters({\n    remove: [GITHUB_AUTH_TOKEN_KEY]\n  });\n  window.location.href = urlNoAuthToken;\n} else {\n  props.githubAuthToken = fetchPersistedGithubAuthToken();\n}\n\nasync function init() {\n  const token = await CommaAuth.init();\n  if (token) {\n    Request.configure(token);\n  }\n  ReactDOM.render(<CanExplorer {...props} />, document.getElementById(\"root\"));\n}\n\nif (routeFullName || isDemo) {\n  init();\n} else {\n  const img = document.createElement(\"img\");\n  img.src = process.env.PUBLIC_URL + \"/img/cabana.jpg\";\n  img.style.width = \"100%\";\n  const comment = document.createComment(\"7/6/17\");\n\n  document.getElementById(\"root\").appendChild(img);\n  document.getElementById(\"root\").appendChild(comment);\n}\n","export default class Frame {\n  constructor({\n    name,\n    id = 0,\n    size = 0,\n    transmitters = [],\n    extended = 0,\n    comment = null,\n    signals = {}\n  }) {\n    Object.assign(this, {\n      name,\n      id,\n      size,\n      transmitters,\n      extended,\n      comment,\n      signals\n    });\n  }\n\n  nextNewTransmitterName() {\n    let txNum = 1,\n      txName;\n    do {\n      txName = \"NEW_TRANSMITTER_\" + txNum;\n      txNum++;\n    } while (this.transmitters.indexOf(txName) !== -1);\n\n    return txName;\n  }\n\n  addTransmitter() {\n    const txName = this.nextNewTransmitterName();\n    this.transmitters.push(txName);\n    return txName;\n  }\n\n  header() {\n    return (\n      `BO_ ${this.id} ${this.name}: ${this.size} ` +\n      `${this.transmitters[0] || \"XXX\"}`\n    );\n  }\n\n  text() {\n    const signals = Object.values(this.signals)\n      .map(signal => \" \" + signal.text()) // indent\n      .join(\"\\n\");\n\n    if (signals.length > 0) {\n      return this.header() + \"\\n\" + signals;\n    } else {\n      return this.header();\n    }\n  }\n\n  copy() {\n    const copy = Object.assign(Object.create(this), this);\n\n    return copy;\n  }\n}\n","// Vendored from https://github.com/rapid7/le_js, which is broken with webpack.\n/* eslint-disable */\n\nif (typeof window === \"undefined\") {\n  // eslint-disable-line no-use-before-define\n  var window = self;\n}\nvar _indexOf = function(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (obj === array[i]) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n// Obtain a browser-specific XHR object\nvar _getAjaxObject = function() {\n  if (typeof XDomainRequest !== \"undefined\") {\n    // We're using IE8/9\n    return new XDomainRequest();\n  }\n  return new XMLHttpRequest();\n};\n\n/**\n * A single log event stream.\n * @constructor\n * @param {Object} options\n */\nfunction LogStream(options) {\n  /**\n   * @const\n   * @type {string} */\n  var _traceCode = options.trace\n    ? (Math.random() + Math.PI).toString(36).substring(2, 10)\n    : null;\n  /** @type {string} */\n  var _pageInfo = options.page_info;\n  /** @type {string} */\n  var _token = options.token;\n  /** @type {boolean} */\n  var _print = options.print;\n  /** @type {boolean} */\n  var _noFormat = options.no_format;\n  /** @type {boolean} */\n  var _SSL = (function() {\n    if (typeof XDomainRequest === \"undefined\") {\n      return options.ssl;\n    }\n    // If we're relying on XDomainRequest, we\n    // must adhere to the page's encryption scheme.\n    return window.location.protocol === \"https:\" ? true : false;\n  })();\n  /** @type {string} */\n  var _endpoint;\n  if (window.LEENDPOINT) {\n    _endpoint = window.LEENDPOINT;\n  } else if (_noFormat) {\n    _endpoint = \"webhook.logentries.com/noformat\";\n  } else {\n    _endpoint = \"js.logentries.com/v1\";\n  }\n  _endpoint = (_SSL ? \"https://\" : \"http://\") + _endpoint + \"/logs/\" + _token;\n\n  /**\n   * Flag to prevent further invocations on network err\n   ** @type {boolean} */\n  var _shouldCall = true;\n  /** @type {Array.<string>} */\n  var _backlog = [];\n  /** @type {boolean} */\n  var _active = false;\n  /** @type {boolean} */\n  var _sentPageInfo = false;\n\n  var _apiCall = function(token, data) {\n    _active = true;\n\n    var request = _getAjaxObject();\n\n    if (_shouldCall) {\n      if (request.constructor === XMLHttpRequest) {\n        // Currently we don't support fine-grained error\n        // handling in older versions of IE\n        request.onreadystatechange = function() {\n          if (request.readyState === 4) {\n            // Handle any errors\n            if (request.status >= 400) {\n              console.error(\"Couldn't submit events.\");\n              if (request.status === 410) {\n                // This API version has been phased out\n                console.warn(\"This version of le_js is no longer supported!\");\n              }\n            } else {\n              if (request.status === 301) {\n                // Server issued a deprecation warning\n                console.warn(\n                  \"This version of le_js is deprecated! Consider upgrading.\"\n                );\n              }\n              if (_backlog.length > 0) {\n                // Submit the next event in the backlog\n                _apiCall(token, _backlog.shift());\n              } else {\n                _active = false;\n              }\n            }\n          }\n        };\n      } else {\n        request.onload = function() {\n          if (_backlog.length > 0) {\n            // Submit the next event in the backlog\n            _apiCall(token, _backlog.shift());\n          } else {\n            _active = false;\n          }\n        };\n      }\n\n      request.open(\"POST\", _endpoint, true);\n      if (request.constructor === XMLHttpRequest) {\n        request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        request.setRequestHeader(\"Content-type\", \"application/json\");\n      }\n\n      if (request.overrideMimeType) {\n        request.overrideMimeType(\"text\");\n      }\n\n      request.send(data);\n    }\n  };\n\n  var _getEvent = function() {\n    var raw = null;\n    var args = Array.prototype.slice.call(arguments);\n    if (args.length === 0) {\n      throw new Error(\"No arguments!\");\n    } else if (args.length === 1) {\n      raw = args[0];\n    } else {\n      // Handle a variadic overload,\n      // e.g. _rawLog(\"some text \", x, \" ...\", 1);\n      raw = args;\n    }\n    return raw;\n  };\n\n  var _agentInfo = function() {\n    var nav = window.navigator || { doNotTrack: undefined };\n    var screen = window.screen || {};\n    var location = window.location || {};\n\n    return {\n      url: location.pathname,\n      referrer: document.referrer,\n      screen: {\n        width: screen.width,\n        height: screen.height\n      },\n      window: {\n        width: window.innerWidth,\n        height: window.innerHeight\n      },\n      browser: {\n        name: nav.appName,\n        version: nav.appVersion,\n        cookie_enabled: nav.cookieEnabled,\n        do_not_track: nav.doNotTrack\n      },\n      platform: nav.platform\n    };\n  };\n\n  // Single arg stops the compiler arity warning\n  var _rawLog = function(msg) {\n    var event = _getEvent.apply(this, arguments);\n\n    var data = { event: event };\n\n    // Add agent info if required\n    if (_pageInfo !== \"never\") {\n      if (!_sentPageInfo || _pageInfo === \"per-entry\") {\n        _sentPageInfo = true;\n        if (\n          typeof event.screen === \"undefined\" &&\n          typeof event.browser === \"undefined\"\n        )\n          _rawLog(_agentInfo())\n            .level(\"PAGE\")\n            .send();\n      }\n    }\n\n    if (_traceCode) {\n      data.trace = _traceCode;\n    }\n\n    return {\n      level: function(l) {\n        // Don't log PAGE events to console\n        // PAGE events are generated for the agentInfo function\n        if (_print && typeof console !== \"undefined\" && l !== \"PAGE\") {\n          var serialized = null;\n          if (typeof XDomainRequest !== \"undefined\") {\n            // We're using IE8/9\n            serialized = data.trace + \" \" + data.event;\n          }\n          try {\n            console[l.toLowerCase()].call(console, serialized || data);\n          } catch (ex) {\n            // IE compat fix\n            console.log(serialized || data);\n          }\n        }\n        data.level = l;\n\n        return {\n          send: function() {\n            var cache = [];\n            var serialized = JSON.stringify(data, function(key, value) {\n              if (typeof value === \"undefined\") {\n                return \"undefined\";\n              } else if (typeof value === \"object\" && value !== null) {\n                if (_indexOf(cache, value) !== -1) {\n                  // We've seen this object before;\n                  // return a placeholder instead to prevent\n                  // cycles\n                  return \"<?>\";\n                }\n                cache.push(value);\n              }\n              return value;\n            });\n\n            if (_active) {\n              _backlog.push(serialized);\n            } else {\n              _apiCall(_token, serialized);\n            }\n          }\n        };\n      }\n    };\n  };\n\n  if (options.catchall) {\n    var oldHandler = window.onerror;\n    var newHandler = function(msg, url, line) {\n      _rawLog({ error: msg, line: line, location: url })\n        .level(\"ERROR\")\n        .send();\n      if (oldHandler) {\n        return oldHandler(msg, url, line);\n      } else {\n        return false;\n      }\n    };\n    window.onerror = newHandler;\n  }\n\n  /** @expose */\n  this.log = _rawLog;\n}\n\n/**\n * A single log object\n * @constructor\n * @param {Object} options\n */\nfunction Logger(options) {\n  var logger;\n\n  // Default values\n  var dict = {\n    ssl: true,\n    catchall: false,\n    trace: true,\n    page_info: \"never\",\n    print: false,\n    endpoint: null,\n    token: null\n  };\n\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];\n  else throw new Error(\"Invalid parameters for createLogStream()\");\n\n  if (dict.token === null) {\n    throw new Error(\"Token not present.\");\n  } else {\n    logger = new LogStream(dict);\n  }\n\n  var _log = function(msg) {\n    if (logger) {\n      return logger.log.apply(this, arguments);\n    } else throw new Error(\"You must call LE.init(...) first.\");\n  };\n\n  // The public interface\n  return {\n    log: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"LOG\")\n        .send();\n    },\n    warn: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"WARN\")\n        .send();\n    },\n    error: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"ERROR\")\n        .send();\n    },\n    info: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"INFO\")\n        .send();\n    }\n  };\n}\n\n// Array of Logger elements\nvar loggers = {};\n\nvar _getLogger = function(name) {\n  if (!loggers.hasOwnProperty(name))\n    throw new Error(\"Invalid name for logStream\");\n\n  return loggers[name];\n};\n\nvar _createLogStream = function(options) {\n  if (typeof options.name !== \"string\") throw new Error(\"Name not present.\");\n  else if (loggers.hasOwnProperty(options.name))\n    throw new Error(\"A logger with that name already exists!\");\n  loggers[options.name] = new Logger(options);\n\n  return true;\n};\n\nvar _deprecatedInit = function(options) {\n  var dict = {\n    name: \"default\"\n  };\n\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];\n  else if (typeof options === \"string\") dict.token = options;\n  else throw new Error(\"Invalid parameters for init()\");\n\n  return _createLogStream(dict);\n};\n\nvar _destroyLogStream = function(name) {\n  if (typeof name === \"undefined\") {\n    name = \"default\";\n  }\n\n  delete loggers[name];\n};\n\n// The public interface\nexport default {\n  init: _deprecatedInit,\n  createLogStream: _createLogStream,\n  to: _getLogger,\n  destroy: _destroyLogStream,\n  log: function() {\n    for (var k in loggers) loggers[k].log.apply(this, arguments);\n  },\n  warn: function() {\n    for (var k in loggers) loggers[k].warn.apply(this, arguments);\n  },\n  error: function() {\n    for (var k in loggers) loggers[k].error.apply(this, arguments);\n  },\n  info: function() {\n    for (var k in loggers) loggers[k].info.apply(this, arguments);\n  }\n};\n","import Frame from \"./frame\";\nimport Signal from \"./signal\";\n\nexport const wheelSpeeds = {\n  FrontLeftWheel: shortSignal({\n    index: 0,\n    factor: 0.001\n  }),\n  FrontRightWheel: shortSignal({\n    index: 1,\n    factor: 0.001\n  }),\n  RearLeftWheel: shortSignal({\n    index: 2,\n    factor: 0.001\n  }),\n  RearRightWheel: shortSignal({\n    index: 3,\n    factor: 0.001\n  })\n};\n\nexport const ego = {\n  VEgo: shortSignal({\n    index: 0,\n    factor: 0.001\n  }),\n  AEgo: shortSignal({\n    index: 1,\n    factor: 0.001\n  }),\n  VEgoRaw: shortSignal({\n    index: 2,\n    factor: 0.001\n  }),\n  YawRate: shortSignal({\n    index: 3,\n    factor: 0.001\n  })\n};\n\nexport const controls = {\n  SteeringAngle: longSignal({\n    index: 0,\n    factor: 0.001\n  }),\n  Brake: shortSignal({\n    index: 2,\n    factor: 0.001\n  }),\n  Gas: shortSignal({\n    index: 3,\n    factor: 0.001\n  })\n};\n\nexport const flags = {\n  LeftBlinker: boolSignal({\n    index: 0\n  }),\n  RightBlinker: boolSignal({\n    index: 1\n  }),\n  GenericToggle: boolSignal({\n    index: 2\n  }),\n  DoorOpen: boolSignal({\n    index: 3\n  }),\n  SeatbeltUnlatched: boolSignal({\n    index: 4\n  }),\n  GasPressed: boolSignal({\n    index: 5\n  }),\n  BrakeLights: boolSignal({\n    index: 6\n  }),\n  SteeringPressed: boolSignal({\n    index: 7\n  }),\n  Standstill: boolSignal({\n    index: 8\n  }),\n  \"CruiseState.Enabled\": boolSignal({\n    index: 9\n  }),\n  \"CruiseState.Available\": boolSignal({\n    index: 10\n  }),\n  \"CruiseState.Standstill\": boolSignal({\n    index: 11\n  }),\n  GearShifter: {\n    startBit: 15,\n    size: 4,\n    unsigned: true\n  },\n  \"CruiseState.Speed\": charSignal({\n    index: 2\n  })\n};\n\nexport const ubloxGnss = {\n  RcvTow: longSignal({\n    index: 0\n  }),\n  GpsWeek: shortSignal({\n    index: 2\n  }),\n  LeapSeconds: {\n    startBit: 55,\n    size: 8\n  },\n  NumMeas: {\n    startBit: 63,\n    size: 8\n  }\n};\n\nexport const health = {\n  Voltage: shortSignal({\n    index: 0\n  }),\n  Current: charSignal({\n    index: 2\n  }),\n  Started: boolSignal({\n    index: 24\n  }),\n  ControlsAllowed: boolSignal({\n    index: 25\n  }),\n  GasInterceptorDetected: boolSignal({\n    index: 26\n  }),\n  StartedSignalDetected: boolSignal({\n    index: 27\n  })\n};\n\nexport const thermalCPU = {\n  Cpu0: shortSignal({\n    index: 0,\n    unsigned: true\n  }),\n  Cpu1: shortSignal({\n    index: 1,\n    unsigned: true\n  }),\n  Cpu2: shortSignal({\n    index: 2,\n    unsigned: true\n  }),\n  Cpu3: shortSignal({\n    index: 3,\n    unsigned: true\n  })\n};\n\nexport const thermalData = {\n  Mem: shortSignal({\n    index: 0,\n    unsigned: true\n  }),\n  Gpu: shortSignal({\n    index: 1,\n    unsigned: true\n  }),\n  FanSpeed: shortSignal({\n    index: 2,\n    unsigned: true\n  }),\n  BatteryPercent: charSignal({\n    index: 6,\n    unsigned: true\n  }),\n  UsbOnline: boolSignal({\n    index: 56\n  }),\n  Started: boolSignal({\n    index: 57\n  })\n};\n\nexport const thermalFreeSpace = {\n  FreeSpace: longSignal({\n    index: 0,\n    unsigned: true,\n    factor: 0.000000001\n  })\n};\n\nexport const signalMap = {\n  \"CarState:WheelSpeeds\": wheelSpeeds,\n  \"CarState:Ego\": ego,\n  \"CarState:Controls\": controls,\n  \"CarState:Flags\": flags,\n  \"UbloxGnss:MeasurementReport\": ubloxGnss,\n  \"Health:Data\": health,\n  \"Thermal:CPU\": thermalCPU,\n  \"Thermal:Data\": thermalData,\n  \"Thermal:FreeSpace\": thermalFreeSpace\n};\n\nconst ADDRESS_LIST = [];\n\nObject.keys(signalMap).forEach(function(name) {\n  Object.keys(signalMap[name]).forEach(function(signal) {\n    signalMap[name][signal] = createSignalEntry({\n      name: signal,\n      ...signalMap[name][signal]\n    });\n  });\n  addressForName(name);\n});\n\nfunction createSignalEntry(options) {\n  return new Signal({\n    name: options.name,\n    startBit: options.startBit,\n    size: options.size,\n    isLittleEndian: false,\n    isSigned: !options.unsigned,\n    factor: options.factor || 1,\n    offset: options.offset || 0,\n    unit: options.unit || \"\"\n  });\n}\n\nfunction longSignal(options) {\n  return {\n    ...options,\n    size: 32,\n    startBit: options.index * 32 + 7\n  };\n}\n\nfunction shortSignal(options) {\n  return {\n    ...options,\n    size: 16,\n    startBit: options.index * 16 + 7\n  };\n}\n\nfunction charSignal(options) {\n  return {\n    ...options,\n    size: 8,\n    startBit: options.index * 8 + 7\n  };\n}\n\nfunction boolSignal(options) {\n  return {\n    ...options,\n    size: 1,\n    startBit: options.index,\n    unsigned: true\n  };\n}\n\nexport function addressForName(name) {\n  var i = ADDRESS_LIST.indexOf(name);\n  if (i === -1) {\n    ADDRESS_LIST.push(name);\n    return ADDRESS_LIST.indexOf(name) + 0x1000;\n  }\n  return i + 0x1000;\n}\n\nexport function nameForAddress(address) {\n  if (address >= 0x1000) {\n    return ADDRESS_LIST[address - 0x1000];\n  }\n  return null;\n}\n\nexport function isLogAddress(address) {\n  return !!nameForAddress(address);\n}\n\nexport function frameForAddress(address) {\n  let name = nameForAddress(address);\n  return new Frame({\n    id: name,\n    name: name,\n    size: 8,\n    signals: signalMap[name]\n  });\n}\n"],"sourceRoot":""}