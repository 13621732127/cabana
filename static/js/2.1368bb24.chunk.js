(this["webpackJsonpcan-explorer"]=this["webpackJsonpcan-explorer"]||[]).push([[2],[function(e,t,n){"use strict";var r=function(e,t,n){return e.fields=t||[],e.fname=n,e};function accessorName(e){return null==e?null:e.fname}function accessorFields(e){return null==e?null:e.fields}var i=function(e){throw Error(e)},a=function(e){var t,n,r,a=[],o=null,s=0,u=e.length,l="";function push(){a.push(l+e.substring(t,n)),l="",t=n+1}for(e+="",t=n=0;n<u;++n)if("\\"===(r=e[n]))l+=e.substring(t,n),t=++n;else if(r===o)push(),o=null,s=-1;else{if(o)continue;t===s&&'"'===r?(t=n+1,o=r):t===s&&"'"===r?(t=n+1,o=r):"."!==r||s?"["===r?(n>t&&push(),s=t=n+1):"]"===r&&(s||i("Access path missing open bracket: "+e),s>0&&push(),s=0,t=n+1):n>t?push():t=n+1}return s&&i("Access path missing closing bracket: "+e),o&&i("Access path missing closing quote: "+e),n>t&&(n++,push()),a},o=Array.isArray,s=function(e){return e===Object(e)},u=function(e){return"string"===typeof e};function $(e){return o(e)?"["+e.map($)+"]":s(e)||u(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var l=function(e,t){var n=a(e),i="return _["+n.map($).join("][")+"];";return r(Function("_",i),[e=1===n.length?n[0]:e],t||e)},c=[],f=l("id"),d=r((function(e){return e}),c,"identity"),h=r((function(){return 0}),c,"zero"),p=r((function(){return 1}),c,"one"),g=r((function(){return!0}),c,"true"),m=r((function(){return!1}),c,"false");function log(e,t,n){var r=[t].concat([].slice.call(n));console[e].apply(console,r)}var v=function(e,t){var n=e||0;return{level:function level(e){return arguments.length?(n=+e,this):n},error:function error(){return n>=1&&log(t||"error","ERROR",arguments),this},warn:function warn(){return n>=2&&log(t||"warn","WARN",arguments),this},info:function info(){return n>=3&&log(t||"log","INFO",arguments),this},debug:function debug(){return n>=4&&log(t||"log","DEBUG",arguments),this}}},y=function(e){return e[e.length-1]},_=function(e){return null==e||""===e?null:+e};function exp(e){return function(t){return e*Math.exp(t)}}function transform_log(e){return function(t){return Math.log(e*t)}}function symlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function symexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pan(e,t,n,r){var i=n(e[0]),a=n(y(e)),o=(a-i)*t;return[r(i-o),r(a-o)]}function panLinear(e,t){return pan(e,t,_,d)}function panLog(e,t){var n=Math.sign(e[0]);return pan(e,t,transform_log(n),exp(n))}function panPow(e,t,n){return pan(e,t,pow(n),pow(1/n))}function panSymlog(e,t,n){return pan(e,t,symlog(n),symexp(n))}function zoom(e,t,n,r,i){var a=r(e[0]),o=r(y(e)),s=null!=t?r(t):(a+o)/2;return[i(s+(a-s)*n),i(s+(o-s)*n)]}function zoomLinear(e,t,n){return zoom(e,t,n,_,d)}function zoomLog(e,t,n){var r=Math.sign(e[0]);return zoom(e,t,n,transform_log(r),exp(r))}function zoomPow(e,t,n,r){return zoom(e,t,n,pow(r),pow(1/r))}function zoomSymlog(e,t,n,r){return zoom(e,t,n,symlog(r),symexp(r))}function quarter(e){return 1+~~(new Date(e).getMonth()/3)}function utcquarter(e){return 1+~~(new Date(e).getUTCMonth()/3)}var b=function(e){return null!=e?o(e)?e:[e]:[]},x=function(e,t,n){var r,i=e[0],a=e[1];return a<i&&(r=a,a=i,i=r),(r=a-i)>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]},w=function(e){return"function"===typeof e},k=function(e,t){var n,i,o,s,u,l,c,f,d,h=[],p=(e=b(e)).map((function(e,t){return null==e?null:(h.push(t),w(e)?e:a(e).map($).join("]["))})),g=h.length-1,m=b(t),v="var u,v;return ";if(g<0)return null;for(i=0;i<=g;++i)o=p[n=h[i]],w(o)?(s="(u=this."+(l="f"+n)+"(a))",u="(v=this."+l+"(b))",(c=c||{})[l]=o):(s="(u=a["+o+"])",u="(v=b["+o+"])"),l="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))","descending"!==m[n]?(d=1,f=-1):(d=-1,f=1),v+="("+s+"<"+u+"||u==null)&&v!=null?"+f+":(u>v||v==null)&&u!=null?"+d+":"+l+"!==u&&v===v?"+f+":v!==v&&u===u?"+d+(n<g?":":":0");return o=Function("a","b",v+";"),c&&(o=o.bind(c)),e=e.reduce((function(e,t){return w(t)?(accessorFields(t)||[]).forEach((function(t){e[t]=1})):null!=t&&(e[t+""]=1),e}),{}),r(o,Object.keys(e))},S=function(e){return w(e)?e:function(){return e}},E=function(e,t){var n,r;function callback(){t(r),n=r=null}return function(t){r=t,n&&clearTimeout(n),n=setTimeout(callback,e)}},T=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r])e[n]=t[n];return e},C=function(e,t){var n,r,i,a,o=0;if(e&&(n=e.length))if(null==t){for(r=e[o];null==r||r!==r;r=e[++o]);for(i=a=r;o<n;++o)null!=(r=e[o])&&(r<i&&(i=r),r>a&&(a=r))}else{for(r=t(e[o]);null==r||r!==r;r=t(e[++o]));for(i=a=r;o<n;++o)null!=(r=t(e[o]))&&(r<i&&(i=r),r>a&&(a=r))}return[i,a]},O=function(e,t){var n,r,i,a,o,s=-1,u=e.length;if(null==t){for(;++s<u;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=e[s])&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}else{for(;++s<u;)if(null!=(r=t(e[s],s,e))&&r>=r){n=i=r;break}for(a=o=s;++s<u;)null!=(r=t(e[s],s,e))&&(n>r&&(n=r,a=s),i<r&&(i=r,o=s))}return[a,o]},A=Object.prototype.hasOwnProperty,R=function(e,t){return A.call(e,t)},D={},P=function(e){var t,n,r={};function has(e){return R(r,e)&&r[e]!==D}return t={size:0,empty:0,object:r,has:has,get:function get(e){return has(e)?r[e]:void 0},set:function set(e,n){return has(e)||(++t.size,r[e]===D&&--t.empty),r[e]=n,this},delete:function _delete(e){return has(e)&&(--t.size,++t.empty,r[e]=D),this},clear:function clear(){t.size=t.empty=0,t.object=r={}},test:function test(e){return arguments.length?(n=e,t):n},clean:function clean(){var e,i,a={},o=0;for(e in r)(i=r[e])===D||n&&n(i)||(a[e]=i,++o);t.size=o,t.empty=0,t.object=r=a}},e&&Object.keys(e).forEach((function(n){t.set(n,e[n])})),t},M=function(e,t,n,r,i,a){if(!n&&0!==n)return a;var o,s,u=e[0],l=y(e),c=+n;return l<u&&(o=u,u=l,l=o),(o=Math.abs(t-u))<(s=Math.abs(l-t))&&o<=c?r:s<=c?i:a},j=function(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n},F=function(e,t,n,r){var i,a=t[0],o=t[t.length-1];return a>o&&(i=a,a=o,o=i),r=void 0===r||r,((n=void 0===n||n)?a<=e:a<e)&&(r?e<=o:e<o)},I=function(e){return"boolean"===typeof e},L=function(e){return"[object Date]"===Object.prototype.toString.call(e)},N=function(e){return"number"===typeof e},B=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},U=function(e,t){e&&(e=t?b(e).map((function(e){return e.replace(/\\(.)/g,"$1")})):b(e));var n=e&&e.length?Function("_","return ''+"+e.map((function(e){return"_["+(t?$(e):a(e).map($).join("]["))+"]"})).join("+'|'+")+";"):function(){return""};return r(n,e,"key")},z=function(e,t){var n=e[0],r=y(e),i=+t;return i?1===i?r:n+i*(r-n):n},q=function(e,t,n,r){var i=t.length,a=n.length;if(!a)return t;if(!i)return n;for(var o=r||new t.constructor(i+a),s=0,u=0,l=0;s<i&&u<a;++l)o[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)o[l]=t[s];for(;u<a;++u,++l)o[l]=n[u];return o},W=function(e,t){for(var n="";--t>=0;)n+=e;return n},G=function(e,t,n,r){var i=n||" ",a=e+"",o=t-a.length;return o<=0?a:"left"===r?W(i,o)+a:"center"===r?W(i,~~(o/2))+a+W(i,Math.ceil(o/2)):a+W(i,o)},H=function(e){return e&&y(e)-e[0]||0},V=function(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e};function defaultParser(e){return N(e)?e:L(e)?e:Date.parse(e)}var Y=function(e,t){return t=t||defaultParser,null==e||""===e?null:t(e)},X=function(e){return null==e||""===e?null:e+""},K=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t},J=function(e,t,n,r){var i=null!=r?r:"\u2026",a=e+"",o=a.length,s=Math.max(0,t-i.length);return o<=t?a:"left"===n?i+a.slice(o-s):"center"===n?a.slice(0,Math.ceil(s/2))+i+a.slice(o-~~(s/2)):a.slice(0,s)+i},Z=function(e,t,n){if(e){var r,i=0,a=e.length;if(t)for(;i<a;++i)(r=t(e[i]))&&n(r,i,e);else e.forEach(n)}};n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return accessorName})),n.d(t,"g",(function(){return accessorFields})),n.d(t,"w",(function(){return f})),n.d(t,"x",(function(){return d})),n.d(t,"hb",(function(){return h})),n.d(t,"M",(function(){return p})),n.d(t,"eb",(function(){return g})),n.d(t,"r",(function(){return m})),n.d(t,"K",(function(){return v})),n.d(t,"d",(function(){return 0})),n.d(t,"b",(function(){return 1})),n.d(t,"e",(function(){return 2})),n.d(t,"c",(function(){return 3})),n.d(t,"a",(function(){return 4})),n.d(t,"O",(function(){return panLinear})),n.d(t,"P",(function(){return panLog})),n.d(t,"Q",(function(){return panPow})),n.d(t,"R",(function(){return panSymlog})),n.d(t,"ib",(function(){return zoomLinear})),n.d(t,"jb",(function(){return zoomLog})),n.d(t,"kb",(function(){return zoomPow})),n.d(t,"lb",(function(){return zoomSymlog})),n.d(t,"T",(function(){return quarter})),n.d(t,"fb",(function(){return utcquarter})),n.d(t,"i",(function(){return b})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return E})),n.d(t,"n",(function(){return i})),n.d(t,"o",(function(){return T})),n.d(t,"p",(function(){return C})),n.d(t,"q",(function(){return O})),n.d(t,"s",(function(){return P})),n.d(t,"t",(function(){return l})),n.d(t,"u",(function(){return M})),n.d(t,"v",(function(){return R})),n.d(t,"y",(function(){return j})),n.d(t,"z",(function(){return F})),n.d(t,"A",(function(){return o})),n.d(t,"B",(function(){return I})),n.d(t,"C",(function(){return L})),n.d(t,"D",(function(){return w})),n.d(t,"E",(function(){return N})),n.d(t,"F",(function(){return s})),n.d(t,"G",(function(){return B})),n.d(t,"H",(function(){return u})),n.d(t,"I",(function(){return U})),n.d(t,"J",(function(){return z})),n.d(t,"L",(function(){return q})),n.d(t,"N",(function(){return G})),n.d(t,"S",(function(){return y})),n.d(t,"U",(function(){return W})),n.d(t,"V",(function(){return H})),n.d(t,"W",(function(){return a})),n.d(t,"X",(function(){return $})),n.d(t,"Y",(function(){return V})),n.d(t,"Z",(function(){return Y})),n.d(t,"ab",(function(){return _})),n.d(t,"cb",(function(){return X})),n.d(t,"bb",(function(){return K})),n.d(t,"db",(function(){return J})),n.d(t,"gb",(function(){return Z}))},function(e,t,n){"use strict";e.exports=n(239)},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return _classCallCheck}))},function(e,t,n){"use strict";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}n.d(t,"a",(function(){return _createClass}))},function(e,t,n){"use strict";function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return _getPrototypeOf}))},function(e,t,n){"use strict";var r=n(78);function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Object(r.a)(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return _toConsumableArray}))},function(e,t,n){"use strict";function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return _assertThisInitialized}))},function(e,t,n){"use strict";function _typeof2(e){return(_typeof2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof2(e){return typeof e}:function _typeof2(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _typeof(e){return(_typeof="function"===typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function _typeof(e){return _typeof2(e)}:function _typeof(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}var r=n(6);function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?Object(r.a)(e):t}n.d(t,"a",(function(){return _possibleConstructorReturn}))},function(e,t,n){"use strict";function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}n.d(t,"a",(function(){return _inherits}))},function(e,t,n){e.exports=n(233)},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return _defineProperty}))},function(e,t,n){"use strict";var r=n(76);var i=n(77);function _slicedToArray(e,t){return Object(r.a)(e)||function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)()}n.d(t,"a",(function(){return _slicedToArray}))},function(e,t,n){"use strict";function asyncGeneratorStep(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,i,_next,_throw,"throw",e)}_next(void 0)}))}}n.d(t,"a",(function(){return _asyncToGenerator}))},,function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function classNames(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=classNames.apply(null,r);a&&e.push(a)}else if("object"===i)for(var o in r)n.call(r,o)&&r[o]&&e.push(o)}}return e.join(" ")}e.exports?(classNames.default=classNames,e.exports=classNames):void 0===(r=function(){return classNames}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){e.exports=n(461)()},,,function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){var r=n(344),i=n(345),a=n(346);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function fromArrayBuffer(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t);return e}(e,t,n,r):"string"===typeof t?function fromString(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(t,n),i=(e=createBuffer(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function fromObject(e,t){if(Buffer.isBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||function isnan(e){return e!==e}(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&a(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function assertSize(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(r)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),r=!0}}function slowToString(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=Buffer.from(t,r)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"===typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(read(e,a)===read(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var c=!0,f=0;f<u;f++)if(read(e,a+f)!==read(t,f)){c=!1;break}if(c)return a}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(function utf16leToBytes(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,u,l,c=e[i],f=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(f=c);break;case 2:128===(192&(a=e[i+1]))&&(l=(31&c)<<6|63&a)>127&&(f=l);break;case 3:a=e[i+1],s=e[i+2],128===(192&a)&&128===(192&s)&&(l=(15&c)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(f=l);break;case 4:a=e[i+1],s=e[i+2],u=e[i+3],128===(192&a)&&128===(192&s)&&128===(192&u)&&(l=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&u)>65535&&l<1114112&&(f=l)}null===f?(f=65533,d=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=d}return function decodeCodePointsArray(e){var t=e.length;if(t<=o)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=o));return n}(r)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,n){return from(null,e,t,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,n){return function alloc(e,t,n,r){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"===typeof r?createBuffer(e,t).fill(n,r):createBuffer(e,t).fill(n):createBuffer(e,t)}(null,e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Buffer.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,n,r,i){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){a=u[c],o=l[c];break}return a<o?-1:o<a?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var o=4096;function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=toHex(e[a]);return i}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function checkOffset(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,a){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function objectWriteUInt32(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function checkIEEE754(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,a){return a||checkIEEE754(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,a){return a||checkIEEE754(e,0,n,8),i.write(e,t,n,r,52,8),n+8}Buffer.prototype.slice=function slice(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer.prototype;else{var i=t-e;n=new Buffer(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},Buffer.prototype.fill=function fill(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var s=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function base64ToBytes(e){return r.toByteArray(function base64clean(e){if((e=function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(s,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function blitBuffer(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(19))},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,function(e,t,n){var r=n(99)("wks"),i=n(64),a=n(21).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(187),i=n(472),a=Object.prototype.toString;function isArray(e){return"[object Array]"===a.call(e)}function isObject(e){return null!==e&&"object"===typeof e}function isFunction(e){return"[object Function]"===a.call(e)}function forEach(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),isArray(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:isArray,isArrayBuffer:function isArrayBuffer(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:i,isFormData:function isFormData(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function isArrayBufferView(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function isString(e){return"string"===typeof e},isNumber:function isNumber(e){return"number"===typeof e},isObject:isObject,isUndefined:function isUndefined(e){return"undefined"===typeof e},isDate:function isDate(e){return"[object Date]"===a.call(e)},isFile:function isFile(e){return"[object File]"===a.call(e)},isBlob:function isBlob(e){return"[object Blob]"===a.call(e)},isFunction:isFunction,isStream:function isStream(e){return isObject(e)&&isFunction(e.pipe)},isURLSearchParams:function isURLSearchParams(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function isStandardBrowserEnv(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:forEach,merge:function merge(){var e={};function assignValue(t,n){"object"===typeof e[n]&&"object"===typeof t?e[n]=merge(e[n],t):e[n]=t}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],assignValue);return e},deepMerge:function deepMerge(){var e={};function assignValue(t,n){"object"===typeof e[n]&&"object"===typeof t?e[n]=deepMerge(e[n],t):e[n]="object"===typeof t?deepMerge({},t):t}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],assignValue);return e},extend:function extend(e,t,n){return forEach(t,(function assignValue(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){e.exports=n(243)},function(e,t,n){"use strict";t.__esModule=!0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(61));t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default((function(e,n){return function step(i,a){try{var o=t[i](a),s=o.value}catch(u){return void n(u)}if(!o.done)return r.default.resolve(s).then((function(e){step("next",e)}),(function(e){step("throw",e)}));e(s)}("next")}))}}},function(e,t,n){var r=n(21),i=n(18),a=n(43),o=n(39),s=n(40),u=function $export(e,t,n){var u,l,c,f=e&$export.F,d=e&$export.G,h=e&$export.S,p=e&$export.P,g=e&$export.B,m=e&$export.W,v=d?i:i[t]||(i[t]={}),y=v.prototype,_=d?r:h?r[t]:(r[t]||{}).prototype;for(u in d&&(n=t),n)(l=!f&&_&&void 0!==_[u])&&s(v,u)||(c=l?_[u]:n[u],v[u]=d&&"function"!=typeof _[u]?n[u]:g&&l?a(c,r):m&&_[u]==c?function(e){var t=function F(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?a(Function.call,c):c,p&&((v.virtual||(v.virtual={}))[u]=c,e&$export.R&&y&&!y[u]&&o(y,u,c)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(35);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=_interopRequireDefault(n(470)),o=_interopRequireDefault(n(55)),s=n(196);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=(0,o.default)("github:request"),l=function(e){function ResponseError(e,t,n){_classCallCheck(this,ResponseError);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(ResponseError.__proto__||Object.getPrototypeOf(ResponseError)).call(this,e));return r.path=t,r.request=n.config,r.response=(n||{}).response||n,r.status=n.status,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ResponseError,Error),ResponseError}(),c=function(){function Requestable(e,t,n){_classCallCheck(this,Requestable),this.__apiBase=t||"https://api.github.com",this.__auth={token:e.token,username:e.username,password:e.password},this.__AcceptHeader=n||"v3",e.token?this.__authorizationHeader="token "+e.token:e.username&&e.password&&(this.__authorizationHeader="Basic "+s.Base64.encode(e.username+":"+e.password))}return i(Requestable,[{key:"__getURL",value:function __getURL(e){var t=e;-1===e.indexOf("//")&&(t=this.__apiBase+e);var n="timestamp="+(new Date).getTime();return t.replace(/(timestamp=\d+)/,n)}},{key:"__getRequestHeaders",value:function __getRequestHeaders(e,t){var n={"Content-Type":"application/json;charset=UTF-8",Accept:"application/vnd.github."+(t||this.__AcceptHeader)};return e&&(n.Accept+=".raw"),n.Accept+="+json",this.__authorizationHeader&&(n.Authorization=this.__authorizationHeader),n}},{key:"_getOptionsWithDefaults",value:function _getOptionsWithDefaults(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.visibility||e.affiliation||(e.type=e.type||"all"),e.sort=e.sort||"updated",e.per_page=e.per_page||"100",e}},{key:"_dateToISO",value:function _dateToISO(e){return e&&e instanceof Date&&(e=e.toISOString()),e}},{key:"_request",value:function _request(e,t,n,i,o){var s=this.__getURL(t),l=(n||{}).AcceptHeader;l&&delete n.AcceptHeader;var c=this.__getRequestHeaders(o,l),d={};n&&"object"===("undefined"===typeof n?"undefined":r(n))&&function methodHasNoBody(e){return-1!==f.indexOf(e)}(e)&&(d=n,n=void 0);var h={url:s,method:e,headers:c,params:d,data:n,responseType:o?"text":"json"};u(h.method+" to "+h.url);var p=(0,a.default)(h).catch(callbackErrorOrThrow(i,t));return i&&p.then((function(e){e.data&&Object.keys(e.data).length>0?i(null,e.data,e):"GET"!==h.method&&Object.keys(e.data).length<1?i(null,e.status<300,e):i(null,e.data,e)})),p}},{key:"_request204or404",value:function _request204or404(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"GET";return this._request(r,e,t).then((function success(e){return n&&n(null,!0,e),!0}),(function failure(e){if(404===e.response.status)return n&&n(null,!1,e),!1;throw n&&n(e),e}))}},{key:"_requestAllPages",value:function _requestAllPages(e,t,n,r){var i=this;return r=r||[],this._request("GET",e,t).then((function(a){var o,s=void 0;if(a.data instanceof Array)s=a.data;else{if(!(a.data.items instanceof Array)){var c="cannot figure out how to append "+a.data+" to the result set";throw new l(c,e,a)}s=a.data.items}(o=r).push.apply(o,function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s));var f=function getNextPage(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/\s*,\s*/).reduce((function(e,t){return-1!==t.search(/rel="next"/)?(t.match(/<(.*)>/)||[])[1]:e}),void 0)}(a.headers.link);return f&&(t||(t={}),t.page=parseInt(f.match(/(page=[0-9]*)/g).shift().split("=").pop()),!t||"number"===typeof t.page)?(u("getting next page: "+f),i._requestAllPages(f,t,n,r)):(n&&n(null,r,a),a.data=r,a)})).catch(callbackErrorOrThrow(n,e))}}]),Requestable}();e.exports=c;var f=["GET","HEAD","DELETE"];function callbackErrorOrThrow(e,t){return function handler(n){var r=void 0;if(n.hasOwnProperty("config")){var i=n.response,a=i.status,o=i.statusText,s=n.config,c=a+" error making request "+s.method+" "+s.url+': "'+o+'"';r=new l(c,t,n),u(c+" "+JSON.stringify(n.data))}else r=n;if(!e)throw u("throwing error"),r;u("going to error callback"),e(r)}}},,function(e,t,n){"use strict";var r=_interopRequireWildcard(n(270)),i=_interopRequireWildcard(n(316)),a=_interopRequireWildcard(n(321)),o=_interopRequireWildcard(n(322)),s=_interopRequireWildcard(n(323)),u=_interopRequireDefault(n(326)),l=_interopRequireDefault(n(70)),c=_interopRequireWildcard(n(327)),f=_interopRequireWildcard(n(333)),d=_interopRequireWildcard(n(334)),h=_interopRequireWildcard(n(34)),p=_interopRequireWildcard(n(335)),g=_interopRequireDefault(n(336));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}e.exports={account:r,annotations:i,athena:a,auth:o,devices:s,derived:u.default,drives:c,errorHandler:l.default,leaderboard:f,raw:d,request:h,vehicles:p,video:g.default}},function(e,t,n){e.exports=n(436)},function(e,t,n){var r=n(28),i=n(135),a=n(94),o=Object.defineProperty;t.f=n(36)?Object.defineProperty:function defineProperty(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=t.postForm=t.post=t.get=void 0;var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26)),a=_interopRequireDefault(n(61));t.get=function(){var e=(0,i.default)(r.default.mark((function _callee(e,t){return r.default.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ensureInit();case 2:return n.abrupt("return",new a.default((function(n,r){f.get(e,{query:t,json:!0},d(n,r))})));case 3:case"end":return n.stop()}}),_callee,this)})));return function get(t,n){return e.apply(this,arguments)}}(),t.post=function(){var e=(0,i.default)(r.default.mark((function _callee2(e,t){return r.default.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ensureInit();case 2:return n.abrupt("return",new a.default((function(n,r){f.post(e,{body:t,json:!0},d(n,r))})));case 3:case"end":return n.stop()}}),_callee2,this)})));return function post(t,n){return e.apply(this,arguments)}}(),t.postForm=function(){var e=(0,i.default)(r.default.mark((function _callee3(e,t){return r.default.wrap((function _callee3$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ensureInit();case 2:return n.abrupt("return",new a.default((function(n,r){f.post(e,{body:s.default.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}},d(n,r))})));case 3:case"end":return n.stop()}}),_callee3,this)})));return function postForm(t,n){return e.apply(this,arguments)}}(),t.patch=function(){var e=(0,i.default)(r.default.mark((function _callee4(e,t){return r.default.wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ensureInit();case 2:return n.abrupt("return",new a.default((function(n,r){f.patch(e,{body:t,json:!0},d(n,r))})));case 3:case"end":return n.stop()}}),_callee4,this)})));return function patch(t,n){return e.apply(this,arguments)}}();t.configure=configure;var o=_interopRequireDefault(n(106)),s=_interopRequireDefault(n(105)),u=_interopRequireDefault(n(70)),l=n(110);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c,f=(0,o.default)(),d=u.default;function ensureInit(){return c||(c=configure()),c}function configure(e,t){var n={baseUrl:l.COMMA_URL_ROOT,jwt:!1,parse:null};return e&&(n.token="JWT "+e),d=t||u.default,f.configure(n),c=a.default.resolve()}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){e.exports=!n(63)((function(){return 7!=Object.defineProperty({},"a",{get:function get(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(169);e.exports=function mean(e){if(0===e.length)throw new Error("mean requires at least one data point");return r(e)/e.length}},,function(e,t,n){var r=n(33),i=n(53);e.exports=n(36)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n,r,i=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{r="function"===typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var a,o=[],s=!1,u=-1;function cleanUpNextTick(){s&&a&&(s=!1,a.length?o=a.concat(o):u=-1,o.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=o.length;t;){for(a=o,o=[];++u<t;)a&&a[u].run();u=-1,t=o.length}a=null,s=!1,function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new Item(e,t)),1!==o.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},,function(e,t,n){var r=n(62);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t,n){var r=n(249),i=n(92);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isPrefixedValue(e){return"string"===typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},function(e,t,n){function Emitter(e){if(e)return function mixin(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}(e)}e.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function on(){this.off(e,on),t.apply(this,arguments)}return on.fn=t,this.on(e,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,i=n(511),a=n(204),o=n(513),s=n(514),u=n(515);"undefined"!==typeof ArrayBuffer&&(r=n(516));var l="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),c="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=l||c;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(d),p={type:"error",data:"parser error"},g=n(517);function map(e,t,n){for(var r=new Array(e.length),i=s(e.length,n),a=function eachWithIndex(e,n,i){t(n,(function(t,n){r[e]=n,i(t,r)}))},o=0;o<e.length;o++)a(o,e[o],i)}t.encodePacket=function(e,n,r,i){"function"===typeof n&&(i=n,n=!1),"function"===typeof r&&(i=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!==typeof ArrayBuffer&&a instanceof ArrayBuffer)return function encodeArrayBuffer(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,a=new Uint8Array(i),o=new Uint8Array(1+i.byteLength);o[0]=d[e.type];for(var s=0;s<a.length;s++)o[s+1]=a[s];return r(o.buffer)}(e,n,i);if("undefined"!==typeof g&&a instanceof g)return function encodeBlob(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function encodeBlobAsArrayBuffer(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);i[0]=d[e.type];var a=new g([i.buffer,e.data]);return r(a)}(e,n,i);if(a&&a.base64)return function encodeBase64Object(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,i);var o=d[e.type];return void 0!==e.data&&(o+=r?u.encode(String(e.data),{strict:!1}):String(e.data)),i(""+o)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if("undefined"!==typeof g&&e.data instanceof g){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];n(i+e)},a.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(l){for(var o=new Uint8Array(e.data),s=new Array(o.length),u=0;u<o.length;u++)s[u]=o[u];r=String.fromCharCode.apply(null,s)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return p;if("string"===typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function tryDecode(e){try{e=u.decode(e,{strict:!1})}catch(t){return!1}return e}(e)))return p;var i=e.charAt(0);return Number(i)==i&&h[i]?e.length>1?{type:h[i],data:e.substring(1)}:{type:h[i]}:p}i=new Uint8Array(e)[0];var a=o(e,1);return g&&"blob"===n&&(a=new g([a])),{type:h[i],data:a}},t.decodeBase64Packet=function(e,t){var n=h[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&g&&(i=new g([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"===typeof n&&(r=n,n=null);var i=a(e);if(n&&i)return g&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");map(e,(function encodeOne(e,r){t.encodePacket(e,!!i&&n,!1,(function(e){r(null,function setLengthHeader(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!==typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"===typeof n&&(r=n,n=null),""===e)return r(p,0,1);for(var a,o,s="",u=0,l=e.length;u<l;u++){var c=e.charAt(u);if(":"===c){if(""===s||s!=(a=Number(s)))return r(p,0,1);if(s!=(o=e.substr(u+1,a)).length)return r(p,0,1);if(o.length){if(i=t.decodePacket(o,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,u+a,l))return}u+=a,s=""}else s+=c}return""!==s?r(p,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));map(e,(function encodeOne(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"===typeof t?t.length:t.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),a=0;return t.forEach((function(e){var t="string"===typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);n=r.buffer}i[a++]=t?0:1;var s=n.byteLength.toString();for(o=0;o<s.length;o++)i[a++]=parseInt(s[o]);i[a++]=255;for(r=new Uint8Array(n),o=0;o<r.length;o++)i[a++]=r[o]})),n(i.buffer)}))},t.encodePayloadAsBlob=function(e,n){map(e,(function encodeOne(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"===typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(a.length+1);for(i=0;i<a.length;i++)o[i]=parseInt(a[i]);if(o[a.length]=255,g){var s=new g([t.buffer,o.buffer,e]);n(null,s)}}))}),(function(e,t){return n(new g(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"===typeof n&&(r=n,n=null);for(var i=e,a=[];i.byteLength>0;){for(var s=new Uint8Array(i),u=0===s[0],l="",c=1;255!==s[c];c++){if(l.length>310)return r(p,0,1);l+=s[c]}i=o(i,2+l.length),l=parseInt(l);var f=o(i,0,l);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(g){var d=new Uint8Array(f);f="";for(c=0;c<d.length;c++)f+=String.fromCharCode(d[c])}a.push(f),i=o(i,l)}var h=a.length;a.forEach((function(e,i){r(t.decodePacket(e,n,!0),i,h)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.storage=void 0;var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26)),a=function(){var e=(0,i.default)(r.default.mark((function _callee(){var e;return r.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getCommaAccessToken();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),_callee,this)})));return function init(){return e.apply(this,arguments)}}(),o=function(){var e=(0,i.default)(r.default.mark((function _callee2(){return r.default.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.logOut();case 2:s.default.location.href=s.default.location.origin;case 3:case"end":return e.stop()}}),_callee2,this)})));return function logOut(){return e.apply(this,arguments)}}(),s=_interopRequireDefault(n(146)),u=_interopRequireWildcard(n(267)),l=_interopRequireWildcard(n(269));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.storage=u,t.config=l,t.default={init:a,logOut:o,isAuthenticated:function isAuthenticated(){return u.isAuthed}}},function(e,t,n){(function(e){e.exports=function(){"use strict";var t,n;function hooks(){return t.apply(null,arguments)}function isArray(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function isObject(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function isUndefined(e){return void 0===e}function isNumber(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function isDate(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function map(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function extend(e,t){for(var n in t)hasOwnProp(t,n)&&(e[n]=t[n]);return hasOwnProp(t,"toString")&&(e.toString=t.toString),hasOwnProp(t,"valueOf")&&(e.valueOf=t.valueOf),e}function createUTC(e,t,n,r){return createLocalOrUTC(e,t,n,r,!0).utc()}function getParsingFlags(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function isValid(e){if(null==e._isValid){var t=getParsingFlags(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function createInvalid(e){var t=createUTC(NaN);return null!=e?extend(getParsingFlags(t),e):getParsingFlags(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function some(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var r=hooks.momentProperties=[];function copyConfig(e,t){var n,i,a;if(isUndefined(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),isUndefined(t._i)||(e._i=t._i),isUndefined(t._f)||(e._f=t._f),isUndefined(t._l)||(e._l=t._l),isUndefined(t._strict)||(e._strict=t._strict),isUndefined(t._tzm)||(e._tzm=t._tzm),isUndefined(t._isUTC)||(e._isUTC=t._isUTC),isUndefined(t._offset)||(e._offset=t._offset),isUndefined(t._pf)||(e._pf=getParsingFlags(t)),isUndefined(t._locale)||(e._locale=t._locale),r.length>0)for(n=0;n<r.length;n++)isUndefined(a=t[i=r[n]])||(e[i]=a);return e}var i=!1;function Moment(e){copyConfig(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===i&&(i=!0,hooks.updateOffset(this),i=!1)}function isMoment(e){return e instanceof Moment||null!=e&&null!=e._isAMomentObject}function absFloor(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function toInt(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=absFloor(t)),n}function compareArrays(e,t,n){var r,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&toInt(e[r])!==toInt(t[r]))&&o++;return o+a}function warn(e){!1===hooks.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function deprecate(e,t){var n=!0;return extend((function(){if(null!=hooks.deprecationHandler&&hooks.deprecationHandler(null,e),n){for(var r,i=[],a=0;a<arguments.length;a++){if(r="","object"===typeof arguments[a]){for(var o in r+="\n["+a+"] ",arguments[0])r+=o+": "+arguments[0][o]+", ";r=r.slice(0,-2)}else r=arguments[a];i.push(r)}warn(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var a,o={};function deprecateSimple(e,t){null!=hooks.deprecationHandler&&hooks.deprecationHandler(e,t),o[e]||(warn(t),o[e]=!0)}function isFunction(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function mergeConfigs(e,t){var n,r=extend({},e);for(n in t)hasOwnProp(t,n)&&(isObject(e[n])&&isObject(t[n])?(r[n]={},extend(r[n],e[n]),extend(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)hasOwnProp(e,n)&&!hasOwnProp(t,n)&&isObject(e[n])&&(r[n]=extend({},r[n]));return r}function Locale(e){null!=e&&this.set(e)}hooks.suppressDeprecationWarnings=!1,hooks.deprecationHandler=null,a=Object.keys?Object.keys:function keys(e){var t,n=[];for(t in e)hasOwnProp(e,t)&&n.push(t);return n};var s={};function addUnitAlias(e,t){var n=e.toLowerCase();s[n]=s[n+"s"]=s[t]=e}function normalizeUnits(e){return"string"===typeof e?s[e]||s[e.toLowerCase()]:void 0}function normalizeObjectUnits(e){var t,n,r={};for(n in e)hasOwnProp(e,n)&&(t=normalizeUnits(n))&&(r[t]=e[n]);return r}var u={};function addUnitPriority(e,t){u[e]=t}function zeroFill(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var l=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,c=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,f={},d={};function addFormatToken(e,t,n,r){var i=r;"string"===typeof r&&(i=function func(){return this[r]()}),e&&(d[e]=i),t&&(d[t[0]]=function(){return zeroFill(i.apply(this,arguments),t[1],t[2])}),n&&(d[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function formatMoment(e,t){return e.isValid()?(t=expandFormat(t,e.localeData()),f[t]=f[t]||function makeFormatFunction(e){var t,n,r,i=e.match(l);for(t=0,n=i.length;t<n;t++)d[i[t]]?i[t]=d[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,a="";for(r=0;r<n;r++)a+=isFunction(i[r])?i[r].call(t,e):i[r];return a}}(t),f[t](e)):e.localeData().invalidDate()}function expandFormat(e,t){var n=5;function replaceLongDateFormatTokens(e){return t.longDateFormat(e)||e}for(c.lastIndex=0;n>=0&&c.test(e);)e=e.replace(c,replaceLongDateFormatTokens),c.lastIndex=0,n-=1;return e}var h=/\d/,p=/\d\d/,g=/\d{3}/,m=/\d{4}/,v=/[+-]?\d{6}/,y=/\d\d?/,_=/\d\d\d\d?/,b=/\d\d\d\d\d\d?/,x=/\d{1,3}/,w=/\d{1,4}/,k=/[+-]?\d{1,6}/,S=/\d+/,E=/[+-]?\d+/,T=/Z|[+-]\d\d:?\d\d/gi,C=/Z|[+-]\d\d(?::?\d\d)?/gi,O=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,A={};function addRegexToken(e,t,n){A[e]=isFunction(t)?t:function(e,r){return e&&n?n:t}}function getParseRegexForToken(e,t){return hasOwnProp(A,e)?A[e](t._strict,t._locale):new RegExp(function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}(e))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var R={};function addParseToken(e,t){var n,r=t;for("string"===typeof e&&(e=[e]),isNumber(t)&&(r=function func(e,n){n[t]=toInt(e)}),n=0;n<e.length;n++)R[e[n]]=r}function addWeekParseToken(e,t){addParseToken(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function addTimeToArrayFromToken(e,t,n){null!=t&&hasOwnProp(R,e)&&R[e](t,n._a,n,e)}var D=0,P=1,M=2,j=3,F=4,I=5,L=6,N=7,B=8;function daysInYear(e){return isLeapYear(e)?366:365}function isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}addFormatToken("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),addFormatToken(0,["YY",2],0,(function(){return this.year()%100})),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addUnitPriority("year",1),addRegexToken("Y",E),addRegexToken("YY",y,p),addRegexToken("YYYY",w,m),addRegexToken("YYYYY",k,v),addRegexToken("YYYYYY",k,v),addParseToken(["YYYYY","YYYYYY"],D),addParseToken("YYYY",(function(e,t){t[D]=2===e.length?hooks.parseTwoDigitYear(e):toInt(e)})),addParseToken("YY",(function(e,t){t[D]=hooks.parseTwoDigitYear(e)})),addParseToken("Y",(function(e,t){t[D]=parseInt(e,10)})),hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var U,z=makeGetSet("FullYear",!0);function makeGetSet(e,t){return function(n){return null!=n?(set$1(this,e,n),hooks.updateOffset(this,t),this):get(this,e)}}function get(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function set$1(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&isLeapYear(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),daysInMonth(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function daysInMonth(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=function mod(e,t){return(e%t+t)%t}(t,12);return e+=(t-n)/12,1===n?isLeapYear(e)?29:28:31-n%7%2}U=Array.prototype.indexOf?Array.prototype.indexOf:function indexOf(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},addFormatToken("M",["MM",2],"Mo",(function(){return this.month()+1})),addFormatToken("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),addFormatToken("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),addUnitAlias("month","M"),addUnitPriority("month",8),addRegexToken("M",y),addRegexToken("MM",y,p),addRegexToken("MMM",(function(e,t){return t.monthsShortRegex(e)})),addRegexToken("MMMM",(function(e,t){return t.monthsRegex(e)})),addParseToken(["M","MM"],(function(e,t){t[P]=toInt(e)-1})),addParseToken(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[P]=i:getParsingFlags(n).invalidMonth=e}));var q=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,W="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),G="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function handleStrictParse(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=createUTC([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=U.call(this._shortMonthsParse,o))?i:null:-1!==(i=U.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=U.call(this._shortMonthsParse,o))?i:-1!==(i=U.call(this._longMonthsParse,o))?i:null:-1!==(i=U.call(this._longMonthsParse,o))?i:-1!==(i=U.call(this._shortMonthsParse,o))?i:null}function setMonth(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=toInt(t);else if(!isNumber(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),daysInMonth(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function getSetMonth(e){return null!=e?(setMonth(this,e),hooks.updateOffset(this,!0),this):get(this,"Month")}var H=O,V=O;function computeMonthsParse(){function cmpLenRev(e,t){return t.length-e.length}var e,t,n=[],r=[],i=[];for(e=0;e<12;e++)t=createUTC([2e3,e]),n.push(this.monthsShort(t,"")),r.push(this.months(t,"")),i.push(this.months(t,"")),i.push(this.monthsShort(t,""));for(n.sort(cmpLenRev),r.sort(cmpLenRev),i.sort(cmpLenRev),e=0;e<12;e++)n[e]=regexEscape(n[e]),r[e]=regexEscape(r[e]);for(e=0;e<24;e++)i[e]=regexEscape(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function createDate(e,t,n,r,i,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,a,o),s}function createUTCDate(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function firstWeekOffset(e,t,n){var r=7+t-n;return-(7+createUTCDate(e,0,r).getUTCDay()-t)%7+r-1}function dayOfYearFromWeeks(e,t,n,r,i){var a,o,s=1+7*(t-1)+(7+n-r)%7+firstWeekOffset(e,r,i);return s<=0?o=daysInYear(a=e-1)+s:s>daysInYear(e)?(a=e+1,o=s-daysInYear(e)):(a=e,o=s),{year:a,dayOfYear:o}}function weekOfYear(e,t,n){var r,i,a=firstWeekOffset(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?r=o+weeksInYear(i=e.year()-1,t,n):o>weeksInYear(e.year(),t,n)?(r=o-weeksInYear(e.year(),t,n),i=e.year()+1):(i=e.year(),r=o),{week:r,year:i}}function weeksInYear(e,t,n){var r=firstWeekOffset(e,t,n),i=firstWeekOffset(e+1,t,n);return(daysInYear(e)-r+i)/7}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addUnitPriority("week",5),addUnitPriority("isoWeek",5),addRegexToken("w",y),addRegexToken("ww",y,p),addRegexToken("W",y),addRegexToken("WW",y,p),addWeekParseToken(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=toInt(e)})),addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),addFormatToken("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),addFormatToken("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addUnitPriority("day",11),addUnitPriority("weekday",11),addUnitPriority("isoWeekday",11),addRegexToken("d",y),addRegexToken("e",y),addRegexToken("E",y),addRegexToken("dd",(function(e,t){return t.weekdaysMinRegex(e)})),addRegexToken("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),addRegexToken("dddd",(function(e,t){return t.weekdaysRegex(e)})),addWeekParseToken(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:getParsingFlags(n).invalidWeekday=e})),addWeekParseToken(["d","e","E"],(function(e,t,n,r){t[r]=toInt(e)}));var Y="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),X="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function handleStrictParse$1(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=createUTC([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=U.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=U.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=U.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=U.call(this._weekdaysParse,o))?i:-1!==(i=U.call(this._shortWeekdaysParse,o))?i:-1!==(i=U.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=U.call(this._shortWeekdaysParse,o))?i:-1!==(i=U.call(this._weekdaysParse,o))?i:-1!==(i=U.call(this._minWeekdaysParse,o))?i:null:-1!==(i=U.call(this._minWeekdaysParse,o))?i:-1!==(i=U.call(this._weekdaysParse,o))?i:-1!==(i=U.call(this._shortWeekdaysParse,o))?i:null}var K=O,J=O,Z=O;function computeWeekdaysParse(){function cmpLenRev(e,t){return t.length-e.length}var e,t,n,r,i,a=[],o=[],s=[],u=[];for(e=0;e<7;e++)t=createUTC([2e3,1]).day(e),n=this.weekdaysMin(t,""),r=this.weekdaysShort(t,""),i=this.weekdays(t,""),a.push(n),o.push(r),s.push(i),u.push(n),u.push(r),u.push(i);for(a.sort(cmpLenRev),o.sort(cmpLenRev),s.sort(cmpLenRev),u.sort(cmpLenRev),e=0;e<7;e++)o[e]=regexEscape(o[e]),s[e]=regexEscape(s[e]),u[e]=regexEscape(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function meridiem(e,t){addFormatToken(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function matchMeridiem(e,t){return t._meridiemParse}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,(function kFormat(){return this.hours()||24})),addFormatToken("hmm",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)})),addFormatToken("hmmss",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),addFormatToken("Hmm",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)})),addFormatToken("Hmmss",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)})),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addUnitPriority("hour",13),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",y),addRegexToken("h",y),addRegexToken("k",y),addRegexToken("HH",y,p),addRegexToken("hh",y,p),addRegexToken("kk",y,p),addRegexToken("hmm",_),addRegexToken("hmmss",b),addRegexToken("Hmm",_),addRegexToken("Hmmss",b),addParseToken(["H","HH"],j),addParseToken(["k","kk"],(function(e,t,n){var r=toInt(e);t[j]=24===r?0:r})),addParseToken(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),addParseToken(["h","hh"],(function(e,t,n){t[j]=toInt(e),getParsingFlags(n).bigHour=!0})),addParseToken("hmm",(function(e,t,n){var r=e.length-2;t[j]=toInt(e.substr(0,r)),t[F]=toInt(e.substr(r)),getParsingFlags(n).bigHour=!0})),addParseToken("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[j]=toInt(e.substr(0,r)),t[F]=toInt(e.substr(r,2)),t[I]=toInt(e.substr(i)),getParsingFlags(n).bigHour=!0})),addParseToken("Hmm",(function(e,t,n){var r=e.length-2;t[j]=toInt(e.substr(0,r)),t[F]=toInt(e.substr(r))})),addParseToken("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[j]=toInt(e.substr(0,r)),t[F]=toInt(e.substr(r,2)),t[I]=toInt(e.substr(i))}));var Q,ee=makeGetSet("Hours",!0),te={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:W,monthsShort:G,week:{dow:0,doy:6},weekdays:Y,weekdaysMin:X,weekdaysShort:$,meridiemParse:/[ap]\.?m?\.?/i},ne={},re={};function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function loadLocale(t){var n=null;if(!ne[t]&&"undefined"!==typeof e&&e&&e.exports)try{n=Q._abbr,!function webpackMissingModule(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),getSetGlobalLocale(n)}catch(r){}return ne[t]}function getSetGlobalLocale(e,t){var n;return e&&((n=isUndefined(t)?getLocale(e):defineLocale(e,t))?Q=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Q._abbr}function defineLocale(e,t){if(null!==t){var n,r=te;if(t.abbr=e,null!=ne[e])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ne[e]._config;else if(null!=t.parentLocale)if(null!=ne[t.parentLocale])r=ne[t.parentLocale]._config;else{if(null==(n=loadLocale(t.parentLocale)))return re[t.parentLocale]||(re[t.parentLocale]=[]),re[t.parentLocale].push({name:e,config:t}),null;r=n._config}return ne[e]=new Locale(mergeConfigs(r,t)),re[e]&&re[e].forEach((function(e){defineLocale(e.name,e.config)})),getSetGlobalLocale(e),ne[e]}return delete ne[e],null}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Q;if(!isArray(e)){if(t=loadLocale(e))return t;e=[e]}return function chooseLocale(e){for(var t,n,r,i,a=0;a<e.length;){for(t=(i=normalizeLocale(e[a]).split("-")).length,n=(n=normalizeLocale(e[a+1]))?n.split("-"):null;t>0;){if(r=loadLocale(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&compareArrays(i,n,!0)>=t-1)break;t--}a++}return Q}(e)}function checkOverflow(e){var t,n=e._a;return n&&-2===getParsingFlags(e).overflow&&(t=n[P]<0||n[P]>11?P:n[M]<1||n[M]>daysInMonth(n[D],n[P])?M:n[j]<0||n[j]>24||24===n[j]&&(0!==n[F]||0!==n[I]||0!==n[L])?j:n[F]<0||n[F]>59?F:n[I]<0||n[I]>59?I:n[L]<0||n[L]>999?L:-1,getParsingFlags(e)._overflowDayOfYear&&(t<D||t>M)&&(t=M),getParsingFlags(e)._overflowWeeks&&-1===t&&(t=N),getParsingFlags(e)._overflowWeekday&&-1===t&&(t=B),getParsingFlags(e).overflow=t),e}function defaults(e,t,n){return null!=e?e:null!=t?t:n}function configFromArray(e){var t,n,r,i,a,o=[];if(!e._d){for(r=function currentDateArray(e){var t=new Date(hooks.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[M]&&null==e._a[P]&&function dayOfYearFromWeekInfo(e){var t,n,r,i,a,o,s,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,o=4,n=defaults(t.GG,e._a[D],weekOfYear(createLocal(),1,4).year),r=defaults(t.W,1),((i=defaults(t.E,1))<1||i>7)&&(u=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var l=weekOfYear(createLocal(),a,o);n=defaults(t.gg,e._a[D],l.year),r=defaults(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(u=!0)):i=a}r<1||r>weeksInYear(n,a,o)?getParsingFlags(e)._overflowWeeks=!0:null!=u?getParsingFlags(e)._overflowWeekday=!0:(s=dayOfYearFromWeeks(n,r,i,a,o),e._a[D]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=defaults(e._a[D],r[D]),(e._dayOfYear>daysInYear(a)||0===e._dayOfYear)&&(getParsingFlags(e)._overflowDayOfYear=!0),n=createUTCDate(a,0,e._dayOfYear),e._a[P]=n.getUTCMonth(),e._a[M]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[j]&&0===e._a[F]&&0===e._a[I]&&0===e._a[L]&&(e._nextDay=!0,e._a[j]=0),e._d=(e._useUTC?createUTCDate:createDate).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[j]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(getParsingFlags(e).weekdayMismatch=!0)}}var ie=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ae=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oe=/Z|[+-]\d\d(?::?\d\d)?/,se=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ue=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],le=/^\/?Date\((\-?\d+)/i;function configFromISO(e){var t,n,r,i,a,o,s=e._i,u=ie.exec(s)||ae.exec(s);if(u){for(getParsingFlags(e).iso=!0,t=0,n=se.length;t<n;t++)if(se[t][1].exec(u[1])){i=se[t][0],r=!1!==se[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=ue.length;t<n;t++)if(ue[t][1].exec(u[3])){a=(u[2]||" ")+ue[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(u[4]){if(!oe.exec(u[4]))return void(e._isValid=!1);o="Z"}e._f=i+(a||"")+(o||""),configFromStringAndFormat(e)}else e._isValid=!1}var ce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function untruncateYear(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var fe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function configFromRFC2822(e){var t=ce.exec(function preprocessRFC2822(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(e._i));if(t){var n=function extractFromRFC2822Strings(e,t,n,r,i,a){var o=[untruncateYear(e),G.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function checkWeekday(e,t,n){return!e||$.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(getParsingFlags(n).weekdayMismatch=!0,n._isValid=!1,!1)}(t[1],n,e))return;e._a=n,e._tzm=function calculateOffset(e,t,n){if(e)return fe[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(t[8],t[9],t[10]),e._d=createUTCDate.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),getParsingFlags(e).rfc2822=!0}else e._isValid=!1}function configFromStringAndFormat(e){if(e._f!==hooks.ISO_8601)if(e._f!==hooks.RFC_2822){e._a=[],getParsingFlags(e).empty=!0;var t,n,r,i,a,o=""+e._i,s=o.length,u=0;for(r=expandFormat(e._f,e._locale).match(l)||[],t=0;t<r.length;t++)i=r[t],(n=(o.match(getParseRegexForToken(i,e))||[])[0])&&((a=o.substr(0,o.indexOf(n))).length>0&&getParsingFlags(e).unusedInput.push(a),o=o.slice(o.indexOf(n)+n.length),u+=n.length),d[i]?(n?getParsingFlags(e).empty=!1:getParsingFlags(e).unusedTokens.push(i),addTimeToArrayFromToken(i,n,e)):e._strict&&!n&&getParsingFlags(e).unusedTokens.push(i);getParsingFlags(e).charsLeftOver=s-u,o.length>0&&getParsingFlags(e).unusedInput.push(o),e._a[j]<=12&&!0===getParsingFlags(e).bigHour&&e._a[j]>0&&(getParsingFlags(e).bigHour=void 0),getParsingFlags(e).parsedDateParts=e._a.slice(0),getParsingFlags(e).meridiem=e._meridiem,e._a[j]=function meridiemFixWrap(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[j],e._meridiem),configFromArray(e),checkOverflow(e)}else configFromRFC2822(e);else configFromISO(e)}function prepareConfig(e){var t=e._i,n=e._f;return e._locale=e._locale||getLocale(e._l),null===t||void 0===n&&""===t?createInvalid({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),isMoment(t)?new Moment(checkOverflow(t)):(isDate(t)?e._d=t:isArray(n)?function configFromStringAndArray(e){var t,n,r,i,a;if(0===e._f.length)return getParsingFlags(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)a=0,t=copyConfig({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],configFromStringAndFormat(t),isValid(t)&&(a+=getParsingFlags(t).charsLeftOver,a+=10*getParsingFlags(t).unusedTokens.length,getParsingFlags(t).score=a,(null==r||a<r)&&(r=a,n=t));extend(e,n||t)}(e):n?configFromStringAndFormat(e):function configFromInput(e){var t=e._i;isUndefined(t)?e._d=new Date(hooks.now()):isDate(t)?e._d=new Date(t.valueOf()):"string"===typeof t?function configFromString(e){var t=le.exec(e._i);null===t?(configFromISO(e),!1===e._isValid&&(delete e._isValid,configFromRFC2822(e),!1===e._isValid&&(delete e._isValid,hooks.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):isArray(t)?(e._a=map(t.slice(0),(function(e){return parseInt(e,10)})),configFromArray(e)):isObject(t)?function configFromObject(e){if(!e._d){var t=normalizeObjectUnits(e._i);e._a=map([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),configFromArray(e)}}(e):isNumber(t)?e._d=new Date(t):hooks.createFromInputFallback(e)}(e),isValid(e)||(e._d=null),e))}function createLocalOrUTC(e,t,n,r,i){var a={};return!0!==n&&!1!==n||(r=n,n=void 0),(isObject(e)&&function isObjectEmpty(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||isArray(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=r,function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(a)}function createLocal(e,t,n,r){return createLocalOrUTC(e,t,n,r,!1)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),hooks.ISO_8601=function(){},hooks.RFC_2822=function(){};var de=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:createInvalid()})),he=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=createLocal.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:createInvalid()}));function pickBy(e,t){var n,r;if(1===t.length&&isArray(t[0])&&(t=t[0]),!t.length)return createLocal();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var pe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Duration(e){var t=normalizeObjectUnits(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=function isDurationValid(e){for(var t in e)if(-1===U.call(pe,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<pe.length;++r)if(e[pe[r]]){if(n)return!1;parseFloat(e[pe[r]])!==toInt(e[pe[r]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=getLocale(),this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function offset(e,t){addFormatToken(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+zeroFill(~~(e/60),2)+t+zeroFill(~~e%60,2)}))}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",C),addRegexToken("ZZ",C),addParseToken(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=offsetFromString(C,e)}));var ge=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(ge)||["-",0,0],i=60*r[1]+toInt(r[2]);return 0===i?0:"+"===r[0]?i:-i}function cloneWithOffset(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),hooks.updateOffset(n,!1),n):createLocal(e).local()}function getDateOffset(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function isUtc(){return!!this.isValid()&&this._isUTC&&0===this._offset}hooks.updateOffset=function(){};var me=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ve=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var n,r,i,a=e,o=null;return isDuration(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:isNumber(e)?(a={},t?a[t]=e:a.milliseconds=e):(o=me.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:toInt(o[M])*n,h:toInt(o[j])*n,m:toInt(o[F])*n,s:toInt(o[I])*n,ms:toInt(absRound(1e3*o[L]))*n}):(o=ve.exec(e))?(n="-"===o[1]?-1:1,a={y:parseIso(o[2],n),M:parseIso(o[3],n),w:parseIso(o[4],n),d:parseIso(o[5],n),h:parseIso(o[6],n),m:parseIso(o[7],n),s:parseIso(o[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=function momentsDifference(e,t){var n;return e.isValid()&&t.isValid()?(t=cloneWithOffset(t,e),e.isBefore(t)?n=positiveMomentsDifference(e,t):((n=positiveMomentsDifference(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(createLocal(a.from),createLocal(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new Duration(a),isDuration(e)&&hasOwnProp(e,"_locale")&&(r._locale=e._locale),r}function parseIso(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function positiveMomentsDifference(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function createAdder(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),addSubtract(this,createDuration(n="string"===typeof n?+n:n,r),e),this}}function addSubtract(e,t,n,r){var i=t._milliseconds,a=absRound(t._days),o=absRound(t._months);e.isValid()&&(r=null==r||r,o&&setMonth(e,get(e,"Month")+o*n),a&&set$1(e,"Date",get(e,"Date")+a*n),i&&e._d.setTime(e._d.valueOf()+i*n),r&&hooks.updateOffset(e,a||o))}createDuration.fn=Duration.prototype,createDuration.invalid=function createInvalid$1(){return createDuration(NaN)};var ye=createAdder(1,"add"),_e=createAdder(-1,"subtract");function monthDiff(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function locale(e){var t;return void 0===e?this._locale._abbr:(null!=(t=getLocale(e))&&(this._locale=t),this)}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var be=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function localeData(){return this._locale}var xe=1e3,we=60*xe,ke=60*we,Se=3506328*ke;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-Se:new Date(e,t,n).valueOf()}function utcStartOfDate(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-Se:Date.UTC(e,t,n)}function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}function getSetWeekYearHelper(e,t,n,r,i){var a;return null==e?weekOfYear(this,r,i).year:(t>(a=weeksInYear(e,r,i))&&(t=a),setWeekAll.call(this,e,t,n,r,i))}function setWeekAll(e,t,n,r,i){var a=dayOfYearFromWeeks(e,t,n,r,i),o=createUTCDate(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}addFormatToken(0,["gg",2],0,(function(){return this.weekYear()%100})),addFormatToken(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addUnitPriority("weekYear",1),addUnitPriority("isoWeekYear",1),addRegexToken("G",E),addRegexToken("g",E),addRegexToken("GG",y,p),addRegexToken("gg",y,p),addRegexToken("GGGG",w,m),addRegexToken("gggg",w,m),addRegexToken("GGGGG",k,v),addRegexToken("ggggg",k,v),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=toInt(e)})),addWeekParseToken(["gg","GG"],(function(e,t,n,r){t[r]=hooks.parseTwoDigitYear(e)})),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addUnitPriority("quarter",7),addRegexToken("Q",h),addParseToken("Q",(function(e,t){t[P]=3*(toInt(e)-1)})),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addUnitPriority("date",9),addRegexToken("D",y),addRegexToken("DD",y,p),addRegexToken("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),addParseToken(["D","DD"],M),addParseToken("Do",(function(e,t){t[M]=toInt(e.match(y)[0])}));var Ee=makeGetSet("Date",!0);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addUnitPriority("dayOfYear",4),addRegexToken("DDD",x),addRegexToken("DDDD",g),addParseToken(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=toInt(e)})),addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addUnitPriority("minute",14),addRegexToken("m",y),addRegexToken("mm",y,p),addParseToken(["m","mm"],F);var Te=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addUnitPriority("second",15),addRegexToken("s",y),addRegexToken("ss",y,p),addParseToken(["s","ss"],I);var Ce,Oe=makeGetSet("Seconds",!1);for(addFormatToken("S",0,0,(function(){return~~(this.millisecond()/100)})),addFormatToken(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),addFormatToken(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),addFormatToken(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),addFormatToken(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),addFormatToken(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),addFormatToken(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),addUnitAlias("millisecond","ms"),addUnitPriority("millisecond",16),addRegexToken("S",x,h),addRegexToken("SS",x,p),addRegexToken("SSS",x,g),Ce="SSSS";Ce.length<=9;Ce+="S")addRegexToken(Ce,S);function parseMs(e,t){t[L]=toInt(1e3*("0."+e))}for(Ce="S";Ce.length<=9;Ce+="S")addParseToken(Ce,parseMs);var Ae=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var Re=Moment.prototype;function preParsePostFormat(e){return e}Re.add=ye,Re.calendar=function calendar$1(e,t){var n=e||createLocal(),r=cloneWithOffset(n,this).startOf("day"),i=hooks.calendarFormat(this,r)||"sameElse",a=t&&(isFunction(t[i])?t[i].call(this,n):t[i]);return this.format(a||this.localeData().calendar(i,this,createLocal(n)))},Re.clone=function clone(){return new Moment(this)},Re.diff=function diff(e,t,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=cloneWithOffset(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=normalizeUnits(t)){case"year":a=monthDiff(this,r)/12;break;case"month":a=monthDiff(this,r);break;case"quarter":a=monthDiff(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:absFloor(a)},Re.endOf=function endOf(e){var t;if(void 0===(e=normalizeUnits(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?utcStartOfDate:localStartOfDate;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ke-mod$1(t+(this._isUTC?0:this.utcOffset()*we),ke)-1;break;case"minute":t=this._d.valueOf(),t+=we-mod$1(t,we)-1;break;case"second":t=this._d.valueOf(),t+=xe-mod$1(t,xe)-1}return this._d.setTime(t),hooks.updateOffset(this,!0),this},Re.format=function format(e){e||(e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat);var t=formatMoment(this,e);return this.localeData().postformat(t)},Re.from=function from(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Re.fromNow=function fromNow(e){return this.from(createLocal(),e)},Re.to=function to(e,t){return this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())?createDuration({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Re.toNow=function toNow(e){return this.to(createLocal(),e)},Re.get=function stringGet(e){return isFunction(this[e=normalizeUnits(e)])?this[e]():this},Re.invalidAt=function invalidAt(){return getParsingFlags(this).overflow},Re.isAfter=function isAfter(e,t){var n=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=normalizeUnits(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Re.isBefore=function isBefore(e,t){var n=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=normalizeUnits(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Re.isBetween=function isBetween(e,t,n,r){var i=isMoment(e)?e:createLocal(e),a=isMoment(t)?t:createLocal(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))},Re.isSame=function isSame(e,t){var n,r=isMoment(e)?e:createLocal(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=normalizeUnits(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Re.isSameOrAfter=function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Re.isSameOrBefore=function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Re.isValid=function isValid$2(){return isValid(this)},Re.lang=be,Re.locale=locale,Re.localeData=localeData,Re.max=he,Re.min=de,Re.parsingFlags=function parsingFlags(){return extend({},getParsingFlags(this))},Re.set=function stringSet(e,t){if("object"===typeof e)for(var n=function getPrioritizedUnits(e){var t=[];for(var n in e)t.push({unit:n,priority:u[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=normalizeObjectUnits(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(isFunction(this[e=normalizeUnits(e)]))return this[e](t);return this},Re.startOf=function startOf(e){var t;if(void 0===(e=normalizeUnits(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?utcStartOfDate:localStartOfDate;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mod$1(t+(this._isUTC?0:this.utcOffset()*we),ke);break;case"minute":t=this._d.valueOf(),t-=mod$1(t,we);break;case"second":t=this._d.valueOf(),t-=mod$1(t,xe)}return this._d.setTime(t),hooks.updateOffset(this,!0),this},Re.subtract=_e,Re.toArray=function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Re.toObject=function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Re.toDate=function toDate(){return new Date(this.valueOf())},Re.toISOString=function toISOString(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?formatMoment(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):isFunction(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",formatMoment(n,"Z")):formatMoment(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Re.inspect=function inspect(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},Re.toJSON=function toJSON(){return this.isValid()?this.toISOString():null},Re.toString=function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Re.unix=function unix(){return Math.floor(this.valueOf()/1e3)},Re.valueOf=function valueOf(){return this._d.valueOf()-6e4*(this._offset||0)},Re.creationData=function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Re.year=z,Re.isLeapYear=function getIsLeapYear(){return isLeapYear(this.year())},Re.weekYear=function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Re.isoWeekYear=function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Re.quarter=Re.quarters=function getSetQuarter(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Re.month=getSetMonth,Re.daysInMonth=function getDaysInMonth(){return daysInMonth(this.year(),this.month())},Re.week=Re.weeks=function getSetWeek(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Re.isoWeek=Re.isoWeeks=function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Re.weeksInYear=function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)},Re.isoWeeksInYear=function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)},Re.date=Ee,Re.day=Re.days=function getSetDayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function parseWeekday(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Re.weekday=function getSetLocaleDayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Re.isoWeekday=function getSetISODayOfWeek(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function parseIsoWeekday(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Re.dayOfYear=function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Re.hour=Re.hours=ee,Re.minute=Re.minutes=Te,Re.second=Re.seconds=Oe,Re.millisecond=Re.milliseconds=Ae,Re.utcOffset=function getSetOffset(e,t,n){var r,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=offsetFromString(C,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=getDateOffset(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?addSubtract(this,createDuration(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,hooks.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:getDateOffset(this)},Re.utc=function setOffsetToUTC(e){return this.utcOffset(0,e)},Re.local=function setOffsetToLocal(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(getDateOffset(this),"m")),this},Re.parseZone=function setOffsetToParsedOffset(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=offsetFromString(T,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Re.hasAlignedHourOffset=function hasAlignedHourOffset(e){return!!this.isValid()&&(e=e?createLocal(e).utcOffset():0,(this.utcOffset()-e)%60===0)},Re.isDST=function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Re.isLocal=function isLocal(){return!!this.isValid()&&!this._isUTC},Re.isUtcOffset=function isUtcOffset(){return!!this.isValid()&&this._isUTC},Re.isUtc=isUtc,Re.isUTC=isUtc,Re.zoneAbbr=function getZoneAbbr(){return this._isUTC?"UTC":""},Re.zoneName=function getZoneName(){return this._isUTC?"Coordinated Universal Time":""},Re.dates=deprecate("dates accessor is deprecated. Use date instead.",Ee),Re.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),Re.years=deprecate("years accessor is deprecated. Use year instead",z),Re.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function getSetZone(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),Re.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var e={};if(copyConfig(e,this),(e=prepareConfig(e))._a){var t=e._isUTC?createUTC(e._a):createLocal(e._a);this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var De=Locale.prototype;function get$1(e,t,n,r){var i=getLocale(),a=createUTC().set(r,t);return i[n](a,e)}function listMonthsImpl(e,t,n){if(isNumber(e)&&(t=e,e=void 0),e=e||"",null!=t)return get$1(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=get$1(e,r,n,"month");return i}function listWeekdaysImpl(e,t,n,r){"boolean"===typeof e?(isNumber(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,isNumber(t)&&(n=t,t=void 0),t=t||"");var i,a=getLocale(),o=e?a._week.dow:0;if(null!=n)return get$1(t,(n+o)%7,r,"day");var s=[];for(i=0;i<7;i++)s[i]=get$1(t,(i+o)%7,r,"day");return s}De.calendar=function calendar(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return isFunction(r)?r.call(t,n):r},De.longDateFormat=function longDateFormat(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},De.invalidDate=function invalidDate(){return this._invalidDate},De.ordinal=function ordinal(e){return this._ordinal.replace("%d",e)},De.preparse=preParsePostFormat,De.postformat=preParsePostFormat,De.relativeTime=function relativeTime(e,t,n,r){var i=this._relativeTime[n];return isFunction(i)?i(e,t,n,r):i.replace(/%d/i,e)},De.pastFuture=function pastFuture(e,t){var n=this._relativeTime[e>0?"future":"past"];return isFunction(n)?n(t):n.replace(/%s/i,t)},De.set=function set(e){var t,n;for(n in e)isFunction(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},De.months=function localeMonths(e,t){return e?isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||q).test(t)?"format":"standalone"][e.month()]:isArray(this._months)?this._months:this._months.standalone},De.monthsShort=function localeMonthsShort(e,t){return e?isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[q.test(t)?"format":"standalone"][e.month()]:isArray(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},De.monthsParse=function localeMonthsParse(e,t,n){var r,i,a;if(this._monthsParseExact)return handleStrictParse.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=createUTC([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},De.monthsRegex=function monthsRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsStrictRegex:this._monthsRegex):(hasOwnProp(this,"_monthsRegex")||(this._monthsRegex=V),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},De.monthsShortRegex=function monthsShortRegex(e){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(hasOwnProp(this,"_monthsShortRegex")||(this._monthsShortRegex=H),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},De.week=function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week},De.firstDayOfYear=function localeFirstDayOfYear(){return this._week.doy},De.firstDayOfWeek=function localeFirstDayOfWeek(){return this._week.dow},De.weekdays=function localeWeekdays(e,t){var n=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?shiftWeekdays(n,this._week.dow):e?n[e.day()]:n},De.weekdaysMin=function localeWeekdaysMin(e){return!0===e?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},De.weekdaysShort=function localeWeekdaysShort(e){return!0===e?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},De.weekdaysParse=function localeWeekdaysParse(e,t,n){var r,i,a;if(this._weekdaysParseExact)return handleStrictParse$1.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=createUTC([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},De.weekdaysRegex=function weekdaysRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(hasOwnProp(this,"_weekdaysRegex")||(this._weekdaysRegex=K),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},De.weekdaysShortRegex=function weekdaysShortRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(hasOwnProp(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=J),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},De.weekdaysMinRegex=function weekdaysMinRegex(e){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(hasOwnProp(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Z),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},De.isPM=function localeIsPM(e){return"p"===(e+"").toLowerCase().charAt(0)},De.meridiem=function localeMeridiem(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},getSetGlobalLocale("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function ordinal(e){var t=e%10;return e+(1===toInt(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale),hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var Pe=Math.abs;function addSubtract$1(e,t,n,r){var i=createDuration(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function absCeil(e){return e<0?Math.floor(e):Math.ceil(e)}function daysToMonths(e){return 4800*e/146097}function monthsToDays(e){return 146097*e/4800}function makeAs(e){return function(){return this.as(e)}}var Me=makeAs("ms"),je=makeAs("s"),Fe=makeAs("m"),Ie=makeAs("h"),Le=makeAs("d"),Ne=makeAs("w"),Be=makeAs("M"),Ue=makeAs("Q"),ze=makeAs("y");function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var qe=makeGetter("milliseconds"),We=makeGetter("seconds"),Ge=makeGetter("minutes"),He=makeGetter("hours"),Ve=makeGetter("days"),Ye=makeGetter("months"),$e=makeGetter("years"),Xe=Math.round,Ke={ss:44,s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}var Je=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Je(this._milliseconds)/1e3,r=Je(this._days),i=Je(this._months);e=absFloor(n/60),t=absFloor(e/60),n%=60,e%=60;var a=absFloor(i/12),o=i%=12,s=r,u=t,l=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var d=f<0?"-":"",h=sign(this._months)!==sign(f)?"-":"",p=sign(this._days)!==sign(f)?"-":"",g=sign(this._milliseconds)!==sign(f)?"-":"";return d+"P"+(a?h+a+"Y":"")+(o?h+o+"M":"")+(s?p+s+"D":"")+(u||l||c?"T":"")+(u?g+u+"H":"")+(l?g+l+"M":"")+(c?g+c+"S":"")}var Ze=Duration.prototype;return Ze.isValid=function isValid$1(){return this._isValid},Ze.abs=function abs(){var e=this._data;return this._milliseconds=Pe(this._milliseconds),this._days=Pe(this._days),this._months=Pe(this._months),e.milliseconds=Pe(e.milliseconds),e.seconds=Pe(e.seconds),e.minutes=Pe(e.minutes),e.hours=Pe(e.hours),e.months=Pe(e.months),e.years=Pe(e.years),this},Ze.add=function add$1(e,t){return addSubtract$1(this,e,t,1)},Ze.subtract=function subtract$1(e,t){return addSubtract$1(this,e,t,-1)},Ze.as=function as(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=normalizeUnits(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+daysToMonths(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(monthsToDays(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},Ze.asMilliseconds=Me,Ze.asSeconds=je,Ze.asMinutes=Fe,Ze.asHours=Ie,Ze.asDays=Le,Ze.asWeeks=Ne,Ze.asMonths=Be,Ze.asQuarters=Ue,Ze.asYears=ze,Ze.valueOf=function valueOf$1(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12):NaN},Ze._bubble=function bubble(){var e,t,n,r,i,a=this._milliseconds,o=this._days,s=this._months,u=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*absCeil(monthsToDays(s)+o),o=0,s=0),u.milliseconds=a%1e3,e=absFloor(a/1e3),u.seconds=e%60,t=absFloor(e/60),u.minutes=t%60,n=absFloor(t/60),u.hours=n%24,o+=absFloor(n/24),i=absFloor(daysToMonths(o)),s+=i,o-=absCeil(monthsToDays(i)),r=absFloor(s/12),s%=12,u.days=o,u.months=s,u.years=r,this},Ze.clone=function clone$1(){return createDuration(this)},Ze.get=function get$2(e){return e=normalizeUnits(e),this.isValid()?this[e+"s"]():NaN},Ze.milliseconds=qe,Ze.seconds=We,Ze.minutes=Ge,Ze.hours=He,Ze.days=Ve,Ze.weeks=function weeks(){return absFloor(this.days()/7)},Ze.months=Ye,Ze.years=$e,Ze.humanize=function humanize(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function relativeTime$1(e,t,n){var r=createDuration(e).abs(),i=Xe(r.as("s")),a=Xe(r.as("m")),o=Xe(r.as("h")),s=Xe(r.as("d")),u=Xe(r.as("M")),l=Xe(r.as("y")),c=i<=Ke.ss&&["s",i]||i<Ke.s&&["ss",i]||a<=1&&["m"]||a<Ke.m&&["mm",a]||o<=1&&["h"]||o<Ke.h&&["hh",o]||s<=1&&["d"]||s<Ke.d&&["dd",s]||u<=1&&["M"]||u<Ke.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,substituteTimeAgo.apply(null,c)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Ze.toISOString=toISOString$1,Ze.toString=toISOString$1,Ze.toJSON=toISOString$1,Ze.locale=locale,Ze.localeData=localeData,Ze.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1),Ze.lang=be,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",E),addRegexToken("X",/[+-]?\d+(\.\d{1,3})?/),addParseToken("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),addParseToken("x",(function(e,t,n){n._d=new Date(toInt(e))})),hooks.version="2.24.0",function setHookCallback(e){t=e}(createLocal),hooks.fn=Re,hooks.min=function min(){return pickBy("isBefore",[].slice.call(arguments,0))},hooks.max=function max(){return pickBy("isAfter",[].slice.call(arguments,0))},hooks.now=function now(){return Date.now?Date.now():+new Date},hooks.utc=createUTC,hooks.unix=function createUnix(e){return createLocal(1e3*e)},hooks.months=function listMonths(e,t){return listMonthsImpl(e,t,"months")},hooks.isDate=isDate,hooks.locale=getSetGlobalLocale,hooks.invalid=createInvalid,hooks.duration=createDuration,hooks.isMoment=isMoment,hooks.weekdays=function listWeekdays(e,t,n){return listWeekdaysImpl(e,t,n,"weekdays")},hooks.parseZone=function createInZone(){return createLocal.apply(null,arguments).parseZone()},hooks.localeData=getLocale,hooks.isDuration=isDuration,hooks.monthsShort=function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")},hooks.weekdaysMin=function listWeekdaysMin(e,t,n){return listWeekdaysImpl(e,t,n,"weekdaysMin")},hooks.defineLocale=defineLocale,hooks.updateLocale=function updateLocale(e,t){if(null!=t){var n,r,i=te;null!=(r=loadLocale(e))&&(i=r._config),t=mergeConfigs(i,t),(n=new Locale(t)).parentLocale=ne[e],ne[e]=n,getSetGlobalLocale(e)}else null!=ne[e]&&(null!=ne[e].parentLocale?ne[e]=ne[e].parentLocale:null!=ne[e]&&delete ne[e]);return ne[e]},hooks.locales=function listLocales(){return a(ne)},hooks.weekdaysShort=function listWeekdaysShort(e,t,n){return listWeekdaysImpl(e,t,n,"weekdaysShort")},hooks.normalizeUnits=normalizeUnits,hooks.relativeTimeRounding=function getSetRelativeTimeRounding(e){return void 0===e?Xe:"function"===typeof e&&(Xe=e,!0)},hooks.relativeTimeThreshold=function getSetRelativeTimeThreshold(e,t){return void 0!==Ke[e]&&(void 0===t?Ke[e]:(Ke[e]=t,"s"===e&&(Ke.ss=t-1),!0))},hooks.calendarFormat=function getCalendarFormat(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},hooks.prototype=Re,hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},hooks}()}).call(this,n(111)(e))},function(e,t,n){"use strict";var r=n(246)(!0);n(134)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){(function(r){function load(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG),e}(t=e.exports=n(487)).log=function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function formatArgs(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))})),e.splice(a,0,r)},t.save=function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=load,t.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(load())}).call(this,n(41))},,function(e,t,n){"use strict";function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",(function(){return _taggedTemplateLiteral}))},function(e,t,n){"use strict";var r=n(1);function hashString(e){return function hash(e,t){var n=1540483477,r=t^e.length,i=e.length,a=0;for(;i>=4;){var o=UInt32(e,a);o=Umul32(o,n),o=Umul32(o^=o>>>24,n),r=Umul32(r,n),r^=o,a+=4,i-=4}switch(i){case 3:r^=UInt16(e,a),r=Umul32(r^=e.charCodeAt(a+2)<<16,n);break;case 2:r=Umul32(r^=UInt16(e,a),n);break;case 1:r=Umul32(r^=e.charCodeAt(a),n)}return r=Umul32(r^=r>>>13,n),(r^=r>>>15)>>>0}(e,e.length).toString(36)}function UInt32(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function UInt16(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function Umul32(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}function memoize(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var i="__emotion_styles",a="__emotion_target",o={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},s=n(219),u=n.n(s);function makeStyleTag(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-emotion",""),e.appendChild(document.createTextNode("")),document.head.appendChild(e),e}var l=new(function(){function StyleSheet(){this.isBrowser="undefined"!==typeof window,this.isSpeedy=!0,this.tags=[],this.ctr=0}var e=StyleSheet.prototype;return e.inject=function inject(){if(this.injected)throw new Error("already injected!");this.isBrowser?this.tags[0]=makeStyleTag():this.sheet=[],this.injected=!0},e.speedy=function speedy(e){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!e},e.insert=function insert(e,t){if(this.isBrowser){if(this.isSpeedy){var n=function sheetForTag(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(this.tags[this.tags.length-1]);try{n.insertRule(e,n.cssRules.length)}catch(i){0}}else{var r=makeStyleTag();this.tags.push(r),r.appendChild(document.createTextNode(e+(t||"")))}this.ctr++,this.ctr%65e3===0&&this.tags.push(makeStyleTag())}else this.sheet.push(e)},e.flush=function flush(){this.isBrowser?(this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0):this.sheet=[],this.injected=!1},StyleSheet}());l.inject();var c=new function fa(e){function ia(e,t,n){var r=t.trim().split(l);t=r;var i=r.length,a=e.length;switch(a){case 0:case 1:var o=0;for(e=0===a?"":e[0]+" ";o<i;++o)t[o]=ma(e,t[o],n,a).trim();break;default:var s=o=0;for(t=[];o<i;++o)for(var u=0;u<a;++u)t[s++]=ma(e[u]+" ",r[o],n,a).trim()}return t}function ma(e,t,n,r){var i=t.charCodeAt(0);switch(33>i&&(i=(t=t.trim()).charCodeAt(0)),i){case 38:switch(R+r){case 0:case 1:if(0===e.trim().length)break;default:return t.replace(c,"$1"+e.trim())}break;case 58:switch(t.charCodeAt(1)){case 103:if(0<P&&0<R)return t.replace(f,"$1").replace(c,"$1"+Y);break;default:return e.trim()+t}default:if(0<n*R&&0<t.indexOf("\f"))return t.replace(c,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function ja(e,t,n,u){var l=0,c=e+";";if(944===(t=2*t+3*n+4*u)){switch(l=c.length,e=c.indexOf(":",9)+1,n=c.substring(0,e).trim(),u=c.substring(e,l-1).trim(),c.charCodeAt(9)*W){case 0:break;case 45:if(110!==c.charCodeAt(10))break;default:for(e=t=0,l=(c=u.split((u="",o))).length;t<l;e=0,++t){for(var f=c[t],d=f.split(s);f=d[e];){var h=f.charCodeAt(0);if(1===W&&(64<h&&90>h||96<h&&123>h||95===h||45===h&&45!==f.charCodeAt(1)))switch(isNaN(parseFloat(f))+(-1!==f.indexOf("("))){case 1:switch(f){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:f+=G}}d[e++]=f}u+=(0===t?"":",")+d.join(" ")}}return u=n+u+";",1===D||2===D&&U(u,1)?"-webkit-"+u+u:u}if(0===D||2===D&&!U(c,1))return c;switch(t){case 1015:return 45===c.charCodeAt(9)?"-webkit-"+c+c:c;case 951:return 116===c.charCodeAt(3)?"-webkit-"+c+c:c;case 963:return 110===c.charCodeAt(5)?"-webkit-"+c+c:c;case 1009:if(100!==c.charCodeAt(4))break;case 969:case 942:return"-webkit-"+c+c;case 978:return"-webkit-"+c+"-moz-"+c+c;case 1019:case 983:return"-webkit-"+c+"-moz-"+c+"-ms-"+c+c;case 883:return 45===c.charCodeAt(8)?"-webkit-"+c+c:c;case 932:if(45===c.charCodeAt(4))switch(c.charCodeAt(5)){case 103:return"-webkit-box-"+c.replace("-grow","")+"-webkit-"+c+"-ms-"+c.replace("grow","positive")+c;case 115:return"-webkit-"+c+"-ms-"+c.replace("shrink","negative")+c;case 98:return"-webkit-"+c+"-ms-"+c.replace("basis","preferred-size")+c}return"-webkit-"+c+"-ms-"+c+c;case 964:return"-webkit-"+c+"-ms-flex-"+c+c;case 1023:if(99!==c.charCodeAt(8))break;return"-webkit-box-pack"+(e=c.substring(c.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+c+"-ms-flex-pack"+e+c;case 1005:return i.test(c)?c.replace(r,":-webkit-")+c.replace(r,":-moz-")+c:c;case 1e3:switch(l=(e=c.substring(13).trim()).indexOf("-")+1,e.charCodeAt(0)+e.charCodeAt(l)){case 226:e=c.replace(x,"tb");break;case 232:e=c.replace(x,"tb-rl");break;case 220:e=c.replace(x,"lr");break;default:return c}return"-webkit-"+c+"-ms-"+e+c;case 1017:if(-1===c.indexOf("sticky",9))break;case 975:switch(l=(c=e).length-10,t=(e=(33===c.charCodeAt(l)?c.substring(0,l):c).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|e.charCodeAt(7))){case 203:if(111>e.charCodeAt(8))break;case 115:c=c.replace(e,"-webkit-"+e)+";"+c;break;case 207:case 102:c=c.replace(e,"-webkit-"+(102<t?"inline-":"")+"box")+";"+c.replace(e,"-webkit-"+e)+";"+c.replace(e,"-ms-"+e+"box")+";"+c}return c+";";case 938:if(45===c.charCodeAt(5))switch(c.charCodeAt(6)){case 105:return e=c.replace("-items",""),"-webkit-"+c+"-webkit-box-"+e+"-ms-flex-"+e+c;case 115:return"-webkit-"+c+"-ms-flex-item-"+c.replace(S,"")+c;default:return"-webkit-"+c+"-ms-flex-line-pack"+c.replace("align-content","")+c}break;case 953:if(0<(l=c.indexOf("-content",9))&&109===c.charCodeAt(l-3)&&45!==c.charCodeAt(l-4))return"width:-webkit-"+(e=c.substring(l-3))+"width:-moz-"+e+"width:"+e;break;case 962:if(c="-webkit-"+c+(102===c.charCodeAt(5)?"-ms-"+c:"")+c,211===n+u&&105===c.charCodeAt(13)&&0<c.indexOf("transform",10))return c.substring(0,c.indexOf(";",27)+1).replace(a,"$1-webkit-$2")+c}return c}function U(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),z(2!==t?r:r.replace(E,"$1"),n,t)}function sa(e,t){var n=ja(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(k," or ($1)").substring(4):"("+t+")"}function O(e,t,n,r,i,a,o,s,u){for(var l,c=0,f=t;c<B;++c)switch(l=N[c].call(F,e,f,n,r,i,a,o,s,u)){case void 0:case!1:case!0:case null:break;default:f=l}switch(f){case void 0:case!1:case!0:case null:case t:break;default:return f}}function ea(e){for(var t in e){var n=e[t];switch(t){case"keyframe":W=0|n;break;case"global":P=0|n;break;case"cascade":R=0|n;break;case"compress":M=0|n;break;case"semicolon":j=0|n;break;case"preserve":I=0|n;break;case"prefix":z=null,n?"function"!==typeof n?D=1:(D=2,z=n):D=0}}return ea}function F(e,r){if(void 0!==this&&this.constructor===F)return fa(e);var i=e,a=i.charCodeAt(0);if(33>a&&(a=(i=i.trim()).charCodeAt(0)),0<W&&(G=i.replace(d,91===a?"":"-")),a=1,1===R?Y=i:H=i,i=[Y],0<B){var o=O(-1,r,i,i,C,T,0,0,0);void 0!==o&&"string"===typeof o&&(r=o)}var s=function V(e,r,i,a,o){for(var s,l,c,f,d=0,m=0,v=0,y=0,_=0,x=0,k=0,S=0,E=0,M=0,F=0,N=0,z=l=0,$=0,X=0,K=i.length,J=K-1,Z="",Q="",ee="",te="";N<K;){if(c=i.charCodeAt(N),N===J&&0!==m+y+v+d&&(0!==m&&(c=47===m?10:47),y=v=d=0,K++,J++),0===m+y+v+d){if(N===J&&(0<l&&(Z=Z.replace(n,"")),0<Z.trim().length)){switch(c){case 32:case 9:case 59:case 13:case 10:break;default:Z+=i.charAt(N)}c=59}if(1===z)switch(c){case 123:case 125:case 59:case 34:case 39:case 40:case 41:case 44:z=0;case 9:case 13:case 10:case 32:break;default:for(z=0,X=N,s=c,N--,c=59;X<K;)switch(i.charCodeAt(++X)){case 10:case 13:case 59:N++,c=s;case 58:case 123:X=K}}switch(c){case 123:for(s=(Z=Z.trim()).charCodeAt(0),S=1,X=++N;N<K;){switch(c=i.charCodeAt(N)){case 123:S++;break;case 125:S--}if(0===S)break;N++}switch(M=i.substring(X,N),0===s&&(s=(Z=Z.replace(t,"").trim()).charCodeAt(0)),s){case 64:switch(0<l&&(Z=Z.replace(n,"")),l=Z.charCodeAt(1)){case 100:case 109:case 115:case 45:s=r;break;default:s=L}if(X=(M=V(r,s,M,l,o+1)).length,0<I&&0===X&&(X=Z.length),0<B&&(f=O(3,M,s=ia(L,Z,$),r,C,T,X,l,o),Z=s.join(""),void 0!==f&&0===(X=(M=f.trim()).length)&&(l=0,M="")),0<X)switch(l){case 115:Z=Z.replace(w,sa);case 100:case 109:case 45:M=Z+"{"+M+"}";break;case 107:M=(Z=Z.replace(h,"$1 $2"+(0<W?G:"")))+"{"+M+"}",M=1===D||2===D&&U("@"+M,3)?"@-webkit-"+M+"@"+M:"@"+M;break;default:M=Z+M,112===a&&(Q+=M,M="")}else M="";break;default:M=V(r,ia(r,Z,$),M,a,o+1)}ee+=M,M=$=l=F=z=E=0,Z="",c=i.charCodeAt(++N);break;case 125:case 59:if(1<(X=(Z=(0<l?Z.replace(n,""):Z).trim()).length))switch(0===F&&(s=Z.charCodeAt(0),45===s||96<s&&123>s)&&(X=(Z=Z.replace(" ",":")).length),0<B&&void 0!==(f=O(1,Z,r,e,C,T,Q.length,a,o))&&0===(X=(Z=f.trim()).length)&&(Z="\0\0"),s=Z.charCodeAt(0),l=Z.charCodeAt(1),s+l){case 0:break;case 169:case 163:te+=Z+i.charAt(N);break;default:58!==Z.charCodeAt(X-1)&&(Q+=ja(Z,s,l,Z.charCodeAt(2)))}$=l=F=z=E=0,Z="",c=i.charCodeAt(++N)}}switch(c){case 13:case 10:if(0===m+y+v+d+j)switch(k){case 41:case 39:case 34:case 64:case 126:case 62:case 42:case 43:case 47:case 45:case 58:case 44:case 59:case 123:case 125:break;default:0<F&&(z=1)}47===m?m=0:0===R+E&&(l=1,Z+="\0"),0<B*q&&O(0,Z,r,e,C,T,Q.length,a,o),T=1,C++;break;case 59:case 125:if(0===m+y+v+d){T++;break}default:switch(T++,s=i.charAt(N),c){case 9:case 32:if(0===y+d+m)switch(_){case 44:case 58:case 9:case 32:s="";break;default:32!==c&&(s=" ")}break;case 0:s="\\0";break;case 12:s="\\f";break;case 11:s="\\v";break;case 38:0===y+m+d&&0<R&&(l=$=1,s="\f"+s);break;case 108:if(0===y+m+d+A&&0<F)switch(N-F){case 2:112===_&&58===i.charCodeAt(N-3)&&(A=_);case 8:111===x&&(A=x)}break;case 58:0===y+m+d&&(F=N);break;case 44:0===m+v+y+d&&(l=1,s+="\r");break;case 34:case 39:0===m&&(y=y===c?0:0===y?c:y);break;case 91:0===y+m+v&&d++;break;case 93:0===y+m+v&&d--;break;case 41:0===y+m+d&&v--;break;case 40:if(0===y+m+d){if(0===E)switch(2*_+3*x){case 533:break;default:S=0,E=1}v++}break;case 64:0===m+v+y+d+F+M&&(M=1);break;case 42:case 47:if(!(0<y+d+v))switch(m){case 0:switch(2*c+3*i.charCodeAt(N+1)){case 235:m=47;break;case 220:X=N,m=42}break;case 42:47===c&&42===_&&(33===i.charCodeAt(X+2)&&(Q+=i.substring(X,N+1)),s="",m=0)}}if(0===m){if(0===R+y+d+M&&107!==a&&59!==c)switch(c){case 44:case 126:case 62:case 43:case 41:case 40:if(0===E){switch(_){case 9:case 32:case 10:case 13:s+="\0";break;default:s="\0"+s+(44===c?"":"\0")}l=1}else switch(c){case 40:E=++S;break;case 41:0===(E=--S)&&(l=1,s+="\0")}break;case 9:case 32:switch(_){case 0:case 123:case 125:case 59:case 44:case 12:case 9:case 32:case 10:case 13:break;default:0===E&&(l=1,s+="\0")}}Z+=s,32!==c&&9!==c&&(k=c)}}x=_,_=c,N++}if(X=Q.length,0<I&&0===X&&0===ee.length&&0===r[0].length===!1&&(109!==a||1===r.length&&(0<R?H:Y)===r[0])&&(X=r.join(",").length+2),0<X){if(0===R&&107!==a){for(i=0,d=r.length,m=Array(d);i<d;++i){for(x="",k=0,K=(_=r[i].split(u)).length;k<K;++k)if(!(0===(S=(y=_[k]).length)&&1<K)){if(N=x.charCodeAt(x.length-1),$=y.charCodeAt(0),v="",0!==k)switch(N){case 42:case 126:case 62:case 43:case 32:case 40:break;default:v=" "}switch($){case 38:y=v+H;case 126:case 62:case 43:case 32:case 41:case 40:break;case 91:y=v+y+H;break;case 58:switch(2*y.charCodeAt(1)+3*y.charCodeAt(2)){case 530:if(0<P){y=v+y.substring(8,S-1);break}default:(1>k||1>_[k-1].length)&&(y=v+H+y)}break;case 44:v="";default:y=1<S&&0<y.indexOf(":")?v+y.replace(b,"$1"+H+"$2"):v+y+H}x+=y}m[i]=x.replace(n,"").trim()}r=m}if(s=r,0<B&&(void 0!==(f=O(2,Q,s,e,C,T,X,a,o))&&0===(Q=f).length))return te+Q+ee;if(Q=s.join(",")+"{"+Q+"}",0!==D*A){switch(2!==D||U(Q,2)||(A=0),A){case 111:Q=Q.replace(g,":-moz-$1")+Q;break;case 112:Q=Q.replace(p,"::-webkit-input-$1")+Q.replace(p,"::-moz-$1")+Q.replace(p,":-ms-input-$1")+Q}A=0}}return te+Q+ee}(L,i,r,0,0);return 0<B&&(void 0!==(o=O(-2,s,i,i,C,T,s.length,0,0))&&"string"!==typeof(s=o)&&(a=0)),H=Y=G="",A=0,T=C=1,0===M*a?s:s.replace(n,"").replace(m,"").replace(v,"$1").replace(y,"$1").replace(_," ")}var t=/^\0+/g,n=/[\0\r\f]/g,r=/: */g,i=/zoo|gra/,a=/([,: ])(transform)/g,o=/,+\s*(?![^(]*[)])/g,s=/ +\s*(?![^(]*[)])/g,u=/ *[\0] */g,l=/,\r+?/g,c=/([\t\r\n ])*\f?&/g,f=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,d=/\W+/g,h=/@(k\w+)\s*(\S*)\s*/,p=/::(place)/g,g=/:(read-only)/g,m=/\s+(?=[{\];=:>])/g,v=/([[}=:>])\s+/g,y=/(\{[^{]+?);(?=\})/g,_=/\s{2,}/g,b=/([^\(])(:+) */g,x=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,k=/([^]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=1,C=1,A=0,R=1,D=1,P=1,M=0,j=0,I=0,L=[],N=[],B=0,z=null,q=0,W=1,G="",H="",Y="";return F.use=function da(e){switch(e){case void 0:case null:B=N.length=0;break;default:switch(e.constructor){case Array:for(var t=0,n=e.length;t<n;++t)da(e[t]);break;case Function:N[B++]=e;break;case Boolean:q=0|!!e}}return da},F.set=ea,void 0!==e&&ea(e),F}({keyframe:!1});c.use;var f=u()((function insertRule(e){l.insert(e,p)})),d={},h={},p="";function handleInterpolation(e,t){if(null==e)return"";switch(typeof e){case"boolean":return"";case"function":return void 0!==e[i]?"."+e[a]:handleInterpolation.call(this,void 0===this?e():e(this.mergedProps,this.context),t);case"object":return createStringFromObject.call(this,e);default:var n=d[e];return!1===t&&void 0!==n?n:e}}c.use(f);var g,m,v=/[A-Z]|^ms/g,y=memoize((function(e){return e.replace(v,"-$&").toLowerCase()})),_=function processStyleValue(e,t){return void 0===t||null===t||"boolean"===typeof t?"":1===o[e]||45===e.charCodeAt(1)||isNaN(t)||0===t?t:t+"px"},b=new WeakMap;function createStringFromObject(e){if(b.has(e))return b.get(e);var t="";return Array.isArray(e)?e.forEach((function(e){t+=handleInterpolation.call(this,e,!1)}),this):Object.keys(e).forEach((function(n){"object"!==typeof e[n]?void 0!==d[e[n]]?t+=n+"{"+d[e[n]]+"}":t+=y(n)+":"+_(n,e[n])+";":t+=n+"{"+handleInterpolation.call(this,e[n],!1)+"}"}),this),b.set(e,t),t}var x=/label:\s*([^\s;\n]+)\s*[;\n]/g;function createStyles(e){var t=!0,n="",r="";null==e||void 0===e.raw?(t=!1,n=handleInterpolation.call(this,e,!1)):n=e[0];for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a.forEach((function(r,i){n+=handleInterpolation.call(this,r,function isLastCharDot(e){return 46===e.charCodeAt(e.length-1)}(n)),!0===t&&void 0!==e[i+1]&&(n+=e[i+1])}),this),n=n.replace(x,(function(e,t){return r+="-"+t,""})),g=hashString(n+r),m=g+r,n}function css(){var e=createStyles.apply(this,arguments),t="css-"+m;return void 0===d[t]&&(d[t]=e),void 0===h[g]&&(c("."+t,e),h[g]=!0),t}function keyframes(){var e=createStyles.apply(this,arguments),t="animation-"+m;return void 0===h[g]&&(c("","@keyframes "+t+"{"+e+"}"),h[g]=!0),t}function getRegisteredStyles(e,t){var n="";return t.split(" ").forEach((function(t){void 0!==d[t]?e.push(t):n+=t+" "})),n}var w,k=n(15),S=n.n(k);function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"b",(function(){return keyframes}));var E="__EMOTION_THEMING__",T=((w={})[E]=S.a.object,w);function setTheme(e){this.setState({theme:e})}function componentWillMount(){void 0!==this.context[E]&&(this.unsubscribe=this.context[E].subscribe(setTheme.bind(this)))}function componentWillUnmount(){void 0!==this.unsubscribe&&this.context[E].unsubscribe(this.unsubscribe)}var C=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|accept|acceptCharset|accessKey|action|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan)|(on[A-Z].*)|((data|aria)-.*))$/,O=memoize((function(e){return C.test(e)})),A=function testOmitPropsOnComponent(e){return"theme"!==e&&"innerRef"!==e},R=function testAlwaysTrue(){return!0},D=function omitAssign(e,t){for(var n=2,r=arguments.length;n<r;n++){var i=arguments[n],a=void 0;for(a in i)e(a)&&(t[a]=i[a])}return t};t.a=function createStyled(e,t){var n,o,s;void 0!==t&&(n=t.label,o=t.target,s=t.e);var u=e.__emotion_real===e,l=void 0===s&&u&&e.__emotion_base||e,c="string"===typeof l&&l.charAt(0)===l.charAt(0).toLowerCase()?O:A;return function(f){var d=u&&e[i]||[];if(void 0!==n&&(d=d.concat("label:"+n+";")),void 0===s){for(var h=arguments.length,p=new Array(h>1?h-1:0),g=1;g<h;g++)p[g-1]=arguments[g];d=null==f||void 0===f.raw?d.concat(f,p):p.reduce((function(e,t,n){return e.concat(t,f[n+1])}),d.concat(f[0]))}var m=function(e){function Styled(){return e.apply(this,arguments)||this}return _inheritsLoose(Styled,e),Styled.prototype.render=function render(){var e=this.props,t=this.state;this.mergedProps=D(R,{},e,{theme:null!==t&&t.theme||e.theme||{}});var n="",i=[];return e.className&&(n+=void 0===s?getRegisteredStyles(i,e.className):e.className+" "),n+=void 0===s?css.apply(this,d.concat(i)):s,void 0!==o&&(n+=" "+o),Object(r.createElement)(l,D(c,{},e,{className:n,ref:e.innerRef}))},Styled}(r.Component);return m.prototype.componentWillMount=componentWillMount,m.prototype.componentWillUnmount=componentWillUnmount,m.displayName=void 0!==n?n:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",m.contextTypes=T,m[i]=d,m.__emotion_base=l,m.__emotion_real=m,m[a]=o,m.withComponent=function(e,n){return createStyled(e,void 0!==n?D(R,{},t,n):t)(d)},m}}},,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,o,s=toObject(e),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(r){o=r(n);for(var c=0;c<o.length;c++)a.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},function(e,t,n){e.exports={default:n(245),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(33).f,i=n(40),a=n(23)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){n(253);for(var r=n(21),i=n(39),a=n(44),o=n(23)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],f=c&&c.prototype;f&&!f[o]&&i(f,o,l),a[l]=a.Array}},function(e,t,n){"use strict";var r=n(281);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator,a=Object.getPrototypeOf||function(e){return e.__proto__},o=void 0,s="undefined"===typeof Uint8Array?void 0:a(Uint8Array),u={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"===typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":i?a([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":o&&i&&Symbol.asyncIterator?o[Symbol.asyncIterator]():void 0,"$ %Atomics%":"undefined"===typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"===typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"===typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"===typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"===typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"===typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"===typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"===typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"===typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"===typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"===typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"===typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"===typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":i?a(a([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"===typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!==typeof Map&&i?a((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"===typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"===typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"===typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"===typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"===typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"===typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"===typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"===typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"===typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"===typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!==typeof Set&&i?a((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"===typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"===typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":i?a(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":i?Symbol:void 0,"$ %SymbolPrototype%":i?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":r,"$ %TypedArray%":s,"$ %TypedArrayPrototype%":s?s.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"===typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"===typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"===typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"===typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"===typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"===typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"===typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"===typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"===typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"===typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"===typeof WeakSet?void 0:WeakSet.prototype};e.exports=function GetIntrinsic(e,t){if(arguments.length>1&&"boolean"!==typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+e;if(!(n in u))throw new SyntaxError("intrinsic "+e+" does not exist!");if("undefined"===typeof u[n]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return u[n]}},function(e,t){e.exports=function extend(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function handle(n,r,i){if(n)return 0===n.statusCode&&(n=new Error("There was an unexpected server error, please try again later.")),t(n);e(r)}}},function(e,t,n){"use strict";e.exports=1e-4},function(e,t,n){(function(r){t.log=function log(){var e;return"object"===typeof console&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG);return e},t.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(499)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(41))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var n=function fn(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){t.log=function log(){var e;return"object"===typeof console&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function formatArgs(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function save(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function load(){var e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG);return e},t.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function localstorage(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(518)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(41))},function(e,t,n){"use strict";function _arrayWithHoles(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return _arrayWithHoles}))},function(e,t,n){"use strict";function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",(function(){return _nonIterableRest}))},function(e,t,n){"use strict";function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}n.d(t,"a",(function(){return _iterableToArray}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return json}));var r=n(0);function json(t,n){var i=n&&n.property?Object(r.t)(n.property):r.x;return Object(r.F)(t)&&!function isBuffer(t){return!("function"!==typeof e||!Object(r.D)(e.isBuffer))&&e.isBuffer(t)}(t)?function parseJSON(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t)):i(JSON.parse(t))}json.responseType="json"}).call(this,n(20).Buffer)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return json}));var r=n(0);function json(t,n){var i=n&&n.property?Object(r.t)(n.property):r.x;return Object(r.F)(t)&&!function isBuffer(t){return!("function"!==typeof e||!Object(r.D)(e.isBuffer))&&e.isBuffer(t)}(t)?function parseJSON(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t)):i(JSON.parse(t))}json.responseType="json"}).call(this,n(20).Buffer)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return json}));var r=n(0);function json(t,n){var i=n&&n.property?Object(r.t)(n.property):r.x;return Object(r.F)(t)&&!function isBuffer(t){return!("function"!==typeof e||!Object(r.D)(e.isBuffer))&&e.isBuffer(t)}(t)?function parseJSON(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t)):i(JSON.parse(t))}json.responseType="json"}).call(this,n(20).Buffer)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return json}));var r=n(0);function json(t,n){var i=n&&n.property?Object(r.t)(n.property):r.x;return Object(r.F)(t)&&!function isBuffer(t){return!("function"!==typeof e||!Object(r.D)(e.isBuffer))&&e.isBuffer(t)}(t)?function parseJSON(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t)):i(JSON.parse(t))}json.responseType="json"}).call(this,n(20).Buffer)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return json}));var r=n(0);function json(t,n){var i=n&&n.property?Object(r.t)(n.property):r.x;return Object(r.F)(t)&&!function isBuffer(t){return!("function"!==typeof e||!Object(r.D)(e.isBuffer))&&e.isBuffer(t)}(t)?function parseJSON(e,t){return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t)):i(JSON.parse(t))}json.responseType="json"}).call(this,n(20).Buffer)},function(e,t,n){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(1),i=n(15),a=n.n(i),o=n(220),s=["client","offset","scroll","bounds","margin"];function getTypes(e){var t=[];return s.forEach((function(n){e[n]&&t.push(n)})),t}function getContentRect(e,t){var n={};if(t.indexOf("client")>-1&&(n.client={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight}),t.indexOf("offset")>-1&&(n.offset={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),t.indexOf("scroll")>-1&&(n.scroll={top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}),t.indexOf("bounds")>-1){var r=e.getBoundingClientRect();n.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(t.indexOf("margin")>-1){var i=getComputedStyle(e);n.margin={top:i?parseInt(i.marginTop):0,right:i?parseInt(i.marginRight):0,bottom:i?parseInt(i.marginBottom):0,left:i?parseInt(i.marginLeft):0}}return n}var u=function withContentRect(e){return function(t){var n,i;return i=n=function(n){function WithContentRect(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=n.call.apply(n,[this].concat(i))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},t._animationFrameID=null,t._resizeObserver=null,t._node=null,t.measure=function(n){var r=getContentRect(t._node,e||getTypes(t.props));n&&(r.entry=n[0].contentRect),t._animationFrameID=window.requestAnimationFrame((function(){null!==t._resizeObserver&&(t.setState({contentRect:r}),"function"===typeof t.props.onResize&&t.props.onResize(r))}))},t._handleRef=function(e){null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.unobserve(t._node),t._node=e,null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.observe(t._node);var n=t.props.innerRef;n&&("function"===typeof n?n(t._node):n.current=t._node)},t}!function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(WithContentRect,n);var i=WithContentRect.prototype;return i.componentDidMount=function componentDidMount(){this._resizeObserver=new o.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(getContentRect(this._node,e||getTypes(this.props))))},i.componentWillUnmount=function componentWillUnmount(){null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),window.cancelAnimationFrame(this._animationFrameID)},i.render=function render(){var e=this.props,n=(e.innerRef,e.onResize,function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["innerRef","onResize"]));return Object(r.createElement)(t,_extends({},n,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},WithContentRect}(r.Component),n.propTypes={client:a.a.bool,offset:a.a.bool,scroll:a.a.bool,bounds:a.a.bool,margin:a.a.bool,innerRef:a.a.oneOfType([a.a.object,a.a.func]),onResize:a.a.func},i}}()((function(e){var t=e.measure,n=e.measureRef,r=e.contentRect;return(0,e.children)({measure:t,measureRef:n,contentRect:r})}));u.displayName="Measure",u.propTypes.children=a.a.func;t.a=u},,function(e,t,n){"use strict";var r=/("(?:[^\\"]|\\.)*")|[:,]/g;e.exports=function stringify(e,t){var n,i,a;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),i=""===n?1/0:void 0===t.maxLength?80:t.maxLength,a=t.replacer,function _stringify(e,t,o){var s,u,l,c,f,d,h,p,g,m,v,y;if(e&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0===(v=JSON.stringify(e,a)))return v;if(h=i-t.length-o,v.length<=h&&(g=v.replace(r,(function(e,t){return t||e+" "}))).length<=h)return g;if(null!=a&&(e=JSON.parse(v),a=void 0),"object"===typeof e&&null!==e){if(p=t+n,l=[],u=0,Array.isArray(e))for(m="[",s="]",h=e.length;u<h;u++)l.push(_stringify(e[u],p,u===h-1?0:1)||"null");else for(m="{",s="}",h=(d=Object.keys(e)).length;u<h;u++)c=d[u],f=JSON.stringify(c)+": ",void 0!==(y=_stringify(e[c],p,f.length+(u===h-1?0:1)))&&l.push(f+y);if(l.length>0)return[m,n+l.join(",\n"+p),s].join("\n"+t)}return v}(e,"",0)}},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},a={key:r,value:e[r]};return n(i,a)}}),a=[];return function stringify(e){if(e&&e.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var t,n;if(Array.isArray(e)){for(n="[",t=0;t<e.length;t++)t&&(n+=","),n+=stringify(e[t])||"null";return n+"]"}if(null===e)return"null";if(-1!==a.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=a.push(e)-1,s=Object.keys(e).sort(i&&i(e));for(n="",t=0;t<s.length;t++){var u=s[t],l=stringify(e[u]);l&&(n&&(n+=","),n+=JSON.stringify(u)+":"+l)}return a.splice(o,1),"{"+n+"}"}}(e)}},,,function(e,t,n){(function(t){var r=n(132),i="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};function isUndefined(e){return void 0===e}function isPlainObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isString(e){return"[object String]"===Object.prototype.toString.call(e)}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function supportsFetch(){if(!("fetch"in i))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function each(e,t){var n,r;if(isUndefined(e.length))for(n in e)hasKey(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;n<r;n++)t.call(null,n,e[n])}function truncate(e,t){if("number"!==typeof t)throw new Error("2nd argument to `truncate` function should be a number");return"string"!==typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"\u2026"}function hasKey(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function joinRegExp(e){for(var t,n=[],r=0,i=e.length;r<i;r++)isString(t=e[r])?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function htmlElementAsString(e){var t,n,r,i,a,o=[];if(!e||!e.tagName)return"";if(o.push(e.tagName.toLowerCase()),e.id&&o.push("#"+e.id),(t=e.className)&&isString(t))for(n=t.split(/\s+/),a=0;a<n.length;a++)o.push("."+n[a]);var s=["type","name","title","alt"];for(a=0;a<s.length;a++)r=s[a],(i=e.getAttribute(r))&&o.push("["+r+'="'+i+'"]');return o.join("")}function isOnlyOneTruthy(e,t){return!!(!!e^!!t)}function isSameStacktrace(e,t){if(isOnlyOneTruthy(e,t))return!1;var n,r,i=e.frames,a=t.frames;if(void 0===i||void 0===a)return!1;if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++)if(n=i[o],r=a[o],n.filename!==r.filename||n.lineno!==r.lineno||n.colno!==r.colno||n.function!==r.function)return!1;return!0}var a=3,o=51200,s=40;function jsonSize(e){return function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function serializeValue(e){if("string"===typeof e){return truncate(e,40)}if("number"===typeof e||"boolean"===typeof e||"undefined"===typeof e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}e.exports={isObject:function isObject(e){return"object"===typeof e&&null!==e},isError:function isError(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isErrorEvent:function isErrorEvent(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},isDOMError:function isDOMError(e){return"[object DOMError]"===Object.prototype.toString.call(e)},isDOMException:function isDOMException(e){return"[object DOMException]"===Object.prototype.toString.call(e)},isUndefined:isUndefined,isFunction:function isFunction(e){return"function"===typeof e},isPlainObject:isPlainObject,isString:isString,isArray:isArray,isEmptyObject:function isEmptyObject(e){if(!isPlainObject(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},supportsErrorEvent:function supportsErrorEvent(){try{return new ErrorEvent(""),!0}catch(e){return!1}},supportsDOMError:function supportsDOMError(){try{return new DOMError(""),!0}catch(e){return!1}},supportsDOMException:function supportsDOMException(){try{return new DOMException(""),!0}catch(e){return!1}},supportsFetch:supportsFetch,supportsReferrerPolicy:function supportsReferrerPolicy(){if(!supportsFetch())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}},supportsPromiseRejectionEvent:function supportsPromiseRejectionEvent(){return"function"===typeof PromiseRejectionEvent},wrappedCallback:function wrappedCallback(e){return function dataCallback(t,n){var r=e(t)||t;return n&&n(r)||r}},each:each,objectMerge:function objectMerge(e,t){return t?(each(t,(function(t,n){e[t]=n})),e):e},truncate:truncate,objectFrozen:function objectFrozen(e){return!!Object.isFrozen&&Object.isFrozen(e)},hasKey:hasKey,joinRegExp:joinRegExp,urlencode:function urlencode(e){var t=[];return each(e,(function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})),t.join("&")},uuid4:function uuid4(){var e=i.crypto||i.msCrypto;if(!isUndefined(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function pad(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},htmlTreeAsString:function htmlTreeAsString(e){for(var t,n=[],r=0,i=0,a=" > ".length;e&&r++<5&&!("html"===(t=htmlElementAsString(e))||r>1&&i+n.length*a+t.length>=80);)n.push(t),i+=t.length,e=e.parentNode;return n.reverse().join(" > ")},htmlElementAsString:htmlElementAsString,isSameException:function isSameException(e,t){return!isOnlyOneTruthy(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(!function isBothUndefined(e,t){return isUndefined(e)&&isUndefined(t)}(e.stacktrace,t.stacktrace)&&isSameStacktrace(e.stacktrace,t.stacktrace)))},isSameStacktrace:isSameStacktrace,parseUrl:function parseUrl(e){if("string"!==typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=t[6]||"",r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}},fill:function fill(e,t,n,r){if(null!=e){var i=e[t];e[t]=n(i),e[t].__raven__=!0,e[t].__orig__=i,r&&r.push([e,t,i])}},safeJoin:function safeJoin(e,t){if(!isArray(e))return"";for(var n=[],r=0;r<e.length;r++)try{n.push(String(e[r]))}catch(i){n.push("[value cannot be serialized]")}return n.join(t)},serializeException:function serializeException(e,t,n){if(!isPlainObject(e))return e;n="number"!==typeof(t="number"!==typeof t?a:t)?o:n;var i=function serializeObject(e,t){return 0===t?serializeValue(e):isPlainObject(e)?Object.keys(e).reduce((function(n,r){return n[r]=serializeObject(e[r],t-1),n}),{}):Array.isArray(e)?e.map((function(e){return serializeObject(e,t-1)})):serializeValue(e)}(e,t);return jsonSize(r(i))>n?serializeException(e,t-1):i},serializeKeysForMessage:function serializeKeysForMessage(e,t){if("number"===typeof e||"string"===typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter((function(e){return"string"===typeof e}))).length)return"[object has no keys]";if(t="number"!==typeof t?s:t,e[0].length>=t)return e[0];for(var n=e.length;n>0;n--){var r=e.slice(0,n).join(", ");if(!(r.length>t))return n===e.length?r:r+"\u2026"}return""},sanitize:function sanitize(e,t){if(!isArray(t)||isArray(t)&&0===t.length)return e;var n,i=joinRegExp(t),a="********";try{n=JSON.parse(r(e))}catch(o){return e}return function sanitizeWorker(e){return isArray(e)?e.map((function(e){return sanitizeWorker(e)})):isPlainObject(e)?Object.keys(e).reduce((function(t,n){return i.test(n)?t[n]=a:t[n]=sanitizeWorker(e[n]),t}),{}):e}(n)}}}).call(this,n(19))},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(35),i=n(21).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(35);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(28),i=n(248),a=n(100),o=n(98)("IE_PROTO"),s=function Empty(){},u=function createDict(){var e,t=n(93)("iframe"),r=a.length;for(t.style.display="none",n(138).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[a[r]];return u()};e.exports=Object.create||function create(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(137),i=n(100);e.exports=Object.keys||function keys(e){return r(e,i)}},function(e,t,n){var r=n(91),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(99)("keys"),i=n(64);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(18),i=n(21),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(52)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(92);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(54),i=n(23)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function tryGet(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:a?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){var r=n(102),i=n(23)("iterator"),a=n(44);e.exports=n(18).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){"use strict";var r=n(62);function PromiseCapability(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new PromiseCapability(e)}},function(e,t,n){"use strict";var r,i=Object.prototype.hasOwnProperty;function decode(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}t.stringify=function querystringify(e,t){t=t||"";var n,a,o=[];for(a in"string"!==typeof t&&(t="?"),e)if(i.call(e,a)){if((n=e[a])||null!==n&&n!==r&&!isNaN(n)||(n=""),a=encodeURIComponent(a),n=encodeURIComponent(n),null===a||null===n)continue;o.push(a+"="+n)}return o.length?t+o.join("&"):""},t.parse=function querystring(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=decode(t[1]),a=decode(t[2]);null===i||null===a||i in r||(r[i]=a)}return r}},function(e,t,n){var r=n(271),i=n(109),a=n(69),o=n(153),s=n(148),u=n(297),l=n(154),c=n(300),f=n(301),d=n(302);e.exports=function Client(e){return e=a(p,e=e||{}),Request.configure=function configure(t){o(e,t)},Request.config=e,function httpMethods(e){return h.forEach((function createMethod(t){e[t]=function(n,r,i){return"function"===typeof r&&(i=r,r={}),r.method=t,e(n,r,i)}})),e}(Request);function Request(t,n,h){t=t||"",s(n)&&(h=n,n={}),function setQuery(e){var t=e.query;if(!t)return;e.query=("string"===typeof t?String:d)(t)}(n=a(e.options,n)),function setToken(t){if(!t.token&&!e.token)return;t.headers=t.headers||{};var n=t.authorization||e.authorization||"Authorization",r=t.token||e.token;(t.jwt||e.jwt)&&(r="Bearer "+r);t.headers[n]=r,delete t.token}(n);var p=i(e.baseUrl,t);return r(p,n,function responseHandler(t,n){return function handleResponse(r,i,a){if(r)return t(r,null,a);if(l(a.statusCode))return function createError(e,t,n){var r=u(t.statusCode);if(!e)return n(r);if(e){if(Array.isArray(e)&&(e=e[0]),f(e))return n(o(r,e));c(e,(function(e,t){if(e)return n(e);n(o(r,t))}))}}(i,a,(function(e){t(e,null,a)}));var d=n.parse||e.parse;i=s(d)?d(i,a):i,t(null,i,a)}}(h,{url:p,method:n.method}))}};var h=["get","post","put","patch","head","delete"],p={baseUrl:"http://localhost:8000",jwt:!1,token:null,options:{}}},function(e,t,n){"use strict";var r=n(67);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,a=function isES6ClassFunction(e){try{var t=r.call(e);return i.test(t)}catch(n){return!1}},o=Object.prototype.toString,s="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;e.exports=function isCallable(e){if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;if(s)return function tryFunctionToStr(e){try{return!a(e)&&(r.call(e),!0)}catch(t){return!1}}(e);if(a(e))return!1;var t=o.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t,n){var r,i,a;a=function(){function normalize(e,t){return e=(e=(e=(e=e.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|&|#[^!])/g,"$1")).replace(/(\?.+)\?/g,"$1&")}return function(){var e=arguments;"object"===typeof arguments[0]&&(e=arguments[0],arguments[1]);var t=[].slice.call(e,0).join("/");return normalize(t)}},e.exports?e.exports=a():void 0===(i="function"===typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.COMMA_URL_ROOT="https://api.commadotai.com/",t.ATHENA_URL_ROOT="https://athena.comma.ai/";var r=t.VIDEO_HOST=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).COMMA_VIDEO_CDN;r||(t.VIDEO_HOST=r="https://my-comma-video.azureedge.net")},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){(function(t){(function(){var n,r,i,a,o,s;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},r=t.hrtime,a=(n=function getNanoSeconds(){var e;return 1e9*(e=r())[0]+e[1]})(),s=1e9*t.uptime(),o=a-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(41))},function(e,t,n){t.f=n(23)},function(e,t,n){var r=n(21),i=n(18),a=n(52),o=n(114),s=n(33).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(37);e.exports=function sumNthPowerDeviations(e,t){var n,i,a=r(e),o=0;if(2===t)for(i=0;i<e.length;i++)o+=(n=e[i]-a)*n;else for(i=0;i<e.length;i++)o+=Math.pow(e[i]-a,t);return o}},function(e,t,n){"use strict";var r=n(119),i=n(399);function quantileSelect(e,t,n,r){t%1===0?i(e,t,n,r):(t=Math.floor(t),i(e,t,n,r),i(e,t+1,t+1,r))}function compare(e,t){return e-t}function quantileIndex(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!==0?Math.ceil(n)-1:e%2===0?n-.5:n}e.exports=function quantile(e,t){var n=e.slice();if(Array.isArray(t)){!function multiQuantileSelect(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(quantileIndex(e.length,t[r]));n.push(e.length-1),n.sort(compare);var i=[0,n.length-1];for(;i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var s=Math.floor((o+a)/2);quantileSelect(e,n[s],n[o],n[a]),i.push(o,s,s,a)}}}(n,t);for(var i=[],a=0;a<t.length;a++)i[a]=r(n,t[a]);return i}return quantileSelect(n,quantileIndex(n.length,t),0,n.length-1),r(n,t)}},function(e,t,n){"use strict";e.exports=function quantileSorted(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!==0?e[Math.ceil(n)-1]:e.length%2===0?(e[n-1]+e[n])/2:e[n]}},function(e,t,n){"use strict";var r=n(117);e.exports=function sampleVariance(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");return r(e,2)/(e.length-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var i=_interopRequireDefault(n(437)),a=_interopRequireDefault(n(442)),o=_interopRequireDefault(n(184)),s=n(122),u=(0,i.default)(a.default);t.defaultSelectorHandlers=[function pseudoSelectors(e,t,n){return":"!==e[0]?null:n(t+e)},function mediaQueries(e,t,n){return"@"!==e[0]?null:e+"{"+n(t)+"}"}];t.generateCSS=function generateCSS(e,t,n,r,i){for(var a=new o.default,s=0;s<t.length;s++)a.addStyleType(t[s]);var u=new o.default,l="";return a.forEach((function(t,a){n.some((function(o){var s=o(a,e,(function(e){return generateCSS(e,[t],n,r,i)}));if(null!=s)return l+=s,!0}))||u.set(a,t,!0)})),c(e,u,r,i,n)+l};var l=function transformRule(e,t,n){return(0,s.kebabifyStyleName)(e)+":"+n(e,t)+";"},c=function generateCSSRuleset(e,t,n,i,a){!function runStringHandlers(e,t,n){if(t)for(var r=Object.keys(t),i=0;i<r.length;i++){var a=r[i];e.has(a)&&e.set(a,t[a](e.get(a),n),!1)}}(t,n,a);var o=r({},t.elements),c=u(t.elements),f=Object.keys(c);if(f.length!==t.keyOrder.length)for(var d=0;d<f.length;d++)if(!o.hasOwnProperty(f[d])){var h=void 0;if((h="W"===f[d][0]?f[d][6].toLowerCase()+f[d].slice(7):"o"===f[d][1]?f[d][3].toLowerCase()+f[d].slice(4):f[d][2].toLowerCase()+f[d].slice(3))&&o.hasOwnProperty(h)){var p=t.keyOrder.indexOf(h);t.keyOrder.splice(p,0,f[d])}else t.keyOrder.unshift(f[d])}var g=!1===i?s.stringifyValue:s.stringifyAndImportantifyValue,m=[];for(d=0;d<t.keyOrder.length;d++){var v=t.keyOrder[d],y=c[v];if(Array.isArray(y))for(var _=0;_<y.length;_++)m.push(l(v,y[_],g));else m.push(l(v,y,g))}return m.length?e+"{"+m.join("")+"}":""};t.generateCSSRuleset=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(457));t.mapObj=function mapObj(e,t){for(var n=Object.keys(e),i={},a=0;a<n.length;a+=1){var o=t([n[a],e[n[a]]]),s=r(o,2),u=s[0],l=s[1];i[u]=l}return i};var a=/([A-Z])/g,o=function UPPERCASE_RE_TO_KEBAB(e){return"-"+e.toLowerCase()};t.kebabifyStyleName=function kebabifyStyleName(e){var t=e.replace(a,o);return"m"===t[0]&&"s"===t[1]&&"-"===t[2]?"-"+t:t};var s={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var u=["Webkit","ms","Moz","O"];Object.keys(s).forEach((function(e){u.forEach((function(t){s[function prefixKey(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=s[e]}))}));var l=function stringifyValue(e,t){return"number"===typeof t?s[e]?""+t:t+"px":""+t};t.stringifyValue=l;t.stringifyAndImportantifyValue=function stringifyAndImportantifyValue(e,t){return f(l(e,t))};var c=function hashString(e){return(0,i.default)(e).toString(36)};t.hashString=c;t.hashObject=function hashObject(e){return c(JSON.stringify(e))};var f=function importantify(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:e+" !important"}},function(e,t,n){var r=n(504)("socket.io-parser"),i=n(47),a=n(506),o=n(199),s=n(200);function Encoder(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=Encoder,t.Decoder=Decoder;var u=t.ERROR+'"encode error"';function encodeAsString(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function tryStringify(e){try{return JSON.stringify(e)}catch(t){return!1}}(e.data);if(!1===i)return u;n+=i}return r("encoded %j as %s",e,n),n}function Decoder(){this.reconstructor=null}function BinaryReconstructor(e){this.reconPack=e,this.buffers=[]}function error(e){return{type:t.ERROR,data:"parser error: "+e}}Encoder.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function encodeAsBinary(e,t){a.removeBlobs(e,(function writeEncoding(e){var n=a.deconstructPacket(e),r=encodeAsString(n.packet),i=n.buffers;i.unshift(r),t(i)}))}(e,n):n([encodeAsString(e)])},i(Decoder.prototype),Decoder.prototype.add=function(e){var n;if("string"===typeof e)n=function decodeString(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return error("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var a="";"-"!==e.charAt(++n)&&(a+=e.charAt(n),n!=e.length););if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(n+1))for(i.nsp="";++n;){if(","===(u=e.charAt(n)))break;if(i.nsp+=u,n===e.length)break}else i.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var u;if(null==(u=e.charAt(n))||Number(u)!=u){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var l=function tryParse(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(n));if(!(!1!==l&&(i.type===t.ERROR||o(l))))return error("invalid payload");i.data=l}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new BinaryReconstructor(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){var r=n(509);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(a){}try{if("undefined"!==typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(a){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}}},function(e,t,n){var r=n(48),i=n(47);function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=Transport,i(Transport.prototype),Transport.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},,,,,function(e,t,n){(function(n){var r;t=e.exports=SemVer,r="object"===typeof n&&Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"})&&Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).NODE_DEBUG)?function debug(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function debug(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],u=t.tokens={},l=0;function tok(e){u[e]=l++}tok("NUMERICIDENTIFIER"),s[u.NUMERICIDENTIFIER]="0|[1-9]\\d*",tok("NUMERICIDENTIFIERLOOSE"),s[u.NUMERICIDENTIFIERLOOSE]="[0-9]+",tok("NONNUMERICIDENTIFIER"),s[u.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",tok("MAINVERSION"),s[u.MAINVERSION]="("+s[u.NUMERICIDENTIFIER]+")\\.("+s[u.NUMERICIDENTIFIER]+")\\.("+s[u.NUMERICIDENTIFIER]+")",tok("MAINVERSIONLOOSE"),s[u.MAINVERSIONLOOSE]="("+s[u.NUMERICIDENTIFIERLOOSE]+")\\.("+s[u.NUMERICIDENTIFIERLOOSE]+")\\.("+s[u.NUMERICIDENTIFIERLOOSE]+")",tok("PRERELEASEIDENTIFIER"),s[u.PRERELEASEIDENTIFIER]="(?:"+s[u.NUMERICIDENTIFIER]+"|"+s[u.NONNUMERICIDENTIFIER]+")",tok("PRERELEASEIDENTIFIERLOOSE"),s[u.PRERELEASEIDENTIFIERLOOSE]="(?:"+s[u.NUMERICIDENTIFIERLOOSE]+"|"+s[u.NONNUMERICIDENTIFIER]+")",tok("PRERELEASE"),s[u.PRERELEASE]="(?:-("+s[u.PRERELEASEIDENTIFIER]+"(?:\\."+s[u.PRERELEASEIDENTIFIER]+")*))",tok("PRERELEASELOOSE"),s[u.PRERELEASELOOSE]="(?:-?("+s[u.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+s[u.PRERELEASEIDENTIFIERLOOSE]+")*))",tok("BUILDIDENTIFIER"),s[u.BUILDIDENTIFIER]="[0-9A-Za-z-]+",tok("BUILD"),s[u.BUILD]="(?:\\+("+s[u.BUILDIDENTIFIER]+"(?:\\."+s[u.BUILDIDENTIFIER]+")*))",tok("FULL"),tok("FULLPLAIN"),s[u.FULLPLAIN]="v?"+s[u.MAINVERSION]+s[u.PRERELEASE]+"?"+s[u.BUILD]+"?",s[u.FULL]="^"+s[u.FULLPLAIN]+"$",tok("LOOSEPLAIN"),s[u.LOOSEPLAIN]="[v=\\s]*"+s[u.MAINVERSIONLOOSE]+s[u.PRERELEASELOOSE]+"?"+s[u.BUILD]+"?",tok("LOOSE"),s[u.LOOSE]="^"+s[u.LOOSEPLAIN]+"$",tok("GTLT"),s[u.GTLT]="((?:<|>)?=?)",tok("XRANGEIDENTIFIERLOOSE"),s[u.XRANGEIDENTIFIERLOOSE]=s[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",tok("XRANGEIDENTIFIER"),s[u.XRANGEIDENTIFIER]=s[u.NUMERICIDENTIFIER]+"|x|X|\\*",tok("XRANGEPLAIN"),s[u.XRANGEPLAIN]="[v=\\s]*("+s[u.XRANGEIDENTIFIER]+")(?:\\.("+s[u.XRANGEIDENTIFIER]+")(?:\\.("+s[u.XRANGEIDENTIFIER]+")(?:"+s[u.PRERELEASE]+")?"+s[u.BUILD]+"?)?)?",tok("XRANGEPLAINLOOSE"),s[u.XRANGEPLAINLOOSE]="[v=\\s]*("+s[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[u.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+s[u.XRANGEIDENTIFIERLOOSE]+")(?:"+s[u.PRERELEASELOOSE]+")?"+s[u.BUILD]+"?)?)?",tok("XRANGE"),s[u.XRANGE]="^"+s[u.GTLT]+"\\s*"+s[u.XRANGEPLAIN]+"$",tok("XRANGELOOSE"),s[u.XRANGELOOSE]="^"+s[u.GTLT]+"\\s*"+s[u.XRANGEPLAINLOOSE]+"$",tok("COERCE"),s[u.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",tok("COERCERTL"),o[u.COERCERTL]=new RegExp(s[u.COERCE],"g"),tok("LONETILDE"),s[u.LONETILDE]="(?:~>?)",tok("TILDETRIM"),s[u.TILDETRIM]="(\\s*)"+s[u.LONETILDE]+"\\s+",o[u.TILDETRIM]=new RegExp(s[u.TILDETRIM],"g");tok("TILDE"),s[u.TILDE]="^"+s[u.LONETILDE]+s[u.XRANGEPLAIN]+"$",tok("TILDELOOSE"),s[u.TILDELOOSE]="^"+s[u.LONETILDE]+s[u.XRANGEPLAINLOOSE]+"$",tok("LONECARET"),s[u.LONECARET]="(?:\\^)",tok("CARETTRIM"),s[u.CARETTRIM]="(\\s*)"+s[u.LONECARET]+"\\s+",o[u.CARETTRIM]=new RegExp(s[u.CARETTRIM],"g");tok("CARET"),s[u.CARET]="^"+s[u.LONECARET]+s[u.XRANGEPLAIN]+"$",tok("CARETLOOSE"),s[u.CARETLOOSE]="^"+s[u.LONECARET]+s[u.XRANGEPLAINLOOSE]+"$",tok("COMPARATORLOOSE"),s[u.COMPARATORLOOSE]="^"+s[u.GTLT]+"\\s*("+s[u.LOOSEPLAIN]+")$|^$",tok("COMPARATOR"),s[u.COMPARATOR]="^"+s[u.GTLT]+"\\s*("+s[u.FULLPLAIN]+")$|^$",tok("COMPARATORTRIM"),s[u.COMPARATORTRIM]="(\\s*)"+s[u.GTLT]+"\\s*("+s[u.LOOSEPLAIN]+"|"+s[u.XRANGEPLAIN]+")",o[u.COMPARATORTRIM]=new RegExp(s[u.COMPARATORTRIM],"g");tok("HYPHENRANGE"),s[u.HYPHENRANGE]="^\\s*("+s[u.XRANGEPLAIN]+")\\s+-\\s+("+s[u.XRANGEPLAIN]+")\\s*$",tok("HYPHENRANGELOOSE"),s[u.HYPHENRANGELOOSE]="^\\s*("+s[u.XRANGEPLAINLOOSE]+")\\s+-\\s+("+s[u.XRANGEPLAINLOOSE]+")\\s*$",tok("STAR"),s[u.STAR]="(<|>)?=?\\s*\\*";for(var c=0;c<l;c++)r(c,s[c]),o[c]||(o[c]=new RegExp(s[c]));function parse(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof SemVer)return e;if("string"!==typeof e)return null;if(e.length>i)return null;if(!(t.loose?o[u.LOOSE]:o[u.FULL]).test(e))return null;try{return new SemVer(e,t)}catch(n){return null}}function SemVer(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof SemVer){if(e.loose===t.loose)return e;e=e.version}else if("string"!==typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof SemVer))return new SemVer(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var n=e.trim().match(t.loose?o[u.LOOSE]:o[u.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}t.parse=parse,t.valid=function valid(e,t){var n=parse(e,t);return n?n.version:null},t.clean=function clean(e,t){var n=parse(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=SemVer,SemVer.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},SemVer.prototype.toString=function(){return this.version},SemVer.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof SemVer||(e=new SemVer(e,this.options)),this.compareMain(e)||this.comparePre(e)},SemVer.prototype.compareMain=function(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)},SemVer.prototype.comparePre=function(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return compareIdentifiers(n,i)}while(++t)},SemVer.prototype.compareBuild=function(e){e instanceof SemVer||(e=new SemVer(e,this.options));var t=0;do{var n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return compareIdentifiers(n,i)}while(++t)},SemVer.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function inc(e,t,n,r){"string"===typeof n&&(r=n,n=void 0);try{return new SemVer(e,n).inc(t,r).version}catch(i){return null}},t.diff=function diff(e,t){if(eq(e,t))return null;var n=parse(e),r=parse(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var a="prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return i+o;return a},t.compareIdentifiers=compareIdentifiers;var f=/^[0-9]+$/;function compareIdentifiers(e,t){var n=f.test(e),r=f.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function compare(e,t,n){return new SemVer(e,n).compare(new SemVer(t,n))}function gt(e,t,n){return compare(e,t,n)>0}function lt(e,t,n){return compare(e,t,n)<0}function eq(e,t,n){return 0===compare(e,t,n)}function neq(e,t,n){return 0!==compare(e,t,n)}function gte(e,t,n){return compare(e,t,n)>=0}function lte(e,t,n){return compare(e,t,n)<=0}function cmp(e,t,n,r){switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return eq(e,n,r);case"!=":return neq(e,n,r);case">":return gt(e,n,r);case">=":return gte(e,n,r);case"<":return lt(e,n,r);case"<=":return lte(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function Comparator(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Comparator){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Comparator))return new Comparator(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===d?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function rcompareIdentifiers(e,t){return compareIdentifiers(t,e)},t.major=function major(e,t){return new SemVer(e,t).major},t.minor=function minor(e,t){return new SemVer(e,t).minor},t.patch=function patch(e,t){return new SemVer(e,t).patch},t.compare=compare,t.compareLoose=function compareLoose(e,t){return compare(e,t,!0)},t.compareBuild=function compareBuild(e,t,n){var r=new SemVer(e,n),i=new SemVer(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function rcompare(e,t,n){return compare(t,e,n)},t.sort=function sort(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function rsort(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=gt,t.lt=lt,t.eq=eq,t.neq=neq,t.gte=gte,t.lte=lte,t.cmp=cmp,t.Comparator=Comparator;var d={};function Range(e,t){if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Range)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Range(e.raw,t);if(e instanceof Comparator)return new Range(e.value,t);if(!(this instanceof Range))return new Range(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function isSatisfiable(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function isX(e){return!e||"x"===e.toLowerCase()||"*"===e}function hyphenReplace(e,t,n,r,i,a,o,s,u,l,c,f,d){return((t=isX(n)?"":isX(r)?">="+n+".0.0":isX(i)?">="+n+"."+r+".0":">="+t)+" "+(s=isX(u)?"":isX(l)?"<"+(+u+1)+".0.0":isX(c)?"<"+u+"."+(+l+1)+".0":f?"<="+u+"."+l+"."+c+"-"+f:"<="+s)).trim()}function testSet(e,t,n){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(i=0;i<e.length;i++)if(r(e[i].semver),e[i].semver!==d&&e[i].semver.prerelease.length>0){var a=e[i].semver;if(a.major===t.major&&a.minor===t.minor&&a.patch===t.patch)return!0}return!1}return!0}function satisfies(e,t,n){try{t=new Range(t,n)}catch(r){return!1}return t.test(e)}function outside(e,t,n,r){var i,a,o,s,u;switch(e=new SemVer(e,r),t=new Range(t,r),n){case">":i=gt,a=lte,o=lt,s=">",u=">=";break;case"<":i=lt,a=gte,o=gt,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var c=t.set[l],f=null,h=null;if(c.forEach((function(e){e.semver===d&&(e=new Comparator(">=0.0.0")),f=f||e,h=h||e,i(e.semver,f.semver,r)?f=e:o(e.semver,h.semver,r)&&(h=e)})),f.operator===s||f.operator===u)return!1;if((!h.operator||h.operator===s)&&a(e,h.semver))return!1;if(h.operator===u&&o(e,h.semver))return!1}return!0}Comparator.prototype.parse=function(e){var t=this.options.loose?o[u.COMPARATORLOOSE]:o[u.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new SemVer(n[2],this.options.loose):this.semver=d},Comparator.prototype.toString=function(){return this.value},Comparator.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===d||e===d)return!0;if("string"===typeof e)try{e=new SemVer(e,this.options)}catch(t){return!1}return cmp(e,this.operator,this.semver,this.options)},Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator))throw new TypeError("a Comparator is required");var n;if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new Range(e.value,t),satisfies(this.value,n,t));if(""===e.operator)return""===e.value||(n=new Range(this.value,t),satisfies(e.semver,n,t));var r=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),i=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),a=this.semver.version===e.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),s=cmp(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=cmp(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||a&&o||s||u},t.Range=Range,Range.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},Range.prototype.toString=function(){return this.range},Range.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[u.HYPHENRANGELOOSE]:o[u.HYPHENRANGE];e=e.replace(n,hyphenReplace),r("hyphen replace",e),e=e.replace(o[u.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,o[u.COMPARATORTRIM]),e=(e=(e=e.replace(o[u.TILDETRIM],"$1~")).replace(o[u.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?o[u.COMPARATORLOOSE]:o[u.COMPARATOR],a=e.split(" ").map((function(e){return function parseComparator(e,t){return r("comp",e,t),e=function replaceCarets(e,t){return e.trim().split(/\s+/).map((function(e){return function replaceCaret(e,t){r("caret",e,t);var n=t.loose?o[u.CARETLOOSE]:o[u.CARET];return e.replace(n,(function(t,n,i,a,o){var s;return r("caret",e,t,n,i,a,o),isX(n)?s="":isX(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":isX(a)?s="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":o?(r("replaceCaret pr",o),s="0"===n?"0"===i?">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+i+"."+(+a+1):">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+a+"-"+o+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===i?">="+n+"."+i+"."+a+" <"+n+"."+i+"."+(+a+1):">="+n+"."+i+"."+a+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+a+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function replaceTildes(e,t){return e.trim().split(/\s+/).map((function(e){return function replaceTilde(e,t){var n=t.loose?o[u.TILDELOOSE]:o[u.TILDE];return e.replace(n,(function(t,n,i,a,o){var s;return r("tilde",e,t,n,i,a,o),isX(n)?s="":isX(i)?s=">="+n+".0.0 <"+(+n+1)+".0.0":isX(a)?s=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":o?(r("replaceTilde pr",o),s=">="+n+"."+i+"."+a+"-"+o+" <"+n+"."+(+i+1)+".0"):s=">="+n+"."+i+"."+a+" <"+n+"."+(+i+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function replaceXRanges(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function replaceXRange(e,t){e=e.trim();var n=t.loose?o[u.XRANGELOOSE]:o[u.XRANGE];return e.replace(n,(function(n,i,a,o,s,u){r("xRange",e,n,i,a,o,s,u);var l=isX(a),c=l||isX(o),f=c||isX(s),d=f;return"="===i&&d&&(i=""),u=t.includePrerelease?"-0":"",l?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(c&&(o=0),s=0,">"===i?(i=">=",c?(a=+a+1,o=0,s=0):(o=+o+1,s=0)):"<="===i&&(i="<",c?a=+a+1:o=+o+1),n=i+a+"."+o+"."+s+u):c?n=">="+a+".0.0"+u+" <"+(+a+1)+".0.0"+u:f&&(n=">="+a+"."+o+".0"+u+" <"+a+"."+(+o+1)+".0"+u),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function replaceStars(e,t){return r("replaceStars",e,t),e.trim().replace(o[u.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a=a.map((function(e){return new Comparator(e,this.options)}),this)},Range.prototype.intersects=function(e,t){if(!(e instanceof Range))throw new TypeError("a Range is required");return this.set.some((function(n){return isSatisfiable(n,t)&&e.set.some((function(e){return isSatisfiable(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function toComparators(e,t){return new Range(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},Range.prototype.test=function(e){if(!e)return!1;if("string"===typeof e)try{e=new SemVer(e,this.options)}catch(n){return!1}for(var t=0;t<this.set.length;t++)if(testSet(this.set[t],e,this.options))return!0;return!1},t.satisfies=satisfies,t.maxSatisfying=function maxSatisfying(e,t,n){var r=null,i=null;try{var a=new Range(t,n)}catch(o){return null}return e.forEach((function(e){a.test(e)&&(r&&-1!==i.compare(e)||(i=new SemVer(r=e,n)))})),r},t.minSatisfying=function minSatisfying(e,t,n){var r=null,i=null;try{var a=new Range(t,n)}catch(o){return null}return e.forEach((function(e){a.test(e)&&(r&&1!==i.compare(e)||(i=new SemVer(r=e,n)))})),r},t.minVersion=function minVersion(e,t){e=new Range(e,t);var n=new SemVer("0.0.0");if(e.test(n))return n;if(n=new SemVer("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new SemVer(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!gt(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function validRange(e,t){try{return new Range(e,t).range||"*"}catch(n){return null}},t.ltr=function ltr(e,t,n){return outside(e,t,"<",n)},t.gtr=function gtr(e,t,n){return outside(e,t,">",n)},t.outside=outside,t.prerelease=function prerelease(e,t){var n=parse(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function intersects(e,t,n){return e=new Range(e,n),t=new Range(t,n),e.intersects(t)},t.coerce=function coerce(e,t){if(e instanceof SemVer)return e;"number"===typeof e&&(e=String(e));if("string"!==typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=o[u.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),o[u.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;o[u.COERCERTL].lastIndex=-1}else n=e.match(o[u.COERCE]);if(null===n)return null;return parse(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}}).call(this,n(41))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function default_1(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}},function(e,t){function indexOf(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function serializer(e,t){var n=[],r=[];return null==t&&(t=function cycleReplacer(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,indexOf(n,t)).join(".")+"]"}),function(i,a){if(n.length>0){var o=indexOf(n,this);~o?n.splice(o+1):n.push(this),~o?r.splice(o,1/0,i):r.push(i),~indexOf(n,a)&&(a=t.call(this,i,a))}else n.push(a);return null==e?a instanceof Error?function stringifyError(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(a):a:e.call(this,i,a)}}(e.exports=function stringify(e,t,n,r){return JSON.stringify(e,serializer(t,r),n)}).getSerialize=serializer},function(e,t){},function(e,t,n){"use strict";var r=n(52),i=n(27),a=n(136),o=n(39),s=n(44),u=n(247),l=n(65),c=n(252),f=n(23)("iterator"),d=!([].keys&&"next"in[].keys()),h=function returnThis(){return this};e.exports=function(e,t,n,p,g,m,v){u(n,t,p);var y,_,b,x=function getMethod(e){if(!d&&e in E)return E[e];switch(e){case"keys":return function keys(){return new n(this,e)};case"values":return function values(){return new n(this,e)}}return function entries(){return new n(this,e)}},w=t+" Iterator",k="values"==g,S=!1,E=e.prototype,T=E[f]||E["@@iterator"]||g&&E[g],C=T||x(g),O=g?k?x("entries"):C:void 0,A="Array"==t&&E.entries||T;if(A&&(b=c(A.call(new e)))!==Object.prototype&&b.next&&(l(b,w,!0),r||"function"==typeof b[f]||o(b,f,h)),k&&T&&"values"!==T.name&&(S=!0,C=function values(){return T.call(this)}),r&&!v||!d&&!S&&E[f]||o(E,f,C),s[t]=C,s[w]=h,g)if(y={values:k?C:x("values"),keys:m?C:x("keys"),entries:O},v)for(_ in y)_ in E||a(E,_,y[_]);else i(i.P+i.F*(d||S),t,y);return y}},function(e,t,n){e.exports=!n(36)&&!n(63)((function(){return 7!=Object.defineProperty(n(93)("div"),"a",{get:function get(){return 7}}).a}))},function(e,t,n){e.exports=n(39)},function(e,t,n){var r=n(40),i=n(45),a=n(250)(!1),o=n(98)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,l=[];for(n in s)n!=o&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var r=n(21).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(o){var a=e.return;throw void 0!==a&&r(a.call(e)),o}}},function(e,t,n){var r=n(44),i=n(23)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){var r=n(28),i=n(62),a=n(23)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[a])?t:i(n)}},function(e,t,n){var r,i,a,o=n(43),s=n(259),u=n(138),l=n(93),c=n(21),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,m=0,v={},y=function run(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function listener(e){y.call(e.data)};d&&h||(d=function setImmediate(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function clearImmediate(e){delete v[e]},"process"==n(54)(f)?r=function defer(e){f.nextTick(o(y,e,1))}:g&&g.now?r=function defer(e){g.now(o(y,e,1))}:p?(a=(i=new p).port2,i.port1.onmessage=_,r=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function defer(e){c.postMessage(e+"","*")},c.addEventListener("message",_,!1)):r="onreadystatechange"in l("script")?function defer(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function defer(e){setTimeout(o(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var r=n(28),i=n(35),a=n(104);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(23)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(o){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},e(a)}catch(o){}return n}},function(e,t,n){(function(t){var r,i="undefined"!==typeof t?t:"undefined"!==typeof window?window:{},a=n(266);"undefined"!==typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r}).call(this,n(19))},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t){e.exports=function isFunction(e){var t=n.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},function(e,t,n){"use strict";var r=n(282),i="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,u=s&&function arePropertyDescriptorsSupported(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(n){return!1}}(),l=function defineProperty(e,t,n,r){(!(t in e)||function isFunction(e){return"function"===typeof e&&"[object Function]"===a.call(e)}(r)&&r())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function defineProperties(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)l(e,a[s],t[a[s]],n[a[s]])};c.supportsDescriptors=!!u,e.exports=c},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function isArguments(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},function(e,t,n){"use strict";var r=n(67),i=n(284),a=r.call(Function.call,String.prototype.replace),o=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function trim(){var e=i.ToString(i.CheckObjectCoercible(this));return a(a(e,o,""),s,"")}},function(e,t,n){"use strict";var r=n(151);e.exports=function getPolyfill(){return String.prototype.trim&&"\u200b"==="\u200b".trim()?String.prototype.trim:r}},function(e,t){e.exports=function extend(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){"use strict";e.exports=function isErrorCode(e){return e<200||e>=400}},function(e,t,n){e.exports={default:n(317),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(61));t.default=function ConfigRequestPromise(){var e=(0,i.default)();e.get,e.post,e.patch;return e.get=o(e.get.bind(e)),e.post=o(e.post.bind(e)),e.patch=o(e.patch.bind(e)),e};var i=_interopRequireDefault(n(106)),a=_interopRequireDefault(n(70));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=function wrap(e){return function(t,n){return new r.default((function(r,i){e(t,n||{},(0,a.default)(r,i))}))}}},function(e,t,n){"use strict";t.__esModule=!0;var r=_interopRequireDefault(n(337)),i=_interopRequireDefault(n(340));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function sliceIterator(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,u=(0,i.default)(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";t.__esModule=!0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(347));t.default=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.unpackCAN=function unpackCAN(t){if(t.byteLength%i!==0){throw new Error("can-message.unpackCAN: byteLength must be a multiple of "+i)}for(var n=[],a=0;a<t.byteLength;a+=i){var o=t.slice(a,a+i),s=e.from(o),u=s.readInt32LE(0),l=s.readInt32LE(4),c=void 0;c=(u&r)>>>0?u>>>3:u>>>21;var f=l>>>16,d=new e(o.slice(8,8+(15&l))),h={address:c,busTime:f,data:d,bus:15&l>>4};n.push(h)}return n},t.packCAN=function packCAN(t){var i=t.address,a=t.data,o=t.bus;if(a.byteLength>8){throw new Error("can-message.packCAN: byteLength cannot be greater than 8")}i=i>=2048?(i<<3|n|r)>>>0:(i<<21|n)>>>0;var s=e.alloc(16);return s.writeUInt32LE(i),s.writeUInt32LE((a.byteLength|o<<4)>>>0,4),a.copy(s,8),s};var n=t.CAN_TRANSMIT=1,r=t.CAN_EXTENDED=4,i=16}).call(this,n(20).Buffer)},function(e,t,n){"use strict";var r=n(350),i=n(351),a=n(353),o=n(354);e.exports=function WeakmapEvent(){var e=i();return listen.toHash=a(listen),listen.toArray=o(listen),{broadcast:function broadcast(e,t){if(1===arguments.length)throw new Error("WeakmapEvent#broadcast expects arguments (obj, value)");return getEvent(e).broadcast(t,e)},listen:listen};function listen(e,t){if(1===arguments.length)throw new Error("WeakmapEvent#listen expects arguments (obj, listen)");return getEvent(e).listen(t)}function getEvent(t){var n=e(t);return n.event=n.event||r(),n.event}}},function(e,t){function ap(e,t){return function(){var n=[].slice.call(arguments),r=e.slice();return r.push.apply(r,n),t.apply(this,r)}}function pa(e,t){return function(){var n=[].slice.call(arguments);return n.push.apply(n,e),t.apply(this,n)}}function partial(e){return ap([].slice.call(arguments,1),e)}function partialRight(e){return pa([].slice.call(arguments,1),e)}(t=e.exports=ap).pa=pa,t.apa=function apa(e,t,n){return function(){return n.apply(this,e.concat.apply(e,arguments).concat(t))}},t.partial=partial,t.partialRight=partialRight,t.curry=function curry(e){return partial(partial,e)},t.curryRight=function curryRight(e){return partial(partialRight,e)}},function(e,t,n){"use strict";var r=_interopRequireDefault(n(112)),i=_interopRequireDefault(n(355)),a=_interopRequireDefault(n(367));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function CancelError(e){(0,r.default)(this,CancelError);var t=(0,i.default)(this,(CancelError.__proto__||Object.getPrototypeOf(CancelError)).call(this,e));return t.name="CancelError",t}return(0,a.default)(CancelError,e),CancelError}(Error),s=function createDelay(e){return function(t,n){var r=void 0,i=void 0,a=new Promise((function(a,o){i=o,r=setTimeout((function(){(e?a:o)(n)}),t)}));return a.cancel=function(){r&&(clearTimeout(r),r=null,i(new o("Delay canceled")))},a}};e.exports=s(!0),e.exports.reject=s(!1),e.exports.CancelError=o},function(e,t,n){"use strict";t.__esModule=!0;var r=_interopRequireDefault(n(356)),i=_interopRequireDefault(n(358)),a="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===a(r.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(137),i=n(100).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return r(e,i)}},function(e,t,n){var r=n(116),i=n(53),a=n(45),o=n(94),s=n(40),u=n(135),l=Object.getOwnPropertyDescriptor;t.f=n(36)?l:function getOwnPropertyDescriptor(e,t){if(e=a(e),t=o(t,!0),u)try{return l(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(168);e.exports=function standardDeviation(e){if(1===e.length)return 0;var t=r(e);return Math.sqrt(t)}},function(e,t,n){"use strict";var r=n(117);e.exports=function variance(e){if(0===e.length)throw new Error("variance requires at least one data point");return r(e,2)/e.length}},function(e,t,n){"use strict";e.exports=function sum(e){if(0===e.length)return 0;for(var t,n=e[0],r=0,i=1;i<e.length;i++)t=n+e[i],Math.abs(n)>=Math.abs(e[i])?r+=n-t+e[i]:r+=e[i]-t+n,n=t;return n+r}},function(e,t,n){"use strict";e.exports=function numericSort(e){return e.slice().sort((function(e,t){return e-t}))}},function(e,t,n){"use strict";e.exports=function modeSorted(e){if(0===e.length)throw new Error("mode requires at least one data point");if(1===e.length)return e[0];for(var t=e[0],n=NaN,r=0,i=1,a=1;a<e.length+1;a++)e[a]!==t?(i>r&&(r=i,n=t),i=1,t=e[a]):i++;return n}},function(e,t,n){"use strict";e.exports=function min(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}},function(e,t,n){"use strict";e.exports=function max(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}},function(e,t,n){"use strict";var r=n(118);e.exports=function median(e){return+r(e,.5)}},function(e,t,n){"use strict";var r=n(176);e.exports=function shuffle(e,t){var n=e.slice();return r(n.slice(),t)}},function(e,t,n){"use strict";e.exports=function shuffleInPlace(e,t){t=t||Math.random;for(var n,r,i=e.length;i>0;)r=Math.floor(t()*i--),n=e[i],e[i]=e[r],e[r]=n;return e}},function(e,t,n){"use strict";e.exports=function uniqueCountSorted(e){for(var t,n=0,r=0;r<e.length;r++)0!==r&&e[r]===t||(t=e[r],n++);return n}},function(e,t,n){"use strict";var r=n(37);e.exports=function sampleCovariance(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(e),i=r(t),a=0,o=0;o<e.length;o++)a+=(e[o]-n)*(t[o]-i);return a/(e.length-1)}},function(e,t,n){"use strict";var r=n(120);e.exports=function sampleStandardDeviation(e){var t=r(e);return Math.sqrt(t)}},function(e,t,n){"use strict";e.exports=function combineMeans(e,t,n,r){return(e*t+n*r)/(t+r)}},function(e,t,n){"use strict";var r=Math.sqrt(2*Math.PI);function cumulativeDistribution(e){for(var t=e,n=e,i=1;i<15;i++)t+=n*=e*e/(2*i+1);return Math.round(1e4*(.5+t/r*Math.exp(-e*e/2)))/1e4}for(var i=[],a=0;a<=3.09;a+=.01)i.push(cumulativeDistribution(a));e.exports=i},function(e,t,n){"use strict";e.exports=function inverseErrorFunction(e){var t=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*t)+Math.log(1-e*e)/2,2)-Math.log(1-e*e)/t)-(2/(Math.PI*t)+Math.log(1-e*e)/2));return e>=0?n:-n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function capitalizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i="undefined"!==typeof Map,a=function(){function OrderedElements(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderedElements),this.elements={},this.keyOrder=[]}return r(OrderedElements,[{key:"forEach",value:function forEach(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])}},{key:"set",value:function set(e,t,n){var r=this;if(this.elements.hasOwnProperty(e)){if(n){var a=this.keyOrder.indexOf(e);this.keyOrder.splice(a,1),this.keyOrder.push(e)}}else this.keyOrder.push(e);if(null!=t){if(i&&t instanceof Map||t instanceof OrderedElements){var o=function(){var i=r.elements.hasOwnProperty(e)?r.elements[e]:new OrderedElements;return t.forEach((function(e,t){i.set(t,e,n)})),r.elements[e]=i,{v:void 0}}();if("object"===typeof o)return o.v}if(Array.isArray(t)||"object"!==typeof t)this.elements[e]=t;else{for(var s=this.elements.hasOwnProperty(e)?this.elements[e]:new OrderedElements,u=Object.keys(t),l=0;l<u.length;l+=1)s.set(u[l],t[u[l]],n);this.elements[e]=s}}else this.elements[e]=t}},{key:"get",value:function get(e){return this.elements[e]}},{key:"has",value:function has(e){return this.elements.hasOwnProperty(e)}},{key:"addStyleType",value:function addStyleType(e){var t=this;if(i&&e instanceof Map||e instanceof OrderedElements)e.forEach((function(e,n){t.set(n,e,!0)}));else for(var n=Object.keys(e),r=0;r<n.length;r++)this.set(n[r],e[n[r]],!0)}}]),OrderedElements}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(122),o=n(458),s={create:function create(e){return(0,a.mapObj)(e,(function(e){var t=r(e,2),n=t[0],i=t[1],o=JSON.stringify(i);return[n,{_len:o.length,_name:(0,a.hashString)(o),_definition:i}]}))},rehydrate:function rehydrate(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o.addRenderedClassNames)(e)}},u={renderStatic:function renderStatic(e){return(0,o.reset)(),(0,o.startBuffering)(),{html:e(),css:{content:(0,o.flushToString)(),renderedClassNames:(0,o.getRenderedClassNames)()}}}},l={suppressStyleInjection:function suppressStyleInjection(){(0,o.reset)(),(0,o.startBuffering)()},clearBufferAndResumeStyleInjection:function clearBufferAndResumeStyleInjection(){(0,o.reset)()}};e.exports=function makeExports(e,t){return{StyleSheet:i({},s,{extend:function extend(n){var r=n.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return makeExports(e,t.concat(r))}}),StyleSheetServer:u,StyleSheetTestUtils:l,css:function css(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(0,o.injectAndGetClassName)(e,r,t)}}}},function(e){e.exports=JSON.parse('{"a":"5.6.0"}')},function(e,t,n){"use strict";e.exports=function bind(e,t){return function wrap(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(24);function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function buildURL(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function serialize(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function parseValue(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(encode(t)+"="+encode(e))})))})),i=a.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function isCancel(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(24),i=n(477),a={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o={adapter:function getDefaultAdapter(){var e;return"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t)?e=n(191):"undefined"!==typeof XMLHttpRequest&&(e=n(191)),e}(),transformRequest:[function transformRequest(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function transformResponse(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function forEachMethodNoData(e){o.headers[e]={}})),r.forEach(["post","put","patch"],(function forEachMethodWithData(e){o.headers[e]=r.merge(a)})),e.exports=o}).call(this,n(41))},function(e,t,n){"use strict";var r=n(24),i=n(478),a=n(188),o=n(480),s=n(481),u=n(192);e.exports=function xhrAdapter(e){return new Promise((function dispatchXhrRequest(t,l){var c=e.data,f=e.headers;r.isFormData(c)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",p=e.auth.password||"";f.Authorization="Basic "+btoa(h+":"+p)}if(d.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function handleLoad(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};i(t,l,r),d=null}},d.onabort=function handleAbort(){d&&(l(u("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function handleError(){l(u("Network Error",e,null,d)),d=null},d.ontimeout=function handleTimeout(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var g=n(482),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;m&&(f[e.xsrfHeaderName]=m)}if("setRequestHeader"in d&&r.forEach(f,(function setRequestHeader(e,t){"undefined"===typeof c&&"content-type"===t.toLowerCase()?delete f[t]:d.setRequestHeader(t,e)})),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(v){if("json"!==e.responseType)throw v}"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function onCanceled(e){d&&(d.abort(),l(e),d=null)})),void 0===c&&(c=null),d.send(c)}))}},function(e,t,n){"use strict";var r=n(479);e.exports=function createError(e,t,n,i,a){var o=new Error(e);return r(o,t,n,i,a)}},function(e,t,n){"use strict";var r=n(24);e.exports=function mergeConfig(e,t){t=t||{};var n={};return r.forEach(["url","method","params","data"],(function valueFromConfig2(e){"undefined"!==typeof t[e]&&(n[e]=t[e])})),r.forEach(["headers","auth","proxy"],(function mergeDeepProperties(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):"undefined"!==typeof t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):"undefined"!==typeof e[i]&&(n[i]=e[i])})),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function defaultToConfig2(r){"undefined"!==typeof t[r]?n[r]=t[r]:"undefined"!==typeof e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,e.exports=Cancel},function(e,t){var n=1e3,r=60*n,i=60*r,a=24*i,o=365.25*a;function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s=typeof e;if("string"===s&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*a;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===s&&!1===isNaN(e))return t.long?function fmtLong(e){return plural(e,a,"day")||plural(e,i,"hour")||plural(e,r,"minute")||plural(e,n,"second")||e+" ms"}(e):function fmtShort(e){if(e>=a)return Math.round(e/a)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){module.exports=t(e)}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:this,(function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function cb_utob(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function utob(e){return e.replace(re_utob,cb_utob)},cb_encode=function cb_encode(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function encode(e,t){return t?_encode(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):_encode(String(e))},encodeURI=function encodeURI(e){return encode(e,!0)},re_btou=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),cb_btou=function cb_btou(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function btou(e){return e.replace(re_btou,cb_btou)},cb_decode=function cb_decode(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function atob(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function decode(e){return _decode(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function noConflict(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"===typeof Object.defineProperty){var noEnum=function noEnum(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum((function(){return decode(this)}))),Object.defineProperty(String.prototype,"toBase64",noEnum((function(e){return encode(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",noEnum((function(){return encode(this,!0)})))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}}))}).call(this,__webpack_require__(19))},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function parseuri(e){var t=e,i=e.indexOf("["),a=e.indexOf("]");-1!=i&&-1!=a&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));for(var o=n.exec(e||""),s={},u=14;u--;)s[r[u]]=o[u]||"";return-1!=i&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t,n){var r=n(500),i=n(501),a=n(502);e.exports=function _toConsumableArray(e){return r(e)||i(e)||a()}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function isBuf(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||i(e))};var n="function"===typeof t&&"function"===typeof t.isBuffer,r="function"===typeof ArrayBuffer,i=function isView(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,n(20).Buffer)},function(e,t,n){var r=n(507),i=n(207),a=n(47),o=n(123),s=n(208),u=n(209),l=n(72)("socket.io-client:manager"),c=n(206),f=n(524),d=Object.prototype.hasOwnProperty;function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=Manager,Manager.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Manager.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var a=s(n,"open",(function(){i.onopen(),e&&e()})),o=s(n,"error",(function(t){if(l("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;l("connect attempt will timeout after %d",u);var c=setTimeout((function(){l("connect attempt timed out after %d",u),a.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function destroy(){clearTimeout(c)}})}return this.subs.push(a),this.subs.push(o),this},Manager.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",u(this,"ondata"))),this.subs.push(s(e,"ping",u(this,"onping"))),this.subs.push(s(e,"pong",u(this,"onpong"))),this.subs.push(s(e,"error",u(this,"onerror"))),this.subs.push(s(e,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",onConnecting),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&onConnecting()}function onConnecting(){~c(r.connecting,n)||r.connecting.push(n)}return n},Manager.prototype.destroy=function(e){var t=c(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},Manager.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function destroy(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(124),i=n(510),a=n(520),o=n(521);t.polling=function polling(e){var t=!1,n=!1,o=!1!==e.jsonp;if("undefined"!==typeof location){var s="https:"===location.protocol,u=location.port;u||(u=s?443:80),t=e.hostname!==location.hostname||u!==e.port,n=e.secure!==s}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!o)throw new Error("JSONP disabled");return new a(e)},t.websocket=o},function(e,t,n){var r=n(125),i=n(73),a=n(48),o=n(74),s=n(205),u=n(75)("engine.io-client:polling");e.exports=Polling;var l=null!=new(n(124))({xdomain:!1}).responseType;function Polling(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),r.call(this,e)}o(Polling,r),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){var t=this;function pause(){u("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(u("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--n||pause()}))),this.writable||(u("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){u("pre-pause writing complete"),--n||pause()})))}else pause()},Polling.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var t=this;u("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,(function callback(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var e=this;function close(){u("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),close()):(u("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(e){var t=this;this.writable=!1;var n=function callbackfn(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(512),i=Object.prototype.toString,a="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function hasBinary(e){if(!e||"object"!==typeof e)return!1;if(r(e)){for(var n=0,i=e.length;n<i;n++)if(hasBinary(e[n]))return!0;return!1}if("function"===typeof t&&t.isBuffer&&t.isBuffer(e)||"function"===typeof ArrayBuffer&&e instanceof ArrayBuffer||a&&e instanceof Blob||o&&e instanceof File)return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return hasBinary(e.toJSON(),!0);for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&hasBinary(e[s]))return!0;return!1}}).call(this,n(20).Buffer)},function(e,t,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,o={},s=0,u=0;function encode(e){var t="";do{t=i[e%a]+t,e=Math.floor(e/a)}while(e>0);return t}function yeast(){var e=encode(+new Date);return e!==r?(s=0,r=e):e+"."+encode(s++)}for(;u<a;u++)o[i[u]]=u;yeast.encode=encode,yeast.decode=function decode(e){var t=0;for(u=0;u<e.length;u++)t=t*a+o[e.charAt(u)];return t},e.exports=yeast},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(123),i=n(47),a=n(523),o=n(208),s=n(209),u=n(72)("socket.io-client:socket"),l=n(73),c=n(204);e.exports=Socket;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=i.prototype.emit;function Socket(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",s(this,"onopen")),o(e,"packet",s(this,"onpacket")),o(e,"close",s(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},Socket.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},Socket.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:c(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},Socket.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},Socket.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===typeof this.query?l.encode(this.query):this.query;u("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},Socket.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},Socket.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},Socket.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},Socket.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);u("sending ack %j",i),t.packet({type:c(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},Socket.prototype.onack=function(e){var t=this.acks[e.id];"function"===typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},Socket.prototype.compress=function(e){return this.flags.compress=e,this},Socket.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function on(e,t,n){return e.on(t,n),{destroy:function destroy(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){(function(t){var r=n(234),i="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},a=i.Raven,o=new r;o.noConflict=function(){return i.Raven=a,o},o.afterLoad(),e.exports=o,e.exports.Client=r}).call(this,n(19))},function(e,t,n){"use strict";!function checkDCE(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}}(),e.exports=n(240)},function(e,t,n){e.exports=function(){"use strict";var e,t,n="https:"===location.protocol||"chrome-extension:"===location.protocol||"localhost"===location.hostname,r=!1,i={createWriteStream:function createWriteStream(a,o,s){if(Number.isFinite(o)){var u=[o,s];s=u[0],o=u[1]}var l,c=new MessageChannel,f=function setupChannel(r){return new Promise((function(o){var u,f,d=[{filename:a,size:s},"*",[c.port2]];r&&(d[0].readableStream=r,d[2].push(r)),c.port1.onmessage=function(e){e.data.download&&(o(),n||l.close(),window.chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window?chrome.tabs.create({url:e.data.download,active:!1}):window.location=e.data.download,r&&(c.port1.close(),c.port2.close()),c.port1.onmessage=null)},n&&!e&&((e=document.createElement("iframe")).src=i.mitm,e.hidden=!0,document.body.appendChild(e)),n&&!t&&e.addEventListener("load",u=function fn(){var n;t=!0,e.removeEventListener("load",u),(n=e.contentWindow).postMessage.apply(n,d)}),n&&t&&(f=e.contentWindow).postMessage.apply(f,d),n||(l=window.open(i.mitm,Math.random()),window.addEventListener("message",(function onready(e){var t;e.source===l&&((t=l).postMessage.apply(t,d),window.removeEventListener("message",onready))})))}))};if(r){var d=new TransformStream({start:function start(){return new Promise((function(e){return setTimeout((function(){return f(d.readable).then(e)}))}))}},o);return d.writable}return new WritableStream({start:function start(){return f()},write:function write(e){c.port1.postMessage(e)},close:function close(){c.port1.postMessage("end")},abort:function abort(){c.port1.postMessage("abort")}},o)},supported:!1,version:{full:"1.2.0",major:1,minor:2,dot:0}};i.mitm="https://jimmywarting.github.io/StreamSaver.js/mitm.html?version="+i.version.full;try{i.supported="serviceWorker"in navigator&&!!new ReadableStream&&!!new WritableStream}catch(s){}try{var a=(new TransformStream).readable,o=new MessageChannel;o.port1.postMessage(a,[a]),o.port1.close(),o.port2.close(),r=!0===a.locked}catch(s){}return i}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAFETY_ELM327=t.SAFETY_ALLOUTPUT=t.SAFETY_TOYOTA_NOLIMITS=t.SAFETY_HONDA_BOSCH=t.SAFETY_TOYOTA=t.SAFETY_HONDA=t.SAFETY_NOOUTPUT=void 0,t.default=function Panda(e){e=e||{};var t=new r.default(e,navigator.usb);return e.device=t,new i.default(e)};var r=_interopRequireDefault(n(343)),i=_interopRequireDefault(n(375));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.SAFETY_NOOUTPUT=0,t.SAFETY_HONDA=1,t.SAFETY_TOYOTA=2,t.SAFETY_HONDA_BOSCH=4,t.SAFETY_TOYOTA_NOLIMITS=4918,t.SAFETY_ALLOUTPUT=4919,t.SAFETY_ELM327=58151},function(e,t,n){"use strict";e.exports=function rightPad(e,t,n){if("string"!==typeof e)throw new Error("The string parameter must be a string.");if(e.length<1)throw new Error("The string parameter must be 1 character or longer.");if("number"!==typeof t)throw new Error("The length parameter must be a number.");if("string"!==typeof n&&n)throw new Error("The character parameter must be a string.");var r=-1;for(t-=e.length,n||0===n||(n=" ");++r<t;)e+=n;return e}},,function(e,t,n){var r,i,a;i=[e,n(382),n(384),n(385)],void 0===(a="function"===typeof(r=function(e,t,n,r){"use strict";var i=_interopRequireDefault(t),a=_interopRequireDefault(n),o=_interopRequireDefault(r);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),l=function(e){function Clipboard(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Clipboard);var n=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Clipboard.__proto__||Object.getPrototypeOf(Clipboard)).call(this));return n.resolveOptions(t),n.listenClick(e),n}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Clipboard,e),u(Clipboard,[{key:"resolveOptions",value:function resolveOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof e.action?e.action:this.defaultAction,this.target="function"===typeof e.target?e.target:this.defaultTarget,this.text="function"===typeof e.text?e.text:this.defaultText,this.container="object"===s(e.container)?e.container:document.body}},{key:"listenClick",value:function listenClick(e){var t=this;this.listener=(0,o.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function onClick(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function defaultAction(e){return getAttributeValue("action",e)}},{key:"defaultTarget",value:function defaultTarget(e){var t=getAttributeValue("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function defaultText(e){return getAttributeValue("text",e)}},{key:"destroy",value:function destroy(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function isSupported(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"===typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}]),Clipboard}(a.default);function getAttributeValue(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=l})?r.apply(t,i):r)||(e.exports=a)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(121),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(185));t.default=(0,i.default)(!0,r.defaultSelectorHandlers),e.exports=t.default},function(e,t,n){e.exports=function(){"use strict";return function(e){function toSheet(t){if(t)try{e(t+"}")}catch(n){}}return function ruleSheet(t,n,r,i,a,o,s,u,l){switch(t){case 1:0===l&&64===n.charCodeAt(0)&&e(n);break;case 2:if(0===u)return n+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(r[0]+n),"";default:return n+"/*|*/"}case-2:n.split("/*|*/}").forEach(toSheet)}}}}()},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!==typeof Map)return Map;function getIndex(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function class_1(){this.__entries__=[]}return Object.defineProperty(class_1.prototype,"size",{get:function get(){return this.__entries__.length},enumerable:!0,configurable:!0}),class_1.prototype.get=function(e){var t=getIndex(this.__entries__,e),n=this.__entries__[t];return n&&n[1]},class_1.prototype.set=function(e,t){var n=getIndex(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])},class_1.prototype.delete=function(e){var t=this.__entries__,n=getIndex(t,e);~n&&t.splice(n,1)},class_1.prototype.has=function(e){return!!~getIndex(this.__entries__,e)},class_1.prototype.clear=function(){this.__entries__.splice(0)},class_1.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},class_1}()}(),r="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,i="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},o=2;var s=20,u=["top","right","bottom","left","width","height","size","weight"],l="undefined"!==typeof MutationObserver,c=function(){function ResizeObserverController(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function throttle(e,t){var n=!1,r=!1,i=0;function resolvePending(){n&&(n=!1,e()),r&&proxy()}function timeoutCallback(){a(resolvePending)}function proxy(){var e=Date.now();if(n){if(e-i<o)return;r=!0}else n=!0,r=!1,setTimeout(timeoutCallback,t);i=e}return proxy}(this.refresh.bind(this),s)}return ResizeObserverController.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},ResizeObserverController.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},ResizeObserverController.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},ResizeObserverController.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},ResizeObserverController.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},ResizeObserverController.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},ResizeObserverController.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;u.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},ResizeObserverController.getInstance=function(){return this.instance_||(this.instance_=new ResizeObserverController),this.instance_},ResizeObserverController.instance_=null,ResizeObserverController}(),f=function defineConfigurable(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},d=function getWindowOf(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},h=createRectInit(0,0,0,0);function toFloat(e){return parseFloat(e)||0}function getBordersSize(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+toFloat(e["border-"+n+"-width"])}),0)}function getHTMLElementContentRect(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=d(e).getComputedStyle(e),i=function getPaddings(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=toFloat(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,s=toFloat(r.width),u=toFloat(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=getBordersSize(r,"left","right")+a),Math.round(u+o)!==n&&(u-=getBordersSize(r,"top","bottom")+o)),!function isDocumentElement(e){return e===d(e).document.documentElement}(e)){var l=Math.round(s+a)-t,c=Math.round(u+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return createRectInit(i.left,i.top,s,u)}var p="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function getContentRect(e){return r?p(e)?function getSVGContentRect(e){var t=e.getBBox();return createRectInit(0,0,t.width,t.height)}(e):getHTMLElementContentRect(e):h}function createRectInit(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function ResizeObservation(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=e}return ResizeObservation.prototype.isActive=function(){var e=getContentRect(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},ResizeObservation.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},ResizeObservation}(),m=function(){return function ResizeObserverEntry(e,t){var n=function createReadOnlyRect(e){var t=e.x,n=e.y,r=e.width,i=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return f(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);f(this,{target:e,contentRect:n})}}(),v=function(){function ResizeObserverSPI(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return ResizeObserverSPI.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},ResizeObserverSPI.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},ResizeObserverSPI.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},ResizeObserverSPI.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},ResizeObserverSPI.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new m(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)},ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0},ResizeObserverSPI}(),y="undefined"!==typeof WeakMap?new WeakMap:new n,_=function(){return function ResizeObserver(e){if(!(this instanceof ResizeObserver))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=c.getInstance(),n=new v(e,t,this);y.set(this,n)}}();["observe","unobserve","disconnect"].forEach((function(e){_.prototype[e]=function(){var t;return(t=y.get(this))[e].apply(t,arguments)}}));var b="undefined"!==typeof i.ResizeObserver?i.ResizeObserver:_;t.a=b}).call(this,n(19))},function(e){e.exports=JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"3.4.0","collaborators":["Kanit Wongsuphasawat <kanitw@gmail.com> (http://kanitw.yellowpigz.com)","Dominik Moritz <domoritz@cs.washington.edu> (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com/)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"scripts":{"build":"npm run build:only","build:only":"npm run tsc:src && rollup -c","postbuild":"terser build/vega-lite.js -cm --source-map content=build/vega-lite.js.map,filename=build/vega-lite.min.js.map -o build/vega-lite.min.js && npm run schema","build:examples":"npm run build:only","postbuild:examples":"npm run data && TZ=America/Los_Angeles scripts/build-examples.sh","build:examples-full":"npm run build:only","postbuild:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"npm run data && bundle exec jekyll build -q && scripts/generate-toc","build:site":"npm run tsc:site && rollup -c site/rollup.config.js","build:versions":"scripts/update-version.sh","clean":"rm -rf build && rm -f examples/compiled/*.png && find site/examples ! -name \'index.md\' -type f -delete","data":"rsync -r node_modules/vega-datasets/data/* data","deploy":"scripts/deploy.sh","deploy:gh":"scripts/deploy-gh.sh","deploy:schema":"scripts/deploy-schema.sh","schema":"mkdir -p build && ts-json-schema-generator -c -f tsconfig.json -t TopLevelSpec > build/vega-lite-schema.json && npm run renameschema && cp build/vega-lite-schema.json _data/","renameschema":"scripts/rename-schema.sh","presite":"npm run data && npm run build:site && npm run build:toc && npm run build:versions && scripts/create-example-pages","site":"bundle exec jekyll serve --incremental","tsc:src":"tsc -b src/tsconfig.src.json","tsc:site":"tsc -b site/tsconfig.site.json","prettierbase":"prettier \'{src,test,test-runtime,site,typings}/**/*.{md,css}\'","eslintbase":"eslint \'{src,test,test-runtime,site,typings}/**/*.{ts,js}\'","format":"npm run eslintbase -- --fix && npm run prettierbase -- --write","lint":"npm run eslintbase && npm run prettierbase -- --check","test":"jest test/ && npm run lint && npm run schema && jest examples/ && npm run test:runtime","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/","test:runtime:generate":"rm -Rf test-runtime/resources && VL_GENERATE_TESTS=true npm run test:runtime","watch:build":"npm run build:only && concurrently --kill-others -n Typescript,Rollup \'npm run tsc:src -- -w\' \'rollup -c -w\'","watch:site":"concurrently --kill-others -n Typescript,Rollup \'npm run tsc:site -- -w\' \'rollup -c site/rollup.config.js -w\'","watch:test":"jest --watch"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@types/chai":"^4.1.7","@types/d3":"^5.7.2","@types/highlight.js":"^9.12.3","@types/jest":"^24.0.15","@types/jest-environment-puppeteer":"^4.0.0","@types/mkdirp":"^0.5.2","@types/node":"^12.6.8","@types/puppeteer":"^1.12.4","@typescript-eslint/eslint-plugin":"^1.13.0","@typescript-eslint/parser":"^1.13.0","ajv":"^6.10.2","chai":"^4.2.0","cheerio":"^1.0.0-rc.2","codecov":"^3.5.0","concurrently":"^4.1.1","d3":"^5.9.7","eslint":"^5.16.0","eslint-config-prettier":"^6.0.0","eslint-plugin-prettier":"^3.1.0","highlight.js":"^9.15.8","http-server":"^0.11.1","jest":"^24.8.0","jest-puppeteer":"^4.3.0","mkdirp":"^0.5.1","prettier":"^1.18.2","puppeteer":"^1.19.0","rollup":"^1.17.0","rollup-plugin-commonjs":"^10.0.1","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-sourcemaps":"^0.4.2","rollup-plugin-terser":"^5.1.1","svg2png-many":"^0.0.7","terser":"^4.1.2","ts-jest":"^24.0.2","ts-json-schema-generator":"^0.52.14","typescript":"~3.4.5","vega-cli":"^5.4.0","vega-datasets":"^1.25.0","vega-embed":"^4.2.1","vega-tooltip":"^0.18.1","yaml-front-matter":"^4.0.0"},"dependencies":{"@types/clone":"~0.1.30","@types/fast-json-stable-stringify":"^2.0.0","clone":"~2.1.2","fast-deep-equal":"~2.0.1","fast-json-stable-stringify":"~2.0.0","json-stringify-pretty-compact":"~2.0.0","tslib":"~1.10.0","vega-event-selector":"~2.0.0","vega-expression":"~2.6.0","vega-typings":"0.7.2","vega-util":"~1.10.0","yargs":"~13.3.0"},"peerDependencies":{"vega":"^5.4.0"},"jest":{"preset":"jest-puppeteer","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false}}')},function(e,t,n){(function(t){var n=function(){"use strict";function _instanceof(e,t){return null!=t&&e instanceof t}var e,n,r;try{e=Map}catch(i){e=function nativeMap(){}}try{n=Set}catch(i){n=function nativeSet(){}}try{r=Promise}catch(i){r=function nativePromise(){}}function clone(i,a,o,s,u){"object"===typeof a&&(o=a.depth,s=a.prototype,u=a.includeNonEnumerable,a=a.circular);var l=[],c=[],f="undefined"!=typeof t;return"undefined"==typeof a&&(a=!0),"undefined"==typeof o&&(o=1/0),function _clone(i,o){if(null===i)return null;if(0===o)return i;var d,h;if("object"!=typeof i)return i;if(_instanceof(i,e))d=new e;else if(_instanceof(i,n))d=new n;else if(_instanceof(i,r))d=new r((function(e,t){i.then((function(t){e(_clone(t,o-1))}),(function(e){t(_clone(e,o-1))}))}));else if(clone.__isArray(i))d=[];else if(clone.__isRegExp(i))d=new RegExp(i.source,__getRegExpFlags(i)),i.lastIndex&&(d.lastIndex=i.lastIndex);else if(clone.__isDate(i))d=new Date(i.getTime());else{if(f&&t.isBuffer(i))return d=t.allocUnsafe?t.allocUnsafe(i.length):new t(i.length),i.copy(d),d;_instanceof(i,Error)?d=Object.create(i):"undefined"==typeof s?(h=Object.getPrototypeOf(i),d=Object.create(h)):(d=Object.create(s),h=s)}if(a){var p=l.indexOf(i);if(-1!=p)return c[p];l.push(i),c.push(d)}for(var g in _instanceof(i,e)&&i.forEach((function(e,t){var n=_clone(t,o-1),r=_clone(e,o-1);d.set(n,r)})),_instanceof(i,n)&&i.forEach((function(e){var t=_clone(e,o-1);d.add(t)})),i){var m;h&&(m=Object.getOwnPropertyDescriptor(h,g)),m&&null==m.set||(d[g]=_clone(i[g],o-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(i);for(g=0;g<v.length;g++){var y=v[g];(!(b=Object.getOwnPropertyDescriptor(i,y))||b.enumerable||u)&&(d[y]=_clone(i[y],o-1),b.enumerable||Object.defineProperty(d,y,{enumerable:!1}))}}if(u){var _=Object.getOwnPropertyNames(i);for(g=0;g<_.length;g++){var b,x=_[g];(b=Object.getOwnPropertyDescriptor(i,x))&&b.enumerable||(d[x]=_clone(i[x],o-1),Object.defineProperty(d,x,{enumerable:!1}))}}return d}(i,o)}function __objToStr(e){return Object.prototype.toString.call(e)}function __getRegExpFlags(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return clone.clonePrototype=function clonePrototype(e){if(null===e)return null;var t=function c(){};return t.prototype=e,new t},clone.__objToStr=__objToStr,clone.__isDate=function __isDate(e){return"object"===typeof e&&"[object Date]"===__objToStr(e)},clone.__isArray=function __isArray(e){return"object"===typeof e&&"[object Array]"===__objToStr(e)},clone.__isRegExp=function __isRegExp(e){return"object"===typeof e&&"[object RegExp]"===__objToStr(e)},clone.__getRegExpFlags=__getRegExpFlags,clone}();e.exports&&(e.exports=n)}).call(this,n(20).Buffer)},function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,o,s,u=r(e),l=r(t);if(u&&l){if((o=e.length)!=t.length)return!1;for(n=o;0!==n--;)if(!equal(e[n],t[n]))return!1;return!0}if(u!=l)return!1;var c=e instanceof Date,f=t instanceof Date;if(c!=f)return!1;if(c&&f)return e.getTime()==t.getTime();var d=e instanceof RegExp,h=t instanceof RegExp;if(d!=h)return!1;if(d&&h)return e.toString()==t.toString();var p=i(e);if((o=p.length)!==i(t).length)return!1;for(n=o;0!==n--;)if(!a.call(t,p[n]))return!1;for(n=o;0!==n--;)if(!equal(e[s=p[n]],t[s]))return!1;return!0}return e!==e&&t!==t}},function(e){e.exports=JSON.parse('{"name":"vega-themes","version":"2.4.0","description":"Themes for stylized Vega and Vega-Lite visualizations.","keywords":["vega","vega-lite","themes","style"],"license":"BSD-3-Clause","author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"contributors":[{"name":"Emily Gu","url":"https://github.com/emilygu"},{"name":"Arvind Satyanarayan","url":"http://arvindsatya.com"},{"name":"Jeffrey Heer","url":"http://idl.cs.washington.edu"},{"name":"Dominik Moritz","url":"https://www.domoritz.de"}],"main":"build/vega-themes.js","module":"build/src/index.js","unpkg":"build/vega-themes.min.js","jsdelivr":"build/vega-themes.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-themes.git"},"scripts":{"prepare":"beemo create-config --silent","clean":"rm -rf build examples/build","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'src/**/*.ts\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","prebuild":"mkdir -p build","build":"tsc && rollup -c","postbuild":"terser build/vega-themes.js -cm > build/vega-themes.min.js","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples","prepublishOnly":"yarn clean && yarn build","preversion":"yarn lint","serve":"browser-sync start -s -f build examples --serveStatic examples","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'yarn serve\' \'tsc -w\' \'rollup -c -w\'"},"devDependencies":{"browser-sync":"^2.26.7","concurrently":"^4.1.2","gh-pages":"^2.1.1","rollup":"^1.20.3","rollup-plugin-json":"^4.0.0","terser":"^4.2.1","typescript":"~3.5.3","vega":"^5.5.2","vega-lite":"^4.0.0-beta.1","vega-lite-dev-config":"^0.2.5"},"peerDependencies":{"vega":"*","vega-lite":"*"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]}}')},function(e){e.exports=JSON.parse('{"name":"vega-tooltip","version":"0.18.1","description":"A tooltip plugin for Vega-Lite and Vega visualizations.","main":"build/vega-tooltip.js","module":"build/src/index.js","unpkg":"build/vega-tooltip.min.js","jsdelivr":"build/vega-tooltip.min.js","typings":"build/src/index.d.ts","repository":{"type":"git","url":"https://github.com/vega/vega-tooltip.git"},"keywords":["vega-lite","vega","tooltip"],"author":{"name":"UW Interactive Data Lab","url":"https://idl.cs.washington.edu"},"collaborators":["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-tooltip/issues"},"homepage":"https://github.com/vega/vega-tooltip#readme","scripts":{"prepare":"beemo create-config --silent","build":"rollup -c","clean":"rm -rf build examples/data && rm -f src/style.ts && mkdir build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean","prettierbase":"beemo prettier \'examples/*.{html,scss,css}\'","eslintbase":"beemo eslint \'{src,test,typings}/**/*.ts\' \'*.js\'","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","postbuild":"terser build/vega-tooltip.js -c -m -o build/vega-tooltip.min.js","prebuild":"yarn clean && yarn copy:data && ./build-style.sh && tsc","prepublishOnly":"yarn build","preversion":"yarn lint","start":"yarn build && concurrently --kill-others -n Server,Typescript,Rollup \'browser-sync start -s -f build examples --serveStatic examples\' \'tsc -w\' \'rollup -c -w\'","pretest":"./build-style.sh","test":"jest"},"devDependencies":{"@types/jest":"^24.0.15","@types/node":"^12.6.8","browser-sync":"^2.26.7","concurrently":"^4.1.1","gh-pages":"^2.0.1","jest":"^24.8.0","node-sass":"^4.12.0","path":"^0.12.7","rollup":"^1.17.0","rollup-plugin-commonjs":"^10.0.1","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","terser":"^4.1.2","ts-jest":"^24.0.2","typescript":"^3.5.3","vega-datasets":"^1.25.0","vega-lite-dev-config":"^0.1.16","vega-typings":"^0.7.2"},"dependencies":{"vega-util":"^1.10.0"},"beemo":{"module":"vega-lite-dev-config","drivers":["prettier","eslint"]},"jest":{"testURL":"http://localhost/","transform":{"^.+\\\\.tsx?$":"ts-jest"},"testRegex":"(/__tests__/.*|(\\\\.|/)(test|spec))\\\\.(jsx?|tsx?)$","moduleFileExtensions":["ts","tsx","js","jsx","json","node"],"testPathIgnorePatterns":["node_modules","<rootDir>/build","src"]}}')},function(e,t,n){"undefined"!==typeof window&&function webpackUniversalModuleDefinition(t,n){e.exports=n()}(0,(function(){return function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/dist/",__webpack_require__(__webpack_require__.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function node_modulesEventemitter3IndexJs(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function addListener(e,t,n,r,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var o=new EE(n,r||e,a),s=i?i+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function clearEvent(e,t){0===--e._eventsCount?e._events=new Events:delete e._events[t]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(i=!1)),EventEmitter.prototype.eventNames=function eventNames(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function listeners(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},EventEmitter.prototype.listenerCount=function listenerCount(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},EventEmitter.prototype.emit=function emit(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,a),!0;case 6:return c.fn.call(c.context,t,n,r,a,o),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},EventEmitter.prototype.on=function on(e,t,n){return addListener(this,e,t,n,!1)},EventEmitter.prototype.once=function once(e,t,n){return addListener(this,e,t,n,!0)},EventEmitter.prototype.removeListener=function removeListener(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return clearEvent(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||clearEvent(this,a);else{for(var s=0,u=[],l=o.length;s<l;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:clearEvent(this,a)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t;return e?(t=i?i+e:e,this._events[t]&&clearEvent(this,t)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=i,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter},"./node_modules/url-toolkit/src/url-toolkit.js":function node_modulesUrlToolkitSrcUrlToolkitJs(e,t,n){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function buildAbsoluteURL(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=r.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,f=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(f)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function parseURL(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function normalizePath(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function buildURLFromParts(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},"./node_modules/webworkify-webpack/index.js":function node_modulesWebworkifyWebpackIndexJs(e,t,n){function webpackBootstrapFunc(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/",__webpack_require__.oe=function(e){throw console.error(e),e};var n=__webpack_require__(__webpack_require__.s=ENTRY_MODULE);return n.default||n}var r="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+r+").*?\\)";function quoteRegExp(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function getModuleDependencies(e,t,a){var o={};o[a]=[];var s=t.toString(),u=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return o;for(var l,c=u[1],f=new RegExp("(\\\\n|\\W)"+quoteRegExp(c)+i,"g");l=f.exec(s);)"dll-reference"!==l[3]&&o[a].push(l[3]);for(f=new RegExp("\\("+quoteRegExp(c)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+i,"g");l=f.exec(s);)e[l[2]]||(o[a].push(l[1]),e[l[2]]=n(l[1]).m),o[l[2]]=o[l[2]]||[],o[l[2]].push(l[4]);for(var d,h=Object.keys(o),p=0;p<h.length;p++)for(var g=0;g<o[h[p]].length;g++)d=o[h[p]][g],isNaN(1*d)||(o[h[p]][g]=1*o[h[p]][g]);return o}function hasValuesInQueues(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var r={main:n.m},i=t.all?{main:Object.keys(r.main)}:function getRequiredModules(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};hasValuesInQueues(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s].pop();if(i[s]=i[s]||{},!i[s][u]&&e[s][u]){i[s][u]=!0,r[s]=r[s]||[],r[s].push(u);for(var l=getModuleDependencies(e,e[s][u],s),c=Object.keys(l),f=0;f<c.length;f++)n[c[f]]=n[c[f]]||[],n[c[f]]=n[c[f]].concat(l[c[f]])}}return r}(r,e),a="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+webpackBootstrapFunc.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+r[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+webpackBootstrapFunc.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var o=new window.Blob([a],{type:"text/javascript"});if(t.bare)return o;var s=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),u=new window.Worker(s);return u.objectURL=s,u}},"./src/crypt/decrypter.js":function srcCryptDecrypterJs(e,t,n){"use strict";var r=function(){function AESCrypto(e,t){this.subtle=e,this.aesIV=t}return AESCrypto.prototype.decrypt=function decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},AESCrypto}(),i=function(){function FastAESKey(e,t){this.subtle=e,this.key=t}return FastAESKey.prototype.expandKey=function expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},FastAESKey}();var a=function(){function AESDecryptor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=AESDecryptor.prototype;return e.uint8ArrayToUint32Array_=function uint8ArrayToUint32Array_(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.initTable=function initTable(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],f=s[3],d=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[h]=m,t[m]=h;var v=d[h],y=d[v],_=d[y],b=257*d[m]^16843008*m;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*_^65537*y^257*v^16843008*h,u[m]=b<<24|b>>>8,l[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,f[m]=b,h?(h=v^d[d[d[_^v]]],p^=d[d[p]]):h=p=1}},e.expandKey=function expandKey(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),f=this.invKeySchedule=new Uint32Array(l),d=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=t[a]:(u=s,a%i===0?(u=d[(u=u<<8|u>>>24)>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u],u^=h[a/i|0]<<24):i>6&&a%i===4&&(u=d[u>>>24]<<24|d[u>>>16&255]<<16|d[u>>>8&255]<<8|d[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],f[o]=o<4||a<=4?u:g[d[u>>>24]]^m[d[u>>>16&255]]^v[d[u>>>8&255]]^y[d[255&u]],f[o]=f[o]>>>0}},e.networkToHostOrderSwap=function networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.decrypt=function decrypt(e,t,n,r){for(var i,a,o,s,u,l,c,f,d,h,p,g,m,v,y=this.keySize+6,_=this.invKeySchedule,b=this.invSBox,x=this.invSubMix,w=x[0],k=x[1],S=x[2],E=x[3],T=this.uint8ArrayToUint32Array_(n),C=T[0],O=T[1],A=T[2],R=T[3],D=new Int32Array(e),P=new Int32Array(D.length),M=this.networkToHostOrderSwap;t<D.length;){for(d=M(D[t]),h=M(D[t+1]),p=M(D[t+2]),g=M(D[t+3]),u=d^_[0],l=g^_[1],c=p^_[2],f=h^_[3],m=4,v=1;v<y;v++)i=w[u>>>24]^k[l>>16&255]^S[c>>8&255]^E[255&f]^_[m],a=w[l>>>24]^k[c>>16&255]^S[f>>8&255]^E[255&u]^_[m+1],o=w[c>>>24]^k[f>>16&255]^S[u>>8&255]^E[255&l]^_[m+2],s=w[f>>>24]^k[u>>16&255]^S[l>>8&255]^E[255&c]^_[m+3],u=i,l=a,c=o,f=s,m+=4;i=b[u>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&f]^_[m],a=b[l>>>24]<<24^b[c>>16&255]<<16^b[f>>8&255]<<8^b[255&u]^_[m+1],o=b[c>>>24]<<24^b[f>>16&255]<<16^b[u>>8&255]<<8^b[255&l]^_[m+2],s=b[f>>>24]<<24^b[u>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^_[m+3],m+=3,P[t]=M(i^C),P[t+1]=M(s^O),P[t+2]=M(o^A),P[t+3]=M(a^R),C=d,O=h,A=p,R=g,t+=4}return r?function removePadding(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}(P.buffer):P.buffer},e.destroy=function destroy(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},AESDecryptor}(),o=n("./src/errors.js"),s=n("./src/utils/logger.js"),u=n("./src/events.js"),l=n("./src/utils/get-self-scope.js"),c=Object(l.getSelfScope)(),f=function(){function Decrypter(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(o){}this.disableWebCrypto=!this.subtle}var e=Decrypter.prototype;return e.isSync=function isSync(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function decrypt(e,t,n,o){var u=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var l=this.decryptor;l||(this.decryptor=l=new a),l.expandKey(t),o(l.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i(c,t)),this.fastAesKey.expandKey().then((function(i){new r(c,n).decrypt(e,i).catch((function(r){u.onWebCryptoError(r,e,t,n,o)})).then((function(e){o(e)}))})).catch((function(r){u.onWebCryptoError(r,e,t,n,o)}))}},e.onWebCryptoError=function onWebCryptoError(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.destroy=function destroy(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},Decrypter}();t.default=f},"./src/demux/demuxer-inline.js":function srcDemuxDemuxerInlineJs(e,t,n){"use strict";var r=n("./src/events.js"),i=n("./src/errors.js"),a=n("./src/crypt/decrypter.js"),o=n("./src/polyfills/number-isFinite.js"),s=n("./src/utils/logger.js"),u=n("./src/utils/get-self-scope.js");function isHeaderPattern(e,t){return 255===e[t]&&240===(246&e[t+1])}function getHeaderLength(e,t){return 1&e[t+1]?7:9}function getFullFrameLength(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function isHeader(e,t){return!!(t+1<e.length&&isHeaderPattern(e,t))}function adts_probe(e,t){if(isHeader(e,t)){var n=getHeaderLength(e,t);t+5<e.length&&(n=getFullFrameLength(e,t));var r=t+n;if(r===e.length||r+1<e.length&&isHeaderPattern(e,r))return!0}return!1}function initTrackConfig(e,t,n,a,o){if(!e.samplerate){var u=function getAudioConfig(e,t,n,a){var o,u,l,c,f,d=navigator.userAgent.toLowerCase(),h=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[n+2])>>>6),!((u=(60&t[n+2])>>>2)>p.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+u+"["+p[u]+"Hz],channelConfig:"+c),/firefox/i.test(d)?u>=6?(o=5,f=new Array(4),l=u-3):(o=2,f=new Array(2),l=u):-1!==d.indexOf("android")?(o=2,f=new Array(2),l=u):(o=5,f=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&u>=6?l=u-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(u>=6&&1===c||/vivaldi/i.test(d))||!a&&1===c)&&(o=2,f=new Array(2)),l=u)),f[0]=o<<3,f[0]|=(14&u)>>1,f[1]|=(1&u)<<7,f[1]|=c<<3,5===o&&(f[1]|=(14&l)>>1,f[2]=(1&l)<<7,f[2]|=8,f[3]=0),{config:f,samplerate:p[u],channelCount:c,codec:"mp4a.40."+o,manifestCodec:h};e.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}(t,n,a,o);e.config=u.config,e.samplerate=u.samplerate,e.channelCount=u.channelCount,e.codec=u.codec,e.manifestCodec=u.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+u.samplerate+",nb channel:"+u.channelCount)}}function getFrameDuration(e){return 9216e4/e}function appendFrame(e,t,n,r,i){var a=function parseFrameHeader(e,t,n,r,i){var a,o,s=e.length;if(a=getHeaderLength(e,t),o=getFullFrameLength(e,t),(o-=a)>0&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(t,n,r,i,getFrameDuration(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,u=a.frameLength,l={unit:t.subarray(n+s,n+s+u),pts:o,dts:o};return e.samples.push(l),{sample:l,length:u+s}}}var l,c=n("./src/demux/id3.js"),f=function(){function AACDemuxer(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var e=AACDemuxer.prototype;return e.resetInitSegment=function resetInitSegment(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function resetTimeStamp(){},AACDemuxer.probe=function probe(e){if(!e)return!1;for(var t=(c.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(adts_probe(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},e.append=function append(e,t,n,r){for(var i=this._audioTrack,a=c.default.getID3Data(e,0)||[],u=c.default.getTimeStamp(a),l=Object(o.isFiniteNumber)(u)?90*u:9e4*t,f=0,d=l,h=e.length,p=a.length,g=[{pts:d,dts:d,data:a}];p<h-1;)if(isHeader(e,p)&&p+5<h){initTrackConfig(i,this.observer,e,p,i.manifestCodec);var m=appendFrame(i,e,p,l,f);if(!m){s.logger.log("Unable to parse AAC frame");break}p+=m.length,d=m.sample.pts,f++}else c.default.isHeader(e,p)?(a=c.default.getID3Data(e,p),g.push({pts:d,dts:d,data:a}),p+=a.length):p++;this.remuxer.remux(i,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},t,n,r)},e.destroy=function destroy(){},AACDemuxer}(),d=n("./src/demux/mp4demuxer.js"),h={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function appendFrame(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function parseHeader(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==a){var s=3===n?3-r:3===r?3:4,u=1e3*h.BitratesMap[14*s+i-1],l=3===n?0:2===n?1:2,c=h.SamplingRateMap[3*l+a],f=e[t+3]>>6===3?1:2,d=h.SamplesCoefficients[n][r],p=h.BytesInSlot[r],g=8*d*p;return{sampleRate:c,channelCount:f,frameLength:parseInt(d*u/c+o,10)*p,samplesPerFrame:g}}},isHeaderPattern:function isHeaderPattern(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])},isHeader:function isHeader(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function probe(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},p=h,g=function(){function ExpGolomb(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var e=ExpGolomb.prototype;return e.loadWord=function loadWord(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function skipBits(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.readBits=function readBits(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.skipLZ=function skipLZ(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.skipUEG=function skipUEG(){this.skipBits(1+this.skipLZ())},e.skipEG=function skipEG(){this.skipBits(1+this.skipLZ())},e.readUEG=function readUEG(){var e=this.skipLZ();return this.readBits(e+1)-1},e.readEG=function readEG(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.readBoolean=function readBoolean(){return 1===this.readBits(1)},e.readUByte=function readUByte(){return this.readBits(8)},e.readUShort=function readUShort(){return this.readBits(16)},e.readUInt=function readUInt(){return this.readBits(32)},e.skipScalingList=function skipScalingList(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.readSPS=function readSPS(){var e,t,n,r,i,a,o,s=0,u=0,l=0,c=0,f=this.readUByte.bind(this),d=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(f(),e=f(),d(5),g(3),f(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=h();if(3===_&&g(1),v(),v(),g(1),p())for(a=3!==_?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var b=h();if(0===b)h();else if(1===b)for(g(1),m(),m(),t=h(),o=0;o<t;o++)m();v(),g(1),n=h(),r=h(),0===(i=d(1))&&g(1),g(1),p()&&(s=h(),u=h(),l=h(),c=h());var x=[1,1];if(p()&&p())switch(f()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(n+1)-2*s-2*u),height:(2-i)*(r+1)*16-(i?2:4)*(l+c),pixelRatio:x}},e.readSliceType=function readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()},ExpGolomb}(),m=function(){function SampleAesDecrypter(e,t,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.default(e,t,{removePKCS7Padding:!1})}var e=SampleAesDecrypter.prototype;return e.decryptBuffer=function decryptBuffer(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.decryptAacSample=function decryptAacSample(e,t,n,r){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(e,t+1,n)}))},e.decryptAacSamples=function decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},e.getAvcEncryptedData=function getAvcEncryptedData(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function getAvcDecryptedUnit(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},e.decryptAvcSample=function decryptAvcSample(e,t,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,(function(s){i.data=u.getAvcDecryptedUnit(o,s),a||u.decryptAvcSamples(e,t,n+1,r)}))},e.decryptAvcSamples=function decryptAvcSamples(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},SampleAesDecrypter}(),v={video:1,audio:2,id3:3,text:4},y=function(){function TSDemuxer(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}var e=TSDemuxer.prototype;return e.setDecryptData=function setDecryptData(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new m(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},TSDemuxer.probe=function probe(e){var t=TSDemuxer._syncOffset(e);return!(t<0)&&(t&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+t+", junk ahead ?"),!0)},TSDemuxer._syncOffset=function _syncOffset(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},TSDemuxer.createTrack=function createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:v[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.resetInitSegment=function resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=TSDemuxer.createTrack("video",r),this._audioTrack=TSDemuxer.createTrack("audio",r),this._id3Track=TSDemuxer.createTrack("id3",r),this._txtTrack=TSDemuxer.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r},e.resetTimeStamp=function resetTimeStamp(){},e.append=function append(e,t,n,a){var o,u,l,c,f,d=e.length,h=!1;this.contiguous=n;var p=this.pmtParsed,g=this._avcTrack,m=this._audioTrack,v=this._id3Track,y=g.pid,_=m.pid,b=v.pid,x=this._pmtId,w=g.pesData,k=m.pesData,S=v.pesData,E=this._parsePAT,T=this._parsePMT,C=this._parsePES,O=this._parseAVCPES.bind(this),A=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),P=TSDemuxer._syncOffset(e);for(d-=(d+P)%188,o=P;o<d;o+=188)if(71===e[o]){if(u=!!(64&e[o+1]),l=((31&e[o+1])<<8)+e[o+2],(48&e[o+3])>>4>1){if((c=o+5+e[o+4])===o+188)continue}else c=o+4;switch(l){case y:u&&(w&&(f=C(w))&&void 0!==f.pts&&O(f,!1),w={data:[],size:0}),w&&(w.data.push(e.subarray(c,o+188)),w.size+=o+188-c);break;case _:u&&(k&&(f=C(k))&&void 0!==f.pts&&(m.isAAC?A(f):R(f)),k={data:[],size:0}),k&&(k.data.push(e.subarray(c,o+188)),k.size+=o+188-c);break;case b:u&&(S&&(f=C(S))&&void 0!==f.pts&&D(f),S={data:[],size:0}),S&&(S.data.push(e.subarray(c,o+188)),S.size+=o+188-c);break;case 0:u&&(c+=e[c]+1),x=this._pmtId=E(e,c);break;case x:u&&(c+=e[c]+1);var M=T(e,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=M.avc)>0&&(g.pid=y),(_=M.audio)>0&&(m.pid=_,m.isAAC=M.isAAC),(b=M.id3)>0&&(v.pid=b),h&&!p&&(s.logger.log("reparse from beginning"),h=!1,o=P-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(f=C(w))&&void 0!==f.pts?(O(f,!0),g.pesData=null):g.pesData=w,k&&(f=C(k))&&void 0!==f.pts?(m.isAAC?A(f):R(f),m.pesData=null):(k&&k.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=k),S&&(f=C(S))&&void 0!==f.pts?(D(f),v.pesData=null):v.pesData=S,null==this.sampleAes?this.remuxer.remux(m,g,v,this._txtTrack,t,n,a):this.decryptAndRemux(m,g,v,this._txtTrack,t,n,a)},e.decryptAndRemux=function decryptAndRemux(e,t,n,r,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,n,r,i,a,o)}))}else this.decryptAndRemuxAvc(e,t,n,r,i,a,o)},e.decryptAndRemuxAvc=function decryptAndRemuxAvc(e,t,n,r,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,n,r,i,a,o)}))}else this.remuxer.remux(e,t,n,r,i,a,o)},e.destroy=function destroy(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function _parsePAT(e,t){return(31&e[t+10])<<8|e[t+11]},e._parsePMT=function _parsePMT(e,t,n,r){var i,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){s.logger.log("unkown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){s.logger.log("unkown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},e._parsePES=function _parsePES(e){var t,n,r,i,a,o,u,l,c=0,f=e.data;if(!e||0===e.size)return null;for(;f[0].length<19&&f.length>1;){var d=new Uint8Array(f[0].length+f[1].length);d.set(f[0]),d.set(f[1],f[0].length),f[0]=d,f.splice(1,1)}if(1===((t=f[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&((o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(o-=8589934592),64&n?((u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(u-=8589934592),o-u>54e5&&(s.logger.warn(Math.round((o-u)/9e4)+"s delta between PTS and DTS, align them"),o=u)):u=o),l=(i=t[8])+9,e.size-=l,a=new Uint8Array(e.size);for(var h=0,p=f.length;h<p;h++){var g=(t=f[h]).byteLength;if(l){if(l>g){l-=g;continue}t=t.subarray(l),g-=l,l=0}a.set(t,c),c+=g}return r&&(r-=i+3),{data:a,pts:o,dts:u,len:r}}return null},e.pushAccesUnit=function pushAccesUnit(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e._parseAVCPES=function _parseAVCPES(e,t){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),u=this.avcSample,l=!1,c=this.pushAccesUnit.bind(this),f=function createAVCSample(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,u&&s.length&&!o.audFound&&(c(u,o),u=this.avcSample=f(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:r=!0,u||(u=a.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var s=t.data;if(l&&s.length>4){var d=new g(s).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:r=!0,u||(u=a.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(n=new g(a.discardEPB(t.data))).readUByte();for(var h=0,p=0,m=!1,v=0;!m&&n.bytesAvailable>1;){h=0;do{h+=v=n.readUByte()}while(255===v);p=0;do{p+=v=n.readUByte()}while(255===v);if(4===h&&0!==n.bytesAvailable){if(m=!0,181===n.readUByte())if(49===n.readUShort())if(1195456820===n.readUInt())if(3===n.readUByte()){var y=n.readUByte(),_=31&y,b=[y,n.readUByte()];for(i=0;i<_;i++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(p<n.bytesAvailable)for(i=0;i<p;i++)n.readUByte()}break;case 7:if(r=!0,l=!0,!o.sps){var x=(n=new g(t.data)).readSPS();o.width=x.width,o.height=x.height,o.pixelRatio=x.pixelRatio,o.sps=[t.data],o.duration=a._duration;var w=t.data.subarray(1,4),k="avc1.";for(i=0;i<3;i++){var S=w[i].toString(16);S.length<2&&(S="0"+S),k+=S}o.codec=k}break;case 8:r=!0,o.pps||(o.pps=[t.data]);break;case 9:r=!1,o.audFound=!0,u&&c(u,o),u=a.avcSample=f(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&r&&u.units.push(t)})),t&&u&&(c(u,o),this.avcSample=null)},e._insertSampleInOrder=function _insertSampleInOrder(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e._getLastNalUnit=function _getLastNalUnit(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},e._parseAVCNALu=function _parseAVCNALu(e){var t,n,r,i,a=0,o=e.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],f=-1;for(-1===u&&(f=0,i=31&e[0],u=0,a=1);a<o;)if(t=e[a++],u)if(1!==u)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,a-u-1),type:i},c.push(r);else{var d=this._getLastNalUnit();if(d&&(l&&a<=4-l&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-l)),(n=a-u-1)>0)){var h=new Uint8Array(d.data.byteLength+n);h.set(d.data,0),h.set(e.subarray(0,n),d.data.byteLength),d.data=h}}a<o?(f=a,i=31&e[a],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(f>=0&&u>=0&&(r={data:e.subarray(f,o),type:i,state:u},c.push(r)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return s.naluState=u,c},e.discardEPB=function discardEPB(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},e._parseAACPES=function _parseAACPES(e){var t,n,a,o,u,l,c,f=this._audioTrack,d=e.data,h=e.pts,p=this.aacOverFlow,g=this.aacLastPTS;if(p){var m=new Uint8Array(p.byteLength+d.byteLength);m.set(p,0),m.set(d,p.byteLength),d=m}for(a=0,u=d.length;a<u-1&&!isHeader(d,a);a++);if(a&&(a<u-1?(l="AAC PES did not start with ADTS header,offset:"+a,c=!1):(l="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+l),this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:l}),c))return;if(initTrackConfig(f,this.observer,d,a,this.audioCodec),n=0,t=getFrameDuration(f.samplerate),p&&g){var v=g+t;Math.abs(v-h)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((v-h)/90)),h=v)}for(;a<u;)if(isHeader(d,a)&&a+5<u){var y=appendFrame(f,d,a,h,n);if(!y)break;a+=y.length,o=y.sample.pts,n++}else a++;p=a<u?d.subarray(a,u):null,this.aacOverFlow=p,this.aacLastPTS=o},e._parseMPEGPES=function _parseMPEGPES(e){for(var t=e.data,n=t.length,r=0,i=0,a=e.pts;i<n;)if(p.isHeader(t,i)){var o=p.appendFrame(this._audioTrack,t,i,a,r);if(!o)break;i+=o.length,r++}else i++},e._parseID3PES=function _parseID3PES(e){this._id3Track.samples.push(e)},TSDemuxer}(),_=function(){function MP3Demuxer(e,t,n){this.observer=e,this.config=n,this.remuxer=t}var e=MP3Demuxer.prototype;return e.resetInitSegment=function resetInitSegment(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function resetTimeStamp(){},MP3Demuxer.probe=function probe(e){var t,n,r=c.default.getID3Data(e,0);if(r&&void 0!==c.default.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(p.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function append(e,t,n,r){for(var i=c.default.getID3Data(e,0),a=c.default.getTimeStamp(i),o=a?90*a:9e4*t,s=i.length,u=e.length,l=0,f=0,d=this._audioTrack,h=[{pts:o,dts:o,data:i}];s<u;)if(p.isHeader(e,s)){var g=p.appendFrame(d,e,s,o,l);if(!g)break;s+=g.length,f=g.sample.pts,l++}else c.default.isHeader(e,s)?(i=c.default.getID3Data(e,s),h.push({pts:f,dts:f,data:i}),s+=i.length):s++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,r)},e.destroy=function destroy(){},MP3Demuxer}(),b=function(){function AAC(){}return AAC.getSilentFrame=function getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},AAC}(),x=Math.pow(2,32)-1,w=function(){function MP4(){}return MP4.init=function init(){var e;for(e in MP4.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},MP4.types)MP4.types.hasOwnProperty(e)&&(MP4.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);MP4.HDLR_TYPES={video:t,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);MP4.STTS=MP4.STSC=MP4.STCO=i,MP4.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),MP4.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),MP4.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),MP4.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);MP4.FTYP=MP4.box(MP4.types.ftyp,a,s,a,o),MP4.DINF=MP4.box(MP4.types.dinf,MP4.box(MP4.types.dref,r))},MP4.box=function box(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<a;i++)t.set(n[i],r),r+=n[i].byteLength;return t},MP4.hdlr=function hdlr(e){return MP4.box(MP4.types.hdlr,MP4.HDLR_TYPES[e])},MP4.mdat=function mdat(e){return MP4.box(MP4.types.mdat,e)},MP4.mdhd=function mdhd(e,t){t*=e;var n=Math.floor(t/(x+1)),r=Math.floor(t%(x+1));return MP4.box(MP4.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},MP4.mdia=function mdia(e){return MP4.box(MP4.types.mdia,MP4.mdhd(e.timescale,e.duration),MP4.hdlr(e.type),MP4.minf(e))},MP4.mfhd=function mfhd(e){return MP4.box(MP4.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},MP4.minf=function minf(e){return"audio"===e.type?MP4.box(MP4.types.minf,MP4.box(MP4.types.smhd,MP4.SMHD),MP4.DINF,MP4.stbl(e)):MP4.box(MP4.types.minf,MP4.box(MP4.types.vmhd,MP4.VMHD),MP4.DINF,MP4.stbl(e))},MP4.moof=function moof(e,t,n){return MP4.box(MP4.types.moof,MP4.mfhd(e),MP4.traf(n,t))},MP4.moov=function moov(e){for(var t=e.length,n=[];t--;)n[t]=MP4.trak(e[t]);return MP4.box.apply(null,[MP4.types.moov,MP4.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(MP4.mvex(e)))},MP4.mvex=function mvex(e){for(var t=e.length,n=[];t--;)n[t]=MP4.trex(e[t]);return MP4.box.apply(null,[MP4.types.mvex].concat(n))},MP4.mvhd=function mvhd(e,t){t*=e;var n=Math.floor(t/(x+1)),r=Math.floor(t%(x+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return MP4.box(MP4.types.mvhd,i)},MP4.sdtp=function sdtp(e){var t,n,r=e.samples||[],i=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,i[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return MP4.box(MP4.types.sdtp,i)},MP4.stbl=function stbl(e){return MP4.box(MP4.types.stbl,MP4.stsd(e),MP4.box(MP4.types.stts,MP4.STTS),MP4.box(MP4.types.stsc,MP4.STSC),MP4.box(MP4.types.stsz,MP4.STSZ),MP4.box(MP4.types.stco,MP4.STCO))},MP4.avc1=function avc1(e){var t,n,r,i=[],a=[];for(t=0;t<e.sps.length;t++)r=(n=e.sps[t]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)r=(n=e.pps[t]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));var o=MP4.box(MP4.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(a))),s=e.width,u=e.height,l=e.pixelRatio[0],c=e.pixelRatio[1];return MP4.box(MP4.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,MP4.box(MP4.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),MP4.box(MP4.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,c>>24,c>>16&255,c>>8&255,255&c])))},MP4.esds=function esds(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},MP4.mp4a=function mp4a(e){var t=e.samplerate;return MP4.box(MP4.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),MP4.box(MP4.types.esds,MP4.esds(e)))},MP4.mp3=function mp3(e){var t=e.samplerate;return MP4.box(MP4.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},MP4.stsd=function stsd(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp4a(e)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.mp3(e)):MP4.box(MP4.types.stsd,MP4.STSD,MP4.avc1(e))},MP4.tkhd=function tkhd(e){var t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,a=Math.floor(n/(x+1)),o=Math.floor(n%(x+1));return MP4.box(MP4.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))},MP4.traf=function traf(e,t){var n=MP4.sdtp(e),r=e.id,i=Math.floor(t/(x+1)),a=Math.floor(t%(x+1));return MP4.box(MP4.types.traf,MP4.box(MP4.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),MP4.box(MP4.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),MP4.trun(e,n.length+16+20+8+16+8+8),n)},MP4.trak=function trak(e){return e.duration=e.duration||4294967295,MP4.box(MP4.types.trak,MP4.tkhd(e),MP4.mdia(e))},MP4.trex=function trex(e){var t=e.id;return MP4.box(MP4.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},MP4.trun=function trun(e,t){var n,r,i,a,o,s,u=e.samples||[],l=u.length,c=12+16*l,f=new Uint8Array(c);for(t+=8+c,f.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),n=0;n<l;n++)i=(r=u[n]).duration,a=r.size,o=r.flags,s=r.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,s>>>24&255,s>>>16&255,s>>>8&255,255&s],12+16*n);return MP4.box(MP4.types.trun,f)},MP4.initSegment=function initSegment(e){MP4.types||MP4.init();var t,n=MP4.moov(e);return(t=new Uint8Array(MP4.FTYP.byteLength+n.byteLength)).set(MP4.FTYP),t.set(n,MP4.FTYP.byteLength),t},MP4}(),k=function(){function MP4Remuxer(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}var e=MP4Remuxer.prototype;return e.destroy=function destroy(){},e.resetTimeStamp=function resetTimeStamp(e){this._initPTS=this._initDTS=e},e.resetInitSegment=function resetInitSegment(){this.ISGenerated=!1},e.remux=function remux(e,t,n,i,a,o,u){if(this.ISGenerated||this.generateIS(e,t,a),this.ISGenerated){var l=e.samples.length,c=t.samples.length,f=a,d=a;if(l&&c){var h=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;f+=Math.max(0,h),d+=Math.max(0,-h)}if(l){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var p,g=this.remuxAudio(e,f,o,u);if(c)g&&(p=g.endPTS-g.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,d,o,p,u)}else if(c){var m=this.remuxVideo(t,d,o,0,u);m&&e.codec&&this.remuxEmptyAudio(e,f,o,m)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(r.default.FRAG_PARSED)},e.generateIS=function generateIS(e,t,n){var a,o,u=this.observer,l=e.samples,c=t.samples,f=this.typeSupported,d="audio/mp4",h={},p={tracks:h},g=void 0===this._initPTS;if(g&&(a=o=1/0),e.config&&l.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(d="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:w.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(a=o=l[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&c.length){var m=t.inputTimeScale;t.timescale=m,h.video={container:"video/mp4",codec:t.codec,initSegment:w.initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(a=Math.min(a,c[0].pts-m*n),o=Math.min(o,c[0].dts-m*n),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(h).length?(u.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):u.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function remuxVideo(e,t,n,a,o){var u,l,c,f,d,h,p,g=8,m=e.timescale,v=e.samples,y=[],_=v.length,b=this._PTSNormalize,x=this._initPTS,k=this.nextAvcDts,S=this.isSafari;if(0!==_){S&&(n|=v.length&&k&&(o&&Math.abs(t-k/m)<.1||Math.abs(v[0].pts-k-x)<m/5)),n||(k=t*m),v.forEach((function(e){e.pts=b(e.pts-x,k),e.dts=b(e.dts-x,k)})),v.sort((function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id}));var E=v.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(E<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(E/90)+" ms to overcome this issue");for(var T=0;T<v.length;T++)v[T].dts+=E}var C=v[0];d=Math.max(C.dts,0),f=Math.max(C.pts,0);var O=Math.round((d-k)/90);n&&O&&(O>1?s.logger.log("AVC:"+O+" ms hole between fragments detected,filling it"):O<-1&&s.logger.log("AVC:"+-O+" ms overlapping between fragments detected"),d=k,v[0].dts=d,f=Math.max(f-O,k),v[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(d/90)+",delta:"+O+" ms")),C=v[v.length-1],p=Math.max(C.dts,0),h=Math.max(C.pts,0,p),S&&(u=Math.round((p-d)/(v.length-1)));for(var A=0,R=0,D=0;D<_;D++){for(var P=v[D],M=P.units,j=M.length,F=0,I=0;I<j;I++)F+=M[I].data.length;R+=F,A+=j,P.length=F,P.dts=S?d+D*u:Math.max(P.dts,d),P.pts=Math.max(P.pts,P.dts)}var L=R+4*A+8;try{l=new Uint8Array(L)}catch(re){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating video mdat "+L})}var N=new DataView(l.buffer);N.setUint32(0,L),l.set(w.types.mdat,4);for(var B=0;B<_;B++){for(var U=v[B],z=U.units,q=0,W=void 0,G=0,H=z.length;G<H;G++){var V=z[G],Y=V.data,$=V.data.byteLength;N.setUint32(g,$),g+=4,l.set(Y,g),g+=$,q+=4+$}if(S)W=Math.max(0,u*Math.round((U.pts-U.dts)/u));else{if(B<_-1)u=v[B+1].dts-U.dts;else{var X=this.config,K=U.dts-v[B>0?B-1:B].dts;if(X.stretchShortVideoTrack){var J=X.maxBufferHole,Z=Math.floor(J*m),Q=(a?f+a*m:this.nextAudioPts)-U.pts;Q>Z?((u=Q-K)<0&&(u=K),s.logger.log("It is approximately "+Q/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=K}else u=K}W=Math.round(U.pts-U.dts)}y.push({size:q,duration:u,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=p+u;var ee=e.dropped;if(e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var te=y[0].flags;te.dependsOn=2,te.isNonSync=0}e.samples=y,c=w.moof(e.sequenceNumber++,d,e),e.samples=[];var ne={data1:c,data2:l,startPTS:f/m,endPTS:(h+u)/m,startDTS:d/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:ee};return this.observer.trigger(r.default.FRAG_PARSING_DATA,ne),ne}},e.remuxAudio=function remuxAudio(e,t,n,a){var o,u,l,c,f,d,h=e.inputTimeScale,p=e.timescale,g=h/p,m=(e.isAAC?1024:1152)*g,v=this._PTSNormalize,y=this._initPTS,_=!e.isAAC&&this.typeSupported.mpeg,x=_?0:8,k=e.samples,S=[],E=this.nextAudioPts;if(n|=k.length&&E&&(a&&Math.abs(t-E/h)<.1||Math.abs(k[0].pts-E-y)<20*m),k.forEach((function(e){e.pts=e.dts=v(e.pts-y,t*h)})),0!==(k=k.filter((function(e){return e.pts>=0}))).length){if(n||(E=a?t*h:k[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,C=0,O=E;C<k.length;){var A,R=k[C];A=R.pts-O;var D=Math.abs(1e3*A/h);if(A<=-T*m)s.logger.warn("Dropping 1 audio frame @ "+(O/h).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),k.splice(C,1);else if(A>=T*m&&D<1e4&&O){var P=Math.round(A/m);s.logger.warn("Injecting "+P+" audio frame @ "+(O/h).toFixed(3)+"s due to "+Math.round(1e3*A/h)+" ms gap.");for(var M=0;M<P;M++){var j=Math.max(O,0);(u=b.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),u=R.unit.subarray()),k.splice(C,0,{unit:u,pts:j,dts:j}),O+=m,C++}R.pts=R.dts=O,O+=m,C++}else Math.abs(A),R.pts=R.dts=O,O+=m,C++}for(var F=k.length,I=0;F--;)I+=k[F].unit.byteLength;for(var L=0,N=k.length;L<N;L++){var B=k[L],U=B.unit,z=B.pts;if(void 0!==d)o.duration=Math.round((z-d)/g);else{var q=Math.round(1e3*(z-E)/h),W=0;if(n&&e.isAAC&&q){if(q>0&&q<1e4)W=Math.round((z-E)/m),s.logger.log(q+" ms hole between AAC samples detected,filling it"),W>0&&((u=b.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(u=U.subarray()),I+=W*u.length);else if(q<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(E/h).toFixed(3)+"s/"+(z/h).toFixed(3)+"s/"+-q+"ms"),I-=U.byteLength;continue}z=E}if(f=z,!(I>0))return;I+=x;try{l=new Uint8Array(I)}catch(K){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:I,reason:"fail allocating audio mdat "+I})}_||(new DataView(l.buffer).setUint32(0,I),l.set(w.types.mdat,4));for(var G=0;G<W;G++)(u=b.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),u=U.subarray()),l.set(u,x),x+=u.byteLength,o={size:u.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(o)}l.set(U,x);var H=U.byteLength;x+=H,o={size:H,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(o),d=z}var V=0;if((F=S.length)>=2&&(V=S[F-2].duration,o.duration=V),F){this.nextAudioPts=E=d+g*V,e.samples=S,c=_?new Uint8Array:w.moof(e.sequenceNumber++,f/g,e),e.samples=[];var Y=f/h,$=E/h,X={data1:c,data2:l,startPTS:Y,endPTS:$,startDTS:Y,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(r.default.FRAG_PARSING_DATA,X),X}return null}},e.remuxEmptyAudio=function remuxEmptyAudio(e,t,n,r){var i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),o=this.nextAudioPts,u=(void 0!==o?o:r.startDTS*i)+this._initDTS,l=r.endDTS*i+this._initDTS,c=1024*a,f=Math.ceil((l-u)/c),d=b.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),d){for(var h=[],p=0;p<f;p++){var g=u+p*c;h.push({unit:d,pts:g,dts:g})}e.samples=h,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function remuxID3(e){var t,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-a)/i,t.dts=(t.dts-o)/i;this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.remuxText=function remuxText(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,n=e.samples.length,i=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(t=e.samples[o]).pts=(t.pts-a)/i;this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e._PTSNormalize=function _PTSNormalize(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},MP4Remuxer}(),S=function(){function PassThroughRemuxer(e){this.observer=e}var e=PassThroughRemuxer.prototype;return e.destroy=function destroy(){},e.resetTimeStamp=function resetTimeStamp(){},e.resetInitSegment=function resetInitSegment(){},e.remux=function remux(e,t,n,i,a,o,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(r.default.FRAG_PARSING_DATA,{data1:u,startPTS:a,startDTS:a,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),l.trigger(r.default.FRAG_PARSED)},PassThroughRemuxer}(),E=Object(u.getSelfScope)();try{l=E.performance.now.bind(E.performance)}catch(C){s.logger.debug("Unable to use Performance API on this environment"),l=E.Date.now}var T=function(){function DemuxerInline(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}var e=DemuxerInline.prototype;return e.destroy=function destroy(){var e=this.demuxer;e&&e.destroy()},e.push=function push(e,t,n,i,o,s,u,c,f,d,h,p){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var m=this.decrypter;null==m&&(m=this.decrypter=new a.default(this.observer,this.config));var v=l();m.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=l();g.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,o,s,u,c,f,d,h,p)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,o,s,u,c,f,d,h,p)},e.pushDecrypted=function pushDecrypted(e,t,n,a,o,s,u,l,c,h,p,g){var m=this.demuxer;if(!m||(u||l)&&!this.probe(e)){for(var v=this.observer,b=this.typeSupported,x=this.config,w=[{demux:y,remux:k},{demux:d.default,remux:S},{demux:f,remux:k},{demux:_,remux:k}],E=0,T=w.length;E<T;E++){var C=w[E],O=C.demux.probe;if(O(e)){var A=this.remuxer=new C.remux(v,x,b,this.vendor);m=new C.demux(v,A,x,b),this.probe=O;break}}if(!m)return void v.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=m}var R=this.remuxer;(u||l)&&(m.resetInitSegment(n,a,o,h),R.resetInitSegment()),u&&(m.resetTimeStamp(g),R.resetTimeStamp(g)),"function"===typeof m.setDecryptData&&m.setDecryptData(t),m.append(e,s,c,p)},DemuxerInline}();t.default=T},"./src/demux/demuxer-worker.js":function srcDemuxDemuxerWorkerJs(e,t,n){"use strict";n.r(t);var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),a=n("./src/utils/logger.js"),o=n("./node_modules/eventemitter3/index.js");t.default=function DemuxerWorker(e){var t=new o.EventEmitter;t.trigger=function trigger(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function off(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function forwardMessage(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new r.default(t,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,(function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)}))}},"./src/demux/id3.js":function srcDemuxId3Js(e,t,n){"use strict";n.r(t),n.d(t,"utf8ArrayToStr",(function(){return o}));var r,i=n("./src/utils/get-self-scope.js"),a=function(){function ID3(){}return ID3.isHeader=function isHeader(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},ID3.isFooter=function isFooter(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},ID3.getID3Data=function getID3Data(e,t){for(var n=t,r=0;ID3.isHeader(e,t);){r+=10,r+=ID3._readSize(e,t+6),ID3.isFooter(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)},ID3._readSize=function _readSize(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},ID3.getTimeStamp=function getTimeStamp(e){for(var t=ID3.getID3Frames(e),n=0;n<t.length;n++){var r=t[n];if(ID3.isTimeStampFrame(r))return ID3._readTimeStamp(r)}},ID3.isTimeStampFrame=function isTimeStampFrame(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},ID3._getFrameData=function _getFrameData(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=ID3._readSize(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},ID3.getID3Frames=function getID3Frames(e){for(var t=0,n=[];ID3.isHeader(e,t);){for(var r=ID3._readSize(e,t+6),i=(t+=10)+r;t+8<i;){var a=ID3._getFrameData(e.subarray(t)),o=ID3._decodeFrame(a);o&&n.push(o),t+=a.size+10}ID3.isFooter(e,t)&&(t+=10)}return n},ID3._decodeFrame=function _decodeFrame(e){return"PRIV"===e.type?ID3._decodePrivFrame(e):"T"===e.type[0]?ID3._decodeTextFrame(e):"W"===e.type[0]?ID3._decodeURLFrame(e):void 0},ID3._readTimeStamp=function _readTimeStamp(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},ID3._decodePrivFrame=function _decodePrivFrame(e){if(!(e.size<2)){var t=ID3._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},ID3._decodeTextFrame=function _decodeTextFrame(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=ID3._utf8ArrayToStr(e.data.subarray(t));t+=n.length+1;var r=ID3._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=ID3._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:i}}},ID3._decodeURLFrame=function _decodeURLFrame(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=ID3._utf8ArrayToStr(e.data.subarray(t));t+=n.length+1;var r=ID3._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=ID3._utf8ArrayToStr(e.data);return{key:e.type,data:i}},ID3._utf8ArrayToStr=function _utf8ArrayToStr(e,t){void 0===t&&(t=!1);var n=getTextDecoder();if(n){var r=n.decode(e);if(t){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,o,s,u=e.length,l="",c=0;c<u;){if(0===(a=e[c++])&&t)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:o=e[c++],l+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[c++],s=e[c++],l+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return l},ID3}();function getTextDecoder(){var e=Object(i.getSelfScope)();return r||"undefined"===typeof e.TextDecoder||(r=new e.TextDecoder("utf-8")),r}var o=a._utf8ArrayToStr;t.default=a},"./src/demux/mp4demuxer.js":function srcDemuxMp4demuxerJs(e,t,n){"use strict";n.r(t);var r=n("./src/utils/logger.js"),i=n("./src/events.js"),a=Math.pow(2,32)-1,o=function(){function MP4Demuxer(e,t){this.observer=e,this.remuxer=t}var e=MP4Demuxer.prototype;return e.resetTimeStamp=function resetTimeStamp(e){this.initPTS=e},e.resetInitSegment=function resetInitSegment(e,t,n,r){if(e&&e.byteLength){var a=this.initData=MP4Demuxer.parseInitSegment(e);null==t&&(t="mp4a.40.5"),null==n&&(n="avc1.42e01e");var o={};a.audio&&a.video?o.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:r?e:null}:(a.audio&&(o.audio={container:"audio/mp4",codec:t,initSegment:r?e:null}),a.video&&(o.video={container:"video/mp4",codec:n,initSegment:r?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else t&&(this.audioCodec=t),n&&(this.videoCodec=n)},MP4Demuxer.probe=function probe(e){return MP4Demuxer.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},MP4Demuxer.bin2str=function bin2str(e){return String.fromCharCode.apply(null,e)},MP4Demuxer.readUint16=function readUint16(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},MP4Demuxer.readUint32=function readUint32(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},MP4Demuxer.writeUint32=function writeUint32(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},MP4Demuxer.findBox=function findBox(e,t){var n,r,i,a,o,s,u=[];if(e.data?(o=e.start,i=e.end,e=e.data):(o=0,i=e.byteLength),!t.length)return null;for(n=o;n<i;)s=(r=MP4Demuxer.readUint32(e,n))>1?n+r:i,MP4Demuxer.bin2str(e.subarray(n+4,n+8))===t[0]&&(1===t.length?u.push({data:e,start:n+8,end:s}):(a=MP4Demuxer.findBox({data:e,start:n+8,end:s},t.slice(1))).length&&(u=u.concat(a))),n=s;return u},MP4Demuxer.parseSegmentIndex=function parseSegmentIndex(e){var t,n=MP4Demuxer.findBox(e,["moov"])[0],r=n?n.end:null,i=0,a=MP4Demuxer.findBox(e,["sidx"]);if(!a||!a[0])return null;t=[];var o=(a=a[0]).data[0];i=0===o?8:16;var s=MP4Demuxer.readUint32(a,i);i+=4;i+=0===o?8:16,i+=2;var u=a.end+0,l=MP4Demuxer.readUint16(a,i);i+=2;for(var c=0;c<l;c++){var f=i,d=MP4Demuxer.readUint32(a,f);f+=4;var h=2147483647&d;if(1===(2147483648&d)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var p=MP4Demuxer.readUint32(a,f);f+=4,t.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/s,start:u,end:u+h-1}}),u+=h,i=f+=4}return{earliestPresentationTime:0,timescale:s,version:o,referencesCount:l,references:t,moovEndOffset:r}},MP4Demuxer.parseInitSegment=function parseInitSegment(e){var t=[];return MP4Demuxer.findBox(e,["moov","trak"]).forEach((function(e){var n=MP4Demuxer.findBox(e,["tkhd"])[0];if(n){var i=n.data[n.start],a=0===i?12:20,o=MP4Demuxer.readUint32(n,a),s=MP4Demuxer.findBox(e,["mdia","mdhd"])[0];if(s){a=0===(i=s.data[s.start])?12:20;var u=MP4Demuxer.readUint32(s,a),l=MP4Demuxer.findBox(e,["mdia","hdlr"])[0];if(l){var c={soun:"audio",vide:"video"}[MP4Demuxer.bin2str(l.data.subarray(l.start+8,l.start+12))];if(c){var f=MP4Demuxer.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var d=MP4Demuxer.bin2str(f.data.subarray(f.start+12,f.start+16));r.logger.log("MP4Demuxer:"+c+":"+d+" found")}t[o]={timescale:u,type:c},t[c]={timescale:u,id:o}}}}}})),t},MP4Demuxer.getStartDTS=function getStartDTS(e,t){var n,r,i;return n=MP4Demuxer.findBox(t,["moof","traf"]),r=[].concat.apply([],n.map((function(t){return MP4Demuxer.findBox(t,["tfhd"]).map((function(n){var r,i;return r=MP4Demuxer.readUint32(n,4),i=e[r].timescale||9e4,MP4Demuxer.findBox(t,["tfdt"]).map((function(e){var t,n;return t=e.data[e.start],n=MP4Demuxer.readUint32(e,4),1===t&&(n*=Math.pow(2,32),n+=MP4Demuxer.readUint32(e,8)),n}))[0]/i}))}))),i=Math.min.apply(null,r),isFinite(i)?i:0},MP4Demuxer.offsetStartDTS=function offsetStartDTS(e,t,n){MP4Demuxer.findBox(t,["moof","traf"]).map((function(t){return MP4Demuxer.findBox(t,["tfhd"]).map((function(r){var i=MP4Demuxer.readUint32(r,4),o=e[i].timescale||9e4;MP4Demuxer.findBox(t,["tfdt"]).map((function(e){var t=e.data[e.start],r=MP4Demuxer.readUint32(e,4);if(0===t)MP4Demuxer.writeUint32(e,4,r-n*o);else{r*=Math.pow(2,32),r+=MP4Demuxer.readUint32(e,8),r-=n*o,r=Math.max(r,0);var i=Math.floor(r/(a+1)),s=Math.floor(r%(a+1));MP4Demuxer.writeUint32(e,4,i),MP4Demuxer.writeUint32(e,8,s)}}))}))}))},e.append=function append(e,t,n,r){var a=this.initData;a||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),a=this.initData);var o,s=this.initPTS;if(void 0===s){var u=MP4Demuxer.getStartDTS(a,e);this.initPTS=s=u-t,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:s})}MP4Demuxer.offsetStartDTS(a,e,s),o=MP4Demuxer.getStartDTS(a,e),this.remuxer.remux(a.audio,a.video,null,null,o,n,r,e)},e.destroy=function destroy(){},MP4Demuxer}();t.default=o},"./src/errors.js":function srcErrorsJs(e,t,n){"use strict";n.r(t),n.d(t,"ErrorTypes",(function(){return r})),n.d(t,"ErrorDetails",(function(){return i}));var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/events.js":function srcEventsJs(e,t,n){"use strict";n.r(t);t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function srcHlsJs(e,t,n){"use strict";var r={};n.r(r),n.d(r,"newCue",(function(){return newCue}));var i,a,o=n("./node_modules/url-toolkit/src/url-toolkit.js"),s=n("./src/errors.js"),u=n("./src/polyfills/number-isFinite.js"),l=n("./src/events.js"),c=n("./src/utils/logger.js"),f={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},d=function(){function EventHandler(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=EventHandler.prototype;return e.destroy=function destroy(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function onHandlerDestroying(){},e.onHandlerDestroyed=function onHandlerDestroyed(){},e.isEventHandler=function isEventHandler(){return"object"===typeof this.handledEvents&&this.handledEvents.length&&"function"===typeof this.onEvent},e.registerListeners=function registerListeners(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(f[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},e.unregisterListeners=function unregisterListeners(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.onEvent=function onEvent(e,t){this.onEventGeneric(e,t)},e.onEventGeneric=function onEventGeneric(e,t){try{(function eventToFunction(e,t){var n="on"+e.replace("hls","");if("function"!==typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(n){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:n})}},EventHandler}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var h=n("./src/demux/mp4demuxer.js");function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p,g=function(){function LevelKey(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(LevelKey,[{key:"uri",get:function get(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),LevelKey}();function fragment_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(p||(p={}));var m=function(){function Fragment(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[p.AUDIO]=!1,e[p.VIDEO]=!1,e),this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.sn=0,this.levelkey=void 0}var e=Fragment.prototype;return e.setByteRange=function setByteRange(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},e.addElementaryStream=function addElementaryStream(e){this._elementaryStreams[e]=!0},e.hasElementaryStream=function hasElementaryStream(e){return!0===this._elementaryStreams[e]},e.createInitializationVector=function createInitializationVector(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},e.setDecryptDataFromLevelKey=function setDecryptDataFromLevelKey(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new g(e.baseuri,e.reluri)).method=e.method,n.iv=this.createInitializationVector(t)),n},function fragment_createClass(e,t,n){return t&&fragment_defineProperties(e.prototype,t),n&&fragment_defineProperties(e,n),e}(Fragment,[{key:"url",get:function get(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function set(e){this._url=e}},{key:"byteRange",get:function get(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function get(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function get(){return this.byteRange[1]}},{key:"decryptdata",get:function get(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!==typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function get(){if(null===this.programDateTime)return null;if(!Object(u.isFiniteNumber)(this.programDateTime))return null;var e=Object(u.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function get(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),Fragment}();function level_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function Level(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return function level_createClass(e,t,n){return t&&level_defineProperties(e.prototype,t),n&&level_defineProperties(e,n),e}(Level,[{key:"hasProgramDateTime",get:function get(){return!(!this.fragments[0]||!Object(u.isFiniteNumber)(this.fragments[0].programDateTime))}}]),Level}(),y=/^(\d+)x(\d+)$/,_=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,b=function(){function AttrList(e){for(var t in"string"===typeof e&&(e=AttrList.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}var e=AttrList.prototype;return e.decimalInteger=function decimalInteger(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.hexadecimalInteger=function hexadecimalInteger(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function hexadecimalIntegerAsNumber(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.decimalFloatingPoint=function decimalFloatingPoint(e){return parseFloat(this[e])},e.enumeratedString=function enumeratedString(e){return this[e]},e.decimalResolution=function decimalResolution(e){var t=y.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},AttrList.parseAttrList=function parseAttrList(e){var t,n={};for(_.lastIndex=0;null!==(t=_.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},AttrList}(),x={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function isCodecSupportedInMp4(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var w=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,k=/#EXT-X-MEDIA:(.*)/g,S=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),E=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,T=/\.(mp4|m4s|m4v|m4a)$/i,C=function(){function M3U8Parser(){}return M3U8Parser.findGroup=function findGroup(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n},M3U8Parser.convertAVC1ToAVCOTI=function convertAVC1ToAVCOTI(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},M3U8Parser.resolve=function resolve(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},M3U8Parser.parseMasterPlaylist=function parseMasterPlaylist(e,t){var n,r=[];function setCodecs(e,t){["video","audio"].forEach((function(n){var r=e.filter((function(e){return function isCodecType(e,t){var n=x[t];return!!n&&!0===n[e.slice(0,4)]}(e,n)}));if(r.length){var i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter((function(e){return-1===r.indexOf(e)}))}})),t.unknownCodecs=e}for(w.lastIndex=0;null!=(n=w.exec(e));){var i={},a=i.attrs=new b(n[1]);i.url=M3U8Parser.resolve(n[2],t);var o=a.decimalResolution("RESOLUTION");o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME,setCodecs([].concat((a.CODECS||"").split(/[ ,]+/)),i),i.videoCodec&&-1!==i.videoCodec.indexOf("avc1")&&(i.videoCodec=M3U8Parser.convertAVC1ToAVCOTI(i.videoCodec)),r.push(i)}return r},M3U8Parser.parseMasterPlaylistMedia=function parseMasterPlaylistMedia(e,t,n,r){var i;void 0===r&&(r=[]);var a=[],o=0;for(k.lastIndex=0;null!==(i=k.exec(e));){var s={},u=new b(i[1]);if(u.TYPE===n){if(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=n,s.default="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=M3U8Parser.resolve(u.URI,t)),s.lang=u.LANGUAGE,s.name||(s.name=s.lang),r.length){var l=M3U8Parser.findGroup(r,s.groupId);s.audioCodec=l?l.codec:r[0].codec}s.id=o++,a.push(s)}}return a},M3U8Parser.parseLevelPlaylist=function parseLevelPlaylist(e,t,n,r,i){var a,o,s=0,l=0,f=new v(t),d=new g,h=0,p=null,y=new m,_=null;for(S.lastIndex=0;null!==(a=S.exec(e));){var x=a[1];if(x){y.duration=parseFloat(x);var w=(" "+a[2]).slice(1);y.title=w||null,y.tagList.push(w?["INF",x,w]:["INF",x])}else if(a[3]){if(Object(u.isFiniteNumber)(y.duration)){var k=s++;y.type=r,y.start=l,y.levelkey=d,y.sn=k,y.level=n,y.cc=h,y.urlId=i,y.baseurl=t,y.relurl=(" "+a[3]).slice(1),assignProgramDateTime(y,p),f.fragments.push(y),p=y,l+=y.duration,y=new m}}else if(a[4]){var C=(" "+a[4]).slice(1);p?y.setByteRange(C,p):y.setByteRange(C)}else if(a[5])y.rawProgramDateTime=(" "+a[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),null===_&&(_=f.fragments.length);else{for(a=a[0].match(E),o=1;o<a.length&&"undefined"===typeof a[o];o++);var O=(" "+a[o+1]).slice(1),A=(" "+a[o+2]).slice(1);switch(a[o]){case"#":y.tagList.push(A?[O,A]:[O]);break;case"PLAYLIST-TYPE":f.type=O.toUpperCase();break;case"MEDIA-SEQUENCE":s=f.startSN=parseInt(O);break;case"TARGETDURATION":f.targetduration=parseFloat(O);break;case"VERSION":f.version=parseInt(O);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":h++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(O);break;case"KEY":var R=new b(O),D=R.enumeratedString("METHOD"),P=R.URI,M=R.hexadecimalInteger("IV");D&&(d=new g,P&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(d.method=D,d.baseuri=t,d.reluri=P,d.key=null,d.iv=M));break;case"START":var j=new b(O).decimalFloatingPoint("TIME-OFFSET");Object(u.isFiniteNumber)(j)&&(f.startTimeOffset=j);break;case"MAP":var F=new b(O);y.relurl=F.URI,F.BYTERANGE&&y.setByteRange(F.BYTERANGE),y.baseurl=t,y.level=n,y.type=r,y.sn="initSegment",f.initSegment=y,(y=new m).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+a)}}}return(y=p)&&!y.relurl&&(f.fragments.pop(),l-=y.duration),f.totalduration=l,f.averagetargetduration=l/f.fragments.length,f.endSN=s-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=h,!f.initSegment&&f.fragments.length&&f.fragments.every((function(e){return T.test(e.relurl)}))&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(y=new m).relurl=f.fragments[0].relurl,y.baseurl=t,y.level=n,y.type=r,y.sn="initSegment",f.initSegment=y,f.needSidxRanges=!0),_&&function backfillProgramDateTimes(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(f.fragments,_),f},M3U8Parser}();function assignProgramDateTime(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(u.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var O=window.performance,A=function(e){function PlaylistLoader(t){var n;return(n=e.call(this,t,l.default.MANIFEST_LOADING,l.default.LEVEL_LOADING,l.default.AUDIO_TRACK_LOADING,l.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}!function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(PlaylistLoader,e),PlaylistLoader.canHaveQualityLevels=function canHaveQualityLevels(e){return e!==i.AUDIO_TRACK&&e!==i.SUBTITLE_TRACK},PlaylistLoader.mapContextToLevelType=function mapContextToLevelType(e){switch(e.type){case i.AUDIO_TRACK:return a.AUDIO;case i.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},PlaylistLoader.getResponseUrl=function getResponseUrl(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n};var t=PlaylistLoader.prototype;return t.createInternalLoader=function createInternalLoader(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},t.getInternalLoader=function getInternalLoader(e){return this.loaders[e.type]},t.resetInternalLoader=function resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function destroyInternalLoaders(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function destroy(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},t.onManifestLoading=function onManifestLoading(e){this.load({url:e.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},t.onLevelLoading=function onLevelLoading(e){this.load({url:e.url,type:i.LEVEL,level:e.level,id:e.id,responseType:"text"})},t.onAudioTrackLoading=function onAudioTrackLoading(e){this.load({url:e.url,type:i.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},t.onSubtitleTrackLoading=function onSubtitleTrackLoading(e){this.load({url:e.url,type:i.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},t.load=function load(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n,r,a,o,s=this.getInternalLoader(e);if(s){var u=s.context;if(u&&u.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case i.MANIFEST:n=t.manifestLoadingMaxRetry,r=t.manifestLoadingTimeOut,a=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:n=0,o=0,a=0,r=t.levelLoadingTimeOut;break;default:n=t.levelLoadingMaxRetry,r=t.levelLoadingTimeOut,a=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var l={timeout:r,maxRetry:n,retryDelay:a,maxRetryDelay:o},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,l,f),!0},t.loadsuccess=function loadsuccess(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);if(this.resetInternalLoader(n.type),"string"!==typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=e.data;t.tload=O.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},t.loaderror=function loaderror(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},t.loadtimeout=function loadtimeout(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},t._handleMasterPlaylist=function _handleMasterPlaylist(e,t,n,r){var i=this.hls,a=e.data,o=PlaylistLoader.getResponseUrl(e,n),s=C.parseMasterPlaylist(a,o);if(s.length){var u=s.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),f=C.parseMasterPlaylistMedia(a,o,"AUDIO",u),d=C.parseMasterPlaylistMedia(a,o,"SUBTITLES");if(f.length){var h=!1;f.forEach((function(e){e.url||(h=!0)})),!1===h&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main"}))}i.trigger(l.default.MANIFEST_LOADED,{levels:s,audioTracks:f,subtitles:d,url:o,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"no level found in manifest",r)},t._handleTrackOrLevelPlaylist=function _handleTrackOrLevelPlaylist(e,t,n,r){var a=this.hls,o=n.id,s=n.level,c=n.type,f=PlaylistLoader.getResponseUrl(e,n),d=Object(u.isFiniteNumber)(o)?o:0,h=Object(u.isFiniteNumber)(s)?s:d,p=PlaylistLoader.mapContextToLevelType(n),g=C.parseLevelPlaylist(e.data,f,h,p,d);if(g.tload=t.tload,c===i.MANIFEST){var m={url:f,details:g};a.trigger(l.default.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:f,stats:t,networkDetails:r})}if(t.tparsed=O.now(),g.needSidxRanges){var v=g.initSegment.url;this.load({url:v,isSidxRequest:!0,type:c,level:s,levelDetails:g,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=g,this._handlePlaylistLoaded(e,t,n,r)},t._handleSidxRequest=function _handleSidxRequest(e,t){if("string"===typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var n=h.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach((function(e,t){var n=e.info;if(i){var r=i.fragments[t];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},t._handleManifestParsingError=function _handleManifestParsingError(e,t,n,r){this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},t._handleNetworkError=function _handleNetworkError(e,t,n,r){var a,o;void 0===n&&(n=!1),void 0===r&&(r=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var u=this.getInternalLoader(e);switch(e.type){case i.MANIFEST:a=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}u&&(u.abort(),this.resetInternalLoader(e.type));var f={type:s.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:e.url,loader:u,context:e,networkDetails:t};r&&(f.response=r),this.hls.trigger(l.default.ERROR,f)},t._handlePlaylistLoaded=function _handlePlaylistLoaded(e,t,n,r){var a=n.type,o=n.level,s=n.id,u=n.levelDetails;if(u&&u.targetduration)if(PlaylistLoader.canHaveQualityLevels(n.type))this.hls.trigger(l.default.LEVEL_LOADED,{details:u,level:o||0,id:s||0,stats:t,networkDetails:r});else switch(a){case i.AUDIO_TRACK:this.hls.trigger(l.default.AUDIO_TRACK_LOADED,{details:u,id:s,stats:t,networkDetails:r});break;case i.SUBTITLE_TRACK:this.hls.trigger(l.default.SUBTITLE_TRACK_LOADED,{details:u,id:s,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"invalid target duration",r)},PlaylistLoader}(d);var R=function(e){function FragmentLoader(t){var n;return(n=e.call(this,t,l.default.FRAG_LOADING)||this).loaders={},n}!function fragment_loader_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(FragmentLoader,e);var t=FragmentLoader.prototype;return t.destroy=function destroy(){var t=this.loaders;for(var n in t){var r=t[n];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},t.onFragLoading=function onFragLoading(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s,l,f,d=r[n];d&&(c.logger.warn("abort previous fragment loader for type: "+n),d.abort()),d=r[n]=t.loader=i.fLoader?new a(i):new o(i),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var h=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(u.isFiniteNumber)(h)&&Object(u.isFiniteNumber)(p)&&(s.rangeStart=h,s.rangeEnd=p),l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(s,l,f)},t.loadsuccess=function loadsuccess(e,t,n,r){void 0===r&&(r=null);var i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},t.loaderror=function loaderror(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},t.loadtimeout=function loadtimeout(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},t.loadprogress=function loadprogress(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},FragmentLoader}(d);var D=function(e){function KeyLoader(t){var n;return(n=e.call(this,t,l.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}!function key_loader_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(KeyLoader,e);var t=KeyLoader.prototype;return t.destroy=function destroy(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},d.prototype.destroy.call(this)},t.onKeyLoading=function onKeyLoading(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o,s,u,f=this.hls.config;r&&(c.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new f.loader(f),this.decrypturl=a,this.decryptkey=null,o={url:a,frag:t,responseType:"arraybuffer"},s={timeout:f.fragLoadingTimeOut,maxRetry:0,retryDelay:f.fragLoadingRetryDelay,maxRetryDelay:f.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(o,s,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))},t.loadsuccess=function loadsuccess(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:r})},t.loaderror=function loaderror(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.loadtimeout=function loadtimeout(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},KeyLoader}(d);var P="NOT_LOADED",M="APPENDING",j="PARTIAL",F="OK",I=function(e){function FragmentTracker(t){var n;return(n=e.call(this,t,l.default.BUFFER_APPENDED,l.default.FRAG_BUFFERED,l.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=t.config,n}!function fragment_tracker_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(FragmentTracker,e);var t=FragmentTracker.prototype;return t.destroy=function destroy(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,d.prototype.destroy.call(this),e.prototype.destroy.call(this)},t.getBufferedFrag=function getBufferedFrag(e,t){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=e&&e<=a.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},t.detectEvictedFragments=function detectEvictedFragments(e,t){var n,r,i=this;Object.keys(this.fragments).forEach((function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[e];if(s){n=s.time;for(var u=0;u<n.length;u++)if(r=n[u],!1===i.isTimeBuffered(r.startPTS,r.endPTS,t)){i.removeFragment(o.body);break}}}}))},t.detectPartialFragments=function detectPartialFragments(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},t.getBufferedTimes=function getBufferedTimes(e,t,n){for(var r,i,a=[],o=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i){a.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&t>r)a.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),o=!0;else if(t<=r)break}return{time:a,partial:o}},t.getFragmentKey=function getFragmentKey(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},t.getPartialFragment=function getPartialFragment(e){var t,n,r,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var u=i.fragments[s];i.isPartial(u)&&(n=u.body.startPTS-i.bufferPadding,r=u.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),o<=t&&(a=u.body,o=t)))})),a},t.getState=function getState(e){var t=this.getFragmentKey(e),n=this.fragments[t],r=P;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?j:F:M),r},t.isPartial=function isPartial(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},t.isTimeBuffered=function isTimeBuffered(e,t,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},t.onFragLoaded=function onFragLoaded(e){var t=e.frag;Object(u.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},t.onBufferAppended=function onBufferAppended(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)}))},t.onFragBuffered=function onFragBuffered(e){this.detectPartialFragments(e.frag)},t.hasFragment=function hasFragment(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},t.removeFragment=function removeFragment(e){var t=this.getFragmentKey(e);delete this.fragments[t]},t.removeAllFragments=function removeAllFragments(){this.fragments=Object.create(null)},FragmentTracker}(d),L={search:function search(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}},N=function(){function BufferHelper(){}return BufferHelper.isBuffered=function isBuffered(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(i){}return!1},BufferHelper.bufferInfo=function bufferInfo(e,t,n){try{if(e){var r,i=e.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,t,n)}}catch(o){}return{len:0,start:t,end:t,nextStart:void 0}},BufferHelper.bufferedInfo=function bufferedInfo(e,t,n){var r,i,a,o,s,u=[];for(e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end})),s=0;s<e.length;s++){var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<n?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,r=0,i=a=t;s<u.length;s++){var f=u[s].start,d=u[s].end;if(t+n>=f&&t<d)i=f,r=(a=d)-t;else if(t+n<f){o=f;break}}return{len:r,start:i,end:a,nextStart:o}},BufferHelper}(),B=n("./node_modules/eventemitter3/index.js"),U=n("./node_modules/webworkify-webpack/index.js"),z=n("./src/demux/demuxer-inline.js");function getMediaSource(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}var q=n("./src/utils/get-self-scope.js");var W=function(e){function Observer(){return e.apply(this,arguments)||this}return function observer_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(Observer,e),Observer.prototype.trigger=function trigger(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(n))},Observer}(B.EventEmitter),G=Object(q.getSelfScope)(),H=getMediaSource(),V=function(){function Demuxer(e,t){var n=this;this.hls=e,this.id=t;var r=this.observer=new W,i=e.config,a=function forwardMessage(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};r.on(l.default.FRAG_DECRYPTED,a),r.on(l.default.FRAG_PARSING_INIT_SEGMENT,a),r.on(l.default.FRAG_PARSING_DATA,a),r.on(l.default.FRAG_PARSED,a),r.on(l.default.ERROR,a),r.on(l.default.FRAG_PARSING_METADATA,a),r.on(l.default.FRAG_PARSING_USERDATA,a),r.on(l.default.INIT_PTS_FOUND,a);var o={mp4:H.isTypeSupported("video/mp4"),mpeg:H.isTypeSupported("audio/mpeg"),mp3:H.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(i.enableWorker&&"undefined"!==typeof Worker){var f;c.logger.log("demuxing in webworker");try{f=this.w=U("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),f.addEventListener("message",this.onwmsg),f.onerror=function(t){e.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},f.postMessage({cmd:"init",typeSupported:o,vendor:u,id:t,config:JSON.stringify(i)})}catch(d){c.logger.warn("Error in worker:",d),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),f&&G.URL.revokeObjectURL(f.objectURL),this.demuxer=new z.default(r,o,i,u),this.w=void 0}}else this.demuxer=new z.default(r,o,i,u)}var e=Demuxer.prototype;return e.destroy=function destroy(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function push(e,t,n,r,i,a,o,s){var l=this.w,f=Object(u.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,d=i.decryptdata,h=this.frag,p=!(h&&i.cc===h.cc),g=!(h&&i.level===h.level),m=h&&i.sn===h.sn+1,v=!g&&m;if(p&&c.logger.log(this.id+":discontinuity detected"),g&&c.logger.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:f,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,d,t,n,r,f,p,g,v,a,o,s)}},e.onWorkerMessage=function onWorkerMessage(e){var t=e.data,n=this.hls;switch(t.event){case"init":G.URL.revokeObjectURL(this.w.objectURL);break;case l.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},Demuxer}();function addGroupId(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function updatePTS(e,t,n){var r=e[t],i=e[n],a=i.startPTS;Object(u.isFiniteNumber)(a)?n>t?(r.duration=a-r.start,r.duration<0&&c.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=n>t?r.start+r.duration:Math.max(r.start-i.duration,0)}function updateFragPTSDTS(e,t,n,r,i,a){var o=n;if(Object(u.isFiniteNumber)(t.startPTS)){var s=Math.abs(t.startPTS-n);Object(u.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var l=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=r,t.startDTS=i,t.endDTS=a,t.duration=r-n;var c,f,d,h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;for(c=h-e.startSN,(f=e.fragments)[c]=t,d=c;d>0;d--)updatePTS(f,d,d-1);for(d=c;d<f.length-1;d++)updatePTS(f,d,d+1);return e.PTSKnown=!0,l}function mergeDetails(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var n,r=0;if(mapFragmentIntersection(e,t,(function(e,i){r=e.cc-i.cc,Object(u.isFiniteNumber)(e.startPTS)&&(i.start=i.startPTS=e.startPTS,i.endPTS=e.endPTS,i.duration=e.duration,i.backtracked=e.backtracked,i.dropped=e.dropped,n=i),t.PTSKnown=!0})),t.PTSKnown){if(r){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=t.fragments,a=0;a<i.length;a++)i[a].cc+=r}n?updateFragPTSDTS(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function adjustSliding(e,t){var n=t.startSN-e.startSN,r=e.fragments,i=t.fragments;if(n<0||n>r.length)return;for(var a=0;a<i.length;a++)i[a].start+=r[n].start}(e,t),t.PTSKnown=e.PTSKnown}}function mapFragmentIntersection(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=r;o<=i;o++){var s=e.fragments[a+o],u=t.fragments[o];if(!s||!u)break;n(s,u,o)}}function computeReloadInterval(e,t,n){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var Y={toString:function toString(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};function adjustPts(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function alignStream(e,t,n){!function alignDiscontinuities(e,t,n){if(function shouldAlignOnDiscontinuities(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}(e,n,t)){var r=function findDiscontinuousReferenceFrag(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function findFirstFragWithCC(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(n.details,t);r&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),adjustPts(r.start,t))}}(e,n,t),!n.PTSKnown&&t&&function alignPDT(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var n=t.fragments[0].programDateTime,r=(e.fragments[0].programDateTime-n)/1e3+t.fragments[0].start;Object(u.isFiniteNumber)(r)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),adjustPts(r,e))}}(n,t.details)}function findFragmentByPDT(e,t,n){if(!Array.isArray(e)||!e.length||!Object(u.isFiniteNumber)(t))return null;if(t<e[0].programDateTime)return null;if(t>=e[e.length-1].endProgramDateTime)return null;n=n||0;for(var r=0;r<e.length;++r){var i=e[r];if(pdtWithinToleranceTest(t,n,i))return i}return null}function findFragmentByPTS(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!fragment_finders_fragmentWithinToleranceTest(n,r,i)?i:L.search(t,fragment_finders_fragmentWithinToleranceTest.bind(null,n,r))}function fragment_finders_fragmentWithinToleranceTest(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function pdtWithinToleranceTest(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.endProgramDateTime-r>e}var $=function(){function GapController(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.stallReported=!1}var e=GapController.prototype;return e.poll=function poll(e,t){var n=this.config,r=this.media,i=r.currentTime,a=window.performance.now();if(i!==e)return this.stallReported&&(c.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(a-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(r.ended||!r.buffered.length||r.readyState>2)&&(!r.seeking||!N.isBuffered(r,i))){var o=a-this.stalled,s=N.bufferInfo(r,i,n.maxBufferHole);this.stalled?(o>=1e3&&this._reportStall(s.len),this._tryFixBufferStall(s,o)):this.stalled=a}},e._tryFixBufferStall=function _tryFixBufferStall(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);a&&this._trySkipBufferHole(a),e.len>.5&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function _reportStall(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e._trySkipBufferHole=function _trySkipBufferHole(e){for(var t=this.hls,n=this.media,r=n.currentTime,i=0,a=0;a<n.buffered.length;a++){var o=n.buffered.start(a);if(r>=i&&r<o)return n.currentTime=Math.max(o,n.currentTime+.1),c.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+n.currentTime),this.stalled=null,void t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+n.currentTime,frag:e});i=n.buffered.end(a)}},e._tryNudgeBuffer=function _tryNudgeBuffer(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<e.nudgeMaxRetry){var a=r+i*e.nudgeOffset;c.logger.log("adjust currentTime from "+r+" to "+a),n.currentTime=a,t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},GapController}();function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var X=function(e){function TaskLoop(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=e.call.apply(e,[this,t].concat(i))||this)._tickInterval=null,n._tickTimer=null,n._tickCallCount=0,n._boundTick=n.tick.bind(_assertThisInitialized(_assertThisInitialized(n))),n}!function task_loop_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(TaskLoop,e);var t=TaskLoop.prototype;return t.onHandlerDestroying=function onHandlerDestroying(){this.clearNextTick(),this.clearInterval()},t.hasInterval=function hasInterval(){return!!this._tickInterval},t.hasNextTick=function hasNextTick(){return!!this._tickTimer},t.setInterval=function(e){function setInterval(t){return e.apply(this,arguments)}return setInterval.toString=function(){return e.toString()},setInterval}((function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)})),t.clearInterval=function(e){function clearInterval(){return e.apply(this,arguments)}return clearInterval.toString=function(){return e.toString()},clearInterval}((function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)})),t.clearNextTick=function clearNextTick(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.doTick=function doTick(){},TaskLoop}(d);var K={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},J=function(e){function BaseStreamController(){return e.apply(this,arguments)||this}!function base_stream_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(BaseStreamController,e);var t=BaseStreamController.prototype;return t.doTick=function doTick(){},t.startLoad=function startLoad(){},t.stopLoad=function stopLoad(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=K.STOPPED},t._streamEnded=function _streamEnded(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===j||i===F}return!1},t.onMediaSeeking=function onMediaSeeking(){var e=this.config,t=this.media,n=this.mediaBuffer,r=this.state,i=t?t.currentTime:null,a=N.bufferInfo(n||t,i,this.config.maxBufferHole);if(Object(u.isFiniteNumber)(i)&&c.logger.log("media seeking to "+i.toFixed(3)),r===K.FRAG_LOADING){var o=this.fragCurrent;if(0===a.len&&o){var s=e.maxFragLookUpTolerance,l=o.start-s,f=o.start+o.duration+s;i<l||i>f?(o.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=K.IDLE):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===K.ENDED&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=K.IDLE);t&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},t.onMediaEnded=function onMediaEnded(){this.startPosition=this.lastCurrentTime=0},t.onHandlerDestroying=function onHandlerDestroying(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},t.onHandlerDestroyed=function onHandlerDestroyed(){this.state=K.STOPPED,this.fragmentTracker=null},BaseStreamController}(X);function stream_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(e){function StreamController(t,n){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=K.STOPPED,r.stallReported=!1,r.gapController=null,r}!function stream_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(StreamController,e);var t=StreamController.prototype;return t.startLoad=function startLoad(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=K.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=K.STOPPED},t.stopLoad=function stopLoad(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},t.doTick=function doTick(){switch(this.state){case K.BUFFER_FLUSHING:this.fragLoadError=0;break;case K.IDLE:this._doTickIdle();break;case K.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=K.IDLE);break;case K.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=K.IDLE);break;case K.ERROR:case K.STOPPED:case K.FRAG_LOADING:case K.PARSING:case K.PARSED:case K.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t._doTickIdle=function _doTickIdle(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var u=N.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),f=u.len;if(!(f>=o)){c.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=a.details;if(!d||d.live&&this.levelLastLoaded!==i)this.state=K.WAITING_LEVEL;else{if(this._streamEnded(u,d)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(l.default.BUFFER_EOS,h),void(this.state=K.ENDED)}this._fetchPayloadOrEos(r,u,d)}}}}},t._fetchPayloadOrEos=function _fetchPayloadOrEos(e,t,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s,u=a[0].start,l=a[o-1].start+a[o-1].duration,f=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(o<d)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(n,f,u,l,r,a,o)))return}else f<u&&(s=a[0]);s||(s=this._findFragment(u,r,o,a,f,l,n)),s&&(s.encrypted?(c.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(c.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+f.toFixed(3)),this._loadFragment(s)))}},t._ensureFragmentAtLivePoint=function _ensureFragmentAtLivePoint(e,t,n,r,i,a,o){var s,u=this.hls.config,l=this.media,f=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-u.maxFragLookUpTolerance,r-f)){var d=this.liveSyncPosition=this.computeLivePosition(n,e);c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,l&&l.readyState&&l.duration>d&&(l.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&&t>r&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=findFragmentByPDT(a,i.endProgramDateTime,u.maxFragLookUpTolerance);else{var h=i.sn+1;if(h>=e.startSN&&h<=e.endSN){var p=a[h-e.startSN];i.cc===p.cc&&(s=p,c.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=L.search(a,(function(e){return i.cc-e.cc})))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=a[Math.min(o-1,Math.round(o/2))],c.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},t._findFragment=function _findFragment(e,t,n,r,i,a,o){var s,u=this.hls.config;i<a?s=findFragmentByPTS(t,r,i,i>a-u.maxFragLookUpTolerance?0:u.maxFragLookUpTolerance):s=r[n-1];if(s){var l=s.sn-o.startSN,f=t&&s.level===t.level,d=r[l-1],h=r[l+1];if(t&&s.sn===t.sn)if(f&&!s.backtracked)if(s.sn<o.endSN){var p=t.deltaPTS;p&&p>u.maxBufferHole&&t.dropped&&l?(s=d,c.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=h,c.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(h&&h.backtracked?(c.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,d?(s=d).backtracked=!0:l&&(s=null)))}return s},t._loadKey=function _loadKey(e){this.state=K.KEY_LOADING,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},t._loadFragment=function _loadFragment(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,Object(u.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===P||t===j?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(l.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new V(this.hls,"main")),this.state=K.FRAG_LOADING):t===M&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},t.getBufferedFrag=function getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,a.MAIN)},t.followingBufferedFrag=function followingBufferedFrag(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t._checkFragmentChanged=function _checkFragmentChanged(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),N.isBuffered(n,t)?e=this.getBufferedFrag(t):N.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},t.immediateLevelSwitch=function immediateLevelSwitch(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.immediateLevelSwitchEnd=function immediateLevelSwitchEnd(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,N.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.nextLevelSwitch=function nextLevelSwitch(){var e=this.media;if(e&&e.readyState){var t,n,r;if((n=this.getBufferedFrag(e.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(e.currentTime+t))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.flushMainBuffer=function flushMainBuffer(e,t){this.state=K.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,n)},t.onMediaAttached=function onMediaAttached(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new $(n,t,this.fragmentTracker,this.hls)},t.onMediaDetaching=function onMediaDetaching(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.onMediaSeeked=function onMediaSeeked(){var e=this.media,t=e?e.currentTime:void 0;Object(u.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},t.onManifestLoading=function onManifestLoading(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.onManifestParsed=function onManifestParsed(e){var t,n=!1,r=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},t.onLevelLoaded=function onLevelLoaded(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=t.totalduration,o=0;if(c.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=i.details;s&&t.fragments.length>0?(mergeDetails(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(u.isFiniteNumber)(o)?c.logger.log("live playlist sliding:"+o.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),alignStream(this.fragPrevious,r,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,alignStream(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(l.default.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var f=t.startTimeOffset;Object(u.isFiniteNumber)(f)?(f<0&&(c.logger.log("negative start time offset "+f+", count from end of last fragment"),f=o+a+f),c.logger.log("start time offset found in playlist, adjust startPosition to "+f),this.startPosition=f):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===K.WAITING_LEVEL&&(this.state=K.IDLE),this.tick()},t.onKeyLoaded=function onKeyLoaded(){this.state===K.KEY_LOADING&&(this.state=K.IDLE,this.tick())},t.onFragLoaded=function onFragLoaded(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,a=e.frag;if(this.state===K.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var o=e.stats,s=r[t.level],u=s.details;if(this.bitrateTest=!1,this.stats=o,c.logger.log("Loaded "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level),a.bitrateTest&&n.nextLoadLevel)this.state=K.IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=K.IDLE,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=e.payload,n.trigger(l.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level+", cc "+t.cc),this.state=K.PARSING,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var f=!(i&&i.seeking)&&(u.PTSKnown||!u.live),d=u.initSegment?u.initSegment.data:[],h=this._getAudioCodec(s);(this.demuxer=this.demuxer||new V(this.hls,"main")).push(e.payload,d,h,s.videoCodec,t,u.totalduration,f)}}this.fragLoadError=0},t.onFragParsingInitSegment=function onFragParsingInitSegment(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===K.PARSING){var r,i,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",c.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=e.id}for(r in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,a),a){i=a[r],c.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}},t.onFragParsingData=function onFragParsingData(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"main"===e.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===K.PARSING){var i=this.levels[this.level],a=n;if(Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),!0===e.hasAudio&&a.addElementaryStream(p.AUDIO),!0===e.hasVideo&&a.addElementaryStream(p.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped)if(a.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=K.IDLE,this.fragPrevious=a,void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=updateFragPTSDTS(i.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),f=this.hls;f.trigger(l.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(n){n&&n.length&&t.state===K.PARSING&&(t.appended=!0,t.pendingBuffering=!0,f.trigger(l.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))})),this.tick()}},t.onFragParsed=function onFragParsed(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===K.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=K.PARSED,this._checkAppendedParsed())},t.onAudioTrackSwitching=function onAudioTrackSwitching(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=K.IDLE}var i=this.hls;i.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},t.onAudioTrackSwitched=function onAudioTrackSwitched(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},t.onBufferCreated=function onBufferCreated(e){var t,n,r=e.tracks,i=!1;for(var a in r){var o=r[a];"main"===o.id?(n=a,t=o,"video"===a&&(this.videoBuffer=r[a].buffer)):i=!0}i&&t?(c.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},t.onBufferAppended=function onBufferAppended(e){if("main"===e.parent){var t=this.state;t!==K.PARSING&&t!==K.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t._checkAppendedParsed=function _checkAppendedParsed(){if(this.state===K.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+Y.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=K.IDLE}this.tick()}},t.onError=function onError(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&N.isBuffered(this.media,this.media.currentTime)&&N.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=K.FRAG_LOADING_WAITING_RETRY}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=K.ERROR;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==K.ERROR&&(e.fatal?(this.state=K.ERROR,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==K.WAITING_LEVEL||(this.state=K.IDLE));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==K.PARSING&&this.state!==K.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=K.IDLE):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t._reduceMaxBufferLength=function _reduceMaxBufferLength(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},t._checkBuffer=function _checkBuffer(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},t.onFragLoadEmergencyAborted=function onFragLoadEmergencyAborted(){this.state=K.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.onBufferFlushed=function onBufferFlushed(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,e.buffered),this.state=K.IDLE,this.fragPrevious=null},t.swapAudioCodec=function swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap},t.computeLivePosition=function computeLivePosition(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},t._seekToStartPos=function _seekToStartPos(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&(c.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},t._getAudioCodec=function _getAudioCodec(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},function stream_controller_createClass(e,t,n){return t&&stream_controller_defineProperties(e.prototype,t),n&&stream_controller_defineProperties(e,n),e}(StreamController,[{key:"state",set:function set(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream:"+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function get(){return this._state}},{key:"currentLevel",get:function get(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function get(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function get(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function get(){return this._liveSyncPosition},set:function set(e){this._liveSyncPosition=e}}]),StreamController}(J);function level_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}window.performance;var Q,ee=function(e){function LevelController(t){var n;return(n=e.call(this,t,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.FRAG_LOADED,l.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Q=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}!function level_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(LevelController,e);var t=LevelController.prototype;return t.onHandlerDestroying=function onHandlerDestroying(){this.clearTimer(),this.manualLevelIndex=-1},t.clearTimer=function clearTimer(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.startLoad=function startLoad(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.stopLoad=function stopLoad(){this.canload=!1},t.onManifestLoaded=function onManifestLoaded(e){var t,n=[],r=[],i={},a=null,o=!1,u=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,u=u||!!e.audioCodec,Q&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(a=i[e.bitrate])?a.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(u=!0,addGroupId(a||e,"audio",t.AUDIO)),t.SUBTITLES&&addGroupId(a||e,"text",t.SUBTITLES))})),o&&u&&(n=n.filter((function(e){return!!e.videoCodec}))),n=n.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||isCodecSupportedInMp4(t,"audio"))&&(!n||isCodecSupportedInMp4(n,"video"))})),e.audioTracks&&(r=e.audioTracks.filter((function(e){return!e.audioCodec||isCodecSupportedInMp4(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),n.length>0){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var f=0;f<n.length;f++)if(n[f].bitrate===t){this._firstLevel=f,c.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(l.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:u,video:o,altAudio:r.some((function(e){return!!e.url}))})}else this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.setLevelInternal=function setLevelInternal(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(l.default.LEVEL_SWITCHING,r)}var i=t[e],a=i.details;if(!a||a.live){var o=i.urlId;n.trigger(l.default.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else n.trigger(l.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.onError=function onError(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},t.recoverLevel=function recoverLevel(e,t,n,r){var i,a,o,s=this,u=this.hls.config,l=e.details,f=this._levels[t];if(f.loadError++,f.fragmentError=r,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+l+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=f.url.length)>1&&f.loadError<i?(f.urlId=(f.urlId+1)%i,f.details=void 0,c.logger.warn("level controller, "+l+" for level "+t+": switching to redundant URL-id "+f.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+l+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):r&&(c.logger.warn("level controller, "+l+": reload a fragment"),this.currentLevelIndex=null))},t.onFragLoaded=function onFragLoaded(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.onLevelLoaded=function onLevelLoaded(e){var t=this,n=e.level,r=e.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var a=computeReloadInterval(i.details,r,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),a)}else this.clearTimer()}},t.onAudioTrackSwitched=function onAudioTrackSwitched(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},t.loadLevel=function loadLevel(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"===typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];c.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(l.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},function level_controller_createClass(e,t,n){return t&&level_controller_defineProperties(e.prototype,t),n&&level_controller_defineProperties(e,n),e}(LevelController,[{key:"levels",get:function get(){return this._levels}},{key:"level",get:function get(){return this.currentLevelIndex},set:function set(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function get(){return this.manualLevelIndex},set:function set(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function get(){return this._firstLevel},set:function set(e){this._firstLevel=e}},{key:"startLevel",get:function get(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function set(e){this._startLevel=e}},{key:"nextLoadLevel",get:function get(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function set(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),LevelController}(d),te=n("./src/demux/id3.js");function sendAddTrackEvent(e,t){var n=null;try{n=new window.Event("addtrack")}catch(r){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function clearCurrentCues(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var ne=function(e){function ID3TrackController(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA)||this).id3Track=void 0,n.media=void 0,n}!function id3_track_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(ID3TrackController,e);var t=ID3TrackController.prototype;return t.destroy=function destroy(){d.prototype.destroy.call(this)},t.onMediaAttached=function onMediaAttached(e){this.media=e.media,this.media},t.onMediaDetaching=function onMediaDetaching(){clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.getID3Track=function getID3Track(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return sendAddTrackEvent(n,this.media),n}return this.media.addTextTrack("metadata","id3")},t.onFragParsingMetadata=function onFragParsingMetadata(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=te.default.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var l=a[u];if(!te.default.isTimeStampFrame(l)){var c=new r(o,s,"");c.value=l,this.id3Track.addCue(c)}}}}},ID3TrackController}(d);var re=function(){function EWMA(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var e=EWMA.prototype;return e.sample=function sample(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.getTotalWeight=function getTotalWeight(){return this.totalWeight_},e.getEstimate=function getEstimate(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},EWMA}(),ie=function(){function EwmaBandWidthEstimator(e,t,n,r){this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new re(t),this.fast_=new re(n)}var e=EwmaBandWidthEstimator.prototype;return e.sample=function sample(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function canEstimate(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.getEstimate=function getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function destroy(){},EwmaBandWidthEstimator}();function abr_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function abr_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ae=window.performance,oe=function(e){function AbrController(t){var n;return(n=e.call(this,t,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=t,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(abr_controller_assertThisInitialized(abr_controller_assertThisInitialized(n))),n}!function abr_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(AbrController,e);var t=AbrController.prototype;return t.destroy=function destroy(){this.clearTimer(),d.prototype.destroy.call(this)},t.onFragLoading=function onFragLoading(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,a=i.config,o=t.level;i.levels[o].details.live?(n=a.abrEwmaFastLive,r=a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,r=a.abrEwmaSlowVoD),this._bwEstimator=new ie(i,r,n,a.abrEwmaDefaultEstimate)}},t._abandonRulesCheck=function _abandonRulesCheck(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=ae.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var u=e.levels,f=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),d=u[n.level],h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*h/8)),g=t.currentTime,m=(p-a.loaded)/f,v=(N.bufferInfo(t,g,e.config.maxBufferHole).end-g)/s;if(v<2*n.duration/s&&m>v){var y;for(y=n.level-1;y>i;y--){var _=u[y].realBitrate?Math.max(u[y].realBitrate,u[y].bitrate):u[y].bitrate;if(n.duration*_/(6.4*f)<v)break}void 0<m&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+m.toFixed(1)+":"+v.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},t.onFragLoaded=function onFragLoaded(e){var t=e.frag;if("main"===t.type&&Object(u.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.onFragBuffered=function onFragBuffered(e){var t=e.stats,n=e.frag;if(!0!==t.aborted&&"main"===n.type&&Object(u.isFiniteNumber)(n.sn)&&(!n.bitrateTest||t.tload===t.tbuffered)){var r=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},t.onError=function onError(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.clearTimer=function clearTimer(){clearInterval(this.timer),this.timer=null},t._findBestLevel=function _findBestLevel(e,t,n,r,i,a,o,s,u){for(var l=i;l>=r;l--){var f=u[l];if(f){var d=f.details,h=d?d.totalduration/d.fragments.length:t,p=!!d&&d.live,g=void 0;g=l<=e?o*n:s*n;var m=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,v=m*h/g;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(g)+"/"+m+"/"+h+"/"+a+"/"+v),g>m&&(!v||p&&!this.bitrateTestDelay||v<a))return l}}return-1},function abr_controller_createClass(e,t,n){return t&&abr_controller_defineProperties(e.prototype,t),n&&abr_controller_defineProperties(e,n),e}(AbrController,[{key:"nextAutoLevel",get:function get(){var e=this._nextAutoLevel,t=this._bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function set(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function get(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,d=(N.bufferInfo(a,u,r.maxBufferHole).end-u)/l,h=this._findBestLevel(o,s,f,i,t,d,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(h>=0)return h;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(0===d){var v=this.bitrateTestDelay;if(v)p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-v,c.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1}return h=this._findBestLevel(o,s,f,i,t,d+p,g,m,n),Math.max(h,0)}}]),AbrController}(d);var se=getMediaSource(),ue=function(e){function BufferController(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){c.logger.log("media source opened"),n.hls.trigger(l.default.MEDIA_ATTACHED,{media:n.media});var e=n.mediaSource;e&&e.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){c.logger.log("media source closed")},n._onMediaSourceEnded=function(){c.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var e=n.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+n.audioTimestampOffset),e.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var t=n.parent,r=n.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0),i={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}n.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),n.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n}!function buffer_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(BufferController,e);var t=BufferController.prototype;return t.destroy=function destroy(){d.prototype.destroy.call(this)},t.onLevelPtsUpdated=function onLevelPtsUpdated(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(a){c.logger.warn("can not abort audio buffer: "+a)}i?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},t.onManifestParsed=function onManifestParsed(e){this.bufferCodecEventsExpected=e.altAudio?2:1,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function onMediaAttaching(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new se;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},t.onMediaDetaching=function onMediaDetaching(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(t){c.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(l.default.MEDIA_DETACHED)},t.checkPendingTracks=function checkPendingTracks(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},t.onBufferReset=function onBufferReset(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(r){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.onBufferCodecs=function onBufferCodecs(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(n){t.pendingTracks[n]=e[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.createSourceBuffers=function createSourceBuffers(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in e)if(!t[r]){var i=e[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;c.logger.log("creating sourceBuffer("+o+")");try{var u=t[r]=n.addSourceBuffer(o);u.addEventListener("updateend",this._onSBUpdateEnd),u.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:u,codec:a,container:i.container,levelCodec:i.levelCodec}}catch(f){c.logger.error("error while trying to add sourceBuffer:"+f.message),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:f,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:this.tracks})},t.onBufferAppending=function onBufferAppending(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.onBufferEos=function onBufferEos(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var n=this.sourceBuffer[t];n&&!n.ended&&(n.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},t.checkEos=function checkEos(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(i){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},t.onBufferFlushing=function onBufferFlushing(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.flushLiveBackBuffer=function flushLiveBackBuffer(){if(!this.media)throw Error("flushLiveBackBuffer called without attaching media");if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),a=r.length-1;a>=0;a--){var o=r[a],s=n[o];if(s){var u=s.buffered;u.length>0&&i>u.start(0)&&this.removeBufferRange(o,s,0,i)}}}},t.onLevelUpdated=function onLevelUpdated(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},t.updateMediaElementDuration=function updateMediaElementDuration(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(u.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},t.doFlush=function doFlush(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(t+=i.buffered.length)}}catch(a){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}},t.doAppending=function doAppending(){var e=this.hls,t=this.segments,n=this.sourceBuffer;this.media;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var r=t.shift();if(r)try{var i=n[r.type];if(!i)return void this._onSBUpdateEnd();if(i.updating)return void t.unshift(r);i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0}catch(o){c.logger.error("error while trying to append buffer:"+o.message),t.unshift(r);var a={type:s.ErrorTypes.MEDIA_ERROR,parent:r.parent,details:"",fatal:!1};22===o.code?(this.segments=[],a.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,a.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry&&(c.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),e.trigger(l.default.ERROR,a)}}}},t.flushBuffer=function flushBuffer(e,t,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+i+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var a=r[n];if(a){if(a.ended=!1,a.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},t.removeBufferRange=function removeBufferRange(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var a=t.buffered.start(i),o=t.buffered.end(i),s=Math.max(a,n),u=Math.min(o,r);if(Math.min(u,o)-s>.5){var l="null";return this.media&&(l=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+l),t.remove(s,u),!0}}}catch(f){c.logger.warn("removeBufferRange failed",f)}return!1},BufferController}(d);function cap_level_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le=function(e){function CapLevelController(t){var n;return(n=e.call(this,t,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_CODECS,l.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}!function cap_level_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(CapLevelController,e);var t=CapLevelController.prototype;return t.destroy=function destroy(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},t.onFpsDropLevelCapping=function onFpsDropLevelCapping(e){CapLevelController.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.onMediaAttaching=function onMediaAttaching(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},t.onManifestParsed=function onManifestParsed(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},t.onBufferCodecs=function onBufferCodecs(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},t.onLevelsUpdated=function onLevelsUpdated(e){this.levels=e.levels},t.onMediaDetaching=function onMediaDetaching(){this.stopCapping()},t.detectPlayerSize=function detectPlayerSize(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.getMaxLevel=function getMaxLevel(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,r){return CapLevelController.isLevelAllowed(r,t.restrictedLevels)&&r<=e}));return CapLevelController.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},t.startCapping=function startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.stopCapping=function stopCapping(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},CapLevelController.isLevelAllowed=function isLevelAllowed(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},CapLevelController.getMaxLevelByMediaSize=function getMaxLevelByMediaSize(e,t,n){if(!e||e&&!e.length)return-1;for(var r=function atGreatestBandiwdth(e,t){return!t||(e.width!==t.width||e.height!==t.height)},i=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=n)&&r(o,e[a+1])){i=a;break}}return i},function cap_level_controller_createClass(e,t,n){return t&&cap_level_controller_defineProperties(e.prototype,t),n&&cap_level_controller_defineProperties(e,n),e}(CapLevelController,[{key:"mediaWidth",get:function get(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=CapLevelController.contentScaleFactor),e}},{key:"mediaHeight",get:function get(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=CapLevelController.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function get(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}}]),CapLevelController}(d);var ce=window.performance,fe=function(e){function FPSController(t){return e.call(this,t,l.default.MEDIA_ATTACHING)||this}!function fps_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(FPSController,e);var t=FPSController.prototype;return t.destroy=function destroy(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.onMediaAttaching=function onMediaAttaching(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"===typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.checkFPS=function checkFPS(e,t,n){var r=ce.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var f=u.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=f)&&(f-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:u.currentLevel}),u.autoLevelCapping=f,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function checkFPSInterval(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},FPSController}(d),de=window,he=de.performance,pe=de.XMLHttpRequest,ge=function(){function XhrLoader(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var e=XhrLoader.prototype;return e.destroy=function destroy(){this.abort(),this.loader=null},e.abort=function abort(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function load(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:he.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.loadInternal=function loadInternal(){var e,t=this.context;e=this.loader=new pe;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(i){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(i){return void this.callbacks.onError({code:e.status,text:i.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.readystatechange=function readystatechange(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(he.now(),r.trequest)),4===n){var o=t.status;if(o>=200&&o<300){var s,u;r.tload=Math.max(r.tfirst,he.now()),u="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=u;var l={url:t.responseURL,data:s};this.callbacks.onSuccess(l,r,i,t)}else r.retry>=a.maxRetry||o>=400&&o<499?(c.logger.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(c.logger.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function loadtimeout(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function loadprogress(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},XhrLoader}();function audio_track_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var me=function(e){function AudioTrackController(t){var n;return(n=e.call(this,t,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.AUDIO_TRACK_LOADED,l.default.AUDIO_TRACK_SWITCHED,l.default.LEVEL_LOADED,l.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}!function audio_track_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(AudioTrackController,e);var t=AudioTrackController.prototype;return t.onManifestLoading=function onManifestLoading(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.onManifestParsed=function onManifestParsed(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.onAudioTrackLoaded=function onAudioTrackLoaded(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.onAudioTrackSwitched=function onAudioTrackSwitched(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.onLevelLoaded=function onLevelLoaded(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},t.onError=function onError(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},t._setAudioTrack=function _setAudioTrack(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,r=t.type,i=t.id;this.hls.trigger(l.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(t)}},t.doTick=function doTick(){this._updateTrack(this._trackId)},t._selectInitialAudioTrack=function _selectInitialAudioTrack(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=t.filter((function(e){return e.default}));i.length?t=i:c.logger.warn("No default audio tracks defined")}var a=!1,o=function traverseTracks(){t.forEach((function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||r&&r!==t.name||(e._setAudioTrack(t.id),a=!0)}))};o(),a||(r=null,o()),a||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t._needsTrackLoading=function _needsTrackLoading(e){var t=e.details,n=e.url;return!(t&&!t.live)&&!!n},t._loadTrackDetailsIfNeeded=function _loadTrackDetailsIfNeeded(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;c.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},t._updateTrack=function _updateTrack(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t._handleLoadError=function _handleLoadError(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,i=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var a=e,o=0;o<this.tracks.length;o++){if(!this.trackIdBlacklist[o])if(this.tracks[o].name===n){a=o;break}}a!==e?(c.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):c.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},function audio_track_controller_createClass(e,t,n){return t&&audio_track_controller_defineProperties(e.prototype,t),n&&audio_track_controller_defineProperties(e,n),e}(AudioTrackController,[{key:"audioTracks",get:function get(){return this.tracks}},{key:"audioTrack",get:function get(){return this._trackId},set:function set(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}]),AudioTrackController}(X);function audio_stream_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ve=window.performance,ye=function(e){function AudioStreamController(t,n){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=t.config,r.audioCodecSwap=!1,r._state=K.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}!function audio_stream_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(AudioStreamController,e);var t=AudioStreamController.prototype;return t.onInitPtsFound=function onInitPtsFound(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,c.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===K.WAITING_INIT_PTS&&this.tick())},t.startLoad=function startLoad(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=K.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=K.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=K.STOPPED},t.doTick=function doTick(){var e,t,n,r=this.hls,i=r.config;switch(this.state){case K.ERROR:case K.PAUSED:case K.BUFFER_FLUSHING:break;case K.STARTING:this.state=K.WAITING_TRACK,this.loadedmetadata=!1;break;case K.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,f=N.bufferInfo(o,e,i.maxBufferHole),d=N.bufferInfo(s,e,i.maxBufferHole),h=f.len,p=f.end,g=this.fragPrevious,m=Math.min(i.maxBufferLength,i.maxMaxBufferLength),v=Math.max(m,d.len),y=this.audioSwitch,_=this.trackId;if((h<v||y)&&_<a.length){if("undefined"===typeof(n=a[_].details)){this.state=K.WAITING_TRACK;break}if(!y&&this._streamEnded(f,n))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=K.ENDED);var b,x=n.fragments,w=x.length,k=x[0].start,S=x[w-1].start+x[w-1].duration;if(y)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=e,n.PTSKnown&&e<k){if(!(f.end>k||f.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=k+.05}if(n.initSegment&&!n.initSegment.data)b=n.initSegment;else if(p<=k){if(b=x[0],null!==this.videoTrackCC&&b.cc!==this.videoTrackCC&&(b=function findFragWithCC(e,t){return L.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(x,this.videoTrackCC)),n.live&&b.loadIdx&&b.loadIdx===this.fragLoadIdx){var E=f.nextStart?f.nextStart:k;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var T,C=i.maxFragLookUpTolerance,O=g?x[g.sn-x[0].sn+1]:void 0,A=function fragmentWithinToleranceTest(e){var t=Math.min(C,e.duration);return e.start+e.duration-t<=p?1:e.start-t>p&&e.start?-1:0};p<S?(p>S-C&&(C=0),T=O&&!A(O)?O:L.search(x,A)):T=x[w-1],T&&(b=T,k=T.start,g&&b.level===g.level&&b.sn===g.sn&&(b.sn<n.endSN?(b=x[b.sn+1-n.startSN],c.logger.log("SN just loaded, load next one: "+b.sn)):b=null))}b&&(b.encrypted?(c.logger.log("Loading key for "+b.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+_),this.state=K.KEY_LOADING,r.trigger(l.default.KEY_LOADING,{frag:b})):(c.logger.log("Loading "+b.sn+", cc: "+b.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+_+", currentTime:"+e+",bufferEnd:"+p.toFixed(3)),this.fragCurrent=b,(y||this.fragmentTracker.getState(b)===P)&&(this.startFragRequested=!0,Object(u.isFiniteNumber)(b.sn)&&(this.nextLoadPosition=b.start+b.duration),r.trigger(l.default.FRAG_LOADING,{frag:b}),this.state=K.FRAG_LOADING)))}break;case K.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=K.IDLE);break;case K.FRAG_LOADING_WAITING_RETRY:var R=ve.now(),D=this.retryDate,M=(o=this.media)&&o.seeking;(!D||R>=D||M)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=K.IDLE);break;case K.WAITING_INIT_PTS:var j=this.videoTrackCC;if(void 0===this.initPTS[j])break;var F=this.waitingFragment;if(F){var I=F.frag.cc;j!==I?(t=this.tracks[this.trackId]).details&&t.details.live&&(c.logger.warn("Waiting fragment CC ("+I+") does not match video track CC ("+j+")"),this.waitingFragment=null,this.state=K.IDLE):(this.state=K.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=K.IDLE;break;case K.STOPPED:case K.FRAG_LOADING:case K.PARSING:case K.PARSED:case K.ENDED:}},t.onMediaAttached=function onMediaAttached(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.onMediaDetaching=function onMediaDetaching(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.onAudioTracksUpdated=function onAudioTracksUpdated(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},t.onAudioTrackSwitching=function onAudioTrackSwitching(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=K.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=K.IDLE),this.tick()},t.onAudioTrackLoaded=function onAudioTrackLoaded(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(c.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=r.details;o&&t.fragments.length>0?(mergeDetails(o,t),a=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+a.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(u.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===K.WAITING_TRACK&&(this.state=K.IDLE),this.tick()},t.onKeyLoaded=function onKeyLoaded(){this.state===K.KEY_LOADING&&(this.state=K.IDLE,this.tick())},t.onFragLoaded=function onFragLoaded(e){var t=this.fragCurrent,n=e.frag;if(this.state===K.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=t.level,s=t.sn,u=t.cc,f=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===s)this.state=K.IDLE,d.tparsed=d.tbuffered=ve.now(),i.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=K.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new V(this.hls,"audio"));var h=this.initPTS[u],p=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o);this.demuxer.push(e.payload,p,f,null,t,a,!1,h)}else c.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.state=K.WAITING_INIT_PTS}}this.fragLoadError=0},t.onFragParsingInitSegment=function onFragParsingInitSegment(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===K.PARSING){var r,i=e.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,i),c.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,o))}this.tick()}}},t.onFragParsingData=function onFragParsingData(e){var t=this,n=this.fragCurrent,r=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&r.sn===n.sn&&r.level===n.level&&this.state===K.PARSING){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(p.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),updateFragPTSDTS(a.details,n,e.startPTS,e.endPTS);var f=this.audioSwitch,d=this.media,h=!1;if(f&&d)if(d.readyState){var g=d.currentTime;c.logger.log("switching audio track : currentTime:"+g),g>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=K.BUFFER_FLUSHING,o.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:i});var m=this.pendingData;if(!m)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(l.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&m.push({type:e.type,data:t,parent:"audio",content:"data"})})),!h&&m.length&&(m.forEach((function(e){t.state===K.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(l.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},t.onFragParsed=function onFragParsed(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===K.PARSING&&(this.stats.tparsed=ve.now(),this.state=K.PARSED,this._checkAppendedParsed())},t.onBufferReset=function onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.onBufferCreated=function onBufferCreated(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.onBufferAppended=function onBufferAppended(e){if("audio"===e.parent){var t=this.state;t!==K.PARSING&&t!==K.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t._checkAppendedParsed=function _checkAppendedParsed(){if(this.state===K.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=ve.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("audio buffered : "+Y.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=K.IDLE}this.tick()}},t.onError=function onError(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=ve.now()+a,this.state=K.FRAG_LOADING_WAITING_RETRY}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=K.ERROR}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==K.ERROR&&(this.state=e.fatal?K.ERROR:K.IDLE,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===K.PARSING||this.state===K.PARSED)){var o=this.mediaBuffer,u=this.media.currentTime;if(o&&N.isBuffered(o,u)&&N.isBuffered(o,u+.5)){var f=this.config;f.maxMaxBufferLength>=f.maxBufferLength&&(f.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+f.maxMaxBufferLength+"s")),this.state=K.IDLE}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=K.BUFFER_FLUSHING,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.onBufferFlushed=function onBufferFlushed(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=K.PARSED):(this.state=K.IDLE,this.fragPrevious=null,this.tick())},function audio_stream_controller_createClass(e,t,n){return t&&audio_stream_controller_defineProperties(e.prototype,t),n&&audio_stream_controller_defineProperties(e,n),e}(AudioStreamController,[{key:"state",set:function set(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function get(){return this._state}}]),AudioStreamController}(J),_e=function(){if("undefined"!==typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function findAlignSetting(e){return"string"===typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function extend(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function VTTCue(n,r,i){var a=this,o={enumerable:!0};a.hasBeenReset=!1;var s="",u=!1,l=n,c=r,f=i,d=null,h="",p=!0,g="auto",m="start",v=50,y="middle",_=50,b="middle";Object.defineProperty(a,"id",extend({},o,{get:function get(){return s},set:function set(e){s=""+e}})),Object.defineProperty(a,"pauseOnExit",extend({},o,{get:function get(){return u},set:function set(e){u=!!e}})),Object.defineProperty(a,"startTime",extend({},o,{get:function get(){return l},set:function set(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",extend({},o,{get:function get(){return c},set:function set(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",extend({},o,{get:function get(){return f},set:function set(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",extend({},o,{get:function get(){return d},set:function set(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",extend({},o,{get:function get(){return h},set:function set(e){var n=function findDirectionSetting(e){return"string"===typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");h=n,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",extend({},o,{get:function get(){return p},set:function set(e){p=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",extend({},o,{get:function get(){return g},set:function set(t){if("number"!==typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",extend({},o,{get:function get(){return m},set:function set(e){var t=findAlignSetting(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",extend({},o,{get:function get(){return v},set:function set(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",extend({},o,{get:function get(){return y},set:function set(e){var t=findAlignSetting(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",extend({},o,{get:function get(){return _},set:function set(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",extend({},o,{get:function get(){return b},set:function set(e){var t=findAlignSetting(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),a.displayState=void 0}return VTTCue.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},VTTCue}(),be=function StringDecoder(){return{decode:function decode(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function VTTParser(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new be,this.regionList=[]}function Settings(){this.values=Object.create(null)}function parseOptions(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"===typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}Settings.prototype={set:function set(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function has(e){return e in this.values},alt:function alt(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function percent(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var xe=new _e(0,0,0),we="middle"===xe.align?"middle":"center";function parseCue(e,t,n){var r=e;function consumeTimeStamp(){var t=function parseTimeStamp(e){function computeSeconds(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var t=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return t?t[3]?computeSeconds(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?computeSeconds(t[1],t[2],0,t[4]):computeSeconds(0,t[1],t[2],t[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function skipWhitespace(){e=e.replace(/^\s+/,"")}if(skipWhitespace(),t.startTime=consumeTimeStamp(),skipWhitespace(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),skipWhitespace(),t.endTime=consumeTimeStamp(),skipWhitespace(),function consumeCueSettings(e,t){var r=new Settings;parseOptions(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",we,"end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",we,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",we,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===xe.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",we);var a=r.get("position","auto");"auto"===a&&50===xe.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function fixLineBreaks(e){return e.replace(/<br(?: \/)?>/gi,"\n")}VTTParser.prototype={parse:function parse(e){var t=this;function collectNextLine(){var e=t.buffer,n=0;for(e=fixLineBreaks(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var r=(n=collectNextLine()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var i=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:n=collectNextLine(),t.state){case"HEADER":/:/.test(n)?parseOptions(n,(function(e,t){}),/:/):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new _e(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{parseCue(n,t.cue,t.regionList)}catch(o){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("--\x3e");if(!n||a&&(i=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID");continue}}}catch(o){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function flush(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var ke=VTTParser;function newCue(e,t,n,r){for(var i,a,o,s,u,l=window.VTTCue||window.TextTrackCue,c=0;c<r.rows.length;c++)if(o=!0,s=0,u="",!(i=r.rows[c]).isEmpty()){for(var f=0;f<i.chars.length;f++)i.chars[f].uchar.match(/\s/)&&o?s++:(u+=i.chars[f].uchar,o=!1);i.cueStartTime=t,t===n&&(n+=1e-4),a=new l(t,n,fixLineBreaks(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ee=function getCharForByte(e){var t=e;return Se.hasOwnProperty(e)&&(t=Se[e]),String.fromCharCode(t)},Te=15,Ce=100,Oe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ae={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Re={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},De={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Pe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Me={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function setTime(e){this.time=e},log:function log(e,t){this.verboseFilter[e];this.verboseLevel}},je=function numArrayToHexArray(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},Fe=function(){function PenState(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=PenState.prototype;return e.reset=function reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function setStyles(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},e.isDefault=function isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.copy=function copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.toString=function toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},PenState}(),Ie=function(){function StyledUnicodeChar(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new Fe(t,n,r,i,a)}var e=StyledUnicodeChar.prototype;return e.reset=function reset(){this.uchar=" ",this.penState.reset()},e.setChar=function setChar(e,t){this.uchar=e,this.penState.copy(t)},e.setPenState=function setPenState(e){this.penState.copy(e)},e.equals=function equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.copy=function copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.isEmpty=function isEmpty(){return" "===this.uchar&&this.penState.isDefault()},StyledUnicodeChar}(),Le=function(){function Row(){this.chars=[];for(var e=0;e<Ce;e++)this.chars.push(new Ie);this.pos=0,this.currPenState=new Fe}var e=Row.prototype;return e.equals=function equals(e){for(var t=!0,n=0;n<Ce;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.copy=function copy(e){for(var t=0;t<Ce;t++)this.chars[t].copy(e.chars[t])},e.isEmpty=function isEmpty(){for(var e=!0,t=0;t<Ce;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.setCursor=function setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(Me.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Ce&&(Me.log("ERROR","Too large cursor position "+this.pos),this.pos=Ce)},e.moveCursor=function moveCursor(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.backSpace=function backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function insertChar(e){e>=144&&this.backSpace();var t=Ee(e);this.pos>=Ce?Me.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.clearFromPos=function clearFromPos(e){var t;for(t=e;t<Ce;t++)this.chars[t].reset()},e.clear=function clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function clearToEndOfRow(){this.clearFromPos(this.pos)},e.getTextString=function getTextString(){for(var e=[],t=!0,n=0;n<Ce;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},e.setPenStyles=function setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},Row}(),Ne=function(){function CaptionScreen(){this.rows=[];for(var e=0;e<Te;e++)this.rows.push(new Le);this.currRow=Te-1,this.nrRollUpRows=null,this.reset()}var e=CaptionScreen.prototype;return e.reset=function reset(){for(var e=0;e<Te;e++)this.rows[e].clear();this.currRow=Te-1},e.equals=function equals(e){for(var t=!0,n=0;n<Te;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.copy=function copy(e){for(var t=0;t<Te;t++)this.rows[t].copy(e.rows[t])},e.isEmpty=function isEmpty(){for(var e=!0,t=0;t<Te;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.backSpace=function backSpace(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function insertChar(e){this.rows[this.currRow].insertChar(e)},e.setPen=function setPen(e){this.rows[this.currRow].setPenStyles(e)},e.moveCursor=function moveCursor(e){this.rows[this.currRow].moveCursor(e)},e.setCursor=function setCursor(e){Me.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.setPAC=function setPAC(e){Me.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<Te;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<Me.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.setBkgData=function setBkgData(e){Me.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.setRollUpRows=function setRollUpRows(e){this.nrRollUpRows=e},e.rollUp=function rollUp(){if(null!==this.nrRollUpRows){Me.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Me.log("INFO","Rolling up")}else Me.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.getDisplayText=function getDisplayText(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<Te;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.getTextAndFormat=function getTextAndFormat(){return this.rows},CaptionScreen}(),Be=function(){function Cea608Channel(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ne,this.nonDisplayedMemory=new Ne,this.lastOutputScreen=new Ne,this.currRollUpRow=this.displayedMemory.rows[Te-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var e=Cea608Channel.prototype;return e.reset=function reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Te-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.getHandler=function getHandler(){return this.outputFilter},e.setHandler=function setHandler(e){this.outputFilter=e},e.setPAC=function setPAC(e){this.writeScreen.setPAC(e)},e.setBkgData=function setBkgData(e){this.writeScreen.setBkgData(e)},e.setMode=function setMode(e){e!==this.mode&&(this.mode=e,Me.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.insertChars=function insertChars(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Me.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Me.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function ccRCL(){Me.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function ccBS(){Me.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function ccAOF(){},e.ccAON=function ccAON(){},e.ccDER=function ccDER(){Me.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function ccRU(e){Me.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.ccFON=function ccFON(){Me.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function ccRDC(){Me.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function ccTR(){Me.log("INFO","TR"),this.setMode("MODE_TEXT")},e.ccRTD=function ccRTD(){Me.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function ccEDM(){Me.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function ccCR(){Me.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function ccENM(){Me.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function ccEOC(){if(Me.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Me.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function ccTO(e){Me.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.ccMIDROW=function ccMIDROW(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}Me.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.outputDataUpdate=function outputDataUpdate(e){void 0===e&&(e=!1);var t=Me.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},Cea608Channel}(),Ue=function(){function Cea608Parser(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new Be(1,t),new Be(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var e=Cea608Parser.prototype;return e.getHandler=function getHandler(e){return this.channels[e].getHandler()},e.setHandler=function setHandler(e,t){this.channels[e].setHandler(t)},e.addData=function addData(e,t){var n,r,i,a=!1;this.lastTime=e,Me.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(Me.log("DATA","["+je([t[o],t[o+1]])+"] -> ("+je([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n)if(a=this.parseChars(r,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(a);else Me.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Me.log("WARNING","Couldn't parse cleaned data "+je([r,i])+" orig: "+je([t[o],t[o+1]])))}else this.dataCounters.padding+=2},e.parseCmd=function parseCmd(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Me.log("DEBUG","Repeated command ("+je([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.parseMidrow=function parseMidrow(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(Me.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),Me.log("DEBUG","MIDROW ("+je([e,t])+")"),!0))},e.parsePAC=function parsePAC(e,t){var n,r=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=t>=64&&t<=95?1===n?Oe[e]:Re[e]:1===n?Ae[e]:De[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.interpretPAC=function interpretPAC(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function parseChars(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,Me.log("INFO","Special char '"+Ee(a)+"' in channel "+n),r=[a]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var o=je(r);Me.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.parseBackgroundAttributes=function parseBackgroundAttributes(e,t){var n,r,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=Pe[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},e.reset=function reset(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.cueSplitAtTime=function cueSplitAtTime(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},Cea608Parser}(),ze=function(){function OutputFilter(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var e=OutputFilter.prototype;return e.dispatchCue=function dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.newCue=function newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},OutputFilter}(),qe=function startsWith(e,t,n){return e.substr(n||0,t.length)===t},We=function hash(e){for(var hash=5381,t=e.length;t;)hash=33*hash^e.charCodeAt(--t);return(hash>>>0).toString()},Ge={parse:function parse(e,t,n,r,i,a){var o,s=Object(te.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),l="00:00.000",c=0,f=0,d=0,h=[],p=!0,g=new ke;g.oncue=function(e){var t=n[r],i=n.ccOffset;t&&t.new&&(void 0!==f?i=n.ccOffset=t.start:function calculateOffset(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(n,r,d)),d&&(i=d-n.presentationOffset),e.startTime+=i-f,e.endTime+=i-f,e.id=We(e.startTime.toString())+We(e.endTime.toString())+We(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&h.push(e)},g.onparsingerror=function(e){o=e},g.onflush=function(){o&&a?a(o):i(h)},s.forEach((function(e){if(p){if(qe(e,"X-TIMESTAMP-MAP=")){p=!1,e.substr(16).split(",").forEach((function(e){qe(e,"LOCAL:")?l=e.substr(6):qe(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{t+(9e4*n[r].start||0)<0&&(t+=8589934592),c-=t,f=function cueString2millis(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return Object(u.isFiniteNumber)(t)&&Object(u.isFiniteNumber)(n)&&Object(u.isFiniteNumber)(r)&&Object(u.isFiniteNumber)(i)?(t+=1e3*n,t+=6e4*r,t+=36e5*i):-1}(l)/1e3,d=c/9e4,-1===f&&(o=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(i){o=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(p=!1)}g.parse(e+"\n")})),g.flush()}};function timeline_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function canReuseVttTextTrack(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var He=function(e){function TimelineController(t){var n;if((n=e.call(this,t,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.FRAG_DECRYPTED,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.FRAG_LOADED,l.default.LEVEL_SWITCHING,l.default.INIT_PTS_FOUND)||this).hls=t,n.config=t.config,n.enabled=!0,n.Cues=t.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new ze(timeline_controller_assertThisInitialized(timeline_controller_assertThisInitialized(n)),"textTrack1"),i=new ze(timeline_controller_assertThisInitialized(timeline_controller_assertThisInitialized(n)),"textTrack2");n.cea608Parser=new Ue(0,r,i)}return n}!function timeline_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(TimelineController,e);var t=TimelineController.prototype;return t.addCues=function addCues(e,t,n,r){for(var i,a,o,s,u=this.cueRanges,l=!1,c=u.length;c--;){var f=u[c],d=(i=f[0],a=f[1],o=t,s=n,Math.min(a,s)-Math.max(i,o));if(d>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],n),l=!0,d/(n-t)>.5))return}l||u.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,r)},t.onInitPtsFound=function onInitPtsFound(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var n=this.unparsedVttFrags;this.unparsedVttFrags=[],n.forEach((function(e){t.onFragLoaded(e)}))}},t.getExistingTrack=function getExistingTrack(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},t.createCaptionsTrack=function createCaptionsTrack(e){var t=this.captionsProperties[e],n=t.label,r=t.languageCode,i=this.captionsTracks;if(!i[e]){var a=this.getExistingTrack(e);if(a)i[e]=a,clearCurrentCues(i[e]),sendAddTrackEvent(i[e],this.media);else{var o=this.createTextTrack("captions",n,r);o&&(o[e]=!0,i[e]=o)}}},t.createTextTrack=function createTextTrack(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},t.destroy=function destroy(){d.prototype.destroy.call(this)},t.onMediaAttaching=function onMediaAttaching(e){this.media=e.media,this._cleanTracks()},t.onMediaDetaching=function onMediaDetaching(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){clearCurrentCues(e[t]),delete e[t]}))},t.onManifestLoading=function onManifestLoading(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},t._cleanTracks=function _cleanTracks(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)clearCurrentCues(t[n])}},t.onManifestLoaded=function onManifestLoaded(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var i;if(r<n.length){for(var a=null,o=0;o<n.length;o++)if(canReuseVttTextTrack(n[o],e)){a=n[o];break}a&&(i=a)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)}))}},t.onLevelSwitching=function onLevelSwitching(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.onFragLoaded=function onFragLoaded(e){var t=e.frag,n=e.payload;if("main"===t.type){var r=t.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===t.type)if(n.byteLength){if(!Object(u.isFiniteNumber)(this.initPTS[t.cc]))return this.unparsedVttFrags.push(e),void(this.initPTS.length&&this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,n)}else this.hls.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t._parseVTTs=function _parseVTTs(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var r=this.textTracks,i=this.hls;Ge.parse(t,this.initPTS[e.cc],n,e.cc,(function(t){var n=r[e.level];"disabled"!==n.mode?(t.forEach((function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(r){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}})),i.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):i.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}),(function(t){c.logger.log("Failed to parse VTT cue: "+t),i.trigger(l.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},t.onFragDecrypted=function onFragDecrypted(e){var t=e.payload,n=e.frag;if("subtitle"===n.type){if(!Object(u.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(n,t)}},t.onFragParsingUserdata=function onFragParsingUserdata(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},t.extractCea608Data=function extractCea608Data(e){for(var t,n,r,i=31&e[0],a=2,o=[],s=0;s<i;s++)t=e[a++],n=127&e[a++],r=127&e[a++],0===n&&0===r||0!==(4&t)&&0===(3&t)&&(o.push(n),o.push(r));return o},TimelineController}(d);function subtitle_track_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function filterSubtitleTracks(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}var Ve=function(e){function SubtitleTrackController(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADED,l.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n}!function subtitle_track_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(SubtitleTrackController,e);var t=SubtitleTrackController.prototype;return t.destroy=function destroy(){d.prototype.destroy.call(this)},t.onMediaAttached=function onMediaAttached(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.onMediaDetaching=function onMediaDetaching(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},t.onManifestLoaded=function onManifestLoaded(e){var t=this,n=e.subtitles||[];this.tracks=n,this.hls.trigger(l.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},t.onSubtitleTrackLoaded=function onSubtitleTrackLoaded(e){var t=this,n=e.id,r=e.details,i=this.trackId,a=this.tracks,o=a[i];if(n>=a.length||n!==i||!o||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+n+" loaded"),r.live){var s=computeReloadInterval(o.details,r,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},t.startLoad=function startLoad(){this.stopped=!1,this._loadCurrentTrack()},t.stopLoad=function stopLoad(){this.stopped=!0,this._clearReloadTimer()},t._clearReloadTimer=function _clearReloadTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t._loadCurrentTrack=function _loadCurrentTrack(){var e=this.trackId,t=this.tracks,n=this.hls,r=t[e];e<0||!r||r.details&&!r.details.live||(c.logger.log("Loading subtitle track "+e),n.trigger(l.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))},t._toggleTrackModes=function _toggleTrackModes(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;if(t){var i=filterSubtitleTracks(t.textTracks);if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var a=i[r];a&&(a.mode="disabled")}var o=i[e];o&&(o.mode=n?"showing":"hidden")}},t._setSubtitleTrackInternal=function _setSubtitleTrackInternal(e){var t=this.hls,n=this.tracks;!Object(u.isFiniteNumber)(e)||e<-1||e>=n.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(l.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},t._onTextTracksChanged=function _onTextTracksChanged(){if(this.media){for(var e=-1,t=filterSubtitleTracks(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},function subtitle_track_controller_createClass(e,t,n){return t&&subtitle_track_controller_defineProperties(e.prototype,t),n&&subtitle_track_controller_defineProperties(e,n),e}(SubtitleTrackController,[{key:"subtitleTracks",get:function get(){return this.tracks}},{key:"subtitleTrack",get:function get(){return this.trackId},set:function set(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}]),SubtitleTrackController}(d),Ye=n("./src/crypt/decrypter.js");function subtitle_stream_controller_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $e=window.performance,Xe=function(e){function SubtitleStreamController(t,n){var r;return(r=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.ERROR,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED,l.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=t.config,r.state=K.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new Ye.default(t,t.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(subtitle_stream_controller_assertThisInitialized(subtitle_stream_controller_assertThisInitialized(r))),r}!function subtitle_stream_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(SubtitleStreamController,e);var t=SubtitleStreamController.prototype;return t.onSubtitleFragProcessed=function onSubtitleFragProcessed(e){var t=e.frag,n=e.success;if(this.fragPrevious=t,this.state=K.IDLE,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,a=t.start,o=0;o<r.length;o++)if(a>=r[o].start&&a<=r[o].end){i=r[o];break}var s=t.start+t.duration;i?i.end=s:(i={start:a,end:s},r.push(i))}}},t.onMediaAttached=function onMediaAttached(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=K.IDLE},t.onMediaDetaching=function onMediaDetaching(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=K.STOPPED},t.onError=function onError(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=K.IDLE)},t.onSubtitleTracksUpdated=function onSubtitleTracksUpdated(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},t.onSubtitleTrackSwitch=function onSubtitleTrackSwitch(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.onSubtitleTrackLoaded=function onSubtitleTrackLoaded(e){var t=e.id,n=e.details,r=this.currentTrackId,i=this.tracks,a=i[r];t>=i.length||t!==r||!a||(n.live&&function mergeSubtitlePlaylists(e,t,n){void 0===n&&(n=0);var r=-1;mapFragmentIntersection(e,t,(function(e,t,n){t.start=e.start,r=n}));var i=t.fragments;if(r<0)i.forEach((function(e){e.start+=n}));else for(var a=r+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},t.onKeyLoaded=function onKeyLoaded(){this.state===K.KEY_LOADING&&(this.state=K.IDLE)},t.onFragLoaded=function onFragLoaded(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===K.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=$e.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,(function(e){var t=$e.now();i.trigger(l.default.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})}))}},t.onLevelUpdated=function onLevelUpdated(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},t.doTick=function doTick(){if(this.media)switch(this.state){case K.IDLE:var e=this.config,t=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[t]||!i[t].details)break;var a,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,u=Math.min(e.maxBufferLength,e.maxMaxBufferLength),f=N.bufferedInfo(this._getBuffered(),r.currentTime,o),d=f.end,h=f.len,p=i[t].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(h>u)return;var y=this.fragPrevious;d<v?(y&&p.hasProgramDateTime&&(a=findFragmentByPDT(g,y.endProgramDateTime,s)),a||(a=findFragmentByPTS(y,g,d,s))):a=g[m-1],a&&a.encrypted?(c.logger.log("Loading key for "+a.sn),this.state=K.KEY_LOADING,this.hls.trigger(l.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===P&&(this.fragCurrent=a,this.state=K.FRAG_LOADING,this.hls.trigger(l.default.FRAG_LOADING,{frag:a}))}else this.state=K.IDLE},t.stopLoad=function stopLoad(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},t._getBuffered=function _getBuffered(){return this.tracksBuffered[this.currentTrackId]||[]},t.onMediaSeeking=function onMediaSeeking(){this.fragPrevious=null},SubtitleStreamController}(J);function eme_controller_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ke;!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Ke||(Ke={}));var Je=function(e){function EMEController(t){var n;return(n=e.call(this,t,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHED,l.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(e){c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},n._widevineLicenseUrl=t.config.widevineLicenseUrl,n._licenseXhrSetup=t.config.licenseXhrSetup,n._emeEnabled=t.config.emeEnabled,n._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,n}!function eme_controller_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(EMEController,e);var t=EMEController.prototype;return t.getLicenseServerUrl=function getLicenseServerUrl(e){switch(e){case Ke.WIDEVINE:return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},t._attemptKeySystemAccess=function _attemptKeySystemAccess(e,t,n){var r=this,i=function getSupportedMediaKeySystemConfigurations(e,t,n){switch(e){case Ke.WIDEVINE:return function createWidevineMediaKeySystemConfigurations(e,t){var n={videoCapabilities:[]};return t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})})),[n]}(0,n);default:throw new Error("Unknown key-system: "+e)}}(e,0,n);c.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then((function(t){r._onMediaKeySystemAccessObtained(e,t)})).catch((function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},t._onMediaKeySystemAccessObtained=function _onMediaKeySystemAccessObtained(e,t){var n=this;c.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r),t.createMediaKeys().then((function(t){r.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()})).catch((function(e){c.logger.error("Failed to create media-keys:",e)}))},t._onMediaKeysCreated=function _onMediaKeysCreated(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},t._onNewMediaKeySession=function _onNewMediaKeySession(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},t._onKeySessionMessage=function _onKeySessionMessage(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){c.logger.log("Received license data, updating key-session"),e.update(t)}))},t._attemptSetMediaKeys=function _attemptSetMediaKeys(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t._generateRequestWithPreferredKeySession=function _generateRequestWithPreferredKeySession(e,t){var n=this,r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(e,t).then((function(){c.logger.debug("Key-session generation succeeded")})).catch((function(e){c.logger.error("Error generating key-session request:",e),n.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},t._createLicenseXhr=function _createLicenseXhr(e,t,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(a){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(a){throw new Error("issue setting up KeySystem license XHR "+a)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},t._onLicenseRequestReadyStageChange=function _onLicenseRequestReadyStageChange(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},t._generateLicenseRequestChallenge=function _generateLicenseRequestChallenge(e,t){switch(e.mediaKeySystemDomain){case Ke.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},t._requestLicense=function _requestLicense(e,t){c.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);c.logger.log("Sending license request to URL: "+r);var a=this._generateLicenseRequestChallenge(n,e);i.send(a)}catch(o){c.logger.error("Failure requesting DRM license: "+o),this.hls.trigger(l.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},t.onMediaAttached=function onMediaAttached(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},t.onMediaDetached=function onMediaDetached(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},t.onManifestParsed=function onManifestParsed(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),n=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(Ke.WIDEVINE,t,n)}},function eme_controller_createClass(e,t,n){return t&&eme_controller_defineProperties(e.prototype,t),n&&eme_controller_defineProperties(e,n),e}(EMEController,[{key:"requestMediaKeySystemAccess",get:function get(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),EMEController}(d),Ze={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ge,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:oe,bufferController:ue,capLevelController:le,fpsController:fe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:"undefined"!==typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null};function hls_defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hls_createClass(e,t,n){return t&&hls_defineProperties(e.prototype,t),n&&hls_defineProperties(e,n),e}function hls_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Ze.subtitleStreamController=Xe,Ze.subtitleTrackController=Ve,Ze.timelineController=He,Ze.cueHandler=r,Ze.enableCEA708Captions=!0,Ze.enableWebVTT=!0,Ze.captionsTextTrack1Label="English",Ze.captionsTextTrack1LanguageCode="en",Ze.captionsTextTrack2Label="Spanish",Ze.captionsTextTrack2LanguageCode="es",Ze.audioStreamController=ye,Ze.audioTrackController=me,Ze.emeController=Je,n.d(t,"default",(function(){return Qe}));var Qe=function(e){function Hls(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r=Hls.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in r)i in t||(t[i]=r[i]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(t.debug),n.config=t,n._autoLevelCapping=-1;var a=n.abrController=new t.abrController(hls_assertThisInitialized(hls_assertThisInitialized(n))),o=new t.bufferController(hls_assertThisInitialized(hls_assertThisInitialized(n))),s=n.capLevelController=new t.capLevelController(hls_assertThisInitialized(hls_assertThisInitialized(n))),u=new t.fpsController(hls_assertThisInitialized(hls_assertThisInitialized(n))),l=new A(hls_assertThisInitialized(hls_assertThisInitialized(n))),f=new R(hls_assertThisInitialized(hls_assertThisInitialized(n))),d=new D(hls_assertThisInitialized(hls_assertThisInitialized(n))),h=new ne(hls_assertThisInitialized(hls_assertThisInitialized(n))),p=n.levelController=new ee(hls_assertThisInitialized(hls_assertThisInitialized(n))),g=new I(hls_assertThisInitialized(hls_assertThisInitialized(n))),m=[p,n.streamController=new Z(hls_assertThisInitialized(hls_assertThisInitialized(n)),g)],v=t.audioStreamController;v&&m.push(new v(hls_assertThisInitialized(hls_assertThisInitialized(n)),g)),n.networkControllers=m;var y=[l,f,d,a,o,s,u,h,g];if(v=t.audioTrackController){var _=new v(hls_assertThisInitialized(hls_assertThisInitialized(n)));n.audioTrackController=_,y.push(_)}if(v=t.subtitleTrackController){var b=new v(hls_assertThisInitialized(hls_assertThisInitialized(n)));n.subtitleTrackController=b,m.push(b)}if(v=t.emeController){var x=new v(hls_assertThisInitialized(hls_assertThisInitialized(n)));n.emeController=x,y.push(x)}return(v=t.subtitleStreamController)&&m.push(new v(hls_assertThisInitialized(hls_assertThisInitialized(n)),g)),(v=t.timelineController)&&y.push(new v(hls_assertThisInitialized(hls_assertThisInitialized(n)))),n.coreComponents=y,n}!function hls_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(Hls,e),Hls.isSupported=function isSupported(){return function is_supported_isSupported(){var e=getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!n&&!!r}()},hls_createClass(Hls,null,[{key:"version",get:function get(){return"0.12.3-canary.4258"}},{key:"Events",get:function get(){return l.default}},{key:"ErrorTypes",get:function get(){return s.ErrorTypes}},{key:"ErrorDetails",get:function get(){return s.ErrorDetails}},{key:"DefaultConfig",get:function get(){return Hls.defaultConfig?Hls.defaultConfig:Ze},set:function set(e){Hls.defaultConfig=e}}]);var t=Hls.prototype;return t.destroy=function destroy(){c.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.attachMedia=function attachMedia(e){c.logger.log("attachMedia"),this.media=e,this.trigger(l.default.MEDIA_ATTACHING,{media:e})},t.detachMedia=function detachMedia(){c.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null},t.loadSource=function loadSource(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(l.default.MANIFEST_LOADING,{url:e})},t.startLoad=function startLoad(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},t.stopLoad=function stopLoad(){c.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},t.swapAudioCodec=function swapAudioCodec(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function recoverMediaError(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},hls_createClass(Hls,[{key:"levels",get:function get(){return this.levelController.levels}},{key:"currentLevel",get:function get(){return this.streamController.currentLevel},set:function set(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function get(){return this.streamController.nextLevel},set:function set(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function get(){return this.levelController.level},set:function set(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function get(){return this.levelController.nextLoadLevel},set:function set(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function get(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function set(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function get(){return this.levelController.startLevel},set:function set(e){c.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function set(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function get(){return this._autoLevelCapping},set:function set(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function get(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function get(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function get(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function get(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r}return 0}},{key:"maxAutoLevel",get:function get(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function get(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function set(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function get(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function get(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function set(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function get(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function get(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function get(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function set(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function get(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function set(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),Hls}(W)},"./src/polyfills/number-isFinite.js":function srcPolyfillsNumberIsFiniteJs(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",(function(){return r}));var r=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":function srcUtilsGetSelfScopeJs(e,t,n){"use strict";function getSelfScope(){return"undefined"===typeof window?self:window}n.r(t),n.d(t,"getSelfScope",(function(){return getSelfScope}))},"./src/utils/logger.js":function srcUtilsLoggerJs(e,t,n){"use strict";n.r(t),n.d(t,"enableLogs",(function(){return s})),n.d(t,"logger",(function(){return u}));var r=n("./src/utils/get-self-scope.js");function noop(){}var i={trace:noop,debug:noop,log:noop,warn:noop,info:noop,error:noop},a=i;function formatMsg(e,t){return t="["+e+"] > "+t}var o=Object(r.getSelfScope)();function exportLoggerFunctions(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):function consolePrintFn(e){var t=o.console[e];return t?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=formatMsg(e,r[0])),t.apply(o.console,r)}:noop}(t)}))}var s=function enableLogs(e){if(o.console&&!0===e||"object"===typeof e){exportLoggerFunctions(e,"debug","log","info","warn","error");try{a.log()}catch(t){a=i}}else a=i},u=a}}).default}))},function(e,t,n){var r,i,a;i=[n(1),n(15)],void 0===(a="function"===typeof(r=function(t,n){"use strict";var r,i;function _getRequireWildcardCache(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return e},e}function _typeof(e){return(_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!==typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}(t),n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n);var a={x:"clientWidth",y:"clientHeight"},o={x:"clientTop",y:"clientLeft"},s={x:"innerWidth",y:"innerHeight"},u={x:"offsetWidth",y:"offsetHeight"},l={x:"offsetLeft",y:"offsetTop"},c={x:"overflowX",y:"overflowY"},f={x:"scrollWidth",y:"scrollHeight"},d={x:"scrollLeft",y:"scrollTop"},h={x:"width",y:"height"},p=function NOOP(){},g=!!function(){if("undefined"===typeof window)return!1;var e=!1;try{document.createElement("div").addEventListener("test",p,{get passive(){return e=!0,!1}})}catch(t){}return e}()&&{passive:!0},m=function constrain(e,t){var n=e.length,r=e.minSize,i=e.type,a=t.from,o=t.size,s=t.itemsPerRow,u=(o=Math.max(o,r))%s;return u&&(o+=s-u),o>n&&(o=n),(u=(a="simple"!==i&&a?Math.max(Math.min(a,n-o),0):0)%s)&&(a-=u,o+=u),a===t.from&&o==t.size?t:function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{from:a,size:o})};e.exports=(i=r=function(e){function ReactList(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ReactList),(t=_possibleConstructorReturn(this,_getPrototypeOf(ReactList).call(this,e))).state=m(e,{itemsPerRow:1,from:e.initialIndex,size:0}),t.cache={},t.cachedScrollPosition=null,t.prevPrevState={},t.unstable=!1,t.updateCounter=0,t}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ReactList,e),_createClass(ReactList,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(e,t){var n=m(e,t);return n===t?null:n}}]),_createClass(ReactList,[{key:"componentDidMount",value:function componentDidMount(){this.updateFrameAndClearCache=this.updateFrameAndClearCache.bind(this),window.addEventListener("resize",this.updateFrameAndClearCache),this.updateFrame(this.scrollTo.bind(this,this.props.initialIndex))}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this;if(this.props.axis!==e.axis&&this.clearSizeCache(),!this.unstable){if(++this.updateCounter>50)return this.unstable=!0,console.error("ReactList failed to reach a stable state.");this.updateCounterTimeoutId||(this.updateCounterTimeoutId=setTimeout((function(){t.updateCounter=0,delete t.updateCounterTimeoutId}),0)),this.updateFrame()}}},{key:"maybeSetState",value:function maybeSetState(e,t){if(function isEqualSubset(e,t){for(var n in t)if(e[n]!==t[n])return!1;return!0}(this.state,e))return t();this.setState(e,t)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.updateFrameAndClearCache),this.scrollParent.removeEventListener("scroll",this.updateFrameAndClearCache,g),this.scrollParent.removeEventListener("mousewheel",p,g)}},{key:"getOffset",value:function getOffset(e){var t=this.props.axis,n=e[o[t]]||0,r=l[t];do{n+=e[r]||0}while(e=e.offsetParent);return n}},{key:"getEl",value:function getEl(){return this.el||this.items}},{key:"getScrollPosition",value:function getScrollPosition(){if("number"===typeof this.cachedScrollPosition)return this.cachedScrollPosition;var e=this.scrollParent,t=this.props.axis,n=d[t],r=e===window?document.body[n]||document.documentElement[n]:e[n],i=this.getScrollSize()-this.props.scrollParentViewportSizeGetter(this),a=Math.max(0,Math.min(r,i)),o=this.getEl();return this.cachedScrollPosition=this.getOffset(e)+a-this.getOffset(o),this.cachedScrollPosition}},{key:"setScroll",value:function setScroll(e){var t=this.scrollParent,n=this.props.axis;if(e+=this.getOffset(this.getEl()),t===window)return window.scrollTo(0,e);e-=this.getOffset(this.scrollParent),t[d[n]]=e}},{key:"getScrollSize",value:function getScrollSize(){var e=this.scrollParent,t=document,n=t.body,r=t.documentElement,i=f[this.props.axis];return e===window?Math.max(n[i],r[i]):e[i]}},{key:"hasDeterminateSize",value:function hasDeterminateSize(){var e=this.props,t=e.itemSizeGetter;return"uniform"===e.type||t}},{key:"getStartAndEnd",value:function getStartAndEnd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.threshold,t=this.getScrollPosition(),n=Math.max(0,t-e),r=t+this.props.scrollParentViewportSizeGetter(this)+e;return this.hasDeterminateSize()&&(r=Math.min(r,this.getSpaceBefore(this.props.length))),{start:n,end:r}}},{key:"getItemSizeAndItemsPerRow",value:function getItemSizeAndItemsPerRow(){var e=this.props,t=e.axis,n=e.useStaticSize,r=this.state,i=r.itemSize,a=r.itemsPerRow;if(n&&i&&a)return{itemSize:i,itemsPerRow:a};var o=this.items.children;if(!o.length)return{};var s=o[0],c=s[u[t]],f=Math.abs(c-i);if((isNaN(f)||f>=1)&&(i=c),!i)return{};for(var d=l[t],h=s[d],p=o[a=1];p&&p[d]===h;p=o[a])++a;return{itemSize:i,itemsPerRow:a}}},{key:"clearSizeCache",value:function clearSizeCache(){this.cachedScrollPosition=null}},{key:"updateFrameAndClearCache",value:function updateFrameAndClearCache(e){return this.clearSizeCache(),this.updateFrame(e)}},{key:"updateFrame",value:function updateFrame(e){switch(this.updateScrollParent(),"function"!=typeof e&&(e=p),this.props.type){case"simple":return this.updateSimpleFrame(e);case"variable":return this.updateVariableFrame(e);case"uniform":return this.updateUniformFrame(e)}}},{key:"updateScrollParent",value:function updateScrollParent(){var e=this.scrollParent;this.scrollParent=this.props.scrollParentGetter(this),e!==this.scrollParent&&(e&&(e.removeEventListener("scroll",this.updateFrameAndClearCache),e.removeEventListener("mousewheel",p)),this.clearSizeCache(),this.scrollParent.addEventListener("scroll",this.updateFrameAndClearCache,g),this.scrollParent.addEventListener("mousewheel",p,g))}},{key:"updateSimpleFrame",value:function updateSimpleFrame(e){var t=this.getStartAndEnd().end,n=this.items.children,r=0;if(n.length){var i=this.props.axis,a=n[0],o=n[n.length-1];r=this.getOffset(o)+o[u[i]]-this.getOffset(a)}if(r>t)return e();var s=this.props,l=s.pageSize,c=s.length,f=Math.min(this.state.size+l,c);this.maybeSetState({size:f},e)}},{key:"updateVariableFrame",value:function updateVariableFrame(e){this.props.itemSizeGetter||this.cacheSizes();for(var t=this.getStartAndEnd(),n=t.start,r=t.end,i=this.props,a=i.length,o=i.pageSize,s=0,u=0,l=0,c=a-1;u<c;){var f=this.getSizeOfItem(u);if(null==f||s+f>n)break;s+=f,++u}for(var d=a-u;l<d&&s<r;){var h=this.getSizeOfItem(u+l);if(null==h){l=Math.min(l+o,d);break}s+=h,++l}this.maybeSetState({from:u,size:l},e)}},{key:"updateUniformFrame",value:function updateUniformFrame(e){var t=this.getItemSizeAndItemsPerRow(),n=t.itemSize,r=t.itemsPerRow;if(!n||!r)return e();var i=this.getStartAndEnd(),a=i.start,o=i.end,s=m(this.props,{from:Math.floor(a/n)*r,size:(Math.ceil((o-a)/n)+1)*r,itemsPerRow:r}),u=s.from,l=s.size;return this.maybeSetState({itemsPerRow:r,from:u,itemSize:n,size:l},e)}},{key:"getSpaceBefore",value:function getSpaceBefore(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t[e])return t[e];var n=this.state,r=n.itemSize,i=n.itemsPerRow;if(r)return t[e]=Math.floor(e/i)*r;for(var a=e;a>0&&null==t[--a];);for(var o=t[a]||0,s=a;s<e;++s){t[s]=o;var u=this.getSizeOfItem(s);if(null==u)break;o+=u}return t[e]=o}},{key:"cacheSizes",value:function cacheSizes(){for(var e=this.cache,t=this.state.from,n=this.items.children,r=u[this.props.axis],i=0,a=n.length;i<a;++i)e[t+i]=n[i][r]}},{key:"getSizeOfItem",value:function getSizeOfItem(e){var t=this.cache,n=this.items,r=this.props,i=r.axis,a=r.itemSizeGetter,o=r.itemSizeEstimator,s=r.type,l=this.state,c=l.from,f=l.itemSize,d=l.size;if(f)return f;if(a)return a(e);if(e in t)return t[e];if("simple"===s&&e>=c&&e<c+d&&n){var h=n.children[e-c];if(h)return h[u[i]]}return o?o(e,t):void 0}},{key:"scrollTo",value:function scrollTo(e){null!=e&&this.setScroll(this.getSpaceBefore(e))}},{key:"scrollAround",value:function scrollAround(e){var t=this.getScrollPosition(),n=this.getSpaceBefore(e),r=n-this.props.scrollParentViewportSizeGetter(this)+this.getSizeOfItem(e),i=Math.min(r,n),a=Math.max(r,n);return t<=i?this.setScroll(i):t>a?this.setScroll(a):void 0}},{key:"getVisibleRange",value:function getVisibleRange(){for(var e,t,n=this.state,r=n.from,i=n.size,a=this.getStartAndEnd(0),o=a.start,s=a.end,u={},l=r;l<r+i;++l){var c=this.getSpaceBefore(l,u),f=c+this.getSizeOfItem(l);null==e&&f>o&&(e=l),null!=e&&c<s&&(t=l)}return[e,t]}},{key:"renderItems",value:function renderItems(){for(var e=this,t=this.props,n=t.itemRenderer,r=t.itemsRenderer,i=this.state,a=i.from,o=i.size,s=[],u=0;u<o;++u)s.push(n(a+u,u));return r(s,(function(t){return e.items=t}))}},{key:"render",value:function render(){var e=this,n=this.props,r=n.axis,i=n.length,a=n.type,o=n.useTranslate3d,s=this.state,u=s.from,l=s.itemsPerRow,c=this.renderItems();if("simple"===a)return c;var f={position:"relative"},d={},p=Math.ceil(i/l)*l,g=this.getSpaceBefore(p,d);g&&(f[h[r]]=g,"x"===r&&(f.overflowX="hidden"));var m=this.getSpaceBefore(u,d),v="x"===r?m:0,y="y"===r?m:0,_=o?"translate3d(".concat(v,"px, ").concat(y,"px, 0)"):"translate(".concat(v,"px, ").concat(y,"px)"),b={msTransform:_,WebkitTransform:_,transform:_};return t.default.createElement("div",{style:f,ref:function ref(t){return e.el=t}},t.default.createElement("div",{style:b},c))}}]),ReactList}(t.Component),_defineProperty(r,"displayName","ReactList"),_defineProperty(r,"propTypes",{axis:n.default.oneOf(["x","y"]),initialIndex:n.default.number,itemRenderer:n.default.func,itemSizeEstimator:n.default.func,itemSizeGetter:n.default.func,itemsRenderer:n.default.func,length:n.default.number,minSize:n.default.number,pageSize:n.default.number,scrollParentGetter:n.default.func,scrollParentViewportSizeGetter:n.default.func,threshold:n.default.number,type:n.default.oneOf(["simple","variable","uniform"]),useStaticSize:n.default.bool,useTranslate3d:n.default.bool}),_defineProperty(r,"defaultProps",{axis:"y",itemRenderer:function itemRenderer(e,n){return t.default.createElement("div",{key:n},e)},itemsRenderer:function itemsRenderer(e,n){return t.default.createElement("div",{ref:n},e)},length:0,minSize:1,pageSize:10,scrollParentGetter:function defaultScrollParentGetter(e){for(var t=e.props.axis,n=e.getEl(),r=c[t];n=n.parentElement;)switch(window.getComputedStyle(n)[r]){case"auto":case"scroll":case"overlay":return n}return window},scrollParentViewportSizeGetter:function defaultScrollParentViewportSizeGetter(e){var t=e.props.axis,n=e.scrollParent;return n===window?window[s[t]]:n[a[t]]},threshold:100,type:"simple",useStaticSize:!1,useTranslate3d:!1}),i)})?r.apply(t,i):r)||(e.exports=a)},function(e,t,n){var r,i=i||function(e){"use strict";if(!("undefined"===typeof e||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function get_URL(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,a=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function throw_outside(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function revoke(e){setTimeout((function revoker(){"string"===typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},l=function auto_bom(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function FileSaver(t,c,f){f||(t=l(t));var d,h=this,p="application/octet-stream"===t.type,g=function dispatch_all(){!function dispatch(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var i=e["on"+t[r]];if("function"===typeof i)try{i.call(e,n||e)}catch(a){s(a)}}}(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,i)return d=n().createObjectURL(t),void setTimeout((function(){r.href=d,r.download=c,function click(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(r),g(),u(d),h.readyState=h.DONE}));!function fs_error(){if((o||p&&a)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=o?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,g()},r.readAsDataURL(t),void(h.readyState=h.INIT)}(d||(d=n().createObjectURL(t)),p)?e.location.href=d:e.open(d,"_blank")||(e.location.href=d);h.readyState=h.DONE,g(),u(d)}()},f=c.prototype;return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function saveAs(e,t,n){return new c(e,t||e.name||"download",n)})}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);e.exports?e.exports.saveAs=i:null!==n(467)&&null!==n(468)&&(void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r))},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(469)),a=_interopRequireDefault(n(488)),o=_interopRequireDefault(n(489)),s=_interopRequireDefault(n(490)),u=_interopRequireDefault(n(491)),l=_interopRequireDefault(n(492)),c=_interopRequireDefault(n(494)),f=_interopRequireDefault(n(495)),d=_interopRequireDefault(n(496)),h=_interopRequireDefault(n(497));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var p=function(){function GitHub(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.github.com";!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GitHub),this.__apiBase=t,this.__auth=e||{}}return r(GitHub,[{key:"getGist",value:function getGist(e){return new i.default(e,this.__auth,this.__apiBase)}},{key:"getUser",value:function getUser(e){return new a.default(e,this.__auth,this.__apiBase)}},{key:"getOrganization",value:function getOrganization(e){return new c.default(e,this.__auth,this.__apiBase)}},{key:"getTeam",value:function getTeam(e){return new f.default(e,this.__auth,this.__apiBase)}},{key:"getRepo",value:function getRepo(e,t){return new l.default(this._getFullName(e,t),this.__auth,this.__apiBase)}},{key:"getIssues",value:function getIssues(e,t){return new o.default(this._getFullName(e,t),this.__auth,this.__apiBase)}},{key:"search",value:function search(e){return new s.default(e,this.__auth,this.__apiBase)}},{key:"getRateLimit",value:function getRateLimit(){return new u.default(this.__auth,this.__apiBase)}},{key:"getMarkdown",value:function getMarkdown(){return new d.default(this.__auth,this.__apiBase)}},{key:"getProject",value:function getProject(e){return new h.default(e,this.__auth,this.__apiBase)}},{key:"_getFullName",value:function _getFullName(e,t){var n=e;return t&&(n=e+"/"+t),n}}]),GitHub}();e.exports=p},function(e,t,n){var r=n(498),i=n(123),a=n(201),o=n(72)("socket.io-client");e.exports=t=lookup;var s=t.managers={};function lookup(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),u=i.source,l=i.id,c=i.path,f=s[l]&&c in s[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(o("ignoring socket cache for %s",u),n=a(u,t)):(s[l]||(o("new io instance for %s",u),s[l]=a(u,t)),n=s[l]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=i.protocol,t.connect=lookup,t.Manager=n(201),t.Socket=n(207)},,,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function wrap(e,t,n,r){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),o=new Context(r||[]);return a._invoke=function makeInvokeMethod(e,t,n){var r=u;return function invoke(i,a){if(r===c)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw a;return doneResult()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=maybeInvokeDelegate(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===u)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=c;var h=tryCatch(e,t,n);if("normal"===h.type){if(r=n.done?f:l,h.arg===d)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r=f,n.method="throw",n.arg=h.arg)}}}(e,n,o),a}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=wrap;var u="suspendedStart",l="suspendedYield",c="executing",f="completed",d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};h[a]=function(){return this};var p=Object.getPrototypeOf,g=p&&p(p(values([])));g&&g!==n&&r.call(g,a)&&(h=g);var m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function AsyncIterator(e){var t;this._invoke=function enqueue(n,i){function callInvokeWithMethodAndArg(){return new Promise((function(t,a){!function invoke(t,n,i,a){var o=tryCatch(e[t],e,n);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"===typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(e){invoke("next",e,i,a)}),(function(e){invoke("throw",e,i,a)})):Promise.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return invoke("throw",e,i,a)}))}a(o.arg)}(n,i,t,a)}))}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,maybeInvokeDelegate(e,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=tryCatch(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function next(){for(;++i<e.length;)if(r.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=t,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:t,done:!0}}return GeneratorFunction.prototype=m.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[s]=GeneratorFunction.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[o]=function(){return this},e.AsyncIterator=AsyncIterator,e.async=function(t,n,r,i){var a=new AsyncIterator(wrap(t,n,r,i));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},defineIteratorMethods(m),m[s]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function next(){for(;t.length;){var n=t.pop();if(n in e)return next.value=n,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var n=this;function handle(r,i){return o.type="throw",o.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),d}},catch:function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,n,r){return this.delegate={iterator:values(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){(function(t){var r=n(235),i=n(132),a=n(236),o=n(237),s=n(90),u=s.isErrorEvent,l=s.isDOMError,c=s.isDOMException,f=s.isError,d=s.isObject,h=s.isPlainObject,p=s.isUndefined,g=s.isFunction,m=s.isString,v=s.isArray,y=s.isEmptyObject,_=s.each,b=s.objectMerge,x=s.truncate,w=s.objectFrozen,k=s.hasKey,S=s.joinRegExp,E=s.urlencode,T=s.uuid4,C=s.htmlTreeAsString,O=s.isSameException,A=s.isSameStacktrace,R=s.parseUrl,D=s.fill,P=s.supportsFetch,M=s.supportsReferrerPolicy,j=s.serializeKeysForMessage,F=s.serializeException,I=s.sanitize,L=n(238).wrapMethod,N="source protocol user pass host port path".split(" "),B=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function now(){return+new Date}var U="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},z=U.document,q=U.navigator;function keepOriginalCallback(e,t){return g(t)?function(n){return t(n,e)}:t}function Raven(){for(var e in this._hasJSON=!("object"!==typeof JSON||!JSON.stringify),this._hasDocument=!p(z),this._hasNavigator=!p(q),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:U.SENTRY_RELEASE&&U.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:M()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=U.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=now(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=U.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}Raven.prototype={VERSION:"3.27.2",debug:!1,TraceKit:r,config:function config(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var i=n._globalOptions;t&&_(t,(function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:i[e]=t})),n.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=S(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&S(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&S(i.whitelistUrls),i.includePaths=S(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var a={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},o=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=b(a,o):!1!==o&&(o=a),i.autoBreadcrumbs=o;var s={tryCatch:!0},u=i.instrument;return"[object Object]"==={}.toString.call(u)?u=b(s,u):!1!==u&&(u=s),i.instrument=u,r.collectWindowErrors=!!i.collectWindowErrors,n},install:function install(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(r.report.subscribe((function(){e._handleOnErrorStackInfo.apply(e,arguments)})),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function setDSN(e){var t=this._parseDSN(e),n=t.path.lastIndexOf("/"),r=t.path.substr(1,n);this._dsn=e,this._globalKey=t.user,this._globalSecret=t.pass&&t.pass.substr(1),this._globalProject=t.path.substr(n+1),this._globalServer=this._getGlobalServer(t),this._globalEndpoint=this._globalServer+"/"+r+"api/"+this._globalProject+"/store/",this._resetBackoff()},context:function context(e,t,n){return g(e)&&(n=t||[],t=e,e={}),this.wrap(e,t).apply(this,n)},wrap:function wrap(e,t,n){var r=this;if(p(t)&&!g(e))return e;if(g(e)&&(t=e,e=void 0),!g(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(a){return t}function wrapped(){var i=[],o=arguments.length,s=!e||e&&!1!==e.deep;for(n&&g(n)&&n.apply(this,arguments);o--;)i[o]=s?r.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,i)}catch(a){throw r._ignoreNextOnError(),r.captureException(a,e),a}}for(var i in t)k(t,i)&&(wrapped[i]=t[i]);return wrapped.prototype=t.prototype,t.__raven_wrapper__=wrapped,wrapped.__raven__=!0,wrapped.__orig__=t,wrapped},uninstall:function uninstall(){return r.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function _promiseRejectionHandler(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function _attachPromiseRejectionHandler(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),U.addEventListener&&U.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function _detachPromiseRejectionHandler(){return U.removeEventListener&&U.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function captureException(e,t){if(t=b({trimHeadFrames:0},t||{}),u(e)&&e.error)e=e.error;else{if(l(e)||c(e)){var n=e.name||(l(e)?"DOMError":"DOMException"),i=e.message?n+": "+e.message:n;return this.captureMessage(i,b(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(f(e))e=e;else{if(!h(e))return this.captureMessage(e,b(t,{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}));t=this._getCaptureExceptionOptionsFromPlainObject(t,e),e=new Error(t.message)}}this._lastCapturedException=e;try{var a=r.computeStackTrace(e);this._handleStackInfo(a,t)}catch(o){if(e!==o)throw o}return this},_getCaptureExceptionOptionsFromPlainObject:function _getCaptureExceptionOptionsFromPlainObject(e,t){var n=Object.keys(t).sort(),r=b(e,{message:"Non-Error exception captured with keys: "+j(n),fingerprint:[a(n)],extra:e.extra||{}});return r.extra.__serialized__=F(t),r},captureMessage:function captureMessage(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var n,i=b({message:e+=""},t=t||{});try{throw new Error(e)}catch(l){n=l}n.name=null;var a=r.computeStackTrace(n),o=v(a.stack)&&a.stack[1];o&&"Raven.captureException"===o.func&&(o=a.stack[2]);var s=o&&o.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||t.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?e:i.fingerprint,(t=b({trimHeadFrames:0},t)).trimHeadFrames+=1;var u=this._prepareFrames(a,t);i.stacktrace={frames:u.reverse()}}return i.fingerprint&&(i.fingerprint=v(i.fingerprint)?i.fingerprint:[i.fingerprint]),this._send(i),this}}},captureBreadcrumb:function captureBreadcrumb(e){var t=b({timestamp:now()/1e3},e);if(g(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(d(n)&&!y(n))t=n;else if(!1===n)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function addPlugin(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function setUserContext(e){return this._globalContext.user=e,this},setExtraContext:function setExtraContext(e){return this._mergeContext("extra",e),this},setTagsContext:function setTagsContext(e){return this._mergeContext("tags",e),this},clearContext:function clearContext(){return this._globalContext={},this},getContext:function getContext(){return JSON.parse(i(this._globalContext))},setEnvironment:function setEnvironment(e){return this._globalOptions.environment=e,this},setRelease:function setRelease(e){return this._globalOptions.release=e,this},setDataCallback:function setDataCallback(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=keepOriginalCallback(t,e),this},setBreadcrumbCallback:function setBreadcrumbCallback(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=keepOriginalCallback(t,e),this},setShouldSendCallback:function setShouldSendCallback(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=keepOriginalCallback(t,e),this},setTransport:function setTransport(e){return this._globalOptions.transport=e,this},lastException:function lastException(){return this._lastCapturedException},lastEventId:function lastEventId(){return this._lastEventId},isSetup:function isSetup(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function afterLoad(){var e=U.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function showReportDialog(e){if(z){if(!(e=b({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},e)).eventId)throw new o("Missing eventId");if(!e.dsn)throw new o("Missing DSN");var t=encodeURIComponent,n=[];for(var r in e)if("user"===r){var i=e.user;i.name&&n.push("name="+t(i.name)),i.email&&n.push("email="+t(i.email))}else n.push(t(r)+"="+t(e[r]));var a=this._getGlobalServer(this._parseDSN(e.dsn)),s=z.createElement("script");s.async=!0,s.src=a+"/api/embed/error-page/?"+n.join("&"),(z.head||z.body).appendChild(s)}},_ignoreNextOnError:function _ignoreNextOnError(){var e=this;this._ignoreOnError+=1,setTimeout((function(){e._ignoreOnError-=1}))},_triggerEvent:function _triggerEvent(e,t){var n,r;if(this._hasDocument){for(r in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),z.createEvent?(n=z.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=z.createEventObject()).eventType=e,t)k(t,r)&&(n[r]=t[r]);if(z.createEvent)z.dispatchEvent(n);else try{z.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(i){}}},_breadcrumbEventHandler:function _breadcrumbEventHandler(e){var t=this;return function(n){if(t._keypressTimeout=null,t._lastCapturedEvent!==n){var r;t._lastCapturedEvent=n;try{r=C(n.target)}catch(i){r="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:r})}}},_keypressEventHandler:function _keypressEventHandler(){var e=this;return function(t){var n;try{n=t.target}catch(a){return}var r=n&&n.tagName;if(r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)){var i=e._keypressTimeout;i||e._breadcrumbEventHandler("input")(t),clearTimeout(i),e._keypressTimeout=setTimeout((function(){e._keypressTimeout=null}),1e3)}}},_captureUrlChange:function _captureUrlChange(e,t){var n=R(this._location.href),r=R(t),i=R(e);this._lastHref=t,n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function _patchFunctionToString(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"===typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function _unpatchFunctionToString(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function _instrumentTryCatch(){var e=this,t=e._wrappedBuiltIns;function wrapTimeFn(t){return function(n,r){for(var i=new Array(arguments.length),a=0;a<i.length;++a)i[a]=arguments[a];var o=i[0];return g(o)&&(i[0]=e.wrap({mechanism:{type:"instrument",data:{function:t.name||"<anonymous>"}}},o)),t.apply?t.apply(this,i):t(i[0],i[1])}}var n=this._globalOptions.autoBreadcrumbs;function wrapEventTarget(r){var i=U[r]&&U[r].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(D(i,"addEventListener",(function(t){return function(i,a,o,s){try{a&&a.handleEvent&&(a.handleEvent=e.wrap({mechanism:{type:"instrument",data:{target:r,function:"handleEvent",handler:a&&a.name||"<anonymous>"}}},a.handleEvent))}catch(f){}var u,l,c;return n&&n.dom&&("EventTarget"===r||"Node"===r)&&(l=e._breadcrumbEventHandler("click"),c=e._keypressEventHandler(),u=function before(e){if(e){var t;try{t=e.type}catch(n){return}return"click"===t?l(e):"keypress"===t?c(e):void 0}}),t.call(this,i,e.wrap({mechanism:{type:"instrument",data:{target:r,function:"addEventListener",handler:a&&a.name||"<anonymous>"}}},a,u),o,s)}}),t),D(i,"removeEventListener",(function(e){return function(t,n,r,i){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(a){}return e.call(this,t,n,r,i)}}),t))}D(U,"setTimeout",wrapTimeFn,t),D(U,"setInterval",wrapTimeFn,t),U.requestAnimationFrame&&D(U,"requestAnimationFrame",(function(t){return function(n){return t(e.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},n))}}),t);for(var r=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],i=0;i<r.length;i++)wrapEventTarget(r[i])},_instrumentBreadcrumbs:function _instrumentBreadcrumbs(){var e=this,t=this._globalOptions.autoBreadcrumbs,n=e._wrappedBuiltIns;function wrapProp(t,n){t in n&&g(n[t])&&D(n,t,(function(n){return e.wrap({mechanism:{type:"instrument",data:{function:t,handler:n&&n.name||"<anonymous>"}}},n)}))}if(t.xhr&&"XMLHttpRequest"in U){var r=U.XMLHttpRequest&&U.XMLHttpRequest.prototype;D(r,"open",(function(t){return function(n,r){return m(r)&&-1===r.indexOf(e._globalKey)&&(this.__raven_xhr={method:n,url:r,status_code:null}),t.apply(this,arguments)}}),n),D(r,"send",(function(t){return function(){var n=this;function onreadystatechangeHandler(){if(n.__raven_xhr&&4===n.readyState){try{n.__raven_xhr.status_code=n.status}catch(t){}e.captureBreadcrumb({type:"http",category:"xhr",data:n.__raven_xhr})}}for(var r=["onload","onerror","onprogress"],i=0;i<r.length;i++)wrapProp(r[i],n);return"onreadystatechange"in n&&g(n.onreadystatechange)?D(n,"onreadystatechange",(function(t){return e.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:t&&t.name||"<anonymous>"}}},t,onreadystatechangeHandler)})):n.onreadystatechange=onreadystatechangeHandler,t.apply(this,arguments)}}),n)}t.xhr&&P()&&D(U,"fetch",(function(t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var i,a=n[0],o="GET";if("string"===typeof a?i=a:"Request"in U&&a instanceof U.Request?(i=a.url,a.method&&(o=a.method)):i=""+a,-1!==i.indexOf(e._globalKey))return t.apply(this,n);n[1]&&n[1].method&&(o=n[1].method);var s={method:o,url:i,status_code:null};return t.apply(this,n).then((function(t){return s.status_code=t.status,e.captureBreadcrumb({type:"http",category:"fetch",data:s}),t})).catch((function(t){throw e.captureBreadcrumb({type:"http",category:"fetch",data:s,level:"error"}),t}))}}),n),t.dom&&this._hasDocument&&(z.addEventListener?(z.addEventListener("click",e._breadcrumbEventHandler("click"),!1),z.addEventListener("keypress",e._keypressEventHandler(),!1)):z.attachEvent&&(z.attachEvent("onclick",e._breadcrumbEventHandler("click")),z.attachEvent("onkeypress",e._keypressEventHandler())));var i=U.chrome,a=!(i&&i.app&&i.app.runtime)&&U.history&&U.history.pushState&&U.history.replaceState;if(t.location&&a){var o=U.onpopstate;U.onpopstate=function(){var t=e._location.href;if(e._captureUrlChange(e._lastHref,t),o)return o.apply(this,arguments)};var s=function historyReplacementFunction(t){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&e._captureUrlChange(e._lastHref,n+""),t.apply(this,arguments)}};D(U.history,"pushState",s,n),D(U.history,"replaceState",s,n)}if(t.console&&"console"in U&&console.log){var u=function consoleMethodCallback(t,n){e.captureBreadcrumb({message:t,level:n.level,category:"console"})};_(["debug","info","warn","error","log"],(function(e,t){L(console,t,u)}))}},_restoreBuiltIns:function _restoreBuiltIns(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],n=e[1],r=e[2];t[n]=r}},_restoreConsole:function _restoreConsole(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function _drainPlugins(){var e=this;_(this._plugins,(function(t,n){var r=n[0],i=n[1];r.apply(e,[e].concat(i))}))},_parseDSN:function _parseDSN(e){var t=B.exec(e),n={},r=7;try{for(;r--;)n[N[r]]=t[r]||""}catch(i){throw new o("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new o("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function _getGlobalServer(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function _handleOnErrorStackInfo(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function _handleStackInfo(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function _prepareFrames(e,t){var n=this,r=[];if(e.stack&&e.stack.length&&(_(e.stack,(function(t,i){var a=n._normalizeFrame(i,e.url);a&&r.push(a)})),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<r.length;i++)r[i].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function _normalizeFrame(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function _processException(e,t,n,r,i,a){var o,s=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(s))&&(i&&i.length?(n=i[0].filename||n,i.reverse(),o={frames:i}):n&&(o={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var u=b({exception:{values:[{type:e,value:t,stacktrace:o}]},transaction:n},a),l=u.exception.values[0];null==l.type&&""===l.value&&(l.value="Unrecoverable error caught"),!u.exception.mechanism&&u.mechanism&&(u.exception.mechanism=u.mechanism,delete u.mechanism),u.exception.mechanism=b({type:"generic",handled:!0},u.exception.mechanism||{}),this._send(u)}},_trimPacket:function _trimPacket(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=x(e.message,t)),e.exception){var n=e.exception.values[0];n.value=x(n.value,t)}var r=e.request;return r&&(r.url&&(r.url=x(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=x(r.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function _trimBreadcrumbs(e){for(var t,n,r,i=["to","from","url"],a=0;a<e.values.length;++a)if((n=e.values[a]).hasOwnProperty("data")&&d(n.data)&&!w(n.data)){r=b({},n.data);for(var o=0;o<i.length;++o)t=i[o],r.hasOwnProperty(t)&&r[t]&&(r[t]=x(r[t],this._globalOptions.maxUrlLength));e.values[a].data=r}},_getHttpData:function _getHttpData(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&q.userAgent&&(e.headers={"User-Agent":q.userAgent}),U.location&&U.location.href&&(e.url=U.location.href),this._hasDocument&&z.referrer&&(e.headers||(e.headers={}),e.headers.Referer=z.referrer),e}},_resetBackoff:function _resetBackoff(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function _shouldBackoff(){return this._backoffDuration&&now()-this._backoffStart<this._backoffDuration},_isRepeatData:function _isRepeatData(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?A(e.stacktrace,t.stacktrace):e.exception||t.exception?O(e.exception,t.exception):!e.fingerprint&&!t.fingerprint||Boolean(e.fingerprint&&t.fingerprint)&&JSON.stringify(e.fingerprint)===JSON.stringify(t.fingerprint))},_setBackoffState:function _setBackoffState(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=P()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(r){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=now()}}},_send:function _send(e){var t=this._globalOptions,n={project:this._globalProject,logger:t.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),e.trimHeadFrames&&delete e.trimHeadFrames,(e=b(n,e)).tags=b(b({},this._globalContext.tags),e.tags),e.extra=b(b({},this._globalContext.extra),e.extra),e.extra["session:duration"]=now()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),e=this._sanitizeData(e),Object.keys(e).forEach((function(t){(null==e[t]||""===e[t]||y(e[t]))&&delete e[t]})),g(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!y(e)&&(g(t.shouldSendCallback)&&!t.shouldSendCallback(e)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",e):"number"===typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_sanitizeData:function _sanitizeData(e){return I(e,this._globalOptions.sanitizeKeys)},_getUuid:function _getUuid(){return T()},_sendProcessedPayload:function _sendProcessedPayload(e,t){var n=this,r=this._globalOptions;if(this.isSetup())if(e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e)){this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var a=e.exception&&e.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:a?(a.type?a.type+": ":"")+a.value:e.message,event_id:e.event_id,level:e.level||"error"});var o=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:o,auth:i,data:e,options:r,onSuccess:function success(){n._resetBackoff(),n._triggerEvent("success",{data:e,src:o}),t&&t()},onError:function failure(r){n._logDebug("error","Raven transport failed to send: ",r),r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:e,src:o}),r=r||new Error("Raven send failed (no additional details provided)"),t&&t(r)}})}else this._logDebug("warn","Raven dropped repeat event: ",e)},_makeRequest:function _makeRequest(e){var t=e.url+"?"+E(e.auth),n=null,r={};if(e.options.headers&&(n=this._evaluateHash(e.options.headers)),e.options.fetchParameters&&(r=this._evaluateHash(e.options.fetchParameters)),P()){r.body=i(e.data);var a=b({},this._fetchDefaults),o=b(a,r);return n&&(o.headers=n),U.fetch(t,o).then((function(t){if(t.ok)e.onSuccess&&e.onSuccess();else{var n=new Error("Sentry error code: "+t.status);n.request=t,e.onError&&e.onError(n)}})).catch((function(){e.onError&&e.onError(new Error("Sentry error code: network unavailable"))}))}var s=U.XMLHttpRequest&&new U.XMLHttpRequest;s&&(("withCredentials"in s||"undefined"!==typeof XDomainRequest)&&("withCredentials"in s?s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)e.onSuccess&&e.onSuccess();else if(e.onError){var t=new Error("Sentry error code: "+s.status);t.request=s,e.onError(t)}}:(s=new XDomainRequest,t=t.replace(/^https?:/,""),e.onSuccess&&(s.onload=e.onSuccess),e.onError&&(s.onerror=function(){var t=new Error("Sentry error code: XDomainRequest");t.request=s,e.onError(t)})),s.open("POST",t),n&&_(n,(function(e,t){s.setRequestHeader(e,t)})),s.send(i(e.data))))},_evaluateHash:function _evaluateHash(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]="function"===typeof r?r():r}return t},_logDebug:function _logDebug(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function _mergeContext(e,t){p(t)?delete this._globalContext[e]:this._globalContext[e]=b(this._globalContext[e]||{},t)}},Raven.prototype.setUser=Raven.prototype.setUserContext,Raven.prototype.setReleaseContext=Raven.prototype.setRelease,e.exports=Raven}).call(this,n(19))},function(e,t,n){(function(t){var r=n(90),i={collectWindowErrors:!0,debug:!1},a="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},o=[].slice,s="?",u=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function getLocationHref(){return"undefined"===typeof document||null==document.location?"":document.location.href}i.report=function reportModuleWrapper(){var e,t,n=[],l=null,c=null,f=null;function notifyHandlers(e,t){var r=null;if(!t||i.collectWindowErrors){for(var a in n)if(n.hasOwnProperty(a))try{n[a].apply(null,[e].concat(o.call(arguments,2)))}catch(s){r=s}if(r)throw r}}function traceKitWindowOnError(t,n,a,o,l){var c=r.isErrorEvent(l)?l.error:l,d=r.isErrorEvent(t)?t.message:t;if(f)i.computeStackTrace.augmentStackTraceWithInitialElement(f,n,a,d),processLastException();else if(c&&r.isError(c))notifyHandlers(i.computeStackTrace(c),!0);else{var h,p={url:n,line:a,column:o},g=void 0;if("[object String]"==={}.toString.call(d))(h=d.match(u))&&(g=h[1],d=h[2]);p.func=s,notifyHandlers({name:g,message:d,url:getLocationHref(),stack:[p]},!0)}return!!e&&e.apply(this,arguments)}function processLastException(){var e=f,t=l;l=null,f=null,c=null,notifyHandlers.apply(null,[e,!1].concat(t))}function report(e,t){var n=o.call(arguments,1);if(f){if(c===e)return;processLastException()}var r=i.computeStackTrace(e);if(f=r,c=e,l=n,setTimeout((function(){c===e&&processLastException()}),r.incomplete?2e3:0),!1!==t)throw e}return report.subscribe=function subscribe(r){!function installGlobalHandler(){if(t)return;e=a.onerror,a.onerror=traceKitWindowOnError,t=!0}(),n.push(r)},report.unsubscribe=function unsubscribe(e){for(var t=n.length-1;t>=0;--t)n[t]===e&&n.splice(t,1)},report.uninstall=function unsubscribeAll(){!function uninstallGlobalHandler(){if(!t)return;a.onerror=e,t=!1,e=void 0}(),n=[]},report}(),i.computeStackTrace=function computeStackTraceWrapper(){function computeStackTraceFromStackProp(e){if("undefined"!==typeof e.stack&&e.stack){for(var t,n,r,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=e.stack.split("\n"),f=[],d=(/^(.*) is undefined$/.exec(e.message),0),h=c.length;d<h;++d){if(n=i.exec(c[d])){var p=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=l.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:p?null:n[2],func:n[1]||s,args:p?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=a.exec(c[d]))r={url:n[2],func:n[1]||s,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=o.exec(c[d])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=u.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==d||n[5]||"undefined"===typeof e.columnNumber||(f[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||s,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!r.func&&r.line&&(r.func=s),r.url&&"blob:"===r.url.substr(0,5)){var g=new XMLHttpRequest;if(g.open("GET",r.url,!1),g.send(null),200===g.status){var m=g.responseText||"",v=(m=m.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(v){var y=v[1];"~"===y.charAt(0)&&(y=("undefined"===typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+y.slice(1)),r.url=y.slice(0,-4)}}}f.push(r)}return f.length?{name:e.name,message:e.message,url:getLocationHref(),stack:f}:null}}function augmentStackTraceWithInitialElement(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func=s),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(e,t){for(var n,r,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],u={},l=!1,c=computeStackTraceByWalkingCallerChain.caller;c&&!l;c=c.caller)if(c!==computeStackTrace&&c!==i.report){if(r={url:null,func:s,line:null,column:null},c.name?r.func=c.name:(n=a.exec(c.toString()))&&(r.func=n[1]),"undefined"===typeof r.func)try{r.func=n.input.substring(0,n.input.indexOf("{"))}catch(d){}u[""+c]?l=!0:u[""+c]=!0,o.push(r)}t&&o.splice(0,t);var f={name:e.name,message:e.message,url:getLocationHref(),stack:o};return augmentStackTraceWithInitialElement(f,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),f}function computeStackTrace(e,t){var n=null;t=null==t?0:+t;try{if(n=computeStackTraceFromStackProp(e))return n}catch(r){if(i.debug)throw r}try{if(n=computeStackTraceByWalkingCallerChain(e,t+1))return n}catch(r){if(i.debug)throw r}return{name:e.name,message:e.message,url:getLocationHref()}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace}(),e.exports=i}).call(this,n(19))},function(e,t){function safeAdd(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5cmn(e,t,n,r,i,a){return safeAdd(function bitRotateLeft(e,t){return e<<t|e>>>32-t}(safeAdd(safeAdd(t,e),safeAdd(r,a)),i),n)}function md5ff(e,t,n,r,i,a,o){return md5cmn(t&n|~t&r,e,t,i,a,o)}function md5gg(e,t,n,r,i,a,o){return md5cmn(t&r|n&~r,e,t,i,a,o)}function md5hh(e,t,n,r,i,a,o){return md5cmn(t^n^r,e,t,i,a,o)}function md5ii(e,t,n,r,i,a,o){return md5cmn(n^(t|~r),e,t,i,a,o)}function binlMD5(e,t){var n,r,i,a,o;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,u=-271733879,l=-1732584194,c=271733878;for(n=0;n<e.length;n+=16)r=s,i=u,a=l,o=c,s=md5ff(s,u,l,c,e[n],7,-680876936),c=md5ff(c,s,u,l,e[n+1],12,-389564586),l=md5ff(l,c,s,u,e[n+2],17,606105819),u=md5ff(u,l,c,s,e[n+3],22,-1044525330),s=md5ff(s,u,l,c,e[n+4],7,-176418897),c=md5ff(c,s,u,l,e[n+5],12,1200080426),l=md5ff(l,c,s,u,e[n+6],17,-1473231341),u=md5ff(u,l,c,s,e[n+7],22,-45705983),s=md5ff(s,u,l,c,e[n+8],7,1770035416),c=md5ff(c,s,u,l,e[n+9],12,-1958414417),l=md5ff(l,c,s,u,e[n+10],17,-42063),u=md5ff(u,l,c,s,e[n+11],22,-1990404162),s=md5ff(s,u,l,c,e[n+12],7,1804603682),c=md5ff(c,s,u,l,e[n+13],12,-40341101),l=md5ff(l,c,s,u,e[n+14],17,-1502002290),s=md5gg(s,u=md5ff(u,l,c,s,e[n+15],22,1236535329),l,c,e[n+1],5,-165796510),c=md5gg(c,s,u,l,e[n+6],9,-1069501632),l=md5gg(l,c,s,u,e[n+11],14,643717713),u=md5gg(u,l,c,s,e[n],20,-373897302),s=md5gg(s,u,l,c,e[n+5],5,-701558691),c=md5gg(c,s,u,l,e[n+10],9,38016083),l=md5gg(l,c,s,u,e[n+15],14,-660478335),u=md5gg(u,l,c,s,e[n+4],20,-405537848),s=md5gg(s,u,l,c,e[n+9],5,568446438),c=md5gg(c,s,u,l,e[n+14],9,-1019803690),l=md5gg(l,c,s,u,e[n+3],14,-187363961),u=md5gg(u,l,c,s,e[n+8],20,1163531501),s=md5gg(s,u,l,c,e[n+13],5,-1444681467),c=md5gg(c,s,u,l,e[n+2],9,-51403784),l=md5gg(l,c,s,u,e[n+7],14,1735328473),s=md5hh(s,u=md5gg(u,l,c,s,e[n+12],20,-1926607734),l,c,e[n+5],4,-378558),c=md5hh(c,s,u,l,e[n+8],11,-2022574463),l=md5hh(l,c,s,u,e[n+11],16,1839030562),u=md5hh(u,l,c,s,e[n+14],23,-35309556),s=md5hh(s,u,l,c,e[n+1],4,-1530992060),c=md5hh(c,s,u,l,e[n+4],11,1272893353),l=md5hh(l,c,s,u,e[n+7],16,-155497632),u=md5hh(u,l,c,s,e[n+10],23,-1094730640),s=md5hh(s,u,l,c,e[n+13],4,681279174),c=md5hh(c,s,u,l,e[n],11,-358537222),l=md5hh(l,c,s,u,e[n+3],16,-722521979),u=md5hh(u,l,c,s,e[n+6],23,76029189),s=md5hh(s,u,l,c,e[n+9],4,-640364487),c=md5hh(c,s,u,l,e[n+12],11,-421815835),l=md5hh(l,c,s,u,e[n+15],16,530742520),s=md5ii(s,u=md5hh(u,l,c,s,e[n+2],23,-995338651),l,c,e[n],6,-198630844),c=md5ii(c,s,u,l,e[n+7],10,1126891415),l=md5ii(l,c,s,u,e[n+14],15,-1416354905),u=md5ii(u,l,c,s,e[n+5],21,-57434055),s=md5ii(s,u,l,c,e[n+12],6,1700485571),c=md5ii(c,s,u,l,e[n+3],10,-1894986606),l=md5ii(l,c,s,u,e[n+10],15,-1051523),u=md5ii(u,l,c,s,e[n+1],21,-2054922799),s=md5ii(s,u,l,c,e[n+8],6,1873313359),c=md5ii(c,s,u,l,e[n+15],10,-30611744),l=md5ii(l,c,s,u,e[n+6],15,-1560198380),u=md5ii(u,l,c,s,e[n+13],21,1309151649),s=md5ii(s,u,l,c,e[n+4],6,-145523070),c=md5ii(c,s,u,l,e[n+11],10,-1120210379),l=md5ii(l,c,s,u,e[n+2],15,718787259),u=md5ii(u,l,c,s,e[n+9],21,-343485551),s=safeAdd(s,r),u=safeAdd(u,i),l=safeAdd(l,a),c=safeAdd(c,o);return[s,u,l,c]}function binl2rstr(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function rstr2binl(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function rstr2hex(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function str2rstrUTF8(e){return unescape(encodeURIComponent(e))}function rawMD5(e){return function rstrMD5(e){return binl2rstr(binlMD5(rstr2binl(e),8*e.length))}(str2rstrUTF8(e))}function rawHMACMD5(e,t){return function rstrHMACMD5(e,t){var n,r,i=rstr2binl(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=binlMD5(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=binlMD5(a.concat(rstr2binl(t)),512+8*t.length),binl2rstr(binlMD5(o.concat(r),640))}(str2rstrUTF8(e),str2rstrUTF8(t))}e.exports=function md5(e,t,n){return t?n?rawHMACMD5(t,e):function hexHMACMD5(e,t){return rstr2hex(rawHMACMD5(e,t))}(t,e):n?rawMD5(e):function hexMD5(e){return rstr2hex(rawMD5(e))}(e)}},function(e,t){function RavenConfigError(e){this.name="RavenConfigError",this.message=e}RavenConfigError.prototype=new Error,RavenConfigError.prototype.constructor=RavenConfigError,e.exports=RavenConfigError},function(e,t,n){var r=n(90);e.exports={wrapMethod:function wrapMethod(e,t,n){var i=e[t],a=e;if(t in e){var o="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),s=r.safeJoin(e," "),u={level:o,logger:"console",extra:{arguments:e}};"assert"===t?!1===e[0]&&(s="Assertion failed: "+(r.safeJoin(e.slice(1)," ")||"console.assert"),u.extra.arguments=e.slice(1),n&&n(s,u)):n&&n(s,u),i&&Function.prototype.apply.call(i,a,e)}}}}},function(e,t,n){"use strict";var r=n(60),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder");var v="function"===typeof Symbol&&Symbol.iterator;function A(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}var y={isMounted:function isMounted(){return!1},enqueueForceUpdate:function enqueueForceUpdate(){},enqueueReplaceState:function enqueueReplaceState(){},enqueueSetState:function enqueueSetState(){}},_={};function D(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||y}function E(){}function F(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||y}D.prototype.isReactComponent={},D.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw A(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},D.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=D.prototype;var b=F.prototype=new E;b.constructor=F,r(b,D.prototype),b.isPureReactComponent=!0;var x={current:null},w={suspense:null},k={current:null},C=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,n){var r=void 0,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,r)&&!O.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var P=/\/+/g,j=[];function Q(e,t,n,r){if(j.length){var i=j.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>j.length&&j.push(e)}function U(e,t,n){return null==e?0:function S(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(r,e,""===t?"."+T(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=t+T(i=e[u],u);s+=S(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=v&&e[v]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),u=0;!(i=e.next()).done;)s+=S(i=i.value,l=t+T(i,u++),n,r);else if("object"===i)throw n=""+e,A(Error(31),"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return s}(e,"",t,n)}function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function escape(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function ea(e,t){e.func.call(e.context,t,e.count++)}function fa(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?V(e,r,n,(function(e){return e})):null!=e&&(N(e)&&(e=function da(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n)),r.push(e))}function V(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(P,"$&/")+"/"),U(e,fa,t=Q(t,a,r,i)),R(t)}function W(){var e=x.current;if(null===e)throw A(Error(321));return e}var I={Children:{map:function map(e,t,n){if(null==e)return e;var r=[];return V(e,r,null,t,n),r},forEach:function forEach(e,t,n){if(null==e)return e;U(e,ea,t=Q(null,null,t,n)),R(t)},count:function count(e){return U(e,(function(){return null}),null)},toArray:function toArray(e){var t=[];return V(e,t,null,(function(e){return e})),t},only:function only(e){if(!N(e))throw A(Error(143));return e}},createRef:function createRef(){return{current:null}},Component:D,PureComponent:F,createContext:function createContext(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},forwardRef:function forwardRef(e){return{$$typeof:d,render:e}},lazy:function lazy(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function memo(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},useCallback:function useCallback(e,t){return W().useCallback(e,t)},useContext:function useContext(e,t){return W().useContext(e,t)},useEffect:function useEffect(e,t){return W().useEffect(e,t)},useImperativeHandle:function useImperativeHandle(e,t,n){return W().useImperativeHandle(e,t,n)},useDebugValue:function useDebugValue(){},useLayoutEffect:function useLayoutEffect(e,t){return W().useLayoutEffect(e,t)},useMemo:function useMemo(e,t){return W().useMemo(e,t)},useReducer:function useReducer(e,t,n){return W().useReducer(e,t,n)},useRef:function useRef(e){return W().useRef(e)},useState:function useState(e){return W().useState(e)},Fragment:s,Profiler:l,StrictMode:u,Suspense:h,unstable_SuspenseList:p,createElement:M,cloneElement:function cloneElement(e,t,n){if(null===e||void 0===e)throw A(Error(267),e);var i=void 0,o=r({},e.props),s=e.key,u=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,l=k.current),void 0!==t.key&&(s=""+t.key);var c=void 0;for(i in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)C.call(t,i)&&!O.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==c?c[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:a,type:e.type,key:s,ref:u,props:o,_owner:l}},createFactory:function createFactory(e){var t=M.bind(null,e);return t.type=e,t},isValidElement:N,version:"16.9.0",unstable_withSuspenseConfig:function unstable_withSuspenseConfig(e,t){var n=w.suspense;w.suspense=void 0===t?null:t;try{e()}finally{w.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentBatchConfig:w,ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r}},L={default:I},B=L&&I||L;e.exports=B.default||B},function(r,i,a){"use strict";var o=a(1),s=a(60),u=a(241);function t(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}if(!o)throw t(Error(227));var p=null,m={};function da(){if(p)for(var e in m){var n=m[e],r=p.indexOf(e);if(!(-1<r))throw t(Error(96),e);if(!_[r]){if(!n.extractEvents)throw t(Error(97),e);for(var i in _[r]=n,r=n.eventTypes){var a=void 0,o=r[i],s=n,u=i;if(w.hasOwnProperty(u))throw t(Error(99),u);w[u]=o;var l=o.phasedRegistrationNames;if(l){for(a in l)l.hasOwnProperty(a)&&ha(l[a],s,u);a=!0}else o.registrationName?(ha(o.registrationName,s,u),a=!0):a=!1;if(!a)throw t(Error(98),i,e)}}}}function ha(e,n,r){if(E[e])throw t(Error(100),e);E[e]=n,T[e]=n.eventTypes[r].dependencies}var _=[],w={},E={},T={};function ka(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var C=!1,A=null,R=!1,P=null,M={onError:function onError(e){C=!0,A=e}};function qa(e,t,n,r,i,a,o,s,u){C=!1,A=null,ka.apply(M,arguments)}var j=null,F=null,I=null;function wa(e,n,r){var i=e.type||"unknown-event";e.currentTarget=I(r),function ra(e,n,r,i,a,o,s,u,l){if(qa.apply(this,arguments),C){if(!C)throw t(Error(198));var c=A;C=!1,A=null,R||(R=!0,P=c)}}(i,n,void 0,e),e.currentTarget=null}function xa(e,n){if(null==n)throw t(Error(30));return null==e?n:Array.isArray(e)?Array.isArray(n)?(e.push.apply(e,n),e):(e.push(n),e):Array.isArray(n)?[e].concat(n):[e,n]}function ya(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var L=null;function Aa(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)wa(e,t[r],n[r]);else t&&wa(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Ba(e){if(null!==e&&(L=xa(L,e)),e=L,L=null,e){if(ya(e,Aa),L)throw t(Error(95));if(R)throw e=P,R=!1,P=null,e}}var B={injectEventPluginOrder:function injectEventPluginOrder(e){if(p)throw t(Error(101));p=Array.prototype.slice.call(e),da()},injectEventPluginsByName:function injectEventPluginsByName(e){var n,r=!1;for(n in e)if(e.hasOwnProperty(n)){var i=e[n];if(!m.hasOwnProperty(n)||m[n]!==i){if(m[n])throw t(Error(102),n);m[n]=i,r=!0}}r&&da()}};function Da(e,n){var r=e.stateNode;if(!r)return null;var i=j(r);if(!i)return null;r=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw t(Error(231),n,typeof r);return r}var U=Math.random().toString(36).slice(2),q="__reactInternalInstance$"+U,W="__reactEventHandlers$"+U;function Ha(e){if(e[q])return e[q];for(;!e[q];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[q]).tag||6===e.tag?e:null}function Ia(e){return!(e=e[q])||5!==e.tag&&6!==e.tag?null:e}function Ja(e){if(5===e.tag||6===e.tag)return e.stateNode;throw t(Error(33))}function Ka(e){return e[W]||null}function La(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ma(e,t,n){(t=Da(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=xa(n._dispatchListeners,t),n._dispatchInstances=xa(n._dispatchInstances,e))}function Na(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=La(t);for(t=n.length;0<t--;)Ma(n[t],"captured",e);for(t=0;t<n.length;t++)Ma(n[t],"bubbled",e)}}function Oa(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Da(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=xa(n._dispatchListeners,t),n._dispatchInstances=xa(n._dispatchInstances,e))}function Pa(e){e&&e.dispatchConfig.registrationName&&Oa(e._targetInst,null,e)}function Qa(e){ya(e,Na)}var V=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement);function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Y={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},$={},X={};function Wa(e){if($[e])return $[e];if(!Y[e])return e;var t,n=Y[e];for(t in n)if(n.hasOwnProperty(t)&&t in X)return $[e]=n[t];return e}V&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var K=Wa("animationend"),Q=Wa("animationiteration"),ee=Wa("animationstart"),re=Wa("transitionend"),ue="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ce=null,fe=null,de=null;function fb(){if(de)return de;var e,t,n=fe,r=n.length,i="value"in ce?ce.value:ce.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return de=i.slice(e,1<t?1-t:void 0)}function gb(){return!0}function hb(){return!1}function y(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?gb:hb,this.isPropagationStopped=hb,this}function jb(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function kb(e){if(!(e instanceof this))throw t(Error(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function ib(e){e.eventPool=[],e.getPooled=jb,e.release=kb}s(y.prototype,{preventDefault:function preventDefault(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=gb)},stopPropagation:function stopPropagation(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=gb)},persist:function persist(){this.isPersistent=gb},isPersistent:hb,destructor:function destructor(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=hb,this._dispatchInstances=this._dispatchListeners=null}}),y.Interface={type:null,target:null,currentTarget:function currentTarget(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function timeStamp(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},y.extend=function(e){function b(){}function c(){return t.apply(this,arguments)}var t=this;b.prototype=t.prototype;var n=new b;return s(n,c.prototype),c.prototype=n,c.prototype.constructor=c,c.Interface=s({},t.Interface,e),c.extend=t.extend,ib(c),c},ib(y);var he=y.extend({data:null}),ge=y.extend({data:null}),ve=[9,13,27,32],ye=V&&"CompositionEvent"in window,_e=null;V&&"documentMode"in document&&(_e=document.documentMode);var xe=V&&"TextEvent"in window&&!_e,Ce=V&&(!ye||_e&&8<_e&&11>=_e),Oe=String.fromCharCode(32),Re={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Pe=!1;function wb(e,t){switch(e){case"keyup":return-1!==ve.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function xb(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Me=!1;var je={eventTypes:Re,extractEvents:function extractEvents(e,t,n,r){var i=void 0,a=void 0;if(ye)e:{switch(e){case"compositionstart":i=Re.compositionStart;break e;case"compositionend":i=Re.compositionEnd;break e;case"compositionupdate":i=Re.compositionUpdate;break e}i=void 0}else Me?wb(e,n)&&(i=Re.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Re.compositionStart);return i?(Ce&&"ko"!==n.locale&&(Me||i!==Re.compositionStart?i===Re.compositionEnd&&Me&&(a=fb()):(fe="value"in(ce=r)?ce.value:ce.textContent,Me=!0)),i=he.getPooled(i,t,n,r),a?i.data=a:null!==(a=xb(n))&&(i.data=a),Qa(i),a=i):a=null,(e=xe?function Ab(e,t){switch(e){case"compositionend":return xb(t);case"keypress":return 32!==t.which?null:(Pe=!0,Oe);case"textInput":return(e=t.data)===Oe&&Pe?null:e;default:return null}}(e,n):function Bb(e,t){if(Me)return"compositionend"===e||!ye&&wb(e,t)?(e=fb(),de=fe=ce=null,Me=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ce&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=ge.getPooled(Re.beforeInput,t,n,r)).data=e,Qa(t)):t=null,null===a?t:null===t?a:[a,t]}},Ie=null,Le=null,He=null;function Gb(e){if(e=F(e)){if("function"!==typeof Ie)throw t(Error(280));var n=j(e.stateNode);Ie(e.stateNode,e.type,n)}}function Hb(e){Le?He?He.push(e):He=[e]:Le=e}function Ib(){if(Le){var e=Le,t=He;if(He=Le=null,Gb(e),t)for(e=0;e<t.length;e++)Gb(t[e])}}function Jb(e,t){return e(t)}function Kb(e,t,n,r){return e(t,n,r)}function Lb(){}var $e=Jb,Ze=!1;function Ob(){null===Le&&null===He||(Lb(),Ib())}var Qe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Qe[e.type]:"textarea"===t}function Rb(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Sb(e){if(!V)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function Tb(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Vb(e){e._valueTracker||(e._valueTracker=function Ub(e){var t=Tb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function get(){return i.call(this)},set:function set(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function getValue(){return r},setValue:function setValue(e){r=""+e},stopTracking:function stopTracking(){e._valueTracker=null,delete e[t]}}}}(e))}function Wb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tb(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var et=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;et.hasOwnProperty("ReactCurrentDispatcher")||(et.ReactCurrentDispatcher={current:null}),et.hasOwnProperty("ReactCurrentBatchConfig")||(et.ReactCurrentBatchConfig={suspense:null});var tt=/^(.*)[\\\/]/,nt="function"===typeof Symbol&&Symbol.for,rt=nt?Symbol.for("react.element"):60103,it=nt?Symbol.for("react.portal"):60106,at=nt?Symbol.for("react.fragment"):60107,ot=nt?Symbol.for("react.strict_mode"):60108,st=nt?Symbol.for("react.profiler"):60114,ut=nt?Symbol.for("react.provider"):60109,lt=nt?Symbol.for("react.context"):60110,ct=nt?Symbol.for("react.concurrent_mode"):60111,ft=nt?Symbol.for("react.forward_ref"):60112,dt=nt?Symbol.for("react.suspense"):60113,ht=nt?Symbol.for("react.suspense_list"):60120,pt=nt?Symbol.for("react.memo"):60115,gt=nt?Symbol.for("react.lazy"):60116;nt&&Symbol.for("react.fundamental"),nt&&Symbol.for("react.responder");var mt="function"===typeof Symbol&&Symbol.iterator;function mc(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=mt&&e[mt]||e["@@iterator"])?e:null}function oc(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case at:return"Fragment";case it:return"Portal";case st:return"Profiler";case ot:return"StrictMode";case dt:return"Suspense";case ht:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case lt:return"Context.Consumer";case ut:return"Context.Provider";case ft:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case pt:return oc(e.type);case gt:if(e=1===e._status?e._result:null)return oc(e)}return null}function pc(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=oc(e.type);n=null,r&&(n=oc(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(tt,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}var vt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yt=Object.prototype.hasOwnProperty,_t={},bt={};function D(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){xt[e]=new D(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];xt[t]=new D(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){xt[e]=new D(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){xt[e]=new D(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){xt[e]=new D(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){xt[e]=new D(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){xt[e]=new D(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){xt[e]=new D(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){xt[e]=new D(e,5,!1,e.toLowerCase(),null,!1)}));var wt=/[\-:]([a-z])/g;function yc(e){return e[1].toUpperCase()}function zc(e,t,n,r){var i=xt.hasOwnProperty(t)?xt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function wc(e,t,n,r){if(null===t||"undefined"===typeof t||function vc(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function uc(e){return!!yt.call(bt,e)||!yt.call(_t,e)&&(vt.test(e)?bt[e]=!0:(_t[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ac(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Bc(e,t){var n=t.checked;return s({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Cc(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ac(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Dc(e,t){null!=(t=t.checked)&&zc(e,"checked",t,!1)}function Ec(e,t){Dc(e,t);var n=Ac(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Fc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fc(e,t.type,Ac(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Gc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Fc(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(wt,yc);xt[t]=new D(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(wt,yc);xt[t]=new D(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(wt,yc);xt[t]=new D(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){xt[e]=new D(e,1,!1,e.toLowerCase(),null,!1)})),xt.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){xt[e]=new D(e,1,!1,e.toLowerCase(),null,!0)}));var kt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ic(e,t,n){return(e=y.getPooled(kt.change,e,t,n)).type="change",Hb(n),Qa(e),e}var St=null,Et=null;function Lc(e){Ba(e)}function Mc(e){if(Wb(Ja(e)))return e}function Nc(e,t){if("change"===e)return t}var Tt=!1;function Pc(){St&&(St.detachEvent("onpropertychange",Qc),Et=St=null)}function Qc(e){if("value"===e.propertyName&&Mc(Et))if(e=Ic(Et,e,Rb(e)),Ze)Ba(e);else{Ze=!0;try{Jb(Lc,e)}finally{Ze=!1,Ob()}}}function Rc(e,t,n){"focus"===e?(Pc(),Et=n,(St=t).attachEvent("onpropertychange",Qc)):"blur"===e&&Pc()}function Sc(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mc(Et)}function Tc(e,t){if("click"===e)return Mc(t)}function Uc(e,t){if("input"===e||"change"===e)return Mc(t)}V&&(Tt=Sb("input")&&(!document.documentMode||9<document.documentMode));var Ct={eventTypes:kt,_isInputEventSupported:Tt,extractEvents:function extractEvents(e,t,n,r){var i=t?Ja(t):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=Nc:Qb(i)?Tt?a=Uc:(a=Sc,o=Rc):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Tc),a&&(a=a(e,t)))return Ic(a,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Fc(i,"number",i.value)}},Ot=y.extend({view:null,detail:null}),At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=At[e])&&!!t[e]}function Zc(){return Yc}var Rt=0,Dt=0,Pt=!1,Mt=!1,jt=Ot.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Zc,button:null,buttons:null,relatedTarget:function relatedTarget(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function movementX(e){if("movementX"in e)return e.movementX;var t=Rt;return Rt=e.screenX,Pt?"mousemove"===e.type?e.screenX-t:0:(Pt=!0,0)},movementY:function movementY(e){if("movementY"in e)return e.movementY;var t=Dt;return Dt=e.screenY,Mt?"mousemove"===e.type?e.screenY-t:0:(Mt=!0,0)}}),Ft=jt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),It={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Lt={eventTypes:It,extractEvents:function extractEvents(e,t,n,r){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?Ha(t):null):a=null,a===t)return null;var o=void 0,s=void 0,u=void 0,l=void 0;"mouseout"===e||"mouseover"===e?(o=jt,s=It.mouseLeave,u=It.mouseEnter,l="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Ft,s=It.pointerLeave,u=It.pointerEnter,l="pointer");var c=null==a?i:Ja(a);if(i=null==t?i:Ja(t),(e=o.getPooled(s,a,n,r)).type=l+"leave",e.target=c,e.relatedTarget=i,(n=o.getPooled(u,t,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=t,a&&r)e:{for(i=r,l=0,o=t=a;o;o=La(o))l++;for(o=0,u=i;u;u=La(u))o++;for(;0<l-o;)t=La(t),l--;for(;0<o-l;)i=La(i),o--;for(;l--;){if(t===i||t===i.alternate)break e;t=La(t),i=La(i)}t=null}else t=null;for(i=t,t=[];a&&a!==i&&(null===(l=a.alternate)||l!==i);)t.push(a),a=La(a);for(a=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)a.push(r),r=La(r);for(r=0;r<t.length;r++)Oa(t[r],"bubbled",e);for(r=a.length;0<r--;)Oa(a[r],"captured",n);return[e,n]}};function hd(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Nt=Object.prototype.hasOwnProperty;function jd(e,t){if(hd(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Nt.call(t,n[r])||!hd(e[n[r]],t[n[r]]))return!1;return!0}function kd(e,t){return{responder:e,props:t}}function ld(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function od(e){if(2!==ld(e))throw t(Error(188))}function qd(e){if(!(e=function pd(e){var n=e.alternate;if(!n){if(3===(n=ld(e)))throw t(Error(188));return 1===n?null:e}for(var r=e,i=n;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(i=a.return)){r=i;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return od(a),e;if(o===i)return od(a),n;o=o.sibling}throw t(Error(188))}if(r.return!==i.return)r=a,i=o;else{for(var s=!1,u=a.child;u;){if(u===r){s=!0,r=a,i=o;break}if(u===i){s=!0,i=a,r=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===r){s=!0,r=o,i=a;break}if(u===i){s=!0,i=o,r=a;break}u=u.sibling}if(!s)throw t(Error(189))}}if(r.alternate!==i)throw t(Error(190))}if(3!==r.tag)throw t(Error(188));return r.stateNode.current===r?e:n}(e)))return null;for(var n=e;;){if(5===n.tag||6===n.tag)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===e)break;for(;!n.sibling;){if(!n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}new Map,new Map,new Set,new Map;var Bt=y.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Ut=y.extend({clipboardData:function clipboardData(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zt=Ot.extend({relatedTarget:null});function ud(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}for(var qt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gt=Ot.extend({key:function key(e){if(e.key){var t=qt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ud(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Wt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Zc,charCode:function charCode(e){return"keypress"===e.type?ud(e):0},keyCode:function keyCode(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function which(e){return"keypress"===e.type?ud(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ht=jt.extend({dataTransfer:null}),Vt=Ot.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Zc}),Yt=y.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),$t=jt.extend({deltaX:function deltaX(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function deltaY(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Xt=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[K,"animationEnd",2],[Q,"animationIteration",2],[ee,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[re,"transitionEnd",2],["waiting","waiting",2]],Kt={},Jt={},Zt=0;Zt<Xt.length;Zt++){var Qt=Xt[Zt],en=Qt[0],tn=Qt[1],nn=Qt[2],rn="on"+(tn[0].toUpperCase()+tn.slice(1)),an={phasedRegistrationNames:{bubbled:rn,captured:rn+"Capture"},dependencies:[en],eventPriority:nn};Kt[tn]=an,Jt[en]=an}var on={eventTypes:Kt,getEventPriority:function getEventPriority(e){return void 0!==(e=Jt[e])?e.eventPriority:2},extractEvents:function extractEvents(e,t,n,r){var i=Jt[e];if(!i)return null;switch(e){case"keypress":if(0===ud(n))return null;case"keydown":case"keyup":e=Gt;break;case"blur":case"focus":e=zt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Ht;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Vt;break;case K:case Q:case ee:e=Bt;break;case re:e=Yt;break;case"scroll":e=Ot;break;case"wheel":e=$t;break;case"copy":case"cut":case"paste":e=Ut;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ft;break;default:e=y}return Qa(t=e.getPooled(i,t,n,r)),t}},sn=on.getEventPriority,un=[];function Pd(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=Ha(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Rb(e.nativeEvent);r=e.topLevelType;for(var a=e.nativeEvent,o=null,s=0;s<_.length;s++){var u=_[s];u&&(u=u.extractEvents(r,t,a,i))&&(o=xa(o,u))}Ba(o)}}var ln=!0;function G(e,t){Rd(t,e,!1)}function Rd(e,t,n){switch(sn(t)){case 0:var r=Sd.bind(null,t,1);break;case 1:r=Td.bind(null,t,1);break;default:r=Ud.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Sd(e,t,n){Ze||Lb();var r=Ud,i=Ze;Ze=!0;try{Kb(r,e,t,n)}finally{(Ze=i)||Ob()}}function Td(e,t,n){Ud(e,t,n)}function Ud(e,t,n){if(ln){if(null===(t=Ha(t=Rb(n)))||"number"!==typeof t.tag||2===ld(t)||(t=null),un.length){var r=un.pop();r.topLevelType=e,r.nativeEvent=n,r.targetInst=t,e=r}else e={topLevelType:e,nativeEvent:n,targetInst:t,ancestors:[]};try{if(n=e,Ze)Pd(n);else{Ze=!0;try{$e(Pd,n,void 0)}finally{Ze=!1,Ob()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>un.length&&un.push(e)}}}var cn=new("function"===typeof WeakMap?WeakMap:Map);function Wd(e){var t=cn.get(e);return void 0===t&&(t=new Set,cn.set(e,t)),t}function Xd(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Yd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zd(e,t){var n,r=Yd(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yd(r)}}function ae(){for(var e=window,t=Xd();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Xd((e=t.contentWindow).document)}return t}function be(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fn=V&&"documentMode"in document&&11>=document.documentMode,dn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},hn=null,pn=null,gn=null,mn=!1;function ie(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return mn||null==hn||hn!==Xd(n)?null:("selectionStart"in(n=hn)&&be(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&jd(gn,n)?null:(gn=n,(e=y.getPooled(dn.select,pn,e,t)).type="select",e.target=hn,Qa(e),e))}var vn={eventTypes:dn,extractEvents:function extractEvents(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=Wd(a),i=T.onSelect;for(var o=0;o<i.length;o++)if(!a.has(i[o])){a=!1;break e}a=!0}i=!a}if(i)return null;switch(a=t?Ja(t):window,e){case"focus":(Qb(a)||"true"===a.contentEditable)&&(hn=a,pn=t,gn=null);break;case"blur":gn=pn=hn=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":return mn=!1,ie(n,r);case"selectionchange":if(fn)break;case"keydown":case"keyup":return ie(n,r)}return null}};function le(e,t){return e=s({children:void 0},t),(t=function ke(e){var t="";return o.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function me(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ac(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,n){if(null!=n.dangerouslySetInnerHTML)throw t(Error(91));return s({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,n){var r=n.value;if(null==r){if(r=n.defaultValue,null!=(n=n.children)){if(null!=r)throw t(Error(92));if(Array.isArray(n)){if(!(1>=n.length))throw t(Error(93));n=n[0]}r=n}null==r&&(r="")}e._wrapperState={initialValue:Ac(r)}}function pe(e,t){var n=Ac(t.value),r=Ac(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function qe(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}B.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),j=Ka,F=Ia,I=Ja,B.injectEventPluginsByName({SimpleEventPlugin:on,EnterLeaveEventPlugin:Lt,ChangeEventPlugin:Ct,SelectEventPlugin:vn,BeforeInputEventPlugin:je});var yn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function te(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var _n=void 0,bn=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==yn.svg||"innerHTML"in e)e.innerHTML=t;else{for((_n=_n||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=_n.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function we(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wn=["Webkit","ms","Moz","O"];function ze(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||xn.hasOwnProperty(e)&&xn[e]?(""+t).trim():t+"px"}function Ae(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ze(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(xn).forEach((function(e){wn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xn[t]=xn[e]}))}));var kn=s({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function De(e,n){if(n){if(kn[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw t(Error(137),e,"");if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw t(Error(60));if(!("object"===typeof n.dangerouslySetInnerHTML&&"__html"in n.dangerouslySetInnerHTML))throw t(Error(61))}if(null!=n.style&&"object"!==typeof n.style)throw t(Error(62),"")}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Fe(e,t){var n=Wd(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.has(i)){switch(i){case"scroll":Rd(e,"scroll",!0);break;case"focus":case"blur":Rd(e,"focus",!0),Rd(e,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Sb(i)&&Rd(e,i,!0);break;case"invalid":case"submit":case"reset":break;default:-1===ue.indexOf(i)&&G(i,e)}n.add(i)}}}function Ge(){}var Sn=null,En=null;function Je(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ke(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Tn="function"===typeof setTimeout?setTimeout:void 0,Cn="function"===typeof clearTimeout?clearTimeout:void 0;function Ne(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}new Set;var On=[],An=-1;function H(e){0>An||(e.current=On[An],On[An]=null,An--)}function J(e,t){On[++An]=e.current,e.current=t}var Rn={},Dn={current:Rn},Pn={current:!1},Mn=Rn;function Se(e,t){var n=e.type.contextTypes;if(!n)return Rn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function N(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Te(e){H(Pn),H(Dn)}function Ue(e){H(Pn),H(Dn)}function Ve(e,n,r){if(Dn.current!==Rn)throw t(Error(168));J(Dn,n),J(Pn,r)}function We(e,n,r){var i=e.stateNode;if(e=n.childContextTypes,"function"!==typeof i.getChildContext)return r;for(var a in i=i.getChildContext())if(!(a in e))throw t(Error(108),oc(n)||"Unknown",a);return s({},r,i)}function Xe(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Rn,Mn=Dn.current,J(Dn,t),J(Pn,Pn.current),!0}function Ye(e,n,r){var i=e.stateNode;if(!i)throw t(Error(169));r?(n=We(e,n,Mn),i.__reactInternalMemoizedMergedChildContext=n,H(Pn),H(Dn),J(Dn,n)):H(Pn),J(Pn,r)}var jn=u.unstable_runWithPriority,Fn=u.unstable_scheduleCallback,In=u.unstable_cancelCallback,Ln=u.unstable_shouldYield,Nn=u.unstable_requestPaint,Bn=u.unstable_now,Un=u.unstable_getCurrentPriorityLevel,zn=u.unstable_ImmediatePriority,qn=u.unstable_UserBlockingPriority,Wn=u.unstable_NormalPriority,Gn=u.unstable_LowPriority,Hn=u.unstable_IdlePriority,Vn={},Yn=void 0!==Nn?Nn:function(){},$n=null,Xn=null,Kn=!1,Jn=Bn(),Zn=1e4>Jn?Bn:function(){return Bn()-Jn};function tf(){switch(Un()){case zn:return 99;case qn:return 98;case Wn:return 97;case Gn:return 96;case Hn:return 95;default:throw t(Error(332))}}function uf(e){switch(e){case 99:return zn;case 98:return qn;case 97:return Wn;case 96:return Gn;case 95:return Hn;default:throw t(Error(332))}}function vf(e,t){return e=uf(e),jn(e,t)}function wf(e,t,n){return e=uf(e),Fn(e,t,n)}function xf(e){return null===$n?($n=[e],Xn=Fn(zn,yf)):$n.push(e),Vn}function O(){null!==Xn&&In(Xn),yf()}function yf(){if(!Kn&&null!==$n){Kn=!0;var e=0;try{var t=$n;vf(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),$n=null}catch(n){throw null!==$n&&($n=$n.slice(e+1)),Fn(zn,O),n}finally{Kn=!1}}}function zf(e,t){return 1073741823===t?99:1===t?95:0>=(e=10*(1073741821-t)-10*(1073741821-e))?99:250>=e?98:5250>=e?97:95}function Af(e,t){if(e&&e.defaultProps)for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Qn={current:null},er=null,tr=null,nr=null;function Gf(){nr=tr=er=null}function Hf(e,t){var n=e.type._context;J(Qn,n._currentValue),n._currentValue=t}function If(e){var t=Qn.current;H(Qn),e.type._context._currentValue=t}function Jf(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function Kf(e,t){er=e,nr=tr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Yr=!0),e.firstContext=null)}function Mf(e,n){if(nr!==e&&!1!==n&&0!==n)if("number"===typeof n&&1073741823!==n||(nr=e,n=1073741823),n={context:e,observedBits:n,next:null},null===tr){if(null===er)throw t(Error(308));tr=n,er.dependencies={expirationTime:0,firstContext:n,responders:null}}else tr=tr.next=n;return e._currentValue}var rr=!1;function Of(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Pf(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Qf(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Rf(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Sf(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Of(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Of(e.memoizedState),i=n.updateQueue=Of(n.memoizedState)):r=e.updateQueue=Pf(i):null===i&&(i=n.updateQueue=Pf(r));null===i||r===i?Rf(r,t):null===r.lastUpdate||null===i.lastUpdate?(Rf(r,t),Rf(i,t)):(Rf(r,t),i.lastUpdate=t)}function Tf(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Of(e.memoizedState):Uf(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Uf(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Pf(t)),t}function Vf(e,t,n,r,i,a){switch(n.tag){case 1:return"function"===typeof(e=n.payload)?e.call(a,r,i):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null===(i="function"===typeof(e=n.payload)?e.call(a,r,i):e)||void 0===i)break;return s({},r,i);case 2:rr=!0}return r}function Wf(e,t,n,r,i){rr=!1;for(var a=(t=Uf(e,t)).baseState,o=null,s=0,u=t.firstUpdate,l=a;null!==u;){var c=u.expirationTime;c<i?(null===o&&(o=u,a=l),s<c&&(s=c)):(Xf(c,u.suspenseConfig),l=Vf(e,0,u,l,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(c=null,u=t.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<i?(null===c&&(c=u,null===o&&(a=l)),s<f&&(s=f)):(l=Vf(e,0,u,l,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===o&&(t.lastUpdate=null),null===c?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===c&&(a=l),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=c,e.expirationTime=s,e.memoizedState=l}function Yf(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Zf(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Zf(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Zf(e,n){for(;null!==e;){var r=e.callback;if(null!==r){e.callback=null;var i=n;if("function"!==typeof r)throw t(Error(191),r);r.call(i)}e=e.nextEffect}}var ir=et.ReactCurrentBatchConfig,ar=(new o.Component).refs;function bg(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:s({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var or={isMounted:function isMounted(e){return!!(e=e._reactInternalFiber)&&2===ld(e)},enqueueSetState:function enqueueSetState(e,t,n){e=e._reactInternalFiber;var r=cg(),i=ir.suspense;(i=Qf(r=dg(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),Sf(e,i),eg(e,r)},enqueueReplaceState:function enqueueReplaceState(e,t,n){e=e._reactInternalFiber;var r=cg(),i=ir.suspense;(i=Qf(r=dg(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Sf(e,i),eg(e,r)},enqueueForceUpdate:function enqueueForceUpdate(e,t){e=e._reactInternalFiber;var n=cg(),r=ir.suspense;(r=Qf(n=dg(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),Sf(e,r),eg(e,n)}};function gg(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!jd(n,r)||!jd(i,a))}function hg(e,t,n){var r=!1,i=Rn,a=t.contextType;return"object"===typeof a&&null!==a?a=Mf(a):(i=N(t)?Mn:Dn.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Se(e,i):Rn),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=or,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ig(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&or.enqueueReplaceState(t,t.state,null)}function jg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ar;var a=t.contextType;"object"===typeof a&&null!==a?i.context=Mf(a):(a=N(t)?Mn:Dn.current,i.context=Se(e,a)),null!==(a=e.updateQueue)&&(Wf(e,a,n,i,r),i.state=e.memoizedState),"function"===typeof(a=t.getDerivedStateFromProps)&&(bg(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&or.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(Wf(e,a,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var sr=Array.isArray;function lg(e,n,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){r=r._owner;var i=void 0;if(r){if(1!==r.tag)throw t(Error(309));i=r.stateNode}if(!i)throw t(Error(147),e);var a=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===a?n.ref:((n=function b(e){var b=i.refs;b===ar&&(b=i.refs={}),null===e?delete b[a]:b[a]=e})._stringRef=a,n)}if("string"!==typeof e)throw t(Error(284));if(!r._owner)throw t(Error(290),e)}return e}function mg(e,n){if("textarea"!==e.type)throw t(Error(31),"[object Object]"===Object.prototype.toString.call(n)?"object with keys {"+Object.keys(n).join(", ")+"}":n,"")}function ng(r){function b(e,t){if(r){var n=e.lastEffect;null!==n?(n.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function c(e,t){if(!r)return null;for(;null!==t;)b(e,t),t=t.sibling;return null}function d(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function e(e,t,n){return(e=og(e,t)).index=0,e.sibling=null,e}function f(e,t,n){return e.index=n,r?null!==(n=e.alternate)?(n=n.index)<t?(e.effectTag=2,t):n:(e.effectTag=2,t):t}function h(e){return r&&null===e.alternate&&(e.effectTag=2),e}function g(t,n,r,i){return null===n||6!==n.tag?((n=pg(r,t.mode,i)).return=t,n):((n=e(n,r)).return=t,n)}function k(t,n,r,i){return null!==n&&n.elementType===r.type?((i=e(n,r.props)).ref=lg(t,n,r),i.return=t,i):((i=qg(r.type,r.key,r.props,null,t.mode,i)).ref=lg(t,n,r),i.return=t,i)}function l(t,n,r,i){return null===n||4!==n.tag||n.stateNode.containerInfo!==r.containerInfo||n.stateNode.implementation!==r.implementation?((n=rg(r,t.mode,i)).return=t,n):((n=e(n,r.children||[])).return=t,n)}function n(t,n,r,i,a){return null===n||7!==n.tag?((n=sg(r,t.mode,i,a)).return=t,n):((n=e(n,r)).return=t,n)}function z(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=pg(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case rt:return(n=qg(t.type,t.key,t.props,null,e.mode,n)).ref=lg(e,null,t),n.return=e,n;case it:return(t=rg(t,e.mode,n)).return=e,t}if(sr(t)||mc(t))return(t=sg(t,e.mode,n,null)).return=e,t;mg(e,t)}return null}function x(e,t,r,i){var a=null!==t?t.key:null;if("string"===typeof r||"number"===typeof r)return null!==a?null:g(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case rt:return r.key===a?r.type===at?n(e,t,r.props.children,i,a):k(e,t,r,i):null;case it:return r.key===a?l(e,t,r,i):null}if(sr(r)||mc(r))return null!==a?null:n(e,t,r,i,null);mg(e,r)}return null}function v(e,t,r,i,a){if("string"===typeof i||"number"===typeof i)return g(t,e=e.get(r)||null,""+i,a);if("object"===typeof i&&null!==i){switch(i.$$typeof){case rt:return e=e.get(null===i.key?r:i.key)||null,i.type===at?n(t,e,i.props.children,a,i.key):k(t,e,i,a);case it:return l(t,e=e.get(null===i.key?r:i.key)||null,i,a)}if(sr(i)||mc(i))return n(t,e=e.get(r)||null,i,a,null);mg(t,i)}return null}function rb(e,t,n,i){for(var a=null,o=null,s=t,u=t=0,l=null;null!==s&&u<n.length;u++){s.index>u?(l=s,s=null):l=s.sibling;var h=x(e,s,n[u],i);if(null===h){null===s&&(s=l);break}r&&s&&null===h.alternate&&b(e,s),t=f(h,t,u),null===o?a=h:o.sibling=h,o=h,s=l}if(u===n.length)return c(e,s),a;if(null===s){for(;u<n.length;u++)null!==(s=z(e,n[u],i))&&(t=f(s,t,u),null===o?a=s:o.sibling=s,o=s);return a}for(s=d(e,s);u<n.length;u++)null!==(l=v(s,e,u,n[u],i))&&(r&&null!==l.alternate&&s.delete(null===l.key?u:l.key),t=f(l,t,u),null===o?a=l:o.sibling=l,o=l);return r&&s.forEach((function(t){return b(e,t)})),a}function Be(e,n,i,a){var o=mc(i);if("function"!==typeof o)throw t(Error(150));if(null==(i=o.call(i)))throw t(Error(151));for(var s=o=null,u=n,l=n=0,h=null,p=i.next();null!==u&&!p.done;l++,p=i.next()){u.index>l?(h=u,u=null):h=u.sibling;var g=x(e,u,p.value,a);if(null===g){null===u&&(u=h);break}r&&u&&null===g.alternate&&b(e,u),n=f(g,n,l),null===s?o=g:s.sibling=g,s=g,u=h}if(p.done)return c(e,u),o;if(null===u){for(;!p.done;l++,p=i.next())null!==(p=z(e,p.value,a))&&(n=f(p,n,l),null===s?o=p:s.sibling=p,s=p);return o}for(u=d(e,u);!p.done;l++,p=i.next())null!==(p=v(u,e,l,p.value,a))&&(r&&null!==p.alternate&&u.delete(null===p.key?l:p.key),n=f(p,n,l),null===s?o=p:s.sibling=p,s=p);return r&&u.forEach((function(t){return b(e,t)})),o}return function(n,r,i,a){var o="object"===typeof i&&null!==i&&i.type===at&&null===i.key;o&&(i=i.props.children);var s="object"===typeof i&&null!==i;if(s)switch(i.$$typeof){case rt:e:{for(s=i.key,o=r;null!==o;){if(o.key===s){if(7===o.tag?i.type===at:o.elementType===i.type){c(n,o.sibling),(r=e(o,i.type===at?i.props.children:i.props)).ref=lg(n,o,i),r.return=n,n=r;break e}c(n,o);break}b(n,o),o=o.sibling}i.type===at?((r=sg(i.props.children,n.mode,a,i.key)).return=n,n=r):((a=qg(i.type,i.key,i.props,null,n.mode,a)).ref=lg(n,r,i),a.return=n,n=a)}return h(n);case it:e:{for(o=i.key;null!==r;){if(r.key===o){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){c(n,r.sibling),(r=e(r,i.children||[])).return=n,n=r;break e}c(n,r);break}b(n,r),r=r.sibling}(r=rg(i,n.mode,a)).return=n,n=r}return h(n)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(c(n,r.sibling),(r=e(r,i)).return=n,n=r):(c(n,r),(r=pg(i,n.mode,a)).return=n,n=r),h(n);if(sr(i))return rb(n,r,i,a);if(mc(i))return Be(n,r,i,a);if(s&&mg(n,i),"undefined"===typeof i&&!o)switch(n.tag){case 1:case 0:throw n=n.type,t(Error(152),n.displayName||n.name||"Component")}return c(n,r)}}var ur=ng(!0),lr=ng(!1),cr={},fr={current:cr},dr={current:cr},hr={current:cr};function zg(e){if(e===cr)throw t(Error(174));return e}function Ag(e,t){J(hr,t),J(dr,e),J(fr,cr);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:te(null,"");break;default:t=te(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}H(fr),J(fr,t)}function Bg(e){H(fr),H(dr),H(hr)}function Cg(e){zg(hr.current);var t=zg(fr.current),n=te(t,e.type);t!==n&&(J(dr,e),J(fr,n))}function Dg(e){dr.current===e&&(H(fr),H(dr))}var pr=1,gr=1,mr=2,vr={current:0};function Hg(e){for(var t=e;null!==t;){if(13===t.tag){if(null!==t.memoizedState)return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=0,_r=2,br=4,xr=8,wr=16,kr=32,Sr=64,Er=128,Tr=et.ReactCurrentDispatcher,Cr=0,Or=null,Ar=null,Rr=null,Dr=null,Pr=null,Mr=null,jr=0,Fr=null,Ir=0,Lr=!1,Nr=null,Br=0;function bh(){throw t(Error(321))}function ch(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hd(e[n],t[n]))return!1;return!0}function dh(e,n,r,i,a,o){if(Cr=o,Or=n,Rr=null!==e?e.memoizedState:null,Tr.current=null===Rr?zr:qr,n=r(i,a),Lr){do{Lr=!1,Br+=1,Rr=null!==e?e.memoizedState:null,Mr=Dr,Fr=Pr=Ar=null,Tr.current=qr,n=r(i,a)}while(Lr);Nr=null,Br=0}if(Tr.current=Ur,(e=Or).memoizedState=Dr,e.expirationTime=jr,e.updateQueue=Fr,e.effectTag|=Ir,e=null!==Ar&&null!==Ar.next,Cr=0,Mr=Pr=Dr=Rr=Ar=Or=null,jr=0,Fr=null,Ir=0,e)throw t(Error(300));return n}function ih(){Tr.current=Ur,Cr=0,Mr=Pr=Dr=Rr=Ar=Or=null,jr=0,Fr=null,Ir=0,Lr=!1,Nr=null,Br=0}function jh(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Pr?Dr=Pr=e:Pr=Pr.next=e,Pr}function kh(){if(null!==Mr)Mr=(Pr=Mr).next,Rr=null!==(Ar=Rr)?Ar.next:null;else{if(null===Rr)throw t(Error(310));var e={memoizedState:(Ar=Rr).memoizedState,baseState:Ar.baseState,queue:Ar.queue,baseUpdate:Ar.baseUpdate,next:null};Pr=null===Pr?Dr=e:Pr.next=e,Rr=Ar.next}return Pr}function lh(e,t){return"function"===typeof t?t(e):t}function mh(e){var n=kh(),r=n.queue;if(null===r)throw t(Error(311));if(r.lastRenderedReducer=e,0<Br){var i=r.dispatch;if(null!==Nr){var a=Nr.get(r);if(void 0!==a){Nr.delete(r);var o=n.memoizedState;do{o=e(o,a.action),a=a.next}while(null!==a);return hd(o,n.memoizedState)||(Yr=!0),n.memoizedState=o,n.baseUpdate===r.last&&(n.baseState=o),r.lastRenderedState=o,[o,i]}}return[n.memoizedState,i]}i=r.last;var s=n.baseUpdate;if(o=n.baseState,null!==s?(null!==i&&(i.next=null),i=s.next):i=null!==i?i.next:null,null!==i){var u=a=null,l=i,c=!1;do{var f=l.expirationTime;f<Cr?(c||(c=!0,u=s,a=o),f>jr&&(jr=f)):(Xf(f,l.suspenseConfig),o=l.eagerReducer===e?l.eagerState:e(o,l.action)),s=l,l=l.next}while(null!==l&&l!==i);c||(u=s,a=o),hd(o,n.memoizedState)||(Yr=!0),n.memoizedState=o,n.baseUpdate=u,n.baseState=a,r.lastRenderedState=o}return[n.memoizedState,r.dispatch]}function nh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Fr?(Fr={lastEffect:null}).lastEffect=e.next=e:null===(t=Fr.lastEffect)?Fr.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Fr.lastEffect=e),e}function oh(e,t,n,r){var i=jh();Ir|=e,i.memoizedState=nh(t,n,void 0,void 0===r?null:r)}function ph(e,t,n,r){var i=kh();r=void 0===r?null:r;var a=void 0;if(null!==Ar){var o=Ar.memoizedState;if(a=o.destroy,null!==r&&ch(r,o.deps))return void nh(yr,n,a,r)}Ir|=e,i.memoizedState=nh(t,n,a,r)}function qh(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function rh(){}function sh(e,n,r){if(!(25>Br))throw t(Error(301));var i=e.alternate;if(e===Or||null!==i&&i===Or)if(Lr=!0,e={expirationTime:Cr,suspenseConfig:null,action:r,eagerReducer:null,eagerState:null,next:null},null===Nr&&(Nr=new Map),void 0===(r=Nr.get(n)))Nr.set(n,e);else{for(n=r;null!==n.next;)n=n.next;n.next=e}else{var a=cg(),o=ir.suspense;o={expirationTime:a=dg(a,e,o),suspenseConfig:o,action:r,eagerReducer:null,eagerState:null,next:null};var s=n.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(n.last=o,0===e.expirationTime&&(null===i||0===i.expirationTime)&&null!==(i=n.lastRenderedReducer))try{var l=n.lastRenderedState,c=i(l,r);if(o.eagerReducer=i,o.eagerState=c,hd(c,l))return}catch(f){}eg(e,a)}}var Ur={readContext:Mf,useCallback:bh,useContext:bh,useEffect:bh,useImperativeHandle:bh,useLayoutEffect:bh,useMemo:bh,useReducer:bh,useRef:bh,useState:bh,useDebugValue:bh,useResponder:bh},zr={readContext:Mf,useCallback:function useCallback(e,t){return jh().memoizedState=[e,void 0===t?null:t],e},useContext:Mf,useEffect:function useEffect(e,t){return oh(516,Er|Sr,e,t)},useImperativeHandle:function useImperativeHandle(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oh(4,br|kr,qh.bind(null,t,e),n)},useLayoutEffect:function useLayoutEffect(e,t){return oh(4,br|kr,e,t)},useMemo:function useMemo(e,t){var n=jh();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function useReducer(e,t,n){var r=jh();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=sh.bind(null,Or,e),[r.memoizedState,e]},useRef:function useRef(e){return e={current:e},jh().memoizedState=e},useState:function useState(e){var t=jh();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:lh,lastRenderedState:e}).dispatch=sh.bind(null,Or,e),[t.memoizedState,e]},useDebugValue:rh,useResponder:kd},qr={readContext:Mf,useCallback:function useCallback(e,t){var n=kh();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ch(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Mf,useEffect:function useEffect(e,t){return ph(516,Er|Sr,e,t)},useImperativeHandle:function useImperativeHandle(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ph(4,br|kr,qh.bind(null,t,e),n)},useLayoutEffect:function useLayoutEffect(e,t){return ph(4,br|kr,e,t)},useMemo:function useMemo(e,t){var n=kh();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ch(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:mh,useRef:function useRef(){return kh().memoizedState},useState:function useState(e){return mh(lh)},useDebugValue:rh,useResponder:kd},Wr=null,Gr=null,Hr=!1;function wh(e,t){var n=xh(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function yh(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function zh(e){if(Hr){var t=Gr;if(t){var n=t;if(!yh(e,t)){if(!(t=Ne(n.nextSibling))||!yh(e,t))return e.effectTag|=2,Hr=!1,void(Wr=e);wh(Wr,n)}Wr=e,Gr=Ne(t.firstChild)}else e.effectTag|=2,Hr=!1,Wr=e}}function Ah(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;Wr=e}function Bh(e){if(e!==Wr)return!1;if(!Hr)return Ah(e),Hr=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ke(t,e.memoizedProps))for(t=Gr;t;)wh(e,t),t=Ne(t.nextSibling);return Ah(e),Gr=Wr?Ne(e.stateNode.nextSibling):null,!0}function Ch(){Gr=Wr=null,Hr=!1}var Vr=et.ReactCurrentOwner,Yr=!1;function S(e,t,n,r){t.child=null===e?lr(t,null,n,r):ur(t,e.child,n,r)}function Eh(e,t,n,r,i){n=n.render;var a=t.ref;return Kf(t,i),r=dh(e,t,n,r,a,i),null===e||Yr?(t.effectTag|=1,S(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Fh(e,t,i))}function Gh(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hh(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=qg(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ih(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:jd)(i,r)&&e.ref===t.ref)?Fh(e,t,a):(t.effectTag|=1,(e=og(o,r)).ref=t.ref,e.return=t,t.child=e)}function Ih(e,t,n,r,i,a){return null!==e&&jd(e.memoizedProps,r)&&e.ref===t.ref&&(Yr=!1,i<a)?Fh(e,t,a):Jh(e,t,n,r,a)}function Kh(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Jh(e,t,n,r,i){var a=N(n)?Mn:Dn.current;return a=Se(t,a),Kf(t,i),n=dh(e,t,n,r,a,i),null===e||Yr?(t.effectTag|=1,S(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Fh(e,t,i))}function Lh(e,t,n,r,i){if(N(n)){var a=!0;Xe(t)}else a=!1;if(Kf(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),hg(t,n,r),jg(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Mf(l):l=Se(t,l=N(n)?Mn:Dn.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&ig(t,o,r,l),rr=!1;var d=t.memoizedState;u=o.state=d;var h=t.updateQueue;null!==h&&(Wf(t,h,r,o,i),u=t.memoizedState),s!==r||d!==u||Pn.current||rr?("function"===typeof c&&(bg(t,n,c,r),u=t.memoizedState),(s=rr||gg(t,n,s,r,d,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,s=t.memoizedProps,o.props=t.type===t.elementType?s:Af(t.type,s),u=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Mf(l):l=Se(t,l=N(n)?Mn:Dn.current),(f="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&ig(t,o,r,l),rr=!1,u=t.memoizedState,d=o.state=u,null!==(h=t.updateQueue)&&(Wf(t,h,r,o,i),d=t.memoizedState),s!==r||u!==d||Pn.current||rr?("function"===typeof c&&(bg(t,n,c,r),d=t.memoizedState),(c=rr||gg(t,n,s,r,u,d,l))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Mh(e,t,n,r,a,i)}function Mh(e,t,n,r,i,a){Kh(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ye(t,n,!1),Fh(e,t,a);r=t.stateNode,Vr.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=ur(t,e.child,null,a),t.child=ur(t,null,s,a)):S(e,t,s,a),t.memoizedState=r.state,i&&Ye(t,n,!0),t.child}function Nh(e){var t=e.stateNode;t.pendingContext?Ve(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ve(0,t.context,!1),Ag(e,t.containerInfo)}var $r={};function Ph(e,t,n){var r,i=t.mode,a=t.pendingProps,o=vr.current,s=null,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(o&mr)&&(null===e||null!==e.memoizedState)),r?(s=$r,u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=gr),J(vr,o&=pr),null===e)if(u){if(a=a.fallback,(e=sg(null,i,0,null)).return=t,0===(2&t.mode))for(u=null!==t.memoizedState?t.child.child:t.child,e.child=u;null!==u;)u.return=e,u=u.sibling;(n=sg(a,i,n,null)).return=t,e.sibling=n,i=e}else i=n=lr(t,null,a.children,n);else{if(null!==e.memoizedState)if(i=(o=e.child).sibling,u){if(a=a.fallback,(n=og(o,o.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==o.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;(a=og(i,a,i.expirationTime)).return=t,n.sibling=a,i=n,n.childExpirationTime=0,n=a}else i=n=ur(t,o.child,a.children,n);else if(o=e.child,u){if(u=a.fallback,(a=sg(null,i,0,null)).return=t,a.child=o,null!==o&&(o.return=a),0===(2&t.mode))for(o=null!==t.memoizedState?t.child.child:t.child,a.child=o;null!==o;)o.return=a,o=o.sibling;(n=sg(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,i=a,a.childExpirationTime=0}else n=i=ur(t,o,a.children,n);t.stateNode=e.stateNode}return t.memoizedState=s,t.child=i,n}function Qh(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i)}function Rh(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(S(e,t,r.children,n),0!==((r=vr.current)&mr))r=r&pr|mr,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag){if(null!==e.memoizedState){e.expirationTime<n&&(e.expirationTime=n);var o=e.alternate;null!==o&&o.expirationTime<n&&(o.expirationTime=n),Jf(e.return,n)}}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=pr}if(J(vr,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(r=n.alternate)&&null===Hg(r)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qh(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(r=i.alternate)&&null===Hg(r)){t.child=i;break}r=i.sibling,i.sibling=n,n=i,i=r}Qh(t,!0,n,null,a);break;case"together":Qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fh(e,n,r){if(null!==e&&(n.dependencies=e.dependencies),n.childExpirationTime<r)return null;if(null!==e&&n.child!==e.child)throw t(Error(153));if(null!==n.child){for(r=og(e=n.child,e.pendingProps,e.expirationTime),n.child=r,r.return=n;null!==e.sibling;)e=e.sibling,(r=r.sibling=og(e,e.pendingProps,e.expirationTime)).return=n;r.sibling=null}return n.child}function Sh(e){e.effectTag|=4}var Xr=void 0,Kr=void 0,Jr=void 0,Zr=void 0;function $h(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ai(e){switch(e.tag){case 1:N(e.type)&&Te();var n=e.effectTag;return 2048&n?(e.effectTag=-2049&n|64,e):null;case 3:if(Bg(),Ue(),0!==(64&(n=e.effectTag)))throw t(Error(285));return e.effectTag=-2049&n|64,e;case 5:return Dg(e),null;case 13:return H(vr),2048&(n=e.effectTag)?(e.effectTag=-2049&n|64,e):null;case 18:return null;case 19:return H(vr),null;case 4:return Bg(),null;case 10:return If(e),null;default:return null}}function bi(e,t){return{value:e,source:t,stack:pc(t)}}Xr=function Th(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(20===n.tag)e.appendChild(n.stateNode.instance);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Kr=function Uh(){},Jr=function Vh(e,t,n,r,i){var a=e.memoizedProps;if(a!==r){var o=t.stateNode;switch(zg(fr.current),e=null,n){case"input":a=Bc(o,a),r=Bc(o,r),e=[];break;case"option":a=le(o,a),r=le(o,r),e=[];break;case"select":a=s({},a,{value:void 0}),r=s({},r,{value:void 0}),e=[];break;case"textarea":a=ne(o,a),r=ne(o,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(o.onclick=Ge)}De(n,r),o=n=void 0;var u=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var l=a[n];for(o in l)l.hasOwnProperty(o)&&(u||(u={}),u[o]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(E.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(u||(u={}),u[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(u||(u={}),u[o]=c[o])}else u||(e||(e=[]),e.push(n,u)),u=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(n,""+c)):"children"===n?l===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(E.hasOwnProperty(n)?(null!=c&&Fe(i,n),e||l===c||(e=[])):(e=e||[]).push(n,c))}u&&(e=e||[]).push("style",u),i=e,(t.updateQueue=i)&&Sh(t)}},Zr=function Wh(e,t,n,r){n!==r&&Sh(t)};var Qr="function"===typeof WeakSet?WeakSet:Set;function di(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=pc(n)),null!==n&&oc(n.type),t=t.value,null!==e&&1===e.tag&&oc(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function gi(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){fi(e,n)}else t.current=null}function hi(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==yr){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==yr&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ii(e,t){switch("function"===typeof oa&&oa(e),e.tag){case 0:case 11:case 14:case 15:var n=e.updateQueue;if(null!==n&&null!==(n=n.lastEffect)){var r=n.next;vf(97<t?97:t,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(a){fi(i,a)}}t=t.next}while(t!==r)}))}break;case 1:gi(e),"function"===typeof(t=e.stateNode).componentWillUnmount&&function ei(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){fi(e,n)}}(e,t);break;case 5:gi(e);break;case 4:ki(e,t)}}function li(e,t){for(var n=e;;)if(ii(n,t),null!==n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mi(e){return 5===e.tag||3===e.tag||4===e.tag}function ni(e){e:{for(var n=e.return;null!==n;){if(mi(n)){var r=n;break e}n=n.return}throw t(Error(160))}switch(n=r.stateNode,r.tag){case 5:var i=!1;break;case 3:case 4:n=n.containerInfo,i=!0;break;default:throw t(Error(161))}16&r.effectTag&&(we(n,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||mi(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}for(var a=e;;){var o=5===a.tag||6===a.tag;if(o||20===a.tag){var s=o?a.stateNode:a.stateNode.instance;if(r)if(i){var u=s;s=r,8===(o=n).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else n.insertBefore(s,r);else i?(8===(u=n).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=Ge)):n.appendChild(s)}else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function ki(e,n){for(var r=e,i=!1,a=void 0,o=void 0;;){if(!i){i=r.return;e:for(;;){if(null===i)throw t(Error(160));switch(a=i.stateNode,i.tag){case 5:o=!1;break e;case 3:case 4:a=a.containerInfo,o=!0;break e}i=i.return}i=!0}if(5===r.tag||6===r.tag)if(li(r,n),o){var s=a,u=r.stateNode;8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)}else a.removeChild(r.stateNode);else if(20===r.tag)u=r.stateNode.instance,li(r,n),o?8===(s=a).nodeType?s.parentNode.removeChild(u):s.removeChild(u):a.removeChild(u);else if(4===r.tag){if(null!==r.child){a=r.stateNode.containerInfo,o=!0,r.child.return=r,r=r.child;continue}}else if(ii(r,n),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(i=!1)}r.sibling.return=r.return,r=r.sibling}}function oi(e,n){switch(n.tag){case 0:case 11:case 14:case 15:hi(br,xr,n);break;case 1:break;case 5:var r=n.stateNode;if(null!=r){var i=n.memoizedProps,a=null!==e?e.memoizedProps:i;e=n.type;var o=n.updateQueue;if(n.updateQueue=null,null!==o){for(r[W]=i,"input"===e&&"radio"===i.type&&null!=i.name&&Dc(r,i),Ee(e,a),n=Ee(e,i),a=0;a<o.length;a+=2){var s=o[a],u=o[a+1];"style"===s?Ae(r,u):"dangerouslySetInnerHTML"===s?bn(r,u):"children"===s?we(r,u):zc(r,s,u,n)}switch(e){case"input":Ec(r,i);break;case"textarea":pe(r,i);break;case"select":n=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?me(r,!!i.multiple,e,!1):n!==!!i.multiple&&(null!=i.defaultValue?me(r,!!i.multiple,i.defaultValue,!0):me(r,!!i.multiple,i.multiple?[]:"",!1))}}}break;case 6:if(null===n.stateNode)throw t(Error(162));n.stateNode.nodeValue=n.memoizedProps;break;case 3:case 12:break;case 13:if(r=n,null===n.memoizedState?i=!1:(i=!0,r=n.child,Ni=Zn()),null!==r)e:for(e=r;;){if(5===e.tag)o=e.stateNode,i?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,a=void 0!==(a=e.memoizedProps.style)&&null!==a&&a.hasOwnProperty("display")?a.display:null,o.style.display=ze("display",a));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===r)break e;for(;null===e.sibling;){if(null===e.return||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}qi(n);break;case 19:qi(n);break;case 17:case 20:break;default:throw t(Error(163))}}function qi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qr),t.forEach((function(t){var r=ri.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var si="function"===typeof WeakMap?WeakMap:Map;function ti(e,t,n){(n=Qf(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zi||(zi=!0,Wi=r),di(e,t)},n}function wi(e,t,n){(n=Qf(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return di(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Gi?Gi=new Set([this]):Gi.add(this),di(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ui=Math.ceil,ci=et.ReactCurrentDispatcher,pi=et.ReactCurrentOwner,vi=0,yi=8,_i=16,xi=32,Si=0,Ei=1,Ti=2,Ci=3,Oi=4,Ai=vi,Ri=null,Di=null,Pi=0,Mi=Si,ji=1073741823,Fi=1073741823,Ii=null,Li=!1,Ni=0,Bi=500,Ui=null,zi=!1,Wi=null,Gi=null,Hi=!1,Vi=null,Xi=90,Ki=0,Ji=null,Qi=0,ea=null,ta=0;function cg(){return(Ai&(_i|xi))!==vi?1073741821-(Zn()/10|0):0!==ta?ta:ta=1073741821-(Zn()/10|0)}function dg(e,n,r){if(0===(2&(n=n.mode)))return 1073741823;var i=tf();if(0===(4&n))return 99===i?1073741823:1073741822;if((Ai&_i)!==vi)return Pi;if(null!==r)e=1073741821-25*(1+((1073741821-e+(0|r.timeoutMs||5e3)/10)/25|0));else switch(i){case 99:e=1073741823;break;case 98:e=1073741821-10*(1+((1073741821-e+15)/10|0));break;case 97:case 96:e=1073741821-25*(1+((1073741821-e+500)/25|0));break;case 95:e=1;break;default:throw t(Error(326))}return null!==Ri&&e===Pi&&--e,e}var na=0;function eg(e,n){if(50<Qi)throw Qi=0,ea=null,t(Error(185));if(null!==(e=Yi(e,n))){e.pingTime=0;var r=tf();if(1073741823===n)if((Ai&yi)!==vi&&(Ai&(_i|xi))===vi)for(var i=Z(e,1073741823,!0);null!==i;)i=i(!0);else Zi(e,99,1073741823),Ai===vi&&O();else Zi(e,r,n);(4&Ai)===vi||98!==r&&99!==r||(null===Ji?Ji=new Map([[e,n]]):(void 0===(r=Ji.get(e))||r>n)&&Ji.set(e,n))}}function Yi(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(t>i.firstPendingTime&&(i.firstPendingTime=t),0===(e=i.lastPendingTime)||t<e)&&(i.lastPendingTime=t),i}function Zi(e,t,n){if(e.callbackExpirationTime<n){var r=e.callbackNode;null!==r&&r!==Vn&&In(r),e.callbackExpirationTime=n,1073741823===n?e.callbackNode=xf($i.bind(null,e,Z.bind(null,e,n))):(r=null,1!==n&&(r={timeout:10*(1073741821-n)-Zn()}),e.callbackNode=wf(t,$i.bind(null,e,Z.bind(null,e,n)),r))}}function $i(e,t,n){var r=e.callbackNode,i=null;try{return null!==(i=t(n))?$i.bind(null,e,i):null}finally{null===i&&r===e.callbackNode&&(e.callbackNode=null,e.callbackExpirationTime=0)}}function aj(){(Ai&(1|_i|xi))===vi&&(function bj(){if(null!==Ji){var e=Ji;Ji=null,e.forEach((function(e,t){xf(Z.bind(null,t,e))})),O()}}(),cj())}function ej(e,t){var n=Ai;Ai|=1;try{return e(t)}finally{(Ai=n)===vi&&O()}}function fj(e,t,n,r){var i=Ai;Ai|=4;try{return vf(98,e.bind(null,t,n,r))}finally{(Ai=i)===vi&&O()}}function gj(e,t){var n=Ai;Ai&=-2,Ai|=yi;try{return e(t)}finally{(Ai=n)===vi&&O()}}function hj(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Cn(n)),null!==Di)for(n=Di.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&Te();break;case 3:Bg(),Ue();break;case 5:Dg(r);break;case 4:Bg();break;case 13:case 19:H(vr);break;case 10:If(r)}n=n.return}Ri=e,Di=og(e.current,null),Pi=t,Mi=Si,Fi=ji=1073741823,Ii=null,Li=!1}function Z(e,n,r){if((Ai&(_i|xi))!==vi)throw t(Error(327));if(e.firstPendingTime<n)return null;if(r&&e.finishedExpirationTime===n)return ij.bind(null,e);if(cj(),e!==Ri||n!==Pi)hj(e,n);else if(Mi===Ci)if(Li)hj(e,n);else{var i=e.lastPendingTime;if(i<n)return Z.bind(null,e,i)}if(null!==Di){i=Ai,Ai|=_i;var a=ci.current;if(null===a&&(a=Ur),ci.current=Ur,r){if(1073741823!==n){var o=cg();if(o<n)return Ai=i,Gf(),ci.current=a,Z.bind(null,e,o)}}else ta=0;for(;;)try{if(r)for(;null!==Di;)Di=jj(Di);else for(;null!==Di&&!Ln();)Di=jj(Di);break}catch(g){if(Gf(),ih(),null===(o=Di)||null===o.return)throw hj(e,n),Ai=i,g;e:{var s=e,u=o.return,l=o,c=g,f=Pi;if(l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,h=0!==(vr.current&gr);c=u;do{var p;if((p=13===c.tag)&&(null!==c.memoizedState?p=!1:p=void 0!==(p=c.memoizedProps).fallback&&(!0!==p.unstable_avoidThisFallback||!h)),p){if(null===(u=c.updateQueue)?((u=new Set).add(d),c.updateQueue=u):u.add(d),0===(2&c.mode)){c.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((f=Qf(1073741823,null)).tag=2,Sf(l,f))),l.expirationTime=1073741823;break e}l=s,s=f,null===(h=l.pingCache)?(h=l.pingCache=new si,u=new Set,h.set(d,u)):void 0===(u=h.get(d))&&(u=new Set,h.set(d,u)),u.has(s)||(u.add(s),l=kj.bind(null,l,d,s),d.then(l,l)),c.effectTag|=2048,c.expirationTime=f;break e}c=c.return}while(null!==c);c=Error((oc(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+pc(l))}Mi!==Oi&&(Mi=Ei),c=bi(c,l),l=u;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=f,Tf(l,f=ti(l,c,f));break e;case 1:if(d=c,s=l.type,u=l.stateNode,0===(64&l.effectTag)&&("function"===typeof s.getDerivedStateFromError||null!==u&&"function"===typeof u.componentDidCatch&&(null===Gi||!Gi.has(u)))){l.effectTag|=2048,l.expirationTime=f,Tf(l,f=wi(l,d,f));break e}}l=l.return}while(null!==l)}Di=lj(o)}if(Ai=i,Gf(),ci.current=a,null!==Di)return Z.bind(null,e,n)}if(e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,function dj(e,t){var n=e.firstBatch;return!!(null!==n&&n._defer&&n._expirationTime>=t)&&(wf(97,(function(){return n._onComplete(),null})),!0)}(e,n))return null;switch(Ri=null,Mi){case Si:throw t(Error(328));case Ei:return(i=e.lastPendingTime)<n?Z.bind(null,e,i):r?ij.bind(null,e):(hj(e,n),xf(Z.bind(null,e,n)),null);case Ti:return 1073741823===ji&&!r&&10<(r=Ni+Bi-Zn())?Li?(hj(e,n),Z.bind(null,e,n)):(i=e.lastPendingTime)<n?Z.bind(null,e,i):(e.timeoutHandle=Tn(ij.bind(null,e),r),null):ij.bind(null,e);case Ci:if(!r){if(Li)return hj(e,n),Z.bind(null,e,n);if((r=e.lastPendingTime)<n)return Z.bind(null,e,r);if(1073741823!==Fi?r=10*(1073741821-Fi)-Zn():1073741823===ji?r=0:(r=10*(1073741821-ji)-5e3,0>(r=(i=Zn())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ui(r/1960))-r)&&(r=n)),10<r)return e.timeoutHandle=Tn(ij.bind(null,e),r),null}return ij.bind(null,e);case Oi:return!r&&1073741823!==ji&&null!==Ii&&(i=ji,0>=(n=0|(a=Ii).busyMinDurationMs)?n=0:(r=0|a.busyDelayMs,n=(i=Zn()-(10*(1073741821-i)-(0|a.timeoutMs||5e3)))<=r?0:r+n-i),10<n)?(e.timeoutHandle=Tn(ij.bind(null,e),n),null):ij.bind(null,e);default:throw t(Error(329))}}function Xf(e,t){e<ji&&1<e&&(ji=e),null!==t&&e<Fi&&1<e&&(Fi=e,Ii=t)}function jj(e){var t=ia(e.alternate,e,Pi);return e.memoizedProps=e.pendingProps,null===t&&(t=lj(e)),pi.current=null,t}function lj(e){Di=e;do{var n=Di.alternate;if(e=Di.return,0===(1024&Di.effectTag)){e:{var r=n,i=Pi,a=(n=Di).pendingProps;switch(n.tag){case 2:case 16:break;case 15:case 0:break;case 1:N(n.type)&&Te();break;case 3:Bg(),Ue(),(i=n.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==r&&null!==r.child||(Bh(n),n.effectTag&=-3),Kr(n);break;case 5:Dg(n),i=zg(hr.current);var o=n.type;if(null!==r&&null!=n.stateNode)Jr(r,n,o,a,i),r.ref!==n.ref&&(n.effectTag|=128);else if(a){var u=zg(fr.current);if(Bh(n)){a=void 0,o=(r=n).stateNode;var l=r.type,c=r.memoizedProps;switch(o[q]=r,o[W]=c,l){case"iframe":case"object":case"embed":G("load",o);break;case"video":case"audio":for(var f=0;f<ue.length;f++)G(ue[f],o);break;case"source":G("error",o);break;case"img":case"image":case"link":G("error",o),G("load",o);break;case"form":G("reset",o),G("submit",o);break;case"details":G("toggle",o);break;case"input":Cc(o,c),G("invalid",o),Fe(i,"onChange");break;case"select":o._wrapperState={wasMultiple:!!c.multiple},G("invalid",o),Fe(i,"onChange");break;case"textarea":oe(o,c),G("invalid",o),Fe(i,"onChange")}for(a in De(l,c),f=null,c)c.hasOwnProperty(a)&&(u=c[a],"children"===a?"string"===typeof u?o.textContent!==u&&(f=["children",u]):"number"===typeof u&&o.textContent!==""+u&&(f=["children",""+u]):E.hasOwnProperty(a)&&null!=u&&Fe(i,a));switch(l){case"input":Vb(o),Gc(o,c,!0);break;case"textarea":Vb(o),qe(o);break;case"select":case"option":break;default:"function"===typeof c.onClick&&(o.onclick=Ge)}i=f,r.updateQueue=i,null!==i&&Sh(n)}else{c=o,r=a,l=n,f=9===i.nodeType?i:i.ownerDocument,u===yn.html&&(u=se(c)),u===yn.html?"script"===c?((c=f.createElement("div")).innerHTML="<script><\/script>",f=c.removeChild(c.firstChild)):"string"===typeof r.is?f=f.createElement(c,{is:r.is}):(f=f.createElement(c),"select"===c&&(c=f,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):f=f.createElementNS(u,c),(c=f)[q]=l,c[W]=r,Xr(r=c,n,!1,!1),l=r;var d=i,h=Ee(o,a);switch(o){case"iframe":case"object":case"embed":G("load",l),i=a;break;case"video":case"audio":for(i=0;i<ue.length;i++)G(ue[i],l);i=a;break;case"source":G("error",l),i=a;break;case"img":case"image":case"link":G("error",l),G("load",l),i=a;break;case"form":G("reset",l),G("submit",l),i=a;break;case"details":G("toggle",l),i=a;break;case"input":Cc(l,a),i=Bc(l,a),G("invalid",l),Fe(d,"onChange");break;case"option":i=le(l,a);break;case"select":l._wrapperState={wasMultiple:!!a.multiple},i=s({},a,{value:void 0}),G("invalid",l),Fe(d,"onChange");break;case"textarea":oe(l,a),i=ne(l,a),G("invalid",l),Fe(d,"onChange");break;default:i=a}De(o,i),c=void 0,f=o,u=l;var p=i;for(c in p)if(p.hasOwnProperty(c)){var g=p[c];"style"===c?Ae(u,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&bn(u,g):"children"===c?"string"===typeof g?("textarea"!==f||""!==g)&&we(u,g):"number"===typeof g&&we(u,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(E.hasOwnProperty(c)?null!=g&&Fe(d,c):null!=g&&zc(u,c,g,h))}switch(o){case"input":Vb(l),Gc(l,a,!1);break;case"textarea":Vb(l),qe(l);break;case"option":null!=a.value&&l.setAttribute("value",""+Ac(a.value));break;case"select":i=l,l=a,i.multiple=!!l.multiple,null!=(c=l.value)?me(i,!!l.multiple,c,!1):null!=l.defaultValue&&me(i,!!l.multiple,l.defaultValue,!0);break;default:"function"===typeof i.onClick&&(l.onclick=Ge)}Je(o,a)&&Sh(n),n.stateNode=r}null!==n.ref&&(n.effectTag|=128)}else if(null===n.stateNode)throw t(Error(166));break;case 6:if(r&&null!=n.stateNode)Zr(r,n,r.memoizedProps,a);else{if("string"!==typeof a&&null===n.stateNode)throw t(Error(166));r=zg(hr.current),zg(fr.current),Bh(n)?(i=n.stateNode,r=n.memoizedProps,i[q]=n,i.nodeValue!==r&&Sh(n)):(i=n,(r=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[q]=n,i.stateNode=r)}break;case 11:break;case 13:if(H(vr),a=n.memoizedState,0!==(64&n.effectTag)){n.expirationTime=i;break e}i=null!==a,a=!1,null===r?Bh(n):(a=null!==(o=r.memoizedState),i||null===o||null!==(o=r.child.sibling)&&(null!==(l=n.firstEffect)?(n.firstEffect=o,o.nextEffect=l):(n.firstEffect=n.lastEffect=o,o.nextEffect=null),o.effectTag=8)),i&&!a&&0!==(2&n.mode)&&(null===r&&!0!==n.memoizedProps.unstable_avoidThisFallback||0!==(vr.current&gr)?Mi===Si&&(Mi=Ti):Mi!==Si&&Mi!==Ti||(Mi=Ci)),(i||a)&&(n.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Bg(),Kr(n);break;case 10:If(n);break;case 9:case 14:break;case 17:N(n.type)&&Te();break;case 18:break;case 19:if(H(vr),null===(a=n.memoizedState))break;if(o=0!==(64&n.effectTag),null===(l=a.rendering)){if(o)$h(a,!1);else if(Mi!==Si||null!==r&&0!==(64&r.effectTag))for(r=n.child;null!==r;){if(null!==(l=Hg(r))){for(n.effectTag|=64,$h(a,!1),null!==(r=l.updateQueue)&&(n.updateQueue=r,n.effectTag|=4),n.firstEffect=n.lastEffect=null,r=n.child;null!==r;)o=i,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childExpirationTime=0,a.expirationTime=o,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=l.childExpirationTime,a.expirationTime=l.expirationTime,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,o=l.dependencies,a.dependencies=null===o?null:{expirationTime:o.expirationTime,firstContext:o.firstContext,responders:o.responders}),r=r.sibling;J(vr,vr.current&pr|mr),n=n.child;break e}r=r.sibling}}else{if(!o)if(null!==(r=Hg(l))){if(n.effectTag|=64,o=!0,$h(a,!0),null===a.tail&&"hidden"===a.tailMode){null!==(i=r.updateQueue)&&(n.updateQueue=i,n.effectTag|=4),null!==(n=n.lastEffect=a.lastEffect)&&(n.nextEffect=null);break}}else Zn()>a.tailExpiration&&1<i&&(n.effectTag|=64,o=!0,$h(a,!1),n.expirationTime=n.childExpirationTime=i-1);a.isBackwards?(l.sibling=n.child,n.child=l):(null!==(i=a.last)?i.sibling=l:n.child=l,a.last=l)}if(null!==a.tail){0===a.tailExpiration&&(a.tailExpiration=Zn()+500),i=a.tail,a.rendering=i,a.tail=i.sibling,a.lastEffect=n.lastEffect,i.sibling=null,r=vr.current,J(vr,r=o?r&pr|mr:r&pr),n=i;break e}break;case 20:break;default:throw t(Error(156))}n=null}if(i=Di,1===Pi||1!==i.childExpirationTime){for(r=0,a=i.child;null!==a;)(o=a.expirationTime)>r&&(r=o),(l=a.childExpirationTime)>r&&(r=l),a=a.sibling;i.childExpirationTime=r}if(null!==n)return n;null!==e&&0===(1024&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Di.firstEffect),null!==Di.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Di.firstEffect),e.lastEffect=Di.lastEffect),1<Di.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Di:e.firstEffect=Di,e.lastEffect=Di))}else{if(null!==(n=ai(Di)))return n.effectTag&=1023,n;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=1024)}if(null!==(n=Di.sibling))return n;Di=e}while(null!==Di);return Mi===Si&&(Mi=Oi),null}function ij(e){var t=tf();return vf(99,nj.bind(null,e,t)),null!==Vi&&wf(97,(function(){return cj(),null})),null}function nj(e,n){if(cj(),(Ai&(_i|xi))!==vi)throw t(Error(327));var r=e.finishedWork,i=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw t(Error(177));e.callbackNode=null,e.callbackExpirationTime=0;var a=r.expirationTime,o=r.childExpirationTime;if(a=o>a?o:a,e.firstPendingTime=a,a<e.lastPendingTime&&(e.lastPendingTime=a),e===Ri&&(Di=Ri=null,Pi=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,a=r.firstEffect):a=r:a=r.firstEffect,null!==a){o=Ai,Ai|=xi,pi.current=null,Sn=ln;var s=ae();if(be(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{u.nodeType,f.nodeType}catch(U){u=null;break e}var d=0,h=-1,p=-1,g=0,m=0,v=s,y=null;t:for(;;){for(var _;v!==u||0!==c&&3!==v.nodeType||(h=d+c),v!==f||0!==l&&3!==v.nodeType||(p=d+l),3===v.nodeType&&(d+=v.nodeValue.length),null!==(_=v.firstChild);)y=v,v=_;for(;;){if(v===s)break t;if(y===u&&++g===c&&(h=d),y===f&&++m===l&&(p=d),null!==(_=v.nextSibling))break;y=(v=y).parentNode}v=_}u=-1===h||-1===p?null:{start:h,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;En={focusedElem:s,selectionRange:u},ln=!1,Ui=a;do{try{for(;null!==Ui;){if(0!==(256&Ui.effectTag)){var b=Ui.alternate;switch((s=Ui).tag){case 0:case 11:case 15:hi(_r,yr,s);break;case 1:if(256&s.effectTag&&null!==b){var x=b.memoizedProps,w=b.memoizedState,k=s.stateNode,S=k.getSnapshotBeforeUpdate(s.elementType===s.type?x:Af(s.type,x),w);k.__reactInternalSnapshotBeforeUpdate=S}break;case 3:case 5:case 6:case 4:case 17:break;default:throw t(Error(163))}}Ui=Ui.nextEffect}}catch(U){if(null===Ui)throw t(Error(330));fi(Ui,U),Ui=Ui.nextEffect}}while(null!==Ui);Ui=a;do{try{for(b=n;null!==Ui;){var E=Ui.effectTag;if(16&E&&we(Ui.stateNode,""),128&E){var T=Ui.alternate;if(null!==T){var C=T.ref;null!==C&&("function"===typeof C?C(null):C.current=null)}}switch(14&E){case 2:ni(Ui),Ui.effectTag&=-3;break;case 6:ni(Ui),Ui.effectTag&=-3,oi(Ui.alternate,Ui);break;case 4:oi(Ui.alternate,Ui);break;case 8:ki(x=Ui,b),x.return=null,x.child=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null;var A=x.alternate;null!==A&&(A.return=null,A.child=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null)}Ui=Ui.nextEffect}}catch(U){if(null===Ui)throw t(Error(330));fi(Ui,U),Ui=Ui.nextEffect}}while(null!==Ui);if(C=En,T=ae(),E=C.focusedElem,b=C.selectionRange,T!==E&&E&&E.ownerDocument&&function $d(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?$d(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}(E.ownerDocument.documentElement,E)){null!==b&&be(E)&&(T=b.start,void 0===(C=b.end)&&(C=T),"selectionStart"in E?(E.selectionStart=T,E.selectionEnd=Math.min(C,E.value.length)):(C=(T=E.ownerDocument||document)&&T.defaultView||window).getSelection&&(C=C.getSelection(),x=E.textContent.length,A=Math.min(b.start,x),b=void 0===b.end?A:Math.min(b.end,x),!C.extend&&A>b&&(x=b,b=A,A=x),x=Zd(E,A),w=Zd(E,b),x&&w&&(1!==C.rangeCount||C.anchorNode!==x.node||C.anchorOffset!==x.offset||C.focusNode!==w.node||C.focusOffset!==w.offset)&&((T=T.createRange()).setStart(x.node,x.offset),C.removeAllRanges(),A>b?(C.addRange(T),C.extend(w.node,w.offset)):(T.setEnd(w.node,w.offset),C.addRange(T))))),T=[];for(C=E;C=C.parentNode;)1===C.nodeType&&T.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"===typeof E.focus&&E.focus(),E=0;E<T.length;E++)(C=T[E]).element.scrollLeft=C.left,C.element.scrollTop=C.top}En=null,ln=!!Sn,Sn=null,e.current=r,Ui=a;do{try{for(E=i;null!==Ui;){var R=Ui.effectTag;if(36&R){var D=Ui.alternate;switch(C=E,(T=Ui).tag){case 0:case 11:case 15:hi(wr,kr,T);break;case 1:var P=T.stateNode;if(4&T.effectTag)if(null===D)P.componentDidMount();else{var M=T.elementType===T.type?D.memoizedProps:Af(T.type,D.memoizedProps);P.componentDidUpdate(M,D.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var j=T.updateQueue;null!==j&&Yf(0,j,P);break;case 3:var F=T.updateQueue;if(null!==F){if(A=null,null!==T.child)switch(T.child.tag){case 5:A=T.child.stateNode;break;case 1:A=T.child.stateNode}Yf(0,F,A)}break;case 5:var I=T.stateNode;null===D&&4&T.effectTag&&(C=I,Je(T.type,T.memoizedProps)&&C.focus());break;case 6:case 4:case 12:break;case 13:case 19:case 17:case 20:break;default:throw t(Error(163))}}if(128&R){var L=Ui.ref;if(null!==L){var N=Ui.stateNode;switch(Ui.tag){case 5:var B=N;break;default:B=N}"function"===typeof L?L(B):L.current=B}}512&R&&(Hi=!0),Ui=Ui.nextEffect}}catch(U){if(null===Ui)throw t(Error(330));fi(Ui,U),Ui=Ui.nextEffect}}while(null!==Ui);Ui=null,Yn(),Ai=o}else e.current=r;if(Hi)Hi=!1,Vi=e,Ki=i,Xi=n;else for(Ui=a;null!==Ui;)n=Ui.nextEffect,Ui.nextEffect=null,Ui=n;if(0!==(n=e.firstPendingTime)?Zi(e,R=zf(R=cg(),n),n):Gi=null,"function"===typeof aa&&aa(r.stateNode,i),1073741823===n?e===ea?Qi++:(Qi=0,ea=e):Qi=0,zi)throw zi=!1,e=Wi,Wi=null,e;return(Ai&yi)!==vi?null:(O(),null)}function cj(){if(null===Vi)return!1;var e=Vi,t=Ki,n=Xi;return Vi=null,Ki=0,Xi=90,vf(97<n?97:n,qj.bind(null,e,t))}function qj(e){if((Ai&(_i|xi))!==vi)throw t(Error(331));var n=Ai;for(Ai|=xi,e=e.current.firstEffect;null!==e;){try{var r=e;if(0!==(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:hi(Er,yr,r),hi(yr,Sr,r)}}catch(i){if(null===e)throw t(Error(330));fi(e,i)}r=e.nextEffect,e.nextEffect=null,e=r}return Ai=n,O(),!0}function rj(e,t,n){Sf(e,t=ti(e,t=bi(n,t),1073741823)),null!==(e=Yi(e,1073741823))&&Zi(e,99,1073741823)}function fi(e,t){if(3===e.tag)rj(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){rj(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gi||!Gi.has(r))){Sf(n,e=wi(n,e=bi(t,e),1073741823)),null!==(n=Yi(n,1073741823))&&Zi(n,99,1073741823);break}}n=n.return}}function kj(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ri===e&&Pi===n?Mi===Ci||Mi===Ti&&1073741823===ji&&Zn()-Ni<Bi?hj(e,Pi):Li=!0:e.lastPendingTime<n||(0!==(t=e.pingTime)&&t<n||(e.pingTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),Zi(e,t=zf(t=cg(),n),n)))}function ri(e,t){var n=e.stateNode;null!==n&&n.delete(t),n=zf(n=cg(),t=dg(n,e,null)),null!==(e=Yi(e,t))&&Zi(e,n,t)}var ia=void 0;ia=function mj(e,n,r){var i=n.expirationTime;if(null!==e){var a=n.pendingProps;if(e.memoizedProps!==a||Pn.current)Yr=!0;else if(i<r){switch(Yr=!1,n.tag){case 3:Nh(n),Ch();break;case 5:if(Cg(n),4&n.mode&&1!==r&&a.hidden)return n.expirationTime=n.childExpirationTime=1,null;break;case 1:N(n.type)&&Xe(n);break;case 4:Ag(n,n.stateNode.containerInfo);break;case 10:Hf(n,n.memoizedProps.value);break;case 13:if(null!==n.memoizedState)return 0!==(i=n.child.childExpirationTime)&&i>=r?Ph(e,n,r):(J(vr,vr.current&pr),null!==(n=Fh(e,n,r))?n.sibling:null);J(vr,vr.current&pr);break;case 19:if(i=n.childExpirationTime>=r,0!==(64&e.effectTag)){if(i)return Rh(e,n,r);n.effectTag|=64}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null),J(vr,vr.current),!i)return null}return Fh(e,n,r)}}else Yr=!1;switch(n.expirationTime=0,n.tag){case 2:if(i=n.type,null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),e=n.pendingProps,a=Se(n,Dn.current),Kf(n,r),a=dh(null,n,i,e,a,r),n.effectTag|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(n.tag=1,ih(),N(i)){var o=!0;Xe(n)}else o=!1;n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;var s=i.getDerivedStateFromProps;"function"===typeof s&&bg(n,i,s,e),a.updater=or,n.stateNode=a,a._reactInternalFiber=n,jg(n,i,e,r),n=Mh(null,n,i,!0,o,r)}else n.tag=0,S(null,n,a,r),n=n.child;return n;case 16:switch(a=n.elementType,null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),e=n.pendingProps,a=function Bf(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)})),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(a),n.type=a,o=n.tag=function sj(e){if("function"===typeof e)return Hh(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ft)return 11;if(e===pt)return 14}return 2}(a),e=Af(a,e),o){case 0:n=Jh(null,n,a,e,r);break;case 1:n=Lh(null,n,a,e,r);break;case 11:n=Eh(null,n,a,e,r);break;case 14:n=Gh(null,n,a,Af(a.type,e),i,r);break;default:throw t(Error(306),a,"")}return n;case 0:return i=n.type,a=n.pendingProps,Jh(e,n,i,a=n.elementType===i?a:Af(i,a),r);case 1:return i=n.type,a=n.pendingProps,Lh(e,n,i,a=n.elementType===i?a:Af(i,a),r);case 3:if(Nh(n),null===(i=n.updateQueue))throw t(Error(282));return a=null!==(a=n.memoizedState)?a.element:null,Wf(n,i,n.pendingProps,null,r),(i=n.memoizedState.element)===a?(Ch(),n=Fh(e,n,r)):(a=n.stateNode,(a=(null===e||null===e.child)&&a.hydrate)&&(Gr=Ne(n.stateNode.containerInfo.firstChild),Wr=n,a=Hr=!0),a?(n.effectTag|=2,n.child=lr(n,null,i,r)):(S(e,n,i,r),Ch()),n=n.child),n;case 5:return Cg(n),null===e&&zh(n),i=n.type,a=n.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,Ke(i,a)?s=null:null!==o&&Ke(i,o)&&(n.effectTag|=16),Kh(e,n),4&n.mode&&1!==r&&a.hidden?(n.expirationTime=n.childExpirationTime=1,n=null):(S(e,n,s,r),n=n.child),n;case 6:return null===e&&zh(n),null;case 13:return Ph(e,n,r);case 4:return Ag(n,n.stateNode.containerInfo),i=n.pendingProps,null===e?n.child=ur(n,null,i,r):S(e,n,i,r),n.child;case 11:return i=n.type,a=n.pendingProps,Eh(e,n,i,a=n.elementType===i?a:Af(i,a),r);case 7:return S(e,n,n.pendingProps,r),n.child;case 8:case 12:return S(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(i=n.type._context,a=n.pendingProps,s=n.memoizedProps,Hf(n,o=a.value),null!==s){var u=s.value;if(0===(o=hd(u,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(u,o):1073741823))){if(s.children===a.children&&!Pn.current){n=Fh(e,n,r);break e}}else for(null!==(u=n.child)&&(u.return=n);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&o)){1===u.tag&&((c=Qf(r,null)).tag=2,Sf(u,c)),u.expirationTime<r&&(u.expirationTime=r),null!==(c=u.alternate)&&c.expirationTime<r&&(c.expirationTime=r),Jf(u.return,r),l.expirationTime<r&&(l.expirationTime=r);break}c=c.next}}else s=10===u.tag&&u.type===n.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===n){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}S(e,n,a.children,r),n=n.child}return n;case 9:return a=n.type,i=(o=n.pendingProps).children,Kf(n,r),i=i(a=Mf(a,o.unstable_observedBits)),n.effectTag|=1,S(e,n,i,r),n.child;case 14:return o=Af(a=n.type,n.pendingProps),Gh(e,n,a,o=Af(a.type,o),i,r);case 15:return Ih(e,n,n.type,n.pendingProps,i,r);case 17:return i=n.type,a=n.pendingProps,a=n.elementType===i?a:Af(i,a),null!==e&&(e.alternate=null,n.alternate=null,n.effectTag|=2),n.tag=1,N(i)?(e=!0,Xe(n)):e=!1,Kf(n,r),hg(n,i,a),jg(n,i,a,r),Mh(null,n,i,!0,e,r);case 19:return Rh(e,n,r)}throw t(Error(156))};var aa=null,oa=null;function uj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function xh(e,t,n,r){return new uj(e,t,n,r)}function Hh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function og(e,t){var n=e.alternate;return null===n?((n=xh(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qg(e,n,r,i,a,o){var s=2;if(i=e,"function"===typeof e)Hh(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case at:return sg(r.children,a,o,n);case ct:s=8,a|=7;break;case ot:s=8,a|=1;break;case st:return(e=xh(12,r,n,8|a)).elementType=st,e.type=st,e.expirationTime=o,e;case dt:return(e=xh(13,r,n,a)).type=dt,e.elementType=dt,e.expirationTime=o,e;case ht:return(e=xh(19,r,n,a)).elementType=ht,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ut:s=10;break e;case lt:s=9;break e;case ft:s=11;break e;case pt:s=14;break e;case gt:s=16,i=null;break e}throw t(Error(130),null==e?e:typeof e,"")}return(n=xh(s,r,n,a)).elementType=e,n.type=i,n.expirationTime=o,n}function sg(e,t,n,r){return(e=xh(7,e,r,t)).expirationTime=n,e}function pg(e,t,n){return(e=xh(6,e,null,t)).expirationTime=n,e}function rg(e,t,n){return(t=xh(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vj(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=this.firstBatch=null,this.pingTime=this.lastPendingTime=this.firstPendingTime=this.callbackExpirationTime=0}function wj(e,t,n){return e=new vj(e,t,n),t=xh(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e}function xj(e,n,r,i,a,o){var s=n.current;e:if(r){t:{if(2!==ld(r=r._reactInternalFiber)||1!==r.tag)throw t(Error(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(N(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw t(Error(171))}if(1===r.tag){var l=r.type;if(N(l)){r=We(r,l,u);break e}}r=u}else r=Rn;return null===n.context?n.context=r:n.pendingContext=r,n=o,(a=Qf(i,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(a.callback=n),Sf(s,a),eg(s,i),i}function yj(e,t,n,r){var i=t.current,a=cg(),o=ir.suspense;return xj(e,t,n,i=dg(a,i,o),o,r)}function zj(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Bj(e){var t=1073741821-25*(1+((1073741821-cg()+500)/25|0));t<=na&&--t,this._expirationTime=na=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Cj(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Dj(e,t,n){this._internalRoot=wj(e,t,n)}function Ej(e,t){this._internalRoot=wj(e,2,t)}function Hj(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jj(t,n,r,i,a){var o=r._reactRootContainer,s=void 0;if(o){if(s=o._internalRoot,"function"===typeof a){var u=a;a=function e(){var t=zj(s);u.call(t)}}yj(n,s,t,a)}else{if(o=r._reactRootContainer=function Ij(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Dj(e,0,t)}(r,i),s=o._internalRoot,"function"===typeof a){var l=a;a=function e(){var t=zj(s);l.call(t)}}gj((function(){yj(n,s,t,a)}))}return zj(s)}function Kj(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hj(n))throw t(Error(200));return function Aj(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:it,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)}Ie=function Db(e,n,r){switch(n){case"input":if(Ec(e,r),n=r.name,"radio"===r.type&&null!=n){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var i=r[n];if(i!==e&&i.form===e.form){var a=Ka(i);if(!a)throw t(Error(90));Wb(i),Ec(i,a)}}}break;case"textarea":pe(e,r);break;case"select":null!=(n=r.value)&&me(e,!!r.multiple,n,!1)}},Bj.prototype.render=function(e){if(!this._defer)throw t(Error(250));this._hasChildren=!0,this._children=e;var n=this._root._internalRoot,r=this._expirationTime,i=new Cj;return xj(e,n,null,r,null,i._onCommit),i},Bj.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bj.prototype.commit=function(){var e=this._root._internalRoot,n=e.firstBatch;if(!this._defer||null===n)throw t(Error(251));if(this._hasChildren){var r=this._expirationTime;if(n!==this){this._hasChildren&&(r=this._expirationTime=n._expirationTime,this.render(this._children));for(var i=null,a=n;a!==this;)i=a,a=a._next;if(null===i)throw t(Error(251));i._next=a._next,this._next=n,e.firstBatch=this}if(this._defer=!1,n=r,(Ai&(_i|xi))!==vi)throw t(Error(253));xf(Z.bind(null,e,n)),O(),n=this._next,this._next=null,null!==(n=e.firstBatch=n)&&n._hasChildren&&n.render(n._children)}else this._next=null,this._defer=!1},Bj.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Cj.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Cj.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var n=0;n<e.length;n++){var r=e[n];if("function"!==typeof r)throw t(Error(191),r);r()}}},Ej.prototype.render=Dj.prototype.render=function(e,t){var n=this._internalRoot,r=new Cj;return null!==(t=void 0===t?null:t)&&r.then(t),yj(e,n,null,r._onCommit),r},Ej.prototype.unmount=Dj.prototype.unmount=function(e){var t=this._internalRoot,n=new Cj;return null!==(e=void 0===e?null:e)&&n.then(e),yj(null,t,null,n._onCommit),n},Ej.prototype.createBatch=function(){var e=new Bj(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Jb=ej,Kb=fj,Lb=aj,$e=function Mb(e,t){var n=Ai;Ai|=2;try{return e(t)}finally{(Ai=n)===vi&&O()}};var sa={createPortal:Kj,findDOMNode:function findDOMNode(e){if(null==e)e=null;else if(1!==e.nodeType){var n=e._reactInternalFiber;if(void 0===n){if("function"===typeof e.render)throw t(Error(188));throw t(Error(268),Object.keys(e))}e=null===(e=qd(n))?null:e.stateNode}return e},hydrate:function hydrate(e,n,r){if(!Hj(n))throw t(Error(200));return Jj(null,e,n,!0,r)},render:function render(e,n,r){if(!Hj(n))throw t(Error(200));return Jj(null,e,n,!1,r)},unstable_renderSubtreeIntoContainer:function unstable_renderSubtreeIntoContainer(e,n,r,i){if(!Hj(r))throw t(Error(200));if(null==e||void 0===e._reactInternalFiber)throw t(Error(38));return Jj(e,n,r,!1,i)},unmountComponentAtNode:function unmountComponentAtNode(e){if(!Hj(e))throw t(Error(40));return!!e._reactRootContainer&&(gj((function(){Jj(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function unstable_createPortal(){return Kj.apply(void 0,arguments)},unstable_batchedUpdates:ej,unstable_interactiveUpdates:function unstable_interactiveUpdates(e,t,n,r){return aj(),fj(e,t,n,r)},unstable_discreteUpdates:fj,unstable_flushDiscreteUpdates:aj,flushSync:function flushSync(e,n){if((Ai&(_i|xi))!==vi)throw t(Error(187));var r=Ai;Ai|=1;try{return vf(99,e.bind(null,n))}finally{Ai=r,O()}},unstable_createRoot:function Lj(e,n){if(!Hj(e))throw t(Error(299),"unstable_createRoot");return new Ej(e,null!=n&&!0===n.hydrate)},unstable_createSyncRoot:function Mj(e,n){if(!Hj(e))throw t(Error(299),"unstable_createRoot");return new Dj(e,1,null!=n&&!0===n.hydrate)},unstable_flushControlled:function unstable_flushControlled(e){var t=Ai;Ai|=1;try{vf(99,e)}finally{(Ai=t)===vi&&O()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[Ia,Ja,Ka,B.injectEventPluginsByName,w,Qa,function(e){ya(e,Pa)},Hb,Ib,Ud,Ba,cj,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;(function tj(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);aa=function pj(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},oa=function ji(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}return!0})(s({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:et.ReactCurrentDispatcher,findHostInstanceByFiber:function findHostInstanceByFiber(e){return null===(e=qd(e))?null:e.stateNode},findFiberByHostInstance:function findFiberByHostInstance(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Ha,bundleType:0,version:"16.9.0",rendererPackageName:"react-dom"});var ua={default:sa},la=ua&&sa||ua;r.exports=la.default||la},function(e,t,n){"use strict";e.exports=n(242)},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;if(n.unstable_now=void 0,n.unstable_forceFrameRate=void 0,"undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,f=null,h=function r(){if(null!==c)try{var e=n.unstable_now();c(!0,e),c=null}catch(t){throw setTimeout(r,0),t}};n.unstable_now=function(){return Date.now()},a=function d(e){null!==c?setTimeout(a,0,e):(c=e,setTimeout(h,0))},o=function e(t,n){f=setTimeout(t,n)},s=function g(){clearTimeout(f)},u=function m(){return!1},l=n.unstable_forceFrameRate=function(){}}else{var p=window.performance,v=window.Date,y=window.setTimeout,_=window.clearTimeout,x=window.requestAnimationFrame,w=window.cancelAnimationFrame;"undefined"!==typeof console&&("function"!==typeof x&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof w&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),n.unstable_now="object"===typeof p&&"function"===typeof p.now?function(){return p.now()}:function(){return v.now()};var k=!1,S=null,E=-1,C=-1,O=33.33,A=-1,R=-1,D=0,P=!1;u=function m(){return n.unstable_now()>=D},l=function n(){},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):0<e?(O=Math.floor(1e3/e),P=!0):(O=33.33,P=!1)};var M=function J(){if(null!==S){var e=n.unstable_now(),t=0<D-e;try{S(t,e)||(S=null)}catch(r){throw F.postMessage(null),r}}},j=new MessageChannel,F=j.port2;j.port1.onmessage=M;a=function _d(e){S=e,k||(k=!0,x((function(e){!function L(e){if(null===S)R=A=-1,k=!1;else{k=!0,x((function(e){_(E),L(e)}));if(E=y((function b(){D=n.unstable_now()+O/2,M(),E=y(b,3*O)}),3*O),-1!==A&&.1<e-A){var t=e-A;!P&&-1!==R&&t<O&&R<O&&(8.33>(O=t<R?R:t)&&(O=8.33)),R=t}A=e,D=e+O,F.postMessage(null)}}(e)})))},o=function e(t,r){C=y((function(){t(n.unstable_now())}),r)},s=function g(){_(C),C=-1}}var I=null,N=null,B=null,z=3,q=!1,G=!1,H=!1;function T(e,t){var n=e.next;if(n===e)I=null;else{e===I&&(I=n);var r=e.previous;r.next=n,n.previous=r}e.next=e.previous=null,n=e.callback,r=z;var i=B;z=e.priorityLevel,B=e;try{var a=e.expirationTime<=t;switch(z){case 1:var o=n(a);break;case 2:case 3:case 4:o=n(a);break;case 5:o=n(a)}}catch(s){throw s}finally{z=r,B=i}if("function"===typeof o)if(t=e.expirationTime,e.callback=o,null===I)I=e.next=e.previous=e;else{o=null,a=I;do{if(t<=a.expirationTime){o=a;break}a=a.next}while(a!==I);null===o?o=I:o===I&&(I=e),(t=o.previous).next=o.previous=e,e.next=o,e.previous=t}}function U(e){if(null!==N&&N.startTime<=e)do{var t=N,n=t.next;if(t===n)N=null;else{N=n;var r=t.previous;r.next=n,n.previous=r}t.next=t.previous=null,V(t,t.expirationTime)}while(null!==N&&N.startTime<=e)}function W(e){H=!1,U(e),G||(null!==I?(G=!0,a(X)):null!==N&&o(W,N.startTime-e))}function X(e,t){G=!1,H&&(H=!1,s()),U(t),q=!0;try{if(e){if(null!==I)do{T(I,t),U(t=n.unstable_now())}while(null!==I&&!u())}else for(;null!==I&&I.expirationTime<=t;)T(I,t),U(t=n.unstable_now());return null!==I||(null!==N&&o(W,N.startTime-t),!1)}finally{q=!1}}function Y(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}function V(e,t){if(null===I)I=e.next=e.previous=e;else{var n=null,r=I;do{if(t<r.expirationTime){n=r;break}r=r.next}while(r!==I);null===n?n=I:n===I&&(I=e),(t=n.previous).next=n.previous=e,e.next=n,e.previous=t}}var $=l;n.unstable_ImmediatePriority=1,n.unstable_UserBlockingPriority=2,n.unstable_NormalPriority=3,n.unstable_IdlePriority=5,n.unstable_LowPriority=4,n.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=z;z=e;try{return t()}finally{z=n}},n.unstable_next=function(e){switch(z){case 1:case 2:case 3:var t=3;break;default:t=z}var n=z;z=t;try{return e()}finally{z=n}},n.unstable_scheduleCallback=function(e,t,r){var i=n.unstable_now();if("object"===typeof r&&null!==r){var u=r.delay;u="number"===typeof u&&0<u?i+u:i,r="number"===typeof r.timeout?r.timeout:Y(e)}else r=Y(e),u=i;if(e={callback:t,priorityLevel:e,startTime:u,expirationTime:r=u+r,next:null,previous:null},u>i){if(r=u,null===N)N=e.next=e.previous=e;else{t=null;var l=N;do{if(r<l.startTime){t=l;break}l=l.next}while(l!==N);null===t?t=N:t===N&&(N=e),(r=t.previous).next=t.previous=e,e.next=t,e.previous=r}null===I&&N===e&&(H?s():H=!0,o(W,u-i))}else V(e,r),G||q||(G=!0,a(X));return e},n.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(e===t)e===I?I=null:e===N&&(N=null);else{e===I?I=t:e===N&&(N=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},n.unstable_wrapCallback=function(e){var t=z;return function(){var n=z;z=t;try{return e.apply(this,arguments)}finally{z=n}}},n.unstable_getCurrentPriorityLevel=function(){return z},n.unstable_shouldYield=function(){var e=n.unstable_now();return U(e),null!==B&&null!==I&&I.startTime<=e&&I.expirationTime<B.expirationTime||u()},n.unstable_requestPaint=$,n.unstable_continueExecution=function(){G||q||(G=!0,a(X))},n.unstable_pauseExecution=function(){},n.unstable_getFirstCallbackNode=function(){return I}},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(244),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(o){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",l="object"===typeof e,c=t.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=t.regeneratorRuntime=l?e.exports:{}).wrap=wrap;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",g={},m={};m[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(values([])));y&&y!==r&&i.call(y,o)&&(m=y);var _=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(m);GeneratorFunction.prototype=_.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[u]=GeneratorFunction.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(_),e},c.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[s]=function(){return this},c.AsyncIterator=AsyncIterator,c.async=function(e,t,n,r){var i=new AsyncIterator(wrap(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},defineIteratorMethods(_),_[u]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function next(){for(;t.length;){var n=t.pop();if(n in e)return next.value=n,next.done=!1,next}return next.done=!0,next}},c.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var t=this;function handle(r,i){return o.type="throw",o.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function abrupt(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function complete(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function finish(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),g}},catch:function _catch(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,t,r){return this.delegate={iterator:values(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function wrap(e,t,n,r){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),o=new Context(r||[]);return a._invoke=function makeInvokeMethod(e,t,n){var r=f;return function invoke(i,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return doneResult()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=maybeInvokeDelegate(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=tryCatch(e,t,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function AsyncIterator(e){var t;this._invoke=function enqueue(n,r){function callInvokeWithMethodAndArg(){return new Promise((function(t,a){!function invoke(t,n,r,a){var o=tryCatch(e[t],e,n);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"===typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){invoke("next",e,r,a)}),(function(e){invoke("throw",e,r,a)})):Promise.resolve(u).then((function(e){s.value=e,r(s)}),a)}a(o.arg)}(n,r,t,a)}))}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,maybeInvokeDelegate(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=tryCatch(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[o];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function next(){for(;++r<e.length;)if(i.call(e,r))return next.value=e[r],next.done=!1,next;return next.value=n,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){n(133),n(51),n(66),n(256),n(264),n(265),e.exports=n(18).Promise},function(e,t,n){var r=n(91),i=n(92);e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(95),i=n(53),a=n(65),o={};n(39)(o,n(23)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(33),i=n(28),a=n(96);e.exports=n(36)?Object.defineProperties:function defineProperties(e,t){i(e);for(var n,o=a(t),s=o.length,u=0;s>u;)r.f(e,n=o[u++],t[n]);return e}},function(e,t,n){var r=n(54);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(45),i=n(97),a=n(251);e.exports=function(e){return function(t,n,o){var s,u=r(t),l=i(u.length),c=a(o,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(91),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(40),i=n(101),a=n(98)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){"use strict";var r=n(254),i=n(255),a=n(44),o=n(45);e.exports=n(134)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,a,o,s=n(52),u=n(21),l=n(43),c=n(102),f=n(27),d=n(35),h=n(62),p=n(257),g=n(258),m=n(141),v=n(142).set,y=n(260)(),_=n(104),b=n(143),x=n(261),w=n(144),k=u.TypeError,S=u.process,E=S&&S.versions,T=E&&E.v8||"",C=u.Promise,O="process"==c(S),A=function empty(){},R=i=_.f,D=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[n(23)("species")]=function(e){e(A,A)};return(O||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==T.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(r){}}(),P=function isThenable(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},M=function notify(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,a=0,o=function run(t){var n,a,o,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(i||(2==e._h&&I(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),o=!0)),n===t.promise?l(k("Promise-chain cycle")):(a=P(n))?a.call(n,u,l):u(n)):l(r)}catch(f){c&&!o&&c.exit(),l(f)}};n.length>a;)o(n[a++]);e._c=[],e._n=!1,t&&!e._h&&j(e)}))}},j=function onUnhandled(e){v.call(u,(function(){var t,n,r,i=e._v,a=F(e);if(a&&(t=b((function(){O?S.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=O||F(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},F=function isUnhandled(e){return 1!==e._h&&0===(e._a||e._c).length},I=function onHandleUnhandled(e){v.call(u,(function(){var t;O?S.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function $reject(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},N=function $resolve(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=P(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,l($resolve,r,1),l(L,r,1))}catch(i){L.call(r,i)}})):(n._v=e,n._s=1,M(n,!1))}catch(r){L.call({_w:n,_d:!1},r)}}};D||(C=function Promise(e){p(this,C,"Promise","_h"),h(e),r.call(this);try{e(l(N,this,1),l(L,this,1))}catch(t){L.call(this,t)}},(r=function Promise(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(262)(C.prototype,{then:function then(e,t){var n=R(m(this,C));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=O?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function _catch(e){return this.then(void 0,e)}}),a=function OwnPromiseCapability(){var e=new r;this.promise=e,this.resolve=l(N,e,1),this.reject=l(L,e,1)},_.f=R=function newPromiseCapability(e){return e===C||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!D,{Promise:C}),n(65)(C,"Promise"),n(263)("Promise"),o=n(18).Promise,f(f.S+f.F*!D,"Promise",{reject:function reject(e){var t=R(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!D),"Promise",{resolve:function resolve(e){return w(s&&this===o?C:this,e)}}),f(f.S+f.F*!(D&&n(145)((function(e){C.all(e).catch(A)}))),"Promise",{all:function all(e){var t=this,n=R(t),r=n.resolve,i=n.reject,a=b((function(){var n=[],a=0,o=1;g(e,!1,(function(e){var s=a++,u=!1;n.push(void 0),o++,t.resolve(e).then((function(e){u||(u=!0,n[s]=e,--o||r(n))}),i)})),--o||r(n)}));return a.e&&i(a.v),n.promise},race:function race(e){var t=this,n=R(t),r=n.reject,i=b((function(){g(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(43),i=n(139),a=n(140),o=n(28),s=n(97),u=n(103),l={},c={};(t=e.exports=function(e,t,n,f,d){var h,p,g,m,v=d?function(){return e}:u(e),y=r(n,f,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(h=s(e.length);h>_;_++)if((m=t?y(o(p=e[_])[0],p[1]):y(e[_]))===l||m===c)return m}else for(g=v.call(e);!(p=g.next()).done;)if((m=i(g,y,p.value,t))===l||m===c)return m}).BREAK=l,t.RETURN=c},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(21),i=n(142).set,a=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,u="process"==n(54)(o);e.exports=function(){var e,t,n,l=function flush(){var r,i;for(u&&(r=o.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(a){throw e?n():t=void 0,a}}t=void 0,r&&r.enter()};if(u)n=function notify(){o.nextTick(l)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function notify(){c.then(l)}}else n=function notify(){i.call(r,l)};else{var f=!0,d=document.createTextNode("");new a(l).observe(d,{characterData:!0}),n=function notify(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(21).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(39);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(21),i=n(18),a=n(33),o=n(36),s=n(23)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function get(){return this}})}},function(e,t,n){"use strict";var r=n(27),i=n(18),a=n(21),o=n(141),s=n(144);r(r.P+r.R,"Promise",{finally:function _finally(e){var t=o(this,i.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(27),i=n(104),a=n(143);r(r.S,"Promise",{try:function _try(e){var t=i.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommaAccessToken=t.logOut=t.isAuthed=void 0;var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26)),a=(t.logOut=function(){var e=(0,i.default)(r.default.mark((function _callee(){return r.default.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.removeItem("authorization"),!s){e.next=4;break}return e.next=4,o.default.removeItem("authorization");case 4:case"end":return e.stop()}}),_callee,this)})));return function logOut(){return e.apply(this,arguments)}}(),t.getCommaAccessToken=function(){var e=(0,i.default)(r.default.mark((function _callee2(){var e;return r.default.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(e=getTokenInternal()){n.next=11;break}return n.prev=2,n.next=5,o.default.getItem("authorization");case 5:e=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),s=!1;case 11:if(!e){n.next=16;break}if(t.isAuthed=!0,!s){n.next=16;break}return n.next=16,o.default.setItem("authorization",e);case 16:return n.abrupt("return",e);case 17:case"end":return n.stop()}}),_callee2,this,[[2,8]])})));return function getCommaAccessToken(){return e.apply(this,arguments)}}());t.getTokenInternal=getTokenInternal,t.setCommaAccessToken=function setCommaAccessToken(e){return localStorage.setItem("authorization",e),a()};var o=_interopRequireDefault(n(268));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.isAuthed=!1;var s=!0;function getTokenInternal(){return"undefined"!==typeof localStorage&&localStorage.authorization?localStorage.authorization:null}},function(e,t,n){(function(t){var n;e.exports=function e(t,r,i){function s(o,u){if(!r[o]){if(!t[o]){if(!u&&"function"==typeof n&&n)return n(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,(function(e){var n=t[o][1][e];return s(n||e)}),c,c.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,n,r){(function(e){"use strict";var t,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,o=new i(nextTick),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),t=function scheduleDrain(){s.data=a=++a%2}}else if(e.setImmediate||"undefined"===typeof e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function scheduleDrain(){var t=e.document.createElement("script");t.onreadystatechange=function(){nextTick(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function scheduleDrain(){setTimeout(nextTick,0)};else{var u=new e.MessageChannel;u.port1.onmessage=nextTick,t=function scheduleDrain(){u.port2.postMessage(0)}}var l=[];function nextTick(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}n.exports=function immediate(e){1!==l.push(e)||r||t()}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function INTERNAL(){}var i={},a=["REJECTED"],o=["FULFILLED"],s=["PENDING"];function Promise(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,n){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function unwrap(e,t,n){r((function(){var r;try{r=t(n)}catch(a){return i.reject(e,a)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function getThen(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function appyThen(){t.apply(e,arguments)}}function safelyResolveThenable(e,t){var n=!1;function onError(t){n||(n=!0,i.reject(e,t))}function onSuccess(t){n||(n=!0,i.resolve(e,t))}var r=tryCatch((function tryToUnwrap(){t(onSuccess,onError)}));"error"===r.status&&onError(r.value)}function tryCatch(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=Promise,Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){if("function"!==typeof e&&this.state===o||"function"!==typeof t&&this.state===a)return this;var n=new this.constructor(INTERNAL);return this.state!==s?unwrap(n,this.state===o?e:t,this.outcome):this.queue.push(new QueueItem(n,e,t)),n},QueueItem.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){i.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=tryCatch(getThen,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)safelyResolveThenable(e,r);else{e.state=o,e.outcome=t;for(var a=-1,s=e.queue.length;++a<s;)e.queue[a].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},Promise.resolve=function resolve(e){return e instanceof this?e:i.resolve(new this(INTERNAL),e)},Promise.reject=function reject(e){var t=new this(INTERNAL);return i.reject(t,e)},Promise.all=function all(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),o=0,s=-1,u=new this(INTERNAL);++s<n;)allResolver(e[s],s);return u;function allResolver(e,s){t.resolve(e).then((function resolveFromAll(e){a[s]=e,++o!==n||r||(r=!0,i.resolve(u,a))}),(function(e){r||(r=!0,i.reject(u,e))}))}},Promise.race=function race(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,o=-1,s=new this(INTERNAL);++o<n;)a=e[o],t.resolve(a).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}));return s}},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!==typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function getIDB(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function createBlob(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"===typeof Promise&&e(3);var a=Promise;function executeCallback(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function executeTwoCallbacks(e,t,n){"function"===typeof t&&e.then(t),"function"===typeof n&&e.catch(n)}function normalizeKey(e){return"string"!==typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function getCallback(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var o="local-forage-detect-blob-support",s=void 0,u={},l=Object.prototype.toString,c="readonly",f="readwrite";function _checkBlobSupport(e){return"boolean"===typeof s?a.resolve(s):function _checkBlobSupportWithoutCaching(e){return new a((function(t){var n=e.transaction(o,f),r=createBlob([""]);n.objectStore(o).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return s=e}))}function _deferReadiness(e){var t=u[e.name],n={};n.promise=new a((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function _advanceReadiness(e){var t=u[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _rejectReadiness(e,t){var n=u[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function _getConnection(e,t){return new a((function(n,r){if(u[e.name]=u[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);_deferReadiness(e),e.db.close()}var a=[e.name];t&&a.push(e.version);var s=i.open.apply(i,a);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(o)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){n(s.result),_advanceReadiness(e)}}))}function _getOriginalConnection(e){return _getConnection(e,!1)}function _getUpgradedConnection(e){return _getConnection(e,!0)}function _isUpgradeNeeded(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var a=e.db.version+1;a>e.version&&(e.version=a)}return!0}return!1}function _decodeBlob(e){return createBlob([function _binStringToArrayBuffer(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function _isEncodedBlob(e){return e&&e.__local_forage_encoded_blob}function _fullyReady(e){var t=this,n=t._initReady().then((function(){var e=u[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return executeTwoCallbacks(n,e,e),n}function createTransaction(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(o){if(r>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_getUpgradedConnection(e)})).then((function(){return function _tryReconnect(e){_deferReadiness(e);for(var t=u[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,_getOriginalConnection(e).then((function(t){return e.db=t,_isUpgradeNeeded(e)?_getUpgradedConnection(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw _rejectReadiness(e,t),t}))}(e).then((function(){createTransaction(e,t,n,r-1)}))})).catch(n);n(o)}}var d={_driver:"asyncStorage",_initStorage:function _initStorage(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=u[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},u[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=_fullyReady);var o=[];function ignoreErrors(){return a.resolve()}for(var s=0;s<i.forages.length;s++){var l=i.forages[s];l!==t&&o.push(l._initReady().catch(ignoreErrors))}var c=i.forages.slice(0);return a.all(o).then((function(){return n.db=i.db,_getOriginalConnection(n)})).then((function(e){return n.db=e,_isUpgradeNeeded(n,t._defaultConfig.version)?_getUpgradedConnection(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var a=c[r];a!==t&&(a._dbInfo.db=n.db,a._dbInfo.version=n.version)}}))},_support:function isIndexedDBValid(){try{if(!i)return!1;var e="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}(),iterate:function iterate(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){createTransaction(n._dbInfo,c,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;_isEncodedBlob(r)&&(r=_decodeBlob(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(u){r(u)}}))})).catch(r)}));return executeCallback(r,t),r},getItem:function getItem(e,t){var n=this;e=normalizeKey(e);var r=new a((function(t,r){n.ready().then((function(){createTransaction(n._dbInfo,c,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),_isEncodedBlob(e)&&(e=_decodeBlob(e)),t(e)},o.onerror=function(){r(o.error)}}catch(s){r(s)}}))})).catch(r)}));return executeCallback(r,t),r},setItem:function setItem(e,t,n){var r=this;e=normalizeKey(e);var i=new a((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===l.call(t)?_checkBlobSupport(o.db).then((function(e){return e?t:function _encodeBlob(e){return new a((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}(t)})):t})).then((function(t){createTransaction(r._dbInfo,f,(function(a,o){if(a)return i(a);try{var s=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=u.error?u.error:u.transaction.error;i(e)}}catch(l){i(l)}}))})).catch(i)}));return executeCallback(i,n),i},removeItem:function removeItem(e,t){var n=this;e=normalizeKey(e);var r=new a((function(t,r){n.ready().then((function(){createTransaction(n._dbInfo,f,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName).delete(e);a.oncomplete=function(){t()},a.onerror=function(){r(o.error)},a.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return executeCallback(r,t),r},clear:function clear(e){var t=this,n=new a((function(e,n){t.ready().then((function(){createTransaction(t._dbInfo,f,(function(r,i){if(r)return n(r);try{var a=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(o){n(o)}}))})).catch(n)}));return executeCallback(n,e),n},length:function length(e){var t=this,n=new a((function(e,n){t.ready().then((function(){createTransaction(t._dbInfo,c,(function(r,i){if(r)return n(r);try{var a=i.objectStore(t._dbInfo.storeName).count();a.onsuccess=function(){e(a.result)},a.onerror=function(){n(a.error)}}catch(o){n(o)}}))})).catch(n)}));return executeCallback(n,e),n},key:function key(e,t){var n=this,r=new a((function(t,r){e<0?t(null):n.ready().then((function(){createTransaction(n._dbInfo,c,(function(i,a){if(i)return r(i);try{var o=a.objectStore(n._dbInfo.storeName),s=!1,u=o.openCursor();u.onsuccess=function(){var n=u.result;n?0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e)):t(null)},u.onerror=function(){r(u.error)}}catch(l){r(l)}}))})).catch(r)}));return executeCallback(r,t),r},keys:function keys(e){var t=this,n=new a((function(e,n){t.ready().then((function(){createTransaction(t._dbInfo,c,(function(r,i){if(r)return n(r);try{var a=i.objectStore(t._dbInfo.storeName).openCursor(),o=[];a.onsuccess=function(){var t=a.result;t?(o.push(t.key),t.continue()):e(o)},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return executeCallback(n,e),n},dropInstance:function dropInstance(e,t){t=getCallback.apply(this,arguments);var n,r=this.config();if((e="function"!==typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):_getOriginalConnection(e).then((function(t){var n=u[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));n=e.storeName?o.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;_deferReadiness(e);var r=u[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var l=o[s];l._dbInfo.db=null,l._dbInfo.version=n}return new a((function(t,r){var a=i.open(e.name,n);a.onerror=function(e){a.result.close(),r(e)},a.onupgradeneeded=function(){a.result.deleteObjectStore(e.storeName)},a.onsuccess=function(){var e=a.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,_advanceReadiness(n._dbInfo)}})).catch((function(t){throw(_rejectReadiness(e,t)||a.resolve()).catch((function(){})),t}))}})):o.then((function(t){_deferReadiness(e);var n=u[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)_advanceReadiness(r[t]._dbInfo)})).catch((function(t){throw(_rejectReadiness(e,t)||a.resolve()).catch((function(){})),t}))}))}else n=a.reject("Invalid arguments");return executeCallback(n,t),n}},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="~~local_forage_type~",g=/^~~local_forage_type~([^~]+)~/,m="__lfsc__:",v=m.length,y="arbf",_="blob",b="si08",x="ui08",w="uic8",k="si16",S="si32",E="ur16",T="ui32",C="fl32",O="fl64",A=v+y.length,R=Object.prototype.toString;function stringToBuffer(e){var t,n,r,i,a,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=h.indexOf(e[t]),r=h.indexOf(e[t+1]),i=h.indexOf(e[t+2]),a=h.indexOf(e[t+3]),c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&a;return l}function bufferToString(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=h[n[t]>>2],r+=h[(3&n[t])<<4|n[t+1]>>4],r+=h[(15&n[t+1])<<2|n[t+2]>>6],r+=h[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var D={serialize:function serialize(e,t){var n="";if(e&&(n=R.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===R.call(e.buffer))){var r,i=m;e instanceof ArrayBuffer?(r=e,i+=y):(r=e.buffer,"[object Int8Array]"===n?i+=b:"[object Uint8Array]"===n?i+=x:"[object Uint8ClampedArray]"===n?i+=w:"[object Int16Array]"===n?i+=k:"[object Uint16Array]"===n?i+=E:"[object Int32Array]"===n?i+=S:"[object Uint32Array]"===n?i+=T:"[object Float32Array]"===n?i+=C:"[object Float64Array]"===n?i+=O:t(new Error("Failed to get type for BinaryArray"))),t(i+bufferToString(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var n=p+e.type+"~"+bufferToString(this.result);t(m+_+n)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}},deserialize:function deserialize(e){if(e.substring(0,v)!==m)return JSON.parse(e);var t,n=e.substring(A),r=e.substring(v,A);if(r===_&&g.test(n)){var i=n.match(g);t=i[1],n=n.substring(i[0].length)}var a=stringToBuffer(n);switch(r){case y:return a;case _:return createBlob([a],{type:t});case b:return new Int8Array(a);case x:return new Uint8Array(a);case w:return new Uint8ClampedArray(a);case k:return new Int16Array(a);case E:return new Uint16Array(a);case S:return new Int32Array(a);case T:return new Uint32Array(a);case C:return new Float32Array(a);case O:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:stringToBuffer,bufferToString:bufferToString};function createDbTable(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function tryExecuteSql(e,t,n,r,i,a){e.executeSql(n,r,i,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?a(e,o):createDbTable(e,t,(function(){e.executeSql(n,r,i,a)}),a)}),a):a(e,o)}),a)}function _setItem(e,t,n,r){var i=this;e=normalizeKey(e);var o=new a((function(a,o){i.ready().then((function(){void 0===t&&(t=null);var s=t,u=i._dbInfo;u.serializer.serialize(t,(function(t,l){l?o(l):u.db.transaction((function(n){tryExecuteSql(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){a(s)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void a(_setItem.apply(i,[e,s,n,r-1]));o(t)}}))}))})).catch(o)}));return executeCallback(o,n),o}var P={_driver:"webSQLStorage",_initStorage:function _initStorage$1(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!==typeof e[r]?e[r].toString():e[r];var i=new a((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction((function(i){createDbTable(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=D,i},_support:function isWebSQLValid(){return"function"===typeof openDatabase}(),iterate:function iterate$1(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){tryExecuteSql(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var a=r.rows,o=a.length,s=0;s<o;s++){var u=a.item(s),l=u.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=e(l,u.key,s+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return executeCallback(r,t),r},getItem:function getItem$1(e,t){var n=this;e=normalizeKey(e);var r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){tryExecuteSql(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return executeCallback(r,t),r},setItem:function setItem$1(e,t,n){return _setItem.apply(this,[e,t,n,1])},removeItem:function removeItem$1(e,t){var n=this;e=normalizeKey(e);var r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){tryExecuteSql(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return executeCallback(r,t),r},clear:function clear$1(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){tryExecuteSql(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return executeCallback(n,e),n},length:function length$1(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){tryExecuteSql(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return executeCallback(n,e),n},key:function key$1(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){tryExecuteSql(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return executeCallback(r,t),r},keys:function keys$1(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){tryExecuteSql(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return executeCallback(n,e),n},dropInstance:function dropInstance$1(e,t){t=getCallback.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return executeCallback(r=e.name?new a((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(function getAllStoreNames(e){return new a((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],a=0;a<r.rows.length;a++)i.push(r.rows.item(a).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}(r))})).then((function(e){return new a((function(t,n){e.db.transaction((function(r){function dropTable(e){return new a((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],o=0,s=e.storeNames.length;o<s;o++)i.push(dropTable(e.storeNames[o]));a.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):a.reject("Invalid arguments"),t),r}};function _getKeyPrefix(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function _isLocalStorageUsable(){return!function checkIfLocalStorageThrows(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var M={_driver:"localStorageWrapper",_initStorage:function _initStorage$2(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=_getKeyPrefix(e,this._defaultConfig),_isLocalStorageUsable()?(this._dbInfo=t,t.serializer=D,a.resolve()):a.reject()},_support:function isLocalStorageValid(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function iterate$2(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,a=localStorage.length,o=1,s=0;s<a;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var l=localStorage.getItem(u);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,u.substring(i),o++)))return l}}}));return executeCallback(r,t),r},getItem:function getItem$2(e,t){var n=this;e=normalizeKey(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return executeCallback(r,t),r},setItem:function setItem$2(e,t,n){var r=this;e=normalizeKey(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new a((function(i,a){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)a(r);else try{localStorage.setItem(o.keyPrefix+e,t),i(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||a(s),a(s)}}))}))}));return executeCallback(i,n),i},removeItem:function removeItem$2(e,t){var n=this;e=normalizeKey(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return executeCallback(r,t),r},clear:function clear$2(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return executeCallback(n,e),n},length:function length$2(e){var t=this.keys().then((function(e){return e.length}));return executeCallback(t,e),t},key:function key$2(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(i){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return executeCallback(r,t),r},keys:function keys$2(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var a=localStorage.key(i);0===a.indexOf(e.keyPrefix)&&r.push(a.substring(e.keyPrefix.length))}return r}));return executeCallback(n,e),n},dropInstance:function dropInstance$2(e,t){if(t=getCallback.apply(this,arguments),!(e="function"!==typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return executeCallback(r=e.name?new a((function(t){e.storeName?t(_getKeyPrefix(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),t),r}},j=function sameValue(e,t){return e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)},F=function includes(e,t){for(var n=e.length,r=0;r<n;){if(j(e[r],t))return!0;r++}return!1},I=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},L={},N={},B={INDEXEDDB:d,WEBSQL:P,LOCALSTORAGE:M},U=[B.INDEXEDDB._driver,B.WEBSQL._driver,B.LOCALSTORAGE._driver],z=["dropInstance"],q=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(z),W={description:"",driver:U.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function callWhenReady(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function extend(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(I(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var G=new(function(){function LocalForage(e){for(var t in function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LocalForage),B)if(B.hasOwnProperty(t)){var n=B[t],r=n._driver;this[t]=r,L[r]||this.defineDriver(n)}this._defaultConfig=extend({},W),this._config=extend({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return LocalForage.prototype.config=function config(e){if("object"===("undefined"===typeof e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!==typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"===typeof e?this._config[e]:this._config},LocalForage.prototype.defineDriver=function defineDriver(e,t,n){var r=new a((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=q.concat("_initStorage"),s=0,u=o.length;s<u;s++){var l=o[s];if((!F(z,l)||e[l])&&"function"!==typeof e[l])return void n(i)}!function configureMissingMethods(){for(var t=function methodNotImplementedFactory(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return executeCallback(n,arguments[arguments.length-1]),n}},n=0,r=z.length;n<r;n++){var i=z[n];e[i]||(e[i]=t(i))}}();var c=function setDriverSupport(n){L[r]&&console.info("Redefining LocalForage driver: "+r),L[r]=e,N[r]=n,t()};"_support"in e?e._support&&"function"===typeof e._support?e._support().then(c,n):c(!!e._support):c(!0)}catch(f){n(f)}}));return executeTwoCallbacks(r,t,n),r},LocalForage.prototype.driver=function driver(){return this._driver||null},LocalForage.prototype.getDriver=function getDriver(e,t,n){var r=L[e]?a.resolve(L[e]):a.reject(new Error("Driver not found."));return executeTwoCallbacks(r,t,n),r},LocalForage.prototype.getSerializer=function getSerializer(e){var t=a.resolve(D);return executeTwoCallbacks(t,e),t},LocalForage.prototype.ready=function ready(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return executeTwoCallbacks(n,e,e),n},LocalForage.prototype.setDriver=function setDriver(e,t,n){var r=this;I(e)||(e=[e]);var i=this._getSupportedDrivers(e);function setDriverToConfig(){r._config.driver=r.driver()}function extendSelfWithDriver(e){return r._extend(e),setDriverToConfig(),r._ready=r._initStorage(r._config),r._ready}var o=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=o.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,setDriverToConfig(),r._wrapLibraryMethodsWithReady(),r._initDriver=function initDriver(e){return function(){var t=0;return function driverPromiseLoop(){for(;t<e.length;){var n=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(n).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var i=new Error("No available storage method found.");return r._driverSet=a.reject(i),r._driverSet}()}}(i)}))})).catch((function(){setDriverToConfig();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet})),executeTwoCallbacks(this._driverSet,t,n),this._driverSet},LocalForage.prototype.supports=function supports(e){return!!N[e]},LocalForage.prototype._extend=function _extend(e){extend(this,e)},LocalForage.prototype._getSupportedDrivers=function _getSupportedDrivers(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},LocalForage.prototype._wrapLibraryMethodsWithReady=function _wrapLibraryMethodsWithReady(){for(var e=0,t=q.length;e<t;e++)callWhenReady(this,q[e])},LocalForage.prototype.createInstance=function createInstance(e){return new LocalForage(e)},LocalForage}());t.exports=G},{3:3}]},{},[4])(4)}).call(this,n(19))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oauthRedirectLink=t.OAUTH_PARAMS=t.REDIRECT_URI=t.GOOGLE_URL_ROOT=t.GOOGLE_CLIENT_ID=t.GOOGLE_AUTH_ENDPOINT=void 0;var r=_interopRequireDefault(n(146)),i=_interopRequireDefault(n(105));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=t.GOOGLE_AUTH_ENDPOINT="https://accounts.google.com/o/oauth2/auth",o=t.GOOGLE_CLIENT_ID="45471411055-ornt4svd2miog6dnopve7qtmh5mnu6id.apps.googleusercontent.com",s=(t.GOOGLE_URL_ROOT="https://www.googleapis.com/","http://127.0.0.1");r.default.location&&(s=r.default.location.origin);var u=t.REDIRECT_URI=s+"/auth/g/redirect",l=t.OAUTH_PARAMS={type:"web_server",client_id:o,redirect_uri:u,response_type:"code",scope:"https://www.googleapis.com/auth/userinfo.email",prompt:"select_account"};t.oauthRedirectLink=[a,i.default.stringify(l)].join("?")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProfile=function getProfile(e){var t=e||"me";return r.get("v1/"+t+"/")};var r=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34))},function(e,t,n){var r=n(272),i=n(274),a=n(60),o=n(275),s=n(276),u="application/json",l=function noop(){};e.exports=function xhrRequest(e,t,n){if(!e||"string"!==typeof e)throw new TypeError("must specify a URL");"function"===typeof t&&(n=t,t={});if(n&&"function"!==typeof n)throw new TypeError("expected cb to be undefined or a function");n=n||l;var c=(t=t||{}).json?"json":"text",f=(t=a({responseType:c},t)).headers||{},d=(t.method||"GET").toUpperCase(),h=t.query;h&&("string"!==typeof h&&(h=r.stringify(h)),e=i(e,h));"json"===t.responseType&&o(f,"Accept",u);t.json&&"GET"!==d&&"HEAD"!==d&&(o(f,"Content-Type",u),t.body=JSON.stringify(t.body));return t.method=d,t.url=e,t.headers=f,delete t.query,delete t.json,s(t,n)}},function(e,t,n){"use strict";var r=n(147),i=n(60),a=n(273);function encode(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function extract(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function parse(e,t){var n=function parserForArrayFormat(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=i({arrayFormat:"none"},t)),r=Object.create(null);return"string"!==typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),i=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:a(o),n(a(i),o,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=function keysSorter(e){return Array.isArray(e)?e.sort():"object"===typeof e?keysSorter(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}(n):e[t]=n,e}),Object.create(null))):r}t.extract=extract,t.parse=parse,t.stringify=function(e,t){!1===(t=i({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function encoderForArrayFormat(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[encode(t,e),"[",r,"]"].join(""):[encode(t,e),"[",encode(r,e),"]=",encode(n,e)].join("")};case"bracket":return function(t,n){return null===n?encode(t,e):[encode(t,e),"[]=",encode(n,e)].join("")};default:return function(t,n){return null===n?encode(t,e):[encode(t,e),"=",encode(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(r){var i=e[r];if(void 0===i)return"";if(null===i)return encode(r,t);if(Array.isArray(i)){var a=[];return i.slice().forEach((function(e){void 0!==e&&a.push(n(r,e,a.length))})),a.join("&")}return encode(r,t)+"="+encode(i,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:parse(extract(e),t)}}},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(e,t){try{return decodeURIComponent(e.join(""))}catch(i){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],decodeComponents(n),decodeComponents(r))}function decode(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=decodeComponents(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function customDecodeURIComponent(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=i.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var a=decode(r[0]);a!==r[0]&&(n[r[0]]=a)}r=i.exec(e)}n["%C2"]="\ufffd";for(var o=Object.keys(n),s=0;s<o.length;s++){var u=o[s];e=e.replace(new RegExp(u,"g"),n[u])}return e}(e)}}},function(e,t){e.exports=function urlSetQuery(e,t){if(t){t=(t=t.trim().replace(/^(\?|#|&)/,""))?"?"+t:t;var n=e.split(/[\?\#]/)[0];t&&/\:\/\/[^\/]*$/.test(n)&&(n+="/");var r=e.match(/(\#.*)$/);e=n+t,r&&(e+=r[0])}return e}},function(e,t){e.exports=function ensureHeader(e,t,n){var r=t.toLowerCase();e[t]||e[r]||(e[t]=n)}},function(e,t,n){var r=n(277),i=n(296),a=function noop(){};e.exports=function xhrRequest(e,t){delete e.uri;var n=!1;"json"===e.responseType&&(e.responseType="text",n=!0);var o=r(e,(function xhrRequestResult(r,o,s){if(n&&!r)try{var u=o.rawRequest.responseText;s=JSON.parse(u)}catch(l){r=l}o=i(e,o),t(r,r?null:s,o),t=a})),s=o.onabort;return o.onabort=function(){var e=s.apply(o,Array.prototype.slice.call(arguments));return t(new Error("XHR Aborted")),t=a,e},o}},function(e,t,n){"use strict";var r=n(278),i=n(148),a=n(279),o=n(69);function initParams(e,t,n){var r=e;return i(t)?(n=t,"string"===typeof e&&(r={uri:e})):r=o(t,{uri:e}),r.callback=n,r}function createXHR(e,t,n){return _createXHR(t=initParams(e,t,n))}function _createXHR(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,n=function cbOnce(n,r,i){t||(t=!0,e.callback(n,r,i))};function getBody(){var e=void 0;if(e=o.response?o.response:o.responseText||function getXml(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}(o),h)try{e=JSON.parse(e)}catch(t){}return e}function errorFunc(e){return clearTimeout(s),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,p)}function loadFunc(){if(!i){var t;clearTimeout(s),t=e.useXDR&&void 0===o.status?200:1223===o.status?204:o.status;var r=p,c=null;return 0!==t?(r={body:getBody(),statusCode:t,method:l,headers:{},url:u,rawRequest:o},o.getAllResponseHeaders&&(r.headers=a(o.getAllResponseHeaders()))):c=new Error("Internal XMLHttpRequest Error"),n(c,r,r.body)}}var r,i,o=e.xhr||null;o||(o=e.cors||e.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var s,u=o.url=e.uri||e.url,l=o.method=e.method||"GET",c=e.body||e.data,f=o.headers=e.headers||{},d=!!e.sync,h=!1,p={body:void 0,headers:{},statusCode:0,method:l,url:u,rawRequest:o};if("json"in e&&!1!==e.json&&(h=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==l&&"HEAD"!==l&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),c=JSON.stringify(!0===e.json?c:e.json))),o.onreadystatechange=function readystatechange(){4===o.readyState&&setTimeout(loadFunc,0)},o.onload=loadFunc,o.onerror=errorFunc,o.onprogress=function(){},o.onabort=function(){i=!0},o.ontimeout=errorFunc,o.open(l,u,!d,e.username,e.password),d||(o.withCredentials=!!e.withCredentials),!d&&e.timeout>0&&(s=setTimeout((function(){if(!i){i=!0,o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",errorFunc(e)}}),e.timeout)),o.setRequestHeader)for(r in f)f.hasOwnProperty(r)&&o.setRequestHeader(r,f[r]);else if(e.headers&&!function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(o.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(o),o.send(c||null),o}e.exports=createXHR,e.exports.default=createXHR,createXHR.XMLHttpRequest=r.XMLHttpRequest||function noop(){},createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:r.XDomainRequest,function forEachArray(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){createXHR["delete"===e?"del":e]=function(t,n,r){return(n=initParams(t,n,r)).method=e.toUpperCase(),_createXHR(n)}}))},function(e,t,n){(function(t){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=n}).call(this,n(19))},function(e,t,n){var r=n(280),i=n(295);e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),(function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),a=r(e.slice(n+1));"undefined"===typeof t[i]?t[i]=a:!function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}(t[i])?t[i]=[t[i],a]:t[i].push(a)})),t}},function(e,t,n){"use strict";var r=n(67),i=n(149),a=n(151),o=n(152),s=n(294),u=r.call(Function.call,o());i(u,{getPolyfill:o,implementation:a,shim:s}),e.exports=u},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,a=Object.prototype.toString;e.exports=function bind(e){var t=this;if("function"!==typeof t||"[object Function]"!==a.call(t))throw new TypeError(r+t);for(var n,o=i.call(arguments,1),s=function binder(){if(this instanceof n){var r=t.apply(this,o.concat(i.call(arguments)));return Object(r)===r?r:this}return t.apply(e,o.concat(i.call(arguments)))},u=Math.max(0,t.length-o.length),l=[],c=0;c<u;c++)l.push("$"+c);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var f=function Empty(){};f.prototype=t.prototype,n.prototype=new f,f.prototype=null}return n}},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(150),a=Object.keys,o=a?function keys(e){return a(e)}:n(283),s=Object.keys;o.shim=function shimObjectKeys(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function keys(e){return i(e)?s(r.call(e)):s(e)}):Object.keys=o;return Object.keys||o},e.exports=o},function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=n(150),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function equalsConstructorPrototype(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{f(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();r=function keys(e){var t=null!==e&&"object"===typeof e,n="[object Function]"===a.call(e),r=o(e),s=t&&"[object String]"===a.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=l&&n;if(s&&e.length>0&&!i.call(e,0))for(var g=0;g<e.length;++g)d.push(String(g));if(r&&e.length>0)for(var m=0;m<e.length;++m)d.push(String(m));else for(var v in e)p&&"prototype"===v||!i.call(e,v)||d.push(String(v));if(u)for(var y=function equalsConstructorPrototypeIfNotBuggy(e){if("undefined"===typeof window||!h)return f(e);try{return f(e)}catch(t){return!1}}(e),_=0;_<c.length;++_)y&&"constructor"===c[_]||!i.call(e,c[_])||d.push(c[_]);return d}}e.exports=r},function(e,t,n){"use strict";var r=n(68),i=r("%Object%"),a=r("%TypeError%"),o=r("%String%"),s=r("%Number%"),u=n(285),l=n(286),c=n(287),f=n(288),d=n(289),h=n(290),p=n(108),g=n(291),m=n(107),v=n(293)(o.prototype.slice),y=function isPrefixOf(e,t){return e===t||!(e.length>t.length)&&v(t,0,e.length)===e},_={ToPrimitive:g,ToBoolean:function ToBoolean(e){return!!e},ToNumber:function ToNumber(e){return+e},ToInteger:function ToInteger(e){var t=this.ToNumber(e);return c(t)?0:0!==t&&f(t)?d(t)*Math.floor(Math.abs(t)):t},ToInt32:function ToInt32(e){return this.ToNumber(e)>>0},ToUint32:function ToUint32(e){return this.ToNumber(e)>>>0},ToUint16:function ToUint16(e){var t=this.ToNumber(e);if(c(t)||0===t||!f(t))return 0;var n=d(t)*Math.floor(Math.abs(t));return h(n,65536)},ToString:function ToString(e){return o(e)},ToObject:function ToObject(e){return this.CheckObjectCoercible(e),i(e)},CheckObjectCoercible:function CheckObjectCoercible(e,t){if(null==e)throw new a(t||"Cannot call method on "+e);return e},IsCallable:p,SameValue:function SameValue(e,t){return e===t?0!==e||1/e===1/t:c(e)&&c(t)},Type:function Type(e){return null===e?"Null":"undefined"===typeof e?"Undefined":"function"===typeof e||"object"===typeof e?"Object":"number"===typeof e?"Number":"boolean"===typeof e?"Boolean":"string"===typeof e?"String":void 0},IsPropertyDescriptor:function IsPropertyDescriptor(e){return l(this,e)},IsAccessorDescriptor:function IsAccessorDescriptor(e){return"undefined"!==typeof e&&(u(this,"Property Descriptor","Desc",e),!(!m(e,"[[Get]]")&&!m(e,"[[Set]]")))},IsDataDescriptor:function IsDataDescriptor(e){return"undefined"!==typeof e&&(u(this,"Property Descriptor","Desc",e),!(!m(e,"[[Value]]")&&!m(e,"[[Writable]]")))},IsGenericDescriptor:function IsGenericDescriptor(e){return"undefined"!==typeof e&&(u(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function FromPropertyDescriptor(e){if("undefined"===typeof e)return e;if(u(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new a("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function ToPropertyDescriptor(e){if("Object"!==this.Type(e))throw new a("ToPropertyDescriptor requires an object");var t={};if(m(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),m(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),m(e,"value")&&(t["[[Value]]"]=e.value),m(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),m(e,"get")){var n=e.get;if("undefined"!==typeof n&&!this.IsCallable(n))throw new TypeError("getter must be a function");t["[[Get]]"]=n}if(m(e,"set")){var r=e.set;if("undefined"!==typeof r&&!this.IsCallable(r))throw new a("setter must be a function");t["[[Set]]"]=r}if((m(t,"[[Get]]")||m(t,"[[Set]]"))&&(m(t,"[[Value]]")||m(t,"[[Writable]]")))throw new a("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t},"Abstract Equality Comparison":function AbstractEqualityComparison(e,t){var n=this.Type(e),r=this.Type(t);return n===r?e===t:null==e&&null==t||("Number"===n&&"String"===r?this["Abstract Equality Comparison"](e,this.ToNumber(t)):"String"===n&&"Number"===r?this["Abstract Equality Comparison"](this.ToNumber(e),t):"Boolean"===n?this["Abstract Equality Comparison"](this.ToNumber(e),t):"Boolean"===r?this["Abstract Equality Comparison"](e,this.ToNumber(t)):"String"!==n&&"Number"!==n||"Object"!==r?"Object"===n&&("String"===r||"Number"===r)&&this["Abstract Equality Comparison"](this.ToPrimitive(e),t):this["Abstract Equality Comparison"](e,this.ToPrimitive(t)))},"Strict Equality Comparison":function StrictEqualityComparison(e,t){var n=this.Type(e);return n===this.Type(t)&&("Undefined"===n||"Null"===n||e===t)},"Abstract Relational Comparison":function AbstractRelationalComparison(e,t,n){if("Boolean"!==this.Type(n))throw new a("Assertion failed: LeftFirst argument must be a Boolean");var r,i;if(n?(r=this.ToPrimitive(e,s),i=this.ToPrimitive(t,s)):(i=this.ToPrimitive(t,s),r=this.ToPrimitive(e,s)),!("String"===this.Type(r)&&"String"===this.Type(i))){var o=this.ToNumber(r),u=this.ToNumber(i);if(c(o)||c(u))return;return(!f(o)||!f(u)||o!==u)&&((0!==o||0!==u)&&(o!==1/0&&(u===1/0||u!==-1/0&&(o===-1/0||o<u))))}return!y(i,r)&&(!!y(r,i)||r<i)}};e.exports=_},function(e,t,n){"use strict";var r=n(68),i=r("%TypeError%"),a=r("%SyntaxError%"),o=n(107),s={"Property Descriptor":function isPropertyDescriptor(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(o(t,r)&&!n[r])return!1;var a=o(t,"[[Value]]"),s=o(t,"[[Get]]")||o(t,"[[Set]]");if(a&&s)throw new i("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function assertRecord(e,t,n,r){var o=s[t];if("function"!==typeof o)throw new a("unknown record type: "+t);if(!o(e,r))throw new i(n+" must be a "+t)}},function(e,t,n){"use strict";var r=n(68),i=n(107),a=r("%TypeError%");e.exports=function IsPropertyDescriptor(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in t)if(i(t,r)&&!n[r])return!1;if(e.IsDataDescriptor(t)&&e.IsAccessorDescriptor(t))throw new a("Property Descriptors may not be both accessor and data descriptors");return!0}},function(e,t,n){"use strict";e.exports=Number.isNaN||function isNaN(e){return e!==e}},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return e!==e};e.exports=Number.isFinite||function(e){return"number"===typeof e&&!r(e)&&e!==1/0&&e!==-1/0}},function(e,t,n){"use strict";e.exports=function sign(e){return e>=0?1:-1}},function(e,t,n){"use strict";e.exports=function mod(e,t){var n=e%t;return Math.floor(n>=0?n:n+t)}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=n(292),a=n(108),o=function DefaultValue(e){var t;if((t=arguments.length>1?arguments[1]:"[object Date]"===r.call(e)?String:Number)===String||t===Number){var n,o,s=t===String?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<s.length;++o)if(a(e[s[o]])&&(n=e[s[o]](),i(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};e.exports=function ToPrimitive(e){return i(e)?e:arguments.length>1?o(e,arguments[1]):o(e)}},function(e,t){e.exports=function isPrimitive(e){return null===e||"function"!==typeof e&&"object"!==typeof e}},function(e,t,n){"use strict";var r=n(67),i=n(68)("%Function%"),a=i.apply,o=i.call;e.exports=function callBind(){return r.apply(o,arguments)},e.exports.apply=function applyBind(){return r.apply(a,arguments)}},function(e,t,n){"use strict";var r=n(149),i=n(152);e.exports=function shimStringTrim(){var e=i();return r(String.prototype,{trim:e},{trim:function testTrim(){return String.prototype.trim!==e}}),e}},function(e,t,n){"use strict";var r=n(108),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty,o=function forEachArray(e,t,n){for(var r=0,i=e.length;r<i;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function forEachString(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},u=function forEachObject(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))};e.exports=function forEach(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?o(e,t,a):"string"===typeof e?s(e,t,a):u(e,t,a)}},function(e,t){e.exports=function getResponse(e,t){return t?{statusCode:t.statusCode,headers:t.headers,method:e.method,url:e.url,rawRequest:t.rawRequest?t.rawRequest:t}:null}},function(e,t,n){"use strict";var r=n(298),i=n(299),a=n(154);e.exports=function httpStatusError(e){return r("number"===typeof e,"expected http status number"),a(e)?function createError(e){var t=new Error(i[e]+" ("+e+")");return t.statusCode=e,t}(e):null}},function(e,t,n){"use strict";e.exports=function assertOk(e,t){if(!e)throw new Error(t||"Expected true, got "+e)}},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t){e.exports=function SafeParseCallback(e,t,n){2===arguments.length&&(n=t,t=null);var r;try{r=JSON.parse(e,t)}catch(i){return n(i)}n(null,r)}},function(e,t,n){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t,n){"use strict";var r=n(303),i=n(304),a=n(315);e.exports=a(i,r.stringify)},function(e,t,n){"use strict";var r=n(147);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!==typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""))?e.split("&").reduce((function(e,t){var n=t.replace(/\+/g," ").split("="),r=n.shift(),i=n.length>0?n.join("="):void 0;return r=decodeURIComponent(r),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i,e}),{}):{}},t.stringify=function(e){return e?Object.keys(e).sort().map((function(t){var n=e[t];return void 0===n?"":null===n?t:Array.isArray(n)?n.slice().sort().map((function(e){return r(t)+"="+r(e)})).join("&"):r(t)+"="+r(n)})).filter((function(e){return e.length>0})).join("&"):""}},function(e,t,n){"use strict";var r=n(305),i=n(306),a=n(309),o=n(310),s=n(153),u=n(311);function flatten(e,t){return a(t,(function(t,n){return[e+"["+t+"]",u(n)]}))}e.exports=function objectQuery(e){return r(e)?function format(e){return i(e,(function(e,t,n){var i=r(t)?flatten:o;return s(e,i(n,t))}),{})}(e):e}},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===r.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}},function(e,t,n){"use strict";var r=n(307);e.exports=function reduce(e,t,n,i){var a=arguments.length>2;return!e||Object.keys(e).length||a?(r(e,(function(e,r,o){a?n=t.call(i,n,e,r,o):(n=e,a=!0)})),n):null}},function(e,t,n){"use strict";var r=n(308),i=Object.prototype.hasOwnProperty;e.exports=function forOwn(e,t,n){r(e,(function(r,a){if(i.call(e,a))return t.call(n,e[a],a,e)}))}},function(e,t,n){"use strict";e.exports=function forIn(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},function(e,t,n){"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var a=r[i],o=t(a,e[a],e);n[o[0]]=o[1]}return n}},function(e,t,n){"use strict";e.exports=function objectPair(e,t){var n={};return n[e]=t,n}},function(e,t,n){"use strict";var r=n(312),i=n(314);function stringify(e){return i(e,null,"")}e.exports=function print(e){return(function isJson(e){return r(e)||Array.isArray(e)}(e)?stringify:String)(e)}},function(e,t,n){"use strict";var r=n(313);e.exports=function isObject(e){return null!=e&&"object"===typeof e&&!r(e)}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){function serializer(e,t){var n=[],r=[];return null==t&&(t=function cycleReplacer(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"}),function(i,a){if(n.length>0){var o=n.indexOf(this);~o?n.splice(o+1):n.push(this),~o?r.splice(o,1/0,i):r.push(i),~n.indexOf(a)&&(a=t.call(this,i,a))}else n.push(a);return null==e?a:e.call(this,i,a)}}(e.exports=function stringify(e,t,n,r){return JSON.stringify(e,serializer(t,r),n)}).getSerialize=serializer},function(e,t,n){"use strict";e.exports=function valuePipe(e){if(!e)throw new TypeError("At least one function is required");Array.isArray(e)||(e=Array.prototype.slice.call(arguments));return function valuePipeline(t){for(var n=0;n<e.length;n++)t=e[n](t);return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(155));t.createAnnotation=function createAnnotation(e){if((e=a.AnnotationValidator.validate(e)).error)throw e.error;return e=e.value,i.post("v1/annotations/new",e)},t.getAnnotation=function getAnnotation(e){return i.get("v1/annotations/"+e)},t.updateAnnotation=function updateAnnotation(e,t){return i.patch("v1/annotations/"+e,{data:t})},t.listAnnotations=function listAnnotations(e,t,n){if(!n.length)throw new Error("Invalid or empty dongleId");var r=verifyAnnotationStartEnd(e,t),a=r.start,o=r.end;return i.get("v1/devices/"+n+"/annotations/",{from:a,to:o})},t.listMyAnnotations=function listMyAnnotations(e,t){var n=verifyAnnotationStartEnd(e,t),r=n.start,a=n.end;return i.get("v1/me/annotations/",{from:r,to:a})};var i=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34)),a=n(319);function verifyAnnotationStartEnd(e,t){if(e=Number(e),t=Number(t),!(0,r.default)(e))throw new Error("Invalid start time");if(!(0,r.default)(t))throw new Error("Invalid end time");return{start:e,end:t}}},function(e,t,n){n(318),e.exports=n(18).Number.isFinite},function(e,t,n){var r=n(27),i=n(21).isFinite;r(r.S,"Number",{isFinite:function isFinite(e){return"number"==typeof e&&i(e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(320);t.AnnotationValidator=r.object().keys({canonical_segment_name:r.string().required(),offset_nanos_part:r.number().required(),offset_millis:r.number().required(),start_time_utc_millis:r.number().required(),end_time_utc_millis:r.number().required(),type:r.string().required(),data:r.object().keys({reason:r.string().required(),comment:r.string().allow("").optional()})})},function(e,t,n){!function webpackUniversalModuleDefinition(t,n){e.exports=n()}(0,(function(){return function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=32)}([function(e,t,n){"use strict";(function(e,r){var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(17),o=n(15),s=n(37),u=n(16),l=n(18),c={};t.clone=function(n,r){if("object"!==("undefined"===typeof n?"undefined":i(n))||null===n)return n;var a=(r=r||new Map).get(n);if(a)return a;var o=void 0,s=!1;if(Array.isArray(n))o=[],s=!0;else if(e.isBuffer(n))o=e.from(n);else if(n instanceof Date)o=new Date(n.getTime());else if(n instanceof RegExp)o=new RegExp(n);else{var u=Object.getPrototypeOf(n);u&&u.isImmutable?o=n:(o=Object.create(u),s=!0)}if(r.set(n,o),s)for(var l=Object.getOwnPropertyNames(n),c=0;c<l.length;++c){var f=l[c],d=Object.getOwnPropertyDescriptor(n,f);d&&(d.get||d.set)?Object.defineProperty(o,f,d):o[f]=t.clone(n[f],r)}return o},t.merge=function(n,r,a,o){if(t.assert(n&&"object"===("undefined"===typeof n?"undefined":i(n)),"Invalid target value: must be an object"),t.assert(null===r||void 0===r||"object"===("undefined"===typeof r?"undefined":i(r)),"Invalid source value: must be null, undefined, or an object"),!r)return n;if(Array.isArray(r)){t.assert(Array.isArray(n),"Cannot merge array onto an object"),!1===o&&(n.length=0);for(var s=0;s<r.length;++s)n.push(t.clone(r[s]));return n}for(var u=Object.keys(r),l=0;l<u.length;++l){var c=u[l];if("__proto__"!==c){var f=r[c];f&&"object"===("undefined"===typeof f?"undefined":i(f))?!n[c]||"object"!==i(n[c])||Array.isArray(n[c])!==Array.isArray(f)||f instanceof Date||e.isBuffer(f)||f instanceof RegExp?n[c]=t.clone(f):t.merge(n[c],f,a,o):null!==f&&void 0!==f?n[c]=f:!1!==a&&(n[c]=f)}}return n},t.applyToDefaults=function(e,n,r){if(t.assert(e&&"object"===("undefined"===typeof e?"undefined":i(e)),"Invalid defaults value: must be an object"),t.assert(!n||!0===n||"object"===("undefined"===typeof n?"undefined":i(n)),"Invalid options value: must be true, falsy or an object"),!n)return null;var a=t.clone(e);return!0===n?a:t.merge(a,n,!0===r,!1)},t.cloneWithShallow=function(e,n){if(!e||"object"!==("undefined"===typeof e?"undefined":i(e)))return e;var r=c.store(e,n),a=t.clone(e);return c.restore(a,e,r),a},c.store=function(e,n){for(var r={},i=0;i<n.length;++i){var a=n[i],o=t.reach(e,a);void 0!==o&&(r[a]=o,c.reachSet(e,a,void 0))}return r},c.restore=function(e,t,n){for(var r=Object.keys(n),i=0;i<r.length;++i){var a=r[i];c.reachSet(e,a,n[a]),c.reachSet(t,a,n[a])}},c.reachSet=function(e,t,n){for(var r=t.split("."),i=e,a=0;a<r.length;++a){var o=r[a];a+1===r.length&&(i[o]=n),i=i[o]}},t.applyToDefaultsWithShallow=function(e,n,r){if(t.assert(e&&"object"===("undefined"===typeof e?"undefined":i(e)),"Invalid defaults value: must be an object"),t.assert(!n||!0===n||"object"===("undefined"===typeof n?"undefined":i(n)),"Invalid options value: must be true, falsy or an object"),t.assert(r&&Array.isArray(r),"Invalid keys"),!n)return null;var a=t.cloneWithShallow(e,r);if(!0===n)return a;var o=c.store(n,r);return t.merge(a,n,!1,!1),c.restore(a,n,o),a},t.deepEqual=function(n,r,a,o){a=a||{prototype:!0};var s="undefined"===typeof n?"undefined":i(n);if(s!==("undefined"===typeof r?"undefined":i(r)))return!1;if("object"!==s||null===n||null===r)return n===r?0!==n||1/n===1/r:n!==n&&r!==r;if(-1!==(o=o||[]).indexOf(n))return!0;if(o.push(n),Array.isArray(n)){if(!Array.isArray(r))return!1;if(!a.part&&n.length!==r.length)return!1;for(var u=0;u<n.length;++u){if(a.part){for(var l=!1,c=0;c<r.length;++c)if(t.deepEqual(n[u],r[c],a)){l=!0;break}return l}if(!t.deepEqual(n[u],r[u],a))return!1}return!0}if(e.isBuffer(n)){if(!e.isBuffer(r))return!1;if(n.length!==r.length)return!1;for(var f=0;f<n.length;++f)if(n[f]!==r[f])return!1;return!0}if(n instanceof Date)return r instanceof Date&&n.getTime()===r.getTime();if(n instanceof RegExp)return r instanceof RegExp&&n.toString()===r.toString();if(a.prototype&&Object.getPrototypeOf(n)!==Object.getPrototypeOf(r))return!1;var d=Object.getOwnPropertyNames(n);if(!a.part&&d.length!==Object.getOwnPropertyNames(r).length)return!1;for(var h=0;h<d.length;++h){var p=d[h],g=Object.getOwnPropertyDescriptor(n,p);if(g.get){if(!t.deepEqual(g,Object.getOwnPropertyDescriptor(r,p),a,o))return!1}else if(!t.deepEqual(n[p],r[p],a,o))return!1}return!0},t.unique=function(e,t){var n=void 0;if(t){n=[];var r=new Set;e.forEach((function(e){var i=e[t];r.has(i)||(r.add(i),n.push(e))}))}else n=Array.from(new Set(e));return n},t.mapToObject=function(e,t){if(!e)return null;for(var n={},r=0;r<e.length;++r)t?e[r][t]&&(n[e[r][t]]=!0):n[e[r]]=!0;return n},t.intersect=function(e,n,r){if(!e||!n)return[];for(var i=[],a=Array.isArray(e)?t.mapToObject(e):e,o={},s=0;s<n.length;++s)if(a[n[s]]&&!o[n[s]]){if(r)return n[s];i.push(n[s]),o[n[s]]=!0}return r?null:i},t.contain=function(e,n,r){var a=null;"object"!==("undefined"===typeof e?"undefined":i(e))||"object"!==("undefined"===typeof n?"undefined":i(n))||Array.isArray(e)||Array.isArray(n)?n=[].concat(n):(a=n,n=Object.keys(n)),r=r||{},t.assert("string"===typeof e||"object"===("undefined"===typeof e?"undefined":i(e)),"Reference must be string or an object"),t.assert(n.length,"Values array cannot be empty");var o=void 0,s=void 0;if(r.deep){o=t.deepEqual;var u=r.hasOwnProperty("only"),l=r.hasOwnProperty("part");s={prototype:u?r.only:!!l&&!r.part,part:u?!r.only:!l||r.part}}else o=function compare(e,t){return e===t};for(var c=!1,f=new Array(n.length),d=0;d<f.length;++d)f[d]=0;if("string"===typeof e){for(var h="(",p=0;p<n.length;++p){var g=n[p];t.assert("string"===typeof g,"Cannot compare string reference to non-string value"),h+=(p?"|":"")+t.escapeRegex(g)}var m=new RegExp(h+")","g");c=!!e.replace(m,(function(e,t){var r=n.indexOf(t);return++f[r],""}))}else if(Array.isArray(e))for(var v=0;v<e.length;++v){for(var y=!1,_=0;_<n.length&&!1===y;++_)y=o(n[_],e[v],s)&&_;!1!==y?++f[y]:c=!0}else for(var b=Object.getOwnPropertyNames(e),x=0;x<b.length;++x){var w=b[x],k=n.indexOf(w);if(-1!==k){if(a&&!o(a[w],e[w],s))return!1;++f[k]}else c=!0}for(var S=!1,E=0;E<f.length;++E)if(S=S||!!f[E],r.once&&f[E]>1||!r.part&&!f[E])return!1;return(!r.only||!c)&&S},t.flatten=function(e,n){for(var r=n||[],i=0;i<e.length;++i)Array.isArray(e[i])?t.flatten(e[i],r):r.push(e[i]);return r},t.reach=function(e,n,r){if(!1===n||null===n||"undefined"===typeof n)return e;"string"===typeof(r=r||{})&&(r={separator:r});for(var a=n.split(r.separator||"."),o=e,s=0;s<a.length;++s){var u=a[s];if("-"===u[0]&&Array.isArray(o)&&(u=u.slice(1,u.length),u=o.length-u),!o||"object"!==("undefined"===typeof o?"undefined":i(o))&&"function"!==typeof o||!(u in o)||"object"!==("undefined"===typeof o?"undefined":i(o))&&!1===r.functions){t.assert(!r.strict||s+1===a.length,"Missing segment",u,"in reach path ",n),t.assert("object"===("undefined"===typeof o?"undefined":i(o))||!0===r.functions||"function"!==typeof o,"Invalid segment",u,"in reach path ",n),o=r.default;break}o=o[u]}return o},t.reachTemplate=function(e,n,r){return n.replace(/{([^}]+)}/g,(function(n,i){var a=t.reach(e,i,r);return void 0===a||null===a?"":a}))},t.formatStack=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push([r.getFileName(),r.getLineNumber(),r.getColumnNumber(),r.getFunctionName(),r.isConstructor()])}return t},t.formatTrace=function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push((r[4]?"new ":"")+r[3]+" ("+r[0]+":"+r[1]+":"+r[2]+")")}return t},t.callStack=function(e){var n=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var r={};Error.captureStackTrace(r,this);var i=r.stack;return Error.prepareStackTrace=n,t.formatStack(i).slice(1+e)},t.displayStack=function(e){var n=t.callStack(void 0===e?1:e+1);return t.formatTrace(n)},t.abortThrow=!1,t.abort=function(e,n){if("test"===r.env.NODE_ENV||!0===t.abortThrow)throw new Error(e||"Unknown error");var i="";n||(i=t.displayStack(1).join("\n\t")),console.log("ABORT: "+e+"\n\t"+i),r.exit(1)},t.assert=function(e){if(!e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(1===r.length&&r[0]instanceof Error)throw r[0];var o=r.filter((function(e){return""!==e})).map((function(e){return"string"===typeof e?e:e instanceof Error?e.message:t.stringify(e)}));throw new a.AssertionError({message:o.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})}},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.base64urlEncode=function(n,r){return t.assert("string"===typeof n||e.isBuffer(n),"value must be string or buffer"),(e.isBuffer(n)?n:e.from(n,r||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},t.base64urlDecode=function(t,n){if("string"!==typeof t)throw new Error("Value not a string");if(!/^[\w\-]*$/.test(t))throw new Error("Invalid character");var r=e.from(t,"base64");return"buffer"===n?r:r.toString(n||"binary")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return l.escapeHtml(e)},t.escapeJavaScript=function(e){return l.escapeJavaScript(e)},t.escapeJson=function(e){return l.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;var t=!1,n=function wrapped(){if(!t){t=!0;for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(null,r)}};return n._hoekOnce=!0,n},t.isInteger=Number.isSafeInteger,t.ignore=function(){},t.inherits=u.inherits,t.format=u.format,t.transform=function(e,n,r){t.assert(null===e||void 0===e||"object"===("undefined"===typeof e?"undefined":i(e))||Array.isArray(e),"Invalid source object: must be null, undefined, an object, or an array");var a="object"===("undefined"===typeof r?"undefined":i(r))&&null!==r&&r.separator||".";if(Array.isArray(e)){for(var o=[],s=0;s<e.length;++s)o.push(t.transform(e[s],n,r));return o}for(var u={},l=Object.keys(n),c=0;c<l.length;++c){var f=l[c],d=f.split(a),h=n[f];t.assert("string"===typeof h,'All mappings must be "." delineated strings');for(var p=void 0,g=u;d.length>1;)g[p=d.shift()]||(g[p]={}),g=g[p];g[p=d.shift()]=t.reach(e,h,r)}return u},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=s.resolve(e);var n=[Date.now(),r.pid,o.randomBytes(8).toString("hex")].join("-")+t;return s.join(e,n)},t.stringify=function(){try{for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify.apply(null,t)}catch(r){return"[Cannot display object: "+r.message+"]"}},t.shallow=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];t[i]=e[i]}return t},t.wait=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.block=function(){return new Promise(t.ignore)}}).call(t,n(3).Buffer,n(7))},function(e,t,n){"use strict";var r=n(0);t.create=function(e,t){r.assert("string"===typeof e,"Invalid reference key:",e);var n=r.clone(t),i=function ref(e,t){return r.reach(ref.isContext?t.context:e,ref.key,n)};return i.isContext=e[0]===(n&&n.contextPrefix||"$"),i.key=i.isContext?e.slice(1):e,i.path=i.key.split(n&&n.separator||"."),i.depth=i.path.length,i.root=i.path[0],i.isJoi=!0,i.toString=function(){return(i.isContext?"context:":"ref:")+i.key},i},t.isRef=function(e){return"function"===typeof e&&e.isJoi},t.push=function(e,n){t.isRef(n)&&!n.isContext&&e.push(n.root)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var a=n(0),o=n(11),s=n(1),u=n(6),l=null,c=null,f={Set:n(9),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};e.exports=f.Any=function(){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class),c=c||n(4),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new f.Set,this._invalids=new f.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}return _class.prototype._init=function _init(){return this},_class.prototype.createError=function createError(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._flags;return u.create(e,t,n,r,i)},_class.prototype.createOverrideError=function createOverrideError(e,t,n,r,i,a){return u.create(e,t,n,r,this._flags,i,a)},_class.prototype.checkOptions=function checkOptions(e){var t=n(21).options.validate(e);if(t.error)throw new Error(t.error.details[0].message)},_class.prototype.clone=function clone(){var e=Object.create(Object.getPrototypeOf(this));e.isJoi=!0,e._currentJoi=this._currentJoi,e._type=this._type,e._settings=this._settings,e._baseType=this._baseType,e._valids=this._valids.slice(),e._invalids=this._invalids.slice(),e._tests=this._tests.slice(),e._refs=this._refs.slice(),e._flags=a.clone(this._flags),e._description=this._description,e._unit=this._unit,e._notes=this._notes.slice(),e._tags=this._tags.slice(),e._examples=this._examples.slice(),e._meta=this._meta.slice(),e._inner={};for(var t=Object.keys(this._inner),n=0;n<t.length;++n){var r=t[n];e._inner[r]=this._inner[r]?this._inner[r].slice():null}return e},_class.prototype.concat=function concat(e){a.assert(e instanceof f.Any,"Invalid schema object"),a.assert("any"===this._type||"any"===e._type||e._type===this._type,"Cannot merge type",this._type,"with another type:",e._type);var t=this.clone();if("any"===this._type&&"any"!==e._type){for(var n=e.clone(),r=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"],i=0;i<r.length;++i)n[r[i]]=t[r[i]];t=n}t._settings=t._settings?o.concat(t._settings,e._settings):e._settings,t._valids.merge(e._valids,e._invalids),t._invalids.merge(e._invalids,e._valids),t._tests=t._tests.concat(e._tests),t._refs=t._refs.concat(e._refs),a.merge(t._flags,e._flags),t._description=e._description||t._description,t._unit=e._unit||t._unit,t._notes=t._notes.concat(e._notes),t._tags=t._tags.concat(e._tags),t._examples=t._examples.concat(e._examples),t._meta=t._meta.concat(e._meta);for(var s=Object.keys(e._inner),u="object"===t._type,l=0;l<s.length;++l){var c=s[l],d=e._inner[c];if(d){var h=t._inner[c];if(h)if(u&&"children"===c){for(var p={},g=0;g<h.length;++g)p[h[g].key]=g;for(var m=0;m<d.length;++m){var v=d[m].key;p[v]>=0?h[p[v]]={key:v,schema:h[p[v]].schema.concat(d[m].schema)}:h.push(d[m])}}else t._inner[c]=t._inner[c].concat(d);else t._inner[c]=d.slice()}}return t},_class.prototype._test=function _test(e,t,n,r){var i=this.clone();return i._tests.push({func:n,name:e,arg:t,options:r}),i},_class.prototype.options=function options(e){a.assert(!e.context,"Cannot override context"),this.checkOptions(e);var t=this.clone();return t._settings=o.concat(t._settings,e),t},_class.prototype.strict=function strict(e){var t=this.clone(),n=void 0!==e&&!e;return t._settings=o.concat(t._settings,{convert:n}),t},_class.prototype.raw=function raw(e){var t=void 0===e||e;if(this._flags.raw===t)return this;var n=this.clone();return n._flags.raw=t,n},_class.prototype.error=function error(e){a.assert(e&&(e instanceof Error||"function"===typeof e),"Must provide a valid Error object or a function");var t=this.clone();return t._flags.error=e,t},_class.prototype.allow=function allow(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=a.flatten(t);for(var i=0;i<t.length;++i){var o=t[i];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),r._invalids.remove(o),r._valids.add(o,r._refs)}return r},_class.prototype.valid=function valid(){var e=this.allow.apply(this,arguments);return e._flags.allowOnly=!0,e},_class.prototype.invalid=function invalid(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=a.flatten(t);for(var i=0;i<t.length;++i){var o=t[i];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),r._valids.remove(o),r._invalids.add(o,r._refs)}return r},_class.prototype.required=function required(){if("required"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="required",e},_class.prototype.optional=function optional(){if("optional"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="optional",e},_class.prototype.forbidden=function forbidden(){if("forbidden"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="forbidden",e},_class.prototype.strip=function strip(){if(this._flags.strip)return this;var e=this.clone();return e._flags.strip=!0,e},_class.prototype.applyFunctionToChildren=function applyFunctionToChildren(e,t,n,r){if(1!==(e=[].concat(e)).length||""!==e[0]){r=r?r+".":"";var i=(""===e[0]?e.slice(1):e).map((function(e){return r+e}));throw new Error("unknown key(s) "+i.join(", "))}return this[t].apply(this,n)},_class.prototype.default=function _default(e,t){"function"!==typeof e||s.isRef(e)||(!e.description&&t&&(e.description=t),this._flags.func||a.assert("string"===typeof e.description&&e.description.length>0,"description must be provided when default value is a function"));var n=this.clone();return n._flags.default=e,s.push(n._refs,e),n},_class.prototype.empty=function empty(e){var t=this.clone();return void 0===e?delete t._flags.empty:t._flags.empty=c.schema(this._currentJoi,e),t},_class.prototype.when=function when(e,t){a.assert(t&&"object"===("undefined"===typeof t?"undefined":r(t)),"Invalid options"),a.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var i=t.hasOwnProperty("then")?this.concat(c.schema(this._currentJoi,t.then)):void 0,o=t.hasOwnProperty("otherwise")?this.concat(c.schema(this._currentJoi,t.otherwise)):void 0;l=l||n(10);var s={then:i,otherwise:o};Object.prototype.hasOwnProperty.call(t,"is")&&(s.is=t.is);var u=l.when(e,s);return u._flags.presence="ignore",u._baseType=this,u},_class.prototype.description=function description(e){a.assert(e&&"string"===typeof e,"Description must be a non-empty string");var t=this.clone();return t._description=e,t},_class.prototype.notes=function notes(e){a.assert(e&&("string"===typeof e||Array.isArray(e)),"Notes must be a non-empty string or array");var t=this.clone();return t._notes=t._notes.concat(e),t},_class.prototype.tags=function tags(e){a.assert(e&&("string"===typeof e||Array.isArray(e)),"Tags must be a non-empty string or array");var t=this.clone();return t._tags=t._tags.concat(e),t},_class.prototype.meta=function meta(e){a.assert(void 0!==e,"Meta cannot be undefined");var t=this.clone();return t._meta=t._meta.concat(e),t},_class.prototype.example=function example(){a.assert(1===arguments.length,"Missing example");var e=arguments.length<=0?void 0:arguments[0],t=this.clone();return t._examples.push(e),t},_class.prototype.unit=function unit(e){a.assert(e&&"string"===typeof e,"Unit name must be a non-empty string");var t=this.clone();return t._unit=e,t},_class.prototype._prepareEmptyValue=function _prepareEmptyValue(e){return"string"===typeof e&&this._flags.trim?e.trim():e},_class.prototype._validate=function _validate(e,t,n,r){var i=this,l=e;t=t||{key:"",path:[],parent:null,reference:r},this._settings&&(n=o.concat(n,this._settings));var c=[],d=function finish(){var r=void 0;if(void 0!==e)r=i._flags.raw?l:e;else if(n.noDefaults)r=e;else if(s.isRef(i._flags.default))r=i._flags.default(t.parent,n);else if("function"!==typeof i._flags.default||i._flags.func&&!i._flags.default.description)r=a.clone(i._flags.default);else{var o=void 0;null!==t.parent&&i._flags.default.length>0&&(o=[a.clone(t.parent),n]);var u=f._try(i._flags.default,o);r=u.value,u.error&&c.push(i.createError("any.default",{error:u.error},t,n))}if(c.length&&"function"===typeof i._flags.error){var d=i._flags.error.call(i,c);c="string"===typeof d?[i.createOverrideError("override",{reason:c},t,n,d)]:[].concat(d).map((function(e){return e instanceof Error?e:i.createOverrideError(e.type||"override",e.context,t,n,e.message,e.template)}))}return{value:i._flags.strip?void 0:r,finalValue:r,errors:c.length?c:null}};if(this._coerce){var h=this._coerce.call(this,e,t,n);if(h.errors)return e=h.value,c=c.concat(h.errors),d();e=h.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(e),null,f.defaults).errors&&(e=void 0);var p=this._flags.presence||n.presence;if("optional"===p){if(void 0===e){if(!(this._flags.hasOwnProperty("default")&&void 0===this._flags.default)||"object"!==this._type)return d();e={}}}else{if("required"===p&&void 0===e)return c.push(this.createError("any.required",null,t,n)),d();if("forbidden"===p)return void 0===e?d():(c.push(this.createError("any.unknown",null,t,n)),d())}if(this._valids.has(e,t,n,this._flags.insensitive))return d();if(this._invalids.has(e,t,n,this._flags.insensitive)&&(c.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,n)),n.abortEarly||void 0===e))return d();if(this._base){var g=this._base.call(this,e,t,n);if(g.errors)return e=g.value,c=c.concat(g.errors),d();if(g.value!==e){if(e=g.value,this._valids.has(e,t,n,this._flags.insensitive))return d();if(this._invalids.has(e,t,n,this._flags.insensitive)&&(c.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,n)),n.abortEarly))return d()}}if(this._flags.allowOnly&&(c.push(this.createError("any.allowOnly",{value:e,valids:this._valids.values({stripUndefined:!0})},t,n)),n.abortEarly))return d();for(var m=0;m<this._tests.length;++m){var v=this._tests[m].func.call(this,e,t,n);if(v instanceof u.Err){if(c.push(v),n.abortEarly)return d()}else e=v}return d()},_class.prototype._validateWithOptions=function _validateWithOptions(e,t,n){t&&this.checkOptions(t);var r=o.concat(f.defaults,t),i=this._validate(e,null,r),a=u.process(i.errors,e);return n?n(a,i.value):{error:a,value:i.value,then:function then(e,t){return a?Promise.reject(a).catch(t):Promise.resolve(i.value).then(e)},catch:function _catch(e){return a?Promise.reject(a).catch(e):Promise.resolve(i.value)}}},_class.prototype.validate=function validate(e,t,n){return"function"===typeof t?this._validateWithOptions(e,null,t):this._validateWithOptions(e,t,n)},_class.prototype.describe=function describe(){var e=this,t={type:this._type},n=Object.keys(this._flags);if(n.length)if(["empty","default","lazy","label"].some((function(t){return e._flags.hasOwnProperty(t)}))){t.flags={};for(var r=0;r<n.length;++r){var i=n[r];"empty"===i?t.flags[i]=this._flags[i].describe():"default"===i?s.isRef(this._flags[i])?t.flags[i]=this._flags[i].toString():"function"===typeof this._flags[i]?t.flags[i]={description:this._flags[i].description,function:this._flags[i]}:t.flags[i]=this._flags[i]:"lazy"===i||"label"===i||(t.flags[i]=this._flags[i])}}else t.flags=this._flags;this._settings&&(t.options=a.clone(this._settings)),this._baseType&&(t.base=this._baseType.describe()),this._description&&(t.description=this._description),this._notes.length&&(t.notes=this._notes),this._tags.length&&(t.tags=this._tags),this._meta.length&&(t.meta=this._meta),this._examples.length&&(t.examples=this._examples),this._unit&&(t.unit=this._unit);var o=this._valids.values();o.length&&(t.valids=o.map((function(e){return s.isRef(e)?e.toString():e})));var u=this._invalids.values();u.length&&(t.invalids=u.map((function(e){return s.isRef(e)?e.toString():e}))),t.rules=[];for(var l=0;l<this._tests.length;++l){var c=this._tests[l],f={name:c.name};void 0!==c.arg&&(f.arg=s.isRef(c.arg)?c.arg.toString():c.arg);var d=c.options;if(d){if(d.hasRef){f.arg={};for(var h=Object.keys(c.arg),p=0;p<h.length;++p){var g=h[p],m=c.arg[g];f.arg[g]=s.isRef(m)?m.toString():m}}"string"===typeof d.description?f.description=d.description:"function"===typeof d.description&&(f.description=d.description(f.arg))}t.rules.push(f)}t.rules.length||delete t.rules;var v=this._getLabel();return v&&(t.label=v),t},_class.prototype.label=function label(e){a.assert(e&&"string"===typeof e,"Label name must be a non-empty string");var t=this.clone();return t._flags.label=e,t},_class.prototype._getLabel=function _getLabel(e){return this._flags.label||e},i(_class,[{key:"schemaType",get:function get(){return this._type}}]),_class}(),f.Any.prototype.isImmutable=!0,f.Any.prototype.only=f.Any.prototype.equal=f.Any.prototype.valid,f.Any.prototype.disallow=f.Any.prototype.not=f.Any.prototype.invalid,f.Any.prototype.exist=f.Any.prototype.required,f._try=function(e,t){var n=void 0,r=void 0;try{r=e.apply(null,t)}catch(i){n=i}return{value:r,error:n}}},function(e,t,n){"use strict";(function(e){var r=n(33),i=n(34),a=n(35);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,n){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer))return new Buffer(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function fromArrayBuffer(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t);return e}(e,t,n,r):"string"===typeof t?function fromString(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(t,n),i=(e=createBuffer(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function fromObject(e,t){if(Buffer.isBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||function isnan(e){return e!==e}(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&a(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function assertSize(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(r)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),r=!0}}function slowToString(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=Buffer.from(t,r)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"===typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function read(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(read(e,a)===read(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var c=!0,f=0;f<u;f++)if(read(e,a+f)!==read(t,f)){c=!1;break}if(c)return a}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(function utf16leToBytes(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,u,l,c=e[i],f=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(f=c);break;case 2:128===(192&(a=e[i+1]))&&(l=(31&c)<<6|63&a)>127&&(f=l);break;case 3:a=e[i+1],s=e[i+2],128===(192&a)&&128===(192&s)&&(l=(15&c)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(f=l);break;case 4:a=e[i+1],s=e[i+2],u=e[i+3],128===(192&a)&&128===(192&s)&&128===(192&u)&&(l=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&u)>65535&&l<1114112&&(f=l)}null===f?(f=65533,d=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=d}return function decodeCodePointsArray(e){var t=e.length;if(t<=o)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=o));return n}(r)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function foo(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,n){return from(null,e,t,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,n){return function alloc(e,t,n,r){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"===typeof r?createBuffer(e,t).fill(n,r):createBuffer(e,t).fill(n):createBuffer(e,t)}(null,e,t,n)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Buffer.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,n,r,i){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){a=u[c],o=l[c];break}return a<o?-1:o<a?1:0},Buffer.prototype.includes=function includes(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function indexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function write(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var o=4096;function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=toHex(e[a]);return i}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function checkOffset(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,a){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function objectWriteUInt32(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function checkIEEE754(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,a){return a||checkIEEE754(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,a){return a||checkIEEE754(e,0,n,8),i.write(e,t,n,r,52,8),n+8}Buffer.prototype.slice=function slice(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer.prototype;else{var i=t-e;n=new Buffer(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},Buffer.prototype.readUIntLE=function readUIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},Buffer.prototype.readUIntBE=function readUIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Buffer.prototype.readIntBE=function readIntBE(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},Buffer.prototype.writeUInt8=function writeUInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Buffer.prototype.writeIntBE=function writeIntBE(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},Buffer.prototype.writeInt8=function writeInt8(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function copy(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},Buffer.prototype.fill=function fill(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!Buffer.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var s=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function base64ToBytes(e){return r.toByteArray(function base64clean(e){if((e=function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(s,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function blitBuffer(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(t,n(5))},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),a=n(1);t.schema=function(e,t){return void 0!==t&&null!==t&&"object"===("undefined"===typeof t?"undefined":r(t))?t.isJoi?t:Array.isArray(t)?e.alternatives().try(t):t instanceof RegExp?e.string().regex(t):t instanceof Date?e.date().valid(t):e.object().keys(t):"string"===typeof t?e.string().valid(t):"number"===typeof t?e.number().valid(t):"boolean"===typeof t?e.boolean().valid(t):a.isRef(t)?e.valid(t):(i.assert(null===t,"Invalid schema content:",t),e.valid(null))},t.ref=function(e){return a.isRef(e)?e:a.create(e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(0),a=n(20),o={annotations:Symbol("joi-annotations"),stringify:function(e,n){var i="undefined"===typeof e?"undefined":r(e);if(null===e)return"null";if("string"===i)return e;if(e instanceof t.Err||"function"===i||"symbol"===i)return e.toString();if("object"===i){if(Array.isArray(e)){for(var a="",s=0;s<e.length;++s)a=a+(a.length?", ":"")+o.stringify(e[s],n);return n?"["+a+"]":a}return e.toString()}return JSON.stringify(e)}};t.Err=function(){function _class(e,t,n,r,i,o,s){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class),this.isJoi=!0,this.type=e,this.context=t||{},this.context.key=n.path[n.path.length-1],this.context.label=n.key,this.path=n.path,this.options=r,this.flags=i,this.message=o,this.template=s;var u=this.options.language;this.flags.label?this.context.label=this.flags.label:!u||""!==this.context.label&&null!==this.context.label||(this.context.label=u.root||a.errors.root)}return _class.prototype.toString=function toString(){var e=this;if(this.message)return this.message;var t=void 0;this.template&&(t=this.template);var n=this.options.language;if(void 0===(t=t||i.reach(n,this.type)||i.reach(a.errors,this.type)))return'Error code "'+this.type+'" is not defined, your custom type is missing the correct language definition';var r=i.reach(n,"messages.wrapArrays");if("boolean"!==typeof r&&(r=a.errors.messages.wrapArrays),null===t){var s=o.stringify(this.context.reason,r);return r?s.slice(1,-1):s}var u=/\{\{\!?label\}\}/.test(t),l=t.length>2&&"!"===t[0]&&"!"===t[1];if(l&&(t=t.slice(2)),!u&&!l){var c=i.reach(n,"key");t="string"===typeof c?c+t:i.reach(a.errors,"key")+t}return t.replace(/\{\{(\!?)([^}]+)\}\}/g,(function(t,n,a){var s=i.reach(e.context,a),u=o.stringify(s,r);return n&&e.options.escapeHtml?i.escapeHtml(u):u}))},_class}(),t.create=function(e,n,r,i,a,o,s){return new t.Err(e,n,r,i,a,o,s)},t.process=function(e,t){if(!e||!e.length)return null;var n="",r=[],i=function processErrors(e,t){for(var i=0;i<e.length;++i){var a=e[i];if(a instanceof Error)return a;if(a.flags.error&&"function"!==typeof a.flags.error)return a.flags.error;var o=void 0;if(void 0===t&&(o=a.toString(),n=n+(n?". ":"")+o),a.context.reason&&a.context.reason.length){var s=processErrors(a.context.reason,a.path);if(s)return s}else r.push({message:o||a.toString(),path:a.path,type:a.type,context:a.context})}}(e);if(i)return i;var a=new Error(n);return a.isJoi=!0,a.name="ValidationError",a.details=r,a._object=t,a.annotate=o.annotate,a},o.safeStringify=function(e,t){return JSON.stringify(e,o.serializer(),t)},o.serializer=function(){var e=[],t=[],n=function cycleReplacer(n,r){return t[0]===r?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(r)).join(".")+"]"};return function(i,a){if(t.length>0){var s=t.indexOf(this);~s?(t.length=s+1,e.length=s+1,e[s]=i):(t.push(this),e.push(i)),~t.indexOf(a)&&(a=n.call(this,i,a))}else t.push(a);if(a){var u=a[o.annotations];if(u){if(Array.isArray(a)){for(var l=[],c=0;c<a.length;++c)u.errors[c]&&l.push("_$idx$_"+u.errors[c].sort().join(", ")+"_$end$_"),l.push(a[c]);a=l}else{for(var f=Object.keys(u.errors),d=0;d<f.length;++d){var h=f[d];a[h+"_$key$_"+u.errors[h].sort().join(", ")+"_$end$_"]=a[h],a[h]=void 0}for(var p=Object.keys(u.missing),g=0;g<p.length;++g){var m=p[g];a["_$miss$_"+m+"|"+u.missing[m]+"_$end$_"]="__missing__"}}return a}}return a===1/0||a===-1/0||Number.isNaN(a)||"function"===typeof a||"symbol"===("undefined"===typeof a?"undefined":r(a))?"["+a.toString()+"]":a}},o.annotate=function(e){var t=e?"":"\x1b[31m",n=e?"":"\x1b[41m",a=e?"":"\x1b[0m";if("object"!==r(this._object))return this.details[0].message;for(var s=i.clone(this._object||{}),u=this.details.length-1;u>=0;--u)for(var l=u+1,c=this.details[u],f=c.path,d=s,h=0;;++h){var p=f[h];if(d.isImmutable&&(d=d.clone()),!(h+1<f.length&&d[p]&&"string"!==typeof d[p])){var g=d[o.annotations]=d[o.annotations]||{errors:{},missing:{}},m=d[p],v=p||c.context.label;void 0!==m?(g.errors[v]=g.errors[v]||[],g.errors[v].push(l)):g.missing[v]=l;break}d=d[p]}var y=/_\$key\$_([, \d]+)_\$end\$_\"/g,_=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,b=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,x=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g,w=o.safeStringify(s,2).replace(y,(function(e,n){return'" '+t+"["+n+"]"+a})).replace(_,(function(e,r,i){return n+'"'+r+'"'+a+t+" ["+i+"]: -- missing --"+a})).replace(b,(function(e,n,r){return"\n"+r+" "+t+"["+n+"]"+a})).replace(x,(function(e,t){return t}));w=w+"\n"+t;for(var k=0;k<this.details.length;++k){w=w+"\n["+(k+1)+"] "+this.details[k].message}return w+=a}},function(e,t){var n,r,i=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(n===setTimeout)return setTimeout(e,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:defaultSetTimout}catch(e){n=defaultSetTimout}try{r="function"===typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var a,o=[],s=!1,u=-1;function cleanUpNextTick(){s&&a&&(s=!1,a.length?o=a.concat(o):u=-1,o.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=o.length;t;){for(a=o,o=[];++u<t;)a&&a[u].run();u=-1,t=o.length}a=null,s=!1,function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.push(new Item(e,t)),1!==o.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=noop,i.addListener=noop,i.once=noop,i.off=noop,i.removeListener=noop,i.removeAllListeners=noop,i.emit=noop,i.prependListener=noop,i.prependOnceListener=noop,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var i=n(0),a=n(2),o=n(4),s=n(6),u=n(26),l=n(1),c=n(11),f={alternatives:n(10),array:n(22),boolean:n(24),binary:n(23),date:n(12),func:n(25),number:n(27),object:n(13),string:n(28)};f.callWithDefaults=function(e,t){var n;return i.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(e=this._defaults(e)),e._currentJoi=this,(n=e)._init.apply(n,function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))},f.root=function(){var e=new a,t=e.clone();return a.prototype._currentJoi=t,t._currentJoi=t,t.any=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.assert(0===n.length,"Joi.any() does not allow arguments."),f.callWithDefaults.call(this,e,n)},t.alternatives=t.alt=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.callWithDefaults.call(this,f.alternatives,t)},t.array=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.array() does not allow arguments."),f.callWithDefaults.call(this,f.array,t)},t.boolean=t.bool=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.boolean() does not allow arguments."),f.callWithDefaults.call(this,f.boolean,t)},t.binary=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.binary() does not allow arguments."),f.callWithDefaults.call(this,f.binary,t)},t.date=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.date() does not allow arguments."),f.callWithDefaults.call(this,f.date,t)},t.func=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.func() does not allow arguments."),f.callWithDefaults.call(this,f.func,t)},t.number=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.number() does not allow arguments."),f.callWithDefaults.call(this,f.number,t)},t.object=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.callWithDefaults.call(this,f.object,t)},t.string=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.assert(0===t.length,"Joi.string() does not allow arguments."),f.callWithDefaults.call(this,f.string,t)},t.ref=function(){return l.create.apply(l,arguments)},t.isRef=function(e){return l.isRef(e)},t.validate=function(n){var r,i=(r=(arguments.length<=1?0:arguments.length-1)-1+1,arguments.length<=r?void 0:arguments[r]),a="function"===typeof i?i:null,o=(arguments.length<=1?0:arguments.length-1)-(a?1:0);if(0===o)return e.validate(n,a);var s=2===o?arguments.length<=2?void 0:arguments[2]:{},u=t.compile(arguments.length<=1?void 0:arguments[1]);return u._validateWithOptions(n,s,a)},t.describe=function(){var n=arguments.length?t.compile(arguments.length<=0?void 0:arguments[0]):e;return n.describe()},t.compile=function(e){try{return o.schema(this,e)}catch(t){throw t.hasOwnProperty("path")&&(t.message=t.message+"("+t.path+")"),t}},t.assert=function(e,n,r){t.attempt(e,n,r)},t.attempt=function(e,n,r){var i=t.validate(e,n),a=i.error;if(a){if(!r)throw"function"===typeof a.annotate&&(a.message=a.annotate()),a;if(!(r instanceof Error))throw"function"===typeof a.annotate&&(a.message=r+" "+a.annotate()),a;throw r}return i.value},t.reach=function(e,t){i.assert(e&&e instanceof a,"you must provide a joi schema"),i.assert(Array.isArray(t)||"string"===typeof t,"path must be a string or an array of strings");return function reach(e,t){if(!t.length)return e;var n=e._inner.children;if(n)for(var r=t.shift(),i=0;i<n.length;++i){var a=n[i];if(a.key===r)return reach(a.schema,t)}}(e,"string"===typeof t?t?t.split("."):[]:t.slice())},t.lazy=function(e){return u.set(e)},t.defaults=function(e){var t=this;i.assert("function"===typeof e,"Defaults must be a function");var n=Object.create(this.any());return n=e(n),i.assert(n&&n instanceof this.constructor,"defaults() must return a schema"),r(n,this,n.clone()),n._defaults=function(n){return t._defaults&&(n=t._defaults(n),i.assert(n instanceof t.constructor,"defaults() must return a schema")),n=e(n),i.assert(n instanceof t.constructor,"defaults() must return a schema"),n},n},t.extend=function(){for(var e=this,n=arguments.length,u=Array(n),d=0;d<n;d++)u[d]=arguments[d];var h=i.flatten(u);i.assert(h.length>0,"You need to provide at least one extension"),this.assert(h,t.extensionsSchema);var p=Object.create(this.any());r(p,this);for(var g=function _loop(n){var u=h[n];"function"===typeof u&&(u=u(p)),e.assert(u,t.extensionSchema);var d=(u.base||e.any()).clone(),g=d.constructor,m=function(e){function type(){_classCallCheck(this,type);var t=_possibleConstructorReturn(this,e.call(this));return u.base&&r(t,d),t._type=u.name,u.language&&(t._settings=c.concat(t._settings,{language:_defineProperty({},u.name,u.language)})),t}return _inherits(type,e),type}(g);if(u.coerce&&(m.prototype._coerce=function(e,t,n){if(g.prototype._coerce){var r=g.prototype._coerce.call(this,e,t,n);if(r.errors)return r;e=r.value}var i=u.coerce.call(this,e,t,n);return i instanceof s.Err?{value:e,errors:i}:{value:i}}),u.pre&&(m.prototype._base=function(e,t,n){if(g.prototype._base){var r=g.prototype._base.call(this,e,t,n);if(r.errors)return r;e=r.value}var i=u.pre.call(this,e,t,n);return i instanceof s.Err?{value:e,errors:i}:{value:i}}),u.rules)for(var v=function _loop2(t){var n=u.rules[t],r=n.params?n.params instanceof a?n.params._inner.children.map((function(e){return e.key})):Object.keys(n.params):[],s=n.params?o.schema(e,n.params):null;m.prototype[n.name]=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];if(t.length>r.length)throw new Error("Unexpected number of arguments");for(var u=!1,c={},f=0;f<r.length;++f)c[r[f]]=t[f],!u&&l.isRef(t[f])&&(u=!0);s&&(c=p.attempt(c,s));var d=void 0;if(n.validate){var h=function validate(e,t,r){return n.validate.call(this,c,e,t,r)};d=this._test(n.name,c,h,{description:n.description,hasRef:u})}else d=this.clone();if(n.setup){var g=n.setup.call(d,c);void 0!==g&&(i.assert(g instanceof a,"Setup of extension Joi."+this._type+"()."+n.name+"() must return undefined or a Joi object"),d=g)}return d}},y=0;y<u.rules.length;++y)v(y);u.describe&&(m.prototype.describe=function(){var e=g.prototype.describe.call(this);return u.describe.call(this,e)});var _=new m;p[u.name]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.callWithDefaults.call(this,_,t)}},m=0;m<h.length;++m)g(m);return p},t.extensionSchema=f.object.keys({base:f.object.type(a,"Joi object"),name:f.string.required(),coerce:f.func.arity(3),pre:f.func.arity(3),language:f.object,describe:f.func.arity(1),rules:f.array.items(f.object.keys({name:f.string.required(),setup:f.func.arity(1),validate:f.func.arity(4),params:[f.object.pattern(/.*/,f.object.type(a,"Joi object")),f.object.type(f.object.constructor,"Joi object")],description:[f.string,f.func.arity(1)]}).or("setup","validate"))}).strict(),t.extensionsSchema=f.array.items([f.object,f.func.arity(1)]).strict(),t.version=n(36).version,t},e.exports=f.root()},function(e,t,n){"use strict";(function(t){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(1),a={extendedCheckForValue:function(e,n){var i="undefined"===typeof e?"undefined":r(e);if("object"===i){if(e instanceof Date)return function(t){return t instanceof Date&&e.getTime()===t.getTime()};if(t.isBuffer(e))return function(n){return t.isBuffer(n)&&e.length===n.length&&e.toString("binary")===n.toString("binary")}}else if(n&&"string"===i){var a=e.toLowerCase();return function(e){return"string"===typeof e&&a===e.toLowerCase()}}return null}};e.exports=function(){function InternalSet(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,InternalSet),this._set=new Set(e),this._hasRef=!1}return InternalSet.prototype.add=function add(e,t){var n=i.isRef(e);return!n&&this.has(e,null,null,!1)?this:(void 0!==t&&i.push(t,e),this._set.add(e),this._hasRef|=n,this)},InternalSet.prototype.merge=function merge(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e._set[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this.add(s)}}catch(p){r=!0,i=p}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}var u=!0,l=!1,c=void 0;try{for(var f,d=t._set[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;this.remove(h)}}catch(p){l=!0,c=p}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}return this},InternalSet.prototype.remove=function remove(e){return this._set.delete(e),this},InternalSet.prototype.has=function has(e,t,n,r){if(!this._set.size)return!1;var o=this._set.has(e);if(o)return o;var s=a.extendedCheckForValue(e,r);if(!s){if(t&&this._hasRef){var u=!0,l=!1,c=void 0;try{for(var f,d=this._set[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;if(i.isRef(h)&&(e===(h=h(t.reference||t.parent,n))||Array.isArray(h)&&h.includes(e)))return!0}}catch(p){l=!0,c=p}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}}return!1}return this._has(e,t,n,s)},InternalSet.prototype._has=function _has(e,t,n,r){var a=!(!t||!this._hasRef),o=function isReallyEqual(t){return e===t||r(t)},s=!0,u=!1,l=void 0;try{for(var c,f=this._set[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;if(a&&i.isRef(d)&&(d=d(t.reference||t.parent,n),Array.isArray(d))){if(d.find(o))return!0}else if(o(d))return!0}}catch(h){u=!0,l=h}finally{try{!s&&f.return&&f.return()}finally{if(u)throw l}}return!1},InternalSet.prototype.values=function values(e){if(e&&e.stripUndefined){var values=[],t=!0,n=!1,r=void 0;try{for(var i,a=this._set[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;void 0!==o&&values.push(o)}}catch(s){n=!0,r=s}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return values}return Array.from(this._set)},InternalSet.prototype.slice=function slice(){var e=new InternalSet(this._set);return e._hasRef=this._hasRef,e},InternalSet.prototype.concat=function concat(e){var t=new InternalSet([].concat(_toConsumableArray(this._set),_toConsumableArray(e._set)));return t._hasRef=!!(this._hasRef|e._hasRef),t},InternalSet}()}).call(t,n(3).Buffer)},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var i=n(0),a=n(2),o=n(4),s=n(1),u={};u.Alternatives=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="alternatives",t._invalids.remove(null),t._inner.matches=[],t}return _inherits(_class,e),_class.prototype._init=function _init(){return arguments.length?this.try.apply(this,arguments):this},_class.prototype._base=function _base(e,t,n){for(var r=[],i=this._inner.matches.length,a=this._baseType,o=0;o<i;++o){var s=this._inner.matches[o];if(s.schema){var u=s.schema._validate(e,t,n);if(!u.errors)return u;r=r.concat(u.errors)}else{var l=s.peek||s.is,c=s.is?s.ref(t.reference||t.parent,n):e;if(l._validate(c,null,n,t.parent).errors){if(s.otherwise)return s.otherwise._validate(e,t,n)}else if(s.then)return s.then._validate(e,t,n);if(o===i-1&&a)return a._validate(e,t,n)}}return r.length?{errors:this.createError("alternatives.child",{reason:r},t,n)}:{errors:this.createError("alternatives.base",null,t,n)}},_class.prototype.try=function _try(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t=i.flatten(t),i.assert(t.length,"Cannot add other alternatives without at least one schema");for(var r=this.clone(),a=0;a<t.length;++a){var s=o.schema(this._currentJoi,t[a]);s._refs.length&&(r._refs=r._refs.concat(s._refs)),r._inner.matches.push({schema:s})}return r},_class.prototype.when=function when(e,t){var n=!1;i.assert(s.isRef(e)||"string"===typeof e||(n=e instanceof a),"Invalid condition:",e),i.assert(t,"Missing options"),i.assert("object"===("undefined"===typeof t?"undefined":r(t)),"Invalid options"),n?i.assert(!t.hasOwnProperty("is"),'"is" can not be used with a schema condition'):i.assert(t.hasOwnProperty("is"),'Missing "is" directive'),i.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var u=this.clone(),l=void 0;n||(l=o.schema(this._currentJoi,t.is),null!==t.is&&(s.isRef(t.is)||t.is instanceof a)||(l=l.required()));var c={ref:n?null:o.ref(e),peek:n?e:null,is:l,then:void 0!==t.then?o.schema(this._currentJoi,t.then):void 0,otherwise:void 0!==t.otherwise?o.schema(this._currentJoi,t.otherwise):void 0};return u._baseType&&(c.then=c.then&&u._baseType.concat(c.then),c.otherwise=c.otherwise&&u._baseType.concat(c.otherwise)),n||(s.push(u._refs,c.ref),u._refs=u._refs.concat(c.is._refs)),c.then&&c.then._refs&&(u._refs=u._refs.concat(c.then._refs)),c.otherwise&&c.otherwise._refs&&(u._refs=u._refs.concat(c.otherwise._refs)),u._inner.matches.push(c),u},_class.prototype.describe=function describe(){for(var e=a.prototype.describe.call(this),t=[],n=0;n<this._inner.matches.length;++n){var r=this._inner.matches[n];if(r.schema)t.push(r.schema.describe());else{var i=r.is?{ref:r.ref.toString(),is:r.is.describe()}:{peek:r.peek.describe()};r.then&&(i.then=r.then.describe()),r.otherwise&&(i.otherwise=r.otherwise.describe()),t.push(i)}}return e.alternatives=t,e},_class}(a),e.exports=new u.Alternatives},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0);t.concat=function(e,t){if(!t)return e;for(var n=r({},e),a=Object.keys(t),o=0;o<a.length;++o){var s=a[o];"language"===s&&n.hasOwnProperty(s)?n[s]=i.applyToDefaults(n[s],t[s]):n[s]=t[s]}return n}},function(e,t,n){"use strict";function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var r=n(2),i=n(1),a=n(0),o={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};o.invalidDate=new Date(""),o.isIsoDate=function(){var e=o.isoDate.toString();return function(t){return t&&t.toString()===e}}(),o.Date=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="date",t}return _inherits(_class,e),_class.prototype._base=function _base(e,t,n){var r={value:n.convert&&o.Date.toDate(e,this._flags.format,this._flags.timestamp,this._flags.multiplier)||e};if(r.value instanceof Date&&!isNaN(r.value.getTime()))r.errors=null;else if(n.convert){var i=void 0;i=o.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?"timestamp."+this._flags.timestamp:"base",r.errors=this.createError("date."+i,null,t,n)}else r.errors=this.createError("date.strict",null,t,n);return r},_class.toDate=function toDate(e,t,n,r){if(e instanceof Date)return e;if("string"===typeof e||"number"===typeof e&&!isNaN(e)&&isFinite(e)){"string"===typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e));var i=void 0;if(i=t&&o.isIsoDate(t)?t.test(e)?new Date(e):o.invalidDate:n&&r?/^\s*$/.test(e)?o.invalidDate:new Date(e*r):new Date(e),!isNaN(i.getTime()))return i}return null},_class.prototype.iso=function iso(){if(this._flags.format===o.isoDate)return this;var e=this.clone();return e._flags.format=o.isoDate,e},_class.prototype.timestamp=function timestamp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=["javascript","unix"];if(a.assert(t.includes(e),'"type" must be one of "'+t.join('", "')+'"'),this._flags.timestamp===e)return this;var n=this.clone();return n._flags.timestamp=e,n._flags.multiplier="unix"===e?1e3:1,n},_class.prototype._isIsoDate=function _isIsoDate(e){return o.isoDate.test(e)},_class}(r),o.compare=function(e,t){return function(n){var r="now"===n,s=i.isRef(n);return r||s||(n=o.Date.toDate(n)),a.assert(n,"Invalid date format"),this._test(e,n,(function(i,a,u){var l=void 0;if(r)l=Date.now();else if(s){if(!(l=o.Date.toDate(n(a.reference||a.parent,u))))return this.createError("date.ref",{ref:n.key},a,u);l=l.getTime()}else l=n.getTime();return t(i.getTime(),l)?i:this.createError("date."+e,{limit:new Date(l)},a,u)}))}},o.Date.prototype.min=o.compare("min",(function(e,t){return e>=t})),o.Date.prototype.max=o.compare("max",(function(e,t){return e<=t})),o.Date.prototype.greater=o.compare("greater",(function(e,t){return e>t})),o.Date.prototype.less=o.compare("less",(function(e,t){return e<t})),e.exports=new o.Date},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var i=n(0),a=n(31),o=n(2),s=n(6),u=n(4),l={};l.Object=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="object",t._inner.children=null,t._inner.renames=[],t._inner.dependencies=[],t._inner.patterns=[],t}return _inherits(_class,e),_class.prototype._init=function _init(){return arguments.length?this.keys.apply(this,arguments):this},_class.prototype._base=function _base(e,t,n){var a=e,o=[],u=function finish(){return{value:a,errors:o.length?o:null}};"string"===typeof e&&n.convert&&(e=l.safeParse(e));var c=this._flags.func?"function":"object";if(!e||("undefined"===typeof e?"undefined":r(e))!==c||Array.isArray(e))return o.push(this.createError(c+".base",null,t,n)),u();if(!this._inner.renames.length&&!this._inner.dependencies.length&&!this._inner.children&&!this._inner.patterns.length)return a=e,u();if(a===e){"object"===c?a=Object.create(Object.getPrototypeOf(e)):(a=function target(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}).prototype=i.clone(e.prototype);for(var f=Object.keys(e),d=0;d<f.length;++d)a[f[d]]=e[f[d]]}else a=e;for(var h={},p=0;p<this._inner.renames.length;++p){var g=this._inner.renames[p];if(g.isRegExp){for(var m=Object.keys(a),v=[],y=0;y<m.length;++y)g.from.test(m[y])&&v.push(m[y]);var _=v.every((function(e){return void 0===a[e]}));if(g.options.ignoreUndefined&&_)continue;if(!g.options.multiple&&h[g.to]&&(o.push(this.createError("object.rename.regex.multiple",{from:v,to:g.to},t,n)),n.abortEarly))return u();if(Object.prototype.hasOwnProperty.call(a,g.to)&&!g.options.override&&!h[g.to]&&(o.push(this.createError("object.rename.regex.override",{from:v,to:g.to},t,n)),n.abortEarly))return u();if(_?delete a[g.to]:a[g.to]=a[v[v.length-1]],h[g.to]=!0,!g.options.alias)for(var b=0;b<v.length;++b)delete a[v[b]]}else{if(g.options.ignoreUndefined&&void 0===a[g.from])continue;if(!g.options.multiple&&h[g.to]&&(o.push(this.createError("object.rename.multiple",{from:g.from,to:g.to},t,n)),n.abortEarly))return u();if(Object.prototype.hasOwnProperty.call(a,g.to)&&!g.options.override&&!h[g.to]&&(o.push(this.createError("object.rename.override",{from:g.from,to:g.to},t,n)),n.abortEarly))return u();void 0===a[g.from]?delete a[g.to]:a[g.to]=a[g.from],h[g.to]=!0,g.options.alias||delete a[g.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return u();var x=new Set(Object.keys(a));if(this._inner.children){for(var w=[],k=0;k<this._inner.children.length;++k){var S=this._inner.children[k],E=S.key,T=a[E];x.delete(E);var C={key:E,path:t.path.concat(E),parent:a,reference:t.reference},O=S.schema._validate(T,C,n);if(O.errors){if(o.push(this.createError("object.child",{key:E,child:S.schema._getLabel(E),reason:O.errors},C,n)),n.abortEarly)return u()}else S.schema._flags.strip||void 0===O.value&&O.value!==T?(w.push(E),a[E]=O.finalValue):void 0!==O.value&&(a[E]=O.value)}for(var A=0;A<w.length;++A)delete a[w[A]]}if(x.size&&this._inner.patterns.length){var R=!0,D=!1,P=void 0;try{for(var M,j=x[Symbol.iterator]();!(R=(M=j.next()).done);R=!0)for(var F=M.value,I={key:F,path:t.path.concat(F),parent:a,reference:t.reference},L=a[F],N=0;N<this._inner.patterns.length;++N){var B=this._inner.patterns[N];if(B.regex?B.regex.test(F):!B.schema.validate(F).error){x.delete(F);var U=B.rule._validate(L,I,n);if(U.errors&&(o.push(this.createError("object.child",{key:F,child:B.rule._getLabel(F),reason:U.errors},I,n)),n.abortEarly))return u();a[F]=U.value}}}catch(ne){D=!0,P=ne}finally{try{!R&&j.return&&j.return()}finally{if(D)throw P}}}if(x.size&&(this._inner.children||this._inner.patterns.length)){if(n.stripUnknown&&!0!==this._flags.allowUnknown||n.skipFunctions){var z=!!n.stripUnknown&&(!0===n.stripUnknown||!!n.stripUnknown.objects),q=!0,W=!1,G=void 0;try{for(var H,V=x[Symbol.iterator]();!(q=(H=V.next()).done);q=!0){var Y=H.value;z?(delete a[Y],x.delete(Y)):"function"===typeof a[Y]&&x.delete(Y)}}catch(ne){W=!0,G=ne}finally{try{!q&&V.return&&V.return()}finally{if(W)throw G}}}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!n.allowUnknown){var $=!0,X=!1,K=void 0;try{for(var J,Z=x[Symbol.iterator]();!($=(J=Z.next()).done);$=!0){var Q=J.value;o.push(this.createError("object.allowUnknown",{child:Q},{key:Q,path:t.path.concat(Q)},n,{}))}}catch(ne){X=!0,K=ne}finally{try{!$&&Z.return&&Z.return()}finally{if(X)throw K}}}}for(var ee=0;ee<this._inner.dependencies.length;++ee){var te=this._inner.dependencies[ee],ne=l[te.type].call(this,null!==te.key&&a[te.key],te.peers,a,{key:te.key,path:null===te.key?t.path:t.path.concat(te.key)},n);if(ne instanceof s.Err&&(o.push(ne),n.abortEarly))return u()}return u()},_class.prototype.keys=function keys(e){i.assert(null===e||void 0===e||"object"===("undefined"===typeof e?"undefined":r(e)),"Object schema must be a valid object"),i.assert(!e||!(e instanceof o),"Object schema cannot be a joi schema");var t=this.clone();if(!e)return t._inner.children=null,t;var n=Object.keys(e);if(!n.length)return t._inner.children=[],t;var s=new a;if(t._inner.children)for(var l=0;l<t._inner.children.length;++l){var c=t._inner.children[l];n.includes(c.key)||s.add(c,{after:c._refs,group:c.key})}for(var f=0;f<n.length;++f){var d=n[f],h=e[d];try{var p=u.schema(this._currentJoi,h);s.add({key:d,schema:p},{after:p._refs,group:d})}catch(g){throw g.hasOwnProperty("path")?g.path=d+"."+g.path:g.path=d,g}}return t._inner.children=s.nodes,t},_class.prototype.append=function append(e){return null===e||void 0===e||0===Object.keys(e).length?this:this.keys(e)},_class.prototype.unknown=function unknown(e){var t=!1!==e;if(this._flags.allowUnknown===t)return this;var n=this.clone();return n._flags.allowUnknown=t,n},_class.prototype.length=function length(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,(function(t,n,r){return Object.keys(t).length===e?t:this.createError("object.length",{limit:e},n,r)}))},_class.prototype.min=function min(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,(function(t,n,r){return Object.keys(t).length>=e?t:this.createError("object.min",{limit:e},n,r)}))},_class.prototype.max=function max(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,(function(t,n,r){return Object.keys(t).length<=e?t:this.createError("object.max",{limit:e},n,r)}))},_class.prototype.pattern=function pattern(e,t){var n=e instanceof RegExp;i.assert(n||e instanceof o,"pattern must be a regex or schema"),i.assert(void 0!==t,"Invalid rule"),n&&(e=new RegExp(e.source,e.ignoreCase?"i":void 0));try{t=u.schema(this._currentJoi,t)}catch(a){throw a.hasOwnProperty("path")&&(a.message=a.message+"("+a.path+")"),a}var r=this.clone();return n?r._inner.patterns.push({regex:e,rule:t}):r._inner.patterns.push({schema:e,rule:t}),r},_class.prototype.schema=function schema(){return this._test("schema",null,(function(e,t,n){return e instanceof o?e:this.createError("object.schema",null,t,n)}))},_class.prototype.with=function _with(e,t){return i.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",e,t)},_class.prototype.without=function without(e,t){return i.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",e,t)},_class.prototype.xor=function xor(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this._dependency("xor",null,t)},_class.prototype.or=function or(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this._dependency("or",null,t)},_class.prototype.and=function and(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this._dependency("and",null,t)},_class.prototype.nand=function nand(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this._dependency("nand",null,t)},_class.prototype.requiredKeys=function requiredKeys(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this.applyFunctionToChildren(t,"required")},_class.prototype.optionalKeys=function optionalKeys(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this.applyFunctionToChildren(t,"optional")},_class.prototype.forbiddenKeys=function forbiddenKeys(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=i.flatten(t),this.applyFunctionToChildren(t,"forbidden")},_class.prototype.rename=function rename(e,t,n){i.assert("string"===typeof e||e instanceof RegExp,"Rename missing the from argument"),i.assert("string"===typeof t,"Rename missing the to argument"),i.assert(t!==e,"Cannot rename key to same name:",e);for(var r=0;r<this._inner.renames.length;++r)i.assert(this._inner.renames[r].from!==e,"Cannot rename the same key multiple times");var a=this.clone();return a._inner.renames.push({from:e,to:t,options:i.applyToDefaults(l.renameDefaults,n||{}),isRegExp:e instanceof RegExp}),a},_class.prototype.applyFunctionToChildren=function applyFunctionToChildren(e,t,n,r){e=[].concat(e),i.assert(e.length>0,"expected at least one children");var a=l.groupChildren(e),o=void 0;if(""in a?(o=this[t].apply(this,n),delete a[""]):o=this.clone(),o._inner.children){r=r?r+".":"";for(var s=0;s<o._inner.children.length;++s){var u=o._inner.children[s],c=a[u.key];c&&(o._inner.children[s]={key:u.key,_refs:u._refs,schema:u.schema.applyFunctionToChildren(c,t,n,r+u.key)},delete a[u.key])}}var f=Object.keys(a);return i.assert(0===f.length,"unknown key(s)",f.join(", ")),o},_class.prototype._dependency=function _dependency(e,t,n){n=[].concat(n);for(var r=0;r<n.length;++r)i.assert("string"===typeof n[r],e,"peers must be a string or array of strings");var a=this.clone();return a._inner.dependencies.push({type:e,key:t,peers:n}),a},_class.prototype.describe=function describe(e){var t=o.prototype.describe.call(this);if(t.rules)for(var n=0;n<t.rules.length;++n){var a=t.rules[n];a.arg&&"object"===r(a.arg)&&a.arg.schema&&a.arg.ref&&(a.arg={schema:a.arg.schema.describe(),ref:a.arg.ref.toString()})}if(this._inner.children&&!e){t.children={};for(var s=0;s<this._inner.children.length;++s){var u=this._inner.children[s];t.children[u.key]=u.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=i.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(var l=0;l<this._inner.patterns.length;++l){var c=this._inner.patterns[l];c.regex?t.patterns.push({regex:c.regex.toString(),rule:c.rule.describe()}):t.patterns.push({schema:c.schema.describe(),rule:c.rule.describe()})}}return this._inner.renames.length>0&&(t.renames=i.clone(this._inner.renames)),t},_class.prototype.assert=function assert(e,t,n){e=u.ref(e),i.assert(e.isContext||e.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),n=n||"pass the assertion test";try{t=u.schema(this._currentJoi,t)}catch(o){throw o.hasOwnProperty("path")&&(o.message=o.message+"("+o.path+")"),o}var r=e.path[e.path.length-1],a=e.path.join(".");return this._test("assert",{schema:t,ref:e},(function(o,s,u){if(!t._validate(e(o),null,u,o).errors)return o;var l=i.merge({},s);return l.key=r,l.path=e.path,this.createError("object.assert",{ref:a,message:n},l,u)}))},_class.prototype.type=function type(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name;i.assert("function"===typeof e,"type must be a constructor function");var n={name:t,ctor:e};return this._test("type",n,(function(t,r,i){return t instanceof e?t:this.createError("object.type",{type:n.name},r,i)}))},_class}(o),l.safeParse=function(e){try{return JSON.parse(e)}catch(t){}return e},l.renameDefaults={alias:!1,multiple:!1,override:!1},l.groupChildren=function(e){e.sort();for(var t={},n=0;n<e.length;++n){var r=e[n];i.assert("string"===typeof r,"children must be strings");var a=r.split(".")[0];(t[a]=t[a]||[]).push(r.substring(a.length+1))}return t},l.keysToLabels=function(e,t){var n=e._inner.children;if(!n)return t;var r=function findLabel(e){var t=n.find((function(t){return t.key===e}));return t?t.schema._getLabel(e):e};return Array.isArray(t)?t.map(r):r(t)},l.with=function(e,t,n,r,i){if(void 0===e)return e;for(var a=0;a<t.length;++a){var o=t[a];if(!Object.prototype.hasOwnProperty.call(n,o)||void 0===n[o])return this.createError("object.with",{main:r.key,mainWithLabel:l.keysToLabels(this,r.key),peer:o,peerWithLabel:l.keysToLabels(this,o)},r,i)}return e},l.without=function(e,t,n,r,i){if(void 0===e)return e;for(var a=0;a<t.length;++a){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&void 0!==n[o])return this.createError("object.without",{main:r.key,mainWithLabel:l.keysToLabels(this,r.key),peer:o,peerWithLabel:l.keysToLabels(this,o)},r,i)}return e},l.xor=function(e,t,n,r,i){for(var a=[],o=0;o<t.length;++o){var s=t[o];Object.prototype.hasOwnProperty.call(n,s)&&void 0!==n[s]&&a.push(s)}if(1===a.length)return e;var u={peers:t,peersWithLabels:l.keysToLabels(this,t)};return 0===a.length?this.createError("object.missing",u,r,i):this.createError("object.xor",u,r,i)},l.or=function(e,t,n,r,i){for(var a=0;a<t.length;++a){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&void 0!==n[o])return e}return this.createError("object.missing",{peers:t,peersWithLabels:l.keysToLabels(this,t)},r,i)},l.and=function(e,t,n,r,i){for(var a=[],o=[],s=t.length,u=0;u<s;++u){var c=t[u];Object.prototype.hasOwnProperty.call(n,c)&&void 0!==n[c]?o.push(c):a.push(c)}if(!(a.length===s||o.length===s))return this.createError("object.and",{present:o,presentWithLabels:l.keysToLabels(this,o),missing:a,missingWithLabels:l.keysToLabels(this,a)},r,i)},l.nand=function(e,t,n,r,a){for(var o=[],s=0;s<t.length;++s){var u=t[s];Object.prototype.hasOwnProperty.call(n,u)&&void 0!==n[u]&&o.push(u)}var c=i.clone(t),f=c.splice(0,1)[0];return o.length===t.length?this.createError("object.nand",{main:f,mainWithLabel:l.keysToLabels(this,f),peers:c,peersWithLabels:l.keysToLabels(this,c)},r,a):null},e.exports=new l.Object},function(e,t,n){"use strict";var r={rfc3986:{},generate:function(){var e="|";r.rfc3986.ipv4Cidr="[0-9]|[1-2][0-9]|3[0-2]",r.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";var t="a-zA-Z0-9-\\._~",n="!\\$&'\\(\\)\\*\\+,;=",i=t+"%0-9A-Fa-f"+n+":@",a="["+i+"]",o="(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])";r.rfc3986.IPv4address="(?:"+o+"\\.){3}"+o;var s="[0-9A-Fa-f]{1,4}",u="(?:"+s+":"+s+"|"+r.rfc3986.IPv4address+")",l="(?:"+s+":){6}"+u,c="::(?:"+s+":){5}"+u,f="(?:"+s+")?::(?:"+s+":){4}"+u,d="(?:(?:"+s+":){0,1}"+s+")?::(?:"+s+":){3}"+u,h="(?:(?:"+s+":){0,2}"+s+")?::(?:"+s+":){2}"+u,p="(?:(?:"+s+":){0,3}"+s+")?::"+s+":"+u,g="(?:(?:"+s+":){0,4}"+s+")?::"+u;r.rfc3986.IPv6address="(?:"+l+e+c+e+f+e+d+e+h+e+p+e+g+e+"(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}"+e+"(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)",r.rfc3986.IPvFuture="v[0-9A-Fa-f]+\\.["+t+n+":]+",r.rfc3986.scheme="[a-zA-Z][a-zA-Z0-9+-\\.]*";var m="(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:]*@)?"+("(?:"+("\\[(?:"+r.rfc3986.IPv6address+e+r.rfc3986.IPvFuture+")\\]")+e+r.rfc3986.IPv4address+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=]{0,255})")+"(?::[0-9]*)?",v=a+"+",y="(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",_="\\/(?:"+v+y+")?";r.rfc3986.hierPart="(?:(?:\\/\\/"+m+y+")"+e+_+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*)",r.rfc3986.relativeRef="(?:(?:\\/\\/"+m+y+")"+e+_+e+"[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*"+e+")",r.rfc3986.query="["+i+"\\/\\?]*(?=#|$)",r.rfc3986.fragment="["+i+"\\/\\?]*"}};r.generate(),e.exports=r.rfc3986},function(e,t){},function(e,t,n){(function(e,r){var i=/%[sdj%]/g;t.format=function(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<a;s=r[++n])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},t.deprecate=function(n,i){if(isUndefined(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return function deprecated(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}};var a,o={};function inspect(e,n){var r={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),isBoolean(n)?r.showHidden=n:n&&t._extend(r,n),isUndefined(r.showHidden)&&(r.showHidden=!1),isUndefined(r.depth)&&(r.depth=2),isUndefined(r.colors)&&(r.colors=!1),isUndefined(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=stylizeWithColor),formatValue(r,e,r.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"\x1b["+inspect.colors[n][0]+"m"+e+"\x1b["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function formatValue(e,n,r){if(e.customInspect&&n&&isFunction(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return isString(i)||(i=formatValue(e,i,r)),i}var a=function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(isNumber(t))return e.stylize(""+t,"number");if(isBoolean(t))return e.stylize(""+t,"boolean");if(isNull(t))return e.stylize("null","null")}(e,n);if(a)return a;var o=Object.keys(n),s=function arrayToHash(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),isError(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(n);if(0===o.length){if(isFunction(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(isDate(n))return e.stylize(Date.prototype.toString.call(n),"date");if(isError(n))return formatError(n)}var l,c="",f=!1,d=["{","}"];(isArray(n)&&(f=!0,d=["[","]"]),isFunction(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return isRegExp(n)&&(c=" "+RegExp.prototype.toString.call(n)),isDate(n)&&(c=" "+Date.prototype.toUTCString.call(n)),isError(n)&&(c=" "+formatError(n)),0!==o.length||f&&0!=n.length?r<0?isRegExp(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=f?function formatArray(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)hasOwnProperty(t,String(o))?a.push(formatProperty(e,t,n,r,String(o),!0)):a.push("");return i.forEach((function(i){i.match(/^\d+$/)||a.push(formatProperty(e,t,n,r,i,!0))})),a}(e,n,r,s,o):o.map((function(t){return formatProperty(e,n,r,s,t,f)})),e.seen.pop(),function reduceToSingleString(e,t,n){if(e.reduce((function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,d)):d[0]+c+d[1]}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatProperty(e,t,n,r,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=isNull(n)?formatValue(e,u.value,null):formatValue(e,u.value,n-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"===typeof e}function isNull(e){return null===e}function isNumber(e){return"number"===typeof e}function isString(e){return"string"===typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"===typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(isUndefined(a)&&(a=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=isArray,t.isBoolean=isBoolean,t.isNull=isNull,t.isNullOrUndefined=function isNullOrUndefined(e){return null==e},t.isNumber=isNumber,t.isString=isString,t.isSymbol=function isSymbol(e){return"symbol"===typeof e},t.isUndefined=isUndefined,t.isRegExp=isRegExp,t.isObject=isObject,t.isDate=isDate,t.isError=isError,t.isFunction=isFunction,t.isPrimitive=function isPrimitive(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=n(40);var s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),s[e.getMonth()],t].join(" ")}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",timestamp(),t.format.apply(t,arguments))},t.inherits=n(39),t._extend=function(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(5),n(7))},function(e,t,n){"use strict";(function(t){function compare(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function isBuffer(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var r=n(16),i=Object.prototype.hasOwnProperty,a=Array.prototype.slice,o="foo"===function foo(){}.name;function pToString(e){return Object.prototype.toString.call(e)}function isView(e){return!isBuffer(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=e.exports=ok,u=/\s*function\s+([^\(\s]*)\s*/;function getName(e){if(r.isFunction(e)){if(o)return e.name;var t=e.toString().match(u);return t&&t[1]}}function truncate(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function inspect(e){if(o||!r.isFunction(e))return r.inspect(e);var t=getName(e);return"[Function"+(t?": "+t:"")+"]"}function fail(e,t,n,r,i){throw new s.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function ok(e,t){e||fail(e,!0,t,"==",s.ok)}function _deepEqual(e,t,n,i){if(e===t)return!0;if(isBuffer(e)&&isBuffer(t))return 0===compare(e,t);if(r.isDate(e)&&r.isDate(t))return e.getTime()===t.getTime();if(r.isRegExp(e)&&r.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(isView(e)&&isView(t)&&pToString(e)===pToString(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(isBuffer(e)!==isBuffer(t))return!1;var o=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),function objEquiv(e,t,n,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(r.isPrimitive(e)||r.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=isArguments(e),s=isArguments(t);if(o&&!s||!o&&s)return!1;if(o)return e=a.call(e),t=a.call(t),_deepEqual(e,t,n);var u,c,f=l(e),d=l(t);if(f.length!==d.length)return!1;for(f.sort(),d.sort(),c=f.length-1;c>=0;c--)if(f[c]!==d[c])return!1;for(c=f.length-1;c>=0;c--)if(u=f[c],!_deepEqual(e[u],t[u],n,i))return!1;return!0}(e,t,n,i))}return n?e===t:e==t}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function expectedException(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _throws(e,t,n,i){var a;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(i=n,n=null),a=function _tryBlock(e){var t;try{e()}catch(n){t=n}return t}(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!a&&fail(a,n,"Missing expected exception"+i);var o="string"===typeof i,s=!e&&a&&!n;if((!e&&r.isError(a)&&o&&expectedException(a,n)||s)&&fail(a,n,"Got unwanted exception"+i),e&&a&&n&&!expectedException(a,n)||!e&&a)throw a}s.AssertionError=function AssertionError(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function getMessage(e){return truncate(inspect(e.actual),128)+" "+e.operator+" "+truncate(inspect(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=getName(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},r.inherits(s.AssertionError,Error),s.fail=fail,s.ok=ok,s.equal=function equal(e,t,n){e!=t&&fail(e,t,n,"==",s.equal)},s.notEqual=function notEqual(e,t,n){e==t&&fail(e,t,n,"!=",s.notEqual)},s.deepEqual=function deepEqual(e,t,n){_deepEqual(e,t,!1)||fail(e,t,n,"deepEqual",s.deepEqual)},s.deepStrictEqual=function deepStrictEqual(e,t,n){_deepEqual(e,t,!0)||fail(e,t,n,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function notDeepEqual(e,t,n){_deepEqual(e,t,!1)&&fail(e,t,n,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function notDeepStrictEqual(e,t,n){_deepEqual(e,t,!0)&&fail(e,t,n,"notDeepStrictEqual",notDeepStrictEqual)},s.strictEqual=function strictEqual(e,t,n){e!==t&&fail(e,t,n,"===",s.strictEqual)},s.notStrictEqual=function notStrictEqual(e,t,n){e===t&&fail(e,t,n,"!==",s.notStrictEqual)},s.throws=function(e,t,n){_throws(!0,e,t,n)},s.doesNotThrow=function(e,t,n){_throws(!1,e,t,n)},s.ifError=function(e){if(e)throw e};var l=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t}}).call(t,n(5))},function(e,t,n){"use strict";(function(e){var n={};t.escapeJavaScript=function(e){if(!e)return"";for(var t="",r=0;r<e.length;++r){var i=e.charCodeAt(r);n.isSafe(i)?t+=e[r]:t+=n.escapeJavaScriptChar(i)}return t},t.escapeHtml=function(e){if(!e)return"";for(var t="",r=0;r<e.length;++r){var i=e.charCodeAt(r);n.isSafe(i)?t+=e[r]:t+=n.escapeHtmlChar(i)}return t},t.escapeJson=function(e){if(!e)return"";var t=void 0;return e.replace(/[<>&\u2028\u2029]/g,(function(e){return 60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029"}))},n.escapeJavaScriptChar=function(t){if(t>=256)return"\\u"+n.padLeft(""+t,4);var r=e.from(String.fromCharCode(t),"ascii").toString("hex");return"\\x"+n.padLeft(r,2)},n.escapeHtmlChar=function(t){var r=n.namedHtml[t];if("undefined"!==typeof r)return r;if(t>=256)return"&#"+t+";";var i=e.from(String.fromCharCode(t),"ascii").toString("hex");return"&#x"+n.padLeft(i,2)+";"},n.padLeft=function(e,t){for(;e.length<t;)e="0"+e;return e},n.isSafe=function(e){return"undefined"!==typeof n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){for(var e={},t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()}).call(t,n(3).Buffer)},function(e,t,n){"use strict";(function(e){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(38),a={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};a.specials=function(){var e=new Array(256);e.fill(!1);for(var t=0;t<'()<>[]:;@\\,."'.length;++t)e['()<>[]:;@\\,."'.codePointAt(t)]=!0;return function(t){return e[t]}}(),a.c0Controls=function(){var e=new Array(256);e.fill(!1);for(var t=0;t<33;++t)e[t]=!0;return function(t){return e[t]}}(),a.c1Controls=function(){var e=new Array(256);e.fill(!1);for(var t=127;t<160;++t)e[t]=!0;return function(t){return e[t]}}(),a.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},a.normalizeSupportsNul="\0"==="\0".normalize("NFC"),a.nulNormalize=function(e){return e.split("\0").map((function(e){return e.normalize("NFC")})).join("\0")},a.normalize=function(e){return!a.normalizeSupportsNul&&e.indexOf("\0")>=0?a.nulNormalize(e):e.normalize("NFC")},a.checkIpV6=function(e){return e.every((function(e){return a.regex.ipV6.test(e)}))},a.validDomain=function(e,t){return t.tldBlacklist?Array.isArray(t.tldBlacklist)?-1===a.indexOf.call(t.tldBlacklist,e):!a.hasOwn.call(t.tldBlacklist,e):Array.isArray(t.tldWhitelist)?-1!==a.indexOf.call(t.tldWhitelist,e):a.hasOwn.call(t.tldWhitelist,e)},t.validate=a.validate=function(t,n,o){n=n||{},t=a.normalize(t),"function"===typeof n&&(o=n,n={}),"function"!==typeof o&&(o=null);var s=void 0,u=void 0;if("number"===typeof n.errorLevel?(s=!0,u=n.errorLevel):(s=!!n.errorLevel,u=a.diagnoses.valid),n.tldWhitelist)if("string"===typeof n.tldWhitelist)n.tldWhitelist=[n.tldWhitelist];else if("object"!==r(n.tldWhitelist))throw new TypeError("expected array or object tldWhitelist");if(n.tldBlacklist)if("string"===typeof n.tldBlacklist)n.tldBlacklist=[n.tldBlacklist];else if("object"!==r(n.tldBlacklist))throw new TypeError("expected array or object tldBlacklist");if(n.minDomainAtoms&&(n.minDomainAtoms!==(0|+n.minDomainAtoms)||n.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");var l=a.diagnoses.valid,c=function updateResult(e){e>l&&(l=e)};!(void 0===n.allowUnicode||!!n.allowUnicode)&&/[^\x00-\x7f]/.test(t)&&c(a.diagnoses.undesiredNonAscii);for(var f={now:a.components.localpart,prev:a.components.localpart,stack:[a.components.localpart]},d="",h={local:"",domain:""},p={locals:[""],domains:[""]},g=0,m=0,v=0,y=void 0,_=!1,b=!1,x=t.length,w=void 0,k=0;k<x;k+=w.length){switch(w=String.fromCodePoint(t.codePointAt(k)),f.now){case a.components.localpart:switch(w){case"(":0===m?c(0===g?a.diagnoses.cfwsComment:a.diagnoses.deprecatedComment):(c(a.diagnoses.cfwsComment),b=!0),f.stack.push(f.now),f.now=a.components.contextComment;break;case".":0===m?c(0===g?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):(b&&c(a.diagnoses.deprecatedLocalPart),b=!1,m=0,++g,h.local+=w,p.locals[g]="");break;case'"':0===m?(c(0===g?a.diagnoses.rfc5321QuotedString:a.diagnoses.deprecatedLocalPart),h.local+=w,p.locals[g]+=w,m+=e.byteLength(w,"utf8"),b=!0,f.stack.push(f.now),f.now=a.components.contextQuotedString):c(a.diagnoses.errExpectingATEXT);break;case"\r":if(x===++k||"\n"!==t[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===m?c(0===g?a.diagnoses.cfwsFWS:a.diagnoses.deprecatedFWS):b=!0,f.stack.push(f.now),f.now=a.components.contextFWS,d=w;break;case"@":if(1!==f.stack.length)throw new Error("unexpected item on context stack");0===h.local.length?c(a.diagnoses.errNoLocalPart):0===m?c(a.diagnoses.errDotEnd):e.byteLength(h.local,"utf8")>64?c(a.diagnoses.rfc5322LocalTooLong):f.prev!==a.components.contextComment&&f.prev!==a.components.contextFWS||c(a.diagnoses.deprecatedCFWSNearAt),f.now=a.components.domain,f.stack[0]=a.components.domain,g=0,m=0,b=!1;break;default:if(b)switch(f.prev){case a.components.contextComment:case a.components.contextFWS:c(a.diagnoses.errATEXTAfterCFWS);break;case a.components.contextQuotedString:c(a.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+f.prev)}else f.prev=f.now,y=w.codePointAt(0),(a.specials(y)||a.c0Controls(y)||a.c1Controls(y))&&c(a.diagnoses.errExpectingATEXT),h.local+=w,p.locals[g]+=w,m+=e.byteLength(w,"utf8")}break;case a.components.domain:switch(w){case"(":0===m?c(0===g?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedComment):(b=!0,c(a.diagnoses.cfwsComment)),f.stack.push(f.now),f.now=a.components.contextComment;break;case".":var S=i.encode(p.domains[g]).length;0===m?c(0===g?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):_?c(a.diagnoses.errDomainHyphenEnd):S>63&&c(a.diagnoses.rfc5322LabelTooLong),b=!1,m=0,++g,p.domains[g]="",h.domain+=w;break;case"[":0===h.domain.length?(b=!0,m+=e.byteLength(w,"utf8"),f.stack.push(f.now),f.now=a.components.literal,h.domain+=w,p.domains[g]+=w,h.literal=""):c(a.diagnoses.errExpectingATEXT);break;case"\r":if(x===++k||"\n"!==t[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===m?c(0===g?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedFWS):(c(a.diagnoses.cfwsFWS),b=!0),f.stack.push(f.now),f.now=a.components.contextFWS,d=w;break;default:if(b)switch(f.prev){case a.components.contextComment:case a.components.contextFWS:c(a.diagnoses.errATEXTAfterCFWS);break;case a.components.literal:c(a.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+f.prev)}y=w.codePointAt(0),_=!1,a.specials(y)||a.c0Controls(y)||a.c1Controls(y)?c(a.diagnoses.errExpectingATEXT):"-"===w?(0===m&&c(a.diagnoses.errDomainHyphenStart),_=!0):(y<48||y>122&&y<192||y>57&&y<65||y>90&&y<97)&&c(a.diagnoses.rfc5322Domain),h.domain+=w,p.domains[g]+=w,m+=e.byteLength(w,"utf8")}break;case a.components.literal:switch(w){case"]":if(l<a.categories.deprecated){var E=-1,T=h.literal,C=a.regex.ipV4.exec(T);if(C&&0!==(E=C.index)&&(T=T.slice(0,E)+"0:0"),0===E)c(a.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==T.slice(0,5).toLowerCase())c(a.diagnoses.rfc5322DomainLiteral);else{var O=T.slice(5),A=a.maxIPv6Groups,R=O.split(":");~(E=O.indexOf("::"))?E!==O.lastIndexOf("::")?c(a.diagnoses.rfc5322IPv62x2xColon):(0!==E&&E!==O.length-2||++A,R.length>A?c(a.diagnoses.rfc5322IPv6MaxGroups):R.length===A&&c(a.diagnoses.deprecatedIPv6)):R.length!==A&&c(a.diagnoses.rfc5322IPv6GroupCount),":"===O[0]&&":"!==O[1]?c(a.diagnoses.rfc5322IPv6ColonStart):":"===O[O.length-1]&&":"!==O[O.length-2]?c(a.diagnoses.rfc5322IPv6ColonEnd):a.checkIpV6(R)?c(a.diagnoses.rfc5321AddressLiteral):c(a.diagnoses.rfc5322IPv6BadCharacter)}}else c(a.diagnoses.rfc5322DomainLiteral);h.domain+=w,p.domains[g]+=w,m+=e.byteLength(w,"utf8"),f.prev=f.now,f.now=f.stack.pop();break;case"\\":c(a.diagnoses.rfc5322DomainLiteralOBSDText),f.stack.push(f.now),f.now=a.components.contextQuotedPair;break;case"\r":if(x===++k||"\n"!==t[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":c(a.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=a.components.contextFWS,d=w;break;default:if(127!==(y=w.codePointAt(0))&&a.c1Controls(y)||0===y||"["===w){c(a.diagnoses.errExpectingDTEXT);break}(a.c0Controls(y)||127===y)&&c(a.diagnoses.rfc5322DomainLiteralOBSDText),h.literal+=w,h.domain+=w,p.domains[g]+=w,m+=e.byteLength(w,"utf8")}break;case a.components.contextQuotedString:switch(w){case"\\":f.stack.push(f.now),f.now=a.components.contextQuotedPair;break;case"\r":if(x===++k||"\n"!==t[k]){c(a.diagnoses.errCRNoLF);break}case"\t":h.local+=" ",p.locals[g]+=" ",m+=e.byteLength(w,"utf8"),c(a.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=a.components.contextFWS,d=w;break;case'"':h.local+=w,p.locals[g]+=w,m+=e.byteLength(w,"utf8"),f.prev=f.now,f.now=f.stack.pop();break;default:127!==(y=w.codePointAt(0))&&a.c1Controls(y)||0===y||10===y?c(a.diagnoses.errExpectingQTEXT):(a.c0Controls(y)||127===y)&&c(a.diagnoses.deprecatedQTEXT),h.local+=w,p.locals[g]+=w,m+=e.byteLength(w,"utf8")}break;case a.components.contextQuotedPair:127!==(y=w.codePointAt(0))&&a.c1Controls(y)?c(a.diagnoses.errExpectingQPair):(y<31&&9!==y||127===y)&&c(a.diagnoses.deprecatedQP),f.prev=f.now,f.now=f.stack.pop();var D="\\"+w;switch(f.now){case a.components.contextComment:break;case a.components.contextQuotedString:h.local+=D,p.locals[g]+=D,m+=2;break;case a.components.literal:h.domain+=D,p.domains[g]+=D,m+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+f.now)}break;case a.components.contextComment:switch(w){case"(":f.stack.push(f.now),f.now=a.components.contextComment;break;case")":f.prev=f.now,f.now=f.stack.pop();break;case"\\":f.stack.push(f.now),f.now=a.components.contextQuotedPair;break;case"\r":if(x===++k||"\n"!==t[k]){c(a.diagnoses.errCRNoLF);break}case" ":case"\t":c(a.diagnoses.cfwsFWS),f.stack.push(f.now),f.now=a.components.contextFWS,d=w;break;default:if(0===(y=w.codePointAt(0))||10===y||127!==y&&a.c1Controls(y)){c(a.diagnoses.errExpectingCTEXT);break}(a.c0Controls(y)||127===y)&&c(a.diagnoses.deprecatedCTEXT)}break;case a.components.contextFWS:if("\r"===d){if("\r"===w){c(a.diagnoses.errFWSCRLFx2);break}++v>1?c(a.diagnoses.deprecatedFWS):v=1}switch(w){case"\r":x!==++k&&"\n"===t[k]||c(a.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===d&&c(a.diagnoses.errFWSCRLFEnd),v=0,f.prev=f.now,f.now=f.stack.pop(),--k}d=w;break;default:throw new Error("unknown context: "+f.now)}if(l>a.categories.rfc5322)break}if(l<a.categories.rfc5322){var P=i.encode(h.domain).length;if(f.now===a.components.contextQuotedString)c(a.diagnoses.errUnclosedQuotedString);else if(f.now===a.components.contextQuotedPair)c(a.diagnoses.errBackslashEnd);else if(f.now===a.components.contextComment)c(a.diagnoses.errUnclosedComment);else if(f.now===a.components.literal)c(a.diagnoses.errUnclosedDomainLiteral);else if("\r"===w)c(a.diagnoses.errFWSCRLFEnd);else if(0===h.domain.length)c(a.diagnoses.errNoDomain);else if(0===m)c(a.diagnoses.errDotEnd);else if(_)c(a.diagnoses.errDomainHyphenEnd);else if(P>255)c(a.diagnoses.rfc5322DomainTooLong);else if(e.byteLength(h.local,"utf8")+P+1>254)c(a.diagnoses.rfc5322TooLong);else if(m>63)c(a.diagnoses.rfc5322LabelTooLong);else if(n.minDomainAtoms&&p.domains.length<n.minDomainAtoms)c(a.diagnoses.errDomainTooShort);else if(n.tldWhitelist||n.tldBlacklist){var M=p.domains[g];a.validDomain(M,n)||c(a.diagnoses.errUnknownTLD)}}l<a.categories.dnsWarn&&(p.domains[g].codePointAt(0)<=57&&c(a.diagnoses.rfc5321TLDNumeric));l<u&&(l=a.diagnoses.valid);var j=s?l:l<a.defaultThreshold;return o&&o(j),j},t.diagnoses=a.validate.diagnoses=function(){for(var e={},t=Object.keys(a.diagnoses),n=0;n<t.length;++n){var r=t[n];e[r]=a.diagnoses[r]}return e}(),t.normalize=a.normalize}).call(t,n(3).Buffer)},function(e,t,n){"use strict";t.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hexAlign:"hex decoded representation must be byte aligned",base64:"must be a valid base64 string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"}}},function(e,t,n){"use strict";var r=n(8);t.options=r.object({abortEarly:r.boolean(),convert:r.boolean(),allowUnknown:r.boolean(),skipFunctions:r.boolean(),stripUnknown:[r.boolean(),r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects")],language:r.object(),presence:r.string().only("required","optional","forbidden","ignore"),raw:r.boolean(),context:r.object(),strip:r.boolean(),noDefaults:r.boolean(),escapeHtml:r.boolean()}).strict()},function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var i=n(2),a=n(4),o=n(1),s=n(0),u={fastSplice:function(e,t){for(var n=t;n<e.length;)e[n++]=e[n];--e.length}};u.Array=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="array",t._inner.items=[],t._inner.ordereds=[],t._inner.inclusions=[],t._inner.exclusions=[],t._inner.requireds=[],t._flags.sparse=!1,t}return _inherits(_class,e),_class.prototype._base=function _base(e,t,n){var r={value:e};"string"===typeof e&&n.convert&&u.safeParse(e,r);var i=Array.isArray(r.value),a=i;if(n.convert&&this._flags.single&&!i&&(r.value=[r.value],i=!0),!i)return r.errors=this.createError("array.base",null,t,n),r;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(a&&(r.value=r.value.slice(0)),r.errors=this._checkItems.call(this,r.value,a,t,n),r.errors&&a&&n.convert&&this._flags.single)){var o=r.errors;r.value=[r.value],r.errors=this._checkItems.call(this,r.value,a,t,n),r.errors&&(r.errors=o,r.value=r.value[0])}return r},_class.prototype._checkItems=function _checkItems(e,t,n,r){for(var i=[],a=void 0,o=this._inner.requireds.slice(),s=this._inner.ordereds.slice(),l=this._inner.inclusions.concat(o),c=e.length,f=0;f<c;++f){a=!1;var d=e[f],h=!1,p={key:t?f:n.key,path:t?n.path.concat(f):n.path,parent:n.parent,reference:n.reference},g=void 0;if(this._flags.sparse||void 0!==d){for(var m=0;m<this._inner.exclusions.length;++m)if(!(g=this._inner.exclusions[m]._validate(d,p,{})).errors){if(i.push(this.createError(t?"array.excludes":"array.excludesSingle",{pos:f,value:d},{key:n.key,path:p.path},r)),a=!0,r.abortEarly)return i;s.shift();break}if(!a){if(this._inner.ordereds.length){if(s.length>0){var v=s.shift();if((g=v._validate(d,p,r)).errors){if(i.push(this.createError("array.ordered",{pos:f,reason:g.errors,value:d},{key:n.key,path:p.path},r)),r.abortEarly)return i}else if(v._flags.strip)u.fastSplice(e,f),--f,--c;else{if(!this._flags.sparse&&void 0===g.value){if(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),r.abortEarly)return i;continue}e[f]=g.value}continue}if(!this._inner.items.length){if(i.push(this.createError("array.orderedLength",{pos:f,limit:this._inner.ordereds.length},{key:n.key,path:p.path},r)),r.abortEarly)return i;continue}}for(var y=[],_=o.length,b=0;b<_;++b)if(!(g=y[b]=o[b]._validate(d,p,r)).errors){if(e[f]=g.value,h=!0,u.fastSplice(o,b),--b,--_,!this._flags.sparse&&void 0===g.value&&(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),r.abortEarly))return i;break}if(!h){var x=!!r.stripUnknown&&(!0===r.stripUnknown||!!r.stripUnknown.arrays);_=l.length;for(var w=0;w<_;++w){var k=l[w],S=o.indexOf(k);if(-1!==S)g=y[S];else if(!(g=k._validate(d,p,r)).errors){k._flags.strip?(u.fastSplice(e,f),--f,--c):this._flags.sparse||void 0!==g.value?e[f]=g.value:(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),a=!0),h=!0;break}if(1===_){if(x){u.fastSplice(e,f),--f,--c,h=!0;break}if(i.push(this.createError(t?"array.includesOne":"array.includesOneSingle",{pos:f,reason:g.errors,value:d},{key:n.key,path:p.path},r)),a=!0,r.abortEarly)return i;break}}if(!a&&this._inner.inclusions.length&&!h){if(x){u.fastSplice(e,f),--f,--c;continue}if(i.push(this.createError(t?"array.includes":"array.includesSingle",{pos:f,value:d},{key:n.key,path:p.path},r)),r.abortEarly)return i}}}}else{if(i.push(this.createError("array.sparse",null,{key:n.key,path:p.path,pos:f},r)),r.abortEarly)return i;s.shift()}}return o.length&&this._fillMissedErrors.call(this,i,o,n,r),s.length&&this._fillOrderedErrors.call(this,i,s,n,r),i.length?i:null},_class.prototype.describe=function describe(){var e=i.prototype.describe.call(this);if(this._inner.ordereds.length){e.orderedItems=[];for(var t=0;t<this._inner.ordereds.length;++t)e.orderedItems.push(this._inner.ordereds[t].describe())}if(this._inner.items.length){e.items=[];for(var n=0;n<this._inner.items.length;++n)e.items.push(this._inner.items[n].describe())}return e},_class.prototype.items=function items(){for(var e=this,t=this.clone(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return s.flatten(r).forEach((function(n,r){try{n=a.schema(e._currentJoi,n)}catch(i){throw i.hasOwnProperty("path")?i.path=r+"."+i.path:i.path=r,i.message=i.message+"("+i.path+")",i}t._inner.items.push(n),"required"===n._flags.presence?t._inner.requireds.push(n):"forbidden"===n._flags.presence?t._inner.exclusions.push(n.optional()):t._inner.inclusions.push(n)})),t},_class.prototype.ordered=function ordered(){for(var e=this,t=this.clone(),n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return s.flatten(r).forEach((function(n,r){try{n=a.schema(e._currentJoi,n)}catch(i){throw i.hasOwnProperty("path")?i.path=r+"."+i.path:i.path=r,i.message=i.message+"("+i.path+")",i}t._inner.ordereds.push(n)})),t},_class.prototype.min=function min(e){var t=o.isRef(e);return s.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("min",e,(function(n,r,i){var a=void 0;if(t){if(a=e(r.reference||r.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},r,i)}else a=e;return n.length>=a?n:this.createError("array.min",{limit:e,value:n},r,i)}))},_class.prototype.max=function max(e){var t=o.isRef(e);return s.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("max",e,(function(n,r,i){var a=void 0;if(t){if(a=e(r.reference||r.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},r,i)}else a=e;return n.length<=a?n:this.createError("array.max",{limit:e,value:n},r,i)}))},_class.prototype.length=function length(e){var t=o.isRef(e);return s.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("length",e,(function(n,r,i){var a=void 0;if(t){if(a=e(r.reference||r.parent,i),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},r,i)}else a=e;return n.length===a?n:this.createError("array.length",{limit:e,value:n},r,i)}))},_class.prototype.unique=function unique(e){s.assert(void 0===e||"function"===typeof e||"string"===typeof e,"comparator must be a function or a string");var t={};return"string"===typeof e?t.path=e:"function"===typeof e&&(t.comparator=e),this._test("unique",t,(function(e,n,i){for(var a={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},o=t.comparator||s.deepEqual,u=0;u<e.length;++u){var l=t.path?s.reach(e[u],t.path):e[u],c=t.comparator?a.custom:a["undefined"===typeof l?"undefined":r(l)];if(c)if(c instanceof Map){for(var f=c.entries(),d=void 0;!(d=f.next()).done;)if(o(d.value[0],l)){var h={key:n.key,path:n.path.concat(u),parent:n.parent,reference:n.reference},p={pos:u,value:e[u],dupePos:d.value[1],dupeValue:e[d.value[1]]};return t.path&&(p.path=t.path),this.createError("array.unique",p,h,i)}c.set(l,u)}else{if(void 0!==c[l]){var g={key:n.key,path:n.path.concat(u),parent:n.parent,reference:n.reference},m={pos:u,value:e[u],dupePos:c[l],dupeValue:e[c[l]]};return t.path&&(m.path=t.path),this.createError("array.unique",m,g,i)}c[l]=u}}return e}))},_class.prototype.sparse=function sparse(e){var t=void 0===e||!!e;if(this._flags.sparse===t)return this;var n=this.clone();return n._flags.sparse=t,n},_class.prototype.single=function single(e){var t=void 0===e||!!e;if(this._flags.single===t)return this;var n=this.clone();return n._flags.single=t,n},_class.prototype._fillMissedErrors=function _fillMissedErrors(e,t,n,r){for(var i=[],a=0,o=0;o<t.length;++o){var s=t[o]._getLabel();s?i.push(s):++a}i.length?a?e.push(this.createError("array.includesRequiredBoth",{knownMisses:i,unknownMisses:a},{key:n.key,path:n.path},r)):e.push(this.createError("array.includesRequiredKnowns",{knownMisses:i},{key:n.key,path:n.path},r)):e.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:a},{key:n.key,path:n.path},r))},_class.prototype._fillOrderedErrors=function _fillOrderedErrors(e,t,n,r){for(var i=[],a=0;a<t.length;++a){"required"===s.reach(t[a],"_flags.presence")&&i.push(t[a])}i.length&&this._fillMissedErrors.call(this,e,i,n,r)},_class}(i),u.safeParse=function(e,t){try{var n=JSON.parse(e);Array.isArray(n)&&(t.value=n)}catch(r){}},e.exports=new u.Array},function(e,t,n){"use strict";(function(t){function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var r=n(2),i=n(0),a={};a.Binary=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="binary",t}return _inherits(_class,e),_class.prototype._base=function _base(e,n,r){var i={value:e};if("string"===typeof e&&r.convert)try{i.value=t.from(e,this._flags.encoding)}catch(a){}return i.errors=t.isBuffer(i.value)?null:this.createError("binary.base",null,n,r),i},_class.prototype.encoding=function encoding(e){if(i.assert(t.isEncoding(e),"Invalid encoding:",e),this._flags.encoding===e)return this;var n=this.clone();return n._flags.encoding=e,n},_class.prototype.min=function min(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,(function(t,n,r){return t.length>=e?t:this.createError("binary.min",{limit:e,value:t},n,r)}))},_class.prototype.max=function max(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,(function(t,n,r){return t.length<=e?t:this.createError("binary.max",{limit:e,value:t},n,r)}))},_class.prototype.length=function length(e){return i.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,(function(t,n,r){return t.length===e?t:this.createError("binary.length",{limit:e,value:t},n,r)}))},_class}(r),e.exports=new a.Binary}).call(t,n(3).Buffer)},function(e,t,n){"use strict";function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var r=n(2),i=n(0),a={Set:n(9)};a.Boolean=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="boolean",t._flags.insensitive=!0,t._inner.truthySet=new a.Set,t._inner.falsySet=new a.Set,t}return _inherits(_class,e),_class.prototype._base=function _base(e,t,n){var r={value:e};if("string"===typeof e&&n.convert){var i=this._flags.insensitive?e.toLowerCase():e;r.value="true"===i||"false"!==i&&e}return"boolean"!==typeof r.value&&(r.value=!!this._inner.truthySet.has(e,null,null,this._flags.insensitive)||!this._inner.falsySet.has(e,null,null,this._flags.insensitive)&&e),r.errors="boolean"===typeof r.value?null:this.createError("boolean.base",null,t,n),r},_class.prototype.truthy=function truthy(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=i.flatten(t);for(var a=0;a<t.length;++a){var o=t[a];i.assert(void 0!==o,"Cannot call truthy with undefined"),r._inner.truthySet.add(o)}return r},_class.prototype.falsy=function falsy(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.clone();t=i.flatten(t);for(var a=0;a<t.length;++a){var o=t[a];i.assert(void 0!==o,"Cannot call falsy with undefined"),r._inner.falsySet.add(o)}return r},_class.prototype.insensitive=function insensitive(e){var insensitive=void 0===e||!!e;if(this._flags.insensitive===insensitive)return this;var t=this.clone();return t._flags.insensitive=insensitive,t},_class.prototype.describe=function describe(){var e=r.prototype.describe.call(this);return e.truthy=[!0].concat(this._inner.truthySet.values()),e.falsy=[!1].concat(this._inner.falsySet.values()),e},_class}(r),e.exports=new a.Boolean},function(e,t,n){"use strict";function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var r=n(0),i=n(13),a=n(1),o={};o.Func=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._flags.func=!0,t}return _inherits(_class,e),_class.prototype.arity=function arity(e){return r.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("arity",e,(function(t,n,r){return t.length===e?t:this.createError("function.arity",{n:e},n,r)}))},_class.prototype.minArity=function minArity(e){return r.assert(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this._test("minArity",e,(function(t,n,r){return t.length>=e?t:this.createError("function.minArity",{n:e},n,r)}))},_class.prototype.maxArity=function maxArity(e){return r.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("maxArity",e,(function(t,n,r){return t.length<=e?t:this.createError("function.maxArity",{n:e},n,r)}))},_class.prototype.ref=function ref(){return this._test("ref",null,(function(e,t,n){return a.isRef(e)?e:this.createError("function.ref",null,t,n)}))},_class.prototype.class=function _class(){return this._test("class",null,(function(e,t,n){return/^\s*class\s/.test(e.toString())?e:this.createError("function.class",null,t,n)}))},_class}(i.constructor),e.exports=new o.Func},function(e,t,n){"use strict";function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var r=n(2),i=n(0),a={};a.Lazy=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="lazy",t}return _inherits(_class,e),_class.prototype._base=function _base(e,t,n){var i={value:e},a=this._flags.lazy;if(!a)return i.errors=this.createError("lazy.base",null,t,n),i;var o=a();return o instanceof r?o._validate(e,t,n):(i.errors=this.createError("lazy.schema",null,t,n),i)},_class.prototype.set=function set(e){i.assert("function"===typeof e,"You must provide a function as first argument");var t=this.clone();return t._flags.lazy=e,t},_class}(r),e.exports=new a.Lazy},function(e,t,n){"use strict";function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var r=n(2),i=n(1),a=n(0),o={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};o.Number=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="number",t._invalids.add(1/0),t._invalids.add(-1/0),t}return _inherits(_class,e),_class.prototype._base=function _base(e,t,n){var r={errors:null,value:e};if("string"===typeof e&&n.convert){var i=parseFloat(e);r.value=isNaN(i)||!isFinite(e)?NaN:i}var a="number"===typeof r.value&&!isNaN(r.value);if(n.convert&&"precision"in this._flags&&a){var o=Math.pow(10,this._flags.precision);r.value=Math.round(r.value*o)/o}return r.errors=a?null:this.createError("number.base",null,t,n),r},_class.prototype.multiple=function multiple(e){var t=i.isRef(e);return t||(a.assert("number"===typeof e&&isFinite(e),"multiple must be a number"),a.assert(e>0,"multiple must be greater than 0")),this._test("multiple",e,(function(n,r,i){var a=t?e(r.reference||r.parent,i):e;return!t||"number"===typeof a&&isFinite(a)?n%a===0?n:this.createError("number.multiple",{multiple:e,value:n},r,i):this.createError("number.ref",{ref:e.key},r,i)}))},_class.prototype.integer=function integer(){return this._test("integer",void 0,(function(e,t,n){return Number.isSafeInteger(e)?e:this.createError("number.integer",{value:e},t,n)}))},_class.prototype.negative=function negative(){return this._test("negative",void 0,(function(e,t,n){return e<0?e:this.createError("number.negative",{value:e},t,n)}))},_class.prototype.positive=function positive(){return this._test("positive",void 0,(function(e,t,n){return e>0?e:this.createError("number.positive",{value:e},t,n)}))},_class.prototype.precision=function precision(e){a.assert(Number.isSafeInteger(e),"limit must be an integer"),a.assert(!("precision"in this._flags),"precision already set");var t=this._test("precision",e,(function(t,n,r){var i=t.toString().match(o.precisionRx);return Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0)<=e?t:this.createError("number.precision",{limit:e,value:t},n,r)}));return t._flags.precision=e,t},_class.prototype.port=function port(){return this._test("port",void 0,(function(e,t,n){return!Number.isSafeInteger(e)||e<0||e>65535?this.createError("number.port",{value:e},t,n):e}))},_class}(r),o.compare=function(e,t){return function(n){var r=i.isRef(n),o="number"===typeof n&&!isNaN(n);return a.assert(o||r,"limit must be a number or reference"),this._test(e,n,(function(i,a,o){var s=void 0;if(r){if("number"!==typeof(s=n(a.reference||a.parent,o))||isNaN(s))return this.createError("number.ref",{ref:n.key},a,o)}else s=n;return t(i,s)?i:this.createError("number."+e,{limit:s,value:i},a,o)}))}},o.Number.prototype.min=o.compare("min",(function(e,t){return e>=t})),o.Number.prototype.max=o.compare("max",(function(e,t){return e<=t})),o.Number.prototype.greater=o.compare("greater",(function(e,t){return e>t})),o.Number.prototype.less=o.compare("less",(function(e,t){return e<t})),e.exports=new o.Number},function(e,t,n){"use strict";(function(t){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function _defaults(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}return e}(e,t))}var i=n(15),a=n(0),o=void 0,s=n(2),u=n(1),l=n(12),c=n(30),f=n(29),d={uriRegex:c.createUriRegex(),ipRegex:f.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};d.String=function(e){function _class(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_class);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this));return t._type="string",t._invalids.add(""),t}return _inherits(_class,e),_class.prototype._base=function _base(e,t,n){if("string"===typeof e&&n.convert){if(this._flags.normalize&&(e=e.normalize(this._flags.normalize)),this._flags.case&&(e="upper"===this._flags.case?e.toLocaleUpperCase():e.toLocaleLowerCase()),this._flags.trim&&(e=e.trim()),this._inner.replacements)for(var r=0;r<this._inner.replacements.length;++r){var i=this._inner.replacements[r];e=e.replace(i.pattern,i.replacement)}if(this._flags.truncate)for(var a=0;a<this._tests.length;++a){var o=this._tests[a];if("max"===o.name){e=e.slice(0,o.arg);break}}this._flags.byteAligned&&e.length%2!==0&&(e="0"+e)}return{value:e,errors:"string"===typeof e?null:this.createError("string.base",{value:e},t,n)}},_class.prototype.insensitive=function insensitive(){if(this._flags.insensitive)return this;var e=this.clone();return e._flags.insensitive=!0,e},_class.prototype.creditCard=function creditCard(){return this._test("creditCard",void 0,(function(e,t,n){for(var r=e.length,i=0,a=1;r--;){var o=e.charAt(r)*a;i+=o-9*(o>9),a^=3}return i%10===0&&i>0?e:this.createError("string.creditCard",{value:e},t,n)}))},_class.prototype.regex=function regex(e,t){a.assert(e instanceof RegExp,"pattern must be a RegExp");var n={pattern:new RegExp(e.source,e.ignoreCase?"i":void 0)};"string"===typeof t?n.name=t:"object"===("undefined"===typeof t?"undefined":r(t))&&(n.invert=!!t.invert,t.name&&(n.name=t.name));var i=["string.regex",n.invert?".invert":"",n.name?".name":".base"].join("");return this._test("regex",n,(function(e,t,r){return n.pattern.test(e)^n.invert?e:this.createError(i,{name:n.name,pattern:n.pattern,value:e},t,r)}))},_class.prototype.alphanum=function alphanum(){return this._test("alphanum",void 0,(function(e,t,n){return/^[a-zA-Z0-9]+$/.test(e)?e:this.createError("string.alphanum",{value:e},t,n)}))},_class.prototype.token=function token(){return this._test("token",void 0,(function(e,t,n){return/^\w+$/.test(e)?e:this.createError("string.token",{value:e},t,n)}))},_class.prototype.email=function email(e){return e&&(a.assert("object"===("undefined"===typeof e?"undefined":r(e)),"email options must be an object"),a.assert("undefined"===typeof e.checkDNS,"checkDNS option is not supported"),a.assert("undefined"===typeof e.tldWhitelist||"object"===r(e.tldWhitelist),"tldWhitelist must be an array or object"),a.assert("undefined"===typeof e.minDomainAtoms||Number.isSafeInteger(e.minDomainAtoms)&&e.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),a.assert("undefined"===typeof e.errorLevel||"boolean"===typeof e.errorLevel||Number.isSafeInteger(e.errorLevel)&&e.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",e,(function(t,r,i){o=o||n(19);try{var a=o.validate(t,e);if(!0===a||0===a)return t}catch(s){}return this.createError("string.email",{value:t},r,i)}))},_class.prototype.ip=function ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d.ipRegex;a.assert("object"===("undefined"===typeof e?"undefined":r(e)),"options must be an object"),e.cidr?(a.assert("string"===typeof e.cidr,"cidr must be a string"),e.cidr=e.cidr.toLowerCase(),a.assert(a.contain(d.cidrPresences,e.cidr),"cidr must be one of "+d.cidrPresences.join(", ")),e.version||"optional"===e.cidr||(t=f.createIpRegex(["ipv4","ipv6","ipvfuture"],e.cidr))):e.cidr="optional";var n=void 0;if(e.version){Array.isArray(e.version)||(e.version=[e.version]),a.assert(e.version.length>=1,"version must have at least 1 version specified"),n=[];for(var i=0;i<e.version.length;++i){var o=e.version[i];a.assert("string"===typeof o,"version at position "+i+" must be a string"),o=o.toLowerCase(),a.assert(f.versions[o],"version at position "+i+" must be one of "+Object.keys(f.versions).join(", ")),n.push(o)}n=a.unique(n),t=f.createIpRegex(n,e.cidr)}return this._test("ip",e,(function(r,i,a){return t.test(r)?r:n?this.createError("string.ipVersion",{value:r,cidr:e.cidr,version:n},i,a):this.createError("string.ip",{value:r,cidr:e.cidr},i,a)}))},_class.prototype.uri=function uri(e){var t="",n=!1,i=!1,o=d.uriRegex;if(e){if(a.assert("object"===("undefined"===typeof e?"undefined":r(e)),"options must be an object"),e.scheme){a.assert(e.scheme instanceof RegExp||"string"===typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(e.scheme)||(e.scheme=[e.scheme]),a.assert(e.scheme.length>=1,"scheme must have at least 1 scheme specified");for(var s=0;s<e.scheme.length;++s){var u=e.scheme[s];a.assert(u instanceof RegExp||"string"===typeof u,"scheme at position "+s+" must be a RegExp or String"),t+=t?"|":"",u instanceof RegExp?t+=u.source:(a.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(u),"scheme at position "+s+" must be a valid scheme"),t+=a.escapeRegex(u))}}e.allowRelative&&(n=!0),e.relativeOnly&&(i=!0)}return(t||n||i)&&(o=c.createUriRegex(t,n,i)),this._test("uri",e,(function(e,n,r){return o.test(e)?e:i?this.createError("string.uriRelativeOnly",{value:e},n,r):t?this.createError("string.uriCustomScheme",{scheme:t,value:e},n,r):this.createError("string.uri",{value:e},n,r)}))},_class.prototype.isoDate=function isoDate(){return this._test("isoDate",void 0,(function(e,t,n){if(l._isIsoDate(e)){if(!n.convert)return e;var r=new Date(e);if(!isNaN(r.getTime()))return r.toISOString()}return this.createError("string.isoDate",{value:e},t,n)}))},_class.prototype.guid=function guid(e){var t="";if(e&&e.version){Array.isArray(e.version)||(e.version=[e.version]),a.assert(e.version.length>=1,"version must have at least 1 valid version specified");for(var n=new Set,r=0;r<e.version.length;++r){var i=e.version[r];a.assert("string"===typeof i,"version at position "+r+" must be a string"),i=i.toLowerCase();var o=d.guidVersions[i];a.assert(o,"version at position "+r+" must be one of "+Object.keys(d.guidVersions).join(", ")),a.assert(!n.has(o),"version at position "+r+" must not be a duplicate."),t+=o,n.add(o)}}var s=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?["+(t||"0-9A-F")+"][0-9A-F]{3}\\2?["+(t?"89AB":"0-9A-F")+"][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$","i");return this._test("guid",e,(function(e,t,n){var r=s.exec(e);return r?d.guidBrackets[r[1]]!==r[r.length-1]?this.createError("string.guid",{value:e},t,n):e:this.createError("string.guid",{value:e},t,n)}))},_class.prototype.hex=function hex(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assert("object"===("undefined"===typeof e?"undefined":r(e)),"hex options must be an object"),a.assert("undefined"===typeof e.byteAligned||"boolean"===typeof e.byteAligned,"byteAligned must be boolean");var t=!0===e.byteAligned,n=/^[a-f0-9]+$/i,i=this._test("hex",n,(function(e,r,i){return n.test(e)?t&&e.length%2!==0?this.createError("string.hexAlign",{value:e},r,i):e:this.createError("string.hex",{value:e},r,i)}));return t&&(i._flags.byteAligned=!0),i},_class.prototype.base64=function base64(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assert("object"===("undefined"===typeof e?"undefined":r(e)),"base64 options must be an object"),a.assert("undefined"===typeof e.paddingRequired||"boolean"===typeof e.paddingRequired,"paddingRequired must be boolean");var t=!1===e.paddingRequired?e.paddingRequired:e.paddingRequired||!0,n=t?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",n,(function(e,t,r){return n.test(e)?e:this.createError("string.base64",{value:e},t,r)}))},_class.prototype.hostname=function hostname(){var e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,(function(t,n,r){return t.length<=255&&e.test(t)||i.isIPv6(t)?t:this.createError("string.hostname",{value:t},n,r)}))},_class.prototype.normalize=function normalize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";a.assert(a.contain(d.normalizationForms,e),"normalization form must be one of "+d.normalizationForms.join(", "));var t=this._test("normalize",e,(function(t,n,r){return r.convert||t===t.normalize(e)?t:this.createError("string.normalize",{value:t,form:e},n,r)}));return t._flags.normalize=e,t},_class.prototype.lowercase=function lowercase(){var e=this._test("lowercase",void 0,(function(e,t,n){return n.convert||e===e.toLocaleLowerCase()?e:this.createError("string.lowercase",{value:e},t,n)}));return e._flags.case="lower",e},_class.prototype.uppercase=function uppercase(){var e=this._test("uppercase",void 0,(function(e,t,n){return n.convert||e===e.toLocaleUpperCase()?e:this.createError("string.uppercase",{value:e},t,n)}));return e._flags.case="upper",e},_class.prototype.trim=function trim(){var e=this._test("trim",void 0,(function(e,t,n){return n.convert||e===e.trim()?e:this.createError("string.trim",{value:e},t,n)}));return e._flags.trim=!0,e},_class.prototype.replace=function replace(e,t){"string"===typeof e&&(e=new RegExp(a.escapeRegex(e),"g")),a.assert(e instanceof RegExp,"pattern must be a RegExp"),a.assert("string"===typeof t,"replacement must be a String");var n=this.clone();return n._inner.replacements||(n._inner.replacements=[]),n._inner.replacements.push({pattern:e,replacement:t}),n},_class.prototype.truncate=function truncate(e){var t=void 0===e||!!e;if(this._flags.truncate===t)return this;var n=this.clone();return n._flags.truncate=t,n},_class}(s),d.compare=function(e,n){return function(r,i){var o=u.isRef(r);return a.assert(Number.isSafeInteger(r)&&r>=0||o,"limit must be a positive integer or reference"),a.assert(!i||t.isEncoding(i),"Invalid encoding:",i),this._test(e,r,(function(t,a,s){var u=void 0;if(o){if(u=r(a.reference||a.parent,s),!Number.isSafeInteger(u))return this.createError("string.ref",{ref:r.key},a,s)}else u=r;return n(t,u,i)?t:this.createError("string."+e,{limit:u,value:t,encoding:i},a,s)}))}},d.String.prototype.min=d.compare("min",(function(e,n,r){return(r?t.byteLength(e,r):e.length)>=n})),d.String.prototype.max=d.compare("max",(function(e,n,r){return(r?t.byteLength(e,r):e.length)<=n})),d.String.prototype.length=d.compare("length",(function(e,n,r){return(r?t.byteLength(e,r):e.length)===n})),d.String.prototype.uuid=d.String.prototype.guid,e.exports=new d.String}).call(t,n(3).Buffer)},function(e,t,n){"use strict";var r=n(14),i={Ip:{cidrs:{ipv4:{required:"\\/(?:"+r.ipv4Cidr+")",optional:"(?:\\/(?:"+r.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+r.ipv6Cidr,optional:"(?:\\/"+r.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+r.ipv6Cidr,optional:"(?:\\/"+r.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:r.IPv4address,ipv6:r.IPv6address,ipvfuture:r.IPvFuture}}};i.Ip.createIpRegex=function(e,t){for(var n=void 0,r=0;r<e.length;++r){var a=e[r];n?n+="|"+i.Ip.versions[a]+i.Ip.cidrs[a][t]:n="^(?:"+i.Ip.versions[a]+i.Ip.cidrs[a][t]}return new RegExp(n+")$")},e.exports=i.Ip},function(e,t,n){"use strict";var r=n(14),i={Uri:{createUriRegex:function createUriRegex(e,t,n){var i=r.scheme,a=void 0;if(n)a="(?:"+r.relativeRef+")";else{e&&(i="(?:"+e+")");var o="(?:"+i+":"+r.hierPart+")";a=t?"(?:"+o+"|"+r.relativeRef+")":o}return new RegExp("^"+a+"(?:\\?"+r.query+")?(?:#"+r.fragment+")?$")}}};e.exports=i.Uri},function(e,t,n){"use strict";var r=n(0),i={};e.exports=i.Topo=function(){this._items=[],this.nodes=[]},i.Topo.prototype.add=function(e,t){var n=this,i=[].concat((t=t||{}).before||[]),a=[].concat(t.after||[]),o=t.group||"?",s=t.sort||0;r.assert(-1===i.indexOf(o),"Item cannot come before itself:",o),r.assert(-1===i.indexOf("?"),"Item cannot come before unassociated items"),r.assert(-1===a.indexOf(o),"Item cannot come after itself:",o),r.assert(-1===a.indexOf("?"),"Item cannot come after unassociated items"),[].concat(e).forEach((function(e,t){var r={seq:n._items.length,sort:s,before:i,after:a,group:o,node:e};n._items.push(r)}));var u=this._sort();return r.assert(!u,"item","?"!==o?"added into group "+o:"","created a dependencies error"),this.nodes},i.Topo.prototype.merge=function(e){e=[].concat(e);for(var t=0;t<e.length;++t){var n=e[t];if(n)for(var a=0;a<n._items.length;++a){var o=r.shallow(n._items[a]);this._items.push(o)}}this._items.sort(i.mergeSort);for(var s=0;s<this._items.length;++s)this._items[s].seq=s;var u=this._sort();return r.assert(!u,"merge created a dependencies error"),this.nodes},i.mergeSort=function(e,t){return e.sort===t.sort?0:e.sort<t.sort?-1:1},i.Topo.prototype._sort=function(){for(var e={},t=Object.create(null),n=Object.create(null),r=0;r<this._items.length;++r){var i=this._items[r],a=i.seq,o=i.group;n[o]=n[o]||[],n[o].push(a),e[a]=i.before;for(var s=i.after,u=0;u<s.length;++u)t[s[u]]=(t[s[u]]||[]).concat(a)}for(var l=Object.keys(e),c=0;c<l.length;++c){for(var f=l[c],d=[],h=Object.keys(e[f]),p=0;p<h.length;++p){var g=e[f][h[p]];n[g]=n[g]||[];for(var m=0;m<n[g].length;++m)d.push(n[g][m])}e[f]=d}for(var v=Object.keys(t),y=0;y<v.length;++y){var _=v[y];if(n[_])for(var b=0;b<n[_].length;++b){var x=n[_][b];e[x]=e[x].concat(t[_])}}var w=void 0,k={};l=Object.keys(e);for(var S=0;S<l.length;++S){var E=l[S];w=e[E];for(var T=0;T<w.length;++T)k[w[T]]=(k[w[T]]||[]).concat(E)}for(var C={},O=[],A=0;A<this._items.length;++A){var R=A;if(k[A]){R=null;for(var D=0;D<this._items.length;++D)if(!0!==C[D]){k[D]||(k[D]=[]);for(var P=k[D].length,M=0,j=0;j<P;++j)C[k[D][j]]&&++M;if(M===P){R=D;break}}}null!==R&&(C[R]=!0,O.push(R))}if(O.length!==this._items.length)return new Error("Invalid dependencies");for(var F={},I=0;I<this._items.length;++I){var L=this._items[I];F[L.seq]=L}var N=[];this._items=O.map((function(e){var t=F[e];return N.push(t.node),t})),this.nodes=N}},function(e,t,n){"use strict";var r=n(8);e.exports=r},function(e,t,n){"use strict";t.byteLength=function byteLength(e){return 3*e.length/4-placeHoldersCount(e)},t.toByteArray=function toByteArray(e){var t,n,r,o,s,u=e.length;o=placeHoldersCount(e),s=new a(3*u/4-o),n=o>0?u-4:u;var l=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;2===o?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[l++]=255&r):1===o&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r);return s},t.fromByteArray=function fromByteArray(e){for(var t,n=e.length,i=n%3,a="",o=[],s=0,u=n-i;s<u;s+=16383)o.push(encodeChunk(e,s,s+16383>u?u:s+16383));1===i?(t=e[n-1],a+=r[t>>2],a+=r[t<<4&63],a+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],a+=r[t>>10],a+=r[t>>4&63],a+=r[t<<2&63],a+="=");return o.push(a),o.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function placeHoldersCount(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function encodeChunk(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports={_args:[["joi@13.4.0","/Users/jeff/projects/joi-browser"]],_development:!0,_from:"joi@13.4.0",_id:"joi@13.4.0",_inBundle:!1,_integrity:"sha512-JuK4GjEu6j7zr9FuVe2MAseZ6si/8/HaY0qMAejfDFHp7jcH4OKE937mIHM5VT4xDS0q7lpQbszbxKV9rm0yUg==",_location:"/joi",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"joi@13.4.0",name:"joi",escapedName:"joi",rawSpec:"13.4.0",saveSpec:null,fetchSpec:"13.4.0"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/joi/-/joi-13.4.0.tgz",_spec:"13.4.0",_where:"/Users/jeff/projects/joi-browser",bugs:{url:"https://github.com/hapijs/joi/issues"},dependencies:{hoek:"5.x.x",isemail:"3.x.x",topo:"3.x.x"},description:"Object schema validation",devDependencies:{code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x"},engines:{node:">=8.9.0"},homepage:"https://github.com/hapijs/joi",keywords:["hapi","schema","validation"],license:"BSD-3-Clause",main:"lib/index.js",name:"joi",repository:{type:"git",url:"git://github.com/hapijs/joi.git"},scripts:{test:"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md"},version:"13.4.0"}},function(e,t,n){(function(e){function normalizeArray(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function splitPath(e){return n.exec(e).slice(1)};function filter(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var i=r>=0?arguments[r]:e.cwd();if("string"!==typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,n="/"===i.charAt(0))}return(n?"/":"")+(t=normalizeArray(filter(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var n=t.isAbsolute(e),r="/"===i(e,-1);return(e=normalizeArray(filter(e.split("/"),(function(e){return!!e})),!n).join("/"))||n||(e="."),e&&r&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(filter(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function trim(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=trim(e.split("/")),i=trim(n.split("/")),a=Math.min(r.length,i.length),o=a,s=0;s<a;s++)if(r[s]!==i[s]){o=s;break}var u=[];for(s=o;s<r.length;s++)u.push("..");return(u=u.concat(i.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=r(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},t.basename=function(e,t){var n=r(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return r(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(7))},function(e,t,n){(function(e,r){var i;!function(a){"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var o="object"==typeof r&&r;o.global!==o&&o.window!==o&&o.self;var s,u=2147483647,l=36,c=1,f=26,d=38,h=700,p=72,g=128,m="-",v=/^xn--/,y=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-c,w=Math.floor,k=String.fromCharCode;function error(e){throw new RangeError(b[e])}function map(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function mapDomain(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+map((e=e.replace(_,".")).split("."),t).join(".")}function ucs2decode(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function ucs2encode(e){return map(e,(function(e){var t="";return e>65535&&(t+=k((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=k(e)})).join("")}function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function adapt(e,t,n){var r=0;for(e=n?w(e/h):e>>1,e+=w(e/t);e>x*f>>1;r+=l)e=w(e/x);return w(r+(x+1)*e/(e+d))}function decode(e){var t,n,r,i,a,o,s,d,h,v,y,_=[],b=e.length,x=0,k=g,S=p;for((n=e.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&error("not-basic"),_.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(a=x,o=1,s=l;i>=b&&error("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||d>w((u-x)/o))&&error("overflow"),x+=d*o,!(d<(h=s<=S?c:s>=S+f?f:s-S));s+=l)o>w(u/(v=l-h))&&error("overflow"),o*=v;S=adapt(x-a,t=_.length+1,0==a),w(x/t)>u-k&&error("overflow"),k+=w(x/t),x%=t,_.splice(x++,0,k)}return ucs2encode(_)}function encode(e){var t,n,r,i,a,o,s,d,h,v,y,_,b,x,S,E=[];for(_=(e=ucs2decode(e)).length,t=g,n=0,a=p,o=0;o<_;++o)(y=e[o])<128&&E.push(k(y));for(r=i=E.length,i&&E.push(m);r<_;){for(s=u,o=0;o<_;++o)(y=e[o])>=t&&y<s&&(s=y);for(s-t>w((u-n)/(b=r+1))&&error("overflow"),n+=(s-t)*b,t=s,o=0;o<_;++o)if((y=e[o])<t&&++n>u&&error("overflow"),y==t){for(d=n,h=l;!(d<(v=h<=a?c:h>=a+f?f:h-a));h+=l)S=d-v,x=l-v,E.push(k(digitToBasic(v+S%x,0))),d=w(S/x);E.push(k(digitToBasic(d,0))),a=adapt(n,b,r==i),n=0,++r}++n,++t}return E.join("")}s={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function toASCII(e){return mapDomain(e,(function(e){return y.test(e)?"xn--"+encode(e):e}))},toUnicode:function toUnicode(e){return mapDomain(e,(function(e){return v.test(e)?decode(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(t,n(41)(e),n(5))},function(e,t){"function"===typeof Object.create?e.exports=function inherits(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function inherits(e,t){e.super_=t;var n=function TempCtor(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function isBuffer(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i}}),e.webpackPolyfill=1),e}}])}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=t.configure=void 0;var r=_interopRequireDefault(n(61)),i=_interopRequireDefault(n(25)),a=_interopRequireDefault(n(26)),o=t.configure=function(){var e=(0,a.default)(i.default.mark((function _callee(e){var t;return i.default.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:t={baseUrl:c.ATHENA_URL_ROOT,jwt:!1,parse:null},e&&(t.token="JWT "+e),d.configure(t);case 3:case"end":return n.stop()}}),_callee,this)})));return function configure(t){return e.apply(this,arguments)}}(),s=t.post=function(){var e=(0,a.default)(i.default.mark((function _callee2(e,t){return i.default.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ensureInit();case 2:return n.abrupt("return",new r.default((function(n,r){d.post(e,{body:t,json:!0},(0,l.default)(n,r))})));case 3:case"end":return n.stop()}}),_callee2,this)})));return function post(t,n){return e.apply(this,arguments)}}();t.postJsonRpcPayload=function postJsonRpcPayload(e,t){return s(e,t)};var u=_interopRequireDefault(n(106)),l=_interopRequireDefault(n(70)),c=n(110);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var f,d=(0,u.default)();function ensureInit(){return f||(f=o()),f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshAccessToken=void 0;var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26)),a=(t.refreshAccessToken=function(){var e=(0,i.default)(r.default.mark((function _callee(e,t){var n,i;return r.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.postForm("v2/auth/",{code:e,redirect_uri:t});case 2:if(n=r.sent,null==(i=JSON.parse(n)).access_token){r.next=10;break}return r.next=7,a.configure(i.access_token);case 7:return r.abrupt("return",i.access_token);case 10:if(void 0===i.response){r.next=14;break}throw new Error("Could not exchange oauth code for access token: response "+i.response.status);case 14:throw new Error("Could not exchange oauth code for access token: response "+n);case 15:case"end":return r.stop()}}),_callee,this)})));return function refreshAccessToken(t,n){return e.apply(this,arguments)}}(),function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34)));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchLocation=void 0;var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(324)),a=_interopRequireDefault(n(26));t.fetchLocation=function(){var e=(0,a.default)(r.default.mark((function _callee(e){var t,n;return r.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t="v1/devices/"+e+"/location",r.next=3,o.get(t);case 3:if(void 0===(n=r.sent)||void 0!==n.error){r.next=8;break}return r.abrupt("return",n);case 8:throw Error("Could not fetch device location: "+(0,i.default)(n));case 9:case"end":return r.stop()}}),_callee,this)})));return function fetchLocation(t){return e.apply(this,arguments)}}();t.listDevices=function listDevices(){return o.get("v1/me/devices/")},t.setDeviceAlias=function setDeviceAlias(e,t){return o.patch("v1/devices/"+e+"/",{alias:t})},t.setDeviceVehicleId=function setDeviceVehicleId(e,t){return o.patch("v1/devices/"+e+"/",{vehicle_id:t})},t.grantDeviceReadPermission=function grantDeviceReadPermission(e,t){return o.post("v1/devices/"+e+"/add_user",{email:t})},t.removeDeviceReadPermission=function removeDeviceReadPermission(e,t){return o.post("v1/devices/"+e+"/del_user",{email:t})},t.fetchVehicles=function fetchVehicles(e){var t="v1/vehicles/"+e;return o.get(t)},t.fetchDevice=function fetchDevice(e){var t="v1.1/devices/"+e+"/";return o.get(t)},t.pilotPair=function pilotPair(e,t,n){return o.postForm("v2/pilotpair/",{imei:e,serial:t,pair_token:n})},t.fetchDeviceStats=function fetchDeviceStats(e){return o.get("v1/devices/"+e+"/stats")},t.unpair=function unpair(e){return o.post("v1/devices/"+e+"/unpair")};var o=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){e.exports={default:n(325),__esModule:!0}},function(e,t,n){var r=n(18),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function stringify(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26));t.default=function routeApi(e){var t=(0,o.default)(),n=e+"/";return t.configure({baseUrl:n,parse:null}),{getCoords:function(){var e=(0,i.default)(r.default.mark((function _callee(){var e;return r.default.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.get("route.coords");case 2:return e=n.sent,n.abrupt("return",JSON.parse(e));case 4:case"end":return n.stop()}}),_callee,this)})));return function getCoords(){return e.apply(this,arguments)}}(),getJpegUrl:function getJpegUrl(e){return(0,a.default)(n,"sec"+e.toString()+".jpg")}}};var a=_interopRequireDefault(n(109)),o=_interopRequireDefault(n(156));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchRoutes=void 0;var r=_interopRequireDefault(n(328)),i=_interopRequireDefault(n(155)),a=_interopRequireDefault(n(25)),o=_interopRequireDefault(n(26));t.fetchRoutes=function(){var e=(0,o.default)(a.default.mark((function _callee(e,t,n){var r;return a.default.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,getSegmentMetadata(t,n,e);case 2:return r=i.sent,r=parseSegmentMetadata(t,n,r),i.abrupt("return",segmentsFromMetadata(r).reverse());case 5:case"end":return i.stop()}}),_callee,this)})));return function fetchRoutes(t,n,r){return e.apply(this,arguments)}}();t.getSegmentMetadata=getSegmentMetadata,t.getRouteInfo=function getRouteInfo(e){return s.get("v1/route/"+e+"/")},t.getShareSignature=function getShareSignature(e){return s.get("v1/route/"+e+"/share_signature")},t.getRouteSegments=function getRouteSegments(e){return s.get("v1/route/"+e+"/segments")},t.listRoutes=function listRoutes(e,t,n){var r={limit:t};"undefined"!==typeof n&&(r.createdAfter=n);return s.get("v1/devices/"+e+"/routes",r)};var s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=6e4;function getSegmentMetadata(e,t,n){return s.get("v1/devices/"+n+"/segments",{from:e,to:t})}function parseSegmentMetadata(e,t,n){var r={};return n.map((function(t){if(t.offset=Math.round(t.start_time_utc_millis)-e,r[t.canonical_route_name])t.routeOffset=r[t.canonical_route_name];else{var n=Number(t.canonical_name.split("--")[2]);t.segment=n,r[t.canonical_route_name]=n>0?t.offset-u*n:t.offset,t.routeOffset=r[t.canonical_route_name]}return t.offset,t.duration=Math.round(t.end_time_utc_millis-t.start_time_utc_millis),t}))}function segmentsFromMetadata(e){var t=null,n=null,a=[];return e.forEach((function(e){if(e.url&&40===e.proc_log){var r=e.proc_dcamera>=0,o=40===e.proc_dcamera,s=40===e.proc_camera;if(s&&null===n&&(n=e.offset),e.start_time_utc_millis,!t||t.route!==e.canonical_route_name){t&&finishSegment(t);var l=e.url,c=l.split("/");(0,i.default)(Number(c.pop()))&&(l=c.join("/")),t={dongleId:e.dongle_id,offset:e.offset-e.segment*u,route:e.canonical_route_name,startTime:e.start_time_utc_millis,startCoord:[e.start_lng,e.start_lat],duration:0,segments:0,url:l.replace("chffrprivate.blob.core.windows.net","chffrprivate-vzn.azureedge.net"),events:[],videoAvailableBetweenOffsets:[],hasVideo:s,deviceType:e.devicetype,hpgps:e.hpgps,hasDriverCamera:r,hasDriverCameraStream:o,locStart:"",locEnd:"",distanceMiles:0,cameraStreamSegCount:0,driverCameraStreamSegCount:0},a.push(t)}s||null===n||(t.videoAvailableBetweenOffsets.push([n,e.offset]),n=null),t.hasVideo=t.hasVideo||s,t.hasDriverCamera=t.hasDriverCamera||r,t.hasDriverCameraStream=t.hasDriverCameraStream||o,t.hpgps=t.hpgps||e.hpgps,t.duration=e.offset-t.offset+e.duration,t.segments=Math.max(t.segments,Number(e.canonical_name.split("--").pop())+1),t.events=t.events.concat(e.events),t.endCoord=[e.end_lng,e.end_lat],t.distanceMiles+=e.length,t.cameraStreamSegCount+=Math.floor(s),t.driverCameraStreamSegCount+=Math.floor(o)}})),t&&finishSegment(t),a;function finishSegment(e){if(e.hasVideo){var t=e.videoAvailableBetweenOffsets[e.videoAvailableBetweenOffsets.length-1]||[e.offset,e.offset+e.duration];e.videoAvailableBetweenOffsets=[].concat((0,r.default)(e.videoAvailableBetweenOffsets.slice(0,e.videoAvailableBetweenOffsets.length-1)),[[t[0],e.offset+e.duration]])}}}},function(e,t,n){"use strict";t.__esModule=!0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(329));t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}},function(e,t,n){e.exports={default:n(330),__esModule:!0}},function(e,t,n){n(51),n(331),e.exports=n(18).Array.from},function(e,t,n){"use strict";var r=n(43),i=n(27),a=n(101),o=n(139),s=n(140),u=n(97),l=n(332),c=n(103);i(i.S+i.F*!n(145)((function(e){Array.from(e)})),"Array",{from:function from(e){var t,n,i,f,d=a(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(d);if(m&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(n=new h(t=u(d.length));t>v;v++)l(n,v,m?g(d[v],v):d[v]);else for(f=y.call(d),n=new h;!(i=f.next()).done;v++)l(n,v,m?o(f,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(33),i=n(53);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLeaderboard=function getLeaderboard(){return r.get("v2/leaderboard/")};var r=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26)),a=function(){var e=(0,i.default)(r.default.mark((function _callee(e,t,n){var i,a;return r.default.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(!u[t]){r.next=2;break}return r.abrupt("return",u[t]);case 2:return i="v1/route/"+t+"/"+e,void 0!==n&&(i+="?"+o.default.stringify(n)),r.next=6,s.get(i);case 6:return a=r.sent,u[t]=a,setTimeout((function(){delete u[t]}),27e5),r.abrupt("return",u[t]);case 10:case"end":return r.stop()}}),_callee,this)})));return function getCached(t,n,r){return e.apply(this,arguments)}}();t.getRouteFiles=function getRouteFiles(e){return a("files",e)},t.getLogUrls=function getLogUrls(e,t){return a("log_urls",e,t)};var o=_interopRequireDefault(n(105)),s=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchMakes=function fetchMakes(){return r.get("v1/vehicles/makes/")},t.fetchModels=function fetchModels(e){return r.get("v1/vehicles/makes/"+e)},t.fetchVehicle=function fetchVehicle(e){return r.get("v1/vehicles/"+e.toString())};var r=function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(34))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(157));t.default=function videoApi(e,t){t||(t=o.VIDEO_HOST);var n=e.split("/").slice(5,7),s=(0,r.default)(n,2),u=s[0],l=s[1],c=(0,a.default)(),f=t+"/hls/"+u+"/"+l+"/";return c.configure({baseUrl:f,parse:null}),{getRearCameraStreamIndexUrl:function getRearCameraStreamIndexUrl(){return(0,i.default)(f,"index.m3u8")},getFrontCameraStreamIndexUrl:function getFrontCameraStreamIndexUrl(){return(0,i.default)(f,"dcamera/index.m3u8")},getRearCameraStreamIndex:function getRearCameraStreamIndex(){return c.get("index.m3u8")},getFrontCameraStreamIndexPath:function getFrontCameraStreamIndexPath(){return c.get("dcamera/index.m3u8")}}};var i=_interopRequireDefault(n(109)),a=_interopRequireDefault(n(156)),o=n(110);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){e.exports={default:n(338),__esModule:!0}},function(e,t,n){n(66),n(51),e.exports=n(339)},function(e,t,n){var r=n(102),i=n(23)("iterator"),a=n(44);e.exports=n(18).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(341),__esModule:!0}},function(e,t,n){n(66),n(51),e.exports=n(342)},function(e,t,n){var r=n(28),i=n(103);e.exports=n(18).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(25)),i=_interopRequireDefault(n(26)),a=_interopRequireDefault(n(112)),o=_interopRequireDefault(n(158)),s=n(159),u=_interopRequireDefault(n(160)),l=n(161),c=(_interopRequireDefault(n(113)),_interopRequireDefault(n(162)));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var f=(0,u.default)(),d=(0,u.default)(),h=(0,u.default)(),p=function(){function Panda(e,t){(0,a.default)(this,Panda),this.usb=t,this.device=null,this.onError=(0,l.partial)(f.listen,this),this.onConnect=(0,l.partial)(d.listen,this),this.onDisconnect=(0,l.partial)(h.listen,this)}return(0,o.default)(Panda,[{key:"connect",value:function(){var e=(0,i.default)(r.default.mark((function _callee(){return r.default.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.usb.requestDevice({filters:[{vendorId:48042}]});case 2:return this.device=e.sent,e.next=5,this.device.open();case 5:return e.next=7,this.device.selectConfiguration(1);case 7:return e.next=9,this.device.claimInterface(0);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),_callee,this)})));return function connect(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,i.default)(r.default.mark((function _callee2(){return r.default.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(this.device){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.device.close();case 4:return this.device=null,e.abrupt("return",!0);case 6:case"end":return e.stop()}}),_callee2,this)})));return function disconnect(){return e.apply(this,arguments)}}()},{key:"vendorRequest",value:function(){var t=(0,i.default)(r.default.mark((function _callee3(t,n){var i,a;return r.default.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return i={requestType:"vendor",recipient:"device",request:t.request,value:t.value,index:t.index},r.next=3,this.device.controlTransferIn(i,n);case 3:return a=r.sent,a={data:e.from(a.data.buffer),status:a.status},r.abrupt("return",a);case 6:case"end":return r.stop()}}),_callee3,this)})));return function vendorRequest(e,n){return t.apply(this,arguments)}}()},{key:"vendorWrite",value:function(){var e=(0,i.default)(r.default.mark((function _callee4(e,t){var n;return r.default.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:return n={requestType:"vendor",recipient:"device",request:e.request,value:e.value,index:e.index},r.next=3,this.device.controlTransferOut(n,t);case 3:return r.abrupt("return",!0);case 4:case"end":return r.stop()}}),_callee4,this)})));return function vendorWrite(t,n){return e.apply(this,arguments)}}()},{key:"nextFakeMessage",value:function(){var e=(0,i.default)(r.default.mark((function _callee5(){return r.default.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)(10);case 2:return e.abrupt("return",(0,s.packCAN)({address:0,busTime:~~(65e3*Math.random()),data:"".padEnd(16,"0"),bus:0}));case 3:case"end":return e.stop()}}),_callee5,this)})));return function nextFakeMessage(){return e.apply(this,arguments)}}()},{key:"nextMessage",value:function(){var e=(0,i.default)(r.default.mark((function _callee6(){var e,t;return r.default.wrap((function _callee6$(n){for(;;)switch(n.prev=n.next){case 0:e=null,t=0;case 2:if(null!==e){n.next=17;break}return n.prev=3,n.next=6,this.device.transferIn(1,4096);case 6:e=n.sent,n.next=15;break;case 9:return n.prev=9,n.t0=n.catch(3),console.warn("can_recv failed, retrying"),t=Math.min(++t,10),n.next=15,(0,c.default)(100*t);case 15:n.next=2;break;case 17:return n.abrupt("return",e.data.buffer);case 18:case"end":return n.stop()}}),_callee6,this,[[3,9]])})));return function nextMessage(){return e.apply(this,arguments)}}()}]),Panda}();t.default=p}).call(this,n(20).Buffer)},function(e,t,n){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function toByteArray(e){var t,n,r=getLens(e),o=r[0],s=r[1],u=new a(function _byteLength(e,t,n){return 3*(t+n)/4-n}(0,o,s)),l=0,c=s>0?o-4:o;for(n=0;n<c;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function fromByteArray(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(encodeChunk(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports={default:n(348),__esModule:!0}},function(e,t,n){n(349);var r=n(18).Object;e.exports=function defineProperty(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(27);r(r.S+r.F*!n(36),"Object",{defineProperty:n(33).f})},function(e,t){function ListItem(e){this.fn=e,this.deleted=!1}e.exports=function Event(){var e=[];return{broadcast:function broadcast(t){for(var n=e.slice(),r=0;r<n.length;r++)n[r].deleted||n[r].fn(t)},listen:function event(t){return e.push(new ListItem(t)),function removeListener(){for(var n=0;n<e.length;n++)if(e[n].fn===t){e[n].deleted=!0,e.splice(n,1);break}}}}}},function(e,t,n){var r=n(352);e.exports=function createStore(){var e={};return function(t){if(("object"!==typeof t||null===t)&&"function"!==typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:r(t,e)}}},function(e,t){e.exports=function hiddenStore(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function value(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}},function(e,t,n){"use strict";var r=n(69);function forEach(e,t){return Object.keys(e()).forEach(t)}e.exports=function createHashListener(e){return function listenToHash(t,n){var i=r(t);function listenKey(r){e(t[r],n)}forEach(t,listenKey),t((function onChange(){forEach(t,(function(e){i[e]!==t[e]&&listenKey(e)})),i=r(t)}))}}},function(e,t,n){"use strict";var r=n(69);e.exports=function createArrayListener(e){return function listenToArray(t,n){var i=r(t._list);t.forEach((function(t){e(t,n)})),t((function onChange(a){if(!t.getLength())return;a._diff.forEach((function(r){for(var a=r[0];a<r.length;a++)i[a]!==t.get(a)&&t.get(a)&&e(t.get(a),n)})),i=r(t._list)}))}}},function(e,t,n){"use strict";t.__esModule=!0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(163));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,r.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){e.exports={default:n(357),__esModule:!0}},function(e,t,n){n(51),n(66),e.exports=n(114).f("iterator")},function(e,t,n){e.exports={default:n(359),__esModule:!0}},function(e,t,n){n(360),n(133),n(365),n(366),e.exports=n(18).Symbol},function(e,t,n){"use strict";var r=n(21),i=n(40),a=n(36),o=n(27),s=n(136),u=n(361).KEY,l=n(63),c=n(99),f=n(65),d=n(64),h=n(23),p=n(114),g=n(115),m=n(362),v=n(363),y=n(28),_=n(35),b=n(101),x=n(45),w=n(94),k=n(53),S=n(95),E=n(364),T=n(166),C=n(164),O=n(33),A=n(96),R=T.f,D=O.f,P=E.f,M=r.Symbol,j=r.JSON,F=j&&j.stringify,I=h("_hidden"),L=h("toPrimitive"),N={}.propertyIsEnumerable,B=c("symbol-registry"),U=c("symbols"),z=c("op-symbols"),q=Object.prototype,W="function"==typeof M&&!!C.f,G=r.QObject,H=!G||!G.prototype||!G.prototype.findChild,V=a&&l((function(){return 7!=S(D({},"a",{get:function get(){return D(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(q,t);r&&delete q[t],D(e,t,n),r&&e!==q&&D(q,t,r)}:D,Y=function wrap(e){var t=U[e]=S(M.prototype);return t._k=e,t},$=W&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},X=function defineProperty(e,t,n){return e===q&&X(z,t,n),y(e),t=w(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),n=S(n,{enumerable:k(0,!1)})):(i(e,I)||D(e,I,k(1,{})),e[I][t]=!0),V(e,t,n)):D(e,t,n)},K=function defineProperties(e,t){y(e);for(var n,r=m(t=x(t)),i=0,a=r.length;a>i;)X(e,n=r[i++],t[n]);return e},J=function propertyIsEnumerable(e){var t=N.call(this,e=w(e,!0));return!(this===q&&i(U,e)&&!i(z,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,I)&&this[I][e])||t)},Z=function getOwnPropertyDescriptor(e,t){if(e=x(e),t=w(t,!0),e!==q||!i(U,t)||i(z,t)){var n=R(e,t);return!n||!i(U,t)||i(e,I)&&e[I][t]||(n.enumerable=!0),n}},Q=function getOwnPropertyNames(e){for(var t,n=P(x(e)),r=[],a=0;n.length>a;)i(U,t=n[a++])||t==I||t==u||r.push(t);return r},ee=function getOwnPropertySymbols(e){for(var t,n=e===q,r=P(n?z:x(e)),a=[],o=0;r.length>o;)!i(U,t=r[o++])||n&&!i(q,t)||a.push(U[t]);return a};W||(s((M=function Symbol(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function $set(t){this===q&&$set.call(z,t),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),V(this,e,k(1,t))};return a&&H&&V(q,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function toString(){return this._k})),T.f=Z,O.f=X,n(165).f=E.f=Q,n(116).f=J,C.f=ee,a&&!n(52)&&s(q,"propertyIsEnumerable",J,!0),p.f=function(e){return Y(h(e))}),o(o.G+o.W+o.F*!W,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var re=A(h.store),ie=0;re.length>ie;)g(re[ie++]);o(o.S+o.F*!W,"Symbol",{for:function _for(e){return i(B,e+="")?B[e]:B[e]=M(e)},keyFor:function keyFor(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function useSetter(){H=!0},useSimple:function useSimple(){H=!1}}),o(o.S+o.F*!W,"Object",{create:function create(e,t){return void 0===t?S(e):K(S(e),t)},defineProperty:X,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var ae=l((function(){C.f(1)}));o(o.S+o.F*ae,"Object",{getOwnPropertySymbols:function getOwnPropertySymbols(e){return C.f(b(e))}}),j&&o(o.S+o.F*(!W||l((function(){var e=M();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))}))),"JSON",{stringify:function stringify(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!$(e))return v(t)||(t=function replacer(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$(t))return t}),r[1]=t,F.apply(j,r)}}),M.prototype[L]||n(39)(M.prototype,L,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(64)("meta"),i=n(35),a=n(40),o=n(33).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(63)((function(){return u(Object.preventExtensions({}))})),c=function setMeta(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function fastKey(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function getWeak(e,t){if(!a(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function onFreeze(e){return l&&f.NEED&&u(e)&&!a(e,r)&&c(e),e}}},function(e,t,n){var r=n(96),i=n(164),a=n(116);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),u=a.f,l=0;s.length>l;)u.call(e,o=s[l++])&&t.push(o);return t}},function(e,t,n){var r=n(54);e.exports=Array.isArray||function isArray(e){return"Array"==r(e)}},function(e,t,n){var r=n(45),i=n(165).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function getOwnPropertyNames(e){return o&&"[object Window]"==a.call(e)?function getWindowNames(e){try{return i(e)}catch(t){return o.slice()}}(e):i(r(e))}},function(e,t,n){n(115)("asyncIterator")},function(e,t,n){n(115)("observable")},function(e,t,n){"use strict";t.__esModule=!0;var r=_interopRequireDefault(n(368)),i=_interopRequireDefault(n(372)),a=_interopRequireDefault(n(163));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,a.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(369),__esModule:!0}},function(e,t,n){n(370),e.exports=n(18).Object.setPrototypeOf},function(e,t,n){var r=n(27);r(r.S,"Object",{setPrototypeOf:n(371).set})},function(e,t,n){var r=n(35),i=n(28),a=function check(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(43)(Function.call,n(166).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function setPrototypeOf(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(373),__esModule:!0}},function(e,t,n){n(374);var r=n(18).Object;e.exports=function create(e,t){return r.create(e,t)}},function(e,t,n){var r=n(27);r(r.S,"Object",{create:n(95)})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(157)),i=_interopRequireDefault(n(25)),a=_interopRequireDefault(n(26)),o=_interopRequireDefault(n(112)),s=_interopRequireDefault(n(158)),u=n(159),l=_interopRequireDefault(n(160)),c=n(161),f=_interopRequireDefault(n(113)),d=_interopRequireDefault(n(376)),h=n(377),p=_interopRequireDefault(n(162));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var g=(0,l.default)(),m=(0,l.default)(),v=(0,l.default)(),y=(0,l.default)(),_=function(){function Panda(e){(0,o.default)(this,Panda),this.onMessage=(0,c.partial)(g.listen,this),this.onError=(0,c.partial)(m.listen,this),this.onConnect=(0,c.partial)(v.listen,this),this.onDisconnect=(0,c.partial)(y.listen,this),this.device=e.device,this.device.onError((0,c.partial)(m.broadcast,this)),this.device.onConnect(this.connectHandler.bind(this)),this.device.onDisconnect(this.disconnectHandler.bind(this)),this.paused=!0,this.messageQueue=[],this.readLoop=this.readLoop.bind(this),this.flushMessageQueue=this.flushMessageQueue.bind(this)}return(0,s.default)(Panda,[{key:"isConnected",value:function isConnected(){return!!this.connected}},{key:"isPaused",value:function isPaused(){return!!this.paused}},{key:"connect",value:function(){var e=(0,a.default)(i.default.mark((function _callee(){var e;return i.default.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isConnected()){t.next=2;break}return t.abrupt("return",this.connected);case 2:return t.next=4,this.device.connect();case 4:return t.next=6,this.getSerialNumber();case 6:return e=t.sent,this.connectHandler(e),t.abrupt("return",e);case 9:case"end":return t.stop()}}),_callee,this)})));return function connect(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,a.default)(i.default.mark((function _callee2(){return i.default.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(this.isConnected()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",this.device.disconnect());case 3:case"end":return e.stop()}}),_callee2,this)})));return function disconnect(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=(0,a.default)(i.default.mark((function _callee3(){return i.default.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect();case 2:return e.abrupt("return",this.unpause());case 3:case"end":return e.stop()}}),_callee3,this)})));return function start(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){var e=(0,a.default)(i.default.mark((function _callee4(){var e;return i.default.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return e=this.isPaused(),this.paused=!0,t.abrupt("return",!e);case 3:case"end":return t.stop()}}),_callee4,this)})));return function pause(){return e.apply(this,arguments)}}()},{key:"resume",value:function(){var e=(0,a.default)(i.default.mark((function _callee5(){return i.default.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.unpause());case 1:case"end":return e.stop()}}),_callee5,this)})));return function resume(){return e.apply(this,arguments)}}()},{key:"unpause",value:function(){var e=(0,a.default)(i.default.mark((function _callee6(){var e;return i.default.wrap((function _callee6$(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.isPaused()){t.next=3;break}return t.abrupt("return",!1);case 3:return this.paused=!1,this.startReading(),t.abrupt("return",e);case 6:case"end":return t.stop()}}),_callee6,this)})));return function unpause(){return e.apply(this,arguments)}}()},{key:"getHealth",value:function(){var e=(0,a.default)(i.default.mark((function _callee7(){var e,t,n,r,a,o,s,u;return i.default.wrap((function _callee7$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.vendorRequest("health",{request:210,value:0,index:0},13);case 2:return e=i.sent,t=e.readUInt32LE(0)/1e3,n=e.readUInt32LE(4)/1e3,r=1===e.readInt8(8),a=1===e.readInt8(9),o=1===e.readInt8(10),s=1===e.readInt8(11),u=1===e.readInt8(12),i.abrupt("return",{voltage:t,current:n,isStarted:r,controlsAreAllowed:a,isGasInterceptorDetector:o,isStartSignalDetected:s,isStartedAlt:u});case 11:case"end":return i.stop()}}),_callee7,this)})));return function getHealth(){return e.apply(this,arguments)}}()},{key:"getDeviceMetadata",value:function(){var e=(0,a.default)(i.default.mark((function _callee8(){var e,t,n;return i.default.wrap((function _callee8$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.vendorRequest("getDeviceMetadata",{request:208,value:0,index:0},32);case 2:return e=r.sent,t=e.slice(0,16),n=e.slice(16,26),e.slice(28),r.abrupt("return",[t.toString(),n.toString()]);case 7:case"end":return r.stop()}}),_callee8,this)})));return function getDeviceMetadata(){return e.apply(this,arguments)}}()},{key:"getSerialNumber",value:function(){var e=(0,a.default)(i.default.mark((function _callee9(){var e,t,n;return i.default.wrap((function _callee9$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getDeviceMetadata();case 2:return e=i.sent,t=(0,r.default)(e,2),n=t[0],t[1],i.abrupt("return",n);case 7:case"end":return i.stop()}}),_callee9,this)})));return function getSerialNumber(){return e.apply(this,arguments)}}()},{key:"getSecret",value:function(){var e=(0,a.default)(i.default.mark((function _callee10(){var e,t,n;return i.default.wrap((function _callee10$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getDeviceMetadata();case 2:return e=i.sent,t=(0,r.default)(e,2),t[0],n=t[1],i.abrupt("return",n);case 7:case"end":return i.stop()}}),_callee10,this)})));return function getSecret(){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=(0,a.default)(i.default.mark((function _callee11(){var e;return i.default.wrap((function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorRequest("getVersion",{request:214,value:0,index:0},64);case 2:return e=t.sent,t.abrupt("return",e.toString());case 4:case"end":return t.stop()}}),_callee11,this)})));return function getVersion(){return e.apply(this,arguments)}}()},{key:"isGrey",value:function(){var e=(0,a.default)(i.default.mark((function _callee12(){var e;return i.default.wrap((function _callee12$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vendorRequest("isGrey",{request:193,value:0,index:0},64);case 2:return e=t.sent,t.abrupt("return",!(!e.length||1!==e[0]));case 4:case"end":return t.stop()}}),_callee12,this)})));return function isGrey(){return e.apply(this,arguments)}}()},{key:"setSafetyMode",value:function(){var e=(0,a.default)(i.default.mark((function _callee13(e){var t;return i.default.wrap((function _callee13$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.vendorWrite("setSafetyMode",{request:220,value:e,index:0});case 2:return t=n.sent,n.abrupt("return",t.toString());case 4:case"end":return n.stop()}}),_callee13,this)})));return function setSafetyMode(t){return e.apply(this,arguments)}}()},{key:"vendorRequest",value:function(){var e=(0,a.default)(i.default.mark((function _callee14(e,t,n){var r;return i.default.wrap((function _callee14$(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,this.device.vendorRequest(t,n);case 3:return r=i.sent,i.abrupt("return",r.data);case 7:throw i.prev=7,i.t0=i.catch(0),m.broadcast(this,{event:"Panda."+e+" failed",error:i.t0}),i.t0;case 11:case"end":return i.stop()}}),_callee14,this,[[0,7]])})));return function vendorRequest(t,n,r){return e.apply(this,arguments)}}()},{key:"vendorWrite",value:function(){var t=(0,a.default)(i.default.mark((function _callee15(t,n,r){var a;return i.default.wrap((function _callee15$(i){for(;;)switch(i.prev=i.next){case 0:return r&&r.length||(r=e.from([])),i.prev=1,i.next=4,this.device.vendorWrite(n,r);case 4:return a=i.sent,i.abrupt("return",a.data);case 8:throw i.prev=8,i.t0=i.catch(1),m.broadcast(this,{event:"Panda."+t+" failed",error:i.t0}),i.t0;case 12:case"end":return i.stop()}}),_callee15,this,[[1,8]])})));return function vendorWrite(e,n,r){return t.apply(this,arguments)}}()},{key:"connectHandler",value:function connectHandler(e){this.connected=e,v.broadcast(this,e)}},{key:"disconnectHandler",value:function disconnectHandler(){var e=this.connected;this.connected=!1,this.paused=!0,y.broadcast(this,e)}},{key:"needsFlushMessageQueue",value:function needsFlushMessageQueue(){var e=this;if(this.needsFlush=!0,this.flushEvent)return this.flushEvent;var t=(0,d.default)(this.flushMessageQueue);return this.flushEvent=function(){d.default.cancel(t),e.flushEvent=!1},this.flushEvent}},{key:"flushMessageQueue",value:function flushMessageQueue(){if(this.flushEvent(),this.needsFlush&&this.messageQueue.length){var e=this.messageQueue;this.messageQueue=[],this.needsFlush=!1,g.broadcast(this,e)}}},{key:"startReading",value:function startReading(){return!!this.isReading||!this.isPaused()&&(this.isReading=!0,void this.readLoop())}},{key:"readLoop",value:function(){var e=(0,a.default)(i.default.mark((function _callee16(){var e,t,n,r;return i.default.wrap((function _callee16$(i){for(;;)switch(i.prev=i.next){case 0:if(!this.isPaused()){i.next=3;break}return this.isReading=!1,i.abrupt("return",!1);case 3:this.isReading=!0,e=0;case 5:if(!(e<5e3)){i.next=20;break}return i.next=8,this.device.nextMessage();case 8:if(t=i.sent,n=(0,f.default)()/1e3,(r=(0,u.unpackCAN)(t)).length){i.next=15;break}return i.next=14,(0,p.default)(1);case 14:return i.abrupt("continue",17);case 15:this.messageQueue.push({time:n,canMessages:r}),this.needsFlushMessageQueue();case 17:++e,i.next=5;break;case 20:this.needsFlushMessageQueue(),(0,h.timeout)(this.readLoop);case 22:case"end":return i.stop()}}),_callee16,this)})));return function readLoop(){return e.apply(this,arguments)}}()}]),Panda}();t.default=_}).call(this,n(20).Buffer)},function(e,t,n){(function(t){for(var r=n(113),i="undefined"===typeof window?t:window,a=["moz","webkit"],o="AnimationFrame",s=i["request"+o],u=i["cancel"+o]||i["cancelRequest"+o],l=0;!s&&l<a.length;l++)s=i[a[l]+"Request"+o],u=i[a[l]+"Cancel"+o]||i[a[l]+"CancelRequest"+o];if(!s||!u){var c=0,f=0,d=[];s=function raf(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return d.push({handle:++f,callback:e,cancelled:!1}),f},u=function caf(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){u.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}}).call(this,n(19))},function(e,t,n){var r=n(378);function wrap(e,t){return function(n,i){return r(n),function handler(e,t){return function(){return e(t)}}(t,e(n,i))}}e.exports={timeout:wrap(setTimeout,clearTimeout),interval:wrap(setInterval,clearInterval)}},function(e,t,n){"use strict";e.exports=function assertFunction(e){if("function"!==typeof e)throw new TypeError("Expected function, got: "+e)}},function(e,t,n){t.UINT32=n(380),t.UINT64=n(381)},function(e,t,n){var r;!function(n){UINT32(Math.pow(36,5)),UINT32(Math.pow(16,7)),UINT32(Math.pow(10,9)),UINT32(Math.pow(2,30)),UINT32(36),UINT32(16),UINT32(10),UINT32(2);function UINT32(e,t){return this instanceof UINT32?(this._low=0,this._high=0,this.remainder=null,"undefined"==typeof t?fromNumber.call(this,e):"string"==typeof e?fromString.call(this,e,t):void fromBits.call(this,e,t)):new UINT32(e,t)}function fromBits(e,t){return this._low=0|e,this._high=0|t,this}function fromNumber(e){return this._low=65535&e,this._high=e>>>16,this}function fromString(e,t){var n=parseInt(e,t||10);return this._low=65535&n,this._high=n>>>16,this}UINT32.prototype.fromBits=fromBits,UINT32.prototype.fromNumber=fromNumber,UINT32.prototype.fromString=fromString,UINT32.prototype.toNumber=function(){return 65536*this._high+this._low},UINT32.prototype.toString=function(e){return this.toNumber().toString(e||10)},UINT32.prototype.add=function(e){var t=this._low+e._low,n=t>>>16;return n+=this._high+e._high,this._low=65535&t,this._high=65535&n,this},UINT32.prototype.subtract=function(e){return this.add(e.clone().negate())},UINT32.prototype.multiply=function(e){var t,n,r=this._high,i=this._low,a=e._high,o=e._low;return t=(n=i*o)>>>16,t+=r*o,t&=65535,t+=i*a,this._low=65535&n,this._high=65535&t,this},UINT32.prototype.div=function(e){if(0==e._low&&0==e._high)throw Error("division by zero");if(0==e._high&&1==e._low)return this.remainder=new UINT32(0),this;if(e.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(e))return this.remainder=new UINT32(0),this._low=1,this._high=0,this;for(var t=e.clone(),n=-1;!this.lt(t);)t.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},UINT32.prototype.negate=function(){var e=1+(65535&~this._low);return this._low=65535&e,this._high=~this._high+(e>>>16)&65535,this},UINT32.prototype.equals=UINT32.prototype.eq=function(e){return this._low==e._low&&this._high==e._high},UINT32.prototype.greaterThan=UINT32.prototype.gt=function(e){return this._high>e._high||!(this._high<e._high)&&this._low>e._low},UINT32.prototype.lessThan=UINT32.prototype.lt=function(e){return this._high<e._high||!(this._high>e._high)&&this._low<e._low},UINT32.prototype.or=function(e){return this._low|=e._low,this._high|=e._high,this},UINT32.prototype.and=function(e){return this._low&=e._low,this._high&=e._high,this},UINT32.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},UINT32.prototype.xor=function(e){return this._low^=e._low,this._high^=e._high,this},UINT32.prototype.shiftRight=UINT32.prototype.shiftr=function(e){return e>16?(this._low=this._high>>e-16,this._high=0):16==e?(this._low=this._high,this._high=0):(this._low=this._low>>e|this._high<<16-e&65535,this._high>>=e),this},UINT32.prototype.shiftLeft=UINT32.prototype.shiftl=function(e,t){return e>16?(this._high=this._low<<e-16,this._low=0,t||(this._high&=65535)):16==e?(this._high=this._low,this._low=0):(this._high=this._high<<e|this._low>>16-e,this._low=this._low<<e&65535,t||(this._high&=65535)),this},UINT32.prototype.rotateLeft=UINT32.prototype.rotl=function(e){var t=this._high<<16|this._low;return t=t<<e|t>>>32-e,this._low=65535&t,this._high=t>>>16,this},UINT32.prototype.rotateRight=UINT32.prototype.rotr=function(e){var t=this._high<<16|this._low;return t=t>>>e|t<<32-e,this._low=65535&t,this._high=t>>>16,this},UINT32.prototype.clone=function(){return new UINT32(this._low,this._high)},void 0===(r=function(){return UINT32}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r;!function(n){var i={16:UINT64(Math.pow(16,5)),10:UINT64(Math.pow(10,5)),2:UINT64(Math.pow(2,5))},a={16:UINT64(16),10:UINT64(10),2:UINT64(2)};function UINT64(e,t,n,r){return this instanceof UINT64?(this.remainder=null,"string"==typeof e?fromString.call(this,e,t):"undefined"==typeof t?fromNumber.call(this,e):void fromBits.apply(this,arguments)):new UINT64(e,t,n,r)}function fromBits(e,t,n,r){return"undefined"==typeof n?(this._a00=65535&e,this._a16=e>>>16,this._a32=65535&t,this._a48=t>>>16,this):(this._a00=0|e,this._a16=0|t,this._a32=0|n,this._a48=0|r,this)}function fromNumber(e){return this._a00=65535&e,this._a16=e>>>16,this._a32=0,this._a48=0,this}function fromString(e,t){t=t||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=i[t]||new UINT64(Math.pow(t,5)),r=0,a=e.length;r<a;r+=5){var o=Math.min(5,a-r),s=parseInt(e.slice(r,r+o),t);this.multiply(o<5?new UINT64(Math.pow(t,o)):n).add(new UINT64(s))}return this}UINT64.prototype.fromBits=fromBits,UINT64.prototype.fromNumber=fromNumber,UINT64.prototype.fromString=fromString,UINT64.prototype.toNumber=function(){return 65536*this._a16+this._a00},UINT64.prototype.toString=function(e){var t=a[e=e||10]||new UINT64(e);if(!this.gt(t))return this.toNumber().toString(e);for(var n=this.clone(),r=new Array(64),i=63;i>=0&&(n.div(t),r[i]=n.remainder.toNumber().toString(e),n.gt(t));i--);return r[i-1]=n.toNumber().toString(e),r.join("")},UINT64.prototype.add=function(e){var t=this._a00+e._a00,n=t>>>16,r=(n+=this._a16+e._a16)>>>16,i=(r+=this._a32+e._a32)>>>16;return i+=this._a48+e._a48,this._a00=65535&t,this._a16=65535&n,this._a32=65535&r,this._a48=65535&i,this},UINT64.prototype.subtract=function(e){return this.add(e.clone().negate())},UINT64.prototype.multiply=function(e){var t=this._a00,n=this._a16,r=this._a32,i=this._a48,a=e._a00,o=e._a16,s=e._a32,u=t*a,l=u>>>16,c=(l+=t*o)>>>16;l&=65535,c+=(l+=n*a)>>>16;var f=(c+=t*s)>>>16;return c&=65535,f+=(c+=n*o)>>>16,c&=65535,f+=(c+=r*a)>>>16,f+=t*e._a48,f&=65535,f+=n*s,f&=65535,f+=r*o,f&=65535,f+=i*a,this._a00=65535&u,this._a16=65535&l,this._a32=65535&c,this._a48=65535&f,this},UINT64.prototype.div=function(e){if(0==e._a16&&0==e._a32&&0==e._a48){if(0==e._a00)throw Error("division by zero");if(1==e._a00)return this.remainder=new UINT64(0),this}if(e.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(e))return this.remainder=new UINT64(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var t=e.clone(),n=-1;!this.lt(t);)t.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;n>=0;n--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),n>=48?this._a48|=1<<n-48:n>=32?this._a32|=1<<n-32:n>=16?this._a16|=1<<n-16:this._a00|=1<<n);return this},UINT64.prototype.negate=function(){var e=1+(65535&~this._a00);return this._a00=65535&e,e=(65535&~this._a16)+(e>>>16),this._a16=65535&e,e=(65535&~this._a32)+(e>>>16),this._a32=65535&e,this._a48=~this._a48+(e>>>16)&65535,this},UINT64.prototype.equals=UINT64.prototype.eq=function(e){return this._a48==e._a48&&this._a00==e._a00&&this._a32==e._a32&&this._a16==e._a16},UINT64.prototype.greaterThan=UINT64.prototype.gt=function(e){return this._a48>e._a48||!(this._a48<e._a48)&&(this._a32>e._a32||!(this._a32<e._a32)&&(this._a16>e._a16||!(this._a16<e._a16)&&this._a00>e._a00))},UINT64.prototype.lessThan=UINT64.prototype.lt=function(e){return this._a48<e._a48||!(this._a48>e._a48)&&(this._a32<e._a32||!(this._a32>e._a32)&&(this._a16<e._a16||!(this._a16>e._a16)&&this._a00<e._a00))},UINT64.prototype.or=function(e){return this._a00|=e._a00,this._a16|=e._a16,this._a32|=e._a32,this._a48|=e._a48,this},UINT64.prototype.and=function(e){return this._a00&=e._a00,this._a16&=e._a16,this._a32&=e._a32,this._a48&=e._a48,this},UINT64.prototype.xor=function(e){return this._a00^=e._a00,this._a16^=e._a16,this._a32^=e._a32,this._a48^=e._a48,this},UINT64.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},UINT64.prototype.shiftRight=UINT64.prototype.shiftr=function(e){return(e%=64)>=48?(this._a00=this._a48>>e-48,this._a16=0,this._a32=0,this._a48=0):e>=32?(e-=32,this._a00=65535&(this._a32>>e|this._a48<<16-e),this._a16=this._a48>>e&65535,this._a32=0,this._a48=0):e>=16?(e-=16,this._a00=65535&(this._a16>>e|this._a32<<16-e),this._a16=65535&(this._a32>>e|this._a48<<16-e),this._a32=this._a48>>e&65535,this._a48=0):(this._a00=65535&(this._a00>>e|this._a16<<16-e),this._a16=65535&(this._a16>>e|this._a32<<16-e),this._a32=65535&(this._a32>>e|this._a48<<16-e),this._a48=this._a48>>e&65535),this},UINT64.prototype.shiftLeft=UINT64.prototype.shiftl=function(e,t){return(e%=64)>=48?(this._a48=this._a00<<e-48,this._a32=0,this._a16=0,this._a00=0):e>=32?(e-=32,this._a48=this._a16<<e|this._a00>>16-e,this._a32=this._a00<<e&65535,this._a16=0,this._a00=0):e>=16?(e-=16,this._a48=this._a32<<e|this._a16>>16-e,this._a32=65535&(this._a16<<e|this._a00>>16-e),this._a16=this._a00<<e&65535,this._a00=0):(this._a48=this._a48<<e|this._a32>>16-e,this._a32=65535&(this._a32<<e|this._a16>>16-e),this._a16=65535&(this._a16<<e|this._a00>>16-e),this._a00=this._a00<<e&65535),t||(this._a48&=65535),this},UINT64.prototype.rotateLeft=UINT64.prototype.rotl=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n<<e|r>>>32-e,a=r<<e|n>>>32-e;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&i,this._a48=i>>>16,this},UINT64.prototype.rotateRight=UINT64.prototype.rotr=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var n=this._a48<<16|this._a32,r=this._a16<<16|this._a00,i=n>>>e|r<<32-e,a=r>>>e|n<<32-e;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&i,this._a48=i>>>16,this},UINT64.prototype.clone=function(){return new UINT64(this._a00,this._a16,this._a32,this._a48)},void 0===(r=function(){return UINT64}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r,i,a;i=[e,n(383)],void 0===(a="function"===typeof(r=function(e,t){"use strict";var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(t),r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=function(){function ClipboardAction(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ClipboardAction),this.resolveOptions(e),this.initSelection()}return i(ClipboardAction,[{key:"resolveOptions",value:function resolveOptions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function initSelection(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function selectFake(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function removeFake(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function selectTarget(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function copyText(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function handleResult(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function clearSelection(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function destroy(){this.removeFake()}},{key:"action",set:function set(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function get(){return this._action}},{key:"target",set:function set(e){if(void 0!==e){if(!e||"object"!==("undefined"===typeof e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function get(){return this._target}}]),ClipboardAction}();e.exports=a})?r.apply(t,i):r)||(e.exports=a)},function(e,t){e.exports=function select(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}},function(e,t){function E(){}E.prototype={on:function on(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function once(e,t,n){var r=this;function listener(){r.off(e,listener),t.apply(n,arguments)}return listener._=t,this.on(e,listener,n)},emit:function emit(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function off(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var a=0,o=r.length;a<o;a++)r[a].fn!==t&&r[a].fn._!==t&&i.push(r[a]);return i.length?n[e]=i:delete n[e],this}},e.exports=E,e.exports.TinyEmitter=E},function(e,t,n){var r=n(386),i=n(387);e.exports=function listen(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function listenNode(e,t,n){return e.addEventListener(t,n),{destroy:function destroy(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function listenNodeList(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function destroy(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(r.string(e))return function listenSelector(e,t,n){return i(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"===typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(388);function _delegate(e,t,n,r,i){var a=listener.apply(this,arguments);return e.addEventListener(n,a,i),{destroy:function destroy(){e.removeEventListener(n,a,i)}}}function listener(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}e.exports=function delegate(e,t,n,r,i){return"function"===typeof e.addEventListener?_delegate.apply(null,arguments):"function"===typeof n?_delegate.bind(null,document).apply(null,arguments):("string"===typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return _delegate(e,t,n,r,i)})))}},function(e,t){var n=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function closest(e,t){for(;e&&e.nodeType!==n;){if("function"===typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,n){"use strict";var r=e.exports={};r.linearRegression=n(390),r.linearRegressionLine=n(391),r.standardDeviation=n(167),r.rSquared=n(392),r.mode=n(393),r.modeFast=n(394),r.modeSorted=n(171),r.min=n(172),r.max=n(173),r.minSorted=n(395),r.maxSorted=n(396),r.sum=n(169),r.sumSimple=n(397),r.product=n(398),r.quantile=n(118),r.quantileSorted=n(119),r.interquartileRange=r.iqr=n(400),r.medianAbsoluteDeviation=r.mad=n(401),r.chunk=n(402),r.sampleWithReplacement=n(403),r.shuffle=n(175),r.shuffleInPlace=n(176),r.sample=n(404),r.ckmeans=n(405),r.uniqueCountSorted=n(177),r.sumNthPowerDeviations=n(117),r.equalIntervalBreaks=n(406),r.sampleCovariance=n(178),r.sampleCorrelation=n(407),r.sampleVariance=n(120),r.sampleStandardDeviation=n(179),r.sampleSkewness=n(408),r.sampleKurtosis=n(409),r.permutationsHeap=n(410),r.combinations=n(411),r.combinationsReplacement=n(412),r.addToMean=n(413),r.combineMeans=n(180),r.combineVariances=n(414),r.geometricMean=n(415),r.harmonicMean=n(416),r.mean=r.average=n(37),r.median=n(174),r.medianSorted=n(417),r.subtractFromMean=n(418),r.rootMeanSquare=r.rms=n(419),r.variance=n(168),r.tTest=n(420),r.tTestTwoSample=n(421),r.BayesianClassifier=r.bayesian=n(422),r.PerceptronModel=r.perceptron=n(423),r.epsilon=n(71),r.factorial=n(424),r.bernoulliDistribution=n(425),r.binomialDistribution=n(426),r.poissonDistribution=n(427),r.chiSquaredGoodnessOfFit=n(428),r.zScore=n(430),r.cumulativeStdNormalProbability=n(431),r.standardNormalTable=n(181),r.errorFunction=r.erf=n(432),r.inverseErrorFunction=n(182),r.probit=n(433),r.bisect=n(434)},function(e,t,n){"use strict";e.exports=function linearRegression(e){var t,n,r=e.length;if(1===r)t=0,n=e[0][1];else{for(var i,a,o,s=0,u=0,l=0,c=0,f=0;f<r;f++)s+=a=(i=e[f])[0],u+=o=i[1],l+=a*a,c+=a*o;n=u/r-(t=(r*c-s*u)/(r*l-s*s))*s/r}return{m:t,b:n}}},function(e,t,n){"use strict";e.exports=function linearRegressionLine(e){return function(t){return e.b+e.m*t}}},function(e,t,n){"use strict";e.exports=function rSquared(e,t){if(e.length<2)return 1;for(var n,r=0,i=0;i<e.length;i++)r+=e[i][1];n=r/e.length;for(var a=0,o=0;o<e.length;o++)a+=Math.pow(n-e[o][1],2);for(var s=0,u=0;u<e.length;u++)s+=Math.pow(e[u][1]-t(e[u][0]),2);return 1-s/a}},function(e,t,n){"use strict";var r=n(170),i=n(171);e.exports=function mode(e){return i(r(e))}},function(e,t,n){"use strict";e.exports=function modeFast(e){for(var t,n=new Map,r=0,i=0;i<e.length;i++){var a=n.get(e[i]);void 0===a?a=1:a++,a>r&&(t=e[i],r=a),n.set(e[i],a)}if(0===r)throw new Error("mode requires at last one data point");return t}},function(e,t,n){"use strict";e.exports=function minSorted(e){return e[0]}},function(e,t,n){"use strict";e.exports=function maxSorted(e){return e[e.length-1]}},function(e,t,n){"use strict";e.exports=function sumSimple(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}},function(e,t,n){"use strict";e.exports=function product(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t}},function(e,t,n){"use strict";function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}e.exports=function quickselect(e,t,n,r){n=n||0;r=r||e.length-1;for(;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(i-s)/i);a-i/2<0&&(u*=-1);var l=Math.max(n,Math.floor(t-a*s/i+u)),c=Math.min(r,Math.floor(t+(i-a)*s/i+u));quickselect(e,t,l,c)}var f=e[t],d=n,h=r;for(swap(e,n,t),e[r]>f&&swap(e,n,r);d<h;){for(swap(e,d,h),d++,h--;e[d]<f;)d++;for(;e[h]>f;)h--}e[n]===f?swap(e,n,h):swap(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}},function(e,t,n){"use strict";var r=n(118);e.exports=function interquartileRange(e){var t=r(e,.75),n=r(e,.25);if("number"===typeof t&&"number"===typeof n)return t-n}},function(e,t,n){"use strict";var r=n(174);e.exports=function medianAbsoluteDeviation(e){for(var t=r(e),n=[],i=0;i<e.length;i++)n.push(Math.abs(e[i]-t));return r(n)}},function(e,t,n){"use strict";e.exports=function chunk(e,t){var n=[];if(t<1)throw new Error("chunk size must be a positive number");if(Math.floor(t)!==t)throw new Error("chunk size must be an integer");for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";e.exports=function sampleWithReplacement(e,t,n){if(0===e.length)return[];n=n||Math.random;for(var r=e.length,i=[],a=0;a<t;a++){var o=Math.floor(n()*r);i.push(e[o])}return i}},function(e,t,n){"use strict";var r=n(175);e.exports=function sample(e,t,n){return r(e,n).slice(0,t)}},function(e,t,n){"use strict";var r=n(177),i=n(170);function makeMatrix(e,t){for(var n=[],r=0;r<e;r++){for(var i=[],a=0;a<t;a++)i.push(0);n.push(i)}return n}function ssq(e,t,n,r){var i;if(e>0){var a=(n[t]-n[e-1])/(t-e+1);i=r[t]-r[e-1]-(t-e+1)*a*a}else i=r[t]-n[t]*n[t]/(t+1);return i<0?0:i}function fillMatrixColumn(e,t,n,r,i,a,o){if(!(e>t)){var s=Math.floor((e+t)/2);r[n][s]=r[n-1][s-1],i[n][s]=s;var u=n;e>n&&(u=Math.max(u,i[n][e-1]||0)),u=Math.max(u,i[n-1][s]||0);var l,c,f,d=s-1;t<r.length-1&&(d=Math.min(d,i[n][t+1]||0));for(var h=d;h>=u&&!((l=ssq(h,s,a,o))+r[n-1][u-1]>=r[n][s]);--h)(c=ssq(u,s,a,o)+r[n-1][u-1])<r[n][s]&&(r[n][s]=c,i[n][s]=u),u++,(f=l+r[n-1][h-1])<r[n][s]&&(r[n][s]=f,i[n][s]=h);fillMatrixColumn(e,s-1,n,r,i,a,o),fillMatrixColumn(s+1,t,n,r,i,a,o)}}e.exports=function ckmeans(e,t){if(t>e.length)throw new Error("cannot generate more classes than there are data values");var n=i(e);if(1===r(n))return[n];var a=makeMatrix(t,n.length),o=makeMatrix(t,n.length);!function fillMatrices(e,t,n){for(var r,i=t[0].length,a=e[Math.floor(i/2)],o=[],s=[],u=0;u<i;++u)r=e[u]-a,0===u?(o.push(r),s.push(r*r)):(o.push(o[u-1]+r),s.push(s[u-1]+r*r)),t[0][u]=ssq(0,u,o,s),n[0][u]=0;for(var l=1;l<t.length;++l)fillMatrixColumn(l<t.length-1?l:i-1,i-1,l,t,n,o,s)}(n,a,o);for(var s=[],u=o[0].length-1,l=o.length-1;l>=0;l--){var c=o[l][u];s[l]=n.slice(c,u+1),l>0&&(u=c-1)}return s}},function(e,t,n){"use strict";var r=n(173),i=n(172);e.exports=function equalIntervalBreaks(e,t){if(e.length<2)return e;for(var n=i(e),a=r(e),o=[n],s=(a-n)/t,u=1;u<t;u++)o.push(o[0]+s*u);return o.push(a),o}},function(e,t,n){"use strict";var r=n(178),i=n(179);e.exports=function sampleCorrelation(e,t){return r(e,t)/i(e)/i(t)}},function(e,t,n){"use strict";var r=n(37);e.exports=function sampleSkewness(e){if(e.length<3)throw new Error("sampleSkewness requires at least three data points");for(var t,n=r(e),i=0,a=0,o=0;o<e.length;o++)i+=(t=e[o]-n)*t,a+=t*t*t;var s=e.length-1,u=Math.sqrt(i/s),l=e.length;return l*a/((l-1)*(l-2)*Math.pow(u,3))}},function(e,t,n){"use strict";var r=n(37);e.exports=function sampleKurtosis(e){var t=e.length;if(t<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,i=r(e),a=0,o=0,s=0;s<t;s++)a+=(n=e[s]-i)*n,o+=n*n*n*n;return(t-1)/((t-2)*(t-3))*(t*(t+1)*o/(a*a)-3*(t-1))}},function(e,t,n){"use strict";e.exports=function permutationsHeap(e){for(var t=new Array(e.length),n=[e.slice()],r=0;r<e.length;r++)t[r]=0;for(r=0;r<e.length;)if(t[r]<r){var i=0;r%2!==0&&(i=t[r]);var a=e[i];e[i]=e[r],e[r]=a,n.push(e.slice()),t[r]++,r=0}else t[r]=0,r++;return n}},function(e,t,n){"use strict";e.exports=function combinations(e,t){var n,r,i,a,o=[];for(n=0;n<e.length;n++)if(1===t)o.push([e[n]]);else for(i=combinations(e.slice(n+1,e.length),t-1),r=0;r<i.length;r++)(a=i[r]).unshift(e[n]),o.push(a);return o}},function(e,t,n){"use strict";e.exports=function combinationsReplacement(e,t){for(var n=[],r=0;r<e.length;r++)if(1===t)n.push([e[r]]);else for(var i=combinationsReplacement(e.slice(r,e.length),t-1),a=0;a<i.length;a++)n.push([e[r]].concat(i[a]));return n}},function(e,t,n){"use strict";e.exports=function addToMean(e,t,n){return e+(n-e)/(t+1)}},function(e,t,n){"use strict";var r=n(180);e.exports=function combineVariances(e,t,n,i,a,o){var s=r(t,n,a,o);return(n*(e+Math.pow(t-s,2))+o*(i+Math.pow(a-s,2)))/(n+o)}},function(e,t,n){"use strict";e.exports=function geometricMean(e){if(0===e.length)throw new Error("geometricMean requires at least one data point");for(var t=1,n=0;n<e.length;n++){if(e[n]<=0)throw new Error("geometricMean requires only positive numbers as input");t*=e[n]}return Math.pow(t,1/e.length)}},function(e,t,n){"use strict";e.exports=function harmonicMean(e){if(0===e.length)throw new Error("harmonicMean requires at least one data point");for(var t=0,n=0;n<e.length;n++){if(e[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");t+=1/e[n]}return e.length/t}},function(e,t,n){"use strict";var r=n(119);e.exports=function medianSorted(e){return r(e,.5)}},function(e,t,n){"use strict";e.exports=function subtractFromMean(e,t,n){return(e*t-n)/(t-1)}},function(e,t,n){"use strict";e.exports=function rootMeanSquare(e){if(0===e.length)throw new Error("rootMeanSquare requires at least one data point");for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return Math.sqrt(t/e.length)}},function(e,t,n){"use strict";var r=n(167),i=n(37);e.exports=function tTest(e,t){return(i(e)-t)/(r(e)/Math.sqrt(e.length))}},function(e,t,n){"use strict";var r=n(37),i=n(120);e.exports=function tTestTwoSample(e,t,n){var a=e.length,o=t.length;if(!a||!o)return null;n||(n=0);var s=r(e),u=r(t),l=i(e),c=i(t);if("number"===typeof s&&"number"===typeof u&&"number"===typeof l&&"number"===typeof c){var f=((a-1)*l+(o-1)*c)/(a+o-2);return(s-u-n)/Math.sqrt(f*(1/a+1/o))}}},function(e,t,n){"use strict";function BayesianClassifier(){this.totalCount=0,this.data={}}BayesianClassifier.prototype.train=function(e,t){for(var n in this.data[t]||(this.data[t]={}),e){var r=e[n];void 0===this.data[t][n]&&(this.data[t][n]={}),void 0===this.data[t][n][r]&&(this.data[t][n][r]=0),this.data[t][n][r]++}this.totalCount++},BayesianClassifier.prototype.score=function(e){var t,n={};for(var r in e){var i=e[r];for(t in this.data)n[t]={},this.data[t][r]?n[t][r+"_"+i]=(this.data[t][r][i]||0)/this.totalCount:n[t][r+"_"+i]=0}var a={};for(t in n)for(var o in a[t]=0,n[t])a[t]+=n[t][o];return a},e.exports=BayesianClassifier},function(e,t,n){"use strict";function PerceptronModel(){this.weights=[],this.bias=0}PerceptronModel.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,n=0;n<this.weights.length;n++)t+=this.weights[n]*e[n];return(t+=this.bias)>0?1:0},PerceptronModel.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var n=this.predict(e);if(n!==t){for(var r=t-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*e[i];this.bias+=r}return this},e.exports=PerceptronModel},function(e,t,n){"use strict";e.exports=function factorial(e){if(e<0)throw new Error("factorial requires a non-negative value");if(Math.floor(e)!==e)throw new Error("factorial requires an integer input");for(var t=1,n=2;n<=e;n++)t*=n;return t}},function(e,t,n){"use strict";e.exports=function bernoulliDistribution(e){if(e<0||e>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-e,e]}},function(e,t,n){"use strict";var r=n(71);e.exports=function binomialDistribution(e,t){if(!(t<0||t>1||e<=0||e%1!==0)){var n=0,i=0,a=[],o=1;do{a[n]=o*Math.pow(t,n)*Math.pow(1-t,e-n),i+=a[n],o=o*(e-++n+1)/n}while(i<1-r);return a}}},function(e,t,n){"use strict";var r=n(71);e.exports=function poissonDistribution(e){if(!(e<=0)){var t=0,n=0,i=[],a=1;do{i[t]=Math.exp(-e)*Math.pow(e,t)/a,n+=i[t],a*=++t}while(n<1-r);return i}}},function(e,t,n){"use strict";var r=n(37),i=n(429);e.exports=function chiSquaredGoodnessOfFit(e,t,n){for(var a,o,s=0,u=t(r(e)),l=[],c=[],f=0;f<e.length;f++)void 0===l[e[f]]&&(l[e[f]]=0),l[e[f]]++;for(f=0;f<l.length;f++)void 0===l[f]&&(l[f]=0);for(o in u)o in l&&(c[+o]=u[o]*e.length);for(o=c.length-1;o>=0;o--)c[o]<3&&(c[o-1]+=c[o],c.pop(),l[o-1]+=l[o],l.pop());for(o=0;o<l.length;o++)s+=Math.pow(l[o]-c[o],2)/c[o];return a=l.length-1-1,i[a][n]<s}},function(e,t,n){"use strict";e.exports={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}}},function(e,t,n){"use strict";e.exports=function zScore(e,t,n){return(e-t)/n}},function(e,t,n){"use strict";var r=n(181);e.exports=function cumulativeStdNormalProbability(e){var t=Math.abs(e),n=Math.min(Math.round(100*t),r.length-1);return e>=0?r[n]:+(1-r[n]).toFixed(4)}},function(e,t,n){"use strict";e.exports=function errorFunction(e){var t=1/(1+.5*Math.abs(e)),n=t*Math.exp(-Math.pow(e,2)-1.26551223+1.00002368*t+.37409196*Math.pow(t,2)+.09678418*Math.pow(t,3)-.18628806*Math.pow(t,4)+.27886807*Math.pow(t,5)-1.13520398*Math.pow(t,6)+1.48851587*Math.pow(t,7)-.82215223*Math.pow(t,8)+.17087277*Math.pow(t,9));return e>=0?1-n:n-1}},function(e,t,n){"use strict";var r=n(71),i=n(182);e.exports=function probit(e){return 0===e?e=r:e>=1&&(e=1-r),Math.sqrt(2)*i(2*e-1)}},function(e,t,n){"use strict";var r=n(435);e.exports=function bisect(e,t,n,i,a){if("function"!==typeof e)throw new TypeError("func must be a function");for(var o=0;o<i;o++){var s=(t+n)/2;if(0===e(s)||Math.abs((n-t)/2)<a)return s;r(e(s))===r(e(t))?t=s:n=s}throw new Error("maximum number of iterations exceeded")}},function(e,t,n){"use strict";e.exports=function sign(e){if("number"===typeof e)return e<0?-1:0===e?0:1;throw new TypeError("not a number")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(121),i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(185));t.default=(0,i.default)(!1,r.defaultSelectorHandlers),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function createPrefixer(e){var t=e.prefixMap,n=e.plugins;return function prefixAll(e){for(var s in e){var u=e[s];if((0,o.default)(u))e[s]=prefixAll(u);else if(Array.isArray(u)){for(var l=[],c=0,f=u.length;c<f;++c){var d=(0,i.default)(n,s,u[c],e,t);(0,a.default)(l,d||u[c])}l.length>0&&(e[s]=l)}else{var h=(0,i.default)(n,s,u,e,t);h&&(e[s]=h),(0,r.default)(t,s,e)}}return e}};var r=_interopRequireDefault(n(438)),i=_interopRequireDefault(n(439)),a=_interopRequireDefault(n(440)),o=_interopRequireDefault(n(441));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function prefixProperty(e,t,n){if(e.hasOwnProperty(t))for(var i=e[t],a=0,o=i.length;a<o;++a)n[i[a]+(0,r.default)(t)]=n[t]};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(183));e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function prefixValue(e,t,n,r,i){for(var a=0,o=e.length;a<o;++a){var s=e[a](t,n,r,i);if(s)return s}},e.exports=t.default},function(e,t,n){"use strict";function addIfNew(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function addNewValuesOnly(e,t){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)addIfNew(e,t[n]);else addIfNew(e,t)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function isObject(e){return e instanceof Object&&!Array.isArray(e)},e.exports=t.default},function(e,t,n){var r=n(443),i=n(444),a=n(445),o=n(446),s=n(447),u=n(448),l=n(449),c=n(450),f=n(451),d=n(452),h=n(453),p=n(454);e.exports={plugins:[r,i,a,o,s,u,l,c,f,d,h,p],prefixMap:{transform:["Webkit","ms"],transformOrigin:["Webkit","ms"],transformOriginX:["Webkit","ms"],transformOriginY:["Webkit","ms"],backfaceVisibility:["Webkit"],perspective:["Webkit"],perspectiveOrigin:["Webkit"],transformStyle:["Webkit"],transformOriginZ:["Webkit"],animation:["Webkit"],animationDelay:["Webkit"],animationDirection:["Webkit"],animationFillMode:["Webkit"],animationDuration:["Webkit"],animationIterationCount:["Webkit"],animationName:["Webkit"],animationPlayState:["Webkit"],animationTimingFunction:["Webkit"],appearance:["Webkit","Moz"],userSelect:["Webkit","Moz","ms"],fontKerning:["Webkit"],textEmphasisPosition:["Webkit"],textEmphasis:["Webkit"],textEmphasisStyle:["Webkit"],textEmphasisColor:["Webkit"],boxDecorationBreak:["Webkit"],clipPath:["Webkit"],maskImage:["Webkit"],maskMode:["Webkit"],maskRepeat:["Webkit"],maskPosition:["Webkit"],maskClip:["Webkit"],maskOrigin:["Webkit"],maskSize:["Webkit"],maskComposite:["Webkit"],mask:["Webkit"],maskBorderSource:["Webkit"],maskBorderMode:["Webkit"],maskBorderSlice:["Webkit"],maskBorderWidth:["Webkit"],maskBorderOutset:["Webkit"],maskBorderRepeat:["Webkit"],maskBorder:["Webkit"],maskType:["Webkit"],textDecorationStyle:["Webkit","Moz"],textDecorationSkip:["Webkit","Moz"],textDecorationLine:["Webkit","Moz"],textDecorationColor:["Webkit","Moz"],filter:["Webkit"],fontFeatureSettings:["Webkit","Moz"],breakAfter:["Webkit","Moz","ms"],breakBefore:["Webkit","Moz","ms"],breakInside:["Webkit","Moz","ms"],columnCount:["Webkit","Moz"],columnFill:["Webkit","Moz"],columnGap:["Webkit","Moz"],columnRule:["Webkit","Moz"],columnRuleColor:["Webkit","Moz"],columnRuleStyle:["Webkit","Moz"],columnRuleWidth:["Webkit","Moz"],columns:["Webkit","Moz"],columnSpan:["Webkit","Moz"],columnWidth:["Webkit","Moz"],flex:["Webkit","ms"],flexBasis:["Webkit"],flexDirection:["Webkit","ms"],flexGrow:["Webkit"],flexFlow:["Webkit","ms"],flexShrink:["Webkit"],flexWrap:["Webkit","ms"],alignContent:["Webkit"],alignItems:["Webkit"],alignSelf:["Webkit"],justifyContent:["Webkit"],order:["Webkit"],transitionDelay:["Webkit"],transitionDuration:["Webkit"],transitionProperty:["Webkit"],transitionTimingFunction:["Webkit"],backdropFilter:["Webkit"],scrollSnapType:["Webkit","ms"],scrollSnapPointsX:["Webkit","ms"],scrollSnapPointsY:["Webkit","ms"],scrollSnapDestination:["Webkit","ms"],scrollSnapCoordinate:["Webkit","ms"],shapeImageThreshold:["Webkit"],shapeImageMargin:["Webkit"],shapeImageOutside:["Webkit"],hyphens:["Webkit","Moz","ms"],flowInto:["Webkit","ms"],flowFrom:["Webkit","ms"],regionFragment:["Webkit","ms"],boxSizing:["Moz"],textAlignLast:["Moz"],tabSize:["Moz"],wrapFlow:["ms"],wrapThrough:["ms"],wrapMargin:["ms"],touchAction:["ms"],gridTemplateColumns:["ms"],gridTemplateRows:["ms"],gridTemplateAreas:["ms"],gridTemplate:["ms"],gridAutoColumns:["ms"],gridAutoRows:["ms"],gridAutoFlow:["ms"],grid:["ms"],gridRowStart:["ms"],gridColumnStart:["ms"],gridRowEnd:["ms"],gridRow:["ms"],gridColumn:["ms"],gridColumnEnd:["ms"],gridColumnGap:["ms"],gridRowGap:["ms"],gridArea:["ms"],gridGap:["ms"],textSizeAdjust:["Webkit","ms"],borderImage:["Webkit"],borderImageOutset:["Webkit"],borderImageRepeat:["Webkit"],borderImageSlice:["Webkit"],borderImageSource:["Webkit"],borderImageWidth:["Webkit"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function calc(e,t){if("string"===typeof t&&!(0,r.default)(t)&&t.indexOf("calc(")>-1)return i.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(46));var i=["-webkit-","-moz-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function crossFade(e,t){if("string"===typeof t&&!(0,r.default)(t)&&t.indexOf("cross-fade(")>-1)return i.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(46));var i=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function cursor(e,t){if("cursor"===e&&i.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function filter(e,t){if("string"===typeof t&&!(0,r.default)(t)&&t.indexOf("filter(")>-1)return i.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(46));var i=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function flex(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function flexboxIE(e,t,n){i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t)};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},i={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function flexboxOld(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function gradient(e,t){if("string"===typeof t&&!(0,r.default)(t)&&a.test(t))return i.map((function(e){return e+t}))};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(46));var i=["-webkit-","-moz-",""],a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function imageSet(e,t){if("string"===typeof t&&!(0,r.default)(t)&&t.indexOf("image-set(")>-1)return i.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(46));var i=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function position(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function sizing(e,t){if(i.hasOwnProperty(e)&&a.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function transition(e,t,n,u){if("string"===typeof t&&o.hasOwnProperty(e)){var l=function prefixValue(e,t){if((0,i.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),a=0,o=n.length;a<o;++a){var u=n[a],l=[u];for(var c in t){var f=(0,r.default)(c);if(u.indexOf(f)>-1&&"order"!==f)for(var d=t[c],h=0,p=d.length;h<p;++h)l.unshift(u.replace(f,s[d[h]]+f))}n[a]=l.join(",")}return n.join(",")}(t,u),c=l.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return c;var f=l.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?f:(n["Webkit"+(0,a.default)(e)]=c,n["Moz"+(0,a.default)(e)]=f,l)}};var r=_interopRequireDefault(n(455)),i=_interopRequireDefault(n(46)),a=_interopRequireDefault(n(183));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},s={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function hyphenateProperty(e){return(0,r.default)(e)};var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(456));e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,i=/^ms-/,a={};function toHyphenLower(e){return"-"+e.toLowerCase()}t.default=function hyphenateStyleName(e){if(a.hasOwnProperty(e))return a[e];var t=e.replace(r,toHyphenLower);return a[e]=i.test(t)?"-"+t:t}},function(e,t,n){"use strict";e.exports=function hash(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}},function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=_interopRequireDefault(n(459)),i=_interopRequireDefault(n(184)),a=n(121),o=n(122),s=null,u={fontFamily:function fontFamily(e){return Array.isArray(e)?e.map(fontFamily).join(","):"object"===typeof e?(h(e.src,"@font-face",[e],!1),'"'+e.fontFamily+'"'):e},animationName:function animationName(e,t){if(Array.isArray(e))return e.map((function(e){return animationName(e,t)})).join(",");if("object"===typeof e){var n="keyframe_"+(0,o.hashObject)(e),r="@keyframes "+n+"{";return e instanceof i.default?e.forEach((function(e,n){r+=(0,a.generateCSS)(n,[e],t,u,!1)})):Object.keys(e).forEach((function(n){r+=(0,a.generateCSS)(n,[e[n]],t,u,!1)})),d(n,r+="}"),n}return e}},l={},c="",f=!1,d=function injectGeneratedCSSOnce(e,t){if(!l[e]){if(!f){if("undefined"===typeof document)throw new Error("Cannot automatically buffer without a document");f=!0,(0,r.default)(g)}c+=t,l[e]=!0}},h=function injectStyleOnce(e,t,n,r){var i=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];if(!l[e]){var o=(0,a.generateCSS)(t,n,i,u,r);d(e,o)}};t.injectStyleOnce=h;t.reset=function reset(){c="",l={},f=!1,s=null};t.startBuffering=function startBuffering(){if(f)throw new Error("Cannot buffer while already buffering");f=!0};var p=function flushToString(){f=!1;var e=c;return c="",e};t.flushToString=p;var g=function flushToStyleTag(){var e=p();e.length>0&&function injectStyleTag(e){if(null==s&&null==(s=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(s=document.createElement("style")).type="text/css",s.setAttribute("data-aphrodite",""),t.appendChild(s)}s.styleSheet?s.styleSheet.cssText+=e:s.appendChild(document.createTextNode(e))}(e)};t.flushToStyleTag=g;t.getRenderedClassNames=function getRenderedClassNames(){return Object.keys(l)};t.addRenderedClassNames=function addRenderedClassNames(e){e.forEach((function(e){l[e]=!0}))};t.injectAndGetClassName=function injectAndGetClassName(e,t,n){var r={classNameBits:[],definitionBits:[]};if(function processStyleDefinitions(e,t){for(var n=0;n<e.length;n+=1)e[n]&&(Array.isArray(e[n])?processStyleDefinitions(e[n],t):(t.classNameBits.push(e[n]._name),t.definitionBits.push(e[n]._definition)))}(t,r),0===r.classNameBits.length)return"";var i=void 0;return i=1===r.classNameBits.length?"_"+r.classNameBits[0]:"_"+(0,o.hashString)(r.classNameBits.join())+function getStyleDefinitionsLengthHash(e){return(e.reduce((function(e,t){return e+(t?t._len:0)}),0)%36).toString(36)}(t),h(i,"."+i,r.definitionBits,e,n),i}},function(e,t,n){"use strict";var r=n(460),i=[],a=[],o=r.makeRequestCallFromTimer((function throwFirstError(){if(a.length)throw a.shift()}));function asap(e){var t;(t=i.length?i.pop():new RawTask).task=e,r(t)}function RawTask(){this.task=null}e.exports=asap,RawTask.prototype.call=function(){try{this.task.call()}catch(e){asap.onerror?asap.onerror(e):(a.push(e),o())}finally{this.task=null,i[i.length]=this}}},function(e,t,n){"use strict";(function(t){function rawAsap(e){r.length||(n(),!0),r[r.length]=e}e.exports=rawAsap;var n,r=[],i=0,a=1024;function flush(){for(;i<r.length;){var e=i;if(i+=1,r[e].call(),i>a){for(var t=0,n=r.length-i;t<n;t++)r[t]=r[t+i];r.length-=i,i=0}}r.length=0,i=0,!1}var o="undefined"!==typeof t?t:self,s=o.MutationObserver||o.WebKitMutationObserver;function makeRequestCallFromTimer(e){return function requestCall(){var t=setTimeout(handleTimer,0),n=setInterval(handleTimer,50);function handleTimer(){clearTimeout(t),clearInterval(n),e()}}}n="function"===typeof s?function makeRequestCallFromMutationObserver(e){var t=1,n=new s(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function requestCall(){t=-t,r.data=t}}(flush):makeRequestCallFromTimer(flush),rawAsap.requestFlush=n,rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer}).call(this,n(19))},function(e,t,n){"use strict";var r=n(462);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n;"function"!==typeof(n=window.Element.prototype).matches&&(n.matches=n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||function matches(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)++n;return Boolean(t[n])}),"function"!==typeof n.closest&&(n.closest=function closest(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})},function(e,t,n){(function(e,r){var i;(function(){var a,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,h=2,p=4,g=1,m=2,v=1,y=2,_=4,b=8,x=16,w=32,k=64,S=128,E=256,T=512,C=30,O="...",A=800,R=16,D=1,P=2,M=1/0,j=9007199254740991,F=17976931348623157e292,I=NaN,L=4294967295,N=L-1,B=L>>>1,U=[["ary",S],["bind",v],["bindKey",y],["curry",b],["curryRight",x],["flip",T],["partial",w],["partialRight",k],["rearg",E]],z="[object Arguments]",q="[object Array]",W="[object AsyncFunction]",G="[object Boolean]",H="[object Date]",V="[object DOMException]",Y="[object Error]",$="[object Function]",X="[object GeneratorFunction]",K="[object Map]",J="[object Number]",Z="[object Null]",Q="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",ae="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",ce="[object Float32Array]",fe="[object Float64Array]",de="[object Int8Array]",he="[object Int16Array]",pe="[object Int32Array]",ge="[object Uint8Array]",me="[object Uint8ClampedArray]",ve="[object Uint16Array]",ye="[object Uint32Array]",_e=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,xe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,ke=/[&<>"']/g,Se=RegExp(we.source),Ee=RegExp(ke.source),Te=/<%-([\s\S]+?)%>/g,Ce=/<%([\s\S]+?)%>/g,Oe=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pe=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(Pe.source),je=/^\s+|\s+$/g,Fe=/^\s+/,Ie=/\s+$/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ze=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,Ge=/^[-+]0x[0-9a-f]+$/i,He=/^0b[01]+$/i,Ve=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,$e=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,Je=/['\n\r\u2028\u2029\\]/g,Ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",et="[\\ud800-\\udfff]",tt="["+Qe+"]",nt="["+Ze+"]",rt="\\d+",it="[\\u2700-\\u27bf]",at="[a-z\\xdf-\\xf6\\xf8-\\xff]",ot="[^\\ud800-\\udfff"+Qe+rt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",st="\\ud83c[\\udffb-\\udfff]",ut="[^\\ud800-\\udfff]",lt="(?:\\ud83c[\\udde6-\\uddff]){2}",ct="[\\ud800-\\udbff][\\udc00-\\udfff]",ft="[A-Z\\xc0-\\xd6\\xd8-\\xde]",dt="(?:"+at+"|"+ot+")",ht="(?:"+ft+"|"+ot+")",pt="(?:"+nt+"|"+st+")"+"?",gt="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[ut,lt,ct].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),mt="(?:"+[it,lt,ct].join("|")+")"+gt,vt="(?:"+[ut+nt+"?",nt,lt,ct,et].join("|")+")",yt=RegExp("['\u2019]","g"),_t=RegExp(nt,"g"),bt=RegExp(st+"(?="+st+")|"+vt+gt,"g"),xt=RegExp([ft+"?"+at+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[tt,ft,"$"].join("|")+")",ht+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[tt,ft+dt,"$"].join("|")+")",ft+"?"+dt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ft+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rt,mt].join("|"),"g"),wt=RegExp("[\\u200d\\ud800-\\udfff"+Ze+"\\ufe0e\\ufe0f]"),kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,St=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Et=-1,Tt={};Tt[ce]=Tt[fe]=Tt[de]=Tt[he]=Tt[pe]=Tt[ge]=Tt[me]=Tt[ve]=Tt[ye]=!0,Tt[z]=Tt[q]=Tt[ue]=Tt[G]=Tt[le]=Tt[H]=Tt[Y]=Tt[$]=Tt[K]=Tt[J]=Tt[Q]=Tt[te]=Tt[ne]=Tt[re]=Tt[oe]=!1;var Ct={};Ct[z]=Ct[q]=Ct[ue]=Ct[le]=Ct[G]=Ct[H]=Ct[ce]=Ct[fe]=Ct[de]=Ct[he]=Ct[pe]=Ct[K]=Ct[J]=Ct[Q]=Ct[te]=Ct[ne]=Ct[re]=Ct[ie]=Ct[ge]=Ct[me]=Ct[ve]=Ct[ye]=!0,Ct[Y]=Ct[$]=Ct[oe]=!1;var Ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},At=parseFloat,Rt=parseInt,Dt="object"==typeof e&&e&&e.Object===Object&&e,Pt="object"==typeof self&&self&&self.Object===Object&&self,Mt=Dt||Pt||Function("return this")(),jt=t&&!t.nodeType&&t,Ft=jt&&"object"==typeof r&&r&&!r.nodeType&&r,It=Ft&&Ft.exports===jt,Lt=It&&Dt.process,Nt=function(){try{var e=Ft&&Ft.require&&Ft.require("util").types;return e||Lt&&Lt.binding&&Lt.binding("util")}catch(t){}}(),Bt=Nt&&Nt.isArrayBuffer,Ut=Nt&&Nt.isDate,zt=Nt&&Nt.isMap,qt=Nt&&Nt.isRegExp,Wt=Nt&&Nt.isSet,Gt=Nt&&Nt.isTypedArray;function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function arrayAggregator(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function arrayEach(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function arrayEachRight(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function arrayEvery(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function arrayFilter(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function arrayIncludes(e,t){return!!(null==e?0:e.length)&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function arrayMap(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function arrayPush(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function arrayReduce(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function arrayReduceRight(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function arraySome(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ht=baseProperty("length");function baseFindKey(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function baseFindIndex(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function baseIndexOf(e,t,n){return t===t?function strictIndexOf(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):baseFindIndex(e,baseIsNaN,n)}function baseIndexOfWith(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function baseIsNaN(e){return e!==e}function baseMean(e,t){var n=null==e?0:e.length;return n?baseSum(e,t)/n:I}function baseProperty(e){return function(t){return null==t?a:t[e]}}function basePropertyOf(e){return function(t){return null==e?a:e[t]}}function baseReduce(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function baseSum(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function baseUnary(e){return function(t){return e(t)}}function baseValues(e,t){return arrayMap(t,(function(t){return e[t]}))}function cacheHas(e,t){return e.has(t)}function charsStartIndex(e,t){for(var n=-1,r=e.length;++n<r&&baseIndexOf(t,e[n],0)>-1;);return n}function charsEndIndex(e,t){for(var n=e.length;n--&&baseIndexOf(t,e[n],0)>-1;);return n}var Vt=basePropertyOf({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Yt=basePropertyOf({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function escapeStringChar(e){return"\\"+Ot[e]}function hasUnicode(e){return wt.test(e)}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function overArg(e,t){return function(n){return e(t(n))}}function replaceHolders(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==f||(e[n]=f,a[i++]=n)}return a}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function setToPairs(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function stringSize(e){return hasUnicode(e)?function unicodeSize(e){var t=bt.lastIndex=0;for(;bt.test(e);)++t;return t}(e):Ht(e)}function stringToArray(e){return hasUnicode(e)?function unicodeToArray(e){return e.match(bt)||[]}(e):function asciiToArray(e){return e.split("")}(e)}var $t=basePropertyOf({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Xt=function runInContext(e){var t=(e=null==e?Mt:Xt.defaults(Mt.Object(),e,Xt.pick(Mt,St))).Array,n=e.Date,r=e.Error,i=e.Function,Ze=e.Math,Qe=e.Object,et=e.RegExp,tt=e.String,nt=e.TypeError,rt=t.prototype,it=i.prototype,at=Qe.prototype,ot=e["__core-js_shared__"],st=it.toString,ut=at.hasOwnProperty,lt=0,ct=function(){var e=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ft=at.toString,dt=st.call(Qe),ht=Mt._,pt=et("^"+st.call(ut).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=It?e.Buffer:a,mt=e.Symbol,vt=e.Uint8Array,bt=gt?gt.allocUnsafe:a,wt=overArg(Qe.getPrototypeOf,Qe),Ot=Qe.create,Dt=at.propertyIsEnumerable,Pt=rt.splice,jt=mt?mt.isConcatSpreadable:a,Ft=mt?mt.iterator:a,Lt=mt?mt.toStringTag:a,Nt=function(){try{var e=getNative(Qe,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ht=e.clearTimeout!==Mt.clearTimeout&&e.clearTimeout,Kt=n&&n.now!==Mt.Date.now&&n.now,Jt=e.setTimeout!==Mt.setTimeout&&e.setTimeout,Zt=Ze.ceil,Qt=Ze.floor,en=Qe.getOwnPropertySymbols,tn=gt?gt.isBuffer:a,nn=e.isFinite,rn=rt.join,an=overArg(Qe.keys,Qe),on=Ze.max,sn=Ze.min,un=n.now,ln=e.parseInt,cn=Ze.random,fn=rt.reverse,dn=getNative(e,"DataView"),hn=getNative(e,"Map"),pn=getNative(e,"Promise"),gn=getNative(e,"Set"),mn=getNative(e,"WeakMap"),vn=getNative(Qe,"create"),yn=mn&&new mn,_n={},bn=toSource(dn),xn=toSource(hn),wn=toSource(pn),kn=toSource(gn),Sn=toSource(mn),En=mt?mt.prototype:a,Tn=En?En.valueOf:a,Cn=En?En.toString:a;function lodash(e){if(isObjectLike(e)&&!Dr(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(ut.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}var On=function(){function object(){}return function(e){if(!isObject(e))return{};if(Ot)return Ot(e);object.prototype=e;var t=new object;return object.prototype=a,t}}();function baseLodash(){}function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=L,this.__views__=[]}function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new MapCache;++t<n;)this.add(e[t])}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function arrayLikeKeys(e,t){var n=Dr(e),r=!n&&Rr(e),i=!n&&!r&&Mr(e),a=!n&&!r&&!i&&Nr(e),o=n||r||i||a,s=o?baseTimes(e.length,tt):[],u=s.length;for(var l in e)!t&&!ut.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||isIndex(l,u))||s.push(l);return s}function arraySample(e){var t=e.length;return t?e[baseRandom(0,t-1)]:a}function arraySampleSize(e,t){return shuffleSelf(copyArray(e),baseClamp(t,0,e.length))}function arrayShuffle(e){return shuffleSelf(copyArray(e))}function assignMergeValue(e,t,n){(n===a||eq(e[t],n))&&(n!==a||t in e)||baseAssignValue(e,t,n)}function assignValue(e,t,n){var r=e[t];ut.call(e,t)&&eq(r,n)&&(n!==a||t in e)||baseAssignValue(e,t,n)}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}function baseAggregator(e,t,n,r){return An(e,(function(e,i,a){t(r,e,n(e),a)})),r}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseAssignValue(e,t,n){"__proto__"==t&&Nt?Nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function baseAt(e,n){for(var r=-1,i=n.length,o=t(i),s=null==e;++r<i;)o[r]=s?a:get(e,n[r]);return o}function baseClamp(e,t,n){return e===e&&(n!==a&&(e=e<=n?e:n),t!==a&&(e=e>=t?e:t)),e}function baseClone(e,t,n,r,i,o){var s,u=t&d,l=t&h,c=t&p;if(n&&(s=i?n(e,r,i,o):n(e)),s!==a)return s;if(!isObject(e))return e;var f=Dr(e);if(f){if(s=function initCloneArray(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&ut.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return copyArray(e,s)}else{var g=zn(e),m=g==$||g==X;if(Mr(e))return cloneBuffer(e,u);if(g==Q||g==z||m&&!i){if(s=l||m?{}:initCloneObject(e),!u)return l?function copySymbolsIn(e,t){return copyObject(e,Un(e),t)}(e,function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}(s,e)):function copySymbols(e,t){return copyObject(e,Bn(e),t)}(e,baseAssign(s,e))}else{if(!Ct[g])return i?e:{};s=function initCloneByTag(e,t,n){var r=e.constructor;switch(t){case ue:return cloneArrayBuffer(e);case G:case H:return new r(+e);case le:return function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ce:case fe:case de:case he:case pe:case ge:case me:case ve:case ye:return cloneTypedArray(e,n);case K:return new r;case J:case re:return new r(e);case te:return function cloneRegExp(e){var t=new e.constructor(e.source,We.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ne:return new r;case ie:return function cloneSymbol(e){return Tn?Qe(Tn.call(e)):{}}(e)}}(e,g,u)}}o||(o=new Stack);var v=o.get(e);if(v)return v;o.set(e,s),Lr(e)?e.forEach((function(r){s.add(baseClone(r,t,n,r,e,o))})):Fr(e)&&e.forEach((function(r,i){s.set(i,baseClone(r,t,n,i,e,o))}));var y=f?a:(c?l?getAllKeysIn:getAllKeys:l?keysIn:keys)(e);return arrayEach(y||e,(function(r,i){y&&(r=e[i=r]),assignValue(s,i,baseClone(r,t,n,i,e,o))})),s}function baseConformsTo(e,t,n){var r=n.length;if(null==e)return!r;for(e=Qe(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return!1}return!0}function baseDelay(e,t,n){if("function"!=typeof e)throw new nt(u);return Gn((function(){e.apply(a,n)}),t)}function baseDifference(e,t,n,r){var i=-1,a=arrayIncludes,s=!0,u=e.length,l=[],c=t.length;if(!u)return l;n&&(t=arrayMap(t,baseUnary(n))),r?(a=arrayIncludesWith,s=!1):t.length>=o&&(a=cacheHas,s=!1,t=new SetCache(t));e:for(;++i<u;){var f=e[i],d=null==n?f:n(f);if(f=r||0!==f?f:0,s&&d===d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(f)}else a(t,d,r)||l.push(f)}return l}lodash.templateSettings={escape:Te,evaluate:Ce,interpolate:Oe,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=On(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=On(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=function hashClear(){this.__data__=vn?vn(null):{},this.size=0},Hash.prototype.delete=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hash.prototype.get=function hashGet(e){var t=this.__data__;if(vn){var n=t[e];return n===l?a:n}return ut.call(t,e)?t[e]:a},Hash.prototype.has=function hashHas(e){var t=this.__data__;return vn?t[e]!==a:ut.call(t,e)},Hash.prototype.set=function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vn&&t===a?l:t,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():Pt.call(t,n,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?a:t[n][1]},ListCache.prototype.has=function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1},ListCache.prototype.set=function listCacheSet(e,t){var n=this.__data__,r=assocIndexOf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(hn||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t},MapCache.prototype.get=function mapCacheGet(e){return getMapData(this,e).get(e)},MapCache.prototype.has=function mapCacheHas(e){return getMapData(this,e).has(e)},MapCache.prototype.set=function mapCacheSet(e,t){var n=getMapData(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},SetCache.prototype.add=SetCache.prototype.push=function setCacheAdd(e){return this.__data__.set(e,l),this},SetCache.prototype.has=function setCacheHas(e){return this.__data__.has(e)},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Stack.prototype.get=function stackGet(e){return this.__data__.get(e)},Stack.prototype.has=function stackHas(e){return this.__data__.has(e)},Stack.prototype.set=function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var r=n.__data__;if(!hn||r.length<o-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(r)}return n.set(e,t),this.size=n.size,this};var An=createBaseEach(baseForOwn),Rn=createBaseEach(baseForOwnRight,!0);function baseEvery(e,t){var n=!0;return An(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function baseExtremum(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(u===a?s===s&&!isSymbol(s):n(s,u)))var u=s,l=o}return l}function baseFilter(e,t){var n=[];return An(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function baseFlatten(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=isFlattenable),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?baseFlatten(s,t-1,n,r,i):arrayPush(i,s):r||(i[i.length]=s)}return i}var Dn=createBaseFor(),Pn=createBaseFor(!0);function baseForOwn(e,t){return e&&Dn(e,t,keys)}function baseForOwnRight(e,t){return e&&Pn(e,t,keys)}function baseFunctions(e,t){return arrayFilter(t,(function(t){return isFunction(e[t])}))}function baseGet(e,t){for(var n=0,r=(t=castPath(t,e)).length;null!=e&&n<r;)e=e[toKey(t[n++])];return n&&n==r?e:a}function baseGetAllKeys(e,t,n){var r=t(e);return Dr(e)?r:arrayPush(r,n(e))}function baseGetTag(e){return null==e?e===a?ae:Z:Lt&&Lt in Qe(e)?function getRawTag(e){var t=ut.call(e,Lt),n=e[Lt];try{e[Lt]=a;var r=!0}catch(o){}var i=ft.call(e);r&&(t?e[Lt]=n:delete e[Lt]);return i}(e):function objectToString(e){return ft.call(e)}(e)}function baseGt(e,t){return e>t}function baseHas(e,t){return null!=e&&ut.call(e,t)}function baseHasIn(e,t){return null!=e&&t in Qe(e)}function baseIntersection(e,n,r){for(var i=r?arrayIncludesWith:arrayIncludes,o=e[0].length,s=e.length,u=s,l=t(s),c=1/0,f=[];u--;){var d=e[u];u&&n&&(d=arrayMap(d,baseUnary(n))),c=sn(d.length,c),l[u]=!r&&(n||o>=120&&d.length>=120)?new SetCache(u&&d):a}d=e[0];var h=-1,p=l[0];e:for(;++h<o&&f.length<c;){var g=d[h],m=n?n(g):g;if(g=r||0!==g?g:0,!(p?cacheHas(p,m):i(f,m,r))){for(u=s;--u;){var v=l[u];if(!(v?cacheHas(v,m):i(e[u],m,r)))continue e}p&&p.push(m),f.push(g)}}return f}function baseInvoke(e,t,n){var r=null==(e=parent(e,t=castPath(t,e)))?e:e[toKey(last(t))];return null==r?a:apply(r,e,n)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==z}function baseIsEqual(e,t,n,r,i){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!==e&&t!==t:function baseIsEqualDeep(e,t,n,r,i,o){var s=Dr(e),u=Dr(t),l=s?q:zn(e),c=u?q:zn(t),f=(l=l==z?Q:l)==Q,d=(c=c==z?Q:c)==Q,h=l==c;if(h&&Mr(e)){if(!Mr(t))return!1;s=!0,f=!1}if(h&&!f)return o||(o=new Stack),s||Nr(e)?equalArrays(e,t,n,r,i,o):function equalByTag(e,t,n,r,i,a,o){switch(n){case le:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ue:return!(e.byteLength!=t.byteLength||!a(new vt(e),new vt(t)));case G:case H:case J:return eq(+e,+t);case Y:return e.name==t.name&&e.message==t.message;case te:case re:return e==t+"";case K:var s=mapToArray;case ne:var u=r&g;if(s||(s=setToArray),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=m,o.set(e,t);var c=equalArrays(s(e),s(t),r,i,a,o);return o.delete(e),c;case ie:if(Tn)return Tn.call(e)==Tn.call(t)}return!1}(e,t,l,n,r,i,o);if(!(n&g)){var p=f&&ut.call(e,"__wrapped__"),v=d&&ut.call(t,"__wrapped__");if(p||v){var y=p?e.value():e,_=v?t.value():t;return o||(o=new Stack),i(y,_,n,r,o)}}if(!h)return!1;return o||(o=new Stack),function equalObjects(e,t,n,r,i,o){var s=n&g,u=getAllKeys(e),l=u.length,c=getAllKeys(t).length;if(l!=c&&!s)return!1;var f=l;for(;f--;){var d=u[f];if(!(s?d in t:ut.call(t,d)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);var m=s;for(;++f<l;){d=u[f];var v=e[d],y=t[d];if(r)var _=s?r(y,v,d,t,e,o):r(v,y,d,e,t,o);if(!(_===a?v===y||i(v,y,n,r,o):_)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var b=e.constructor,x=t.constructor;b!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,r,i,o)}(e,t,n,r,baseIsEqual,i))}function baseIsMatch(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Qe(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<o;){var l=(u=n[i])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===a&&!(l in e))return!1}else{var d=new Stack;if(r)var h=r(c,f,l,e,t,d);if(!(h===a?baseIsEqual(f,c,g|m,r,d):h))return!1}}return!0}function baseIsNative(e){return!(!isObject(e)||function isMasked(e){return!!ct&&ct in e}(e))&&(isFunction(e)?pt:Ve).test(toSource(e))}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?Dr(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return an(e);var t=[];for(var n in Qe(e))ut.call(e,n)&&"constructor"!=n&&t.push(n);return t}function baseKeysIn(e){if(!isObject(e))return function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Qe(e))t.push(n);return t}(e);var t=isPrototype(e),n=[];for(var r in e)("constructor"!=r||!t&&ut.call(e,r))&&n.push(r);return n}function baseLt(e,t){return e<t}function baseMap(e,n){var r=-1,i=isArrayLike(e)?t(e.length):[];return An(e,(function(e,t,a){i[++r]=n(e,t,a)})),i}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(n){return n===e||baseIsMatch(n,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(n){var r=get(n,e);return r===a&&r===t?hasIn(n,e):baseIsEqual(t,r,g|m)}}function baseMerge(e,t,n,r,i){e!==t&&Dn(t,(function(o,s){if(i||(i=new Stack),isObject(o))!function baseMergeDeep(e,t,n,r,i,o,s){var u=safeGet(e,n),l=safeGet(t,n),c=s.get(l);if(c)return void assignMergeValue(e,n,c);var f=o?o(u,l,n+"",e,t,s):a,d=f===a;if(d){var h=Dr(l),p=!h&&Mr(l),g=!h&&!p&&Nr(l);f=l,h||p||g?Dr(u)?f=u:isArrayLikeObject(u)?f=copyArray(u):p?(d=!1,f=cloneBuffer(l,!0)):g?(d=!1,f=cloneTypedArray(l,!0)):f=[]:isPlainObject(l)||Rr(l)?(f=u,Rr(u)?f=toPlainObject(u):isObject(u)&&!isFunction(u)||(f=initCloneObject(l))):d=!1}d&&(s.set(l,f),i(f,l,r,o,s),s.delete(l));assignMergeValue(e,n,f)}(e,t,s,n,baseMerge,r,i);else{var u=r?r(safeGet(e,s),o,s+"",e,t,i):a;u===a&&(u=o),assignMergeValue(e,s,u)}}),keysIn)}function baseNth(e,t){var n=e.length;if(n)return isIndex(t+=t<0?n:0,n)?e[t]:a}function baseOrderBy(e,t,n){var r=-1;return t=arrayMap(t.length?t:[identity],baseUnary(getIteratee())),function baseSortBy(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(baseMap(e,(function(e,n,i){return{criteria:arrayMap(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function compareMultiple(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var u=compareAscending(i[r],a[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)}))}function basePickBy(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=baseGet(e,o);n(s,o)&&baseSet(a,castPath(o,e),s)}return a}function basePullAll(e,t,n,r){var i=r?baseIndexOfWith:baseIndexOf,a=-1,o=t.length,s=e;for(e===t&&(t=copyArray(t)),n&&(s=arrayMap(e,baseUnary(n)));++a<o;)for(var u=0,l=t[a],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Pt.call(s,u,1),Pt.call(e,u,1);return e}function basePullAt(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;isIndex(i)?Pt.call(e,i,1):baseUnset(e,i)}}return e}function baseRandom(e,t){return e+Qt(cn()*(t-e+1))}function baseRepeat(e,t){var n="";if(!e||t<1||t>j)return n;do{t%2&&(n+=e),(t=Qt(t/2))&&(e+=e)}while(t);return n}function baseRest(e,t){return Hn(overRest(e,t,identity),e+"")}function baseSample(e){return arraySample(values(e))}function baseSampleSize(e,t){var n=values(e);return shuffleSelf(n,baseClamp(t,0,n.length))}function baseSet(e,t,n,r){if(!isObject(e))return e;for(var i=-1,o=(t=castPath(t,e)).length,s=o-1,u=e;null!=u&&++i<o;){var l=toKey(t[i]),c=n;if(i!=s){var f=u[l];(c=r?r(f,l,u):a)===a&&(c=isObject(f)?f:isIndex(t[i+1])?[]:{})}assignValue(u,l,c),u=u[l]}return e}var Mn=yn?function(e,t){return yn.set(e,t),e}:identity,jn=Nt?function(e,t){return Nt(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity;function baseShuffle(e){return shuffleSelf(values(e))}function baseSlice(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),(r=r>a?a:r)<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var o=t(a);++i<a;)o[i]=e[i+n];return o}function baseSome(e,t){var n;return An(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function baseSortedIndex(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=B){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!isSymbol(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return baseSortedIndexBy(e,t,identity,n)}function baseSortedIndexBy(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,s=t!==t,u=null===t,l=isSymbol(t),c=t===a;i<o;){var f=Qt((i+o)/2),d=n(e[f]),h=d!==a,p=null===d,g=d===d,m=isSymbol(d);if(s)var v=r||g;else v=c?g&&(r||h):u?g&&h&&(r||!p):l?g&&h&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?i=f+1:o=f}return sn(o,N)}function baseSortedUniq(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!eq(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function baseToNumber(e){return"number"==typeof e?e:isSymbol(e)?I:+e}function baseToString(e){if("string"==typeof e)return e;if(Dr(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return Cn?Cn.call(e):"";var t=e+"";return"0"==t&&1/e==-M?"-0":t}function baseUniq(e,t,n){var r=-1,i=arrayIncludes,a=e.length,s=!0,u=[],l=u;if(n)s=!1,i=arrayIncludesWith;else if(a>=o){var c=t?null:Ln(e);if(c)return setToArray(c);s=!1,i=cacheHas,l=new SetCache}else l=t?[]:u;e:for(;++r<a;){var f=e[r],d=t?t(f):f;if(f=n||0!==f?f:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),u.push(f)}else i(l,d,n)||(l!==u&&l.push(d),u.push(f))}return u}function baseUnset(e,t){return null==(e=parent(e,t=castPath(t,e)))||delete e[toKey(last(t))]}function baseUpdate(e,t,n,r){return baseSet(e,t,n(baseGet(e,t)),r)}function baseWhile(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?baseSlice(e,r?0:a,r?a+1:i):baseSlice(e,r?a+1:0,r?i:a)}function baseWrapperValue(e,t){var n=e;return n instanceof LazyWrapper&&(n=n.value()),arrayReduce(t,(function(e,t){return t.func.apply(t.thisArg,arrayPush([e],t.args))}),n)}function baseXor(e,n,r){var i=e.length;if(i<2)return i?baseUniq(e[0]):[];for(var a=-1,o=t(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=baseDifference(o[a]||s,e[u],n,r));return baseUniq(baseFlatten(o,1),n,r)}function baseZipObject(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var u=r<o?t[r]:a;n(s,e[r],u)}return s}function castArrayLikeObject(e){return isArrayLikeObject(e)?e:[]}function castFunction(e){return"function"==typeof e?e:identity}function castPath(e,t){return Dr(e)?e:isKey(e,t)?[e]:Vn(toString(e))}var Fn=baseRest;function castSlice(e,t,n){var r=e.length;return n=n===a?r:n,!t&&n>=r?e:baseSlice(e,t,n)}var In=Ht||function(e){return Mt.clearTimeout(e)};function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,r=bt?bt(n):new e.constructor(n);return e.copy(r),r}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new vt(t).set(new vt(e)),t}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function compareAscending(e,t){if(e!==t){var n=e!==a,r=null===e,i=e===e,o=isSymbol(e),s=t!==a,u=null===t,l=t===t,c=isSymbol(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!l)return-1}return 0}function composeArgs(e,n,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,l=n.length,c=on(o-s,0),f=t(l+c),d=!i;++u<l;)f[u]=n[u];for(;++a<s;)(d||a<o)&&(f[r[a]]=e[a]);for(;c--;)f[u++]=e[a++];return f}function composeArgsRight(e,n,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,l=-1,c=n.length,f=on(o-u,0),d=t(f+c),h=!i;++a<f;)d[a]=e[a];for(var p=a;++l<c;)d[p+l]=n[l];for(;++s<u;)(h||a<o)&&(d[p+r[s]]=e[a++]);return d}function copyArray(e,n){var r=-1,i=e.length;for(n||(n=t(i));++r<i;)n[r]=e[r];return n}function copyObject(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=r?r(n[u],e[u],u,n,e):a;l===a&&(l=e[u]),i?baseAssignValue(n,u,l):assignValue(n,u,l)}return n}function createAggregator(e,t){return function(n,r){var i=Dr(n)?arrayAggregator:baseAggregator,a=t?t():{};return i(n,e,getIteratee(r,2),a)}}function createAssigner(e){return baseRest((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;for(o=e.length>3&&"function"==typeof o?(i--,o):a,s&&isIterateeCall(n[0],n[1],s)&&(o=i<3?a:o,i=1),t=Qe(t);++r<i;){var u=n[r];u&&e(t,u,r,o)}return t}))}function createBaseEach(e,t){return function(n,r){if(null==n)return n;if(!isArrayLike(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Qe(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function createBaseFor(e){return function(t,n,r){for(var i=-1,a=Qe(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function createCaseFirst(e){return function(t){var n=hasUnicode(t=toString(t))?stringToArray(t):a,r=n?n[0]:t.charAt(0),i=n?castSlice(n,1).join(""):t.slice(1);return r[e]()+i}}function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(yt,"")),e,"")}}function createCtor(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=On(e.prototype),r=e.apply(n,t);return isObject(r)?r:n}}function createFind(e){return function(t,n,r){var i=Qe(t);if(!isArrayLike(t)){var o=getIteratee(n,3);t=keys(t),n=function predicate(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function createFlow(e){return flatRest((function(t){var n=t.length,r=n,i=LodashWrapper.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new nt(u);if(i&&!s&&"wrapper"==getFuncName(o))var s=new LodashWrapper([],!0)}for(r=s?r:n;++r<n;){var l=getFuncName(o=t[r]),c="wrapper"==l?Nn(o):a;s=c&&isLaziable(c[0])&&c[1]==(S|b|w|E)&&!c[4].length&&1==c[9]?s[getFuncName(c[0])].apply(s,c[3]):1==o.length&&isLaziable(o)?s[l]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Dr(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function createHybrid(e,n,r,i,o,s,u,l,c,f){var d=n&S,h=n&v,p=n&y,g=n&(b|x),m=n&T,_=p?a:createCtor(e);return function wrapper(){for(var v=arguments.length,y=t(v),b=v;b--;)y[b]=arguments[b];if(g)var x=getHolder(wrapper),w=function countHolders(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,x);if(i&&(y=composeArgs(y,i,o,g)),s&&(y=composeArgsRight(y,s,u,g)),v-=w,g&&v<f){var k=replaceHolders(y,x);return createRecurry(e,n,createHybrid,wrapper.placeholder,r,y,k,l,c,f-v)}var S=h?r:this,E=p?S[e]:e;return v=y.length,l?y=function reorder(e,t){var n=e.length,r=sn(t.length,n),i=copyArray(e);for(;r--;){var o=t[r];e[r]=isIndex(o,n)?i[o]:a}return e}(y,l):m&&v>1&&y.reverse(),d&&c<v&&(y.length=c),this&&this!==Mt&&this instanceof wrapper&&(E=_||createCtor(E)),E.apply(S,y)}}function createInverter(e,t){return function(n,r){return function baseInverter(e,t,n,r){return baseForOwn(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function createMathOperation(e,t){return function(n,r){var i;if(n===a&&r===a)return t;if(n!==a&&(i=n),r!==a){if(i===a)return r;"string"==typeof n||"string"==typeof r?(n=baseToString(n),r=baseToString(r)):(n=baseToNumber(n),r=baseToNumber(r)),i=e(n,r)}return i}}function createOver(e){return flatRest((function(t){return t=arrayMap(t,baseUnary(getIteratee())),baseRest((function(n){var r=this;return e(t,(function(e){return apply(e,r,n)}))}))}))}function createPadding(e,t){var n=(t=t===a?" ":baseToString(t)).length;if(n<2)return n?baseRepeat(t,e):t;var r=baseRepeat(t,Zt(e/stringSize(t)));return hasUnicode(t)?castSlice(stringToArray(r),0,e).join(""):r.slice(0,e)}function createRange(e){return function(n,r,i){return i&&"number"!=typeof i&&isIterateeCall(n,r,i)&&(r=i=a),n=toFinite(n),r===a?(r=n,n=0):r=toFinite(r),function baseRange(e,n,r,i){for(var a=-1,o=on(Zt((n-e)/(r||1)),0),s=t(o);o--;)s[i?o:++a]=e,e+=r;return s}(n,r,i=i===a?n<r?1:-1:toFinite(i),e)}}function createRelationalOperation(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=toNumber(t),n=toNumber(n)),e(t,n)}}function createRecurry(e,t,n,r,i,o,s,u,l,c){var f=t&b;t|=f?w:k,(t&=~(f?k:w))&_||(t&=~(v|y));var d=[e,t,i,f?o:a,f?s:a,f?a:o,f?a:s,u,l,c],h=n.apply(a,d);return isLaziable(e)&&Wn(h,d),h.placeholder=r,setWrapToString(h,e,t)}function createRound(e){var t=Ze[e];return function(e,n){if(e=toNumber(e),(n=null==n?0:sn(toInteger(n),292))&&nn(e)){var r=(toString(e)+"e").split("e");return+((r=(toString(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ln=gn&&1/setToArray(new gn([,-0]))[1]==M?function(e){return new gn(e)}:noop;function createToPairs(e){return function(t){var n=zn(t);return n==K?mapToArray(t):n==ne?setToPairs(t):function baseToPairs(e,t){return arrayMap(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function createWrap(e,n,r,i,o,s,l,c){var d=n&y;if(!d&&"function"!=typeof e)throw new nt(u);var h=i?i.length:0;if(h||(n&=~(w|k),i=o=a),l=l===a?l:on(toInteger(l),0),c=c===a?c:toInteger(c),h-=o?o.length:0,n&k){var p=i,g=o;i=o=a}var m=d?a:Nn(e),T=[e,n,r,i,o,p,g,s,l,c];if(m&&function mergeData(e,t){var n=e[1],r=t[1],i=n|r,a=i<(v|y|S),o=r==S&&n==b||r==S&&n==E&&e[7].length<=t[8]||r==(S|E)&&t[7].length<=t[8]&&n==b;if(!a&&!o)return e;r&v&&(e[2]=t[2],i|=n&v?0:_);var s=t[3];if(s){var u=e[3];e[3]=u?composeArgs(u,s,t[4]):s,e[4]=u?replaceHolders(e[3],f):t[4]}(s=t[5])&&(u=e[5],e[5]=u?composeArgsRight(u,s,t[6]):s,e[6]=u?replaceHolders(e[5],f):t[6]);(s=t[7])&&(e[7]=s);r&S&&(e[8]=null==e[8]?t[8]:sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);return e[0]=t[0],e[1]=i,e}(T,m),e=T[0],n=T[1],r=T[2],i=T[3],o=T[4],!(c=T[9]=T[9]===a?d?0:e.length:on(T[9]-h,0))&&n&(b|x)&&(n&=~(b|x)),n&&n!=v)C=n==b||n==x?function createCurry(e,n,r){var i=createCtor(e);return function wrapper(){for(var o=arguments.length,s=t(o),u=o,l=getHolder(wrapper);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:replaceHolders(s,l);return(o-=c.length)<r?createRecurry(e,n,createHybrid,wrapper.placeholder,a,s,c,a,a,r-o):apply(this&&this!==Mt&&this instanceof wrapper?i:e,this,s)}}(e,n,c):n!=w&&n!=(v|w)||o.length?createHybrid.apply(a,T):function createPartial(e,n,r,i){var a=n&v,o=createCtor(e);return function wrapper(){for(var n=-1,s=arguments.length,u=-1,l=i.length,c=t(l+s),f=this&&this!==Mt&&this instanceof wrapper?o:e;++u<l;)c[u]=i[u];for(;s--;)c[u++]=arguments[++n];return apply(f,a?r:this,c)}}(e,n,r,i);else var C=function createBind(e,t,n){var r=t&v,i=createCtor(e);return function wrapper(){return(this&&this!==Mt&&this instanceof wrapper?i:e).apply(r?n:this,arguments)}}(e,n,r);return setWrapToString((m?Mn:Wn)(C,T),e,n)}function customDefaultsAssignIn(e,t,n,r){return e===a||eq(e,at[n])&&!ut.call(r,n)?t:e}function customDefaultsMerge(e,t,n,r,i,o){return isObject(e)&&isObject(t)&&(o.set(t,e),baseMerge(e,t,a,customDefaultsMerge,o),o.delete(t)),e}function customOmitClone(e){return isPlainObject(e)?a:e}function equalArrays(e,t,n,r,i,o){var s=n&g,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var f=-1,d=!0,h=n&m?new SetCache:a;for(o.set(e,t),o.set(t,e);++f<u;){var p=e[f],v=t[f];if(r)var y=s?r(v,p,f,t,e,o):r(p,v,f,e,t,o);if(y!==a){if(y)continue;d=!1;break}if(h){if(!arraySome(t,(function(e,t){if(!cacheHas(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function flatRest(e){return Hn(overRest(e,a,flatten),e+"")}function getAllKeys(e){return baseGetAllKeys(e,keys,Bn)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,Un)}var Nn=yn?function(e){return yn.get(e)}:noop;function getFuncName(e){for(var t=e.name+"",n=_n[t],r=ut.call(_n,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function getHolder(e){return(ut.call(lodash,"placeholder")?lodash:e).placeholder}function getIteratee(){var e=lodash.iteratee||iteratee;return e=e===iteratee?baseIteratee:e,arguments.length?e(arguments[0],arguments[1]):e}function getMapData(e,t){var n=e.__data__;return function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function getMatchData(e){for(var t=keys(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,isStrictComparable(i)]}return t}function getNative(e,t){var n=function getValue(e,t){return null==e?a:e[t]}(e,t);return baseIsNative(n)?n:a}var Bn=en?function(e){return null==e?[]:(e=Qe(e),arrayFilter(en(e),(function(t){return Dt.call(e,t)})))}:stubArray,Un=en?function(e){for(var t=[];e;)arrayPush(t,Bn(e)),e=wt(e);return t}:stubArray,zn=baseGetTag;function hasPath(e,t,n){for(var r=-1,i=(t=castPath(t,e)).length,a=!1;++r<i;){var o=toKey(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&isLength(i)&&isIndex(o,i)&&(Dr(e)||Rr(e))}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:On(wt(e))}function isFlattenable(e){return Dr(e)||Rr(e)||!!(jt&&e&&e[jt])}function isIndex(e,t){var n=typeof e;return!!(t=null==t?j:t)&&("number"==n||"symbol"!=n&&$e.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=typeof t;return!!("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n)&&eq(n[t],e)}function isKey(e,t){if(Dr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!isSymbol(e))||(Re.test(e)||!Ae.test(e)||null!=t&&e in Qe(t))}function isLaziable(e){var t=getFuncName(e),n=lodash[t];if("function"!=typeof n||!(t in LazyWrapper.prototype))return!1;if(e===n)return!0;var r=Nn(n);return!!r&&e===r[0]}(dn&&zn(new dn(new ArrayBuffer(1)))!=le||hn&&zn(new hn)!=K||pn&&"[object Promise]"!=zn(pn.resolve())||gn&&zn(new gn)!=ne||mn&&zn(new mn)!=oe)&&(zn=function getTag(e){var t=baseGetTag(e),n=t==Q?e.constructor:a,r=n?toSource(n):"";if(r)switch(r){case bn:return le;case xn:return K;case wn:return"[object Promise]";case kn:return ne;case Sn:return oe}return t});var qn=ot?isFunction:stubFalse;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||at)}function isStrictComparable(e){return e===e&&!isObject(e)}function matchesStrictComparable(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==a||e in Qe(n)))}}function overRest(e,n,r){return n=on(n===a?e.length-1:n,0),function(){for(var i=arguments,a=-1,o=on(i.length-n,0),s=t(o);++a<o;)s[a]=i[n+a];a=-1;for(var u=t(n+1);++a<n;)u[a]=i[a];return u[n]=r(s),apply(e,this,u)}}function parent(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}function safeGet(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Wn=shortOut(Mn),Gn=Jt||function(e,t){return Mt.setTimeout(e,t)},Hn=shortOut(jn);function setWrapToString(e,t,n){var r=t+"";return Hn(e,function insertWrapDetails(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Le,"{\n/* [wrapped with "+t+"] */\n")}(r,function updateWrapDetails(e,t){return arrayEach(U,(function(n){var r="_."+n[0];t&n[1]&&!arrayIncludes(e,r)&&e.push(r)})),e.sort()}(function getWrapDetails(e){var t=e.match(Ne);return t?t[1].split(Be):[]}(r),n)))}function shortOut(e){var t=0,n=0;return function(){var r=un(),i=R-(r-n);if(n=r,i>0){if(++t>=A)return arguments[0]}else t=0;return e.apply(a,arguments)}}function shuffleSelf(e,t){var n=-1,r=e.length,i=r-1;for(t=t===a?r:t;++n<t;){var o=baseRandom(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Vn=function memoizeCapped(e){var t=memoize(e,(function(e){return n.size===c&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(De,(function(e,n,r,i){t.push(r?i.replace(ze,"$1"):n||e)})),t}));function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-M?"-0":t}function toSource(e){if(null!=e){try{return st.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function wrapperClone(e){if(e instanceof LazyWrapper)return e.clone();var t=new LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Yn=baseRest((function(e,t){return isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0)):[]})),$n=baseRest((function(e,t){var n=last(t);return isArrayLikeObject(n)&&(n=a),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),getIteratee(n,2)):[]})),Xn=baseRest((function(e,t){var n=last(t);return isArrayLikeObject(n)&&(n=a),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),a,n):[]}));function findIndex(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:toInteger(n);return i<0&&(i=on(r+i,0)),baseFindIndex(e,getIteratee(t,3),i)}function findLastIndex(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==a&&(i=toInteger(n),i=n<0?on(r+i,0):sn(i,r-1)),baseFindIndex(e,getIteratee(t,3),i,!0)}function flatten(e){return(null==e?0:e.length)?baseFlatten(e,1):[]}function head(e){return e&&e.length?e[0]:a}var Kn=baseRest((function(e){var t=arrayMap(e,castArrayLikeObject);return t.length&&t[0]===e[0]?baseIntersection(t):[]})),Jn=baseRest((function(e){var t=last(e),n=arrayMap(e,castArrayLikeObject);return t===last(n)?t=a:n.pop(),n.length&&n[0]===e[0]?baseIntersection(n,getIteratee(t,2)):[]})),Zn=baseRest((function(e){var t=last(e),n=arrayMap(e,castArrayLikeObject);return(t="function"==typeof t?t:a)&&n.pop(),n.length&&n[0]===e[0]?baseIntersection(n,a,t):[]}));function last(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Qn=baseRest(pullAll);function pullAll(e,t){return e&&e.length&&t&&t.length?basePullAll(e,t):e}var er=flatRest((function(e,t){var n=null==e?0:e.length,r=baseAt(e,t);return basePullAt(e,arrayMap(t,(function(e){return isIndex(e,n)?+e:e})).sort(compareAscending)),r}));function reverse(e){return null==e?e:fn.call(e)}var tr=baseRest((function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))})),nr=baseRest((function(e){var t=last(e);return isArrayLikeObject(t)&&(t=a),baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),getIteratee(t,2))})),rr=baseRest((function(e){var t=last(e);return t="function"==typeof t?t:a,baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),a,t)}));function unzip(e){if(!e||!e.length)return[];var t=0;return e=arrayFilter(e,(function(e){if(isArrayLikeObject(e))return t=on(e.length,t),!0})),baseTimes(t,(function(t){return arrayMap(e,baseProperty(t))}))}function unzipWith(e,t){if(!e||!e.length)return[];var n=unzip(e);return null==t?n:arrayMap(n,(function(e){return apply(t,a,e)}))}var ir=baseRest((function(e,t){return isArrayLikeObject(e)?baseDifference(e,t):[]})),ar=baseRest((function(e){return baseXor(arrayFilter(e,isArrayLikeObject))})),or=baseRest((function(e){var t=last(e);return isArrayLikeObject(t)&&(t=a),baseXor(arrayFilter(e,isArrayLikeObject),getIteratee(t,2))})),sr=baseRest((function(e){var t=last(e);return t="function"==typeof t?t:a,baseXor(arrayFilter(e,isArrayLikeObject),a,t)})),ur=baseRest(unzip);var lr=baseRest((function(e){var t=e.length,n=t>1?e[t-1]:a;return n="function"==typeof n?(e.pop(),n):a,unzipWith(e,n)}));function chain(e){var t=lodash(e);return t.__chain__=!0,t}function thru(e,t){return t(e)}var cr=flatRest((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function interceptor(t){return baseAt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof LazyWrapper&&isIndex(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:thru,args:[i],thisArg:a}),new LodashWrapper(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(a),e}))):this.thru(i)}));var fr=createAggregator((function(e,t,n){ut.call(e,n)?++e[n]:baseAssignValue(e,n,1)}));var dr=createFind(findIndex),hr=createFind(findLastIndex);function forEach(e,t){return(Dr(e)?arrayEach:An)(e,getIteratee(t,3))}function forEachRight(e,t){return(Dr(e)?arrayEachRight:Rn)(e,getIteratee(t,3))}var pr=createAggregator((function(e,t,n){ut.call(e,n)?e[n].push(t):baseAssignValue(e,n,[t])}));var gr=baseRest((function(e,n,r){var i=-1,a="function"==typeof n,o=isArrayLike(e)?t(e.length):[];return An(e,(function(e){o[++i]=a?apply(n,e,r):baseInvoke(e,n,r)})),o})),mr=createAggregator((function(e,t,n){baseAssignValue(e,n,t)}));function map(e,t){return(Dr(e)?arrayMap:baseMap)(e,getIteratee(t,3))}var vr=createAggregator((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var yr=baseRest((function(e,t){if(null==e)return[];var n=t.length;return n>1&&isIterateeCall(e,t[0],t[1])?t=[]:n>2&&isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),baseOrderBy(e,baseFlatten(t,1),[])})),_r=Kt||function(){return Mt.Date.now()};function ary(e,t,n){return t=n?a:t,t=e&&null==t?e.length:t,createWrap(e,S,a,a,a,a,t)}function before(e,t){var n;if("function"!=typeof t)throw new nt(u);return e=toInteger(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=a),n}}var br=baseRest((function(e,t,n){var r=v;if(n.length){var i=replaceHolders(n,getHolder(br));r|=w}return createWrap(e,r,t,n,i)})),xr=baseRest((function(e,t,n){var r=v|y;if(n.length){var i=replaceHolders(n,getHolder(xr));r|=w}return createWrap(t,r,e,n,i)}));function debounce(e,t,n){var r,i,o,s,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new nt(u);function invokeFunc(t){var n=r,o=i;return r=i=a,f=t,s=e.apply(o,n)}function shouldInvoke(e){var n=e-c;return c===a||n>=t||n<0||h&&e-f>=o}function timerExpired(){var e=_r();if(shouldInvoke(e))return trailingEdge(e);l=Gn(timerExpired,function remainingWait(e){var n=t-(e-c);return h?sn(n,o-(e-f)):n}(e))}function trailingEdge(e){return l=a,p&&r?invokeFunc(e):(r=i=a,s)}function debounced(){var e=_r(),n=shouldInvoke(e);if(r=arguments,i=this,c=e,n){if(l===a)return function leadingEdge(e){return f=e,l=Gn(timerExpired,t),d?invokeFunc(e):s}(c);if(h)return In(l),l=Gn(timerExpired,t),invokeFunc(c)}return l===a&&(l=Gn(timerExpired,t)),s}return t=toNumber(t)||0,isObject(n)&&(d=!!n.leading,o=(h="maxWait"in n)?on(toNumber(n.maxWait)||0,t):o,p="trailing"in n?!!n.trailing:p),debounced.cancel=function cancel(){l!==a&&In(l),f=0,r=c=i=l=a},debounced.flush=function flush(){return l===a?s:trailingEdge(_r())},debounced}var wr=baseRest((function(e,t){return baseDelay(e,1,t)})),kr=baseRest((function(e,t,n){return baseDelay(e,toNumber(t)||0,n)}));function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new nt(u);var n=function memoized(){var n=arguments,r=t?t.apply(this,n):n[0],i=memoized.cache;if(i.has(r))return i.get(r);var a=e.apply(this,n);return memoized.cache=i.set(r,a)||i,a};return n.cache=new(memoize.Cache||MapCache),n}function negate(e){if("function"!=typeof e)throw new nt(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}memoize.Cache=MapCache;var Sr=Fn((function(e,t){var n=(t=1==t.length&&Dr(t[0])?arrayMap(t[0],baseUnary(getIteratee())):arrayMap(baseFlatten(t,1),baseUnary(getIteratee()))).length;return baseRest((function(r){for(var i=-1,a=sn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return apply(e,this,r)}))})),Er=baseRest((function(e,t){var n=replaceHolders(t,getHolder(Er));return createWrap(e,w,a,t,n)})),Tr=baseRest((function(e,t){var n=replaceHolders(t,getHolder(Tr));return createWrap(e,k,a,t,n)})),Cr=flatRest((function(e,t){return createWrap(e,E,a,a,a,t)}));function eq(e,t){return e===t||e!==e&&t!==t}var Or=createRelationalOperation(baseGt),Ar=createRelationalOperation((function(e,t){return e>=t})),Rr=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&ut.call(e,"callee")&&!Dt.call(e,"callee")},Dr=t.isArray,Pr=Bt?baseUnary(Bt):function baseIsArrayBuffer(e){return isObjectLike(e)&&baseGetTag(e)==ue};function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}var Mr=tn||stubFalse,jr=Ut?baseUnary(Ut):function baseIsDate(e){return isObjectLike(e)&&baseGetTag(e)==H};function isError(e){if(!isObjectLike(e))return!1;var t=baseGetTag(e);return t==Y||t==V||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject(e)}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==$||t==X||t==W||t==ee}function isInteger(e){return"number"==typeof e&&e==toInteger(e)}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=j}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isObjectLike(e){return null!=e&&"object"==typeof e}var Fr=zt?baseUnary(zt):function baseIsMap(e){return isObjectLike(e)&&zn(e)==K};function isNumber(e){return"number"==typeof e||isObjectLike(e)&&baseGetTag(e)==J}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=Q)return!1;var t=wt(e);if(null===t)return!0;var n=ut.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&st.call(n)==dt}var Ir=qt?baseUnary(qt):function baseIsRegExp(e){return isObjectLike(e)&&baseGetTag(e)==te};var Lr=Wt?baseUnary(Wt):function baseIsSet(e){return isObjectLike(e)&&zn(e)==ne};function isString(e){return"string"==typeof e||!Dr(e)&&isObjectLike(e)&&baseGetTag(e)==re}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==ie}var Nr=Gt?baseUnary(Gt):function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!Tt[baseGetTag(e)]};var Br=createRelationalOperation(baseLt),Ur=createRelationalOperation((function(e,t){return e<=t}));function toArray(e){if(!e)return[];if(isArrayLike(e))return isString(e)?stringToArray(e):copyArray(e);if(Ft&&e[Ft])return function iteratorToArray(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ft]());var t=zn(e);return(t==K?mapToArray:t==ne?setToArray:values)(e)}function toFinite(e){return e?(e=toNumber(e))===M||e===-M?(e<0?-1:1)*F:e===e?e:0:0===e?e:0}function toInteger(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}function toLength(e){return e?baseClamp(toInteger(e),0,L):0}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return I;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(je,"");var n=He.test(e);return n||Ye.test(e)?Rt(e.slice(2),n?2:8):Ge.test(e)?I:+e}function toPlainObject(e){return copyObject(e,keysIn(e))}function toString(e){return null==e?"":baseToString(e)}var zr=createAssigner((function(e,t){if(isPrototype(t)||isArrayLike(t))copyObject(t,keys(t),e);else for(var n in t)ut.call(t,n)&&assignValue(e,n,t[n])})),qr=createAssigner((function(e,t){copyObject(t,keysIn(t),e)})),Wr=createAssigner((function(e,t,n,r){copyObject(t,keysIn(t),e,r)})),Gr=createAssigner((function(e,t,n,r){copyObject(t,keys(t),e,r)})),Hr=flatRest(baseAt);var Vr=baseRest((function(e,t){e=Qe(e);var n=-1,r=t.length,i=r>2?t[2]:a;for(i&&isIterateeCall(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=keysIn(o),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(f===a||eq(f,at[c])&&!ut.call(e,c))&&(e[c]=o[c])}return e})),Yr=baseRest((function(e){return e.push(a,customDefaultsMerge),apply(Zr,a,e)}));function get(e,t,n){var r=null==e?a:baseGet(e,t);return r===a?n:r}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}var $r=createInverter((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),e[t]=n}),constant(identity)),Xr=createInverter((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),ut.call(e,t)?e[t].push(n):e[t]=[n]}),getIteratee),Kr=baseRest(baseInvoke);function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var Jr=createAssigner((function(e,t,n){baseMerge(e,t,n)})),Zr=createAssigner((function(e,t,n,r){baseMerge(e,t,n,r)})),Qr=flatRest((function(e,t){var n={};if(null==e)return n;var r=!1;t=arrayMap(t,(function(t){return t=castPath(t,e),r||(r=t.length>1),t})),copyObject(e,getAllKeysIn(e),n),r&&(n=baseClone(n,d|h|p,customOmitClone));for(var i=t.length;i--;)baseUnset(n,t[i]);return n}));var ei=flatRest((function(e,t){return null==e?{}:function basePick(e,t){return basePickBy(e,t,(function(t,n){return hasIn(e,n)}))}(e,t)}));function pickBy(e,t){if(null==e)return{};var n=arrayMap(getAllKeysIn(e),(function(e){return[e]}));return t=getIteratee(t),basePickBy(e,n,(function(e,n){return t(e,n[0])}))}var ti=createToPairs(keys),ni=createToPairs(keysIn);function values(e){return null==e?[]:baseValues(e,keys(e))}var ri=createCompounder((function(e,t,n){return t=t.toLowerCase(),e+(n?capitalize(t):t)}));function capitalize(e){return ci(toString(e).toLowerCase())}function deburr(e){return(e=toString(e))&&e.replace(Xe,Vt).replace(_t,"")}var ii=createCompounder((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),ai=createCompounder((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),oi=createCaseFirst("toLowerCase");var si=createCompounder((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var ui=createCompounder((function(e,t,n){return e+(n?" ":"")+ci(t)}));var li=createCompounder((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ci=createCaseFirst("toUpperCase");function words(e,t,n){return e=toString(e),(t=n?a:t)===a?function hasUnicodeWord(e){return kt.test(e)}(e)?function unicodeWords(e){return e.match(xt)||[]}(e):function asciiWords(e){return e.match(Ue)||[]}(e):e.match(t)||[]}var fi=baseRest((function(e,t){try{return apply(e,a,t)}catch(n){return isError(n)?n:new r(n)}})),di=flatRest((function(e,t){return arrayEach(t,(function(t){t=toKey(t),baseAssignValue(e,t,br(e[t],e))})),e}));function constant(e){return function(){return e}}var hi=createFlow(),pi=createFlow(!0);function identity(e){return e}function iteratee(e){return baseIteratee("function"==typeof e?e:baseClone(e,d))}var gi=baseRest((function(e,t){return function(n){return baseInvoke(n,e,t)}})),mi=baseRest((function(e,t){return function(n){return baseInvoke(e,n,t)}}));function mixin(e,t,n){var r=keys(t),i=baseFunctions(t,r);null!=n||isObject(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=baseFunctions(t,keys(t)));var a=!(isObject(n)&&"chain"in n)||!!n.chain,o=isFunction(e);return arrayEach(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=copyArray(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,arrayPush([this.value()],arguments))})})),e}function noop(){}var vi=createOver(arrayMap),yi=createOver(arrayEvery),_i=createOver(arraySome);function property(e){return isKey(e)?baseProperty(toKey(e)):function basePropertyDeep(e){return function(t){return baseGet(t,e)}}(e)}var bi=createRange(),xi=createRange(!0);function stubArray(){return[]}function stubFalse(){return!1}var wi=createMathOperation((function(e,t){return e+t}),0),ki=createRound("ceil"),Si=createMathOperation((function(e,t){return e/t}),1),Ei=createRound("floor");var Ti=createMathOperation((function(e,t){return e*t}),1),Ci=createRound("round"),Oi=createMathOperation((function(e,t){return e-t}),0);return lodash.after=function after(e,t){if("function"!=typeof t)throw new nt(u);return e=toInteger(e),function(){if(--e<1)return t.apply(this,arguments)}},lodash.ary=ary,lodash.assign=zr,lodash.assignIn=qr,lodash.assignInWith=Wr,lodash.assignWith=Gr,lodash.at=Hr,lodash.before=before,lodash.bind=br,lodash.bindAll=di,lodash.bindKey=xr,lodash.castArray=function castArray(){if(!arguments.length)return[];var e=arguments[0];return Dr(e)?e:[e]},lodash.chain=chain,lodash.chunk=function chunk(e,n,r){n=(r?isIterateeCall(e,n,r):n===a)?1:on(toInteger(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var o=0,s=0,u=t(Zt(i/n));o<i;)u[s++]=baseSlice(e,o,o+=n);return u},lodash.compact=function compact(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},lodash.concat=function concat(){var e=arguments.length;if(!e)return[];for(var n=t(e-1),r=arguments[0],i=e;i--;)n[i-1]=arguments[i];return arrayPush(Dr(r)?copyArray(r):[r],baseFlatten(n,1))},lodash.cond=function cond(e){var t=null==e?0:e.length,n=getIteratee();return e=t?arrayMap(e,(function(e){if("function"!=typeof e[1])throw new nt(u);return[n(e[0]),e[1]]})):[],baseRest((function(n){for(var r=-1;++r<t;){var i=e[r];if(apply(i[0],this,n))return apply(i[1],this,n)}}))},lodash.conforms=function conforms(e){return function baseConforms(e){var t=keys(e);return function(n){return baseConformsTo(n,e,t)}}(baseClone(e,d))},lodash.constant=constant,lodash.countBy=fr,lodash.create=function create(e,t){var n=On(e);return null==t?n:baseAssign(n,t)},lodash.curry=function curry(e,t,n){var r=createWrap(e,b,a,a,a,a,a,t=n?a:t);return r.placeholder=curry.placeholder,r},lodash.curryRight=function curryRight(e,t,n){var r=createWrap(e,x,a,a,a,a,a,t=n?a:t);return r.placeholder=curryRight.placeholder,r},lodash.debounce=debounce,lodash.defaults=Vr,lodash.defaultsDeep=Yr,lodash.defer=wr,lodash.delay=kr,lodash.difference=Yn,lodash.differenceBy=$n,lodash.differenceWith=Xn,lodash.drop=function drop(e,t,n){var r=null==e?0:e.length;return r?baseSlice(e,(t=n||t===a?1:toInteger(t))<0?0:t,r):[]},lodash.dropRight=function dropRight(e,t,n){var r=null==e?0:e.length;return r?baseSlice(e,0,(t=r-(t=n||t===a?1:toInteger(t)))<0?0:t):[]},lodash.dropRightWhile=function dropRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0,!0):[]},lodash.dropWhile=function dropWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0):[]},lodash.fill=function fill(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(n=0,r=i),function baseFill(e,t,n,r){var i=e.length;for((n=toInteger(n))<0&&(n=-n>i?0:i+n),(r=r===a||r>i?i:toInteger(r))<0&&(r+=i),r=n>r?0:toLength(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},lodash.filter=function filter(e,t){return(Dr(e)?arrayFilter:baseFilter)(e,getIteratee(t,3))},lodash.flatMap=function flatMap(e,t){return baseFlatten(map(e,t),1)},lodash.flatMapDeep=function flatMapDeep(e,t){return baseFlatten(map(e,t),M)},lodash.flatMapDepth=function flatMapDepth(e,t,n){return n=n===a?1:toInteger(n),baseFlatten(map(e,t),n)},lodash.flatten=flatten,lodash.flattenDeep=function flattenDeep(e){return(null==e?0:e.length)?baseFlatten(e,M):[]},lodash.flattenDepth=function flattenDepth(e,t){return(null==e?0:e.length)?baseFlatten(e,t=t===a?1:toInteger(t)):[]},lodash.flip=function flip(e){return createWrap(e,T)},lodash.flow=hi,lodash.flowRight=pi,lodash.fromPairs=function fromPairs(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},lodash.functions=function functions(e){return null==e?[]:baseFunctions(e,keys(e))},lodash.functionsIn=function functionsIn(e){return null==e?[]:baseFunctions(e,keysIn(e))},lodash.groupBy=pr,lodash.initial=function initial(e){return(null==e?0:e.length)?baseSlice(e,0,-1):[]},lodash.intersection=Kn,lodash.intersectionBy=Jn,lodash.intersectionWith=Zn,lodash.invert=$r,lodash.invertBy=Xr,lodash.invokeMap=gr,lodash.iteratee=iteratee,lodash.keyBy=mr,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=function mapKeys(e,t){var n={};return t=getIteratee(t,3),baseForOwn(e,(function(e,r,i){baseAssignValue(n,t(e,r,i),e)})),n},lodash.mapValues=function mapValues(e,t){var n={};return t=getIteratee(t,3),baseForOwn(e,(function(e,r,i){baseAssignValue(n,r,t(e,r,i))})),n},lodash.matches=function matches(e){return baseMatches(baseClone(e,d))},lodash.matchesProperty=function matchesProperty(e,t){return baseMatchesProperty(e,baseClone(t,d))},lodash.memoize=memoize,lodash.merge=Jr,lodash.mergeWith=Zr,lodash.method=gi,lodash.methodOf=mi,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=function nthArg(e){return e=toInteger(e),baseRest((function(t){return baseNth(t,e)}))},lodash.omit=Qr,lodash.omitBy=function omitBy(e,t){return pickBy(e,negate(getIteratee(t)))},lodash.once=function once(e){return before(2,e)},lodash.orderBy=function orderBy(e,t,n,r){return null==e?[]:(Dr(t)||(t=null==t?[]:[t]),Dr(n=r?a:n)||(n=null==n?[]:[n]),baseOrderBy(e,t,n))},lodash.over=vi,lodash.overArgs=Sr,lodash.overEvery=yi,lodash.overSome=_i,lodash.partial=Er,lodash.partialRight=Tr,lodash.partition=vr,lodash.pick=ei,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=function propertyOf(e){return function(t){return null==e?a:baseGet(e,t)}},lodash.pull=Qn,lodash.pullAll=pullAll,lodash.pullAllBy=function pullAllBy(e,t,n){return e&&e.length&&t&&t.length?basePullAll(e,t,getIteratee(n,2)):e},lodash.pullAllWith=function pullAllWith(e,t,n){return e&&e.length&&t&&t.length?basePullAll(e,t,a,n):e},lodash.pullAt=er,lodash.range=bi,lodash.rangeRight=xi,lodash.rearg=Cr,lodash.reject=function reject(e,t){return(Dr(e)?arrayFilter:baseFilter)(e,negate(getIteratee(t,3)))},lodash.remove=function remove(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=getIteratee(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return basePullAt(e,i),n},lodash.rest=function rest(e,t){if("function"!=typeof e)throw new nt(u);return baseRest(e,t=t===a?t:toInteger(t))},lodash.reverse=reverse,lodash.sampleSize=function sampleSize(e,t,n){return t=(n?isIterateeCall(e,t,n):t===a)?1:toInteger(t),(Dr(e)?arraySampleSize:baseSampleSize)(e,t)},lodash.set=function set(e,t,n){return null==e?e:baseSet(e,t,n)},lodash.setWith=function setWith(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:baseSet(e,t,n,r)},lodash.shuffle=function shuffle(e){return(Dr(e)?arrayShuffle:baseShuffle)(e)},lodash.slice=function slice(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)?(t=0,n=r):(t=null==t?0:toInteger(t),n=n===a?r:toInteger(n)),baseSlice(e,t,n)):[]},lodash.sortBy=yr,lodash.sortedUniq=function sortedUniq(e){return e&&e.length?baseSortedUniq(e):[]},lodash.sortedUniqBy=function sortedUniqBy(e,t){return e&&e.length?baseSortedUniq(e,getIteratee(t,2)):[]},lodash.split=function split(e,t,n){return n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(t=n=a),(n=n===a?L:n>>>0)?(e=toString(e))&&("string"==typeof t||null!=t&&!Ir(t))&&!(t=baseToString(t))&&hasUnicode(e)?castSlice(stringToArray(e),0,n):e.split(t,n):[]},lodash.spread=function spread(e,t){if("function"!=typeof e)throw new nt(u);return t=null==t?0:on(toInteger(t),0),baseRest((function(n){var r=n[t],i=castSlice(n,0,t);return r&&arrayPush(i,r),apply(e,this,i)}))},lodash.tail=function tail(e){var t=null==e?0:e.length;return t?baseSlice(e,1,t):[]},lodash.take=function take(e,t,n){return e&&e.length?baseSlice(e,0,(t=n||t===a?1:toInteger(t))<0?0:t):[]},lodash.takeRight=function takeRight(e,t,n){var r=null==e?0:e.length;return r?baseSlice(e,(t=r-(t=n||t===a?1:toInteger(t)))<0?0:t,r):[]},lodash.takeRightWhile=function takeRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!1,!0):[]},lodash.takeWhile=function takeWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3)):[]},lodash.tap=function tap(e,t){return t(e),e},lodash.throttle=function throttle(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new nt(u);return isObject(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),debounce(e,t,{leading:r,maxWait:t,trailing:i})},lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=ti,lodash.toPairsIn=ni,lodash.toPath=function toPath(e){return Dr(e)?arrayMap(e,toKey):isSymbol(e)?[e]:copyArray(Vn(toString(e)))},lodash.toPlainObject=toPlainObject,lodash.transform=function transform(e,t,n){var r=Dr(e),i=r||Mr(e)||Nr(e);if(t=getIteratee(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:isObject(e)&&isFunction(a)?On(wt(e)):{}}return(i?arrayEach:baseForOwn)(e,(function(e,r,i){return t(n,e,r,i)})),n},lodash.unary=function unary(e){return ary(e,1)},lodash.union=tr,lodash.unionBy=nr,lodash.unionWith=rr,lodash.uniq=function uniq(e){return e&&e.length?baseUniq(e):[]},lodash.uniqBy=function uniqBy(e,t){return e&&e.length?baseUniq(e,getIteratee(t,2)):[]},lodash.uniqWith=function uniqWith(e,t){return t="function"==typeof t?t:a,e&&e.length?baseUniq(e,a,t):[]},lodash.unset=function unset(e,t){return null==e||baseUnset(e,t)},lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=function update(e,t,n){return null==e?e:baseUpdate(e,t,castFunction(n))},lodash.updateWith=function updateWith(e,t,n,r){return r="function"==typeof r?r:a,null==e?e:baseUpdate(e,t,castFunction(n),r)},lodash.values=values,lodash.valuesIn=function valuesIn(e){return null==e?[]:baseValues(e,keysIn(e))},lodash.without=ir,lodash.words=words,lodash.wrap=function wrap(e,t){return Er(castFunction(t),e)},lodash.xor=ar,lodash.xorBy=or,lodash.xorWith=sr,lodash.zip=ur,lodash.zipObject=function zipObject(e,t){return baseZipObject(e||[],t||[],assignValue)},lodash.zipObjectDeep=function zipObjectDeep(e,t){return baseZipObject(e||[],t||[],baseSet)},lodash.zipWith=lr,lodash.entries=ti,lodash.entriesIn=ni,lodash.extend=qr,lodash.extendWith=Wr,mixin(lodash,lodash),lodash.add=wi,lodash.attempt=fi,lodash.camelCase=ri,lodash.capitalize=capitalize,lodash.ceil=ki,lodash.clamp=function clamp(e,t,n){return n===a&&(n=t,t=a),n!==a&&(n=(n=toNumber(n))===n?n:0),t!==a&&(t=(t=toNumber(t))===t?t:0),baseClamp(toNumber(e),t,n)},lodash.clone=function clone(e){return baseClone(e,p)},lodash.cloneDeep=function cloneDeep(e){return baseClone(e,d|p)},lodash.cloneDeepWith=function cloneDeepWith(e,t){return baseClone(e,d|p,t="function"==typeof t?t:a)},lodash.cloneWith=function cloneWith(e,t){return baseClone(e,p,t="function"==typeof t?t:a)},lodash.conformsTo=function conformsTo(e,t){return null==t||baseConformsTo(e,t,keys(t))},lodash.deburr=deburr,lodash.defaultTo=function defaultTo(e,t){return null==e||e!==e?t:e},lodash.divide=Si,lodash.endsWith=function endsWith(e,t,n){e=toString(e),t=baseToString(t);var r=e.length,i=n=n===a?r:baseClamp(toInteger(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},lodash.eq=eq,lodash.escape=function escape(e){return(e=toString(e))&&Ee.test(e)?e.replace(ke,Yt):e},lodash.escapeRegExp=function escapeRegExp(e){return(e=toString(e))&&Me.test(e)?e.replace(Pe,"\\$&"):e},lodash.every=function every(e,t,n){var r=Dr(e)?arrayEvery:baseEvery;return n&&isIterateeCall(e,t,n)&&(t=a),r(e,getIteratee(t,3))},lodash.find=dr,lodash.findIndex=findIndex,lodash.findKey=function findKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwn)},lodash.findLast=hr,lodash.findLastIndex=findLastIndex,lodash.findLastKey=function findLastKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwnRight)},lodash.floor=Ei,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=function forIn(e,t){return null==e?e:Dn(e,getIteratee(t,3),keysIn)},lodash.forInRight=function forInRight(e,t){return null==e?e:Pn(e,getIteratee(t,3),keysIn)},lodash.forOwn=function forOwn(e,t){return e&&baseForOwn(e,getIteratee(t,3))},lodash.forOwnRight=function forOwnRight(e,t){return e&&baseForOwnRight(e,getIteratee(t,3))},lodash.get=get,lodash.gt=Or,lodash.gte=Ar,lodash.has=function has(e,t){return null!=e&&hasPath(e,t,baseHas)},lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=function includes(e,t,n,r){e=isArrayLike(e)?e:values(e),n=n&&!r?toInteger(n):0;var i=e.length;return n<0&&(n=on(i+n,0)),isString(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&baseIndexOf(e,t,n)>-1},lodash.indexOf=function indexOf(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:toInteger(n);return i<0&&(i=on(r+i,0)),baseIndexOf(e,t,i)},lodash.inRange=function inRange(e,t,n){return t=toFinite(t),n===a?(n=t,t=0):n=toFinite(n),function baseInRange(e,t,n){return e>=sn(t,n)&&e<on(t,n)}(e=toNumber(e),t,n)},lodash.invoke=Kr,lodash.isArguments=Rr,lodash.isArray=Dr,lodash.isArrayBuffer=Pr,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=function isBoolean(e){return!0===e||!1===e||isObjectLike(e)&&baseGetTag(e)==G},lodash.isBuffer=Mr,lodash.isDate=jr,lodash.isElement=function isElement(e){return isObjectLike(e)&&1===e.nodeType&&!isPlainObject(e)},lodash.isEmpty=function isEmpty(e){if(null==e)return!0;if(isArrayLike(e)&&(Dr(e)||"string"==typeof e||"function"==typeof e.splice||Mr(e)||Nr(e)||Rr(e)))return!e.length;var t=zn(e);if(t==K||t==ne)return!e.size;if(isPrototype(e))return!baseKeys(e).length;for(var n in e)if(ut.call(e,n))return!1;return!0},lodash.isEqual=function isEqual(e,t){return baseIsEqual(e,t)},lodash.isEqualWith=function isEqualWith(e,t,n){var r=(n="function"==typeof n?n:a)?n(e,t):a;return r===a?baseIsEqual(e,t,a,n):!!r},lodash.isError=isError,lodash.isFinite=function isFinite(e){return"number"==typeof e&&nn(e)},lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=Fr,lodash.isMatch=function isMatch(e,t){return e===t||baseIsMatch(e,t,getMatchData(t))},lodash.isMatchWith=function isMatchWith(e,t,n){return n="function"==typeof n?n:a,baseIsMatch(e,t,getMatchData(t),n)},lodash.isNaN=function isNaN(e){return isNumber(e)&&e!=+e},lodash.isNative=function isNative(e){if(qn(e))throw new r(s);return baseIsNative(e)},lodash.isNil=function isNil(e){return null==e},lodash.isNull=function isNull(e){return null===e},lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=Ir,lodash.isSafeInteger=function isSafeInteger(e){return isInteger(e)&&e>=-j&&e<=j},lodash.isSet=Lr,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=Nr,lodash.isUndefined=function isUndefined(e){return e===a},lodash.isWeakMap=function isWeakMap(e){return isObjectLike(e)&&zn(e)==oe},lodash.isWeakSet=function isWeakSet(e){return isObjectLike(e)&&baseGetTag(e)==se},lodash.join=function join(e,t){return null==e?"":rn.call(e,t)},lodash.kebabCase=ii,lodash.last=last,lodash.lastIndexOf=function lastIndexOf(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==a&&(i=(i=toInteger(n))<0?on(r+i,0):sn(i,r-1)),t===t?function strictLastIndexOf(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):baseFindIndex(e,baseIsNaN,i,!0)},lodash.lowerCase=ai,lodash.lowerFirst=oi,lodash.lt=Br,lodash.lte=Ur,lodash.max=function max(e){return e&&e.length?baseExtremum(e,identity,baseGt):a},lodash.maxBy=function maxBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseGt):a},lodash.mean=function mean(e){return baseMean(e,identity)},lodash.meanBy=function meanBy(e,t){return baseMean(e,getIteratee(t,2))},lodash.min=function min(e){return e&&e.length?baseExtremum(e,identity,baseLt):a},lodash.minBy=function minBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseLt):a},lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=function stubObject(){return{}},lodash.stubString=function stubString(){return""},lodash.stubTrue=function stubTrue(){return!0},lodash.multiply=Ti,lodash.nth=function nth(e,t){return e&&e.length?baseNth(e,toInteger(t)):a},lodash.noConflict=function noConflict(){return Mt._===this&&(Mt._=ht),this},lodash.noop=noop,lodash.now=_r,lodash.pad=function pad(e,t,n){e=toString(e);var r=(t=toInteger(t))?stringSize(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return createPadding(Qt(i),n)+e+createPadding(Zt(i),n)},lodash.padEnd=function padEnd(e,t,n){e=toString(e);var r=(t=toInteger(t))?stringSize(e):0;return t&&r<t?e+createPadding(t-r,n):e},lodash.padStart=function padStart(e,t,n){e=toString(e);var r=(t=toInteger(t))?stringSize(e):0;return t&&r<t?createPadding(t-r,n)+e:e},lodash.parseInt=function parseInt(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(toString(e).replace(Fe,""),t||0)},lodash.random=function random(e,t,n){if(n&&"boolean"!=typeof n&&isIterateeCall(e,t,n)&&(t=n=a),n===a&&("boolean"==typeof t?(n=t,t=a):"boolean"==typeof e&&(n=e,e=a)),e===a&&t===a?(e=0,t=1):(e=toFinite(e),t===a?(t=e,e=0):t=toFinite(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=cn();return sn(e+i*(t-e+At("1e-"+((i+"").length-1))),t)}return baseRandom(e,t)},lodash.reduce=function reduce(e,t,n){var r=Dr(e)?arrayReduce:baseReduce,i=arguments.length<3;return r(e,getIteratee(t,4),n,i,An)},lodash.reduceRight=function reduceRight(e,t,n){var r=Dr(e)?arrayReduceRight:baseReduce,i=arguments.length<3;return r(e,getIteratee(t,4),n,i,Rn)},lodash.repeat=function repeat(e,t,n){return t=(n?isIterateeCall(e,t,n):t===a)?1:toInteger(t),baseRepeat(toString(e),t)},lodash.replace=function replace(){var e=arguments,t=toString(e[0]);return e.length<3?t:t.replace(e[1],e[2])},lodash.result=function result(e,t,n){var r=-1,i=(t=castPath(t,e)).length;for(i||(i=1,e=a);++r<i;){var o=null==e?a:e[toKey(t[r])];o===a&&(r=i,o=n),e=isFunction(o)?o.call(e):o}return e},lodash.round=Ci,lodash.runInContext=runInContext,lodash.sample=function sample(e){return(Dr(e)?arraySample:baseSample)(e)},lodash.size=function size(e){if(null==e)return 0;if(isArrayLike(e))return isString(e)?stringSize(e):e.length;var t=zn(e);return t==K||t==ne?e.size:baseKeys(e).length},lodash.snakeCase=si,lodash.some=function some(e,t,n){var r=Dr(e)?arraySome:baseSome;return n&&isIterateeCall(e,t,n)&&(t=a),r(e,getIteratee(t,3))},lodash.sortedIndex=function sortedIndex(e,t){return baseSortedIndex(e,t)},lodash.sortedIndexBy=function sortedIndexBy(e,t,n){return baseSortedIndexBy(e,t,getIteratee(n,2))},lodash.sortedIndexOf=function sortedIndexOf(e,t){var n=null==e?0:e.length;if(n){var r=baseSortedIndex(e,t);if(r<n&&eq(e[r],t))return r}return-1},lodash.sortedLastIndex=function sortedLastIndex(e,t){return baseSortedIndex(e,t,!0)},lodash.sortedLastIndexBy=function sortedLastIndexBy(e,t,n){return baseSortedIndexBy(e,t,getIteratee(n,2),!0)},lodash.sortedLastIndexOf=function sortedLastIndexOf(e,t){if(null==e?0:e.length){var n=baseSortedIndex(e,t,!0)-1;if(eq(e[n],t))return n}return-1},lodash.startCase=ui,lodash.startsWith=function startsWith(e,t,n){return e=toString(e),n=null==n?0:baseClamp(toInteger(n),0,e.length),t=baseToString(t),e.slice(n,n+t.length)==t},lodash.subtract=Oi,lodash.sum=function sum(e){return e&&e.length?baseSum(e,identity):0},lodash.sumBy=function sumBy(e,t){return e&&e.length?baseSum(e,getIteratee(t,2)):0},lodash.template=function template(e,t,n){var r=lodash.templateSettings;n&&isIterateeCall(e,t,n)&&(t=a),e=toString(e),t=Wr({},t,r,customDefaultsAssignIn);var o,s,u=Wr({},t.imports,r.imports,customDefaultsAssignIn),l=keys(u),c=baseValues(u,l),f=0,d=t.interpolate||Ke,h="__p += '",p=et((t.escape||Ke).source+"|"+d.source+"|"+(d===Oe?qe:Ke).source+"|"+(t.evaluate||Ke).source+"|$","g"),g="//# sourceURL="+(ut.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Et+"]")+"\n";e.replace(p,(function(t,n,r,i,a,u){return r||(r=i),h+=e.slice(f,u).replace(Je,escapeStringChar),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+t.length,t})),h+="';\n";var m=ut.call(t,"variable")&&t.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(_e,""):h).replace(be,"$1").replace(xe,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=fi((function(){return i(l,g+"return "+h).apply(a,c)}));if(v.source=h,isError(v))throw v;return v},lodash.times=function times(e,t){if((e=toInteger(e))<1||e>j)return[];var n=L,r=sn(e,L);t=getIteratee(t),e-=L;for(var i=baseTimes(r,t);++n<e;)t(n);return i},lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=function toLower(e){return toString(e).toLowerCase()},lodash.toNumber=toNumber,lodash.toSafeInteger=function toSafeInteger(e){return e?baseClamp(toInteger(e),-j,j):0===e?e:0},lodash.toString=toString,lodash.toUpper=function toUpper(e){return toString(e).toUpperCase()},lodash.trim=function trim(e,t,n){if((e=toString(e))&&(n||t===a))return e.replace(je,"");if(!e||!(t=baseToString(t)))return e;var r=stringToArray(e),i=stringToArray(t);return castSlice(r,charsStartIndex(r,i),charsEndIndex(r,i)+1).join("")},lodash.trimEnd=function trimEnd(e,t,n){if((e=toString(e))&&(n||t===a))return e.replace(Ie,"");if(!e||!(t=baseToString(t)))return e;var r=stringToArray(e);return castSlice(r,0,charsEndIndex(r,stringToArray(t))+1).join("")},lodash.trimStart=function trimStart(e,t,n){if((e=toString(e))&&(n||t===a))return e.replace(Fe,"");if(!e||!(t=baseToString(t)))return e;var r=stringToArray(e);return castSlice(r,charsStartIndex(r,stringToArray(t))).join("")},lodash.truncate=function truncate(e,t){var n=C,r=O;if(isObject(t)){var i="separator"in t?t.separator:i;n="length"in t?toInteger(t.length):n,r="omission"in t?baseToString(t.omission):r}var o=(e=toString(e)).length;if(hasUnicode(e)){var s=stringToArray(e);o=s.length}if(n>=o)return e;var u=n-stringSize(r);if(u<1)return r;var l=s?castSlice(s,0,u).join(""):e.slice(0,u);if(i===a)return l+r;if(s&&(u+=l.length-u),Ir(i)){if(e.slice(u).search(i)){var c,f=l;for(i.global||(i=et(i.source,toString(We.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;l=l.slice(0,d===a?u:d)}}else if(e.indexOf(baseToString(i),u)!=u){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},lodash.unescape=function unescape(e){return(e=toString(e))&&Se.test(e)?e.replace(we,$t):e},lodash.uniqueId=function uniqueId(e){var t=++lt;return toString(e)+t},lodash.upperCase=li,lodash.upperFirst=ci,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var e={};return baseForOwn(lodash,(function(t,n){ut.call(lodash.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),lodash.VERSION="4.17.15",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){lodash[e].placeholder=lodash})),arrayEach(["drop","take"],(function(e,t){LazyWrapper.prototype[e]=function(n){n=n===a?1:on(toInteger(n),0);var r=this.__filtered__&&!t?new LazyWrapper(this):this.clone();return r.__filtered__?r.__takeCount__=sn(n,r.__takeCount__):r.__views__.push({size:sn(n,L),type:e+(r.__dir__<0?"Right":"")}),r},LazyWrapper.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),arrayEach(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=n==D||3==n;LazyWrapper.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:getIteratee(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),arrayEach(["head","last"],(function(e,t){var n="take"+(t?"Right":"");LazyWrapper.prototype[e]=function(){return this[n](1).value()[0]}})),arrayEach(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");LazyWrapper.prototype[e]=function(){return this.__filtered__?new LazyWrapper(this):this[n](1)}})),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(e){return this.filter(e).head()},LazyWrapper.prototype.findLast=function(e){return this.reverse().find(e)},LazyWrapper.prototype.invokeMap=baseRest((function(e,t){return"function"==typeof e?new LazyWrapper(this):this.map((function(n){return baseInvoke(n,e,t)}))})),LazyWrapper.prototype.reject=function(e){return this.filter(negate(getIteratee(e)))},LazyWrapper.prototype.slice=function(e,t){e=toInteger(e);var n=this;return n.__filtered__&&(e>0||t<0)?new LazyWrapper(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==a&&(n=(t=toInteger(t))<0?n.dropRight(-t):n.take(t-e)),n)},LazyWrapper.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(L)},baseForOwn(LazyWrapper.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=lodash[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(lodash.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof LazyWrapper,l=s[0],c=u||Dr(t),f=function interceptor(e){var t=i.apply(lodash,arrayPush([e],s));return r&&d?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,g=u&&!h;if(!o&&c){t=g?t:new LazyWrapper(this);var m=e.apply(t,s);return m.__actions__.push({func:thru,args:[f],thisArg:a}),new LodashWrapper(m,d)}return p&&g?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),arrayEach(["pop","push","shift","sort","splice","unshift"],(function(e){var t=rt[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);lodash.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Dr(i)?i:[],e)}return this[n]((function(n){return t.apply(Dr(n)?n:[],e)}))}})),baseForOwn(LazyWrapper.prototype,(function(e,t){var n=lodash[t];if(n){var r=n.name+"";ut.call(_n,r)||(_n[r]=[]),_n[r].push({name:t,func:n})}})),_n[createHybrid(a,y).name]=[{name:"wrapper",func:a}],LazyWrapper.prototype.clone=function lazyClone(){var e=new LazyWrapper(this.__wrapped__);return e.__actions__=copyArray(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=copyArray(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=copyArray(this.__views__),e},LazyWrapper.prototype.reverse=function lazyReverse(){if(this.__filtered__){var e=new LazyWrapper(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},LazyWrapper.prototype.value=function lazyValue(){var e=this.__wrapped__.value(),t=this.__dir__,n=Dr(e),r=t<0,i=n?e.length:0,a=function getView(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=sn(t,e+o);break;case"takeRight":e=on(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,f=c.length,d=0,h=sn(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return baseWrapperValue(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var g=-1,m=e[l+=t];++g<f;){var v=c[g],y=v.iteratee,_=v.type,b=y(m);if(_==P)m=b;else if(!b){if(_==D)continue e;break e}}p[d++]=m}return p},lodash.prototype.at=cr,lodash.prototype.chain=function wrapperChain(){return chain(this)},lodash.prototype.commit=function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)},lodash.prototype.next=function wrapperNext(){this.__values__===a&&(this.__values__=toArray(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},lodash.prototype.plant=function wrapperPlant(e){for(var t,n=this;n instanceof baseLodash;){var r=wrapperClone(n);r.__index__=0,r.__values__=a,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},lodash.prototype.reverse=function wrapperReverse(){var e=this.__wrapped__;if(e instanceof LazyWrapper){var t=e;return this.__actions__.length&&(t=new LazyWrapper(this)),(t=t.reverse()).__actions__.push({func:thru,args:[reverse],thisArg:a}),new LodashWrapper(t,this.__chain__)}return this.thru(reverse)},lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)},lodash.prototype.first=lodash.prototype.head,Ft&&(lodash.prototype[Ft]=function wrapperToIterator(){return this}),lodash}();Mt._=Xt,(i=function(){return Xt}.call(t,n,t,r))===a||(r.exports=i)}).call(this)}).call(this,n(19),n(111)(e))},,,function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Gist(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Gist);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Gist.__proto__||Object.getPrototypeOf(Gist)).call(this,t,n));return r.__id=e,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Gist,e),r(Gist,[{key:"read",value:function read(e){return this._request("GET","/gists/"+this.__id,null,e)}},{key:"create",value:function create(e,t){var n=this;return this._request("POST","/gists",e,t).then((function(e){return n.__id=e.data.id,e}))}},{key:"delete",value:function _delete(e){return this._request("DELETE","/gists/"+this.__id,null,e)}},{key:"fork",value:function fork(e){return this._request("POST","/gists/"+this.__id+"/forks",null,e)}},{key:"update",value:function update(e,t){return this._request("PATCH","/gists/"+this.__id,e,t)}},{key:"star",value:function star(e){return this._request("PUT","/gists/"+this.__id+"/star",null,e)}},{key:"unstar",value:function unstar(e){return this._request("DELETE","/gists/"+this.__id+"/star",null,e)}},{key:"isStarred",value:function isStarred(e){return this._request204or404("/gists/"+this.__id+"/star",null,e)}},{key:"listCommits",value:function listCommits(e){return this._requestAllPages("/gists/"+this.__id+"/commits",null,e)}},{key:"getRevision",value:function getRevision(e,t){return this._request("GET","/gists/"+this.__id+"/"+e,null,t)}},{key:"listComments",value:function listComments(e){return this._requestAllPages("/gists/"+this.__id+"/comments",null,e)}},{key:"getComment",value:function getComment(e,t){return this._request("GET","/gists/"+this.__id+"/comments/"+e,null,t)}},{key:"createComment",value:function createComment(e,t){return this._request("POST","/gists/"+this.__id+"/comments",{body:e},t)}},{key:"editComment",value:function editComment(e,t,n){return this._request("PATCH","/gists/"+this.__id+"/comments/"+e,{body:t},n)}},{key:"deleteComment",value:function deleteComment(e,t){return this._request("DELETE","/gists/"+this.__id+"/comments/"+e,null,t)}}]),Gist}(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(29)).default);e.exports=i},function(e,t,n){e.exports=n(471)},function(e,t,n){"use strict";var r=n(24),i=n(187),a=n(473),o=n(193);function createInstance(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var s=createInstance(n(190));s.Axios=a,s.create=function create(e){return createInstance(o(s.defaults,e))},s.Cancel=n(194),s.CancelToken=n(485),s.isCancel=n(189),s.all=function all(e){return Promise.all(e)},s.spread=n(486),e.exports=s,e.exports.default=s},function(e,t){e.exports=function isBuffer(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(24),i=n(188),a=n(474),o=n(475),s=n(193);function Axios(e){this.defaults=e,this.interceptors={request:new a,response:new a}}Axios.prototype.request=function request(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function unshiftRequestInterceptors(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function pushResponseInterceptors(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Axios.prototype.getUri=function getUri(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function forEachMethodNoData(e){Axios.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function forEachMethodWithData(e){Axios.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=Axios},function(e,t,n){"use strict";var r=n(24);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function forEach(e){r.forEach(this.handlers,(function forEachHandler(t){null!==t&&e(t)}))},e.exports=InterceptorManager},function(e,t,n){"use strict";var r=n(24),i=n(476),a=n(189),o=n(190),s=n(483),u=n(484);function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function dispatchRequest(e){return throwIfCancellationRequested(e),e.baseURL&&!s(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function cleanHeaderConfig(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function onAdapterResolution(t){return throwIfCancellationRequested(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function onAdapterRejection(t){return a(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(24);e.exports=function transformData(e,t,n){return r.forEach(n,(function transform(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(24);e.exports=function normalizeHeaderName(e,t){r.forEach(e,(function processHeader(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(192);e.exports=function settle(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function enhanceError(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(24),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function parseHeaders(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function parser(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},function(e,t,n){"use strict";var r=n(24);e.exports=r.isStandardBrowserEnv()?function standardBrowserEnv(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function resolveURL(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=resolveURL(window.location.href),function isURLSameOrigin(t){var n=r.isString(t)?resolveURL(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function isURLSameOrigin(){return!0}},function(e,t,n){"use strict";var r=n(24);e.exports=r.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function read(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():{write:function write(){},read:function read(){return null},remove:function remove(){}}},function(e,t,n){"use strict";e.exports=function isAbsoluteURL(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(194);function CancelToken(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function promiseExecutor(e){t=e}));var n=this;e((function cancel(e){n.reason||(n.reason=new r(e),t(n.reason))}))}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason},CancelToken.source=function source(){var e;return{token:new CancelToken((function executor(t){e=t})),cancel:e}},e.exports=CancelToken},function(e,t,n){"use strict";e.exports=function spread(e){return function wrap(t){return e.apply(null,t)}}},function(e,t,n){var r;function createDebug(e){function debug(){if(debug.enabled){var e=debug,n=+new Date,i=n-(r||n);e.diff=i,e.prev=r,e.curr=n,r=n;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!==typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"===typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n})),t.formatArgs.call(e,a),(debug.log||t.log||console.log.bind(console)).apply(e,a)}}return debug.namespace=e,debug.enabled=t.enabled(e),debug.useColors=t.useColors(),debug.color=function selectColor(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"===typeof t.init&&t.init(debug),debug}(t=e.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},t.disable=function disable(){t.enable("")},t.enable=function enable(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function enabled(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(195),t.names=[],t.skips=[],t.formatters={}},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(29));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=(0,_interopRequireDefault(n(55)).default)("github:user"),o=function(e){function User(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,User);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(User.__proto__||Object.getPrototypeOf(User)).call(this,t,n));return r.__user=e,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(User,e),r(User,[{key:"__getScopedUrl",value:function __getScopedUrl(e){if(this.__user)return e?"/users/"+this.__user+"/"+e:"/users/"+this.__user;switch(e){case"":return"/user";case"notifications":case"gists":return"/"+e;default:return"/user/"+e}}},{key:"listRepos",value:function listRepos(e,t){return"function"===typeof e&&(t=e,e={}),e=this._getOptionsWithDefaults(e),a("Fetching repositories with options: "+JSON.stringify(e)),this._requestAllPages(this.__getScopedUrl("repos"),e,t)}},{key:"listOrgs",value:function listOrgs(e){return this._request("GET",this.__getScopedUrl("orgs"),null,e)}},{key:"listFollowers",value:function listFollowers(e){return this._request("GET",this.__getScopedUrl("followers"),null,e)}},{key:"listFollowing",value:function listFollowing(e){return this._request("GET",this.__getScopedUrl("following"),null,e)}},{key:"listGists",value:function listGists(e){return this._request("GET",this.__getScopedUrl("gists"),null,e)}},{key:"listNotifications",value:function listNotifications(e,t){return"function"===typeof(e=e||{})&&(t=e,e={}),e.since=this._dateToISO(e.since),e.before=this._dateToISO(e.before),this._request("GET",this.__getScopedUrl("notifications"),e,t)}},{key:"getProfile",value:function getProfile(e){return this._request("GET",this.__getScopedUrl(""),null,e)}},{key:"listStarredRepos",value:function listStarredRepos(e){var t=this._getOptionsWithDefaults();return this._requestAllPages(this.__getScopedUrl("starred"),t,e)}},{key:"listStarredGists",value:function listStarredGists(e,t){return"function"===typeof(e=e||{})&&(t=e,e={}),e.since=this._dateToISO(e.since),this._request("GET","/gists/starred",e,t)}},{key:"getEmails",value:function getEmails(e){return this._request("GET","/user/emails",null,e)}},{key:"follow",value:function follow(e,t){return this._request("PUT","/user/following/"+e,null,t)}},{key:"unfollow",value:function unfollow(e,t){return this._request("DELETE","/user/following/"+e,null,t)}},{key:"createRepo",value:function createRepo(e,t){return this._request("POST","/user/repos",e,t)}}]),User}(i.default);e.exports=o},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Issue(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Issue);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Issue.__proto__||Object.getPrototypeOf(Issue)).call(this,t,n));return r.__repository=e,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Issue,e),r(Issue,[{key:"createIssue",value:function createIssue(e,t){return this._request("POST","/repos/"+this.__repository+"/issues",e,t)}},{key:"listIssues",value:function listIssues(e,t){return this._requestAllPages("/repos/"+this.__repository+"/issues",e,t)}},{key:"listIssueEvents",value:function listIssueEvents(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/"+e+"/events",null,t)}},{key:"listIssueComments",value:function listIssueComments(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/"+e+"/comments",null,t)}},{key:"getIssueComment",value:function getIssueComment(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/comments/"+e,null,t)}},{key:"createIssueComment",value:function createIssueComment(e,t,n){return this._request("POST","/repos/"+this.__repository+"/issues/"+e+"/comments",{body:t},n)}},{key:"editIssueComment",value:function editIssueComment(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/issues/comments/"+e,{body:t},n)}},{key:"deleteIssueComment",value:function deleteIssueComment(e,t){return this._request("DELETE","/repos/"+this.__repository+"/issues/comments/"+e,null,t)}},{key:"editIssue",value:function editIssue(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/issues/"+e,t,n)}},{key:"getIssue",value:function getIssue(e,t){return this._request("GET","/repos/"+this.__repository+"/issues/"+e,null,t)}},{key:"listMilestones",value:function listMilestones(e,t){return this._request("GET","/repos/"+this.__repository+"/milestones",e,t)}},{key:"getMilestone",value:function getMilestone(e,t){return this._request("GET","/repos/"+this.__repository+"/milestones/"+e,null,t)}},{key:"createMilestone",value:function createMilestone(e,t){return this._request("POST","/repos/"+this.__repository+"/milestones",e,t)}},{key:"editMilestone",value:function editMilestone(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/milestones/"+e,t,n)}},{key:"deleteMilestone",value:function deleteMilestone(e,t){return this._request("DELETE","/repos/"+this.__repository+"/milestones/"+e,null,t)}},{key:"createLabel",value:function createLabel(e,t){return this._request("POST","/repos/"+this.__repository+"/labels",e,t)}},{key:"listLabels",value:function listLabels(e,t){return this._request("GET","/repos/"+this.__repository+"/labels",e,t)}},{key:"getLabel",value:function getLabel(e,t){return this._request("GET","/repos/"+this.__repository+"/labels/"+e,null,t)}},{key:"editLabel",value:function editLabel(e,t,n){return this._request("PATCH","/repos/"+this.__repository+"/labels/"+e,t,n)}},{key:"deleteLabel",value:function deleteLabel(e,t){return this._request("DELETE","/repos/"+this.__repository+"/labels/"+e,null,t)}}]),Issue}(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(29)).default);e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(29));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=(0,_interopRequireDefault(n(55)).default)("github:search"),o=function(e){function Search(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Search);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Search.__proto__||Object.getPrototypeOf(Search)).call(this,t,n));return r.__defaults=r._getOptionsWithDefaults(e),r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Search,e),r(Search,[{key:"_search",value:function _search(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i={};return Object.keys(this.__defaults).forEach((function(e){i[e]=t.__defaults[e]})),Object.keys(n).forEach((function(e){i[e]=n[e]})),a("searching "+e+" with options:",i),this._requestAllPages("/search/"+e,i,r)}},{key:"forRepositories",value:function forRepositories(e,t){return this._search("repositories",e,t)}},{key:"forCode",value:function forCode(e,t){return this._search("code",e,t)}},{key:"forIssues",value:function forIssues(e,t){return this._search("issues",e,t)}},{key:"forUsers",value:function forUsers(e,t){return this._search("users",e,t)}}]),Search}(i.default);e.exports=o},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function RateLimit(e,t){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RateLimit),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(RateLimit.__proto__||Object.getPrototypeOf(RateLimit)).call(this,e,t))}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(RateLimit,e),r(RateLimit,[{key:"getRateLimit",value:function getRateLimit(e){return this._request("GET","/rate_limit",null,e)}}]),RateLimit}(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(29)).default);e.exports=i},function(e,t,n){"use strict";(function(t){var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),a=_interopRequireDefault(n(29)),o=_interopRequireDefault(n(493)),s=n(196);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=(0,_interopRequireDefault(n(55)).default)("github:repository"),l=function(e){function Repository(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Repository);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Repository.__proto__||Object.getPrototypeOf(Repository)).call(this,t,n));return r.__fullname=e,r.__currentTree={branch:null,sha:null},r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Repository,e),i(Repository,[{key:"getRef",value:function getRef(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/refs/"+e,null,t)}},{key:"createRef",value:function createRef(e,t){return this._request("POST","/repos/"+this.__fullname+"/git/refs",e,t)}},{key:"deleteRef",value:function deleteRef(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/git/refs/"+e,null,t)}},{key:"deleteRepo",value:function deleteRepo(e){return this._request("DELETE","/repos/"+this.__fullname,null,e)}},{key:"listTags",value:function listTags(e){return this._request("GET","/repos/"+this.__fullname+"/tags",null,e)}},{key:"listPullRequests",value:function listPullRequests(e,t){return e=e||{},this._request("GET","/repos/"+this.__fullname+"/pulls",e,t)}},{key:"getPullRequest",value:function getPullRequest(e,t){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+e,null,t)}},{key:"listPullRequestFiles",value:function listPullRequestFiles(e,t){return this._request("GET","/repos/"+this.__fullname+"/pulls/"+e+"/files",null,t)}},{key:"compareBranches",value:function compareBranches(e,t,n){return this._request("GET","/repos/"+this.__fullname+"/compare/"+e+"..."+t,null,n)}},{key:"listBranches",value:function listBranches(e){return this._request("GET","/repos/"+this.__fullname+"/branches",null,e)}},{key:"getBlob",value:function getBlob(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/blobs/"+e,null,t,"raw")}},{key:"getBranch",value:function getBranch(e,t){return this._request("GET","/repos/"+this.__fullname+"/branches/"+e,null,t)}},{key:"getCommit",value:function getCommit(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/commits/"+e,null,t)}},{key:"listCommits",value:function listCommits(e,t){return"function"===typeof(e=e||{})&&(t=e,e={}),e.since=this._dateToISO(e.since),e.until=this._dateToISO(e.until),this._request("GET","/repos/"+this.__fullname+"/commits",e,t)}},{key:"getSingleCommit",value:function getSingleCommit(e,t){return e=e||"",this._request("GET","/repos/"+this.__fullname+"/commits/"+e,null,t)}},{key:"getSha",value:function getSha(e,t,n){return e=e?"?ref="+e:"",this._request("GET","/repos/"+this.__fullname+"/contents/"+t+e,null,n)}},{key:"listStatuses",value:function listStatuses(e,t){return this._request("GET","/repos/"+this.__fullname+"/commits/"+e+"/statuses",null,t)}},{key:"getCombinedStatus",value:function getCombinedStatus(e,t){return this._request("GET","/repos/"+this.__fullname+"/commits/"+e+"/status",null,t)}},{key:"getTree",value:function getTree(e,t){return this._request("GET","/repos/"+this.__fullname+"/git/trees/"+e,null,t)}},{key:"createBlob",value:function createBlob(e,t){var n=this._getContentObject(e);return u("sending content",n),this._request("POST","/repos/"+this.__fullname+"/git/blobs",n,t)}},{key:"_getContentObject",value:function _getContentObject(e){if("string"===typeof e)return u("contet is a string"),{content:o.default.encode(e),encoding:"utf-8"};if("undefined"!==typeof t&&e instanceof t)return u("We appear to be in Node"),{content:e.toString("base64"),encoding:"base64"};if("undefined"!==typeof Blob&&e instanceof Blob)return u("We appear to be in the browser"),{content:s.Base64.encode(e),encoding:"base64"};throw u("Not sure what this content is: "+("undefined"===typeof e?"undefined":r(e))+", "+JSON.stringify(e)),new Error("Unknown content passed to postBlob. Must be string or Buffer (node) or Blob (web)")}},{key:"updateTree",value:function updateTree(e,t,n,r){var i={base_tree:e,tree:[{path:t,sha:n,mode:"100644",type:"blob"}]};return this._request("POST","/repos/"+this.__fullname+"/git/trees",i,r)}},{key:"createTree",value:function createTree(e,t,n){return this._request("POST","/repos/"+this.__fullname+"/git/trees",{tree:e,base_tree:t},n)}},{key:"commit",value:function commit(e,t,n,r,i){var a=this;"function"===typeof r&&(i=r,r={});var o={message:n,tree:t,parents:[e]};return o=Object.assign({},r,o),this._request("POST","/repos/"+this.__fullname+"/git/commits",o,i).then((function(e){return a.__currentTree.sha=e.data.sha,e}))}},{key:"updateHead",value:function updateHead(e,t,n,r){return this._request("PATCH","/repos/"+this.__fullname+"/git/refs/"+e,{sha:t,force:n},r)}},{key:"updateStatus",value:function updateStatus(e,t,n){return this._request("POST","/repos/"+this.__fullname+"/statuses/"+e,t,n)}},{key:"updateRepository",value:function updateRepository(e,t){return this._request("PATCH","/repos/"+this.__fullname,e,t)}},{key:"getDetails",value:function getDetails(e){return this._request("GET","/repos/"+this.__fullname,null,e)}},{key:"getContributors",value:function getContributors(e){return this._request("GET","/repos/"+this.__fullname+"/contributors",null,e)}},{key:"getContributorStats",value:function getContributorStats(e){return this._request("GET","/repos/"+this.__fullname+"/stats/contributors",null,e)}},{key:"getCollaborators",value:function getCollaborators(e){return this._request("GET","/repos/"+this.__fullname+"/collaborators",null,e)}},{key:"isCollaborator",value:function isCollaborator(e,t){return this._request("GET","/repos/"+this.__fullname+"/collaborators/"+e,null,t)}},{key:"getContents",value:function getContents(e,t,n,r){return t=t?""+encodeURI(t):"",this._request("GET","/repos/"+this.__fullname+"/contents/"+t,{ref:e},r,n)}},{key:"getReadme",value:function getReadme(e,t,n){return this._request("GET","/repos/"+this.__fullname+"/readme",{ref:e},n,t)}},{key:"fork",value:function fork(e){return this._request("POST","/repos/"+this.__fullname+"/forks",null,e)}},{key:"forkToOrg",value:function forkToOrg(e,t){return this._request("POST","/repos/"+this.__fullname+"/forks?organization="+e,null,t)}},{key:"listForks",value:function listForks(e){return this._request("GET","/repos/"+this.__fullname+"/forks",null,e)}},{key:"createBranch",value:function createBranch(e,t,n){var r=this;return"function"===typeof t&&(n=t,t=e,e="master"),this.getRef("heads/"+e).then((function(e){var i=e.data.object.sha;return r.createRef({sha:i,ref:"refs/heads/"+t},n)}))}},{key:"createPullRequest",value:function createPullRequest(e,t){return this._request("POST","/repos/"+this.__fullname+"/pulls",e,t)}},{key:"updatePullRequest",value:function updatePullRequest(e,t,n){return this._request("PATCH","/repos/"+this.__fullname+"/pulls/"+e,t,n)}},{key:"listHooks",value:function listHooks(e){return this._request("GET","/repos/"+this.__fullname+"/hooks",null,e)}},{key:"getHook",value:function getHook(e,t){return this._request("GET","/repos/"+this.__fullname+"/hooks/"+e,null,t)}},{key:"createHook",value:function createHook(e,t){return this._request("POST","/repos/"+this.__fullname+"/hooks",e,t)}},{key:"updateHook",value:function updateHook(e,t,n){return this._request("PATCH","/repos/"+this.__fullname+"/hooks/"+e,t,n)}},{key:"deleteHook",value:function deleteHook(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/hooks/"+e,null,t)}},{key:"listKeys",value:function listKeys(e){return this._request("GET","/repos/"+this.__fullname+"/keys",null,e)}},{key:"getKey",value:function getKey(e,t){return this._request("GET","/repos/"+this.__fullname+"/keys/"+e,null,t)}},{key:"createKey",value:function createKey(e,t){return this._request("POST","/repos/"+this.__fullname+"/keys",e,t)}},{key:"deleteKey",value:function deleteKey(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/keys/"+e,null,t)}},{key:"deleteFile",value:function deleteFile(e,t,n){var r=this;return this.getSha(e,t).then((function(i){var a={message:"Delete the file at '"+t+"'",sha:i.data.sha,branch:e};return r._request("DELETE","/repos/"+r.__fullname+"/contents/"+t,a,n)}))}},{key:"move",value:function move(e,t,n,r){var i=this,a=void 0;return this.getRef("heads/"+e).then((function(e){var t=e.data.object;return i.getTree(t.sha+"?recursive=true")})).then((function(e){var r=e.data,o=r.tree,s=r.sha;a=s;var u=o.map((function(e){return e.path===t&&(e.path=n),"tree"===e.type&&delete e.sha,e}));return i.createTree(u)})).then((function(e){var r=e.data;return i.commit(a,r.sha,"Renamed '"+t+"' to '"+n+"'")})).then((function(t){var n=t.data;return i.updateHead("heads/"+e,n.sha,!0,r)}))}},{key:"writeFile",value:function writeFile(e,t,n,r,i,a){var o=this;"function"===typeof i&&(a=i,i={});var u=t?encodeURI(t):"",l=!1!==i.encode,c={branch:e,message:r,author:i.author,committer:i.committer,content:l?s.Base64.encode(n):n};return this.getSha(e,u).then((function(e){return c.sha=e.data.sha,o._request("PUT","/repos/"+o.__fullname+"/contents/"+u,c,a)}),(function(){return o._request("PUT","/repos/"+o.__fullname+"/contents/"+u,c,a)}))}},{key:"isStarred",value:function isStarred(e){return this._request204or404("/user/starred/"+this.__fullname,null,e)}},{key:"star",value:function star(e){return this._request("PUT","/user/starred/"+this.__fullname,null,e)}},{key:"unstar",value:function unstar(e){return this._request("DELETE","/user/starred/"+this.__fullname,null,e)}},{key:"createRelease",value:function createRelease(e,t){return this._request("POST","/repos/"+this.__fullname+"/releases",e,t)}},{key:"updateRelease",value:function updateRelease(e,t,n){return this._request("PATCH","/repos/"+this.__fullname+"/releases/"+e,t,n)}},{key:"listReleases",value:function listReleases(e){return this._request("GET","/repos/"+this.__fullname+"/releases",null,e)}},{key:"getRelease",value:function getRelease(e,t){return this._request("GET","/repos/"+this.__fullname+"/releases/"+e,null,t)}},{key:"deleteRelease",value:function deleteRelease(e,t){return this._request("DELETE","/repos/"+this.__fullname+"/releases/"+e,null,t)}},{key:"mergePullRequest",value:function mergePullRequest(e,t,n){return this._request("PUT","/repos/"+this.__fullname+"/pulls/"+e+"/merge",t,n)}},{key:"listProjects",value:function listProjects(e){return this._requestAllPages("/repos/"+this.__fullname+"/projects",{AcceptHeader:"inertia-preview"},e)}},{key:"createProject",value:function createProject(e,t){return(e=e||{}).AcceptHeader="inertia-preview",this._request("POST","/repos/"+this.__fullname+"/projects",e,t)}}]),Repository}(a.default);e.exports=l}).call(this,n(20).Buffer)},function(e,t,n){(function(e,r){var i;!function(a){var o=t,s=(e&&e.exports,"object"==typeof r&&r);s.global!==s&&s.window;var u,l,c,f=String.fromCharCode;function ucs2decode(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function checkScalarValue(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function createByte(e,t){return f(e>>t&63|128)}function encodeCodePoint(e){if(0==(4294967168&e))return f(e);var t="";return 0==(4294965248&e)?t=f(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e),t=f(e>>12&15|224),t+=createByte(e,6)):0==(4292870144&e)&&(t=f(e>>18&7|240),t+=createByte(e,12),t+=createByte(e,6)),t+=f(63&e|128)}function readContinuationByte(){if(c>=l)throw Error("Invalid byte index");var e=255&u[c];if(c++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(){var e,t;if(c>l)throw Error("Invalid byte index");if(c==l)return!1;if(e=255&u[c],c++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|readContinuationByte())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(7&e)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var d={version:"2.1.2",encode:function utf8encode(e){for(var t=ucs2decode(e),n=t.length,r=-1,i="";++r<n;)i+=encodeCodePoint(t[r]);return i},decode:function utf8decode(e){u=ucs2decode(e),l=u.length,c=0;for(var t,n=[];!1!==(t=decodeSymbol());)n.push(t);return function ucs2encode(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=f(t);return i}(n)}};void 0===(i=function(){return d}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(111)(e),n(19))},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Organization(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Organization);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Organization.__proto__||Object.getPrototypeOf(Organization)).call(this,t,n));return r.__name=e,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Organization,e),r(Organization,[{key:"createRepo",value:function createRepo(e,t){return this._request("POST","/orgs/"+this.__name+"/repos",e,t)}},{key:"getRepos",value:function getRepos(e){var t=this._getOptionsWithDefaults({direction:"desc"});return this._requestAllPages("/orgs/"+this.__name+"/repos",t,e)}},{key:"isMember",value:function isMember(e,t){return this._request204or404("/orgs/"+this.__name+"/members/"+e,null,t)}},{key:"listMembers",value:function listMembers(e,t){return this._request("GET","/orgs/"+this.__name+"/members",e,t)}},{key:"getTeams",value:function getTeams(e){return this._requestAllPages("/orgs/"+this.__name+"/teams",void 0,e)}},{key:"createTeam",value:function createTeam(e,t){return this._request("POST","/orgs/"+this.__name+"/teams",e,t)}},{key:"listProjects",value:function listProjects(e){return this._requestAllPages("/orgs/"+this.__name+"/projects",{AcceptHeader:"inertia-preview"},e)}},{key:"createProject",value:function createProject(e,t){return(e=e||{}).AcceptHeader="inertia-preview",this._request("POST","/orgs/"+this.__name+"/projects",e,t)}}]),Organization}(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(29)).default);e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),i=_interopRequireDefault(n(29));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=(0,_interopRequireDefault(n(55)).default)("github:team"),o=function(e){function Team(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Team);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Team.__proto__||Object.getPrototypeOf(Team)).call(this,t,n));return r.__teamId=e,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Team,e),r(Team,[{key:"getTeam",value:function getTeam(e){return a("Fetching Team "+this.__teamId),this._request("Get","/teams/"+this.__teamId,void 0,e)}},{key:"listRepos",value:function listRepos(e){return a("Fetching repositories for Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/repos",void 0,e)}},{key:"editTeam",value:function editTeam(e,t){return a("Editing Team "+this.__teamId),this._request("PATCH","/teams/"+this.__teamId,e,t)}},{key:"listMembers",value:function listMembers(e,t){return a("Getting members of Team "+this.__teamId),this._requestAllPages("/teams/"+this.__teamId+"/members",e,t)}},{key:"getMembership",value:function getMembership(e,t){return a("Getting membership of user "+e+" in Team "+this.__teamId),this._request("GET","/teams/"+this.__teamId+"/memberships/"+e,void 0,t)}},{key:"addMembership",value:function addMembership(e,t,n){return a("Adding user "+e+" to Team "+this.__teamId),this._request("PUT","/teams/"+this.__teamId+"/memberships/"+e,t,n)}},{key:"isManagedRepo",value:function isManagedRepo(e,t,n){return a("Getting repo management by Team "+this.__teamId+" for repo "+e+"/"+t),this._request204or404("/teams/"+this.__teamId+"/repos/"+e+"/"+t,void 0,n)}},{key:"manageRepo",value:function manageRepo(e,t,n,r){return a("Adding or Updating repo management by Team "+this.__teamId+" for repo "+e+"/"+t),this._request204or404("/teams/"+this.__teamId+"/repos/"+e+"/"+t,n,r,"PUT")}},{key:"unmanageRepo",value:function unmanageRepo(e,t,n){return a("Remove repo management by Team "+this.__teamId+" for repo "+e+"/"+t),this._request204or404("/teams/"+this.__teamId+"/repos/"+e+"/"+t,void 0,n,"DELETE")}},{key:"deleteTeam",value:function deleteTeam(e){return a("Deleting Team "+this.__teamId),this._request204or404("/teams/"+this.__teamId,void 0,e,"DELETE")}}]),Team}(i.default);e.exports=o},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Markdown(e,t){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Markdown),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Markdown.__proto__||Object.getPrototypeOf(Markdown)).call(this,e,t))}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Markdown,e),r(Markdown,[{key:"render",value:function render(e,t){return this._request("POST","/markdown",e,t,!0)}}]),Markdown}(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(29)).default);e.exports=i},function(e,t,n){"use strict";var r=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var i=function(e){function Project(e,t,n){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Project);var r=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(Project.__proto__||Object.getPrototypeOf(Project)).call(this,t,n,"inertia-preview"));return r.__id=e,r}return function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Project,e),r(Project,[{key:"getProject",value:function getProject(e){return this._request("GET","/projects/"+this.__id,null,e)}},{key:"updateProject",value:function updateProject(e,t){return this._request("PATCH","/projects/"+this.__id,e,t)}},{key:"deleteProject",value:function deleteProject(e){return this._request("DELETE","/projects/"+this.__id,null,e)}},{key:"listProjectColumns",value:function listProjectColumns(e){return this._requestAllPages("/projects/"+this.__id+"/columns",null,e)}},{key:"getProjectColumn",value:function getProjectColumn(e,t){return this._request("GET","/projects/columns/"+e,null,t)}},{key:"createProjectColumn",value:function createProjectColumn(e,t){return this._request("POST","/projects/"+this.__id+"/columns",e,t)}},{key:"updateProjectColumn",value:function updateProjectColumn(e,t,n){return this._request("PATCH","/projects/columns/"+e,t,n)}},{key:"deleteProjectColumn",value:function deleteProjectColumn(e,t){return this._request("DELETE","/projects/columns/"+e,null,t)}},{key:"moveProjectColumn",value:function moveProjectColumn(e,t,n){return this._request("POST","/projects/columns/"+e+"/moves",{position:t},n)}},{key:"listProjectCards",value:function listProjectCards(e){var t=this;return this.listProjectColumns().then((function(e){var n=e.data;return Promise.all(n.map((function(e){return t._requestAllPages("/projects/columns/"+e.id+"/cards",null)})))})).then((function(t){var n=t.reduce((function(e,t){var n=t.data;return e.push.apply(e,function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)),e}),[]);return e&&e(null,n),n})).catch((function(t){if(!e)throw t;e(t)}))}},{key:"listColumnCards",value:function listColumnCards(e,t){return this._requestAllPages("/projects/columns/"+e+"/cards",null,t)}},{key:"getProjectCard",value:function getProjectCard(e,t){return this._request("GET","/projects/columns/cards/"+e,null,t)}},{key:"createProjectCard",value:function createProjectCard(e,t,n){return this._request("POST","/projects/columns/"+e+"/cards",t,n)}},{key:"updateProjectCard",value:function updateProjectCard(e,t,n){return this._request("PATCH","/projects/columns/cards/"+e,t,n)}},{key:"deleteProjectCard",value:function deleteProjectCard(e,t){return this._request("DELETE","/projects/columns/cards/"+e,null,t)}},{key:"moveProjectCard",value:function moveProjectCard(e,t,n,r){return this._request("POST","/projects/columns/cards/"+e+"/moves",{position:t,column_id:n},r)}}]),Project}(function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(29)).default);e.exports=i},function(e,t,n){var r=n(197),i=n(72)("socket.io-client:url");e.exports=function url(e,t){var n=e;t=t||"undefined"!==typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!==typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){var r=n(198);e.exports=function setup(e){function selectColor(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(debug.enabled){var i=debug,a=Number(new Date),o=a-(t||a);i.diff=o,i.prev=t,i.curr=a,t=a,n[0]=createDebug.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var s=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return e;s++;var r=createDebug.formatters[t];if("function"===typeof r){var a=n[s];e=r.call(i,a),n.splice(s,1),s--}return e})),createDebug.formatArgs.call(i,n),(i.log||createDebug.log).apply(i,n)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"===typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){var n=createDebug(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){if(e instanceof Error)return e.stack||e.message;return e},createDebug.disable=function disable(){var e=[].concat(r(createDebug.names.map(toNamespace)),r(createDebug.skips.map(toNamespace).map((function(e){return"-"+e})))).join(",");return createDebug.enable(""),e},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=createDebug.skips.length;t<n;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,n=createDebug.names.length;t<n;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=n(503),Object.keys(e).forEach((function(t){createDebug[t]=e[t]})),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t){e.exports=function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){var n=1e3,r=60*n,i=60*r,a=24*i,o=7*a,s=365.25*a;function plural(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===u&&isFinite(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=a)return plural(e,t,a,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=r)return plural(e,t,r,"minute");if(t>=n)return plural(e,t,n,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=a)return Math.round(e/a)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(r){function load(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",PUBLIC_URL:"/cabana",REACT_APP_VIDEO_CDN:"https://cabana-video.azureedge.net"}).DEBUG),e}(t=e.exports=n(505)).log=function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function formatArgs(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))})),e.splice(a,0,r)},t.save=function save(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=load,t.useColors=function useColors(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function localstorage(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(load())}).call(this,n(41))},function(e,t,n){function createDebug(e){var n;function debug(){if(debug.enabled){var e=debug,r=+new Date,i=r-(n||r);e.diff=i,e.prev=n,e.curr=r,n=r;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!==typeof a[0]&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"===typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n})),t.formatArgs.call(e,a),(debug.log||t.log||console.log.bind(console)).apply(e,a)}}return debug.namespace=e,debug.enabled=t.enabled(e),debug.useColors=t.useColors(),debug.color=function selectColor(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),debug.destroy=destroy,"function"===typeof t.init&&t.init(debug),t.instances.push(debug),debug}function destroy(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=createDebug.debug=createDebug.default=createDebug).coerce=function coerce(e){return e instanceof Error?e.stack||e.message:e},t.disable=function disable(){t.enable("")},t.enable=function enable(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(195),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(199),i=n(200),a=Object.prototype.toString,o="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===a.call(Blob),s="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===a.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,a=e;return a.data=function _deconstructPacket(e,t){if(!e)return e;if(i(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var a=new Array(e.length),o=0;o<e.length;o++)a[o]=_deconstructPacket(e[o],t);return a}if("object"===typeof e&&!(e instanceof Date)){a={};for(var s in e)a[s]=_deconstructPacket(e[s],t);return a}return e}(n,t),a.attachments=t.length,{packet:a,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function _reconstructPacket(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=_reconstructPacket(e[n],t);else if("object"===typeof e)for(var i in e)e[i]=_reconstructPacket(e[i],t);return e}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function _removeBlobs(e,u,l){if(!e)return e;if(o&&e instanceof Blob||s&&e instanceof File){n++;var c=new FileReader;c.onload=function(){l?l[u]=this.result:a=this.result,--n||t(a)},c.readAsArrayBuffer(e)}else if(r(e))for(var f=0;f<e.length;f++)_removeBlobs(e[f],f,e);else if("object"===typeof e&&!i(e))for(var d in e)_removeBlobs(e[d],d,e)}(a),n||t(a)}},function(e,t,n){e.exports=n(508),e.exports.parser=n(48)},function(e,t,n){var r=n(202),i=n(47),a=n(75)("engine.io-client:socket"),o=n(206),s=n(48),u=n(197),l=n(73);function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);t=t||{},e&&"object"===typeof e&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"===typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=Socket,Socket.priorWebsocketSuccess=!1,i(Socket.prototype),Socket.protocol=s.protocol,Socket.Socket=Socket,Socket.Transport=n(125),Socket.transports=n(202),Socket.parser=n(48),Socket.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function clone(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},Socket.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function onTransportOpen(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(a('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;Socket.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),cleanup(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{a('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,r.emit("upgradeError",o)}})))}function freezeTransport(){n||(n=!0,cleanup(),t.close(),t=null)}function onerror(n){var i=new Error("probe error: "+n);i.transport=t.name,freezeTransport(),a('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),freezeTransport())}function cleanup(){t.removeListener("open",onTransportOpen),t.removeListener("error",onerror),t.removeListener("close",onTransportClose),r.removeListener("close",onclose),r.removeListener("upgrading",onupgrade)}Socket.priorWebsocketSuccess=!1,t.once("open",onTransportOpen),t.once("error",onerror),t.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),t.open()},Socket.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},Socket.prototype.sendPacket=function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},Socket.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?waitForUpgrade():close()})):this.upgrading?waitForUpgrade():close()}function close(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function cleanupAndClose(){e.removeListener("upgrade",cleanupAndClose),e.removeListener("upgradeError",cleanupAndClose),close()}function waitForUpgrade(){e.once("upgrade",cleanupAndClose),e.once("upgradeError",cleanupAndClose)}return this},Socket.prototype.onError=function(e){a("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~o(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){e.exports=!1}},function(e,t,n){var r=n(124),i=n(203),a=n(47),o=n(74),s=n(75)("engine.io-client:polling-xhr");function empty(){}function XHR(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!==typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function Request(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=XHR,e.exports.Request=Request,o(XHR,i),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Request(e)},XHR.prototype.doWrite=function(e,t){var n="string"!==typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",(function(e){i.onError("xhr post error",e)})),this.sendXhr=r},XHR.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(Request.prototype),Request.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(a){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{t.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(a){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"===typeof t.status?t.status:0)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(a){return void setTimeout((function(){n.onError(a)}),0)}"undefined"!==typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},Request.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},Request.prototype.cleanup=function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(n){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},Request.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"===typeof addEventListener){var u="onpagehide"in self?"pagehide":"unload";addEventListener(u,unloadHandler,!1)}function unloadHandler(){for(var e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}},function(e,t){e.exports=Object.keys||function keys(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),a=new Uint8Array(n-t),o=t,s=0;o<n;o++,s++)a[s]=i[o];return a.buffer}},function(e,t){function noop(){}e.exports=function after(e,t,n){var r=!1;return n=n||noop,proxy.count=e,0===e?t():proxy;function proxy(e,i){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,e?(r=!0,t(e),t=n):0!==proxy.count||r||t(null,i)}}},function(e,t){var n,r,i,a=String.fromCharCode;function ucs2decode(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function checkScalarValue(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(e,t){return a(e>>t&63|128)}function encodeCodePoint(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e,t)||(e=65533),n=a(e>>12&15|224),n+=createByte(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=createByte(e,12),n+=createByte(e,6)),n+=a(63&e|128)}function readContinuationByte(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(e){var t,a;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|readContinuationByte())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function utf8encode(e,t){for(var n=!1!==(t=t||{}).strict,r=ucs2decode(e),i=r.length,a=-1,o="";++a<i;)o+=encodeCodePoint(r[a],n);return o},decode:function utf8decode(e,t){var o=!1!==(t=t||{}).strict;n=ucs2decode(e),r=n.length,i=0;for(var s,u=[];!1!==(s=decodeSymbol(o));)u.push(s);return function ucs2encode(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=a(t);return i}(u)}}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,a="";for(n=0;n<i;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return i%3===2?a=a.substring(0,a.length-1)+"=":i%3===1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(e){var t,r,i,a,o,s=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),f=new Uint8Array(c);for(t=0;t<u;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],a=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],f[l++]=r<<2|i>>4,f[l++]=(15&i)<<4|a>>2,f[l++]=(3&a)<<6|63&o;return c}}()},function(e,t){var n="undefined"!==typeof n?n:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function mapArrayBufferViews(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function BlobBuilderConstructor(e,t){t=t||{};var r=new n;return mapArrayBufferViews(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function BlobConstructor(e,t){return new Blob(mapArrayBufferViews(e),t||{})}"undefined"!==typeof Blob&&(BlobBuilderConstructor.prototype=Blob.prototype,BlobConstructor.prototype=Blob.prototype),e.exports=r?i?Blob:BlobConstructor:a?BlobBuilderConstructor:void 0},function(e,t,n){var r=n(198);e.exports=function setup(e){function selectColor(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return createDebug.colors[Math.abs(t)%createDebug.colors.length]}function createDebug(e){var t;function debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(debug.enabled){var i=debug,a=Number(new Date),o=a-(t||a);i.diff=o,i.prev=t,i.curr=a,t=a,n[0]=createDebug.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var s=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return e;s++;var r=createDebug.formatters[t];if("function"===typeof r){var a=n[s];e=r.call(i,a),n.splice(s,1),s--}return e})),createDebug.formatArgs.call(i,n),(i.log||createDebug.log).apply(i,n)}}return debug.namespace=e,debug.enabled=createDebug.enabled(e),debug.useColors=createDebug.useColors(),debug.color=selectColor(e),debug.destroy=destroy,debug.extend=extend,"function"===typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var e=createDebug.instances.indexOf(this);return-1!==e&&(createDebug.instances.splice(e,1),!0)}function extend(e,t){var n=createDebug(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(e){if(e instanceof Error)return e.stack||e.message;return e},createDebug.disable=function disable(){var e=[].concat(r(createDebug.names.map(toNamespace)),r(createDebug.skips.map(toNamespace).map((function(e){return"-"+e})))).join(",");return createDebug.enable(""),e},createDebug.enable=function enable(e){var t;createDebug.save(e),createDebug.names=[],createDebug.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+e.substr(1)+"$")):createDebug.names.push(new RegExp("^"+e+"$")));for(t=0;t<createDebug.instances.length;t++){var i=createDebug.instances[t];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=createDebug.skips.length;t<n;t++)if(createDebug.skips[t].test(e))return!1;for(t=0,n=createDebug.names.length;t<n;t++)if(createDebug.names[t].test(e))return!0;return!1},createDebug.humanize=n(519),Object.keys(e).forEach((function(t){createDebug[t]=e[t]})),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(e,t){var n=1e3,r=60*n,i=60*r,a=24*i,o=7*a,s=365.25*a;function plural(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var u=typeof e;if("string"===u&&e.length>0)return function parse(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*s;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*i;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===u&&isFinite(e))return t.long?function fmtLong(e){var t=Math.abs(e);if(t>=a)return plural(e,t,a,"day");if(t>=i)return plural(e,t,i,"hour");if(t>=r)return plural(e,t,r,"minute");if(t>=n)return plural(e,t,n,"second");return e+" ms"}(e):function fmtShort(e){var t=Math.abs(e);if(t>=a)return Math.round(e/a)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(t){var r=n(203),i=n(74);e.exports=JSONPPolling;var a,o=/\n/g,s=/\\n/g;function empty(){}function glob(){return"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{}}function JSONPPolling(e){if(r.call(this,e),this.query=this.query||{},!a){var t=glob();a=t.___eio=t.___eio||[]}this.index=a.length;var n=this;a.push((function(e){n.onData(e)})),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",(function(){n.script&&(n.script.onerror=empty)}),!1)}i(JSONPPolling,r),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},JSONPPolling.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=u,i.method="POST",i.setAttribute("accept-charset","utf-8"),a.name="d",i.appendChild(a),document.body.appendChild(i),this.form=i,this.area=a}function complete(){initIframe(),t()}function initIframe(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),initIframe(),e=e.replace(s,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&complete()}:this.iframe.onload=complete}}).call(this,n(19))},function(e,t,n){(function(t){var r,i,a=n(125),o=n(48),s=n(73),u=n(74),l=n(205),c=n(75)("engine.io-client:websocket");if("undefined"!==typeof WebSocket?r=WebSocket:"undefined"!==typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"===typeof window)try{i=n(522)}catch(d){}var f=r||i;function WS(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=i),a.call(this,e)}e.exports=WS,u(WS,a),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},WS.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,a=r;i<a;i++)!function(e){o.encodePacket(e,n.supportsBinary,(function(i){if(!n.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),n.perMessageDeflate)("string"===typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,a)}catch(d){c("websocket closed before onclose event")}--r||done()}))}(e[i]);function done(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},WS.prototype.onClose=function(){a.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},WS.prototype.check=function(){return!!f&&!("__initialize"in f&&this.name===WS.prototype.name)}}).call(this,n(20).Buffer)},,function(e,t){e.exports=function toArray(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=Backoff,Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e}},,,,,,,,function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"aggregate",(function(){return Aggregate})),n.d(r,"bin",(function(){return Bin})),n.d(r,"collect",(function(){return Collect})),n.d(r,"compare",(function(){return Compare})),n.d(r,"countpattern",(function(){return CountPattern})),n.d(r,"cross",(function(){return Cross})),n.d(r,"density",(function(){return Density})),n.d(r,"expression",(function(){return Expression})),n.d(r,"extent",(function(){return Extent})),n.d(r,"facet",(function(){return Facet})),n.d(r,"field",(function(){return Field})),n.d(r,"filter",(function(){return Filter})),n.d(r,"flatten",(function(){return Flatten})),n.d(r,"fold",(function(){return Fold})),n.d(r,"formula",(function(){return Formula})),n.d(r,"generate",(function(){return Generate})),n.d(r,"impute",(function(){return Impute})),n.d(r,"joinaggregate",(function(){return JoinAggregate})),n.d(r,"kde",(function(){return KDE})),n.d(r,"key",(function(){return Key})),n.d(r,"load",(function(){return Load})),n.d(r,"lookup",(function(){return Lookup})),n.d(r,"multiextent",(function(){return MultiExtent})),n.d(r,"multivalues",(function(){return MultiValues})),n.d(r,"params",(function(){return Params})),n.d(r,"pivot",(function(){return Pivot})),n.d(r,"prefacet",(function(){return PreFacet})),n.d(r,"project",(function(){return Project})),n.d(r,"proxy",(function(){return Proxy})),n.d(r,"relay",(function(){return Relay})),n.d(r,"sample",(function(){return Sample})),n.d(r,"sequence",(function(){return Sequence})),n.d(r,"sieve",(function(){return Sieve})),n.d(r,"subflow",(function(){return Subflow})),n.d(r,"tupleindex",(function(){return TupleIndex})),n.d(r,"values",(function(){return Values})),n.d(r,"window",(function(){return Window}));var a={};n.r(a),n.d(a,"bound",(function(){return Bound})),n.d(a,"identifier",(function(){return Identifier_Identifier})),n.d(a,"mark",(function(){return Mark})),n.d(a,"overlap",(function(){return Overlap})),n.d(a,"render",(function(){return Render})),n.d(a,"viewlayout",(function(){return ViewLayout}));var o={};n.r(o),n.d(o,"interpolate",(function(){return _s})),n.d(o,"interpolateArray",(function(){return us})),n.d(o,"interpolateBasis",(function(){return ns})),n.d(o,"interpolateBasisClosed",(function(){return rs})),n.d(o,"interpolateDate",(function(){return ls})),n.d(o,"interpolateDiscrete",(function(){return bs})),n.d(o,"interpolateHue",(function(){return xs})),n.d(o,"interpolateNumber",(function(){return cs})),n.d(o,"interpolateObject",(function(){return fs})),n.d(o,"interpolateRound",(function(){return ws})),n.d(o,"interpolateString",(function(){return ys})),n.d(o,"interpolateTransformCss",(function(){return Ts})),n.d(o,"interpolateTransformSvg",(function(){return Cs})),n.d(o,"interpolateZoom",(function(){return As})),n.d(o,"interpolateRgb",(function(){return as})),n.d(o,"interpolateRgbBasis",(function(){return os})),n.d(o,"interpolateRgbBasisClosed",(function(){return ss})),n.d(o,"interpolateHsl",(function(){return Rs})),n.d(o,"interpolateHslLong",(function(){return Ds})),n.d(o,"interpolateLab",(function(){return lab_lab})),n.d(o,"interpolateHcl",(function(){return zs})),n.d(o,"interpolateHclLong",(function(){return qs})),n.d(o,"interpolateCubehelix",(function(){return Xs})),n.d(o,"interpolateCubehelixLong",(function(){return Ks})),n.d(o,"piecewise",(function(){return piecewise_piecewise})),n.d(o,"quantize",(function(){return Js}));var s={};n.r(s),n.d(s,"axisticks",(function(){return AxisTicks})),n.d(s,"datajoin",(function(){return DataJoin})),n.d(s,"encode",(function(){return Encode})),n.d(s,"legendentries",(function(){return LegendEntries})),n.d(s,"linkpath",(function(){return LinkPath})),n.d(s,"pie",(function(){return Pie})),n.d(s,"scale",(function(){return Scale})),n.d(s,"sortitems",(function(){return SortItems})),n.d(s,"stack",(function(){return Stack})),n.d(s,"validTicks",(function(){return validTicks}));var u={};n.r(u),n.d(u,"contour",(function(){return Contour})),n.d(u,"geojson",(function(){return GeoJSON})),n.d(u,"geopath",(function(){return GeoPath})),n.d(u,"geopoint",(function(){return GeoPoint})),n.d(u,"geoshape",(function(){return GeoShape})),n.d(u,"graticule",(function(){return Graticule})),n.d(u,"projection",(function(){return Projection}));var l={};n.r(l),n.d(l,"force",(function(){return Force}));var c={};n.r(c),n.d(c,"nest",(function(){return Nest})),n.d(c,"pack",(function(){return Pack})),n.d(c,"partition",(function(){return Partition})),n.d(c,"stratify",(function(){return Stratify})),n.d(c,"tree",(function(){return Tree})),n.d(c,"treelinks",(function(){return TreeLinks})),n.d(c,"treemap",(function(){return Treemap}));var d={};n.r(d),n.d(d,"loess",(function(){return Loess})),n.d(d,"regression",(function(){return Regression}));var h={};n.r(h),n.d(h,"voronoi",(function(){return Voronoi_Voronoi}));var g={};n.r(g),n.d(g,"wordcloud",(function(){return Wordcloud}));var m={};n.r(m),n.d(m,"crossfilter",(function(){return CrossFilter})),n.d(m,"resolvefilter",(function(){return ResolveFilter}));var v={};n.r(v),n.d(v,"version",(function(){return qd.a})),n.d(v,"Dataflow",(function(){return Dataflow})),n.d(v,"EventStream",(function(){return EventStream})),n.d(v,"Parameters",(function(){return Parameters})),n.d(v,"Pulse",(function(){return Pulse})),n.d(v,"MultiPulse",(function(){return MultiPulse})),n.d(v,"Operator",(function(){return Operator})),n.d(v,"Transform",(function(){return Transform})),n.d(v,"changeset",(function(){return ChangeSet_changeset})),n.d(v,"ingest",(function(){return ingest})),n.d(v,"isTuple",(function(){return isTuple})),n.d(v,"definition",(function(){return register_definition})),n.d(v,"transform",(function(){return register_transform})),n.d(v,"transforms",(function(){return yt})),n.d(v,"tupleid",(function(){return tupleid})),n.d(v,"scale",(function(){return scales_scale})),n.d(v,"scheme",(function(){return schemes_scheme})),n.d(v,"interpolate",(function(){return interpolate_interpolate})),n.d(v,"interpolateColors",(function(){return interpolateColors})),n.d(v,"interpolateRange",(function(){return interpolateRange})),n.d(v,"timeInterval",(function(){return timeInterval})),n.d(v,"quantizeInterpolator",(function(){return quantizeInterpolator})),n.d(v,"projection",(function(){return projections_projection})),n.d(v,"View",(function(){return View})),n.d(v,"expressionFunction",(function(){return expressionFunction})),n.d(v,"formatLocale",(function(){return defaultLocale_defaultLocale})),n.d(v,"timeFormatLocale",(function(){return defaultLocale})),n.d(v,"parse",(function(){return Aw})),n.d(v,"runtime",(function(){return Mw})),n.d(v,"runtimeContext",(function(){return Fw})),n.d(v,"bin",(function(){return xt})),n.d(v,"bootstrapCI",(function(){return Ct})),n.d(v,"quartiles",(function(){return Ot})),n.d(v,"random",(function(){return kt})),n.d(v,"setRandom",(function(){return setRandom})),n.d(v,"randomLCG",(function(){return At})),n.d(v,"randomInteger",(function(){return Rt})),n.d(v,"randomKDE",(function(){return Pt})),n.d(v,"randomMixture",(function(){return Mt})),n.d(v,"randomNormal",(function(){return Dt})),n.d(v,"randomUniform",(function(){return jt})),n.d(v,"regressionLinear",(function(){return Lt})),n.d(v,"regressionLog",(function(){return Nt})),n.d(v,"regressionExp",(function(){return Bt})),n.d(v,"regressionPow",(function(){return Ut})),n.d(v,"regressionQuad",(function(){return zt})),n.d(v,"regressionPoly",(function(){return Wt})),n.d(v,"regressionLoess",(function(){return Ht})),n.d(v,"sampleCurve",(function(){return Yt})),n.d(v,"accessor",(function(){return V.f})),n.d(v,"accessorName",(function(){return V.h})),n.d(v,"accessorFields",(function(){return V.g})),n.d(v,"id",(function(){return V.w})),n.d(v,"identity",(function(){return V.x})),n.d(v,"zero",(function(){return V.hb})),n.d(v,"one",(function(){return V.M})),n.d(v,"truthy",(function(){return V.eb})),n.d(v,"falsy",(function(){return V.r})),n.d(v,"logger",(function(){return V.K})),n.d(v,"None",(function(){return V.d})),n.d(v,"Error",(function(){return V.b})),n.d(v,"Warn",(function(){return V.e})),n.d(v,"Info",(function(){return V.c})),n.d(v,"Debug",(function(){return V.a})),n.d(v,"panLinear",(function(){return V.O})),n.d(v,"panLog",(function(){return V.P})),n.d(v,"panPow",(function(){return V.Q})),n.d(v,"panSymlog",(function(){return V.R})),n.d(v,"zoomLinear",(function(){return V.ib})),n.d(v,"zoomLog",(function(){return V.jb})),n.d(v,"zoomPow",(function(){return V.kb})),n.d(v,"zoomSymlog",(function(){return V.lb})),n.d(v,"quarter",(function(){return V.T})),n.d(v,"utcquarter",(function(){return V.fb})),n.d(v,"array",(function(){return V.i})),n.d(v,"clampRange",(function(){return V.j})),n.d(v,"compare",(function(){return V.k})),n.d(v,"constant",(function(){return V.l})),n.d(v,"debounce",(function(){return V.m})),n.d(v,"error",(function(){return V.n})),n.d(v,"extend",(function(){return V.o})),n.d(v,"extent",(function(){return V.p})),n.d(v,"extentIndex",(function(){return V.q})),n.d(v,"fastmap",(function(){return V.s})),n.d(v,"field",(function(){return V.t})),n.d(v,"flush",(function(){return V.u})),n.d(v,"hasOwnProperty",(function(){return V.v})),n.d(v,"inherits",(function(){return V.y})),n.d(v,"inrange",(function(){return V.z})),n.d(v,"isArray",(function(){return V.A})),n.d(v,"isBoolean",(function(){return V.B})),n.d(v,"isDate",(function(){return V.C})),n.d(v,"isFunction",(function(){return V.D})),n.d(v,"isNumber",(function(){return V.E})),n.d(v,"isObject",(function(){return V.F})),n.d(v,"isRegExp",(function(){return V.G})),n.d(v,"isString",(function(){return V.H})),n.d(v,"key",(function(){return V.I})),n.d(v,"lerp",(function(){return V.J})),n.d(v,"merge",(function(){return V.L})),n.d(v,"pad",(function(){return V.N})),n.d(v,"peek",(function(){return V.S})),n.d(v,"repeat",(function(){return V.U})),n.d(v,"span",(function(){return V.V})),n.d(v,"splitAccessPath",(function(){return V.W})),n.d(v,"stringValue",(function(){return V.X})),n.d(v,"toBoolean",(function(){return V.Y})),n.d(v,"toDate",(function(){return V.Z})),n.d(v,"toNumber",(function(){return V.ab})),n.d(v,"toString",(function(){return V.cb})),n.d(v,"toSet",(function(){return V.bb})),n.d(v,"truncate",(function(){return V.db})),n.d(v,"visitArray",(function(){return V.gb})),n.d(v,"loader",(function(){return eh})),n.d(v,"read",(function(){return Qd})),n.d(v,"inferType",(function(){return src_type_inferType})),n.d(v,"inferTypes",(function(){return src_type_inferTypes})),n.d(v,"typeParsers",(function(){return Yd})),n.d(v,"format",(function(){return Zd})),n.d(v,"formats",(function(){return vega_loader_src_formats_formats})),n.d(v,"responseType",(function(){return src_formats_responseType})),n.d(v,"Bounds",(function(){return Bounds_Bounds})),n.d(v,"Gradient",(function(){return ih})),n.d(v,"GroupItem",(function(){return GroupItem_GroupItem})),n.d(v,"ResourceLoader",(function(){return ResourceLoader_ResourceLoader})),n.d(v,"Item",(function(){return Item_Item})),n.d(v,"Scenegraph",(function(){return Scenegraph_Scenegraph})),n.d(v,"Handler",(function(){return src_Handler_Handler})),n.d(v,"Renderer",(function(){return src_Renderer_Renderer})),n.d(v,"CanvasHandler",(function(){return CanvasHandler_CanvasHandler})),n.d(v,"CanvasRenderer",(function(){return CanvasRenderer_CanvasRenderer})),n.d(v,"SVGHandler",(function(){return SVGHandler_SVGHandler})),n.d(v,"SVGRenderer",(function(){return SVGRenderer_SVGRenderer})),n.d(v,"SVGStringRenderer",(function(){return SVGStringRenderer_SVGStringRenderer})),n.d(v,"RenderType",(function(){return jp})),n.d(v,"renderModule",(function(){return modules_renderModule})),n.d(v,"intersect",(function(){return src_intersect_intersect})),n.d(v,"Marks",(function(){return op})),n.d(v,"boundClip",(function(){return Lp})),n.d(v,"boundContext",(function(){return bound_boundContext_context})),n.d(v,"boundStroke",(function(){return Ph})),n.d(v,"boundItem",(function(){return sp})),n.d(v,"boundMark",(function(){return lp})),n.d(v,"pathCurves",(function(){return curves_curves})),n.d(v,"pathSymbols",(function(){return path_symbols_symbols})),n.d(v,"pathRectangle",(function(){return wh})),n.d(v,"pathTrail",(function(){return kh})),n.d(v,"pathParse",(function(){return lh})),n.d(v,"pathRender",(function(){return _h})),n.d(v,"point",(function(){return dp})),n.d(v,"domCreate",(function(){return dom_domCreate})),n.d(v,"domFind",(function(){return dom_domFind})),n.d(v,"domChild",(function(){return dom_domChild})),n.d(v,"domClear",(function(){return dom_domClear})),n.d(v,"openTag",(function(){return tags_openTag})),n.d(v,"closeTag",(function(){return tags_closeTag})),n.d(v,"font",(function(){return util_text_font})),n.d(v,"fontFamily",(function(){return text_fontFamily})),n.d(v,"fontSize",(function(){return util_text_fontSize})),n.d(v,"textMetrics",(function(){return rp})),n.d(v,"resetSVGClipId",(function(){return clip_resetSVGClipId})),n.d(v,"sceneEqual",(function(){return equal_sceneEqual})),n.d(v,"pathEqual",(function(){return equal_pathEqual})),n.d(v,"sceneToJSON",(function(){return serialize_sceneToJSON})),n.d(v,"sceneFromJSON",(function(){return serialize_sceneFromJSON})),n.d(v,"intersectPath",(function(){return intersect_intersectPath})),n.d(v,"intersectPoint",(function(){return intersect_intersectPoint})),n.d(v,"intersectRule",(function(){return intersect_intersectRule})),n.d(v,"intersectBoxLine",(function(){return intersect_intersectBoxLine})),n.d(v,"sceneZOrder",(function(){return visit_zorder})),n.d(v,"sceneVisit",(function(){return util_visit_visit})),n.d(v,"scenePickVisit",(function(){return visit_pickVisit}));var y={};n.r(y),n.d(y,"INVALID_SPEC",(function(){return kS})),n.d(y,"FIT_NON_SINGLE",(function(){return SS})),n.d(y,"CANNOT_FIX_RANGE_STEP_WITH_FIT",(function(){return ES})),n.d(y,"cannotProjectOnChannelWithoutField",(function(){return cannotProjectOnChannelWithoutField})),n.d(y,"nearestNotSupportForContinuous",(function(){return nearestNotSupportForContinuous})),n.d(y,"selectionNotSupported",(function(){return selectionNotSupported})),n.d(y,"selectionNotFound",(function(){return selectionNotFound})),n.d(y,"SCALE_BINDINGS_CONTINUOUS",(function(){return TS})),n.d(y,"NO_INIT_SCALE_BINDINGS",(function(){return CS})),n.d(y,"noSuchRepeatedValue",(function(){return noSuchRepeatedValue})),n.d(y,"columnsNotSupportByRowCol",(function(){return columnsNotSupportByRowCol})),n.d(y,"CONCAT_CANNOT_SHARE_AXIS",(function(){return OS})),n.d(y,"REPEAT_CANNOT_SHARE_AXIS",(function(){return AS})),n.d(y,"unrecognizedParse",(function(){return unrecognizedParse})),n.d(y,"differentParse",(function(){return differentParse})),n.d(y,"invalidTransformIgnored",(function(){return invalidTransformIgnored})),n.d(y,"NO_FIELDS_NEEDS_AS",(function(){return RS})),n.d(y,"encodingOverridden",(function(){return encodingOverridden})),n.d(y,"projectionOverridden",(function(){return projectionOverridden})),n.d(y,"primitiveChannelDef",(function(){return primitiveChannelDef})),n.d(y,"invalidFieldType",(function(){return invalidFieldType})),n.d(y,"nonZeroScaleUsedWithLengthMark",(function(){return nonZeroScaleUsedWithLengthMark})),n.d(y,"invalidFieldTypeForCountAggregate",(function(){return invalidFieldTypeForCountAggregate})),n.d(y,"invalidAggregate",(function(){return invalidAggregate})),n.d(y,"missingFieldType",(function(){return missingFieldType})),n.d(y,"droppingColor",(function(){return droppingColor})),n.d(y,"emptyFieldDef",(function(){return emptyFieldDef})),n.d(y,"latLongDeprecated",(function(){return latLongDeprecated})),n.d(y,"LINE_WITH_VARYING_SIZE",(function(){return DS})),n.d(y,"incompatibleChannel",(function(){return incompatibleChannel})),n.d(y,"invalidEncodingChannel",(function(){return invalidEncodingChannel})),n.d(y,"facetChannelShouldBeDiscrete",(function(){return facetChannelShouldBeDiscrete})),n.d(y,"facetChannelDropped",(function(){return facetChannelDropped})),n.d(y,"discreteChannelCannotEncode",(function(){return discreteChannelCannotEncode})),n.d(y,"BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL",(function(){return PS})),n.d(y,"lineWithRange",(function(){return lineWithRange})),n.d(y,"orientOverridden",(function(){return orientOverridden})),n.d(y,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return MS})),n.d(y,"cannotUseScalePropertyWithNonColor",(function(){return cannotUseScalePropertyWithNonColor})),n.d(y,"unaggregateDomainHasNoEffectForRawField",(function(){return unaggregateDomainHasNoEffectForRawField})),n.d(y,"unaggregateDomainWithNonSharedDomainOp",(function(){return unaggregateDomainWithNonSharedDomainOp})),n.d(y,"unaggregatedDomainWithLogScale",(function(){return unaggregatedDomainWithLogScale})),n.d(y,"cannotApplySizeToNonOrientedMark",(function(){return cannotApplySizeToNonOrientedMark})),n.d(y,"rangeStepDropped",(function(){return rangeStepDropped})),n.d(y,"scaleTypeNotWorkWithChannel",(function(){return scaleTypeNotWorkWithChannel})),n.d(y,"scaleTypeNotWorkWithFieldDef",(function(){return scaleTypeNotWorkWithFieldDef})),n.d(y,"scalePropertyNotWorkWithScaleType",(function(){return scalePropertyNotWorkWithScaleType})),n.d(y,"scaleTypeNotWorkWithMark",(function(){return scaleTypeNotWorkWithMark})),n.d(y,"mergeConflictingProperty",(function(){return mergeConflictingProperty})),n.d(y,"mergeConflictingDomainProperty",(function(){return mergeConflictingDomainProperty})),n.d(y,"independentScaleMeansIndependentGuide",(function(){return independentScaleMeansIndependentGuide})),n.d(y,"domainSortDropped",(function(){return domainSortDropped})),n.d(y,"UNABLE_TO_MERGE_DOMAINS",(function(){return jS})),n.d(y,"MORE_THAN_ONE_SORT",(function(){return FS})),n.d(y,"INVALID_CHANNEL_FOR_AXIS",(function(){return IS})),n.d(y,"cannotStackRangedMark",(function(){return cannotStackRangedMark})),n.d(y,"cannotStackNonLinearScale",(function(){return cannotStackNonLinearScale})),n.d(y,"stackNonSummativeAggregate",(function(){return stackNonSummativeAggregate})),n.d(y,"invalidTimeUnit",(function(){return invalidTimeUnit})),n.d(y,"dayReplacedWithDate",(function(){return dayReplacedWithDate})),n.d(y,"droppedDay",(function(){return droppedDay})),n.d(y,"errorBarCenterAndExtentAreNotNeeded",(function(){return errorBarCenterAndExtentAreNotNeeded})),n.d(y,"errorBarCenterIsUsedWithWrongExtent",(function(){return errorBarCenterIsUsedWithWrongExtent})),n.d(y,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return errorBarContinuousAxisHasCustomizedAggregate})),n.d(y,"errorBarCenterIsNotNeeded",(function(){return errorBarCenterIsNotNeeded})),n.d(y,"errorBand1DNotSupport",(function(){return errorBand1DNotSupport})),n.d(y,"channelRequiredForBinned",(function(){return channelRequiredForBinned})),n.d(y,"domainRequiredForThresholdScale",(function(){return domainRequiredForThresholdScale}));var x={};n.r(x),n.d(x,"symbols",(function(){return encode_symbols})),n.d(x,"gradient",(function(){return legend_encode_gradient})),n.d(x,"labels",(function(){return encode_labels})),n.d(x,"getFirstConditionValue",(function(){return getFirstConditionValue}));var w={};n.r(w),n.d(w,"compile",(function(){return compile})),n.d(w,"extractTransforms",(function(){return extractTransforms})),n.d(w,"normalize",(function(){return normalize_normalize})),n.d(w,"version",(function(){return nO}));var k={};n.r(k),n.d(k,"dark",(function(){return oO})),n.d(k,"excel",(function(){return sO})),n.d(k,"fivethirtyeight",(function(){return uO})),n.d(k,"ggplot2",(function(){return lO})),n.d(k,"latimes",(function(){return dO})),n.d(k,"quartz",(function(){return hO})),n.d(k,"vox",(function(){return pO})),n.d(k,"version",(function(){return gO}));var S=n(15),E=n.n(S),T=n(1),C=n.n(T),O=n(9),A=n.n(O);function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var R="http://www.w3.org/1999/xhtml",D={svg:"http://www.w3.org/2000/svg",xhtml:R,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},P=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),D.hasOwnProperty(t)?{space:D[t],local:e}:e};function creatorInherit(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===R&&t.documentElement.namespaceURI===R?t.createElement(e):t.createElementNS(n,e)}}function creatorFixed(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var M=function(e){var t=P(e);return(t.local?creatorFixed:creatorInherit)(t)};function none(){}var j=function(e){return null==e?none:function(){return this.querySelector(e)}};function empty(){return[]}var F=function(e){return new Array(e.length)};function EnterNode(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}EnterNode.prototype={constructor:EnterNode,appendChild:function appendChild(e){return this._parent.insertBefore(e,this._next)},insertBefore:function insertBefore(e,t){return this._parent.insertBefore(e,t)},querySelector:function querySelector(e){return this._parent.querySelector(e)},querySelectorAll:function querySelectorAll(e){return this._parent.querySelectorAll(e)}};var I="$";function bindIndex(e,t,n,r,i,a){for(var o,s=0,u=t.length,l=a.length;s<l;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new EnterNode(e,a[s]);for(;s<u;++s)(o=t[s])&&(i[s]=o)}function bindKey(e,t,n,r,i,a,o){var s,u,l,c={},f=t.length,d=a.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=I+o.call(u,u.__data__,s,t),l in c?i[s]=u:c[l]=u);for(s=0;s<d;++s)(u=c[l=I+o.call(e,a[s],s,a)])?(r[s]=u,u.__data__=a[s],c[l]=null):n[s]=new EnterNode(e,a[s]);for(s=0;s<f;++s)(u=t[s])&&c[h[s]]===u&&(i[s]=u)}function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function attrRemove(e){return function(){this.removeAttribute(e)}}function attrRemoveNS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function attrConstant(e,t){return function(){this.setAttribute(e,t)}}function attrConstantNS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function attrFunction(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function attrFunctionNS(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var L=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function styleRemove(e){return function(){this.style.removeProperty(e)}}function styleConstant(e,t,n){return function(){this.style.setProperty(e,t,n)}}function styleFunction(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function styleValue(e,t){return e.style.getPropertyValue(t)||L(e).getComputedStyle(e,null).getPropertyValue(t)}function propertyRemove(e){return function(){delete this[e]}}function propertyConstant(e,t){return function(){this[e]=t}}function propertyFunction(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function classArray(e){return e.trim().split(/^|\s+/)}function classList(e){return e.classList||new ClassList(e)}function ClassList(e){this._node=e,this._names=classArray(e.getAttribute("class")||"")}function classedAdd(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function classedRemove(e,t){for(var n=classList(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function classedTrue(e){return function(){classedAdd(this,e)}}function classedFalse(e){return function(){classedRemove(this,e)}}function classedFunction(e,t){return function(){(t.apply(this,arguments)?classedAdd:classedRemove)(this,e)}}ClassList.prototype={add:function add(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function remove(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function contains(e){return this._names.indexOf(e)>=0}};function textRemove(){this.textContent=""}function textConstant(e){return function(){this.textContent=e}}function textFunction(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function htmlRemove(){this.innerHTML=""}function htmlConstant(e){return function(){this.innerHTML=e}}function htmlFunction(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function lower_lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function constantNull(){return null}function remove_remove(){var e=this.parentNode;e&&e.removeChild(this)}function selection_cloneShallow(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function selection_cloneDeep(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var N={},B=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(N={mouseenter:"mouseover",mouseleave:"mouseout"}));function filterContextListener(e,t,n){return e=contextListener(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function contextListener(e,t,n){return function(r){var i=B;B=r;try{e.call(this,this.__data__,t,n)}finally{B=i}}}function parseTypenames(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function onRemove(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function onAdd(e,t,n){var r=N.hasOwnProperty(e.type)?filterContextListener:contextListener;return function(i,a,o){var s,u=this.__on,l=r(t,a,o);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t);this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function dispatchEvent(e,t,n){var r=L(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dispatchConstant(e,t){return function(){return dispatchEvent(this,e,t)}}function dispatchFunction(e,t){return function(){return dispatchEvent(this,e,t.apply(this,arguments))}}var U=[null];function Selection(e,t){this._groups=e,this._parents=t}function selection_selection(){return new Selection([[document.documentElement]],U)}Selection.prototype=selection_selection.prototype={constructor:Selection,select:function(e){"function"!==typeof e&&(e=j(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new Selection(r,this._parents)},selectAll:function(e){var t;"function"!==typeof e&&(e=null==(t=e)?empty:function(){return this.querySelectorAll(t)});for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var s,u=n[o],l=u.length,c=0;c<l;++c)(s=u[c])&&(i.push(e.call(s,s.__data__,c,u)),a.push(s));return new Selection(i,a)},filter:function(e){var t;"function"!==typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a)for(var o,s=n[a],u=s.length,l=i[a]=[],c=0;c<u;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new Selection(i,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each((function(e){p[++c]=e})),p;var n,r=t?bindKey:bindIndex,i=this._parents,a=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var f=i[c],d=a[c],h=d.length,p=e.call(f,f&&f.__data__,c,i),g=p.length,m=u[c]=new Array(g),v=s[c]=new Array(g);r(f,d,m,v,l[c]=new Array(h),p,t);for(var y,_,b=0,x=0;b<g;++b)if(y=m[b]){for(b>=x&&(x=b+1);!(_=v[x])&&++x<g;);y._next=_||null}}return(s=new Selection(s,i))._enter=u,s._exit=l,s},enter:function(){return new Selection(this._enter||this._groups.map(F),this._parents)},exit:function(){return new Selection(this._exit||this._groups.map(F),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"===typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=t[s],c=n[s],f=l.length,d=o[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)o[s]=t[s];return new Selection(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function compareNode(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ascending);for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i){for(var a,o=t[i],s=o.length,u=r[i]=new Array(s),l=0;l<s;++l)(a=o[l])&&(u[l]=a);u.sort(compareNode)}return new Selection(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=P(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?attrRemoveNS:attrRemove:"function"===typeof t?n.local?attrFunctionNS:attrFunction:n.local?attrConstantNS:attrConstant)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?styleRemove:"function"===typeof t?styleFunction:styleConstant)(e,t,null==n?"":n)):styleValue(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?propertyRemove:"function"===typeof t?propertyFunction:propertyConstant)(e,t)):this.node()[e]},classed:function(e,t){var n=classArray(e+"");if(arguments.length<2){for(var r=classList(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?classedFunction:t?classedTrue:classedFalse)(n,t))},text:function(e){return arguments.length?this.each(null==e?textRemove:("function"===typeof e?textFunction:textConstant)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?htmlRemove:("function"===typeof e?htmlFunction:htmlConstant)(e)):this.node().innerHTML},raise:function(){return this.each(raise)},lower:function(){return this.each(lower_lower)},append:function(e){var t="function"===typeof e?e:M(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:M(e),r=null==t?constantNull:"function"===typeof t?t:j(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(remove_remove)},clone:function(e){return this.select(e?selection_cloneDeep:selection_cloneShallow)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=parseTypenames(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?onAdd:onRemove,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?dispatchFunction:dispatchConstant)(e,t))}};var z=function(e){return"string"===typeof e?new Selection([[document.querySelector(e)]],[document.documentElement]):new Selection([[e]],U)},q=0;function Local(){this._="@"+(++q).toString(36)}Local.prototype=function local_local(){return new Local}.prototype={constructor:Local,get:function get(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function set(e,t){return e[this._]=t},remove:function remove(e){return this._ in e&&delete e[this._]},toString:function toString(){return this._}};var W=n(86),G=n.n(W),H=n(130),V=n(0);function UniqueList(e){var t=e||V.x,n=[],r={};return n.add=function(e){var i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=function(e){var i,a=t(e);return r[a]&&(r[a]=0,(i=n.indexOf(e))>=0&&n.splice(i,1)),n},n}var Y=n(12),$=function(e,t){return asyncCallback_ref.apply(this,arguments)};function asyncCallback_ref(){return(asyncCallback_ref=Object(Y.a)(A.a.mark((function _callee(e,t){return A.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t(e);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.error(n.t0);case 8:case"end":return n.stop()}}),_callee,null,[[0,5]])})))).apply(this,arguments)}var X=Symbol("vega_id"),K=1;function isTuple(e){return!(!e||!tupleid(e))}function tupleid(e){return e[X]}function setid(e,t){return e[X]=t,e}function ingest(e){var t=e===Object(e)?e:{data:e};return tupleid(t)?t:setid(t,K++)}function Tuple_derive(e){return rederive(e,ingest({}))}function rederive(e,t){for(var n in e)t[n]=e[n];return t}function replace(e,t){return setid(t,tupleid(e))}function stableCompare(e,t){return e?t?function(n,r){return e(n,r)||tupleid(t(n))-tupleid(t(r))}:function(t,n){return e(t,n)||tupleid(t)-tupleid(n)}:null}function isChangeSet(e){return e&&e.constructor===ChangeSet_changeset}function ChangeSet_changeset(){var e=[],t=[],n=[],r=[],i=[],a=!1;return{constructor:ChangeSet_changeset,insert:function insert(t){for(var n=Object(V.i)(t),r=0,i=n.length;r<i;++r)e.push(n[r]);return this},remove:function remove(e){for(var n=Object(V.D)(e)?r:t,i=Object(V.i)(e),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function modify(e,t,r){var a={field:t,value:Object(V.l)(r)};return Object(V.D)(e)?(a.filter=e,i.push(a)):(a.tuple=e,n.push(a)),this},encode:function encode(e,t){return Object(V.D)(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},reflow:function reflow(){return a=!0,this},pulse:function pulse(o,s){var u,l,c,f,d,h,p={},g={};for(u=0,l=s.length;u<l;++u)p[tupleid(s[u])]=1;for(u=0,l=t.length;u<l;++u)p[tupleid(d=t[u])]=-1;for(u=0,l=r.length;u<l;++u)f=r[u],s.forEach((function(e){f(e)&&(p[tupleid(e)]=-1)}));for(u=0,l=e.length;u<l;++u)h=tupleid(d=e[u]),p[h]?p[h]=1:o.add.push(ingest(e[u]));for(u=0,l=s.length;u<l;++u)d=s[u],p[tupleid(d)]<0&&o.rem.push(d);function modify(e,t,n){n?e[t]=n(e):o.encode=t,a||(g[tupleid(e)]=e)}for(u=0,l=n.length;u<l;++u)d=(c=n[u]).tuple,f=c.field,(h=p[tupleid(d)])>0&&(modify(d,f,c.value),o.modifies(f));for(u=0,l=i.length;u<l;++u)c=i[u],f=c.filter,s.forEach((function(e){f(e)&&p[tupleid(e)]>0&&modify(e,c.field,c.value)})),o.modifies(c.field);if(a)o.mod=t.length||r.length?s.filter((function(e){return p[tupleid(e)]>0})):s.slice();else for(h in g)o.mod.push(g[h]);return o}}}var J="_:mod:_";function Parameters(){Object.defineProperty(this,J,{writable:!0,value:{}})}var Z=Parameters.prototype;Z.set=function(e,t,n,r){var i=this,a=i[e],o=i[J];return null!=t&&t>=0?(a[t]!==n||r)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||r)&&(i[e]=n,o[e]=Object(V.A)(n)?1+n.length:-1),i},Z.modified=function(e,t){var n,r=this[J];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(Object(V.A)(e)){for(n=0;n<e.length;++n)if(r[e[n]])return!0;return!1}return null!=t&&t>=0?t+1<r[e]||!!r[t+":"+e]:!!r[e]},Z.clear=function(){return this[J]={},this};var Q=0,ee=new Parameters;function Operator(e,t,n,r){this.id=++Q,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}var te=Operator.prototype;function Operator_flag(e){return function(t){var n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}te.targets=function(){return this._targets||(this._targets=UniqueList(V.w))},te.set=function(e){return this.value!==e?(this.value=e,1):0},te.skip=Operator_flag(1),te.modified=Operator_flag(2),te.parameters=function(e,t,n){t=!1!==t;var r,i,a,o,s=this,u=s._argval=s._argval||new Parameters,l=s._argops=s._argops||[],c=[];function add(e,n,r){r instanceof Operator?(r!==s&&(t&&r.targets().add(s),c.push(r)),l.push({op:r,name:e,index:n})):u.set(e,n,r)}for(r in e)if(i=e[r],"pulse"===r)Object(V.i)(i).forEach((function(e){e instanceof Operator?e!==s&&(e.targets().add(s),c.push(e)):Object(V.n)("Pulse parameters must be operator instances.")})),s.source=i;else if(Object(V.A)(i))for(u.set(r,-1,Array(a=i.length)),o=0;o<a;++o)add(r,o,i[o]);else add(r,-1,i);return this.marshall().clear(),n&&(l.initonly=!0),c},te.marshall=function(e){var t,n,r,i,a,o=this._argval||ee,s=this._argops;if(s){for(n=0,r=s.length;n<r;++n)a=(i=(t=s[n]).op).modified()&&i.stamp===e,o.set(t.name,t.index,i.value,a);if(s.initonly){for(n=0;n<r;++n)(t=s[n]).op.targets().remove(this);this._argops=null,this._update=null}}return o},te.evaluate=function(e){var t=this._update;if(t){var n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},te.run=function(e){return e.stamp<this.stamp?e.StopPropagation:(this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e);var t};var ne=0;function EventStream(e,t,n){this.id=++ne,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function EventStream_stream(e,t,n){return new EventStream(e,t,n)}var re=EventStream.prototype;re._filter=V.eb,re._apply=V.x,re.targets=function(){return this._targets||(this._targets=UniqueList(V.w))},re.consume=function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},re.receive=function(e){if(this._filter(e)){for(var t=this.value=this._apply(e),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},re.filter=function(e){var t=EventStream_stream(e);return this.targets().add(t),t},re.apply=function(e){var t=EventStream_stream(null,e);return this.targets().add(t),t},re.merge=function(){var e=EventStream_stream();this.targets().add(e);for(var t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},re.throttle=function(e){var t=-1;return this.filter((function(){var n=Date.now();return n-t>e?(t=n,1):0}))},re.debounce=function(e){var t=EventStream_stream();return this.targets().add(EventStream_stream(null,null,Object(V.m)(e,(function(e){var n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},re.between=function(e,t){var n=!1;return e.targets().add(EventStream_stream(null,null,(function(){n=!0}))),t.targets().add(EventStream_stream(null,null,(function(){n=!1}))),this.filter((function(){return n}))};var ie=/^([A-Za-z]+:)?\/\//,ae=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,oe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,se="file://";function load(e,t){return _load.apply(this,arguments)}function _load(){return(_load=Object(Y.a)(A.a.mark((function _callee2(e,t){var n,r;return A.a.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sanitize(e,t);case 2:return n=i.sent,r=n.href,i.abrupt("return",n.localFile?this.file(r):this.http(r,t));case 5:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}function sanitize(e,t){return _sanitize.apply(this,arguments)}function _sanitize(){return(_sanitize=Object(Y.a)(A.a.mark((function _callee3(e,t){var n,r,i,a,o,s,u;return A.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(V.o)({},this.options,t),n=this.fileAccess,r={href:null},s=ae.test(e.replace(oe,"")),null!=e&&"string"===typeof e&&s||Object(V.n)("Sanitize failure, invalid URI: "+Object(V.X)(e)),u=ie.test(e),(o=t.baseURL)&&!u&&(e.startsWith("/")||"/"===o[o.length-1]||(e="/"+e),e=o+e),a=(i=e.startsWith(se))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(se.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee3,this)})))).apply(this,arguments)}function fileLoader(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:fileReject}function fileReject(){return _fileReject.apply(this,arguments)}function _fileReject(){return(_fileReject=Object(Y.a)(A.a.mark((function _callee4(){return A.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No file system access.");case 1:case"end":return e.stop()}}),_callee4)})))).apply(this,arguments)}function httpLoader(e){return e?function(){var t=Object(Y.a)(A.a.mark((function _callee(t,n){var r,i,a;return A.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(V.o)({},this.options.http,n),i=n&&n.response,o.next=4,e(t,r);case 4:return a=o.sent,o.abrupt("return",a.ok?Object(V.D)(a[i])?a[i]():a.text():Object(V.n)(a.status+""+a.statusText));case 6:case"end":return o.stop()}}),_callee,this)})));return function(e,n){return t.apply(this,arguments)}}():httpReject}function httpReject(){return _httpReject.apply(this,arguments)}function _httpReject(){return(_httpReject=Object(Y.a)(A.a.mark((function _callee5(){return A.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),_callee5)})))).apply(this,arguments)}var ue={boolean:V.Y,integer:V.ab,number:V.ab,date:V.Z,string:V.cb,unknown:V.x},le=[function isBoolean(e){return"true"===e||"false"===e||!0===e||!1===e},function isInteger(e){return isNumber(e)&&(e=+e)===~~e},isNumber,function isDate(e){return!isNaN(Date.parse(e))}],ce=["boolean","integer","number","date"];function inferTypes(e,t){return t.reduce((function(t,n){return t[n]=function inferType(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=0,s=e.length,u=le.length,l=le.map((function(e,t){return t+1}));for(r=0,s=e.length;r<s;++r)for(n=t?e[r][t]:e[r],i=0;i<u;++i)if(l[i]&&(null!=(a=n)&&a===a)&&!le[i](n)&&(l[i]=0,++o===le.length))return"string";return o=l.reduce((function(e,t){return 0===e?t:e}),0)-1,ce[o]}(e,n),t}),{})}function isNumber(e){return!isNaN(+e)&&!(e instanceof Date)}var fe={},de={},he=34,pe=10,ge=13;function objectConverter(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}")}function inferColumns(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function dsv_pad(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function formatDate(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":function dsv_formatYear(e){return e<0?"-"+dsv_pad(-e,6):e>9999?"+"+dsv_pad(e,6):dsv_pad(e,4)}(e.getUTCFullYear())+"-"+dsv_pad(e.getUTCMonth()+1,2)+"-"+dsv_pad(e.getUTCDate(),2)+(i?"T"+dsv_pad(t,2)+":"+dsv_pad(n,2)+":"+dsv_pad(r,2)+"."+dsv_pad(i,3)+"Z":r?"T"+dsv_pad(t,2)+":"+dsv_pad(n,2)+":"+dsv_pad(r,2)+"Z":n||t?"T"+dsv_pad(t,2)+":"+dsv_pad(n,2)+"Z":"")}var me=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function parseRows(e,t){var r,i=[],a=e.length,o=0,s=0,u=a<=0,l=!1;function token(){if(u)return de;if(l)return l=!1,fe;var t,r,i=o;if(e.charCodeAt(i)===he){for(;o++<a&&e.charCodeAt(o)!==he||e.charCodeAt(++o)===he;);return(t=o)>=a?u=!0:(r=e.charCodeAt(o++))===pe?l=!0:r===ge&&(l=!0,e.charCodeAt(o)===pe&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if((r=e.charCodeAt(t=o++))===pe)l=!0;else if(r===ge)l=!0,e.charCodeAt(o)===pe&&++o;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,a)}for(e.charCodeAt(a-1)===pe&&--a,e.charCodeAt(a-1)===ge&&--a;(r=token())!==de;){for(var c=[];r!==fe&&r!==de;)c.push(r),r=token();t&&null==(c=t(c,s++))||i.push(c)}return i}function preformatBody(t,n){return t.map((function(t){return n.map((function(e){return formatValue(t[e])})).join(e)}))}function formatRow(t){return t.map(formatValue).join(e)}function formatValue(e){return null==e?"":e instanceof Date?formatDate(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function parse(e,t){var n,r,i=parseRows(e,(function(e,i){if(n)return n(e,i-1);r=e,n=t?function customConverter(e,t){var n=objectConverter(e);return function(r,i){return t(n(r),i,e)}}(e,t):objectConverter(e)}));return i.columns=r||[],i},parseRows:parseRows,format:function format(t,n){return null==n&&(n=inferColumns(t)),[n.map(formatValue).join(e)].concat(preformatBody(t,n)).join("\n")},formatBody:function formatBody(e,t){return null==t&&(t=inferColumns(e)),preformatBody(e,t).join("\n")},formatRows:function formatRows(e){return e.map(formatRow).join("\n")}}},ve=me(","),ye=(ve.parse,ve.parseRows,ve.format,ve.formatBody,ve.formatRows,me("\t"));ye.parse,ye.parseRows,ye.format,ye.formatBody,ye.formatRows;function delimitedFormat(e){var t=function parse(t,n){var r={delimiter:e};return dsv_dsv(t,n?Object(V.o)(n,r):r)};return t.responseType="text",t}function dsv_dsv(e,t){return t.header&&(e=t.header.map(V.X).join(t.delimiter)+"\n"+e),me(t.delimiter).parse(e+"")}dsv_dsv.responseType="text";var _e=n(79),be=function(e){return e},xe=function(e){if(null==e)return be;var t,n,r=e.scale[0],i=e.scale[1],a=e.translate[0],o=e.translate[1];return function(e,s){s||(t=n=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*r+a,c[1]=(n+=e[1])*i+o;u<l;)c[u]=e[u],++u;return c}},we=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n},ke=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return feature_feature(e,t)}))}:feature_feature(e,t)};function feature_feature(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=feature_object(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function feature_object(e,t){var n=xe(e.transform),r=e.arcs;function arc(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],a=0,o=i.length;a<o;++a)t.push(n(i[a],a));e<0&&we(t,o)}function point(e){return n(e)}function line(e){for(var t=[],n=0,r=e.length;n<r;++n)arc(e[n],t);return t.length<2&&t.push(t[0]),t}function ring(e){for(var t=line(e);t.length<4;)t.push(t[0]);return t}function polygon(e){return e.map(ring)}return function geometry(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(geometry)};case"Point":t=point(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(point);break;case"LineString":t=line(e.arcs);break;case"MultiLineString":t=e.arcs.map(line);break;case"Polygon":t=polygon(e.arcs);break;case"MultiPolygon":t=e.arcs.map(polygon);break;default:return null}return{type:n,coordinates:t}}(t)}var Se=function(e,t){var n={},r={},i={},a=[],o=-1;function flush(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),a.push(i)}}return t.forEach((function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++o],t[o]=n,t[r]=i)})),t.forEach((function(t){var n,a,o=function ends(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=o[0],u=o[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,a=r[u]){delete r[a.start];var l=a===n?n:n.concat(a);r[l.start=n.start]=i[l.end=a.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,a=i[s]){delete i[a.end];var c=a===n?n:a.concat(n);r[c.start=a.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),flush(i,r),flush(r,i),t.forEach((function(e){n[e<0?~e:e]||a.push([e])})),a},Ee=function(e){return feature_object(e,meshArcs.apply(this,arguments))};function meshArcs(e,t,n){var r,i,a;if(arguments.length>1)r=function extractArcs(e,t,n){var r,i=[],a=[];function extract0(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:r})}function extract1(e){e.forEach(extract0)}function extract2(e){e.forEach(extract1)}return function geometry(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(geometry);break;case"LineString":extract1(e.arcs);break;case"MultiLineString":case"Polygon":extract2(e.arcs);break;case"MultiPolygon":!function extract3(e){e.forEach(extract2)}(e.arcs)}}(t),a.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Se(e,r)}}var Te={interior:function interior(e,t){return e!==t},exterior:function exterior(e,t){return e===t}};function topojson(e,t){var n,r,i,a;return e=Object(_e.a)(e,t),t&&t.feature?(n=ke,i=t.feature):t&&t.mesh?(n=Ee,i=t.mesh,a=Te[t.filter]):Object(V.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,a):Object(V.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}topojson.responseType="json";var Ce={dsv:dsv_dsv,csv:delimitedFormat(","),tsv:delimitedFormat("\t"),json:_e.a,topojson:topojson};function formats_formats(e,t){return arguments.length>1?(Ce[e]=t,this):Object(V.v)(Ce,e)?Ce[e]:null}function responseType(e){var t=formats_formats(e);return t&&t.responseType||"text"}var Oe=new Date,Ae=new Date;function newInterval(e,t,n,r){function interval(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return interval.floor=function(t){return e(t=new Date(+t)),t},interval.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},interval.round=function(e){var t=interval(e),n=interval.ceil(e);return e-t<n-e?t:n},interval.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},interval.range=function(n,r,i){var a,o=[];if(n=interval.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return o;do{o.push(a=new Date(+n)),t(n,i),e(n)}while(a<n&&n<r);return o},interval.filter=function(n){return newInterval((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(interval.count=function(t,r){return Oe.setTime(+t),Ae.setTime(+r),e(Oe),e(Ae),Math.floor(n(Oe,Ae))},interval.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?interval.filter(r?function(t){return r(t)%e===0}:function(t){return interval.count(0,t)%e===0}):interval:null}),interval}var Re=6e4,De=6048e5;function utcWeekday(e){return newInterval((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/De}))}var Pe=utcWeekday(0),Me=utcWeekday(1),je=utcWeekday(2),Fe=utcWeekday(3),Ie=utcWeekday(4),Le=utcWeekday(5),Ne=utcWeekday(6),Be=(Pe.range,Me.range,je.range,Fe.range,Ie.range,Le.range,Ne.range,newInterval((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),Ue=Be;Be.range;function weekday(e){return newInterval((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Re)/De}))}var ze=weekday(0),qe=weekday(1),We=weekday(2),Ge=weekday(3),He=weekday(4),Ve=weekday(5),Ye=weekday(6),$e=(ze.range,qe.range,We.range,Ge.range,He.range,Ve.range,Ye.range,newInterval((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Re)/864e5}),(function(e){return e.getDate()-1}))),Xe=$e,Ke=($e.range,newInterval((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Ke.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Je=Ke,Ze=(Ke.range,newInterval((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Ze.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var Qe=Ze;Ze.range;function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newYear(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}var et,tt,nt,rt,it,at={"-":"",_:" ",0:"0"},ot=/^\s*\d+/,st=/^%/,ut=/[\\^$*+?|[\]().{}]/g;function locale_pad(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function requote(e){return e.replace(ut,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function parseWeekdayNumberSunday(e,t,n){var r=ot.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var r=ot.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function parseWeekNumberSunday(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function parseWeekNumberISO(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function parseWeekNumberMonday(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function parseFullYear(e,t,n){var r=ot.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function parseYear(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function parseZone(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function parseMonthNumber(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function parseDayOfMonth(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function parseDayOfYear(e,t,n){var r=ot.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function parseHour24(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function parseMinutes(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function parseSeconds(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function parseMilliseconds(e,t,n){var r=ot.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function parseMicroseconds(e,t,n){var r=ot.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function parseLiteralPercent(e,t,n){var r=st.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function parseUnixTimestamp(e,t,n){var r=ot.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var r=ot.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function formatDayOfMonth(e,t){return locale_pad(e.getDate(),t,2)}function formatHour24(e,t){return locale_pad(e.getHours(),t,2)}function formatHour12(e,t){return locale_pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return locale_pad(1+Xe.count(Je(e),e),t,3)}function formatMilliseconds(e,t){return locale_pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return locale_pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return locale_pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return locale_pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return locale_pad(ze.count(Je(e),e),t,2)}function formatWeekNumberISO(e,t){var n=e.getDay();return e=n>=4||0===n?He(e):He.ceil(e),locale_pad(He.count(Je(e),e)+(4===Je(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return locale_pad(qe.count(Je(e),e),t,2)}function locale_formatYear(e,t){return locale_pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return locale_pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+locale_pad(t/60|0,"0",2)+locale_pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return locale_pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return locale_pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return locale_pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return locale_pad(1+Ue.count(Qe(e),e),t,3)}function formatUTCMilliseconds(e,t){return locale_pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return locale_pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return locale_pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return locale_pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return locale_pad(Pe.count(Qe(e),e),t,2)}function formatUTCWeekNumberISO(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Ie(e):Ie.ceil(e),locale_pad(Ie.count(Qe(e),e)+(4===Qe(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return locale_pad(Me.count(Qe(e),e),t,2)}function formatUTCYear(e,t){return locale_pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return locale_pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function defaultLocale(e){return et=function formatLocale(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,l=formatRe(i),c=formatLookup(i),f=formatRe(a),d=formatLookup(a),h=formatRe(o),p=formatLookup(o),g=formatRe(s),m=formatLookup(s),v=formatRe(u),y=formatLookup(u),_={a:function formatShortWeekday(e){return o[e.getDay()]},A:function formatWeekday(e){return a[e.getDay()]},b:function formatShortMonth(e){return u[e.getMonth()]},B:function formatMonth(e){return s[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function formatPeriod(e){return i[+(e.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:locale_formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},b={a:function formatUTCShortWeekday(e){return o[e.getUTCDay()]},A:function formatUTCWeekday(e){return a[e.getUTCDay()]},b:function formatUTCShortMonth(e){return u[e.getUTCMonth()]},B:function formatUTCMonth(e){return s[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function formatUTCPeriod(e){return i[+(e.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},x={a:function parseShortWeekday(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function parseWeekday(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function parseShortMonth(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function parseMonth(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function parseLocaleDateTime(e,n,r){return parseSpecifier(e,t,n,r)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function parsePeriod(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function parseLocaleDate(e,t,r){return parseSpecifier(e,n,t,r)},X:function parseLocaleTime(e,t,n){return parseSpecifier(e,r,t,n)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(e,t){return function(n){var r,i,a,o=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=at[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function newParse(e,t){return function(n){var r,i,a=newYear(1900);if(parseSpecifier(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=utcDate(newYear(a.y))).getUTCDay(),r=i>4||0===i?Me.ceil(r):Me(r),r=Ue.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=t(newYear(a.y))).getDay(),r=i>4||0===i?qe.ceil(r):qe(r),r=Xe.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?utcDate(newYear(a.y)).getUTCDay():t(newYear(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,utcDate(a)):t(a)}}function parseSpecifier(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;o<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in at?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=newFormat(n,_),_.X=newFormat(r,_),_.c=newFormat(t,_),b.x=newFormat(n,b),b.X=newFormat(r,b),b.c=newFormat(t,b),{format:function format(e){var t=newFormat(e+="",_);return t.toString=function(){return e},t},parse:function parse(e){var t=newParse(e+="",localDate);return t.toString=function(){return e},t},utcFormat:function utcFormat(e){var t=newFormat(e+="",b);return t.toString=function(){return e},t},utcParse:function utcParse(e){var t=newParse(e,utcDate);return t.toString=function(){return e},t}}}(e),tt=et.format,nt=et.parse,rt=et.utcFormat,it=et.utcParse,et}defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||rt("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||it("%Y-%m-%dT%H:%M:%S.%LZ");var lt=function(e,t){return function(n){return{options:n||{},sanitize:sanitize,load:load,fileAccess:!!t,file:fileLoader(t),http:httpLoader(e)}}}("undefined"!==typeof fetch&&fetch,null),ct=function(e,t,n){var r=formats_formats((t=t||{}).type||"json");return r||Object(V.n)("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function read_parse(e,t,n){if(!e.length)return;n=n||nt;var r,i,a,o,s,u,l,c=e.columns||Object.keys(e[0]);"auto"===t&&(t=inferTypes(e,c));for(c=Object.keys(t),r=c.map((function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?it(i):n(i);if(!ue[a])throw Error("Illegal format pattern: "+e+":"+a);return ue[a]})),o=0,u=e.length,l=c.length;o<u;++o)for(i=e[o],s=0;s<l;++s)a=c[s],i[a]=r[s](i[a])}(e,t.parse,n),Object(V.v)(e,"columns")&&delete e.columns,e};function _request(){return(_request=Object(Y.a)(A.a.mark((function _callee(e,t){var n,r,i;return A.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return n=this,r=0,a.prev=2,a.next=5,n.loader().load(e,{context:"dataflow",response:responseType(t&&t.type)});case 5:i=a.sent;try{i=ct(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}a.next=13;break;case 9:a.prev=9,a.t0=a.catch(2),r=-1,n.warn("Loading failed",e,a.t0);case 13:return a.abrupt("return",{data:i,status:r});case 14:case"end":return a.stop()}}),_callee,this,[[2,9]])})))).apply(this,arguments)}function _preload(){return(_preload=Object(Y.a)(A.a.mark((function _callee2(e,t,n){var r,i,a;return A.a.wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:return(i=(r=this)._pending||loadPending(r)).requests+=1,o.next=4,r.request(t,n);case 4:return a=o.sent,r.pulse(e,r.changeset().remove(V.eb).insert(a.data||[])),i.done(),o.abrupt("return",a);case 8:case"end":return o.stop()}}),_callee2,this)})))).apply(this,arguments)}function loadPending(e){var t,n=new Promise((function(e){t=e}));return n.requests=0,n.done=function(){0===--n.requests&&(e._pending=null,t(e))},e._pending=n}var ft={skip:!0};function onStream(e,t,n,r,i,a){var o,s,u=Object(V.o)({},a,ft);Object(V.D)(n)||(n=Object(V.l)(n)),void 0===r?o=function func(t){return e.touch(n(t))}:Object(V.D)(r)?(s=new Operator(null,r,i,!1),o=function func(t){s.evaluate(t);var r=n(t),i=s.value;isChangeSet(i)?e.pulse(r,i,a):e.update(r,i,u)}):o=function func(t){return e.update(n(t),r,u)},t.apply(o)}function onOperator(e,t,n,r,i,a){if(void 0===r)t.targets().add(n);else{var o=a||{},s=new Operator(null,function updater(e,t){return t=Object(V.D)(t)?t:Object(V.l)(t),e?function(n,r){var i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(o.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}var dt={};function Pulse(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}var ht=Pulse.prototype;function addFilter(e,t){return e?function(n,r){return e(n,r)&&t(n,r)}:t}function materialize(e,t){var n=[];return Object(V.gb)(e,t,(function(e){n.push(e)})),n}function Pulse_filter(e,t){var n={};return e.visit(t,(function(e){n[tupleid(e)]=1})),function(e){return n[tupleid(e)]?null:e}}function MultiPulse(e,t,n,r){var i,a,o,s,u,l=this,c=0;for(this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n,o=0,s=n.length;o<s;++o)if((i=n[o]).stamp===t){if(i.fields)for(u in a=l.fields||(l.fields={}),i.fields)a[u]=1;i.changed(l.ADD)&&(c|=l.ADD),i.changed(l.REM)&&(c|=l.REM),i.changed(l.MOD)&&(c|=l.MOD)}this.changes=c}ht.StopPropagation=dt,ht.ADD=1,ht.REM=2,ht.MOD=4,ht.ADD_REM=3,ht.ADD_MOD=5,ht.ALL=7,ht.REFLOW=8,ht.SOURCE=16,ht.NO_SOURCE=32,ht.NO_FIELDS=64,ht.fork=function(e){return new Pulse(this.dataflow).init(this,e)},ht.clone=function(){var e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},ht.addAll=function(){var e=this;return this.source&&this.source.length!==this.add.length?((e=new Pulse(this.dataflow).init(this)).add=e.source,e):e},ht.init=function(e,t){var n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source),n},ht.runAfter=function(e){this.dataflow.runAfter(e)},ht.changed=function(e){var t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},ht.reflow=function(e){if(e)return this.fork(7).reflow();var t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Pulse_filter(this,1))),this},ht.modifies=function(e){var t=Object(V.i)(e),n=this.fields||(this.fields={});return t.forEach((function(e){n[e]=!0})),this},ht.modified=function(e,t){var n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?Object(V.A)(e)?e.some((function(e){return n[e]})):n[e]:!!n)},ht.filter=function(e,t){var n=this;return 1&e&&(n.addF=addFilter(n.addF,t)),2&e&&(n.remF=addFilter(n.remF,t)),4&e&&(n.modF=addFilter(n.modF,t)),16&e&&(n.srcF=addFilter(n.srcF,t)),n},ht.materialize=function(e){var t=this;return 1&(e=e||7)&&t.addF&&(t.add=materialize(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=materialize(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=materialize(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},ht.visit=function(e,t){var n,r,i=this,a=t;return 16&e?(Object(V.gb)(i.source,i.srcF,a),i):(1&e&&Object(V.gb)(i.add,i.addF,a),2&e&&Object(V.gb)(i.rem,i.remF,a),4&e&&Object(V.gb)(i.mod,i.modF,a),8&e&&(n=i.source)&&((r=i.add.length+i.mod.length)===n.length||(r?Object(V.gb)(n,Pulse_filter(i,5),a):Object(V.gb)(n,i.srcF,a))),i)};var pt=Object(V.y)(MultiPulse,Pulse);function _evaluate(){return(_evaluate=Object(Y.a)(A.a.mark((function _callee(e,t,n){var r,i,a,o,s,u,l,c,f,d;return A.a.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:if(i=(r=this).logLevel(),!r._pulse){h.next=3;break}return h.abrupt("return",reentrant(r));case 3:if(!r._pending){h.next=6;break}return h.next=6,r._pending;case 6:if(!t){h.next=9;break}return h.next=9,$(r,t);case 9:if(r._touched.length){h.next=12;break}return r.info("Dataflow invoked, but nothing to do."),h.abrupt("return",r);case 12:a=++r._clock,o=0,r._pulse=new Pulse(r,a,e),i>=V.c&&(l=Date.now(),r.debug("-- START PROPAGATION ("+a+") -----")),r._touched.forEach((function(e){return r._enqueue(e,!0)})),r._touched=UniqueList(V.w),h.prev=17;case 18:if(!(r._heap.size()>0)){h.next=33;break}if((s=r._heap.pop()).rank===s.qrank){h.next=23;break}return r._enqueue(s,!0),h.abrupt("continue",18);case 23:if(!(u=s.run(r._getPulse(s,e))).then){h.next=28;break}return h.next=27,u;case 27:u=h.sent;case 28:i>=V.a&&r.debug(s.id,u===dt?"STOP":u,s),u!==dt&&s._targets&&s._targets.forEach((function(e){return r._enqueue(e)})),++o,h.next=18;break;case 33:h.next=39;break;case 35:h.prev=35,h.t0=h.catch(17),r._heap.clear(),c=h.t0;case 39:if(r._input={},r._pulse=null,i>=V.c&&(l=Date.now()-l,r.info("> Pulse "+a+": "+o+" operators; "+l+"ms")),c&&(r._postrun=[],r.error(c)),!r._postrun.length){h.next=53;break}f=r._postrun.sort((function(e,t){return t.priority-e.priority})),r._postrun=[],d=0;case 47:if(!(d<f.length)){h.next=53;break}return h.next=50,$(r,f[d].callback);case 50:++d,h.next=47;break;case 53:if(!n){h.next=56;break}return h.next=56,$(r,n);case 56:return h.abrupt("return",r);case 57:case"end":return h.stop()}}),_callee,this,[[17,35]])})))).apply(this,arguments)}function _runAsync(){return(_runAsync=Object(Y.a)(A.a.mark((function _callee2(e,t,n){var r,i=this;return A.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:if(!this._running){a.next=5;break}return a.next=3,this._running;case 3:a.next=0;break;case 5:return r=function clear(){return i._running=null},(this._running=this.evaluate(e,t,n)).then(r,r),a.abrupt("return",this._running);case 8:case"end":return a.stop()}}),_callee2,this)})))).apply(this,arguments)}function reentrant(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}pt.fork=function(e){var t=new Pulse(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(function(e){return t.add.push(e)})),e&t.REM&&this.visit(t.REM,(function(e){return t.rem.push(e)})),e&t.MOD&&this.visit(t.MOD,(function(e){return t.mod.push(e)}))),t},pt.changed=function(e){return this.changes&e},pt.modified=function(e){var t=this,n=t.fields;return n&&t.changes&t.MOD?Object(V.A)(e)?e.some((function(e){return n[e]})):n[e]:0},pt.filter=function(){Object(V.n)("MultiPulse does not support filtering.")},pt.materialize=function(){Object(V.n)("MultiPulse does not support materialization.")},pt.visit=function(e,t){var n=this,r=n.pulses,i=r.length,a=0;if(e&n.SOURCE)for(;a<i;++a)r[a].visit(e,t);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(e,t);return n};var gt={skip:!1,force:!1};function Heap(e){var t=[];return{clear:function clear(){return t=[]},size:function size(){return t.length},peek:function peek(){return t[0]},push:function push(n){return t.push(n),siftdown(t,0,t.length-1,e)},pop:function pop(){var n,r=t.pop();return t.length?(n=t[0],t[0]=r,function siftup(e,t,n){var r,i=t,a=e.length,o=e[t],s=1+(t<<1);for(;s<a;)(r=s+1)<a&&n(e[s],e[r])>=0&&(s=r),e[t]=e[s],s=1+((t=s)<<1);return e[t]=o,siftdown(e,i,t,n)}(t,0,e)):n=r,n}}}function siftdown(e,t,n,r){var i,a,o;for(i=e[n];n>t&&r(i,a=e[o=n-1>>1])<0;)e[n]=a,n=o;return e[n]=i}function Dataflow(){this.logger(Object(V.K)()),this.logLevel(V.b),this._clock=0,this._rank=0;try{this._loader=lt()}catch(e){}this._touched=UniqueList(V.w),this._input={},this._pulse=null,this._heap=Heap((function(e,t){return e.qrank-t.qrank})),this._postrun=[]}var mt=Dataflow.prototype;function logMethod(e){return function(){return this._log[e].apply(this,arguments)}}function Transform(e,t){Operator.call(this,e,null,t)}mt.stamp=function(){return this._clock},mt.loader=function(e){return arguments.length?(this._loader=e,this):this._loader},mt.cleanThreshold=1e4,mt.add=function(e,t,n,r){var i,a=1;return e instanceof Operator?i=e:e&&e.prototype instanceof Operator?i=new e:Object(V.D)(e)?i=new Operator(null,e):(a=0,i=new Operator(e,t)),this.rank(i),a&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},mt.connect=function(e,t){var n,r,i=e.rank;for(n=0,r=t.length;n<r;++n)if(i<t[n].rank)return void this.rerank(e)},mt.rank=function rank(e){e.rank=++this._rank},mt.rerank=function rerank(e){for(var t,n,r,i=[e];i.length;)if(this.rank(t=i.pop()),n=t._targets)for(r=n.length;--r>=0;)i.push(t=n[r]),t===e&&Object(V.n)("Cycle detected in dataflow graph.")},mt.pulse=function update_pulse(e,t,n){this.touch(e,n||gt);var r=new Pulse(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},mt.touch=function update_touch(e,t){var n=t||gt;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},mt.update=function update_update(e,t,n){var r=n||gt;return(e.set(t)||r.force)&&this.touch(e,r),this},mt.changeset=ChangeSet_changeset,mt.ingest=function load_ingest(e,t,n){return this.pulse(e,this.changeset().insert(ct(t,n)))},mt.parse=ct,mt.preload=function preload(e,t,n){return _preload.apply(this,arguments)},mt.request=function request(e,t){return _request.apply(this,arguments)},mt.events=function(e,t,n,r){for(var i,a=this,o=EventStream_stream(n,r),s=function send(e){e.dataflow=a;try{o.receive(e)}catch(t){a.error(t)}finally{a.run()}},u=0,l=(i="string"===typeof e&&"undefined"!==typeof document?document.querySelectorAll(e):Object(V.i)(e)).length;u<l;++u)i[u].addEventListener(t,s);return o},mt.on=function(e,t,n,r,i){return(e instanceof Operator?onOperator:onStream)(this,e,t,n,r,i),this},mt.evaluate=function evaluate(e,t,n){return _evaluate.apply(this,arguments)},mt.run=function run_run(e,t,n){return this._pulse?reentrant(this):(this.evaluate(e,t,n),this)},mt.runAsync=function runAsync(e,t,n){return _runAsync.apply(this,arguments)},mt.runAfter=function runAfter(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}},mt._enqueue=function enqueue(e,t){var n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},mt._getPulse=function getPulse(e,t){var n=e.source,r=this._clock;return n&&Object(V.A)(n)?new MultiPulse(this,r,n.map((function(e){return e.pulse})),t):this._input[e.id]||function singlePulse(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==dt&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)},mt.logger=function(e){return arguments.length?(this._log=e,this):this._log},mt.error=logMethod("error"),mt.warn=logMethod("warn"),mt.info=logMethod("info"),mt.debug=logMethod("debug"),mt.logLevel=logMethod("level");var vt=Object(V.y)(Transform,Operator);vt.run=function(e){var t,n=this;return e.stamp<this.stamp?e.StopPropagation:(this.skip()?this.skip(!1):t=this.evaluate(e),(t=t||e).then?t=t.then((function(e){return n.pulse=e})):t!==e.StopPropagation&&(this.pulse=t),t)},vt.evaluate=function(e){var t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},vt.transform=function(){};var yt={};function register_definition(e){var t=register_transform(e);return t&&t.Definition||null}function register_transform(e){return e=e&&e.toLowerCase(),Object(V.v)(yt,e)?yt[e]:null}function groupkey(e){return e&&e.length?1===e.length?e[0]:function multikey(e){return function(t){for(var n=e.length,r=1,i=String(e[0](t));r<n;++r)i+="|"+e[r](t);return i}}(e):function(){return""}}function measureName(e,t,n){return n||e+(t?"_"+t:"")}var _t={values:measure({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:measure({name:"count",set:"cell.num"}),__count__:measure({name:"count",set:"this.missing + this.valid"}),missing:measure({name:"missing",set:"this.missing"}),valid:measure({name:"valid",set:"this.valid"}),sum:measure({name:"sum",init:"this.sum = 0;",add:"this.sum += +v;",rem:"this.sum -= v;",set:"this.sum"}),mean:measure({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.valid ? this.mean : undefined"}),average:measure({name:"average",set:"this.valid ? this.mean : undefined",req:["mean"],idx:1}),variance:measure({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : undefined",req:["mean"],idx:1}),variancep:measure({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : undefined",req:["variance"],idx:2}),stdev:measure({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : undefined",req:["variance"],idx:2}),stdevp:measure({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : undefined",req:["variance"],idx:2}),stderr:measure({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : undefined",req:["variance"],idx:2}),distinct:measure({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:measure({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:measure({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:measure({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:measure({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:measure({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:measure({name:"argmin",init:"this.argmin = undefined;",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = undefined;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:measure({name:"argmax",init:"this.argmax = undefined;",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = undefined;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:measure({name:"min",init:"this.min = undefined;",add:"if (v < this.min || this.min === undefined) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:measure({name:"max",init:"this.max = undefined;",add:"if (v > this.max || this.max === undefined) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},bt=Object.keys(_t);function createMeasure(e,t){return _t[e](t)}function measure(e){return function(t){var n=Object(V.o)({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function compareIndex(e,t){return e.idx-t.idx}function compileMeasures(e,t){var n=t||V.x,r=function AggregateOps_resolve(e,t){var n,r=e.reduce((function collect(e,n){function helper(t){e[t]||collect(e,e[t]=_t[t]())}return n.req&&n.req.forEach(helper),t&&n.str&&n.str.forEach(helper),e}),e.reduce((function(e,t){return e[t.name]=t,e}),{})),i=[];for(n in r)i.push(r[n]);return i.sort(compareIndex)}(e,!0),i="var cell = this.cell; this.valid = 0; this.missing = 0;",a="this.cell = cell; this.init();",o="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",s="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",u="var cell = this.cell;";return r.forEach((function(e){i+=e.init,o+=e.add,s+=e.rem})),e.slice().sort(compareIndex).forEach((function(e){u+="t["+Object(V.X)(e.out)+"]="+e.set+";"})),u+="return t;",(a=Function("cell",a)).prototype.init=Function(i),a.prototype.add=Function("v","t",o),a.prototype.rem=Function("v","t",s),a.prototype.set=Function("t",u),a.prototype.get=n,a.fields=e.map((function(e){return e.out})),a}var xt=function(e){var t,n,r,i,a,o,s,u,l=e.maxbins||20,c=e.base||10,f=Math.log(c),d=e.divide||[5,2],h=e.extent[0],p=e.extent[1],g=e.span||p-h||Math.abs(h)||1;if(e.step)t=e.step;else if(e.steps){for(a=g/l,o=0,s=e.steps.length;o<s&&e.steps[o]<a;++o);t=e.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(l)/f),r=e.minstep||0,t=Math.max(r,Math.pow(c,Math.round(Math.log(g)/f)-n));Math.ceil(g/t)>l;)t*=c;for(o=0,s=d.length;o<s;++o)(a=t/d[o])>=r&&g/a<=l&&(t=a)}return i=(a=Math.log(t))>=0?0:1+~~(-a/f),u=Math.pow(c,-i-1),(e.nice||void 0===e.nice)&&(h=h<(a=Math.floor(h/t+u)*t)?a-t:a,p=Math.ceil(p/t)*t),{start:h,stop:p===h?h+t:p,step:t}},wt=A.a.mark(numbers_callee);function numbers_callee(e,t){var n,r,i,a,o,s,u,l,c,f,d,h,p;return A.a.wrap((function _callee$(g){for(;;)switch(g.prev=g.next){case 0:if(void 0!==t){g.next=30;break}n=!0,r=!1,i=void 0,g.prev=4,a=e[Symbol.iterator]();case 6:if(n=(o=a.next()).done){g.next=14;break}if(!(null!=(s=o.value)&&(s=+s)>=s)){g.next=11;break}return g.next=11,s;case 11:n=!0,g.next=6;break;case 14:g.next=20;break;case 16:g.prev=16,g.t0=g.catch(4),r=!0,i=g.t0;case 20:g.prev=20,g.prev=21,n||null==a.return||a.return();case 23:if(g.prev=23,!r){g.next=26;break}throw i;case 26:return g.finish(23);case 27:return g.finish(20);case 28:g.next=58;break;case 30:u=-1,l=!0,c=!1,f=void 0,g.prev=34,d=e[Symbol.iterator]();case 36:if(l=(h=d.next()).done){g.next=44;break}if(p=h.value,!(null!=(p=t(p,++u,e))&&(p=+p)>=p)){g.next=41;break}return g.next=41,p;case 41:l=!0,g.next=36;break;case 44:g.next=50;break;case 46:g.prev=46,g.t1=g.catch(34),c=!0,f=g.t1;case 50:g.prev=50,g.prev=51,l||null==d.return||d.return();case 53:if(g.prev=53,!c){g.next=56;break}throw f;case 56:return g.finish(53);case 57:return g.finish(50);case 58:case"end":return g.stop()}}),wt,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}var kt=Math.random;function setRandom(e){kt=e}var St=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Et=A.a.mark(number_numbers),Tt=function(e){return null===e?NaN:+e};function number_numbers(e,t){var n,r,i,a,o,s,u,l,c,f,d,h,p;return A.a.wrap((function numbers$(g){for(;;)switch(g.prev=g.next){case 0:if(void 0!==t){g.next=30;break}n=!0,r=!1,i=void 0,g.prev=4,a=e[Symbol.iterator]();case 6:if(n=(o=a.next()).done){g.next=14;break}if(!(null!=(s=o.value)&&(s=+s)>=s)){g.next=11;break}return g.next=11,s;case 11:n=!0,g.next=6;break;case 14:g.next=20;break;case 16:g.prev=16,g.t0=g.catch(4),r=!0,i=g.t0;case 20:g.prev=20,g.prev=21,n||null==a.return||a.return();case 23:if(g.prev=23,!r){g.next=26;break}throw i;case 26:return g.finish(23);case 27:return g.finish(20);case 28:g.next=58;break;case 30:u=-1,l=!0,c=!1,f=void 0,g.prev=34,d=e[Symbol.iterator]();case 36:if(l=(h=d.next()).done){g.next=44;break}if(p=h.value,!(null!=(p=t(p,++u,e))&&(p=+p)>=p)){g.next=41;break}return g.next=41,p;case 41:l=!0,g.next=36;break;case 44:g.next=50;break;case 46:g.prev=46,g.t1=g.catch(34),c=!0,f=g.t1;case 50:g.prev=50,g.prev=51,l||null==d.return||d.return();case 53:if(g.prev=53,!c){g.next=56;break}throw f;case 56:return g.finish(53);case 57:return g.finish(50);case 58:case"end":return g.stop()}}),Et,null,[[4,16,20,28],[21,,23,27],[34,46,50,58],[51,,53,57]])}function quantile(e,t,n){return function quantileSorted(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tt;if(!(r=e.length))return;if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}(Float64Array.from(number_numbers(e,n)).sort(St),t)}var Ct=function(e,t,n,r){if(!e.length)return[void 0,void 0];var i,a,o,s,u=Float64Array.from(numbers_callee(e,r)),l=u.length,c=t;for(o=0,s=Array(c);o<c;++o){for(i=0,a=0;a<l;++a)i+=u[~~(kt()*l)];s[o]=i/l}return s.sort(St),[quantile(s,n/2),quantile(s,1-n/2)]},Ot=function(e,t){var n=Float64Array.from(numbers_callee(e,t));return n.sort(St),[quantile(n,.25),quantile(n,.5),quantile(n,.75)]},At=function(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}},Rt=function(e,t){null==t&&(t=e,e=0);var n,r,i,a={};return a.min=function(e){return arguments.length?(i=r-(n=e||0),a):n},a.max=function(e){return arguments.length?(i=(r=e||0)-n,a):r},a.sample=function(){return n+Math.floor(i*kt())},a.pdf=function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},a.cdf=function(e){var t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},a.icdf=function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN},a.min(e).max(t)},Dt=function(e,t){var n,r,i=NaN,a={mean:function(e){return arguments.length?(n=e||0,i=NaN,a):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i=NaN,a):r},sample:function(){var e,t,a=0,o=0;if(i===i)return a=i,i=NaN,a;do{e=(a=2*kt()-1)*a+(o=2*kt()-1)*o}while(0===e||e>1);return t=Math.sqrt(-2*Math.log(e)/e),i=n+o*t*r,n+a*t*r},pdf:function(e){var t=Math.exp(Math.pow(e-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*t},cdf:function(e){var t,i=(e-n)/r,a=Math.abs(i);if(a>37)t=0;else{var o=Math.exp(-a*a/2);a<7.07106781186547?(t=o*((((((.0352624965998911*a+.700383064443688)*a+6.37396220353165)*a+33.912866078383)*a+112.079291497871)*a+221.213596169931)*a+220.206867912376),t/=((((((.0883883476483184*a+1.75566716318264)*a+16.064177579207)*a+86.7807322029461)*a+296.564248779674)*a+637.333633378831)*a+793.826512519948)*a+440.413735824752):t=o/(a+1/(a+2/(a+3/(a+4/(a+.65)))))/2.506628274631}return i>0?1-t:t},icdf:function(e){if(e<=0||e>=1)return NaN;var t=2*e-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(t,2))/2,o=Math.log(1-t*t)/i,s=(t>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+r*Math.SQRT2*s}};return a.mean(e).stdev(t)};var Pt=function(e,t){var n=Dt(),r={},i=0;return r.data=function(n){return arguments.length?(e=n,i=n?n.length:0,r.bandwidth(t)):e},r.bandwidth=function(n){return arguments.length?(!(t=n)&&e&&(t=estimateBandwidth(e)),r):t},r.sample=function(){return e[~~(kt()*i)]+t*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-e[o])/t);return a/t/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-e[o])/t);return a/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(e)};function estimateBandwidth(e){var t=e.length,n=Ot(e),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(function variance(e,t){var n,r=0,i=0,a=0;if(void 0===t){var o=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;null!=f&&(f=+f)>=f&&(a+=(n=f-i)*(f-(i+=n/++r)))}}catch(_){s=!0,u=_}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}else{var d=-1,h=!0,p=!1,g=void 0;try{for(var m,v=e[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;null!=(y=t(y,++d,e))&&(y=+y)>=y&&(a+=(n=y-i)*(y-(i+=n/++r)))}}catch(_){p=!0,g=_}finally{try{h||null==v.return||v.return()}finally{if(p)throw g}}}if(r>1)return a/(r-1)}(e)),r)*Math.pow(t,-.2)}var Mt=function(e,t){var n,r={},i=0;function normalize(e){var t,n=[],r=0;for(t=0;t<i;++t)r+=n[t]=null==e[t]?1:+e[t];for(t=0;t<i;++t)n[t]/=r;return n}return r.weights=function(e){return arguments.length?(n=normalize(t=e||[]),r):t},r.distributions=function(n){return arguments.length?(n?(i=n.length,e=n):(i=0,e=[]),r.weights(t)):e},r.sample=function(){for(var t=kt(),r=e[i-1],a=n[0],o=0;o<i-1;a+=n[++o])if(t<a){r=e[o];break}return r.sample()},r.pdf=function(t){for(var r=0,a=0;a<i;++a)r+=n[a]*e[a].pdf(t);return r},r.cdf=function(t){for(var r=0,a=0;a<i;++a)r+=n[a]*e[a].cdf(t);return r},r.icdf=function(){throw Error("Mixture icdf not supported.")},r.distributions(e).weights(t)},jt=function(e,t){null==t&&(t=null==e?1:e,e=0);var n,r,i,a={};return a.min=function(e){return arguments.length?(i=r-(n=e||0),a):n},a.max=function(e){return arguments.length?(i=(r=e||0)-n,a):r},a.sample=function(){return n+i*kt()},a.pdf=function(e){return e>=n&&e<=r?1/i:0},a.cdf=function(e){return e<n?0:e>r?1:(e-n)/i},a.icdf=function(e){return e>=0&&e<=1?n+e*i:NaN},a.min(e).max(t)},Ft=function(e,t,n,r){var i=r-e*e,a=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-a*e,a]};function points_points(e,t,n,r){e=e.filter((function(e){var r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort((function(e,n){return t(e)-t(n)}));var i=new Float64Array(e.length),a=new Float64Array(e.length),o=0,s=!0,u=!1,l=void 0;try{for(var c,f=e[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;i[o]=t(d),a[o]=n(d),++o}}catch(h){u=!0,l=h}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return[i,a]}function visitPoints(e,t,n,r){var i,a,o=-1,s=-1,u=!0,l=!1,c=void 0;try{for(var f,d=e[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;i=t(h,++o,e),a=n(h,o,e),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++s)}}catch(p){l=!0,c=p}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}}var It=function(e,t,n,r,i){var a=0,o=0;return visitPoints(e,t,n,(function(e,t){var n=t-i(e),s=t-r;a+=n*n,o+=s*s})),1-a/o},Lt=function(e,t,n){var r=0,i=0,a=0,o=0,s=0;visitPoints(e,t,n,(function(e,t){r+=e,i+=t,a+=e*t,o+=e*e,++s}));var u=Ft(r/s,i/s,a/s,o/s),l=function predict(e){return u[0]+u[1]*e};return{coef:u,predict:l,rSquared:It(e,t,n,i/s,l)}},Nt=function(e,t,n){var r=0,i=0,a=0,o=0,s=0;visitPoints(e,t,n,(function(e,t){e=Math.log(e),r+=e,i+=t,a+=e*t,o+=e*e,++s}));var u=Ft(r/s,i/s,a/s,o/s),l=function predict(e){return u[0]+u[1]*Math.log(e)};return{coef:u,predict:l,rSquared:It(e,t,n,i/s,l)}},Bt=function(e,t,n){var r=0,i=0,a=0,o=0,s=0,u=0;visitPoints(e,t,n,(function(e,t){var n=Math.log(t),l=e*t;r+=t,a+=l,s+=e*l,i+=t*n,o+=l*n,++u}));var l=Ft(a/r,i/r,o/r,s/r),c=function predict(e){return l[0]*Math.exp(l[1]*e)};return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:It(e,t,n,r/u,c)}},Ut=function(e,t,n){var r=0,i=0,a=0,o=0,s=0,u=0;visitPoints(e,t,n,(function(e,t){var n=Math.log(e),l=Math.log(t);r+=n,i+=l,a+=n*l,o+=n*n,s+=t,++u}));var l=Ft(r/u,i/u,a/u,o/u),c=function predict(e){return l[0]*Math.pow(e,l[1])};return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:It(e,t,n,s/u,c)}},zt=function(e,t,n){var r=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0;visitPoints(e,t,n,(function(e,t){var n=e*e;r+=e,i+=t,a+=n,o+=n*e,s+=n*n,u+=e*t,l+=n*t,++c}));var f=a-r*r/c,d=o-a*r/c,h=s-a*a/c,p=f*h-d*d,g=((l-=a*(i/=c))*f-(u-=r*i)*d)/p,m=(u*h-l*d)/p,v=i-m*(r/c)-g*(a/c),y=function predict(e){return g*e*e+m*e+v};return{coef:[v,m,g],predict:y,rSquared:It(e,t,n,i,y)}},qt=n(11),Wt=function(e,t,n,r){if(1===r)return Lt(e,t,n);if(2===r)return zt(e,t,n);var i,a,o,s,u,l=points_points(e,t,n),c=Object(qt.a)(l,2),f=c[0],d=c[1],h=f.length,p=[],g=[],m=r+1,v=0;for(i=0;i<h;++i)v+=d[i];for(i=0;i<m;++i){for(o=0,s=0;o<h;++o)s+=Math.pow(f[o],i)*d[o];for(p.push(s),u=new Float64Array(m),a=0;a<m;++a){for(o=0,s=0;o<h;++o)s+=Math.pow(f[o],i+a);u[a]=s}g.push(u)}g.push(p);var y=function gaussianElimination(e){var t,n,r,i,a,o=e.length-1,s=[];for(t=0;t<o;++t){for(i=t,n=t+1;n<o;++n)Math.abs(e[t][n])>Math.abs(e[t][i])&&(i=n);for(r=t;r<o+1;++r)a=e[r][t],e[r][t]=e[r][i],e[r][i]=a;for(n=t+1;n<o;++n)for(r=o;r>=t;r--)e[r][n]-=e[r][t]*e[t][n]/e[t][t]}for(n=o-1;n>=0;--n){for(a=0,r=n+1;r<o;++r)a+=e[r][n]*s[r];s[n]=(e[o][n]-a)/e[n][n]}return s}(g),_=function predict(e){for(var t=0,n=0,r=y.length;n<r;++n)t+=y[n]*Math.pow(e,n);return t};return{coef:y,predict:_,rSquared:It(e,t,n,v/h,_)}};function quickselect(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:St;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);quickselect(e,t,Math.max(n,Math.floor(t-o*u/a+l)),Math.min(r,Math.floor(t+(a-o)*u/a+l)),i)}var c=e[t],f=n,d=r;for(swap(e,n,t),i(e[r],c)>0&&swap(e,n,r);f<d;){for(swap(e,f,d),++f,--d;i(e[f],c)<0;)++f;for(;i(e[d],c)>0;)--d}0===i(e[n],c)?swap(e,n,d):swap(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}return e}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}var Gt=function(e,t){if((e=Float64Array.from(number_numbers(e,t))).length){var n=e.length,r=n>>1;return quickselect(e,r-1,0),0===(1&n)&&quickselect(e,r,r),quantile(e,.5)}},Ht=function(e,t,n,r){for(var i=points_points(e,t,n,!0),a=Object(qt.a)(i,2),o=a[0],s=a[1],u=o.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1),h=-1;++h<=2;){for(var p=[0,l-1],g=0;g<u;++g){for(var m=o[g],v=p[0],y=p[1],_=m-o[v]>o[y]-m?v:y,b=0,x=0,w=0,k=0,S=0,E=1/Math.abs(o[_]-m||1),T=v;T<=y;++T){var C=o[T],O=s[T],A=tricube(Math.abs(m-C)*E)*d[T],R=C*A;b+=A,x+=R,w+=O*A,k+=O*R,S+=C*R}var D=Ft(x/b,w/b,k/b,S/b),P=Object(qt.a)(D,2),M=P[0],j=P[1];c[g]=M+j*m,f[g]=Math.abs(s[g]-c[g]),updateInterval(o,g+1,p)}if(2===h)break;var F=Gt(f);if(Math.abs(F)<1e-12)break;for(var I,L,N=0;N<u;++N)I=f[N]/(6*F),d[N]=I>=1?1e-12:(L=1-I*I)*L}return function loess_output(e,t){for(var n,r=e.length,i=[],a=0,o=0,s=[];a<r;++a)n=e[a],s[0]===n?s[1]+=(t[a]-s[1])/++o:(o=0,s=[n,t[a]],i.push(s));return i}(o,c)};function tricube(e){return(e=1-e*e*e)*e*e}function updateInterval(e,t,n){var r=e[t],i=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>i&&e[a]-r<=r-e[i];)n[0]=++i,n[1]=a,++a}var Vt=.1*Math.PI/180,Yt=function(e,t,n,r){n=n||25,r=Math.max(n,r||200);var i=function point(t){return[t,e(t)]},a=t[0],o=t[1],s=o-a,u=s/r,l=[i(a)],c=[];if(n===r){for(var f=1;f<r;++f)l.push(i(a+f/n*s));return l.push(i(o)),l}c.push(i(o));for(var d=n;--d>0;)c.push(i(a+d/n*s));for(var h=l[0],p=c[c.length-1];p;){var g=i((h[0]+p[0])/2);g[0]-h[0]>=u&&angleDelta(h,g,p)>Vt?c.push(g):(h=p,l.push(p),c.pop()),p=c[c.length-1]}return l};function angleDelta(e,t,n){var r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function TupleStore(e){this._key=e?Object(V.t)(e):tupleid,this.reset()}var $t=TupleStore.prototype;function Aggregate(e){Transform.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}$t.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},$t.add=function(e){this._add.push(e)},$t.rem=function(e){this._rem.push(e)},$t.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r=this._add,i=this._rem,a=this._key,o=r.length,s=i.length,u=Array(o-s),l={};for(e=0;e<s;++e)l[a(i[e])]=1;for(e=0,t=0;e<o;++e)l[a(n=r[e])]?l[a(n)]=0:u[t++]=n;return this._rem=[],this._add=u},$t.distinct=function(e){for(var t,n=this.values(),r=n.length,i={},a=0;--r>=0;)t=e(n[r])+"",Object(V.v)(i,t)||(i[t]=1,++a);return a},$t.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=Object(V.q)(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},$t.argmin=function(e){return this.extent(e)[0]||{}},$t.argmax=function(e){return this.extent(e)[1]||{}},$t.min=function(e){var t=this.extent(e)[0];return null!=t?e(t):void 0},$t.max=function(e){var t=this.extent(e)[1];return null!=t?e(t):void 0},$t.quartile=function(e){return this._get===e&&this._q||(this._q=Ot(this.values(),e),this._get=e),this._q},$t.q1=function(e){return this.quartile(e)[0]},$t.q2=function(e){return this.quartile(e)[1]},$t.q3=function(e){return this.quartile(e)[2]},$t.ci=function(e){return this._get===e&&this._ci||(this._ci=Ct(this.values(),1e3,.05,e),this._get=e),this._ci},$t.ci0=function(e){return this.ci(e)[0]},$t.ci1=function(e){return this.ci(e)[1]},Aggregate.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bt},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};var Xt=Object(V.y)(Aggregate,Transform);Xt.transform=function(e,t){var n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(function(e){return n.add(e)}))):(n.value=n.value||n.init(e),t.visit(t.REM,(function(e){return n.rem(e)})),t.visit(t.ADD,(function(e){return n.add(e)}))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),n.changes(r)},Xt.cross=function(){var e=this,t=e.value,n=e._dnames,r=n.map((function(){return{}})),i=n.length;function collect(e){var t,a,o,s;for(t in e)for(o=e[t].tuple,a=0;a<i;++a)r[a][s=o[n[a]]]=s}collect(e._prev),collect(t),function generate(a,o,s){var u,l,c=n[s],f=r[s++];for(u in f)o[c]=f[u],l=a?a+"|"+u:u,s<i?generate(l,o,s):t[l]||e.cell(l,o)}("",{},0)},Xt.init=function(e){var t=this._inputs=[],n=this._outputs=[],r={};function inputVisit(e){for(var n,i=Object(V.i)(Object(V.g)(e)),a=0,o=i.length;a<o;++a)r[n=i[a]]||(r[n]=1,t.push(n))}this._dims=Object(V.i)(e.groupby),this._dnames=this._dims.map((function(e){var t=Object(V.h)(e);return inputVisit(e),n.push(t),t})),this.cellkey=e.key?e.key:groupkey(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];var i,a,o,s,u,l,c=e.fields||[null],f=e.ops||["count"],d=e.as||[],h=c.length,p={};for(h!==f.length&&Object(V.n)("Unmatched number of fields and aggregate ops."),l=0;l<h;++l)i=c[l],a=f[l],null==i&&"count"!==a&&Object(V.n)("Null aggregate field specified."),u=measureName(a,s=Object(V.h)(i),d[l]),n.push(u),"count"!==a?((o=p[s])||(inputVisit(i),(o=p[s]=[]).field=i,this._measures.push(o)),"count"!==a&&(this._countOnly=!1),o.push(createMeasure(a,u))):this._counts.push(u);return this._measures=this._measures.map((function(e){return compileMeasures(e,e.field)})),{}},Xt.cellkey=groupkey(),Xt.cell=function(e,t){var n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},Xt.newcell=function(e,t){var n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n)}return n.store&&(n.data=new TupleStore),n},Xt.newtuple=function(e,t){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](e);return t?replace(t.tuple,o):ingest(o)},Xt.add=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].add(t[n].get(e),e)},Xt.rem=function(e){var t,n,r,i=this.cellkey(e),a=this.cell(i,e);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(e),n=0,r=(t=a.agg).length;n<r;++n)t[n].rem(t[n].get(e),e)},Xt.celltuple=function(e){var t,n,r,i=e.tuple,a=this._counts;for(e.store&&e.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=e.num;if(!this._countOnly)for(n=0,r=(t=e.agg).length;n<r;++n)t[n].set(i);return i},Xt.changes=function(e){var t,n,r,i,a=this._adds,o=this._mods,s=this._prev,u=this._drop,l=e.add,c=e.rem,f=e.mod;if(s)for(n in s)t=s[n],u&&!t.num||c.push(t.tuple);for(r=0,i=this._alen;r<i;++r)l.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)(0===(t=o[r]).num&&u?c:f).push(this.celltuple(t)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,e};function Bin(e){Transform.call(this,null,e)}Bin.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};var Kt=Object(V.y)(Bin,Transform);Kt.transform=function(e,t){var n,r=this._bins(e),i=r.start,a=r.step,o=e.as||["bin0","bin1"],s=o[0],u=o[1];return n=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(Object(V.g)(e.field))?t.ADD_MOD:t.ADD,t.visit(n,(function(e){var t=r(e);e[s]=t,e[u]=null==t?null:i+a*(1+(t-i)/a)})),t.modifies(o)},Kt._bins=function(e){if(this.value&&!e.modified())return this.value;var t,n,r=e.field,i=xt(e),a=i.start,o=i.stop,s=i.step;null!=(t=e.anchor)&&(n=t-(a+s*Math.floor((t-a)/s)),a+=n,o+=n);var u=function f(e){var t=r(e);return null==t?null:(t=Math.max(a,Math.min(+t,o-s)),a+s*Math.floor(1e-14+(t-a)/s))};return u.start=a,u.stop=o,u.step=s,this.value=Object(V.f)(u,Object(V.g)(r),e.name||"bin_"+Object(V.h)(r))};var Jt=function(e,t,n){var r=e,i=t||[],a=n||[],o={},s=0;return{add:function add(e){a.push(e)},remove:function remove(e){o[r(e)]=++s},size:function size(){return i.length},data:function data(e,t){return s&&(i=i.filter((function(e){return!o[r(e)]})),o={},s=0),t&&e&&i.sort(e),a.length&&(i=e?Object(V.L)(e,i,a.sort(e)):i.concat(a),a=[]),i}}};function Collect(e){Transform.call(this,[],e)}function Compare(e){Operator.call(this,null,Compare_update,e)}function Compare_update(e){return this.value&&!e.modified()?this.value:Object(V.k)(e.fields,e.orders)}function CountPattern(e){Transform.call(this,null,e)}Collect.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Object(V.y)(Collect,Transform).transform=function(e,t){var n=t.fork(t.ALL),r=Jt(tupleid,this.value,n.materialize(n.ADD).add),i=e.sort,a=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(a),this.value=n.source=r.data(stableCompare(i),a),t.source&&t.source.root&&(this.value.root=t.source.root),n},Object(V.y)(Compare,Operator),CountPattern.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};var Zt=Object(V.y)(CountPattern,Transform);function Cross(e){Transform.call(this,null,e)}Zt.transform=function(e,t){function process(t){return function(n){for(var r,s=function tokenize(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(o(n),e.case,i)||[],u=0,l=s.length;u<l;++u)a.test(r=s[u])||t(r)}}var n=this._parameterCheck(e,t),r=this._counts,i=this._match,a=this._stop,o=e.field,s=e.as||["text","count"],u=process((function(e){r[e]=1+(r[e]||0)})),l=process((function(e){r[e]-=1}));return n?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,l)),this._finish(t,s)},Zt._parameterCheck=function(e,t){var n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},Zt._finish=function(e,t){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),s=t[0],u=t[1],l=e.fork(e.NO_SOURCE|e.NO_FIELDS);for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=ingest({}),r[s]=n,r[u]=i,l.add.push(r)):0===i?(r&&l.rem.push(r),a[n]=null,o[n]=null):r[u]!==i&&(r[u]=i,l.mod.push(r));return l.modifies(t)},Cross.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Object(V.y)(Cross,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=this.value,i=e.as||["a","b"],a=i[0],o=i[1];return!r||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter")?(r&&(n.rem=r),r=t.materialize(t.SOURCE).source,n.add=this.value=function Cross_cross(e,t,n,r){for(var i,a,o=[],s={},u=e.length,l=0;l<u;++l)for(s[t]=a=e[l],i=0;i<u;++i)s[n]=e[i],r(s)&&(o.push(ingest(s)),(s={})[t]=a);return o}(r,a,o,e.filter||V.eb)):n.mod=r,n.source=this.value,n.modifies(i)};var Qt={kde:Pt,mixture:Mt,normal:Dt,uniform:jt},en="distributions",tn="function",nn="field";function Density(e){Transform.call(this,null,e)}var rn=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],an={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:rn},{name:"weights",type:"number",array:!0}]};function Expression(e){Operator.call(this,null,Expression_update,e),this.modified(!0)}function Expression_update(e){var t=e.expr;return this.value&&!e.modified("expr")?this.value:Object(V.f)((function(n){return t(n,e)}),Object(V.g)(t),Object(V.h)(t))}function Extent(e){Transform.call(this,[void 0,void 0],e)}function Subflow(e,t){Operator.call(this,e),this.parent=t}Density.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:rn.concat(an)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(V.y)(Density,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=function Distributions_parse(e,t){var n=e[tn];Object(V.v)(Qt,n)||Object(V.n)("Unknown distribution function: "+n);var r=Qt[n]();for(var i in e)i===nn?r.data((e.from||t()).map(e[i])):i===en?r[i](e[i].map((function(e){return Distributions_parse(e,t)}))):typeof r[i]===tn&&r[i](e[i]);return r}(e.distribution,function Density_source(e){return function(){return e.materialize(e.SOURCE).source}}(t)),i=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200,o=e.method||"pdf";"pdf"!==o&&"cdf"!==o&&Object(V.n)("Invalid density method: "+o),e.extent||r.data||Object(V.n)("Missing density extent parameter."),o=r[o];var s=e.as||["value","density"],u=e.extent||Object(V.p)(r.data()),l=Yt(o,u,i,a).map((function(e){var t={};return t[s[0]]=e[0],t[s[1]]=e[1],ingest(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n},Object(V.y)(Expression,Operator),Extent.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Object(V.y)(Extent,Transform).transform=function(e,t){var n,r=this.value,i=e.field,a=r[0],o=r[1];if(((n=t.changed()||t.modified(i.fields)||e.modified("field"))||null==a)&&(a=1/0,o=-1/0),t.visit(n?t.SOURCE:t.ADD,(function(e){var t=i(e);null!=t&&((t=+t)<a&&(a=t),t>o&&(o=t))})),!Number.isFinite(a)||!Number.isFinite(o)){var s=Object(V.h)(i);s&&(s=' for field "'.concat(s,'"')),t.dataflow.warn("Infinite extent".concat(s,": [").concat(a,", ").concat(o,"]")),a=o=void 0}this.value=[a,o]};var sn=Object(V.y)(Subflow,Operator);function Facet(e){Transform.call(this,{},e),this._keys=Object(V.s)();var t=this._targets=[];t.active=0,t.forEach=function(e){for(var n=0,r=t.active;n<r;++n)e(t[n],n,t)}}sn.connect=function(e){return this.targets().add(e),e.source=this},sn.add=function(e){this.value.add.push(e)},sn.rem=function(e){this.value.rem.push(e)},sn.mod=function(e){this.value.mod.push(e)},sn.init=function(e){this.value.init(e,e.NO_SOURCE)},sn.evaluate=function(){return this.value};var un=Object(V.y)(Facet,Transform);function Field(e){Operator.call(this,null,Field_update,e)}function Field_update(e){return this.value&&!e.modified()?this.value:Object(V.A)(e.name)?Object(V.i)(e.name).map((function(e){return Object(V.t)(e)})):Object(V.t)(e.name,e.as)}function Filter(e){Transform.call(this,Object(V.s)(),e)}function fieldNames(e,t){return e?e.map((function(e,n){return t[n]||Object(V.h)(e)})):null}function Flatten(e){Transform.call(this,[],e)}function Fold(e){Transform.call(this,[],e)}function Formula(e){Transform.call(this,null,e)}function Generate(e){Transform.call(this,[],e)}un.activate=function(e){this._targets[this._targets.active++]=e},un.subflow=function(e,t,n,r){var i,a,o=this.value,s=Object(V.v)(o,e)&&o[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,s=(i=n.dataflow).add(new Subflow(n.fork(n.NO_SOURCE),this)).connect(t(i,e,a)),o[e]=s,this.activate(s)),s},un.transform=function(e,t){var n=t.dataflow,r=this,i=e.key,a=e.subflow,o=this._keys,s=e.modified("key");function subflow(e){return r.subflow(e,a,t)}return this._group=e.group||{},this._targets.active=0,t.visit(t.REM,(function(e){var t=tupleid(e),n=o.get(t);void 0!==n&&(o.delete(t),subflow(n).rem(e))})),t.visit(t.ADD,(function(e){var t=i(e);o.set(tupleid(e),t),subflow(t).add(e)})),s||t.modified(i.fields)?t.visit(t.MOD,(function(e){var t=tupleid(e),n=o.get(t),r=i(e);n===r?subflow(r).mod(e):(o.set(t,r),subflow(n).rem(e),subflow(r).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(function(e){subflow(o.get(tupleid(e))).mod(e)})),s&&t.visit(t.REFLOW,(function(e){var t=tupleid(e),n=o.get(t),r=i(e);n!==r&&(o.set(t,r),subflow(n).rem(e),subflow(r).add(e))})),o.empty>n.cleanThreshold&&n.runAfter(o.clean),t},Object(V.y)(Field,Operator),Filter.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Object(V.y)(Filter,Transform).transform=function(e,t){var n=t.dataflow,r=this.value,i=t.fork(),a=i.add,o=i.rem,s=i.mod,u=e.expr,l=!0;function revisit(t){var n=tupleid(t),i=u(t,e),c=r.get(n);i&&c?(r.delete(n),a.push(t)):i||c?l&&i&&!c&&s.push(t):(r.set(n,1),o.push(t))}return t.visit(t.REM,(function(e){var t=tupleid(e);r.has(t)?r.delete(t):o.push(e)})),t.visit(t.ADD,(function(t){u(t,e)?a.push(t):r.set(tupleid(t),1)})),t.visit(t.MOD,revisit),e.modified()&&(l=!1,t.visit(t.REFLOW,revisit)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i},Flatten.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0}]},Object(V.y)(Flatten,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=fieldNames(r,e.as||[]),a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,o,s,u=r.map((function(t){return t(e)})),l=u.reduce((function(e,t){return Math.max(e,t.length)}),0),c=0;c<l;++c){for(o=Tuple_derive(e),t=0;t<a;++t)o[i[t]]=null==(s=u[t][c])?null:s;n.add.push(o)}})),this.value=n.source=n.add,n.modifies(i)},Fold.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Object(V.y)(Fold,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(V.h),a=e.as||["key","value"],o=a[0],s=a[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,(function(e){for(var t,a=0;a<u;++a)(t=Tuple_derive(e))[o]=i[a],t[s]=r[a](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(a)},Formula.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Object(V.y)(Formula,Transform).transform=function(e,t){var n=e.expr,r=e.as,i=e.modified(),a=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(a,(function set(t){t[r]=n(t,e)}))},Object(V.y)(Generate,Transform).transform=function(e,t){var n,r,i,a=this.value,o=t.fork(t.ALL),s=e.size-a.length,u=e.generator;if(s>0){for(n=[];--s>=0;)n.push(i=ingest(u(e))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-s),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-s);return o.source=this.value=a,o};var ln={value:"value",median:Gt,mean:function mean_mean(e,t){var n=0,r=0;if(void 0===t){var i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;null!=l&&(l=+l)>=l&&(++n,r+=l)}}catch(v){a=!0,o=v}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var c=-1,f=!0,d=!1,h=void 0;try{for(var p,g=e[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value;null!=(m=t(m,++c,e))&&(m=+m)>=m&&(++n,r+=m)}}catch(v){d=!0,h=v}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}if(n)return r/n},min:function min_min(e,t){var n;if(void 0===t){var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!=u&&(n>u||void 0===n&&u>=u)&&(n=u)}}catch(m){i=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var l=-1,c=!0,f=!1,d=void 0;try{for(var h,p=e[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value;null!=(g=t(g,++l,e))&&(n>g||void 0===n&&g>=g)&&(n=g)}}catch(m){f=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return n},max:function max_max(e,t){var n;if(void 0===t){var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;null!=u&&(n<u||void 0===n&&u>=u)&&(n=u)}}catch(m){i=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var l=-1,c=!0,f=!1,d=void 0;try{for(var h,p=e[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value;null!=(g=t(g,++l,e))&&(n<g||void 0===n&&g>=g)&&(n=g)}}catch(m){f=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return n}},cn=[];function Impute(e){Transform.call(this,[],e)}function JoinAggregate(e){Aggregate.call(this,e)}Impute.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},Object(V.y)(Impute,Transform).transform=function(e,t){var n,r,i,a,o,s,u,l,c,f,d=t.fork(t.ALL),h=function getValue(e){var t,n=e.method||ln.value;if(null!=ln[n])return n===ln.value?(t=void 0!==e.value?e.value:0,function(){return t}):ln[n];Object(V.n)("Unrecognized imputation method: "+n)}(e),p=function getField(e){var t=e.field;return function(e){return e?t(e):NaN}}(e),g=Object(V.h)(e.field),m=Object(V.h)(e.key),v=(e.groupby||[]).map(V.h),y=function Impute_partition(e,t,n,r){var i,a,o,s,u,l,c,f,d=function get(e){return e(f)},h=[],p=r?r.slice():[],g={},m={};for(p.forEach((function(e,t){g[e]=t+1})),s=0,c=e.length;s<c;++s)f=e[s],l=n(f),u=g[l]||(g[l]=p.push(l)),a=(i=t?t.map(d):cn)+"",(o=m[a])||(o=m[a]=[],h.push(o),o.values=i),o[u-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),_=[],b=this.value,x=y.domain.length;for(o=0,l=y.length;o<l;++o)for(i=(n=y[o]).values,r=NaN,u=0;u<x;++u)if(null==n[u]){for(a=y.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[v[s]]=i[s];f[m]=a,f[g]=isNaN(r)?r=h(n,p):r,_.push(ingest(f))}return _.length&&(d.add=d.materialize(d.ADD).add.concat(_)),b.length&&(d.rem=d.materialize(d.REM).rem.concat(b)),this.value=_,d},JoinAggregate.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bt},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};var dn=Object(V.y)(JoinAggregate,Aggregate);function KDE(e){Transform.call(this,null,e)}function Key(e){Operator.call(this,null,Key_update,e)}function Key_update(e){return this.value&&!e.modified()?this.value:Object(V.I)(e.fields,e.flat)}function Load(e){Transform.call(this,[],e)}function Load_output(e,t,n){n.forEach(ingest);var r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.add=r.source=n,r}function Lookup(e){Transform.call(this,{},e)}function MultiExtent(e){Operator.call(this,null,MultiExtent_update,e)}function MultiExtent_update(e){if(this.value&&!e.modified())return this.value;var t,n,r,i=1/0,a=-1/0,o=e.extents;for(t=0,n=o.length;t<n;++t)(r=o[t])[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function MultiValues(e){Operator.call(this,null,MultiValues_update,e)}function MultiValues_update(e){return this.value&&!e.modified()?this.value:e.values.reduce((function(e,t){return e.concat(t)}),[])}function Params(e){Transform.call(this,null,e)}function Pivot(e){Aggregate.call(this,e)}dn.transform=function(e,t){var n,r=this,i=e.modified();return r.value&&(i||t.modified(r._inputs,!0))?(n=r.value=i?r.init(e):{},t.visit(t.SOURCE,(function(e){r.add(e)}))):(n=r.value=r.value||this.init(e),t.visit(t.REM,(function(e){r.rem(e)})),t.visit(t.ADD,(function(e){r.add(e)}))),r.changes(),t.visit(t.SOURCE,(function(e){Object(V.o)(e,n[r.cellkey(e)].tuple)})),t.reflow(i).modifies(this._outputs)},dn.changes=function(){var e,t,n=this._adds,r=this._mods;for(e=0,t=this._alen;e<t;++e)this.celltuple(n[e]),n[e]=null;for(e=0,t=this._mlen;e<t;++e)this.celltuple(r[e]),r[e]=null;this._alen=this._mlen=0},KDE.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Object(V.y)(KDE,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,i=function KDE_partition(e,t,n){var r,i,a,o,s,u,l=[],c=function get(e){return e(o)};if(null==t)l.push(e.map(n));else for(r={},i=0,a=e.length;i<a;++i)o=e[i],s=t.map(c),(u=r[s])||(r[s]=u=[],u.dims=s,l.push(u)),u.push(n(o));return l}(r,e.groupby,e.field),a=(e.groupby||[]).map(V.h),o=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[],c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&Object(V.n)("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=Object(V.p)(r,e.field)),f=d=e.steps||d),i.forEach((function(t){var n=Pt(t,o)[s],r=e.counts?t.length:1,i=c||Object(V.p)(t);Yt(n,i,f,d).forEach((function(e){for(var n={},i=0;i<a.length;++i)n[a[i]]=t.dims[i];n[u[0]]=e[0],n[u[1]]=e[1]*r,l.push(ingest(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n},Object(V.y)(Key,Operator),Object(V.y)(Load,Transform).transform=function(e,t){var n=this,r=t.dataflow;return e.values?Load_output(this,t,r.parse(e.values,e.format)):r.request(e.url,e.format).then((function(e){return Load_output(n,t,e.data||[])}))},Lookup.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Object(V.y)(Lookup,Transform).transform=function(e,t){var n,r,i=t,a=e.as,o=e.fields,s=e.index,u=e.values,l=null==e.default?null:e.default,c=e.modified(),f=c?t.SOURCE:t.ADD,d=o.length;return u?(r=u.length,d>1&&!a&&Object(V.n)('Multi-field lookup requires explicit "as" parameter.'),a&&a.length!==d*r&&Object(V.n)('The "as" parameter has too few output field names.'),a=a||u.map(V.h),n=function set(e){for(var t,n,i=0,c=0;i<d;++i)if(null==(n=s.get(o[i](e))))for(t=0;t<r;++t,++c)e[a[c]]=l;else for(t=0;t<r;++t,++c)e[a[c]]=u[t](n)}):(a||Object(V.n)("Missing output field names."),n=function set(e){for(var t,n=0;n<d;++n)t=s.get(o[n](e)),e[a[n]]=null==t?l:t}),c?i=t.reflow(!0):f|=o.some((function(e){return t.modified(e.fields)}))?t.MOD:0,t.visit(f,n),i.modifies(a)},Object(V.y)(MultiExtent,Operator),Object(V.y)(MultiValues,Operator),Object(V.y)(Params,Transform),Params.prototype.transform=function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)},Pivot.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bt,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};var hn=Object(V.y)(Pivot,Aggregate);function PreFacet(e){Facet.call(this,e)}function Project(e){Transform.call(this,null,e)}function Proxy(e){Transform.call(this,null,e)}function Relay(e){Transform.call(this,null,e)}function Sample(e){Transform.call(this,[],e),this.count=0}hn._transform=hn.transform,hn.transform=function(e,t){return this._transform(function aggregateParams(e,t){var n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",a=Object(V.g)(n).concat(Object(V.g)(r)),o=function pivotKeys(e,t,n){var r={},i=[];return n.visit(n.SOURCE,(function(t){var n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort((function(e,t){return(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)})),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:o.map((function(){return i})),fields:o.map((function(e){return function Pivot_get(e,t,n,r){return Object(V.f)((function(r){return t(r)===e?n(r):NaN}),r,e+"")}(e,n,r,a)})),as:o.map((function(e){return e+""})),modified:e.modified.bind(e)}}(e,t),t)},Object(V.y)(PreFacet,Facet).transform=function(e,t){var n=this,r=e.subflow,i=e.field;return(e.modified("field")||i&&t.modified(Object(V.g)(i)))&&Object(V.n)("PreFacet does not support field modification."),this._targets.active=0,t.visit(t.MOD,(function(e){var a=n.subflow(tupleid(e),r,t,e);i?i(e).forEach((function(e){a.mod(e)})):a.mod(e)})),t.visit(t.ADD,(function(e){var a=n.subflow(tupleid(e),r,t,e);i?i(e).forEach((function(e){a.add(ingest(e))})):a.add(e)})),t.visit(t.REM,(function(e){var a=n.subflow(tupleid(e),r,t,e);i?i(e).forEach((function(e){a.rem(e)})):a.rem(e)})),t},Project.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Object(V.y)(Project,Transform).transform=function(e,t){var n,r,i=e.fields,a=fieldNames(e.fields,e.as||[]),o=i?function(e,t){return function Project_project(e,t,n,r){for(var i=0,a=n.length;i<a;++i)t[r[i]]=n[i](e);return t}(e,t,i,a)}:rederive;return this.value?r=this.value:(t=t.addAll(),r=this.value={}),n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=tupleid(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=o(e,ingest({}));r[tupleid(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){n.mod.push(o(e,r[tupleid(e)]))})),n},Object(V.y)(Proxy,Transform).transform=function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},Object(V.y)(Relay,Transform).transform=function(e,t){var n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(function(e){var t=tupleid(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(function(e){var t=Tuple_derive(e);r[tupleid(e)]=t,n.add.push(t)})),t.visit(t.MOD,(function(e){n.mod.push(rederive(e,r[tupleid(e)]))}))),n},Sample.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Object(V.y)(Sample,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,a=this.value,o=this.count,s=0,u=a.reduce((function(e,t){return e[tupleid(t)]=1,e}),{});function update(e){var t,r;a.length<i?a.push(e):(r=~~((o+1)*kt()))<a.length&&r>=s&&(t=a[r],u[tupleid(t)]&&n.rem.push(t),a[r]=e),++o}if(t.rem.length&&(t.visit(t.REM,(function(e){var t=tupleid(e);u[t]&&(u[t]=-1,n.rem.push(e)),--o})),a=a.filter((function(e){return-1!==u[tupleid(e)]}))),(t.rem.length||r)&&a.length<i&&t.source&&(s=o=a.length,t.visit(t.SOURCE,(function(e){u[tupleid(e)]||update(e)})),s=-1),r&&a.length>i){for(var l=0,c=a.length-i;l<c;++l)u[tupleid(a[l])]=-1,n.rem.push(a[l]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,(function(e){u[tupleid(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,update),(t.add.length||s<0)&&(n.add=a.filter((function(e){return!u[tupleid(e)]}))),this.count=o,this.value=n.source=a,n};var pn=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a};function Sequence(e){Transform.call(this,null,e)}function Sieve(e){Transform.call(this,null,e),this.modified(!0)}function TupleIndex(e){Transform.call(this,Object(V.s)(),e)}function Values(e){Transform.call(this,null,e)}Sequence.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Object(V.y)(Sequence,Transform).transform=function(e,t){if(!this.value||e.modified()){var n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=pn(e.start,e.stop,e.step||1).map((function(e){var t={};return t[r]=e,ingest(t)})),n.add=t.add.concat(this.value),n}},Object(V.y)(Sieve,Transform).transform=function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation},Object(V.y)(TupleIndex,Transform).transform=function(e,t){var n=t.dataflow,r=e.field,i=this.value,a=!0;function set(e){i.set(r(e),e)}return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,set)):t.changed()?(t.visit(t.REM,(function(e){i.delete(r(e))})),t.visit(t.ADD,set)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()},Object(V.y)(Values,Transform).transform=function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(stableCompare(e.sort)):t.source).map(e.field))};var gn={row_number:function row_number(){return{next:function next(e){return e.index+1}}},rank:function rank(){var rank;return{init:function init(){return rank=1},next:function next(e){var t=e.index,n=e.data;return t&&e.compare(n[t-1],n[t])?rank=t+1:rank}}},dense_rank:function dense_rank(){var e;return{init:function init(){return e=1},next:function next(t){var n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function percent_rank(){var e=gn.rank(),t=e.next;return{init:e.init,next:function next(e){return(t(e)-1)/(e.data.length-1)}}},cume_dist:function cume_dist(){var e;return{init:function init(){return e=0},next:function next(t){var n=t.index,r=t.data,i=t.compare;if(e<n){for(;n+1<r.length&&!i(r[n],r[n+1]);)++n;e=n}return(1+e)/r.length}}},ntile:function ntile(e,t){(t=+t)>0||Object(V.n)("ntile num must be greater than zero.");var n=gn.cume_dist(),r=n.next;return{init:n.init,next:function next(e){return Math.ceil(t*r(e))}}},lag:function lag(e,t){return t=+t||1,{next:function next(n){var r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function lead(e,t){return t=+t||1,{next:function next(n){var r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function first_value(e){return{next:function next(t){return e(t.data[t.i0])}}},last_value:function last_value(e){return{next:function next(t){return e(t.data[t.i1-1])}}},nth_value:function nth_value(e,t){return(t=+t)>0||Object(V.n)("nth_value nth must be greater than zero."),{next:function next(n){var r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function prev_value(e){var t=null;return{next:function next(n){var r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function next_value(e){var t=null,n=-1;return{next:function next(r){var i=r.data;return r.index<=n?t:(n=function find(e,t,n){for(var r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};var mn=Object.keys(gn);function WindowState(e){var t=Object(V.i)(e.ops),n=Object(V.i)(e.fields),r=Object(V.i)(e.params),i=Object(V.i)(e.as),a=this.outputs=[],o=this.windows=[],s={},u={},l=!0,c=[],f=[];function visitInputs(e){Object(V.i)(Object(V.g)(e)).forEach((function(e){return s[e]=1}))}visitInputs(e.sort),t.forEach((function(e,t){var s=n[t],d=Object(V.h)(s),h=measureName(e,d,i[t]);if(visitInputs(s),a.push(h),Object(V.v)(gn,e))o.push(function WindowOp(e,t,n,r){var i=gn[e](t,n);return{init:i.init||V.hb,update:function update(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],h));else{if(null==s&&"count"!==e&&Object(V.n)("Null aggregate field specified."),"count"===e)return void c.push(h);l=!1;var p=u[d];p||((p=u[d]=[]).field=s,f.push(p)),p.push(createMeasure(e,h))}})),(c.length||f.length)&&(this.cell=function WindowState_cell(e,t,n){e=e.map((function(e){return compileMeasures(e,e.field)}));var r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,a=r.agg=Array(i),o=0;o<i;++o)a[o]=new e[o](r);if(r.store)var s=r.data=new TupleStore;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(var t=0;t<i;++t)a[t].add(a[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(var t=0;t<i;++t)a[t].rem(a[t].get(e),e)}},r.set=function(e){var i,o;for(s&&s.values(),i=0,o=t.length;i<o;++i)e[t[i]]=r.num;if(!n)for(i=0,o=a.length;i<o;++i)a[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(var e=0;e<i;++e)a[e].init()},r}(f,c,l)),this.inputs=Object.keys(s)}var vn=WindowState.prototype;vn.init=function(){this.windows.forEach((function(e){return e.init()})),this.cell&&this.cell.init()},vn.update=function(e,t){var n,r=this.cell,i=this.windows,a=e.data,o=i&&i.length;if(r){for(n=e.p0;n<e.i0;++n)r.rem(a[n]);for(n=e.p1;n<e.i1;++n)r.add(a[n]);r.set(t)}for(n=0;n<o;++n)i[n].update(e,t)};var yn=function(e){return 1===e.length&&(e=function ascendingComparator(e){return function(t,n){return St(e(t),n)}}(e)),{left:function left(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function right(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}};function Window(e){Transform.call(this,{},e),this._mlen=0,this._mods=[]}Window.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mn.concat(bt)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};var _n=Object(V.y)(Window,Transform);function processPartition(e,t,n,r){var i=r.sort,a=i&&!r.ignorePeers,o=r.frame||[null,0],s=e.data(n),u=s.length,l=0,c=a?yn(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||Object(V.l)(-1)};for(t.init();l<u;++l)setWindow(f,o,l,u),a&&adjustRange(f,c),t.update(f,s[l])}function setWindow(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function adjustRange(e,t){var n=e.i0,r=e.i1-1,i=e.compare,a=e.data,o=a.length-1;n>0&&!i(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),r<o&&!i(a[r],a[r+1])&&(e.i1=t.right(a,a[r]))}_n.transform=function(e,t){var n,r,i=this,a=i.state,o=e.modified(),s=stableCompare(e.sort);this.stamp=t.stamp,a&&!o||(a=i.state=new WindowState(e));var u=groupkey(e.groupby);function group(e){return i.group(u(e))}for(o||t.modified(a.inputs)?(i.value={},t.visit(t.SOURCE,(function(e){group(e).add(e)}))):(t.visit(t.REM,(function(e){group(e).remove(e)})),t.visit(t.ADD,(function(e){group(e).add(e)}))),n=0,r=i._mlen;n<r;++n)processPartition(i._mods[n],a,s,e);return i._mlen=0,i._mods=[],t.reflow(o).modifies(a.outputs)},_n.group=function(e){var t=this.value[e];return t||((t=this.value[e]=Jt(tupleid)).stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t};var bn="top",xn="left",wn="right",kn="bottom",Sn="top-left",En="top-right",Tn="bottom-left",Cn="bottom-right",On="start",An="middle",Rn="end",Dn="x",Pn="y",Mn="group",jn="axis",Fn="title",In="frame",Ln="scope",Nn="legend",Bn="row-header",Un="row-footer",zn="row-title",qn="column-header",Wn="column-footer",Gn="column-title",Hn="padding",Vn="symbol",Yn="fit",$n="fit-x",Xn="fit-y",Kn="pad",Jn="none",Zn="all",Qn="each",er="flush",tr="column",nr="row";function Bounds(e){this.clear(),e&&this.union(e)}var rr=Bounds.prototype;rr.clone=function(){return new Bounds(this)},rr.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},rr.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},rr.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},rr.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},rr.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},rr.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},rr.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},rr.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rr.rotate=function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rr.rotatedPoints=function(e,t,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*o+l,u*r+s*o+c,s*a-u*i+l,u*a+s*i+c,s*a-u*o+l,u*a+s*o+c]},rr.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},rr.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},rr.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},rr.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},rr.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},rr.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},rr.width=function(){return this.x2-this.x1},rr.height=function(){return this.y2-this.y1};var ar=0,or="p_";function isGradient(e){return e&&e.gradient}function gradientRef(e,t,n){var r=e.id,i=e.gradient,a="radial"===i?or:"";return r||(r=e.id="gradient_"+ar++,"radial"===i?(e.x1=Gradient_get(e.x1,.5),e.y1=Gradient_get(e.y1,.5),e.r1=Gradient_get(e.r1,0),e.x2=Gradient_get(e.x2,.5),e.y2=Gradient_get(e.y2,.5),e.r2=Gradient_get(e.r2,.5),a=or):(e.x1=Gradient_get(e.x1,0),e.y1=Gradient_get(e.y1,0),e.x2=Gradient_get(e.x2,1),e.y2=Gradient_get(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Gradient_get(e,t){return null!=e?e:t}function Item(e){this.mark=e,this.bounds=this.bounds||new Bounds}function GroupItem(e){Item.call(this,e),this.items=this.items||[]}function domCanvas(e,t){if("undefined"!==typeof document&&document.createElement){var n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}function domImage(){return"undefined"!==typeof Image?Image:null}Object(V.y)(GroupItem,Item);var sr=/^([A-Za-z]+:)?\/\//,ur=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,lr=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,cr="file://";function loader_load(e,t){return src_loader_load.apply(this,arguments)}function src_loader_load(){return(src_loader_load=Object(Y.a)(A.a.mark((function _callee2(e,t){var n,r;return A.a.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sanitize(e,t);case 2:return n=i.sent,r=n.href,i.abrupt("return",n.localFile?this.file(r):this.http(r,t));case 5:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}function loader_sanitize(e,t){return src_loader_sanitize.apply(this,arguments)}function src_loader_sanitize(){return(src_loader_sanitize=Object(Y.a)(A.a.mark((function _callee3(e,t){var n,r,i,a,o,s,u;return A.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(V.o)({},this.options,t),n=this.fileAccess,r={href:null},s=ur.test(e.replace(lr,"")),null!=e&&"string"===typeof e&&s||Object(V.n)("Sanitize failure, invalid URI: "+Object(V.X)(e)),u=sr.test(e),(o=t.baseURL)&&!u&&(e.startsWith("/")||"/"===o[o.length-1]||(e="/"+e),e=o+e),a=(i=e.startsWith(cr))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(cr.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee3,this)})))).apply(this,arguments)}function loader_fileLoader(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:loader_fileReject}function loader_fileReject(){return src_loader_fileReject.apply(this,arguments)}function src_loader_fileReject(){return(src_loader_fileReject=Object(Y.a)(A.a.mark((function _callee4(){return A.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No file system access.");case 1:case"end":return e.stop()}}),_callee4)})))).apply(this,arguments)}function loader_httpLoader(e){return e?function(){var t=Object(Y.a)(A.a.mark((function _callee(t,n){var r,i,a;return A.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(V.o)({},this.options.http,n),i=n&&n.response,o.next=4,e(t,r);case 4:return a=o.sent,o.abrupt("return",a.ok?Object(V.D)(a[i])?a[i]():a.text():Object(V.n)(a.status+""+a.statusText));case 6:case"end":return o.stop()}}),_callee,this)})));return function(e,n){return t.apply(this,arguments)}}():loader_httpReject}function loader_httpReject(){return src_loader_httpReject.apply(this,arguments)}function src_loader_httpReject(){return(src_loader_httpReject=Object(Y.a)(A.a.mark((function _callee5(){return A.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),_callee5)})))).apply(this,arguments)}V.Y,V.ab,V.ab,V.Z,V.cb,V.x;function dsv_delimitedFormat(e){var t=function parse(t,n){var r={delimiter:e};return formats_dsv_dsv(t,n?Object(V.o)(n,r):r)};return t.responseType="text",t}function formats_dsv_dsv(e,t){return t.header&&(e=t.header.map(V.X).join(t.delimiter)+"\n"+e),me(t.delimiter).parse(e+"")}formats_dsv_dsv.responseType="text";var fr=n(80),dr={interior:function interior(e,t){return e!==t},exterior:function exterior(e,t){return e===t}};function topojson_topojson(e,t){var n,r,i,a;return e=Object(fr.a)(e,t),t&&t.feature?(n=ke,i=t.feature):t&&t.mesh?(n=Ee,i=t.mesh,a=dr[t.filter]):Object(V.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,a):Object(V.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}topojson_topojson.responseType="json";dsv_delimitedFormat(","),dsv_delimitedFormat("\t"),fr.a;var hr=function(e,t){return function(n){return{options:n||{},sanitize:loader_sanitize,load:loader_load,fileAccess:!!t,file:loader_fileLoader(t),http:loader_httpLoader(e)}}}("undefined"!==typeof fetch&&fetch,null);function ResourceLoader(e){this._pending=0,this._loader=e||hr()}var pr=ResourceLoader.prototype;function increment(e){e._pending+=1}function decrement(e){e._pending-=1}pr.pending=function(){return this._pending},pr.sanitizeURL=function(e){var t=this;return increment(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return decrement(t),e})).catch((function(){return decrement(t),null}))},pr.loadImage=function(e){var t=this,n=domImage();return increment(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){decrement(t),i.loaded=!0},i.onerror=function(){decrement(t),i.loaded=!1},i.src=r,i})).catch((function(e){return decrement(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}}))},pr.ready=function(){var e=this;return new Promise((function(t){!function poll(n){e.pending()?setTimeout((function(){poll(!0)}),10):t(n)}(!1)}))};var gr=Math.PI,mr=2*gr,vr=mr-1e-6;function path_Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path_path(){return new path_Path}path_Path.prototype=path_path.prototype={constructor:path_Path,moveTo:function moveTo(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function lineTo(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function quadraticCurveTo(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function bezierCurveTo(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function arcTo(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-e,u=r-t,l=a-e,c=o-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var d=n-a,h=r-o,p=s*s+u*u,g=d*d+h*h,m=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((gr-Math.acos((p+f-g)/(2*m*v)))/2),_=y/v,b=y/m;Math.abs(_-1)>1e-6&&(this._+="L"+(e+_*l)+","+(t+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+b*s)+","+(this._y1=t+b*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function arc(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+o,l=t+s,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%mr+mr),f>vr?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=gr)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function rect(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function toString(){return this._}};var yr=path_path,_r=function(e){return function constant(){return e}},br=Math.abs,xr=Math.atan2,wr=Math.cos,kr=Math.max,Sr=Math.min,Er=Math.sin,Tr=Math.sqrt,Cr=1e-12,Or=Math.PI,Ar=Or/2,Rr=2*Or;function asin(e){return e>=1?Ar:e<=-1?-Ar:Math.asin(e)}function arcInnerRadius(e){return e.innerRadius}function arcOuterRadius(e){return e.outerRadius}function arcStartAngle(e){return e.startAngle}function arcEndAngle(e){return e.endAngle}function arcPadAngle(e){return e&&e.padAngle}function cornerTangents(e,t,n,r,i,a,o){var s=e-n,u=t-r,l=(o?a:-a)/Tr(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,v=(h+g)/2,y=p-d,_=g-h,b=y*y+_*_,x=i-a,w=d*g-p*h,k=(_<0?-1:1)*Tr(kr(0,x*x*b-w*w)),S=(w*_-y*k)/b,E=(-w*y-_*k)/b,T=(w*_+y*k)/b,C=(-w*y+_*k)/b,O=S-m,A=E-v,R=T-m,D=C-v;return O*O+A*A>R*R+D*D&&(S=T,E=C),{cx:S,cy:E,x01:-c,y01:-f,x11:S*(i/x-1),y11:E*(i/x-1)}}var Dr=function(){var e=arcInnerRadius,t=arcOuterRadius,n=_r(0),r=null,i=arcStartAngle,a=arcEndAngle,o=arcPadAngle,s=null;function arc(){var u,l,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-Ar,h=a.apply(this,arguments)-Ar,p=br(h-d),g=h>d;if(s||(s=u=yr()),f<c&&(l=f,f=c,c=l),f>Cr)if(p>Rr-Cr)s.moveTo(f*wr(d),f*Er(d)),s.arc(0,0,f,d,h,!g),c>Cr&&(s.moveTo(c*wr(h),c*Er(h)),s.arc(0,0,c,h,d,g));else{var m,v,y=d,_=h,b=d,x=h,w=p,k=p,S=o.apply(this,arguments)/2,E=S>Cr&&(r?+r.apply(this,arguments):Tr(c*c+f*f)),T=Sr(br(f-c)/2,+n.apply(this,arguments)),C=T,O=T;if(E>Cr){var A=asin(E/c*Er(S)),R=asin(E/f*Er(S));(w-=2*A)>Cr?(b+=A*=g?1:-1,x-=A):(w=0,b=x=(d+h)/2),(k-=2*R)>Cr?(y+=R*=g?1:-1,_-=R):(k=0,y=_=(d+h)/2)}var D=f*wr(y),P=f*Er(y),M=c*wr(x),j=c*Er(x);if(T>Cr){var F,I=f*wr(_),L=f*Er(_),N=c*wr(b),B=c*Er(b);if(p<Or&&(F=function arc_intersect(e,t,n,r,i,a,o,s){var u=n-e,l=r-t,c=o-i,f=s-a,d=f*u-c*l;if(!(d*d<Cr))return[e+(d=(c*(t-a)-f*(e-i))/d)*u,t+d*l]}(D,P,N,B,I,L,M,j))){var U=D-F[0],z=P-F[1],q=I-F[0],W=L-F[1],G=1/Er(function acos(e){return e>1?0:e<-1?Or:Math.acos(e)}((U*q+z*W)/(Tr(U*U+z*z)*Tr(q*q+W*W)))/2),H=Tr(F[0]*F[0]+F[1]*F[1]);C=Sr(T,(c-H)/(G-1)),O=Sr(T,(f-H)/(G+1))}}k>Cr?O>Cr?(m=cornerTangents(N,B,D,P,f,O,g),v=cornerTangents(I,L,M,j,f,O,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),O<T?s.arc(m.cx,m.cy,O,xr(m.y01,m.x01),xr(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,O,xr(m.y01,m.x01),xr(m.y11,m.x11),!g),s.arc(0,0,f,xr(m.cy+m.y11,m.cx+m.x11),xr(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,O,xr(v.y11,v.x11),xr(v.y01,v.x01),!g))):(s.moveTo(D,P),s.arc(0,0,f,y,_,!g)):s.moveTo(D,P),c>Cr&&w>Cr?C>Cr?(m=cornerTangents(M,j,I,L,c,-C,g),v=cornerTangents(D,P,N,B,c,-C,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),C<T?s.arc(m.cx,m.cy,C,xr(m.y01,m.x01),xr(v.y01,v.x01),!g):(s.arc(m.cx,m.cy,C,xr(m.y01,m.x01),xr(m.y11,m.x11),!g),s.arc(0,0,c,xr(m.cy+m.y11,m.cx+m.x11),xr(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,C,xr(v.y11,v.x11),xr(v.y01,v.x01),!g))):s.arc(0,0,c,x,b,g):s.lineTo(M,j)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return arc.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Or/2;return[wr(r)*n,Er(r)*n]},arc.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:_r(+t),arc):e},arc.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:_r(+e),arc):t},arc.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:_r(+e),arc):n},arc.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:_r(+e),arc):r},arc.startAngle=function(e){return arguments.length?(i="function"===typeof e?e:_r(+e),arc):i},arc.endAngle=function(e){return arguments.length?(a="function"===typeof e?e:_r(+e),arc):a},arc.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:_r(+e),arc):o},arc.context=function(e){return arguments.length?(s=null==e?null:e,arc):s},arc};function Linear(e){this._context=e}Linear.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Pr=function(e){return new Linear(e)};function point_x(e){return e[0]}function point_y(e){return e[1]}var Mr=function(){var e=point_x,t=point_y,n=_r(!0),r=null,i=Pr,a=null;function line(o){var s,u,l,c=o.length,f=!1;for(null==r&&(a=i(l=yr())),s=0;s<=c;++s)!(s<c&&n(u=o[s],s,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(u,s,o),+t(u,s,o));if(l)return a=null,l+""||null}return line.x=function(t){return arguments.length?(e="function"===typeof t?t:_r(+t),line):e},line.y=function(e){return arguments.length?(t="function"===typeof e?e:_r(+e),line):t},line.defined=function(e){return arguments.length?(n="function"===typeof e?e:_r(!!e),line):n},line.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),line):i},line.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),line):r},line},jr=function(){var e=point_x,t=null,n=_r(0),r=point_y,i=_r(!0),a=null,o=Pr,s=null;function area(u){var l,c,f,d,h,p=u.length,g=!1,m=new Array(p),v=new Array(p);for(null==a&&(s=o(h=yr())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===g)if(g=!g)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(m[f],v[f]);s.lineEnd(),s.areaEnd()}g&&(m[l]=+e(d,l,u),v[l]=+n(d,l,u),s.point(t?+t(d,l,u):m[l],r?+r(d,l,u):v[l]))}if(h)return s=null,h+""||null}function arealine(){return Mr().defined(i).curve(o).context(a)}return area.x=function(n){return arguments.length?(e="function"===typeof n?n:_r(+n),t=null,area):e},area.x0=function(t){return arguments.length?(e="function"===typeof t?t:_r(+t),area):e},area.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:_r(+e),area):t},area.y=function(e){return arguments.length?(n="function"===typeof e?e:_r(+e),r=null,area):n},area.y0=function(e){return arguments.length?(n="function"===typeof e?e:_r(+e),area):n},area.y1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:_r(+e),area):r},area.lineX0=area.lineY0=function(){return arealine().x(e).y(n)},area.lineY1=function(){return arealine().x(e).y(r)},area.lineX1=function(){return arealine().x(t).y(n)},area.defined=function(e){return arguments.length?(i="function"===typeof e?e:_r(!!e),area):i},area.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),area):o},area.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),area):a},area};curveRadial(Pr);function Radial(e){this._curve=e}function curveRadial(e){function radial(t){return new Radial(e(t))}return radial._curve=e,radial}Radial.prototype={areaStart:function areaStart(){this._curve.areaStart()},areaEnd:function areaEnd(){this._curve.areaEnd()},lineStart:function lineStart(){this._curve.lineStart()},lineEnd:function lineEnd(){this._curve.lineEnd()},point:function point(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};Array.prototype.slice;var Fr={draw:function draw(e,t){var n=Math.sqrt(t/Or);e.moveTo(n,0),e.arc(0,0,n,0,Rr)}},Ir=(Math.sqrt(1/3),Math.sin(Or/10)/Math.sin(7*Or/10)),Lr=(Math.sin(Rr/10),Math.cos(Rr/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){var e=_r(Fr),t=_r(64),n=null;function symbol(){var r;if(n||(n=r=yr()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return symbol.type=function(t){return arguments.length?(e="function"===typeof t?t:_r(t),symbol):e},symbol.size=function(e){return arguments.length?(t="function"===typeof e?e:_r(+e),symbol):t},symbol.context=function(e){return arguments.length?(n=null==e?null:e,symbol):n},symbol}),Nr=function(){};function basis_point(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 3:basis_point(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:basis_point(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Br=function(e){return new Basis(e)};function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:Nr,areaEnd:Nr,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:basis_point(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Ur=function(e){return new BasisClosed(e)};function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:basis_point(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var zr=function(e){return new BasisOpen(e)};function Bundle(e,t){this._basis=new Basis(e),this._beta=t}Bundle.prototype={lineStart:function lineStart(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function lineEnd(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,s=t[n]-a,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*o),this._beta*t[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function point(e,t){this._x.push(+e),this._y.push(+t)}};var qr=function custom(e){function bundle(t){return 1===e?new Basis(t):new Bundle(t,e)}return bundle.beta=function(e){return custom(+e)},bundle}(.85);function cardinal_point(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Cardinal(e,t){this._context=e,this._k=(1-t)/6}Cardinal.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cardinal_point(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:cardinal_point(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Wr=function custom(e){function cardinal(t){return new Cardinal(t,e)}return cardinal.tension=function(e){return custom(+e)},cardinal}(0);function CardinalClosed(e,t){this._context=e,this._k=(1-t)/6}CardinalClosed.prototype={areaStart:Nr,areaEnd:Nr,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cardinal_point(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Gr=function custom(e){function cardinal(t){return new CardinalClosed(t,e)}return cardinal.tension=function(e){return custom(+e)},cardinal}(0);function CardinalOpen(e,t){this._context=e,this._k=(1-t)/6}CardinalOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cardinal_point(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Hr=function custom(e){function cardinal(t){return new CardinalOpen(t,e)}return cardinal.tension=function(e){return custom(+e)},cardinal}(0);function catmullRom_point(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>Cr){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Cr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function CatmullRom(e,t){this._context=e,this._alpha=t}CatmullRom.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:catmullRom_point(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Vr=function custom(e){function catmullRom(t){return e?new CatmullRom(t,e):new Cardinal(t,0)}return catmullRom.alpha=function(e){return custom(+e)},catmullRom}(.5);function CatmullRomClosed(e,t){this._context=e,this._alpha=t}CatmullRomClosed.prototype={areaStart:Nr,areaEnd:Nr,lineStart:function lineStart(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function point(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:catmullRom_point(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Yr=function custom(e){function catmullRom(t){return e?new CatmullRomClosed(t,e):new CardinalClosed(t,0)}return catmullRom.alpha=function(e){return custom(+e)},catmullRom}(.5);function CatmullRomOpen(e,t){this._context=e,this._alpha=t}CatmullRomOpen.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function lineEnd(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:catmullRom_point(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $r=function custom(e){function catmullRom(t){return e?new CatmullRomOpen(t,e):new CardinalOpen(t,0)}return catmullRom.alpha=function(e){return custom(+e)},catmullRom}(.5);function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:Nr,areaEnd:Nr,lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){this._point&&this._context.closePath()},point:function point(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};var Xr=function(e){return new LinearClosed(e)};function monotone_sign(e){return e<0?-1:1}function slope3(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(monotone_sign(a)+monotone_sign(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function monotone_point(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function MonotoneX(e){this._context=e}function MonotoneY(e){this._context=new ReflectContext(e)}function ReflectContext(e){this._context=e}function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}function controlPoints(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}MonotoneX.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function lineEnd(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:monotone_point(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function point(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,monotone_point(this,slope2(this,n=slope3(this,e,t)),n);break;default:monotone_point(this,this._t0,n=slope3(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)},ReflectContext.prototype={moveTo:function moveTo(e,t){this._context.moveTo(t,e)},closePath:function closePath(){this._context.closePath()},lineTo:function lineTo(e,t){this._context.lineTo(t,e)},bezierCurveTo:function bezierCurveTo(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Natural.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x=[],this._y=[]},lineEnd:function lineEnd(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=controlPoints(e),i=controlPoints(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function point(e,t){this._x.push(+e),this._y.push(+t)}};var Kr=function(e){return new Natural(e)};function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function areaStart(){this._line=0},areaEnd:function areaEnd(){this._line=NaN},lineStart:function lineStart(){this._x=this._y=NaN,this._point=0},lineEnd:function lineEnd(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Jr=function(e){return new Step(e,.5)};function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}var Zr={basis:{curve:Br},"basis-closed":{curve:Ur},"basis-open":{curve:zr},bundle:{curve:qr,tension:"beta",value:.85},cardinal:{curve:Wr,tension:"tension",value:0},"cardinal-open":{curve:Hr,tension:"tension",value:0},"cardinal-closed":{curve:Gr,tension:"tension",value:0},"catmull-rom":{curve:Vr,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Yr,tension:"alpha",value:.5},"catmull-rom-open":{curve:$r,tension:"alpha",value:.5},linear:{curve:Pr},"linear-closed":{curve:Xr},monotone:{horizontal:monotoneY,vertical:monotoneX},natural:{curve:Kr},step:{curve:Jr},"step-after":{curve:stepAfter},"step-before":{curve:stepBefore}};function curves(e,t,n){var r=Object(V.v)(Zr,e)&&Zr[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var Qr={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},ei=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],ti=function(e){var t,n,r,i,a,o,s,u,l,c,f,d=[];for(u=0,c=(t=e.slice().replace(ei[0],"###$1").split(ei[1]).slice(1)).length;u<c;++u){for(r=(n=t[u]).slice(1).trim().replace(ei[2],"$1###$2").split(ei[3]),i=[o=n.charAt(0)],l=0,f=r.length;l<f;++l)(a=+r[l])===a&&i.push(a);if(s=Qr[o.toLowerCase()],i.length-1>s)for(l=1,f=i.length;l<f;l+=s)d.push([o].concat(i.slice(l,l+s)));else d.push(i)}return d},ni=Math.PI/180,ri=Math.PI/2,ii=2*Math.PI,ai=Math.sqrt(3)/2,oi={},si={},ui=[].join;function bezier(e){var t=ui.call(e);if(si[t])return si[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=l*o,f=-u*s,d=u*o,h=l*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),_=Math.sin(.5*y),b=8/3*_*_/Math.sin(y),x=n+p-b*g,w=r+g+b*p,k=n+m,S=r+v,E=k+b*v,T=S-b*m;return si[t]=[c*x+f*w,d*x+h*w,c*E+f*T,d*E+h*T,c*k+f*S,d*k+h*S]}var li=["l",0,0,0,0,0,0,0];function render_scale(e,t){var n=li[0]=e[0];if("a"===n||"A"===n)li[1]=t*e[1],li[2]=t*e[2],li[3]=e[3],li[4]=e[4],li[5]=e[5],li[6]=t*e[6],li[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)li[r]=t*e[r];return li}var ci=function(e,t,n,r,i){var a,o,s,u,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=render_scale(a,i)),a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+r);break;case"h":f+=a[1],e.lineTo(f+n,d+r);break;case"H":f=a[1],e.lineTo(f+n,d+r);break;case"v":d+=a[1],e.lineTo(f+n,d+r);break;case"V":d=a[1],e.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+r);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+r,h+n,p+r,o+n,s+r),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,f+n,d+r);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,f+a[1]+n,d+a[2]+r,o+n,s+r),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-u,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),u=h,l=p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),d=s,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"a":drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}};function drawArc(e,t,n,r){for(var i=function arc_segments(e,t,n,r,i,a,o,s,u){var l=ui.call(arguments);if(oi[l])return oi[l];var c=o*ni,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=f/n,y=-f/r,_=d/r,b=m*s+v*u,x=y*s+_*u,w=m*e+v*t,k=y*e+_*t,S=1/((w-b)*(w-b)+(k-x)*(k-x))-.25;S<0&&(S=0);var E=Math.sqrt(S);a==i&&(E=-E);var T=.5*(b+w)-E*(k-x),C=.5*(x+k)+E*(w-b),O=Math.atan2(x-C,b-T),A=Math.atan2(k-C,w-T)-O;A<0&&1===a?A+=ii:A>0&&0===a&&(A-=ii);for(var R=Math.ceil(Math.abs(A/(ri+.001))),D=[],P=0;P<R;++P){var M=O+P*A/R,j=O+(P+1)*A/R;D[P]=[T,C,M,j,n,r,f,d]}return oi[l]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=bezier(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var fi={circle:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ii)}},cross:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function draw(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ai*n,i=r-.5773502691896257*n,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ai*n,i=r-.5773502691896257*n;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ai*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ai*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ai*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ai*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function symbols_symbols(e){return Object(V.v)(fi,e)?fi[e]:function customSymbol(e){if(!Object(V.v)(di,e)){var t=ti(e);di[e]={draw:function draw(e,n){ci(e,t,0,0,Math.sqrt(n)/2)}}}return di[e]}(e)}var di={};function rectangleX(e){return e.x}function rectangleY(e){return e.y}function rectangleWidth(e){return e.width}function rectangleHeight(e){return e.height}function rectangle_constant(e){return function(){return e}}function shapes_x(e){return e.x||0}function shapes_y(e){return e.y||0}function shapes_cr(e){return e.cornerRadius||0}function shapes_def(e){return!(!1===e.defined)}var hi=Dr().startAngle((function shapes_sa(e){return e.startAngle||0})).endAngle((function shapes_ea(e){return e.endAngle||0})).padAngle((function shapes_pa(e){return e.padAngle||0})).innerRadius((function ir(e){return e.innerRadius||0})).outerRadius((function shapes_or(e){return e.outerRadius||0})).cornerRadius(shapes_cr),pi=jr().x(shapes_x).y1(shapes_y).y0((function yh(e){return(e.y||0)+(e.height||0)})).defined(shapes_def),gi=jr().y(shapes_y).x1(shapes_x).x0((function xw(e){return(e.x||0)+(e.width||0)})).defined(shapes_def),mi=Mr().x(shapes_x).y(shapes_y).defined(shapes_def),vi=function(){var e=rectangleX,t=rectangleY,n=rectangleWidth,r=rectangleHeight,i=rectangle_constant(0),a=null;function rectangle(o,s,u){var l,c=null!=s?s:+e.call(this,o),f=null!=u?u:+t.call(this,o),d=+n.call(this,o),h=+r.call(this,o),p=+i.call(this,o);if(a||(a=l=yr()),p<=0)a.rect(c,f,d,h);else{var g=c+d,m=f+h;a.moveTo(c+p,f),a.lineTo(g-p,f),a.quadraticCurveTo(g,f,g,f+p),a.lineTo(g,m-p),a.quadraticCurveTo(g,m,g-p,m),a.lineTo(c+p,m),a.quadraticCurveTo(c,m,c,m-p),a.lineTo(c,f+p),a.quadraticCurveTo(c,f,c+p,f),a.closePath()}if(l)return a=null,l+""||null}return rectangle.x=function(t){return arguments.length?(e="function"===typeof t?t:rectangle_constant(+t),rectangle):e},rectangle.y=function(e){return arguments.length?(t="function"===typeof e?e:rectangle_constant(+e),rectangle):t},rectangle.width=function(e){return arguments.length?(n="function"===typeof e?e:rectangle_constant(+e),rectangle):n},rectangle.height=function(e){return arguments.length?(r="function"===typeof e?e:rectangle_constant(+e),rectangle):r},rectangle.cornerRadius=function(e){return arguments.length?(i="function"===typeof e?e:rectangle_constant(+e),rectangle):i},rectangle.context=function(e){return arguments.length?(a=null==e?null:e,rectangle):a},rectangle}().x(shapes_x).y(shapes_y).width((function shapes_w(e){return e.width||0})).height((function shapes_h(e){return e.height||0})).cornerRadius(shapes_cr),yi=Lr().type((function shapes_type(e){return symbols_symbols(e.shape||"circle")})).size((function shapes_size(e){return null==e.size?64:e.size})),_i=function(){var e,t,n,r,i,a,o,s,u=null;function point(e,t,n){var r=n/2;if(i){var l=o-t,c=e-a;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(a-d,o-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(e,t,r,0,ii);u.closePath()}else i=1;a=e,o=t,s=r}function trail(a){var o,s,l,c=a.length,f=!1;for(null==u&&(u=l=yr()),o=0;o<=c;++o)!(o<c&&r(s=a[o],o,a))===f&&(f=!f)&&(i=0),f&&point(+e(s,o,a),+t(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return trail.x=function(t){return arguments.length?(e=t,trail):e},trail.y=function(e){return arguments.length?(t=e,trail):t},trail.size=function(e){return arguments.length?(n=e,trail):n},trail.defined=function(e){return arguments.length?(r=e,trail):r},trail.context=function(e){return arguments.length?(u=null==e?null:e,trail):u},trail}().x(shapes_x).y(shapes_y).defined(shapes_def).size((function ts(e){return e.size||1}));function shapes_rectangle(e,t,n,r){return vi.context(e)(t,n,r)}var bi,xi=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e},wi=ii-1e-8;function boundContext_context(e){return bi=e,boundContext_context}function boundContext_noop(){}function boundContext_add(e,t){bi.add(e,t)}boundContext_context.beginPath=boundContext_noop,boundContext_context.closePath=boundContext_noop,boundContext_context.moveTo=boundContext_add,boundContext_context.lineTo=boundContext_add,boundContext_context.rect=function(e,t,n,r){boundContext_add(e,t),boundContext_add(e+n,t+r)},boundContext_context.quadraticCurveTo=function(e,t,n,r){boundContext_add(e,t),boundContext_add(n,r)},boundContext_context.bezierCurveTo=function(e,t,n,r,i,a){boundContext_add(e,t),boundContext_add(n,r),boundContext_add(i,a)},boundContext_context.arc=function(e,t,n,r,i,a){if(Math.abs(i-r)>wi)return boundContext_add(e-n,t-n),void boundContext_add(e+n,t+n);var o,s,u,l,c=1/0,f=-1/0,d=1/0,h=-1/0;function update(e){u=n*Math.cos(e),l=n*Math.sin(e),u<c&&(c=u),u>f&&(f=u),l<d&&(d=l),l>h&&(h=l)}if(update(r),update(i),i!==r)if((r%=ii)<0&&(r+=ii),(i%=ii)<0&&(i+=ii),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=ii,o=r-r%ri,s=0;s<4&&o>i;++s,o-=ri)update(o);else for(o=r-r%ri+ri,s=0;s<4&&o<i;++s,o+=ri)update(o);boundContext_add(e+c,t+d),boundContext_add(e+f,t+h)};var ki=(ki=domCanvas(1,1))?ki.getContext("2d"):null,Si=new Bounds;function intersectPath(e){return function(t,n){if(!ki)return!0;e(ki,t),Si.clear().union(t.bounds).intersect(n).round();for(var r=Si.x1,i=Si.y1,a=Si.x2,o=Si.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(ki.isPointInPath(u,s))return!0;return!1}}function intersectPoint(e,t){return t.contains(e.x||0,e.y||0)}function intersectRect(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return t.intersects(Si.set(n,r,n+i,r+a))}function intersectBoxLine(e,t,n,r,i){var a,o,s,u,l=e.x1,c=e.y1,f=e.x2,d=e.y2,h=r-t,p=i-n,g=0,m=1;for(u=0;u<4;++u){if(0===u&&(a=-h,o=-(l-t)),1===u&&(a=h,o=f-t),2===u&&(a=-p,o=-(c-n)),3===u&&(a=p,o=d-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>m)return!1;s>g&&(g=s)}else if(a>0){if(s<g)return!1;s<m&&(m=s)}}return!0}var Ei=function(e,t,n){return isGradient(n)?function(e,t,n){for(var r=n.width(),i=n.height(),a=t.stops,o=a.length,s="radial"===t.gradient?e.createRadialGradient(n.x1+(t.x1||.5)*r,n.y1+(t.y1||.5)*i,Math.max(r,i)*(t.r1||0),n.x1+(t.x2||.5)*r,n.y1+(t.y2||.5)*i,Math.max(r,i)*(t.r2||.5)):e.createLinearGradient(n.x1+(t.x1||0)*r,n.y1+(t.y1||0)*i,n.x1+(t.x2||1)*r,n.y1+(t.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(e,n,t.bounds):n},Ti=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=Ei(e,t,t.fill),!0)},Ci=[],Oi=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=Ei(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Ci),e.lineDashOffset=t.strokeDashOffset||0),!0))};function visit_compare(e,t){return e.zindex-t.zindex||e.index-t.index}function zorder(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(visit_compare)}function visit_visit(e,t){var n,r,i=e.items;if(i&&i.length){var a=zorder(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function pickVisit(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=zorder(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function drawAll(e){return function(t,n,r){visit_visit(n,(function(n){r&&!r.intersects(n.bounds)||drawPath(e,t,n,n)}))}}function drawPath(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Ti(t,n,i)&&t.fill(),n.stroke&&Oi(t,n,i)&&t.stroke()))}function pick_pick(e){return e=e||V.eb,function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,pickVisit(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return e(t,n,r,i,a,o)?n:void 0}))}}function hitPath(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function pickPath(e){return pick_pick(hitPath(e))}function transform_translate(e,t){return"translate("+e+","+t+")"}function transform_rotate(e){return"rotate("+e+")"}function translateItem(e){return transform_translate(e.x||0,e.y||0)}var Ai=function(e,t,n){function draw(e,n){var r=n.x||0,i=n.y||0,a=n.angle||0;e.translate(r,i),a&&e.rotate(a*=ni),e.beginPath(),t(e,n),a&&e.rotate(-a),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function attr(e,n){e("transform",function transformItem(e){return transform_translate(e.x||0,e.y||0)+(e.angle?" "+transform_rotate(e.angle):"")}(n)),e("d",t(null,n))},bound:function bound(e,n){var r=n.x||0,i=n.y||0;return t(boundContext_context(e),n),xi(e,n).translate(r,i),n.angle&&e.rotate(n.angle*ni,r,i),e},draw:drawAll(draw),pick:pickPath(draw),isect:n||intersectPath(draw)}},Ri=Ai("arc",(function shapes_arc(e,t){return hi.context(e)(t)}));var Di=function(e,t,n){function draw(e,n){e.beginPath(),t(e,n)}var r,i=hitPath(draw);return{type:e,tag:"path",nested:!0,attr:function attr(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function bound(e,n){var r=n.items;return 0===r.length?e:(t(boundContext_context(e),r),xi(e,r[0]))},draw:(r=draw,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||drawPath(r,e,t.items[0],t.items)}),pick:function pick(e,t,n,r,a,o){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:intersectPoint,tip:n}},Pi=Di("area",(function shapes_area(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?gi:pi).curve(curves(r,n.orient,n.tension)).context(e)(t)}),(function pickArea(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,s=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][a]-i))<s&&(s=r,n=e[o]);return n})),Mi=1;var ji=function(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Mi++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(V.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},Fi=.5;function backgroundPath(e,t){var n=t.stroke?Fi:0;e.beginPath(),shapes_rectangle(e,t,n,n)}var Ii=hitPath(backgroundPath);var Li={type:"group",tag:"g",nested:!1,attr:function group_attr(e,t){e("transform",translateItem(t))},bound:function group_bound(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),xi(e,t),e.translate(t.x||0,t.y||0)},draw:function group_draw(e,t,n){var r=this;visit_visit(t,(function(t){var i,a=t.x||0,o=t.y||0,s=t.width||0,u=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity)>0&&(backgroundPath(e,t),t.fill&&Ti(e,t,i)&&e.fill(),t.stroke&&Oi(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,s,u),e.clip()),n&&n.translate(-a,-o),visit_visit(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,o),e.restore()}))},pick:function group_pick(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,s=n*e.pixelRatio,u=r*e.pixelRatio;return pickVisit(t,(function(l){var c,f,d,h;if(!(h=l.bounds)||h.contains(i,a))return f=l.x||0,d=l.y||0,e.save(),e.translate(f,d),f=i-f,d=a-d,!(c=pickVisit(l,(function(e){return function pickMark(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&!1!==t.interactive&&(l.fill||l.stroke)&&Ii(e,l,s,u)&&(c=l),e.restore(),c||null}))},isect:intersectRect,background:function background(e,t){var n=t.stroke?Fi:0;e("class","background"),e("d",shapes_rectangle(null,t,n,n))},foreground:function foreground(e,t,n){e("clip-path",t.clip?ji(n,t,t):null)}};function getImage(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function imageXOffset(e,t){return"center"===e?t/2:"right"===e?t:0}function imageYOffset(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Ni={type:"image",tag:"image",nested:!1,attr:function image_attr(e,t,n){var r=getImage(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,s=(null!=t.height?t.height:r.height)||0,u=!1===t.aspect?"none":"xMidYMid";i-=imageXOffset(t.align,o),a-=imageYOffset(t.baseline,s),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",transform_translate(i,a)),e("width",o),e("height",s),e("preserveAspectRatio",u)},bound:function image_bound(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=imageXOffset(t.align,a),i-=imageYOffset(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function image_draw(e,t,n){var r=this;visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var i,a,o,s,u=getImage(t,r),l=t.x||0,c=t.y||0,f=(null!=t.width?t.width:u.width)||0,d=(null!=t.height?t.height:u.height)||0;l-=imageXOffset(t.align,f),c-=imageYOffset(t.baseline,d),!1!==t.aspect&&(a=u.width/u.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(c+=(d-(s=f/a))/2,d=s):(l+=(f-(s=d*a))/2,f=s))),u.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(u,l,c,f,d))}}))},pick:pick_pick(),isect:V.eb,get:getImage,xOffset:imageXOffset,yOffset:imageYOffset},Bi=Di("line",(function shapes_line(e,t){var n=t[0],r=n.interpolate||"linear";return mi.curve(curves(r,n.orient,n.tension)).context(e)(t)}),(function pickLine(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}));function marks_path_path(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=ti(n)).path=n),ci(e,r,t.x,t.y)}var Ui={type:"path",tag:"path",nested:!1,attr:function path_attr(e,t){e("transform",translateItem(t)),e("d",t.path)},bound:function path_bound(e,t){return marks_path_path(boundContext_context(e),t)?e.set(0,0,0,0):xi(e,t)},draw:drawAll(marks_path_path),pick:pickPath(marks_path_path),isect:intersectPath(marks_path_path)};function rect_draw(e,t){e.beginPath(),shapes_rectangle(e,t)}var zi={type:"rect",tag:"path",nested:!1,attr:function rect_attr(e,t){e("d",shapes_rectangle(null,t))},bound:function rect_bound(e,t){var n,r;return xi(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:drawAll(rect_draw),pick:pickPath(rect_draw),isect:intersectRect};function rule_path(e,t,n){var r,i,a,o;return!(!t.stroke||!Oi(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}var qi,Wi={type:"rule",tag:"line",nested:!1,attr:function rule_attr(e,t){e("transform",translateItem(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function rule_bound(e,t){var n,r;return xi(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function rule_draw(e,t,n){visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&rule_path(e,t,r)&&e.stroke()}}))},pick:pick_pick((function rule_hit(e,t,n,r){return!!e.isPointInStroke&&(rule_path(e,t,1)&&e.isPointInStroke(n,r))})),isect:function intersectRule(e,t){var n=e.x||0,r=e.y||0;return intersectBoxLine(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},Gi=Ai("shape",(function shapes_shape(e,t){return(t.mark.shape||t.shape).context(e)(t)})),Hi=Ai("symbol",(function shapes_symbol(e,t){return yi.context(e)(t)}),intersectPoint),Vi={height:text_fontSize,measureWidth:measureWidth,estimateWidth:estimateWidth,width:estimateWidth,canvas:useCanvas};function estimateWidth(e){return qi=text_fontSize(e),estimate(textValue(e))}function estimate(e){return~~(.8*e.length*qi)}function measureWidth(e){return text_fontSize(e)<=0?0:(ki.font=text_font(e),text_measure(textValue(e)))}function text_measure(e){return ki.measureText(e).width}function text_fontSize(e){return null!=e.fontSize?e.fontSize:11}function useCanvas(e){Vi.width=e&&ki?measureWidth:estimateWidth}function textValue(e){var t=e.text;return null==t?"":e.limit>0?function truncate(e){var t,n=+e.limit,r=e.text+"";Vi.width===measureWidth?(ki.font=text_font(e),t=text_measure):(qi=text_fontSize(e),t=estimate);if(t(r)<n)return r;var i,a=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,u=r.length;if(n-=t(a),o){for(;s<u;)i=s+u>>>1,t(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),t(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(e):t+""}function fontFamily(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function text_font(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+text_fontSize(e)+"px "+fontFamily(e,t)}function text_offset(e){var t=e.baseline,n=text_fontSize(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}useCanvas(!0);var Yi={left:"start",center:"middle",right:"end"},$i=new Bounds;function anchorPoint(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-ri,n+=i*Math.cos(t),r+=i*Math.sin(t)),$i.x1=n,$i.y1=r,$i}function text_bound(e,t,n){var r,i=Vi.height(t),a=t.align,o=anchorPoint(t),s=o.x1,u=o.y1,l=t.dx||0,c=(t.dy||0)+text_offset(t)-Math.round(.8*i);if(r=Vi.width(t),"center"===a?l-=r/2:"right"===a&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*ni,s,u);else if(2===n)return e.rotatedPoints(t.angle*ni,s,u);return e}var Xi={arc:Ri,area:Pi,group:Li,image:Ni,line:Bi,path:Ui,rect:zi,rule:Wi,shape:Gi,symbol:Hi,text:{type:"text",tag:"text",nested:!1,attr:function text_attr(e,t){var n,r=t.dx||0,i=(t.dy||0)+text_offset(t),a=anchorPoint(t),o=a.x1,s=a.y1,u=t.angle||0;e("text-anchor",Yi[t.align]||"start"),u?(n=transform_translate(o,s)+" "+transform_rotate(u),(r||i)&&(n+=" "+transform_translate(r,i))):n=transform_translate(o+r,s+i),e("transform",n)},bound:text_bound,draw:function text_draw(e,t,n){visit_visit(t,(function(t){var r,i,a,o,s;n&&!n.intersects(t.bounds)||(s=textValue(t))&&(0===(r=null==t.opacity?1:t.opacity)||t.fontSize<=0||(e.font=text_font(t),e.textAlign=t.align||"left",a=(i=anchorPoint(t)).x1,o=i.y1,t.angle&&(e.save(),e.translate(a,o),e.rotate(t.angle*ni),a=o=0),a+=t.dx||0,o+=(t.dy||0)+text_offset(t),t.fill&&Ti(e,t,r)&&e.fillText(s,a,o),t.stroke&&Oi(e,t,r)&&e.strokeText(s,a,o),t.angle&&e.restore()))}))},pick:pick_pick((function text_hit(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=anchorPoint(t),s=o.x1,u=o.y1,l=text_bound($i,t,1),c=-t.angle*ni,f=Math.cos(c),d=Math.sin(c),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return l.contains(h,p)})),isect:function intersectText(e,t){var n=text_bound($i,e,2);return intersectBoxLine(t,n[0],n[1],n[2],n[3])||intersectBoxLine(t,n[0],n[1],n[4],n[5])||intersectBoxLine(t,n[4],n[5],n[6],n[7])||intersectBoxLine(t,n[2],n[3],n[6],n[7])}},trail:Di("trail",(function shapes_trail(e,t){return _i.context(e)(t)}),(function pickTrail(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))},Ki=function(e,t,n){var r=Xi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Bounds),e,n)},Ji={mark:null},Zi=function(e,t,n){var r,i,a,o,s=Xi[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?a=l[0]:(Ji.mark=e,a=Ji),o=Ki(a,u,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Bounds,c)for(r=0,i=l.length;r<i;++r)t.union(Ki(l[r],u,n));return e.bounds=t},Qi=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function sceneFromJSON(e){return function serialize_initialize(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&serialize_initialize(a[n]);i&&Zi(e);return e}("string"===typeof e?JSON.parse(e):e)}var ea=function Scenegraph(e){arguments.length?this.root=sceneFromJSON(e):(this.root=createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GroupItem(this.root)])}.prototype;function createMark(e,t){return{bounds:new Bounds,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function domCreate(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function domFind(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function domChild(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=domCreate(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function domClear(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function cssClass(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}ea.toJSON=function(e){return function sceneToJSON(e,t){return JSON.stringify(e,Qi,t)}(this.root,e||0)},ea.mark=function(e,t,n){var r=createMark(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var ta=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function Handler_Handler(e,t){this._active=null,this._handlers={},this._loader=e||hr(),this._tooltip=t||defaultTooltip}function defaultTooltip(e,t,n,r){e.element().setAttribute("title",r||"")}var na=Handler_Handler.prototype;function Renderer_Renderer(e){this._el=null,this._bgcolor=null,this._loader=new ResourceLoader(e)}na.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},na.element=function(){return this._el},na.canvas=function(){return this._el&&this._el.firstChild},na.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},na.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},na.on=function(){},na.off=function(){},na._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},na.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},na.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},na.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=domCreate(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},na.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=Xi[o.marktype]).tip){for((a=ta(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},na.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var ra=Renderer_Renderer.prototype;ra.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},ra.element=function(){return this._el},ra.canvas=function(){return this._el&&this._el.firstChild},ra.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},ra.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},ra.dirty=function(){},ra.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},ra._render=function(){},ra.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},ra._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},ra.sanitizeURL=function(e){return this._load("sanitizeURL",e)},ra.loadImage=function(e){return this._load("loadImage",e)};var ia="mouseout";function CanvasHandler(e,t){Handler_Handler.call(this,e,t),this._down=null,this._touch=null,this._first=!0}var aa=Object(V.y)(CanvasHandler,Handler_Handler);function move(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function inactive(e){return function(t){this.fire(e,t),this._active=null}}aa.initialize=function(e,t,n){var r=this._canvas=e&&domFind(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){aa[e]?aa[e].call(i,t):i.fire(e,t)}))}))}return Handler_Handler.prototype.initialize.call(this,e,t,n)},aa.canvas=function(){return this._canvas},aa.context=function(){return this._canvas.getContext("2d")},aa.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],aa.DOMMouseScroll=function(e){this.fire("mousewheel",e)},aa.mousemove=move("mousemove","mouseover","mouseout"),aa.dragover=move("dragover","dragenter","dragleave"),aa.mouseout=inactive("mouseout"),aa.dragleave=inactive("dragleave"),aa.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},aa.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},aa.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},aa.touchmove=function(e){this.fire("touchmove",e,!0)},aa.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},aa.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,"click"===e&&a&&a.href?this.handleHref(t,a,a.href):"mousemove"!==e&&e!==ia||this.handleTooltip(t,a,e!==ia),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},aa.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},aa.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},aa.pickEvent=function(e){var t=ta(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},aa.pick=function(e,t,n,r,i){var a=this.context();return Xi[e.marktype].pick.call(this,a,e,t,n,r,i)};var oa=function devicePixelRatio(){return"undefined"!==typeof window&&window.devicePixelRatio||1}();function CanvasRenderer(e){Renderer_Renderer.call(this,e),this._redraw=!1,this._dirty=new Bounds}var sa=Object(V.y)(CanvasRenderer,Renderer_Renderer),ua=Renderer_Renderer.prototype,la=new Bounds;function SVGHandler(e,t){Handler_Handler.call(this,e,t);var n=this;n._hrefHandler=listener(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=listener(n,(function(e,t){n.handleTooltip(e,t,e.type!==ia)}))}sa.initialize=function(e,t,n,r,i,a){return this._options=a,this._canvas=domCanvas(1,1,a&&a.type),e&&(domClear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),ua.initialize.call(this,e,t,n,r,i)},sa.resize=function(e,t,n,r){return ua.resize.call(this,e,t,n,r),function(e,t,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),l=s?oa:i;for(o in e.width=t*l,e.height=n*l,a)u[o]=a[o];s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=l,u.setTransform(l,0,0,l,l*r[0],l*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},sa.canvas=function(){return this._canvas},sa.context=function(){return this._canvas?this._canvas.getContext("2d"):null},sa.dirty=function(e){var t=function CanvasRenderer_translate(e,t){if(null==t)return e;for(var n=la.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},sa._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function clipToBounds(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},sa.draw=function(e,t,n){var r=Xi[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),Object(V.D)(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},sa.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var ca=Object(V.y)(SVGHandler,Handler_Handler);function listener(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function openTag(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function closeTag(e){return"</"+e+">"}ca.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(ia,this._tooltipHandler)),this._svg=r=e&&domFind(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(ia,this._tooltipHandler)),Handler_Handler.prototype.initialize.call(this,e,t,n)},ca.canvas=function(){return this._svg},ca.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:listener(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},ca.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var fa={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},da={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ha=Object.keys(da),pa=fa.xmlns;function SVGRenderer(e){Renderer_Renderer.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var ga=Object(V.y)(SVGRenderer,Renderer_Renderer),ma=Renderer_Renderer.prototype;function updateGradient(e,t,n){var r,i,a;if("radial"===t.gradient){var o=domChild(e,n++,"pattern",pa);o.setAttribute("id",or+t.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=domChild(o,0,"rect",pa)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+SVGRenderer_href()+"#"+t.id+")"),(e=domChild(e,n++,"radialGradient",pa)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=domChild(e,n++,"linearGradient",pa)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r)(a=domChild(e,r,"stop",pa)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return domClear(e,r),n}function updateClipping(e,t,n){var r;return(e=domChild(e,n,"clipPath",pa)).setAttribute("id",t.id),t.path?(r=domChild(e,0,"path",pa)).setAttribute("d",t.path):((r=domChild(e,0,"rect",pa)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),n+1}function dirtyParents(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function SVGRenderer_bind(e,t,n,r,i){var a,o=e._svg;if(!o&&(o=domCreate(a=t.ownerDocument,r,pa),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var s=domCreate(a,"path",pa);s.setAttribute("class","background"),o.appendChild(s),s.__data__=e;var u=domCreate(a,"g",pa);o.appendChild(u),u.__data__=e}return(o.ownerSVGElement!==i||function hasSiblings(e){var t=e.mark||e.group;return t&&t.items.length>1}(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}ga.initialize=function(e,t,n,r){return e&&(this._svg=domChild(e,0,"svg",pa),this._svg.setAttribute("class","marks"),domClear(e,1),this._root=domChild(this._svg,0,"g",pa),domClear(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),ma.initialize.call(this,e,t,n,r)},ga.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),ma.background.apply(this,arguments)},ga.resize=function(e,t,n,r){return ma.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},ga.canvas=function(){return this._svg},ga.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in fa)e[t]=fa[t];var n=this._bgcolor?openTag("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+closeTag("rect"):"";return openTag("svg",e)+n+this._svg.innerHTML+closeTag("svg")},ga._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),domClear(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},ga.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=domChild(t,0,"defs",pa)),i=updateGradient(r,n.gradient[e],i);for(e in n.clipping)r||(n.el=r=domChild(t,0,"defs",pa)),i=updateClipping(r,n.clipping[e],i);r&&(0===i?(t.removeChild(r),n.el=null):domClear(r,i))},ga._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},ga.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},ga.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},ga._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=Xi[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,dirtyParents(t,u),n.items.forEach((function(e){e.dirty=u}))),n.zdirty||(t.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):t._svg&&(s=t._svg.parentNode)&&s.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==u&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,dirtyParents(t,u)),t._update=u));return!this._dirtyAll},ga.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,i=this,a=this._svg,o=Xi[t.marktype],s=!1===t.interactive?"none":null,u="g"===o.tag,l=null,c=0;function process(e){var t=i.isDirty(e),n=SVGRenderer_bind(e,r,l,o.tag,a);t&&(i._update(o,n,e),u&&function SVGRenderer_recurse(e,t,n){t=t.lastChild;var r,i=0;visit_visit(n,(function(n){r=e.draw(t,n,r),++i})),domClear(t,1+i)}(i,n,e)),l=n,++c}return(r=SVGRenderer_bind(t,e,n,"g",a)).setAttribute("class",cssClass(t)),u||r.style.setProperty("pointer-events",s),t.clip?r.setAttribute("clip-path",ji(i,t,t.group)):r.removeAttribute("clip-path"),o.nested?t.items.length&&process(t.items[0]):visit_visit(t,process),domClear(r,c),r};var va=null,ya=null,_a={group:function group(e,t,n){ya=t.__values__,va=t.childNodes[1],e.foreground(SVGRenderer_emit,n,this),va=t.childNodes[0],e.background(SVGRenderer_emit,n,this);var r=!1===n.mark.interactive?"none":null;r!==ya.events&&(va.style.setProperty("pointer-events",r),ya.events=r)},text:function text(e,t,n){var r;(r=textValue(n))!==ya.text&&(t.textContent=r,ya.text=r),setStyle(t,"font-family",fontFamily(n)),setStyle(t,"font-size",text_fontSize(n)+"px"),setStyle(t,"font-style",n.fontStyle),setStyle(t,"font-variant",n.fontVariant),setStyle(t,"font-weight",n.fontWeight)}};function setStyle(e,t,n){n!==ya[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),ya[t]=n)}function SVGRenderer_emit(e,t,n){t!==ya[e]&&(null!=t?n?va.setAttributeNS(n,e,t):va.setAttribute(e,t):n?va.removeAttributeNS(n,e):va.removeAttribute(e),ya[e]=t)}function SVGRenderer_href(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function SVGStringRenderer(e){Renderer_Renderer.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}ga._update=function(e,t,n){va=t,ya=t.__values__,e.attr(SVGRenderer_emit,n,this);var r=_a[e.type];r&&r.call(this,e,t,n),this.style(va,n)},ga.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=ha.length;n<r;++n)o=t[i=ha[n]],"font"===i&&(o=fontFamily(t)),o!==ya[i]&&(a=da[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(isGradient(o)&&(o=gradientRef(o,this._defs.gradient,SVGRenderer_href())),e.style.setProperty(a,o+"")),ya[i]=o)};var ba,xa=Object(V.y)(SVGStringRenderer,Renderer_Renderer),wa=Renderer_Renderer.prototype;function SVGStringRenderer_emit(e,t,n,r){ba[r||e]=t}function applyStyles(e,t,n,r){if(null==e)return"";var i,a,o,s,u,l="";for("bgrect"===n&&!1===t.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+fontFamily(e)+"; ",l+="font-size: "+text_fontSize(e)+"px; ",e.fontStyle&&(l+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(l+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(l+="font-weight: "+e.fontWeight+"; ")),i=0,a=ha.length;i<a;++i)o=ha[i],s=da[o],null==(u=e[o])?"fill"===s&&(l+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(isGradient(u)&&(u=gradientRef(u,r.gradient,"")),l+=s+": "+u+"; "):l+=s+": none; ";return l?'style="'+l.trim()+'"':null}xa.resize=function(e,t,n,r){wa.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in fa)o[s]=fa[s];a.head=openTag("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?openTag("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+closeTag("rect"):"",a.root=openTag("g",{transform:"translate("+i+")"}),a.foot=closeTag("g")+closeTag("svg"),this},xa.background=function(){var e=wa.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},xa.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},xa._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},xa.buildDefs=function(){var e,t,n,r,i,a=this._defs,o="";for(t in a.gradient){for(i=(n=a.gradient[t]).stops,"radial"===n.gradient?(o+=openTag(r="pattern",{id:or+t,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=openTag("rect",{width:"1",height:"1",fill:"url(#"+t+")"})+closeTag("rect"),o+=closeTag(r),o+=openTag(r="radialGradient",{id:t,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=openTag(r="linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<i.length;++e)o+=openTag("stop",{offset:i[e].offset,"stop-color":i[e].color})+closeTag("stop");o+=closeTag(r)}for(t in a.clipping)n=a.clipping[t],o+=openTag("clipPath",{id:t}),n.path?o+=openTag("path",{d:n.path})+closeTag("path"):o+=openTag("rect",{x:0,y:0,width:n.width,height:n.height})+closeTag("rect"),o+=closeTag("clipPath");return o.length>0?openTag("defs")+o+closeTag("defs"):""},xa.attributes=function(e,t){return ba={},e(SVGStringRenderer_emit,t,this),ba},xa.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},xa.mark=function(e){var t,n=this,r=Xi[e.marktype],i=r.tag,a=this._defs,o="";function process(s){var u=n.href(s);u&&(o+=openTag("a",u)),t="g"!==i?applyStyles(s,e,i,a):null,o+=openTag(i,n.attributes(r.attr,s),t),"text"===i?o+=function escape_text(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(textValue(s)):"g"===i&&(o+=openTag("path",n.attributes(r.background,s),applyStyles(s,e,"bgrect",a))+closeTag("path"),o+=openTag("g",n.attributes(r.foreground,s))+n.markGroup(s)+closeTag("g")),o+=closeTag(i),u&&(o+=closeTag("a"))}return"g"!==i&&!1===e.interactive&&(t='style="pointer-events: none;"'),o+=openTag("g",{class:cssClass(e),"clip-path":e.clip?ji(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&process(e.items[0]):visit_visit(e,process),o+closeTag("g")},xa.markGroup=function(e){var t=this,n="";return visit_visit(e,(function(e){n+=t.mark(e)})),n};var ka={};ka.canvas=ka.png={renderer:CanvasRenderer,headless:CanvasRenderer,handler:CanvasHandler},ka.svg={renderer:SVGRenderer,headless:SVGStringRenderer,handler:SVGHandler},ka.none={};var Sa=new Bounds;function Bound(e){Transform.call(this,null,e)}function Bound_boundItem(e,t,n){return t(e.bounds.clear(),e,n)}Object(V.y)(Bound,Transform).transform=function(e,t){var n,r=t.dataflow,i=e.mark,a=i.marktype,o=Xi[a],s=o.bound,u=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),u=Bound_boundItem(i,s),i.items.forEach((function(e){e.bounds.clear().union(u)}))):a===Mn||e.modified()?(t.visit(t.MOD,(function(e){r.dirty(e)})),u.clear(),i.items.forEach((function(e){u.union(Bound_boundItem(e,s))})),i.role===Nn&&t.reflow()):(n=t.changed(t.REM),t.visit(t.ADD,(function(e){u.union(Bound_boundItem(e,s))})),t.visit(t.MOD,(function(e){n=n||u.alignsWith(e.bounds),r.dirty(e),u.union(Bound_boundItem(e,s))})),n&&(u.clear(),i.items.forEach((function(e){u.union(e.bounds)})))),function(e){var t=e.clip;if(Object(V.D)(t))t(boundContext_context(Sa.clear()));else{if(!t)return;Sa.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Sa)}(i),t.modifies("bounds")};var Ea=":vega_identifier:";function Identifier_Identifier(e){Transform.call(this,0,e)}function Mark(e){Transform.call(this,null,e)}function Overlap(e){Transform.call(this,null,e)}Identifier_Identifier.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Object(V.y)(Identifier_Identifier,Transform).transform=function(e,t){var n=function getCounter(e){var t=e._signals[Ea];t||(e._signals[Ea]=t=e.add(0));return t}(t.dataflow),r=n.value,i=e.as;return t.visit(t.ADD,(function(e){e[i]||(e[i]=++r)})),n.set(this.value=r),t},Object(V.y)(Mark,Transform).transform=function(e,t){var n=this.value;n||((n=t.dataflow.scenegraph().mark(e.markdef,function Mark_lookup(e){var t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index)).group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);var r=n.marktype===Mn?GroupItem:Item;return t.visit(t.ADD,(function(e){r.call(e,n)})),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t};var Ta=Object(V.y)(Overlap,Transform),Ca={parity:function parity(e){return e.filter((function(e,t){return t%2?e.opacity=0:1}))},greedy:function greedy(e,t){var n;return e.filter((function(e,r){return r&&Overlap_intersect(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)}))}};function Overlap_intersect(e,t,n){return n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2)}function hasOverlap(e,t){for(var n,r=1,i=e.length,a=e[0].bounds;r<i;a=n,++r)if(Overlap_intersect(a,n=e[r].bounds,t))return!0}function hasBounds(e){var t=e.bounds;return t.width()>1&&t.height()>1}function Overlap_reset(e){return e.forEach((function(e){return e.opacity=1})),e}function reflow(e,t){return e.reflow(t.modified()).modifies("opacity")}function Render(e){Transform.call(this,null,e)}Ta.transform=function(e,t){var n,r,i,a=Ca[e.method]||Ca.parity,o=t.materialize(t.SOURCE).source,s=e.separation||0;if(o&&o.length){if(!e.method)return e.modified("method")&&(Overlap_reset(o),t=reflow(t,e)),t;if(e.sort&&(o=o.slice().sort(e.sort)),n=Overlap_reset(o=o.filter(hasBounds)),t=reflow(t,e),n.length>=3&&hasOverlap(n,s)){do{n=a(n,s)}while(n.length>=3&&hasOverlap(n,s));n.length<3&&!Object(V.S)(o).opacity&&(n.length>1&&(Object(V.S)(n).opacity=0),Object(V.S)(o).opacity=1)}return e.boundScale&&e.boundTolerance>=0&&(r=function boundTest(e,t,n){var r=e.range(),i=new Bounds;return t===bn||t===kn?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),function(e){return i.encloses(e.bounds)}}(e.boundScale,e.boundOrient,+e.boundTolerance),o.forEach((function(e){r(e)||(e.opacity=0)}))),i=n[0].mark.bounds.clear(),o.forEach((function(e){e.opacity&&i.union(e.bounds)})),t}},Object(V.y)(Render,Transform).transform=function(e,t){var n=t.dataflow;if(t.visit(t.ALL,(function(e){n.dirty(e)})),t.fields&&t.fields.zindex){var r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}};var Oa=new Bounds;function util_set(e,t,n){return e[t]===n?0:(e[t]=n,1)}var Aa=.5;function isYAxis(e){var t=e.items[0].datum.orient;return t===xn||t===wn}function axisLayout(e,t,n,r){var i,a,o=t.items[0],s=o.datum,u=s.orient,l=function axisIndices(e){var t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),c=o.range,f=o.offset,d=o.position,h=o.minExtent,p=o.maxExtent,g=s.title&&o.items[l[2]].items[0],m=o.titlePadding,v=o.bounds,y=0,_=0;switch(Oa.clear().union(v),v.clear(),(i=l[0])>-1&&v.union(o.items[i].bounds),(i=l[1])>-1&&v.union(o.items[i].bounds),u){case bn:y=d||0,_=-f,a=Math.max(h,Math.min(p,-v.y1)),g&&(a=axisTitleLayout(g,a,m,0,-1,v)),v.add(0,-a).add(c,0);break;case xn:y=-f,_=d||0,a=Math.max(h,Math.min(p,-v.x1)),g&&(a=axisTitleLayout(g,a,m,1,-1,v)),v.add(-a,0).add(0,c);break;case wn:y=n+f,_=d||0,a=Math.max(h,Math.min(p,v.x2)),g&&(a=axisTitleLayout(g,a,m,1,1,v)),v.add(0,0).add(a,c);break;case kn:y=d||0,_=r+f,a=Math.max(h,Math.min(p,v.y2)),g&&(a=axisTitleLayout(g,a,m,0,1,v)),v.add(0,0).add(c,a);break;default:y=o.x,_=o.y}return xi(v.translate(y,_),o),util_set(o,"x",y+Aa)|util_set(o,"y",_+Aa)&&(o.bounds=Oa,e.dirty(o),o.bounds=v,e.dirty(o)),o.mark.bounds.clear().union(v)}function axisTitleLayout(e,t,n,r,i,a){var o=e.bounds,s=0,u=0;return e.auto?(t+=n,r?s=(e.x||0)-(e.x=i*t):u=(e.y||0)-(e.y=i*t),o.translate(-s,-u),e.mark.bounds.set(o.x1,o.y1,o.x2,o.y2),r?(a.add(0,o.y1).add(0,o.y2),t+=o.width()):(a.add(o.x1,0).add(o.x2,0),t+=o.height())):a.union(o),t}var Ra=n(5);function bboxFlush(e){return(new Bounds).set(0,0,e.width||0,e.height||0)}function bboxFull(e){var t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function grid_get(e,t,n){var r=Object(V.F)(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function offsetValue(e){return e<0?Math.ceil(-e):0}function gridLayout(e,t,n){var r,i,a,o,s,u,l,c,f,d,h,p=!n.nodirty,g=n.bounds===er?bboxFlush:bboxFull,m=Oa.set(0,0,0,0),v=grid_get(n.align,tr),y=grid_get(n.align,nr),_=grid_get(n.padding,tr),b=grid_get(n.padding,nr),x=n.columns||t.length,w=x<0?1:Math.ceil(t.length/x),k=t.length,S=Array(k),E=Array(x),T=0,C=Array(k),O=Array(w),A=0,R=Array(k),D=Array(k),P=Array(k);for(i=0;i<x;++i)E[i]=0;for(i=0;i<w;++i)O[i]=0;for(i=0;i<k;++i)u=t[i],s=P[i]=g(u),u.x=u.x||0,R[i]=0,u.y=u.y||0,D[i]=0,a=i%x,o=~~(i/x),T=Math.max(T,l=Math.ceil(s.x2)),A=Math.max(A,c=Math.ceil(s.y2)),E[a]=Math.max(E[a],l),O[o]=Math.max(O[o],c),S[i]=_+offsetValue(s.x1),C[i]=b+offsetValue(s.y1),p&&e.dirty(t[i]);for(i=0;i<k;++i)i%x===0&&(S[i]=0),i<x&&(C[i]=0);if(v===Qn)for(a=1;a<x;++a){for(h=0,i=a;i<k;i+=x)h<S[i]&&(h=S[i]);for(i=a;i<k;i+=x)S[i]=h+E[a-1]}else if(v===Zn){for(h=0,i=0;i<k;++i)i%x&&h<S[i]&&(h=S[i]);for(i=0;i<k;++i)i%x&&(S[i]=h+T)}else for(v=!1,a=1;a<x;++a)for(i=a;i<k;i+=x)S[i]+=E[a-1];if(y===Qn)for(o=1;o<w;++o){for(h=0,r=(i=o*x)+x;i<r;++i)h<C[i]&&(h=C[i]);for(i=o*x;i<r;++i)C[i]=h+O[o-1]}else if(y===Zn){for(h=0,i=x;i<k;++i)h<C[i]&&(h=C[i]);for(i=x;i<k;++i)C[i]=h+A}else for(y=!1,o=1;o<w;++o)for(r=(i=o*x)+x;i<r;++i)C[i]+=O[o-1];for(f=0,i=0;i<k;++i)f=S[i]+(i%x?f:0),R[i]+=f-t[i].x;for(a=0;a<x;++a)for(d=0,i=a;i<k;i+=x)d+=C[i],D[i]+=d-t[i].y;if(v&&grid_get(n.center,tr)&&w>1)for(i=0;i<k;++i)(f=(s=v===Zn?T:E[i%x])-P[i].x2-t[i].x-R[i])>0&&(R[i]+=f/2);if(y&&grid_get(n.center,nr)&&1!==x)for(i=0;i<k;++i)(d=(s=y===Zn?A:O[~~(i/x)])-P[i].y2-t[i].y-D[i])>0&&(D[i]+=d/2);for(i=0;i<k;++i)m.union(P[i].translate(R[i],D[i]));switch(f=grid_get(n.anchor,Dn),d=grid_get(n.anchor,Pn),grid_get(n.anchor,tr)){case Rn:f-=m.width();break;case An:f-=m.width()/2}switch(grid_get(n.anchor,nr)){case Rn:d-=m.height();break;case An:d-=m.height()/2}for(f=Math.round(f),d=Math.round(d),m.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(u=t[i]).x+=R[i]+=f,u.y+=D[i]+=d,m.union(u.mark.bounds.union(u.bounds.translate(R[i],D[i]))),p&&e.dirty(u);return m}function trellisLayout(e,t,n){var r,i,a,o,s,u,l,c=function gridLayoutGroups(e){for(var t,n,r,i,a,o,s,u=e.items,l=u.length,c=0,f={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};c<l;++c)if(s=(o=u[c]).items,o.marktype===Mn)switch(o.role){case jn:case Nn:break;case Bn:(t=f.rowheaders).push.apply(t,Object(Ra.a)(s));break;case Un:(n=f.rowfooters).push.apply(n,Object(Ra.a)(s));break;case qn:(r=f.colheaders).push.apply(r,Object(Ra.a)(s));break;case Wn:(i=f.colfooters).push.apply(i,Object(Ra.a)(s));break;case zn:f.rowtitle=s[0];break;case Gn:f.coltitle=s[0];break;default:(a=f.marks).push.apply(a,Object(Ra.a)(s))}return f}(t),f=c.marks,d=n.bounds===er?boundFlush:boundFull,h=n.offset,p=n.columns||f.length,g=p<0?1:Math.ceil(f.length/p),m=g*p,v=gridLayout(e,f,n);c.rowheaders&&(u=grid_get(n.headerBand,nr,null),r=grid_layoutHeaders(e,c.rowheaders,f,p,g,-grid_get(h,"rowHeader"),grid_min,0,d,"x1",0,p,1,u)),c.colheaders&&(u=grid_get(n.headerBand,tr,null),i=grid_layoutHeaders(e,c.colheaders,f,p,p,-grid_get(h,"columnHeader"),grid_min,1,d,"y1",0,1,p,u)),c.rowfooters&&(u=grid_get(n.footerBand,nr,null),a=grid_layoutHeaders(e,c.rowfooters,f,p,g,grid_get(h,"rowFooter"),grid_max,0,d,"x2",p-1,p,1,u)),c.colfooters&&(u=grid_get(n.footerBand,tr,null),o=grid_layoutHeaders(e,c.colfooters,f,p,p,grid_get(h,"columnFooter"),grid_max,1,d,"y2",m-p,1,p,u)),c.rowtitle&&(s=grid_get(n.titleAnchor,nr),l=grid_get(h,"rowTitle"),l=s===Rn?a+l:r-l,u=grid_get(n.titleBand,nr,.5),layoutTitle(e,c.rowtitle,l,0,v,u)),c.coltitle&&(s=grid_get(n.titleAnchor,tr),l=grid_get(h,"columnTitle"),l=s===Rn?o+l:i-l,u=grid_get(n.titleBand,tr,.5),layoutTitle(e,c.coltitle,l,1,v,u))}function boundFlush(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function boundFull(e,t){return e.bounds[t]}function grid_min(e,t){return Math.floor(Math.min(e,t))}function grid_max(e,t){return Math.ceil(Math.max(e,t))}function grid_layoutHeaders(e,t,n,r,i,a,o,s,u,l,c,f,d,h){var p,g,m,v,y,_,b,x,w,k=n.length,S=0,E=0;if(!k)return S;for(p=c;p<k;p+=f)n[p]&&(S=o(S,u(n[p],l)));if(!t.length)return S;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),S+=a,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=c,g=0,v=t.length;g<v;++g,p+=f){for(y=(_=t[g]).mark.bounds,m=p;m>=0&&null==(b=n[m]);m-=d);s?(x=null==h?b.x:Math.round(b.bounds.x1+h*b.bounds.width()),w=S):(x=S,w=null==h?b.y:Math.round(b.bounds.y1+h*b.bounds.height())),y.union(_.bounds.translate(x-(_.x||0),w-(_.y||0))),_.x=x,_.y=w,e.dirty(_),E=o(E,y[l])}return E}function layoutTitle(e,t,n,r,i,a){if(t){e.dirty(t);var o=n,s=n;r?o=Math.round(i.x1+a*i.width()):s=Math.round(i.y1+a*i.height()),t.bounds.translate(o-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=s,e.dirty(t)}}function legendParams(e,t,n,r,i,a,o){var s=function legend_lookup(e,t){var n=e[t]||{};return function(t,r){return null!=n[t]?n[t]:null!=e[t]?e[t]:r}}(n,t),u=function offsets(e,t){var n=-1/0;return e.forEach((function(e){null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),l=s("anchor",On),c=l===Rn?1:l===An?.5:0,f={align:Qn,bounds:s("bounds",er),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case xn:f.anchor={x:Math.floor(r.x1)-u,column:Rn,y:c*(o||r.height()+2*r.y1),row:l};break;case wn:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case bn:f.anchor={y:Math.floor(i.y1)-u,row:Rn,x:c*(a||i.width()+2*i.x1),column:l};break;case kn:f.anchor={y:Math.ceil(i.y2)+u,x:c*(a||i.width()+2*i.x1),column:l};break;case Sn:f.anchor={x:u,y:u};break;case En:f.anchor={x:a-u,y:u,column:Rn};break;case Tn:f.anchor={x:u,y:o-u,row:Rn};break;case Cn:f.anchor={x:a-u,y:o-u,column:Rn,row:Rn}}return f}function legendLayout(e,t){var n,r,i=t.items[0],a=i.datum,o=i.orient,s=i.bounds,u=i.x,l=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function legendGroupLayout(e,t,n){var r=t.padding,i=r-n.x,a=r-n.y;if(t.datum.title){var o=t.items[1].items[0],s=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case xn:i+=Math.ceil(o.bounds.width())+u;break;case wn:case kn:break;default:a+=o.fontSize+u}switch((i||a)&&legend_translate(e,n,i,a),o.orient){case xn:c+=legendTitleOffset(t,n,o,s,0,1);break;case wn:l+=legendTitleOffset(t,n,o,Rn,1,0)+u,c+=legendTitleOffset(t,n,o,s,0,1);break;case kn:l+=legendTitleOffset(t,n,o,s,1,0),c+=legendTitleOffset(t,n,o,Rn,0,0,1)+u;break;default:l+=legendTitleOffset(t,n,o,s,1,0)}(l||c)&&legend_translate(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(legend_translate(e,n,-l,0),legend_translate(e,o,-l,0))}else(i||a)&&legend_translate(e,n,i,a)}(e,i,i.items[0].items[0]),s=function legendBounds(e,t){return e.items.forEach((function(e){return t.union(e.bounds)})),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),a.type===Vn&&function legendEntryLayout(e){var t=e.reduce((function(e,t){return e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e}),{});e.forEach((function(e){e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),o!==Jn&&(i.x=u=0,i.y=l=0),i.width=n,i.height=r,xi(s.set(u,l,u+n,l+r),i),i.mark.bounds.clear().union(s),i}function legendTitleOffset(e,t,n,r,i,a,o){var s="symbol"!==e.datum.type,u=n.datum.vgrad,l=(!s||!a&&u||o?t:t.items[0]).bounds[i?"x2":"y2"]-e.padding,c=u&&a?l:0,f=u&&a?0:l;return Math.round(r===On?c:r===Rn?f:.5*l)}function legend_translate(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function ViewLayout(e){Transform.call(this,null,e)}Object(V.y)(ViewLayout,Transform).transform=function(e,t){var n=t.dataflow;return e.mark.items.forEach((function(t){e.layout&&trellisLayout(n,t,e.layout),function layoutGroup(e,t,n){var r,i,a,o,s,u=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new Bounds).set(0,0,l,c),d=f.clone(),h=f.clone(),p=[];for(o=0,s=u.length;o<s;++o)switch((i=u[o]).role){case jn:(isYAxis(i)?d:h).union(axisLayout(e,i,l,c));break;case Fn:r=i;break;case Nn:p.push(legendLayout(e,i));break;case In:case Ln:case Bn:case Un:case zn:case qn:case Wn:case Gn:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){var g={};for(var m in p.forEach((function(e){(a=e.orient||wn)!==Jn&&(g[a]||(g[a]=[])).push(e)})),g){var v=g[m];gridLayout(e,v,legendParams(v,m,n.legends,d,h,l,c))}p.forEach((function(t){var r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===Yn)switch(t.orient){case xn:case wn:f.add(r.x1,0).add(r.x2,0);break;case bn:case kn:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function titleLayout(e,t,n,r,i){var a,o=t.items[0],s=o.frame,u=o.orient,l=o.anchor,c=o.offset,f=o.bounds,d=0,h=u===xn||u===wn?r:n,p=0,g=0;switch(s!==Mn?u===xn?(d=i.y2,h=i.y1):u===wn?(d=i.y1,h=i.y2):(d=i.x1,h=i.x2):u===xn&&(d=r,h=0),a=l===On?d:l===Rn?h:(d+h)/2,Oa.clear().union(f),u){case bn:p=a,g=i.y1-c;break;case xn:p=i.x1-c,g=a;break;case wn:p=i.x2+c,g=a;break;case kn:p=a,g=i.y2+c;break;default:p=o.x,g=o.y}return f.translate(p-(o.x||0),g-(o.y||0)),util_set(o,"x",p)|util_set(o,"y",g)&&(o.bounds=Oa,e.dirty(o),o.bounds=f,e.dirty(o)),t.bounds.clear().union(f)}(e,r,l,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function viewSizeLayout(e,t,n,r){var i=r.autosize||{},a=i.type,o=e._width,s=e._height,u=e.padding();if(e._autosize<1||!a)return;var l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,Math.ceil(n.x2-l)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1)),p=Math.max(0,Math.ceil(n.y2-d));i.contains===Hn&&(o-=u.left+u.right,s-=u.top+u.bottom);a===Jn?(c=0,h=0,l=o,d=s):a===Yn?(l=Math.max(0,o-c-f),d=Math.max(0,s-h-p)):a===$n?(l=Math.max(0,o-c-f),s=d+h+p):a===Xn?(o=l+c+f,d=Math.max(0,s-h-p)):a===Kn&&(o=l+c+f,s=d+h+p);e._resizeView(o,s,l,d,[c,h],i.resize)}(e,t,f,n)}(n,t,e)})),e.modified()&&t.reflow(),t};var Da=function(e,t,n){var r=e-t+2*n;return e?r>0?r:1:0},Pa="identity",Ma="linear",ja="log",Fa="pow",Ia="sqrt",La="symlog",Na="time",Ba="utc",Ua="sequential",za="diverging",qa="quantile",Wa="quantize",Ga="threshold",Ha="ordinal",Va="point",Ya="band",$a="bin-ordinal";function isQuantile(e){return e===qa}function isInterpolating(e){return function isSequential(e){return e&&e.startsWith(Ua)}(e)||function isDiverging(e){return e&&e.startsWith(za)}(e)}function isLogarithmic(e){return e===ja||e.endsWith("-log")}function isContinuous(e){switch(e){case Ma:case ja:case Fa:case Ia:case La:case Na:case Ba:case Ua:return!0}return!1}function isDiscrete(e){return e===$a||e===Ha||e===Ya||e===Va}function isDiscretizing(e){return e===$a||e===qa||e===Wa||e===Ga}var Xa=newInterval((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Xa.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?newInterval((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Xa:null};var Ka=Xa,Ja=(Xa.range,newInterval((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()}))),Za=Ja,Qa=(Ja.range,newInterval((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+t*Re)}),(function(e,t){return(t-e)/Re}),(function(e){return e.getMinutes()}))),eo=Qa,to=(Qa.range,newInterval((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*Re)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()}))),no=to,ro=(to.range,newInterval((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),io=ro,ao=(ro.range,newInterval((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Re)}),(function(e,t){return(t-e)/Re}),(function(e){return e.getUTCMinutes()}))),oo=ao,so=(ao.range,newInterval((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()}))),uo=so,lo=(so.range,newInterval((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),co=lo,fo=(lo.range,{millisecond:Ka,second:Za,minute:eo,hour:no,day:Xe,week:ze,month:io,year:Je}),ho={millisecond:Ka,second:Za,minute:oo,hour:uo,day:Ue,week:Pe,month:co,year:Qe};function timeInterval(e,t){var n=t===Ba?ho:fo;return Object(V.v)(n,e)&&n[e]}var po=n(10),go=function(e){return function(t){var n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}},mo=function(e){return function(t){var n,r,i,a,o=e.range(),s=t[0],u=t[1],l=-1;for(u<s&&(r=s,s=u,u=r),i=0,a=o.length;i<a;++i)o[i]>=s&&o[i]<=u&&(l<0&&(l=i),n=i);if(!(l<0))return s=e.invertExtent(o[l]),u=e.invertExtent(o[n]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}},vo=yn(St),yo=vo.right,_o=vo.left,bo=yo;function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var xo=Symbol("implicit");function ordinal(){var e=new Map,t=[],n=[],r=xo;function scale(i){var a=i+"",o=e.get(a);if(!o){if(r!==xo)return r;e.set(a,o=t.push(i))}return n[(o-1)%n.length]}return scale.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=u+"";e.has(l)||e.set(l,t.push(u))}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return scale},scale.range=function(e){return arguments.length?(n=Array.from(e),scale):n.slice()},scale.unknown=function(e){return arguments.length?(r=e,scale):r},scale.copy=function(){return ordinal(t,n).unknown(r)},initRange.apply(scale,arguments),scale}function scaleBand_band(){var e,t,n=ordinal().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,s=0,u=0,l=.5;function rescale(){var n=r().length,c=a[1]<a[0],f=a[c-0],d=a[1-c],h=Da(n,s,u);e=(d-f)/(h||1),o&&(e=Math.floor(e)),f+=(d-f-e*(n-s))*l,t=e*(1-s),o&&(f=Math.round(f),t=Math.round(t));var p=pn(n).map((function(t){return f+e*t}));return i(c?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),rescale()):r()},n.range=function(e){return arguments.length?(a=[+e[0],+e[1]],rescale()):a.slice()},n.rangeRound=function(e){return a=[+e[0],+e[1]],o=!0,rescale()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,rescale()):o},n.padding=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s=u,rescale()):s},n.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),rescale()):s},n.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),rescale()):u},n.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),rescale()):l},n.invertRange=function(e){if(null!=e[0]&&null!=e[1]){var n,o,s,u=+e[0],l=+e[1],c=a[1]<a[0],f=c?i().reverse():i(),d=f.length-1;if(u===u&&l===l&&(l<u&&(s=u,u=l,l=s),!(l<f[0]||u>a[1-c])))return n=Math.max(0,yo(f,u)-1),o=u===l?n:yo(f,l)-1,u-f[n]>t+1e-10&&++n,c&&(s=n,n=d-o,o=d-s),n>o?void 0:r().slice(n,o+1)}},n.invert=function(e){var t=n.invertRange([e,e]);return t?t[0]:t},n.copy=function(){return scaleBand_band().domain(r()).range(a).round(o).paddingInner(s).paddingOuter(u).align(l)},rescale()}var wo=Math.sqrt(50),ko=Math.sqrt(10),So=Math.sqrt(2),Eo=function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=tickIncrement(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;return r&&a.reverse(),a};function tickIncrement(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=wo?10:a>=ko?5:a>=So?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=wo?10:a>=ko?5:a>=So?2:1)}function tickStep(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=wo?i*=10:a>=ko?i*=5:a>=So&&(i*=2),t<e?-i:i}var To=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},Co=function(e){return(e=To(Math.abs(e)))?e[1]:NaN},Oo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=Oo.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ao,Ro,Do,Po,Mo=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e},jo=function(e,t){var n=To(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Fo={"%":function _(e,t){return(100*e).toFixed(t)},b:function b(e){return Math.round(e).toString(2)},c:function c(e){return e+""},d:function d(e){return Math.round(e).toString(10)},e:function e(t,n){return t.toExponential(n)},f:function f(e,t){return e.toFixed(t)},g:function g(e,t){return e.toPrecision(t)},o:function o(e){return Math.round(e).toString(8)},p:function p(e,t){return jo(100*e,t)},r:jo,s:function(e,t){var n=To(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Ao=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+To(e,Math.max(0,t+a-1))[0]},X:function X(e){return Math.round(e).toString(16).toUpperCase()},x:function x(e){return Math.round(e).toString(16)}},Io=function(e){return e},Lo=Array.prototype.map,No=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],Bo=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Io:(t=Lo.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Io:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Lo.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"-":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function newFormat(e){var t=(e=formatSpecifier(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,g=e.comma,m=e.precision,v=e.trim,y=e.type;"n"===y?(g=!0,y="g"):Fo[y]||(void 0===m&&(m=12),v=!0,y="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?a:/[%p]/.test(y)?u:"",x=Fo[y],w=/[defgprs%]/.test(y);function format(e){var i,a,u,d=_,k=b;if("c"===y)k=x(e)+k,e="";else{var S=(e=+e)<0;if(e=isNaN(e)?c:x(Math.abs(e),m),v&&(e=Mo(e)),S&&0===+e&&(S=!1),d=(S?"("===f?f:l:"-"===f||"("===f?"":f)+d,k=("s"===y?No[8+Ao/3]:"")+k+(S&&"("===f?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(u=e.charCodeAt(i))||u>57){k=(46===u?o+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}g&&!h&&(e=r(e,1/0));var E=d.length+e.length+k.length,T=E<p?new Array(p-E+1).join(t):"";switch(g&&h&&(e=r(T+e,T.length?p-k.length:1/0),T=""),n){case"<":e=d+e+k+T;break;case"=":e=d+T+e+k;break;case"^":e=T.slice(0,E=T.length>>1)+d+e+k+T.slice(E);break;default:e=T+d+e+k}return s(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),format.toString=function(){return e+""},format}return{format:newFormat,formatPrefix:function formatPrefix(e,t){var n=newFormat(((e=formatSpecifier(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Co(t)/3))),i=Math.pow(10,-r),a=No[8+r/3];return function(e){return n(i*e)+a}}}};function defaultLocale_defaultLocale(e){return Ro=Bo(e),Do=Ro.format,Po=Ro.formatPrefix,Ro}defaultLocale_defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Uo=function(e,t,n,r){var i,a=tickStep(e,t,n);switch((r=formatSpecifier(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Co(t)/3)))-Co(Math.abs(e)))}(a,o))||(r.precision=i),Po(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Co(t)-Co(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Co(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return Do(r)},zo=Array.prototype.map;function numbers_numbers(e){return zo.call(e,(function(e){return+e}))}var qo=Array.prototype.slice;var Wo=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color(){}var Go="\\s*([+-]?\\d+)\\s*",Ho="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yo=/^#([0-9a-f]{3,8})$/,$o=new RegExp("^rgb\\("+[Go,Go,Go]+"\\)$"),Xo=new RegExp("^rgb\\("+[Vo,Vo,Vo]+"\\)$"),Ko=new RegExp("^rgba\\("+[Go,Go,Go,Ho]+"\\)$"),Jo=new RegExp("^rgba\\("+[Vo,Vo,Vo,Ho]+"\\)$"),Zo=new RegExp("^hsl\\("+[Ho,Vo,Vo]+"\\)$"),Qo=new RegExp("^hsla\\("+[Ho,Vo,Vo,Ho]+"\\)$"),es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color_color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Yo.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rgbn(t):3===n?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new Rgb(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new Rgb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=$o.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=Xo.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ko.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=Jo.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Zo.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=Qo.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):es.hasOwnProperty(e)?rgbn(es[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color||(e=color_color(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function color_rgb(e,t,n,r){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,n,null==r?1:r)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function hex(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color_color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Hsl(o,s,u,e.opacity)}function hsl(e,t,n,r){return 1===arguments.length?hslConvert(e):new Hsl(e,t,n,null==r?1:r)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function hsl2rgb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function basis_basis(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}Wo(Color,color_color,{copy:function copy(e){return Object.assign(new this.constructor,this,e)},displayable:function displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),Wo(Rgb,color_rgb,extend(Color,{brighter:function brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function darker(e){return e=null==e?.7:Math.pow(.7,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function rgb(){return this},displayable:function displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),Wo(Hsl,hsl,extend(Color,{brighter:function brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker:function darker(e){return e=null==e?.7:Math.pow(.7,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb:function rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,r),hsl2rgb(e,i,r),hsl2rgb(e<120?e+240:e-120,i,r),this.opacity)},displayable:function displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function formatHsl(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var ns=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return basis_basis((n-r/t)*t,o,i,a,s)}},rs=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return basis_basis((n-r/t)*t,i,a,o,s)}},is=function(e){return function(){return e}};function color_linear(e,t){return function(n){return e+n*t}}function color_hue(e,t){var n=t-e;return n?color_linear(e,n>180||n<-180?n-360*Math.round(n/360):n):is(isNaN(e)?t:e)}function color_gamma(e){return 1===(e=+e)?nogamma:function(t,n){return n-t?function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):is(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?color_linear(e,n):is(isNaN(e)?t:e)}var as=function rgbGamma(e){var t=color_gamma(e);function rgb(e,n){var r=t((e=color_rgb(e)).r,(n=color_rgb(n)).r),i=t(e.g,n.g),a=t(e.b,n.b),o=nogamma(e.opacity,n.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=color_rgb(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}var os=rgbSpline(ns),ss=rgbSpline(rs),us=function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=_s(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}},ls=function(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}},cs=function(e,t){return t-=e=+e,function(n){return e+t*n}},fs=function(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=_s(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hs=new RegExp(ds.source,"g");var ps,gs,ms,vs,ys=function(e,t){var n,r,i,a=ds.lastIndex=hs.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ds.exec(e))&&(r=hs.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:cs(n,r)})),a=hs.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function one(e){return function(t){return e(t)+""}}(u[0].x):function string_zero(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},_s=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?is(t):("number"===r?cs:"string"===r?(n=color_color(t))?(t=n,as):ys:t instanceof color_color?as:t instanceof Date?ls:Array.isArray(t)?us:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?fs:cs)(e,t)},bs=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},xs=function(e,t){var n=color_hue(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},ws=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},ks=180/Math.PI,Ss={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Es=function(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ks,skewX:Math.atan(u)*ks,scaleX:o,scaleY:s}};function interpolateTransform(e,t,n,r){function pop(e){return e.length?e.pop()+" ":""}return function(i,a){var o=[],s=[];return i=e(i),a=e(a),function translate(e,r,i,a,o,s){if(e!==i||r!==a){var u=o.push("translate(",null,t,null,n);s.push({i:u-4,x:cs(e,i)},{i:u-2,x:cs(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(i.translateX,i.translateY,a.translateX,a.translateY,o,s),function rotate(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(pop(n)+"rotate(",null,r)-2,x:cs(e,t)})):t&&n.push(pop(n)+"rotate("+t+r)}(i.rotate,a.rotate,o,s),function skewX(e,t,n,i){e!==t?i.push({i:n.push(pop(n)+"skewX(",null,r)-2,x:cs(e,t)}):t&&n.push(pop(n)+"skewX("+t+r)}(i.skewX,a.skewX,o,s),function scale(e,t,n,r,i,a){if(e!==n||t!==r){var o=i.push(pop(i)+"scale(",null,",",null,")");a.push({i:o-4,x:cs(e,n)},{i:o-2,x:cs(t,r)})}else 1===n&&1===r||i.push(pop(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,o,s),i=a=null,function(e){for(var t,n=-1,r=s.length;++n<r;)o[(t=s[n]).i]=t.x(e);return o.join("")}}}var Ts=interpolateTransform((function parseCss(e){return"none"===e?Ss:(ps||(ps=document.createElement("DIV"),gs=document.documentElement,ms=document.defaultView),ps.style.transform=e,e=ms.getComputedStyle(gs.appendChild(ps),null).getPropertyValue("transform"),gs.removeChild(ps),e=e.slice(7,-1).split(","),Es(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Cs=interpolateTransform((function parseSvg(e){return null==e?Ss:(vs||(vs=document.createElementNS("http://www.w3.org/2000/svg","g")),vs.setAttribute("transform",e),(e=vs.transform.baseVal.consolidate())?(e=e.matrix,Es(e.a,e.b,e.c,e.d,e.e,e.f)):Ss)}),", ",")",")"),Os=Math.SQRT2;function zoom_cosh(e){return((e=Math.exp(e))+1/e)/2}var As=function(e,t){var n,r,a=e[0],o=e[1],s=e[2],u=t[0],l=t[1],c=t[2],f=u-a,d=l-o,h=f*f+d*d;if(h<1e-12)r=Math.log(c/s)/Os,n=function i(e){return[a+e*f,o+e*d,s*Math.exp(Os*e*r)]};else{var p=Math.sqrt(h),g=(c*c-s*s+4*h)/(2*s*2*p),m=(c*c-s*s-4*h)/(2*c*2*p),v=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(m*m+1)-m);r=(y-v)/Os,n=function i(e){var t=e*r,n=zoom_cosh(v),u=s/(2*p)*(n*function tanh(e){return((e=Math.exp(2*e))-1)/(e+1)}(Os*t+v)-function zoom_sinh(e){return((e=Math.exp(e))-1/e)/2}(v));return[a+u*f,o+u*d,s*n/zoom_cosh(Os*t+v)]}}return n.duration=1e3*r,n};function hsl_hsl(e){return function(t,n){var r=e((t=hsl(t)).h,(n=hsl(n)).h),i=nogamma(t.s,n.s),a=nogamma(t.l,n.l),o=nogamma(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}var Rs=hsl_hsl(color_hue),Ds=hsl_hsl(nogamma),Ps=Math.PI/180,Ms=180/Math.PI,js=.96422,Fs=1,Is=.82521,Ls=4/29,Ns=6/29,Bs=3*Ns*Ns,Us=Ns*Ns*Ns;function labConvert(e){if(e instanceof Lab)return new Lab(e.l,e.a,e.b,e.opacity);if(e instanceof Hcl)return hcl2lab(e);e instanceof Rgb||(e=rgbConvert(e));var t,n,r=rgb2lrgb(e.r),i=rgb2lrgb(e.g),a=rgb2lrgb(e.b),o=xyz2lab((.2225045*r+.7168786*i+.0606169*a)/Fs);return r===i&&i===a?t=n=o:(t=xyz2lab((.4360747*r+.3850649*i+.1430804*a)/js),n=xyz2lab((.0139322*r+.0971045*i+.7141733*a)/Is)),new Lab(116*o-16,500*(t-o),200*(o-n),e.opacity)}function lab(e,t,n,r){return 1===arguments.length?labConvert(e):new Lab(e,t,n,null==r?1:r)}function Lab(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function xyz2lab(e){return e>Us?Math.pow(e,1/3):e/Bs+Ls}function lab2xyz(e){return e>Ns?e*e*e:Bs*(e-Ls)}function lrgb2rgb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rgb2lrgb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hclConvert(e){if(e instanceof Hcl)return new Hcl(e.h,e.c,e.l,e.opacity);if(e instanceof Lab||(e=labConvert(e)),0===e.a&&0===e.b)return new Hcl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Ms;return new Hcl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function hcl(e,t,n,r){return 1===arguments.length?hclConvert(e):new Hcl(e,t,n,null==r?1:r)}function Hcl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function hcl2lab(e){if(isNaN(e.h))return new Lab(e.l,0,0,e.opacity);var t=e.h*Ps;return new Lab(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function lab_lab(e,t){var n=nogamma((e=lab(e)).l,(t=lab(t)).l),r=nogamma(e.a,t.a),i=nogamma(e.b,t.b),a=nogamma(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}function hcl_hcl(e){return function(t,n){var r=e((t=hcl(t)).h,(n=hcl(n)).h),i=nogamma(t.c,n.c),a=nogamma(t.l,n.l),o=nogamma(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}Wo(Lab,lab,extend(Color,{brighter:function brighter(e){return new Lab(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function darker(e){return new Lab(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(t=js*lab2xyz(t))-1.6168667*(e=Fs*lab2xyz(e))-.4906146*(n=Is*lab2xyz(n))),lrgb2rgb(-.9787684*t+1.9161415*e+.033454*n),lrgb2rgb(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Wo(Hcl,hcl,extend(Color,{brighter:function brighter(e){return new Hcl(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function darker(e){return new Hcl(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function rgb(){return hcl2lab(this).rgb()}}));var zs=hcl_hcl(color_hue),qs=hcl_hcl(nogamma),Ws=-.29227,Gs=-.90649,Hs=1.97294,Vs=Hs*Gs,Ys=1.78277*Hs,$s=1.78277*Ws- -.14861*Gs;function cubehelix_cubehelix(e,t,n,r){return 1===arguments.length?function cubehelixConvert(e){if(e instanceof Cubehelix)return new Cubehelix(e.h,e.s,e.l,e.opacity);e instanceof Rgb||(e=rgbConvert(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=($s*r+Vs*t-Ys*n)/($s+Vs-Ys),a=r-i,o=(Hs*(n-i)-Ws*a)/Gs,s=Math.sqrt(o*o+a*a)/(Hs*i*(1-i)),u=s?Math.atan2(o,a)*Ms-120:NaN;return new Cubehelix(u<0?u+360:u,s,i,e.opacity)}(e):new Cubehelix(e,t,n,null==r?1:r)}function Cubehelix(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function src_cubehelix_cubehelix(e){return function cubehelixGamma(t){function cubehelix(n,r){var i=e((n=cubehelix_cubehelix(n)).h,(r=cubehelix_cubehelix(r)).h),a=nogamma(n.s,r.s),o=nogamma(n.l,r.l),s=nogamma(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=a(e),n.l=o(Math.pow(e,t)),n.opacity=s(e),n+""}}return t=+t,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}Wo(Cubehelix,cubehelix_cubehelix,extend(Color,{brighter:function brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},darker:function darker(e){return e=null==e?.7:Math.pow(.7,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},rgb:function rgb(){var e=isNaN(this.h)?0:(this.h+120)*Ps,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Rgb(255*(t+n*(-.14861*r+1.78277*i)),255*(t+n*(Ws*r+Gs*i)),255*(t+n*(Hs*r)),this.opacity)}}));var Xs=src_cubehelix_cubehelix(color_hue),Ks=src_cubehelix_cubehelix(nogamma);function piecewise_piecewise(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}var Js=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n},Zs=function(e){return function(){return e}},Qs=function(e){return+e},eu=[0,1];function continuous_identity(e){return e}function continuous_normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Zs(isNaN(t)?NaN:.5)}function bimap(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=continuous_normalize(i,r),a=n(o,a)):(r=continuous_normalize(r,i),a=n(a,o)),function(e){return a(r(e))}}function polymap(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=continuous_normalize(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=bo(e,t,1,r)-1;return a[n](i[n](t))}}function continuous_copy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer(){var e,t,n,r,i,a,o=eu,s=eu,u=_s,l=continuous_identity;function rescale(){var e=Math.min(o.length,s.length);return l!==continuous_identity&&(l=function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?polymap:bimap,i=a=null,scale}function scale(t){return isNaN(t=+t)?n:(i||(i=r(o.map(e),s,u)))(e(l(t)))}return scale.invert=function(n){return l(t((a||(a=r(s,o.map(e),cs)))(n)))},scale.domain=function(e){return arguments.length?(o=Array.from(e,Qs),rescale()):o.slice()},scale.range=function(e){return arguments.length?(s=Array.from(e),rescale()):s.slice()},scale.rangeRound=function(e){return s=Array.from(e),u=ws,rescale()},scale.clamp=function(e){return arguments.length?(l=!!e||continuous_identity,rescale()):l!==continuous_identity},scale.interpolate=function(e){return arguments.length?(u=e,rescale()):u},scale.unknown=function(e){return arguments.length?(n=e,scale):n},function(n,r){return e=n,t=r,rescale()}}function continuous(){return transformer()(continuous_identity,continuous_identity)}function linearish(e){var t=e.domain;return e.ticks=function(e){var n=t();return Eo(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Uo(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,s=i[a],u=i[o];return u<s&&(r=s,s=u,u=r,r=a,a=o,o=r),(r=tickIncrement(s,u,n))>0?r=tickIncrement(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=tickIncrement(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(s/r)*r,i[o]=Math.ceil(u/r)*r,t(i)):r<0&&(i[a]=Math.ceil(s*r)/r,i[o]=Math.floor(u*r)/r,t(i)),e},e}var tu=function(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e};function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function reflect(e){return function(t){return-e(-t)}}function loggish(e){var t,n,r=e(transformLog,transformExp),i=r.domain,a=10;function rescale(){return t=function logp(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(a),n=function powp(e){return 10===e?pow10:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),i()[0]<0?(t=reflect(t),n=reflect(n),e(transformLogn,transformExpn)):e(transformLog,transformExp),r}return r.base=function(e){return arguments.length?(a=+e,rescale()):a},r.domain=function(e){return arguments.length?(i(e),rescale()):i()},r.ticks=function(e){var r,o=i(),s=o[0],u=o[o.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=t(s),h=t(u),p=null==e?10:+e,g=[];if(!(a%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1,l=n(d);c<a;++c)if(!((f=l*c)<s)){if(f>u)break;g.push(f)}}else for(;d<=h;++d)for(c=a-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;g.push(f)}g.length||(g=Eo(s,u,p))}else g=Eo(d,h,Math.min(h-d,p)).map(n);return r?g.reverse():g},r.tickFormat=function(e,i){if(null==i&&(i=10===a?".0e":","),"function"!==typeof i&&(i=Do(i)),e===1/0)return i;null==e&&(e=10);var o=Math.max(1,a*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*a<a-.5&&(r*=a),r<=o?i(e):""}},r.nice=function(){return i(tu(i(),{floor:function floor(e){return n(Math.floor(t(e)))},ceil:function ceil(e){return n(Math.ceil(t(e)))}}))},r}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(continuous_identity,continuous_identity),n=1;function rescale(){return 1===n?e(continuous_identity,continuous_identity):.5===n?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,rescale()):n},linearish(t)}function pow_pow(){var e=powish(transformer());return e.copy=function(){return continuous_copy(e,pow_pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(n){return arguments.length?e(transformSymlog(t=+n),transformSymexp(t)):t},linearish(n)}var nu=1e3,ru=60*nu,iu=60*ru,au=24*iu,ou=7*au,su=30*au,uu=365*au;function time_date(e){return new Date(e)}function time_number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,r,i,a,o,s,u){var l=continuous(),c=l.invert,f=l.domain,d=u(".%L"),h=u(":%S"),p=u("%I:%M"),g=u("%I %p"),m=u("%a %d"),v=u("%b %d"),y=u("%B"),_=u("%Y"),b=[[o,1,nu],[o,5,5*nu],[o,15,15*nu],[o,30,30*nu],[a,1,ru],[a,5,5*ru],[a,15,15*ru],[a,30,30*ru],[i,1,iu],[i,3,3*iu],[i,6,6*iu],[i,12,12*iu],[r,1,au],[r,2,2*au],[n,1,ou],[t,1,su],[t,3,3*su],[e,1,uu]];function tickFormat(s){return(o(s)<s?d:a(s)<s?h:i(s)<s?p:r(s)<s?g:t(s)<s?n(s)<s?m:v:e(s)<s?y:_)(s)}function tickInterval(t,n,r){if(null==t&&(t=10),"number"===typeof t){var i,a=Math.abs(r-n)/t,o=yn((function(e){return e[2]})).right(b,a);return o===b.length?(i=tickStep(n/uu,r/uu,t),t=e):o?(i=(o=b[a/b[o-1][2]<b[o][2]/a?o-1:o])[1],t=o[0]):(i=Math.max(tickStep(n,r,t),1),t=s),t.every(i)}return t}return l.invert=function(e){return new Date(c(e))},l.domain=function(e){return arguments.length?f(Array.from(e,time_number)):f().map(time_date)},l.ticks=function(e){var t,n=f(),r=n[0],i=n[n.length-1],a=i<r;return a&&(t=r,r=i,i=t),t=(t=tickInterval(e,r,i))?t.range(r,i+1):[],a?t.reverse():t},l.tickFormat=function(e,t){return null==t?tickFormat:u(t)},l.nice=function(e){var t=f();return(e=tickInterval(e,t[0],t[t.length-1]))?f(tu(t,e)):l},l.copy=function(){return continuous_copy(l,calendar(e,t,n,r,i,a,o,s,u))},l}var lu;function sequential_transformer(){var e,t,n,r,i,a=0,o=1,s=continuous_identity,u=!1;function scale(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}return scale.domain=function(i){var s,u;return arguments.length?(s=i,u=Object(qt.a)(s,2),a=u[0],o=u[1],e=r(a=+a),t=r(o=+o),n=e===t?0:1/(t-e),scale):[a,o]},scale.clamp=function(e){return arguments.length?(u=!!e,scale):u},scale.interpolator=function(e){return arguments.length?(s=e,scale):s},scale.range=function(){return[s(0),s(1)]},scale.unknown=function(e){return arguments.length?(i=e,scale):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),scale}}function sequential_copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(sequential_transformer()(continuous_identity));return e.copy=function(){return sequential_copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(sequential_transformer());return e.copy=function(){return sequential_copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function diverging_transformer(){var e,t,n,r,i,a,o,s=0,u=.5,l=1,c=1,f=continuous_identity,d=!1;function scale(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}return scale.domain=function(o){var f,d;return arguments.length?(f=o,d=Object(qt.a)(f,3),s=d[0],u=d[1],l=d[2],e=a(s=+s),t=a(u=+u),n=a(l=+l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,scale):[s,u,l]},scale.clamp=function(e){return arguments.length?(d=!!e,scale):d},scale.interpolator=function(e){return arguments.length?(f=e,scale):f},scale.range=function(){return[f(0),f(.5),f(1)]},scale.unknown=function(e){return arguments.length?(o=e,scale):o},function(o){return a=o,e=o(s),t=o(u),n=o(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,scale}}function divergingPow(){var e=powish(diverging_transformer());return e.copy=function(){return sequential_copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function scales_scale(e,t){return arguments.length>1?(cu[e]=function scales_create(e,t){return function scale(){var n=t();return n.invertRange||(n.invertRange=n.invert?go(n):n.invertExtent?mo(n):void 0),n.type=e,n}}(e,t),this):Object(V.v)(cu,e)?cu[e]:void 0}var cu=(lu={},Object(po.a)(lu,Pa,(function identity_identity(e){var t;function scale(e){return isNaN(e=+e)?t:e}return scale.invert=scale,scale.domain=scale.range=function(t){return arguments.length?(e=Array.from(t,Qs),scale):e.slice()},scale.unknown=function(e){return arguments.length?(t=e,scale):t},scale.copy=function(){return identity_identity(e).unknown(t)},e=arguments.length?Array.from(e,Qs):[0,1],linearish(scale)})),Object(po.a)(lu,Ma,(function linear_linear(){var e=continuous();return e.copy=function(){return continuous_copy(e,linear_linear())},initRange.apply(e,arguments),linearish(e)})),Object(po.a)(lu,ja,(function log_log(){var e=loggish(transformer()).domain([1,10]);return e.copy=function(){return continuous_copy(e,log_log()).base(e.base())},initRange.apply(e,arguments),e})),Object(po.a)(lu,Fa,pow_pow),Object(po.a)(lu,Ia,(function pow_sqrt(){return pow_pow.apply(null,arguments).exponent(.5)})),Object(po.a)(lu,La,(function symlog(){var e=symlogish(transformer());return e.copy=function(){return continuous_copy(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)})),Object(po.a)(lu,Na,(function(){return initRange.apply(calendar(Je,io,ze,Xe,no,eo,Za,Ka,tt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)})),Object(po.a)(lu,Ba,(function(){return initRange.apply(calendar(Qe,co,Pe,Ue,uo,oo,Za,Ka,rt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)})),Object(po.a)(lu,Ua,sequential),Object(po.a)(lu,Ua+"-"+Ma,sequential),Object(po.a)(lu,Ua+"-"+ja,(function sequentialLog(){var e=loggish(sequential_transformer()).domain([1,10]);return e.copy=function(){return sequential_copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)})),Object(po.a)(lu,Ua+"-"+Fa,sequentialPow),Object(po.a)(lu,Ua+"-"+Ia,(function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)})),Object(po.a)(lu,Ua+"-"+La,(function sequentialSymlog(){var e=symlogish(sequential_transformer());return e.copy=function(){return sequential_copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)})),Object(po.a)(lu,za+"-"+Ma,(function diverging_diverging(){var e=linearish(diverging_transformer()(continuous_identity));return e.copy=function(){return sequential_copy(e,diverging_diverging())},initInterpolator.apply(e,arguments)})),Object(po.a)(lu,za+"-"+ja,(function divergingLog(){var e=loggish(diverging_transformer()).domain([.1,1,10]);return e.copy=function(){return sequential_copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)})),Object(po.a)(lu,za+"-"+Fa,divergingPow),Object(po.a)(lu,za+"-"+Ia,(function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)})),Object(po.a)(lu,za+"-"+La,(function divergingSymlog(){var e=symlogish(diverging_transformer());return e.copy=function(){return sequential_copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)})),Object(po.a)(lu,qa,(function quantile_quantile(){var e,t=[],n=[],r=[];function rescale(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=quantile(t,e/i);return scale}function scale(t){return isNaN(t=+t)?e:n[bo(r,t)]}return scale.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},scale.domain=function(e){if(!arguments.length)return t.slice();t=[];var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;null==s||isNaN(s=+s)||t.push(s)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t.sort(St),rescale()},scale.range=function(e){return arguments.length?(n=Array.from(e),rescale()):n.slice()},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.quantiles=function(){return r.slice()},scale.copy=function(){return quantile_quantile().domain(t).range(n).unknown(e)},initRange.apply(scale,arguments)})),Object(po.a)(lu,Wa,(function quantize_quantize(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function scale(t){return t<=t?a[bo(i,t,0,r)]:e}function rescale(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return scale}return scale.domain=function(e){var r,i;return arguments.length?(r=e,i=Object(qt.a)(r,2),t=i[0],n=i[1],t=+t,n=+n,rescale()):[t,n]},scale.range=function(e){return arguments.length?(r=(a=Array.from(e)).length-1,rescale()):a.slice()},scale.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},scale.unknown=function(t){return arguments.length?(e=t,scale):scale},scale.thresholds=function(){return i.slice()},scale.copy=function(){return quantize_quantize().domain([t,n]).range(a).unknown(e)},initRange.apply(linearish(scale),arguments)})),Object(po.a)(lu,Ga,(function threshold_threshold(){var e,t=[.5],n=[0,1],r=1;function scale(i){return i<=i?n[bo(t,i,0,r)]:e}return scale.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),scale):t.slice()},scale.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),scale):n.slice()},scale.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.copy=function(){return threshold_threshold().domain(t).range(n).unknown(e)},initRange.apply(scale,arguments)})),Object(po.a)(lu,$a,(function scaleBinOrdinal(){var e=[],t=[];function scale(n){return null==n||n!==n?void 0:t[(bo(e,n)-1)%t.length]}return scale.domain=function(t){return arguments.length?(e=numbers_numbers(t),scale):e.slice()},scale.range=function(e){return arguments.length?(t=qo.call(e),scale):t.slice()},scale.tickFormat=function(t,n){return Uo(e[0],Object(V.S)(e),null==t?10:t,n)},scale.copy=function(){return scaleBinOrdinal().domain(scale.domain()).range(scale.range())},scale})),Object(po.a)(lu,Ha,ordinal),Object(po.a)(lu,Ya,scaleBand_band),Object(po.a)(lu,Va,(function scaleBand_point(){return function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return pointish(t())},e}(scaleBand_band().paddingInner(1))})),lu);for(var fu in cu)scales_scale(fu,cu[fu]);var du=["clamp","base","constant","exponent"];function interpolateRange(e,t){var n=t[0],r=Object(V.S)(t)-n;return function(t){return e(n+t*r)}}function interpolateColors(e,t,n){return piecewise_piecewise(interpolate_interpolate(t||"rgb",n),e)}function quantizeInterpolator(e,t){for(var n=new Array(t),r=t+1,i=0;i<t;)n[i]=e(++i/r);return n}function scaleFraction(e,t,n){var r,i,a,o=n-t;return o&&isFinite(o)?(r=(i=e.type).indexOf("-"),i=r<0?i:i.slice(r+1),a=scales_scale(i)().domain([t,n]).range([0,1]),du.forEach((function(t){return e[t]?a[t](e[t]()):0})),a):Object(V.l)(.5)}function interpolate_interpolate(e,t){var n=o[function interpolate_method(e){return"interpolate"+e.toLowerCase().split("-").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function schemes_colors(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function schemes_apply(e,t){for(var n in e)schemes_scheme(n,t(e[n]))}var hu={};function schemes_scheme(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(hu[e]=t,this):hu[e]}function tickCount(e,t,n){var r;return Object(V.E)(t)&&null!=n&&(t=Math.min(t,~~(Object(V.V)(e.domain())/n)||1)),Object(V.F)(t)&&(r=t.step,t=t.interval),Object(V.H)(t)&&(t=timeInterval(t,e.type)||Object(V.n)("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function validTicks(e,t,n){var r=e.range(),i=Math.floor(r[0]),a=Math.ceil(Object(V.S)(r));if(i>a&&(r=a,a=i,i=r),t=t.filter((function(t){return t=e(t),i<=t&&t<=a})),n>0&&t.length>1){for(var o=[t[0],Object(V.S)(t)];t.length>n&&t.length>=3;)t=t.filter((function(e,t){return!(t%2)}));t.length<3&&(t=o)}return t}function tickValues(e,t){return e.bins?validTicks(e,e.bins):e.ticks?e.ticks(t):e.domain()}function ticks_tickFormat(e,t,n,r){var i=e.tickFormat?e.tickFormat(t,n):n&&r===Na?tt(n):n?Do(n):String;if(isLogarithmic(e.type)){var a=function variablePrecision(e){var t=formatSpecifier(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return function trimZeroes(e,t){return function(n){var r,i,a=e(n),o=a.indexOf(t);if(o<0)return a;for(i=(r=function rightmostDigit(e,t){var n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if((n=e.charCodeAt(r))>=48&&n<=57)return r+1}(a,o))<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}(Do(t),Do(".1f")(1)[1])}return Do(t)}(n);i=e.bins?a:function ticks_filter(e,t){return function(n){return e(n)?t(n):""}}(i,a)}return i}function AxisTicks(e){Transform.call(this,null,e)}function DataJoin(e){Transform.call(this,null,e)}function defaultItemCreate(){return ingest({})}function isExit(e){return e.exit}function Encode(e){Transform.call(this,null,e)}schemes_apply({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},schemes_colors),schemes_apply({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(function(e){return interpolateColors(schemes_colors(e))})),Object(V.y)(AxisTicks,Transform).transform=function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,i=e.scale,a=tickCount(i,null==e.count?e.values?e.values.length:10:e.count,e.minstep),o=e.format||ticks_tickFormat(i,a,e.formatSpecifier,e.formatType),s=e.values?validTicks(i,e.values,a):tickValues(i,a);return r&&(n.rem=r),r=s.map((function(e,t){return ingest({index:t/(s.length-1||1),value:e,label:o(e)})})),e.extra&&r.length&&r.push(ingest({index:-1,extra:{value:r[0].value},label:""})),n.source=r,n.add=r,this.value=r,n},Object(V.y)(DataJoin,Transform).transform=function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||defaultItemCreate,a=e.key||tupleid,o=this.value;return Object(V.A)(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(a))&&Object(V.n)("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Object(V.s)().test(isExit),o.lookup=function(e){return o.get(a(e))}),t.visit(t.ADD,(function(e){var t=a(e),n=o.get(t);n?n.exit?(o.empty--,r.add.push(n)):r.mod.push(n):(o.set(t,n=i(e)),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(function(e){var t=a(e),n=o.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(function(e){var t=a(e),n=o.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),e.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},Object(V.y)(Encode,Transform).transform=function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,a=t.encode;if(Object(V.A)(a)){if(!n.changed()&&!a.every((function(e){return i[e]})))return t.StopPropagation;a=a[0],n.encode=null}var o="enter"===a,s=i.update||V.r,u=i.enter||V.r,l=i.exit||V.r,c=(a&&!o?i[a]:s)||V.r;if(t.changed(t.ADD)&&(t.visit(t.ADD,(function(t){u(t,e),s(t,e)})),n.modifies(u.output),n.modifies(s.output),c!==V.r&&c!==s&&(t.visit(t.ADD,(function(t){c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&l!==V.r&&(t.visit(t.REM,(function(t){l(t,e)})),n.modifies(l.output)),o||c!==V.r){var f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,(function(t){var i=u(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(f,(function(t){(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation};var pu,gu,mu="symbol",vu="discrete",yu=(pu={},Object(po.a)(pu,qa,"quantiles"),Object(po.a)(pu,Wa,"thresholds"),Object(po.a)(pu,Ga,"domain"),pu),_u=(gu={},Object(po.a)(gu,qa,"quantiles"),Object(po.a)(gu,Wa,"domain"),gu);function labelValues(e,t){return e.bins?function binValues(e){var t=e.slice(0,-1);return t.max=Object(V.S)(e),t}(e.bins):yu[e.type]?function thresholdValues(e){var t=[-1/0].concat(e);return t.max=1/0,t}(e[yu[e.type]]()):tickValues(e,t)}function labelFormat(e,t,n,r,i){var a=_u[e.type]&&i!==Na?function thresholdFormat(e,t){var n,r=e[_u[e.type]](),i=r.length,a=i>1?r[1]-r[0]:r[0];for(n=1;n<i;++n)a=Math.min(a,r[n]-r[n-1]);return Uo(0,a,30,t)}(e,r):ticks_tickFormat(e,t,r,i);return n===mu&&function isDiscreteRange(e){return yu[e.type]||e.bins}(e)?function formatRange(e){return function(t,n,r){var i=r[n+1]||r.max||1/0,a=formatValue(t,e),o=formatValue(i,e);return a&&o?a+"\u2013"+o:o?"< "+o:"\u2265 "+a}}(a):n===vu?function formatDiscrete(e){return function(t,n){return n?e(t):null}}(a):function formatPoint(e){return function(t){return e(t)}}(a)}function formatValue(e,t){return isFinite(e)?t(e):null}function LegendEntries(e){Transform.call(this,[],e)}Object(V.y)(LegendEntries,Transform).transform=function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,a,o=t.fork(t.NO_SOURCE|t.NO_FIELDS),s=this.value,u=e.type||mu,l=e.scale,c=tickCount(l,null==e.count?5:e.count,e.minstep),f=e.format||labelFormat(l,c,u,e.formatSpecifier,e.formatType),d=e.values||labelValues(l,c);return s&&(o.rem=s),u===mu?(Object(V.D)(i=e.size)?(e.values||0!==l(d[0])||(d=d.slice(1)),a=d.reduce((function(t,n){return Math.max(t,i(n,e))}),0)):i=Object(V.l)(a=i||8),s=d.map((function(t,n){return ingest({index:n,label:f(t,n,d),value:t,offset:a,size:i(t,e)})}))):"gradient"===u?(n=l.domain(),r=scaleFraction(l,n[0],Object(V.S)(n)),d.length<3&&!e.values&&n[0]!==Object(V.S)(n)&&(d=[n[0],Object(V.S)(n)]),s=d.map((function(e,t){return ingest({index:t,label:f(e,t,d),value:e,perc:r(e)})}))):(i=d.length-1,r=function labelFraction(e){var t=e.domain(),n=t.length-1,r=+t[0],i=+Object(V.S)(t),a=i-r;if(e.type===Ga){var o=n?a/n:.1;a=(i+=o)-(r-=o)}return function(e){return(e-r)/a}}(l),s=d.map((function(e,t){return ingest({index:t,label:f(e,t,d),value:e,perc:t?r(e):0,perc2:t===i?1:r(d[t+1])})}))),o.source=s,o.add=s,this.value=s,o};var bu=Object(V.s)({line:LinkPath_line,"line-radial":function lineR(e,t,n,r){return LinkPath_line(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},arc:LinkPath_arc,"arc-radial":function arcR(e,t,n,r){return LinkPath_arc(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},curve:LinkPath_curve,"curve-radial":function curveR(e,t,n,r){return LinkPath_curve(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n))},"orthogonal-horizontal":function orthoX(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n},"orthogonal-vertical":function orthoY(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r},"orthogonal-radial":function orthoR(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*s+"L"+r*o+","+r*s},"diagonal-horizontal":function diagonalX(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":function diagonalY(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":function diagonalR(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}});function sourceX(e){return e.source.x}function sourceY(e){return e.source.y}function targetX(e){return e.target.x}function targetY(e){return e.target.y}function LinkPath(e){Transform.call(this,{},e)}function LinkPath_line(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function LinkPath_arc(e,t,n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a)/2;return"M"+e+","+t+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function LinkPath_curve(e,t,n,r){var i=n-e,a=r-t,o=.2*(i+a),s=.2*(a-i);return"M"+e+","+t+"C"+(e+o)+","+(t+s)+" "+(n+s)+","+(r-o)+" "+n+","+r}function Pie(e){Transform.call(this,null,e)}LinkPath.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Object(V.y)(LinkPath,Transform).transform=function(e,t){var n=e.sourceX||sourceX,r=e.sourceY||sourceY,i=e.targetX||targetX,a=e.targetY||targetY,o=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=bu.get(u+"-"+s)||bu.get(u);return l||Object(V.n)("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(function(e){e[o]=l(n(e),r(e),i(e),a(e))})),t.reflow(e.modified()).modifies(o)},Pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Object(V.y)(Pie,Transform).transform=function(e,t){var n,r,i,a=e.as||["startAngle","endAngle"],o=a[0],s=a[1],u=e.field||V.M,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(u),h=d.length,p=l,g=(c-l)/function sum_sum(e,t){var n=0;if(void 0===t){var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;(u=+u)&&(n+=u)}}catch(m){i=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}else{var l=-1,c=!0,f=!1,d=void 0;try{for(var h,p=e[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value;(g=+t(g,++l,e))&&(n+=g)}}catch(m){f=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}return n}(d),m=pn(h);for(e.sort&&m.sort((function(e,t){return d[e]-d[t]})),n=0;n<h;++n)i=d[m[n]],(r=f[m[n]])[o]=p,r[s]=p+=i*g;return this.value=d,t.reflow(e.modified()).modifies(a)};var xu=5;function includePad(e){return isContinuous(e)&&e!==Ua}var wu=Object(V.bb)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Scale(e){Transform.call(this,null,e),this.modified(!0)}function domainCheck(e,t,n){isLogarithmic(e)&&(Math.abs(t.reduce((function(e,t){return e+(t<0?-1:t>0?1:0)}),0))!==t.length&&n.warn("Log scale domain includes zero: "+Object(V.X)(t)));return t}function adjustScheme(e,t,n){return Object(V.D)(e)&&(t||n)?interpolateRange(e,flip(t||[0,1],n)):e}function flip(e,t){return t?e.slice().reverse():e}function SortItems(e){Transform.call(this,null,e)}Object(V.y)(Scale,Transform).transform=function(e,t){var n=t.dataflow,r=this.value,i=function scaleKey(e){var t,n=e.type,r="";if(n===Ua)return Ua+"-"+Ma;(function isContinuousColor(e){var t=e.type;return isContinuous(t)&&t!==Na&&t!==Ba&&(e.scheme||e.range&&e.range.length&&e.range.every(V.H))})(e)&&(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0,r=2===t?Ua+"-":3===t?za+"-":"");return(r+n||Ma).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=scales_scale(i)()),e)if(!wu[i]){if("padding"===i&&includePad(r.type))continue;Object(V.D)(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function configureRange(e,t,n){var r=e.type,i=t.round||!1,a=t.range;if(null!=t.rangeStep)a=function configureRangeStep(e,t,n){e!==Ya&&e!==Va&&Object(V.n)("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===Va?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Da(n,i,r)]}(r,t,n);else if(t.scheme&&(a=function configureScheme(e,t,n){var r,i,a=t.schemeExtent;Object(V.A)(t.scheme)?i=interpolateColors(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),(i=schemes_scheme(r))||Object(V.n)("Unrecognized scheme name: ".concat(t.scheme)));return n=e===Ga?n+1:e===$a?n-1:e===qa||e===Wa?+t.schemeCount||xu:n,isInterpolating(e)?adjustScheme(i,a,t.reverse):Object(V.D)(i)?quantizeInterpolator(adjustScheme(i,a),n):e===Ha?i:i.slice(0,n)}(r,t,n),Object(V.D)(a))){if(e.interpolator)return e.interpolator(a);Object(V.n)("Scale type ".concat(r," does not support interpolating color schemes."))}if(a&&isInterpolating(r))return e.interpolator(interpolateColors(flip(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(interpolate_interpolate(t.interpolate,t.interpolateGamma)):Object(V.D)(e.round)?e.round(i):Object(V.D)(e.rangeRound)&&e.interpolate(i?ws:_s);a&&e.range(flip(a,t.reverse))}(r,e,function configureBins(e,t,n){var r=t.bins;if(r&&!Object(V.A)(r)){var i=e.domain(),a=i[0],o=Object(V.S)(i),s=null==r.start?a:r.start,u=null==r.stop?o:r.stop,l=r.step;l||Object(V.n)("Scale bins parameter missing step property."),s<a&&(s=l*Math.ceil(a/l)),u>o&&(u=l*Math.floor(o/l)),r=pn(s,u+l/2,l)}r?e.bins=r:e.bins&&delete e.bins;e.type===$a&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function configureDomain(e,t,n){var r=function rawDomain(e,t,n){return t?(e.domain(domainCheck(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,a,o=t.domain,s=e.type,u=t.zero||void 0===t.zero&&function includeZero(e){var t=e.type;return!e.bins&&(t===Ma||t===Fa||t===Ia)}(e);if(!o)return 0;includePad(s)&&t.padding&&o[0]!==Object(V.S)(o)&&(o=function padDomain(e,t,n,r,i,a){var o=Math.abs(Object(V.S)(n)-n[0]),s=o/(o-2*r),u=e===ja?Object(V.jb)(t,null,s):e===Ia?Object(V.kb)(t,null,s,.5):e===Fa?Object(V.kb)(t,null,s,i||1):e===La?Object(V.lb)(t,null,s,a||1):Object(V.ib)(t,null,s);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(s,o,t.range,t.padding,t.exponent,t.constant));(u||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(o=o.slice()).length-1||1,u&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=t.domainMin&&(o[0]=t.domainMin),null!=t.domainMax&&(o[i]=t.domainMax),null!=t.domainMid&&(((a=t.domainMid)<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a)));e.domain(domainCheck(s,o,n)),s===Ha&&e.unknown(t.domainImplicit?xo:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&tickCount(e,t.nice)||null);return o.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)},Object(V.y)(SortItems,Transform).transform=function(e,t){var n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(stableCompare(e.sort)),this.modified(n),t};var ku=["y0","y1"];function Stack(e){Transform.call(this,null,e)}function stackCenter(e,t,n,r,i){for(var a,o=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(a=e[u])[r]=o,a[i]=o+=Math.abs(n(a))}function stackNormalize(e,t,n,r,i){for(var a,o=1/e.sum,s=0,u=e.length,l=0,c=0;l<u;++l)(a=e[l])[r]=s,a[i]=s=o*(c+=Math.abs(n(a)))}function stackZero(e,t,n,r,i){for(var a,o,s=0,u=0,l=e.length,c=0;c<l;++c)(a=+n(o=e[c]))<0?(o[r]=u,o[i]=u+=a):(o[r]=s,o[i]=s+=a)}Stack.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,default:ku}]},Object(V.y)(Stack,Transform).transform=function(e,t){var n,r,i,a,o=e.as||ku,s=o[0],u=o[1],l=stableCompare(e.sort),c=e.field||V.M,f="center"===e.offset?stackCenter:"normalize"===e.offset?stackNormalize:stackZero;for(n=function Stack_partition(e,t,n,r){var i,a,o,s,u,l,c,f,d,h=[],p=function get(e){return e(u)};if(null==t)h.push(e.slice());else for(i={},a=0,o=e.length;a<o;++a)u=e[a],l=t.map(p),(c=i[l])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(c=h[l],a=0,f=0,o=c.length;a<o;++a)f+=Math.abs(r(c[a]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,l,c),r=0,i=n.length,a=n.max;r<i;++r)f(n[r],a,c,s,u);return t.reflow(e.modified()).modifies(o)};var Su=function(e,t){var n,r;if(void 0===t){var i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;null!=l&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}}catch(v){a=!0,o=v}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var c=-1,f=!0,d=!1,h=void 0;try{for(var p,g=e[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value;null!=(m=t(m,++c,e))&&(void 0===n?m>=m&&(n=r=m):(n>m&&(n=m),r<m&&(r=m)))}}catch(v){d=!0,h=v}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}return[n,r]},Eu=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var Tu;1===(Tu=Eu).length&&(Tu=function bisector_ascendingComparator(e){return function(t,n){return Eu(e(t),n)}}(Tu));var Cu=function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},Ou=Array.prototype,Au=(Ou.slice,Ou.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}),Ru=Math.sqrt(50),Du=Math.sqrt(10),Pu=Math.sqrt(2);function ticks_tickStep(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Ru?i*=10:a>=Du?i*=5:a>=Pu&&(i*=2),t<e?-i:i}var Mu=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},ju=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r};var Fu=Array.prototype.slice,Iu=function(e,t){return e-t},Lu=function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r},Nu=function(e){return function(){return e}},Bu=function(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=ringContains(e,t[r]))return n;return 0};function ringContains(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,s=o-1;a<o;s=a++){var u=e[a],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(segmentContains(u,f,t))return 0;c>r!==h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function segmentContains(e,t,n){var r;return function collinear(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&function within(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}(e[r=+(e[0]===t[0])],n[r],t[r])}var Uu=function(){},zu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],qu=function(){var e=1,t=1,n=Mu,r=smoothLinear;function contours(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(Iu);else{var r=Cu(e),i=r[0],a=r[1];t=ticks_tickStep(i,a,t),t=Au(Math.floor(i/t)*t,Math.floor(a/t)*t,t)}return t.map((function(t){return contour(e,t)}))}function contour(n,i){var a=[],o=[];return function isorings(n,r,i){var a,o,s,u,l,c,f=new Array,d=new Array;a=o=-1,u=n[0]>=r,zu[u<<1].forEach(stitch);for(;++a<e-1;)s=u,u=n[a+1]>=r,zu[s|u<<1].forEach(stitch);zu[u<<0].forEach(stitch);for(;++o<t-1;){for(a=-1,u=n[o*e+e]>=r,l=n[o*e]>=r,zu[u<<1|l<<2].forEach(stitch);++a<e-1;)s=u,u=n[o*e+e+a+1]>=r,c=l,l=n[o*e+a+1]>=r,zu[s|u<<1|l<<2|c<<3].forEach(stitch);zu[u|l<<3].forEach(stitch)}a=-1,l=n[o*e]>=r,zu[l<<2].forEach(stitch);for(;++a<e-1;)c=l,l=n[o*e+a+1]>=r,zu[l<<2|c<<3].forEach(stitch);function stitch(e){var t,n,r=[e[0][0]+a,e[0][1]+o],s=[e[1][0]+a,e[1][1]+o],u=index(r),l=index(s);(t=d[u])?(n=f[l])?(delete d[t.end],delete f[n.start],t===n?(t.ring.push(s),i(t.ring)):f[t.start]=d[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete d[t.end],t.ring.push(s),d[t.end=l]=t):(t=f[l])?(n=d[u])?(delete f[t.start],delete d[n.end],t===n?(t.ring.push(s),i(t.ring)):f[n.start]=d[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete f[t.start],t.ring.unshift(r),f[t.start=u]=t):f[u]=d[l]={start:u,end:l,ring:[r,s]}}zu[l<<3].forEach(stitch)}(n,i,(function(e){r(e,n,i),Lu(e)>0?a.push([e]):o.push(e)})),o.forEach((function(e){for(var t,n=0,r=a.length;n<r;++n)if(-1!==Bu((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function index(t){return 2*t[0]+t[1]*(e+1)*4}function smoothLinear(n,r,i){n.forEach((function(n){var a,o=n[0],s=n[1],u=0|o,l=0|s,c=r[l*e+u];o>0&&o<e&&u===o&&(a=r[l*e+u-1],n[0]=o+(i-a)/(c-a)-.5),s>0&&s<t&&l===s&&(a=r[(l-1)*e+u],n[1]=s+(i-a)/(c-a)-.5)}))}return contours.contour=contour,contours.size=function(n){if(!arguments.length)return[e,t];var r=Math.ceil(n[0]),i=Math.ceil(n[1]);if(!(r>0)||!(i>0))throw new Error("invalid size");return e=r,t=i,contours},contours.thresholds=function(e){return arguments.length?(n="function"===typeof e?e:Array.isArray(e)?Nu(Fu.call(e)):Nu(e),contours):n},contours.smooth=function(e){return arguments.length?(r=e?smoothLinear:Uu,contours):r===smoothLinear},contours};function blurX(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=e.data[s+o*r]),s>=n&&(s>=a&&(u-=e.data[s-a+o*r]),t.data[s-n+o*r]=u/Math.min(s+1,r-1+a-s,a))}function blurY(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=e.data[o+s*r]),s>=n&&(s>=a&&(u-=e.data[o+(s-a)*r]),t.data[o+(s-n)*r]=u/Math.min(s+1,i-1+a-s,a))}function defaultX(e){return e[0]}function defaultY(e){return e[1]}function defaultWeight(){return 1}var Wu=["size","smooth"],Gu=["x","y","weight","size","cellSize","bandwidth"];function Contour(e){Transform.call(this,null,e)}Contour.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"smooth",type:"boolean"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0}]},Object(V.y)(Contour,Transform).transform=function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=e.count||10;return e.values?(n=qu(),r=Wu,i=e.values):(n=function(){var e=defaultX,t=defaultY,n=defaultWeight,r=960,i=500,a=20,o=2,s=3*a,u=r+2*s>>o,l=i+2*s>>o,c=Nu(20);function density(r){var i=new Float32Array(u*l),f=new Float32Array(u*l);r.forEach((function(r,a,c){var f=+e(r,a,c)+s>>o,d=+t(r,a,c)+s>>o,h=+n(r,a,c);f>=0&&f<u&&d>=0&&d<l&&(i[f+d*u]+=h)})),blurX({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),blurY({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o),blurX({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),blurY({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o),blurX({width:u,height:l,data:i},{width:u,height:l,data:f},a>>o),blurY({width:u,height:l,data:f},{width:u,height:l,data:i},a>>o);var d=c(i);if(!Array.isArray(d)){var h=ju(i);d=ticks_tickStep(0,h,d),(d=Au(0,Math.floor(h/d)*d,d)).shift()}return qu().thresholds(d).size([u,l])(i).map(transform)}function transform(e){return e.value*=Math.pow(2,-2*o),e.coordinates.forEach(transformPolygon),e}function transformPolygon(e){e.forEach(transformRing)}function transformRing(e){e.forEach(transformPoint)}function transformPoint(e){e[0]=e[0]*Math.pow(2,o)-s,e[1]=e[1]*Math.pow(2,o)-s}function resize(){return u=r+2*(s=3*a)>>o,l=i+2*s>>o,density}return density.x=function(t){return arguments.length?(e="function"===typeof t?t:Nu(+t),density):e},density.y=function(e){return arguments.length?(t="function"===typeof e?e:Nu(+e),density):t},density.weight=function(e){return arguments.length?(n="function"===typeof e?e:Nu(+e),density):n},density.size=function(e){if(!arguments.length)return[r,i];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0)&&!(t>=0))throw new Error("invalid size");return r=t,i=n,resize()},density.cellSize=function(e){if(!arguments.length)return 1<<o;if(!((e=+e)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(e)/Math.LN2),resize()},density.thresholds=function(e){return arguments.length?(c="function"===typeof e?e:Array.isArray(e)?Nu(Fu.call(e)):Nu(e),density):c},density.bandwidth=function(e){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*e*e+1)-1)/2),resize()},density}(),r=Gu,i=t.materialize(t.SOURCE).source),n.thresholds(e.thresholds||(e.nice?o:function Contour_quantize(e){return function(t){for(var n=Su(t),r=n[0],i=n[1]-r,a=[],o=1;o<=e;++o)a.push(r+i*o/(e+1));return a}}(o))),r.forEach((function(t){null!=e[t]&&n[t](e[t])})),this.value&&(a.rem=this.value),i=i&&i.length?n(i).map(ingest):[],this.value=a.source=a.add=i,a};var Hu="Feature",Vu="FeatureCollection";function GeoJSON(e){Transform.call(this,null,e)}GeoJSON.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Object(V.y)(GeoJSON,Transform).transform=function(e,t){var n,r=this._features,i=this._points,a=e.fields,o=a&&a[0],s=a&&a[1],u=e.geojson,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(Object(V.g)(u))||o&&t.modified(Object(V.g)(o))||s&&t.modified(Object(V.g)(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),u&&t.visit(l,(function(e){r.push(u(e))})),o&&s&&(t.visit(l,(function(e){var t=o(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:Hu,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:Vu,features:r}};var Yu=function(){return new Adder};function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function reset(){this.s=this.t=0},add:function add(e){adder_add($u,e,this.t),adder_add(this,$u.s,this.s),this.s?this.t+=$u.t:this.s=$u.t},valueOf:function valueOf(){return this.s}};var $u=new Adder;function adder_add(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}var Xu=1e-6,Ku=1e-12,Ju=Math.PI,Zu=Ju/2,Qu=Ju/4,el=2*Ju,tl=180/Ju,nl=Ju/180,rl=Math.abs,il=Math.atan,al=Math.atan2,ol=Math.cos,sl=Math.ceil,ul=Math.exp,ll=(Math.floor,Math.log),cl=Math.pow,fl=Math.sin,dl=Math.sign||function(e){return e>0?1:e<0?-1:0},hl=Math.sqrt,pl=Math.tan;function math_acos(e){return e>1?0:e<-1?Ju:Math.acos(e)}function math_asin(e){return e>1?Zu:e<-1?-Zu:Math.asin(e)}function noop_noop(){}function streamGeometry(e,t){e&&ml.hasOwnProperty(e.type)&&ml[e.type](e,t)}var gl={Feature:function Feature(e,t){streamGeometry(e.geometry,t)},FeatureCollection:function FeatureCollection(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)streamGeometry(n[r].geometry,t)}},ml={Sphere:function Sphere(e,t){t.sphere()},Point:function Point(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function MultiPoint(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function LineString(e,t){streamLine(e.coordinates,t,0)},MultiLineString:function MultiLineString(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamLine(n[r],t,0)},Polygon:function Polygon(e,t){streamPolygon(e.coordinates,t)},MultiPolygon:function MultiPolygon(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)streamPolygon(n[r],t)},GeometryCollection:function GeometryCollection(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)streamGeometry(n[r],t)}};function streamLine(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function streamPolygon(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)streamLine(e[n],t,1);t.polygonEnd()}var vl,yl,_l,bl,xl,wl=function(e,t){e&&gl.hasOwnProperty(e.type)?gl[e.type](e,t):streamGeometry(e,t)},kl=Yu(),Sl=Yu(),El={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function polygonStart(){kl.reset(),El.lineStart=areaRingStart,El.lineEnd=areaRingEnd},polygonEnd:function polygonEnd(){var e=+kl;Sl.add(e<0?el+e:e),this.lineStart=this.lineEnd=this.point=noop_noop},sphere:function sphere(){Sl.add(el)}};function areaRingStart(){El.point=areaPointFirst}function areaRingEnd(){areaPoint(vl,yl)}function areaPointFirst(e,t){El.point=areaPoint,vl=e,yl=t,_l=e*=nl,bl=ol(t=(t*=nl)/2+Qu),xl=fl(t)}function areaPoint(e,t){var n=(e*=nl)-_l,r=n>=0?1:-1,i=r*n,a=ol(t=(t*=nl)/2+Qu),o=fl(t),s=xl*o,u=bl*a+s*ol(i),l=s*r*fl(i);kl.add(al(l,u)),_l=e,bl=a,xl=o}function cartesian_spherical(e){return[al(e[1],e[0]),math_asin(e[2])]}function cartesian_cartesian(e){var t=e[0],n=e[1],r=ol(n);return[r*ol(t),r*fl(t),fl(n)]}function cartesianDot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cartesianCross(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function cartesianAddInPlace(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cartesianScale(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cartesianNormalizeInPlace(e){var t=hl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Tl,Cl,Ol,Al,Rl,Dl,Pl,Ml,jl,Fl,Il=Yu(),Ll={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function polygonStart(){Ll.point=boundsRingPoint,Ll.lineStart=boundsRingStart,Ll.lineEnd=boundsRingEnd,Il.reset(),El.polygonStart()},polygonEnd:function polygonEnd(){El.polygonEnd(),Ll.point=boundsPoint,Ll.lineStart=boundsLineStart,Ll.lineEnd=boundsLineEnd,kl<0?(Tl=-(Ol=180),Cl=-(Al=90)):Il>Xu?Al=90:Il<-Xu&&(Cl=-90),Fl[0]=Tl,Fl[1]=Ol},sphere:function sphere(){Tl=-(Ol=180),Cl=-(Al=90)}};function boundsPoint(e,t){jl.push(Fl=[Tl=e,Ol=e]),t<Cl&&(Cl=t),t>Al&&(Al=t)}function bounds_linePoint(e,t){var n=cartesian_cartesian([e*nl,t*nl]);if(Ml){var r=cartesianCross(Ml,n),i=cartesianCross([r[1],-r[0],0],r);cartesianNormalizeInPlace(i),i=cartesian_spherical(i);var a,o=e-Rl,s=o>0?1:-1,u=i[0]*tl*s,l=rl(o)>180;l^(s*Rl<u&&u<s*e)?(a=i[1]*tl)>Al&&(Al=a):l^(s*Rl<(u=(u+360)%360-180)&&u<s*e)?(a=-i[1]*tl)<Cl&&(Cl=a):(t<Cl&&(Cl=t),t>Al&&(Al=t)),l?e<Rl?bounds_angle(Tl,e)>bounds_angle(Tl,Ol)&&(Ol=e):bounds_angle(e,Ol)>bounds_angle(Tl,Ol)&&(Tl=e):Ol>=Tl?(e<Tl&&(Tl=e),e>Ol&&(Ol=e)):e>Rl?bounds_angle(Tl,e)>bounds_angle(Tl,Ol)&&(Ol=e):bounds_angle(e,Ol)>bounds_angle(Tl,Ol)&&(Tl=e)}else jl.push(Fl=[Tl=e,Ol=e]);t<Cl&&(Cl=t),t>Al&&(Al=t),Ml=n,Rl=e}function boundsLineStart(){Ll.point=bounds_linePoint}function boundsLineEnd(){Fl[0]=Tl,Fl[1]=Ol,Ll.point=boundsPoint,Ml=null}function boundsRingPoint(e,t){if(Ml){var n=e-Rl;Il.add(rl(n)>180?n+(n>0?360:-360):n)}else Dl=e,Pl=t;El.point(e,t),bounds_linePoint(e,t)}function boundsRingStart(){El.lineStart()}function boundsRingEnd(){boundsRingPoint(Dl,Pl),El.lineEnd(),rl(Il)>Xu&&(Tl=-(Ol=180)),Fl[0]=Tl,Fl[1]=Ol,Ml=null}function bounds_angle(e,t){return(t-=e)<0?t+360:t}function rangeCompare(e,t){return e[0]-t[0]}function rangeContains(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Nl,Bl,Ul,zl,ql,Wl,Gl,Hl,Vl,Yl,$l,Xl,Kl,Jl,Zl,Ql,ec={sphere:noop_noop,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function polygonStart(){ec.lineStart=centroidRingStart,ec.lineEnd=centroidRingEnd},polygonEnd:function polygonEnd(){ec.lineStart=centroidLineStart,ec.lineEnd=centroidLineEnd}};function centroidPoint(e,t){e*=nl;var n=ol(t*=nl);centroidPointCartesian(n*ol(e),n*fl(e),fl(t))}function centroidPointCartesian(e,t,n){Ul+=(e-Ul)/++Nl,zl+=(t-zl)/Nl,ql+=(n-ql)/Nl}function centroidLineStart(){ec.point=centroidLinePointFirst}function centroidLinePointFirst(e,t){e*=nl;var n=ol(t*=nl);Jl=n*ol(e),Zl=n*fl(e),Ql=fl(t),ec.point=centroidLinePoint,centroidPointCartesian(Jl,Zl,Ql)}function centroidLinePoint(e,t){e*=nl;var n=ol(t*=nl),r=n*ol(e),i=n*fl(e),a=fl(t),o=al(hl((o=Zl*a-Ql*i)*o+(o=Ql*r-Jl*a)*o+(o=Jl*i-Zl*r)*o),Jl*r+Zl*i+Ql*a);Bl+=o,Wl+=o*(Jl+(Jl=r)),Gl+=o*(Zl+(Zl=i)),Hl+=o*(Ql+(Ql=a)),centroidPointCartesian(Jl,Zl,Ql)}function centroidLineEnd(){ec.point=centroidPoint}function centroidRingStart(){ec.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(Xl,Kl),ec.point=centroidPoint}function centroidRingPointFirst(e,t){Xl=e,Kl=t,e*=nl,t*=nl,ec.point=centroidRingPoint;var n=ol(t);Jl=n*ol(e),Zl=n*fl(e),Ql=fl(t),centroidPointCartesian(Jl,Zl,Ql)}function centroidRingPoint(e,t){e*=nl;var n=ol(t*=nl),r=n*ol(e),i=n*fl(e),a=fl(t),o=Zl*a-Ql*i,s=Ql*r-Jl*a,u=Jl*i-Zl*r,l=hl(o*o+s*s+u*u),c=math_asin(l),f=l&&-c/l;Vl+=f*o,Yl+=f*s,$l+=f*u,Bl+=c,Wl+=c*(Jl+(Jl=r)),Gl+=c*(Zl+(Zl=i)),Hl+=c*(Ql+(Ql=a)),centroidPointCartesian(Jl,Zl,Ql)}var tc=function(e,t){function compose(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(compose.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),compose};function rotationIdentity(e,t){return[rl(e)>Ju?e+Math.round(-e/el)*el:e,t]}function rotateRadians(e,t,n){return(e%=el)?t||n?tc(rotationLambda(e),rotationPhiGamma(t,n)):rotationLambda(e):t||n?rotationPhiGamma(t,n):rotationIdentity}function forwardRotationLambda(e){return function(t,n){return[(t+=e)>Ju?t-el:t<-Ju?t+el:t,n]}}function rotationLambda(e){var t=forwardRotationLambda(e);return t.invert=forwardRotationLambda(-e),t}function rotationPhiGamma(e,t){var n=ol(e),r=fl(e),i=ol(t),a=fl(t);function rotation(e,t){var o=ol(t),s=ol(e)*o,u=fl(e)*o,l=fl(t),c=l*n+s*r;return[al(u*i-c*a,s*n-l*r),math_asin(c*i+u*a)]}return rotation.invert=function(e,t){var o=ol(t),s=ol(e)*o,u=fl(e)*o,l=fl(t),c=l*i-u*a;return[al(u*i+l*a,s*n+c*r),math_asin(c*n-s*r)]},rotation}rotationIdentity.invert=rotationIdentity;var nc=function(e){function forward(t){return(t=e(t[0]*nl,t[1]*nl))[0]*=tl,t[1]*=tl,t}return e=rotateRadians(e[0]*nl,e[1]*nl,e.length>2?e[2]*nl:0),forward.invert=function(t){return(t=e.invert(t[0]*nl,t[1]*nl))[0]*=tl,t[1]*=tl,t},forward};function circleStream(e,t,n,r,i,a){if(n){var o=ol(t),s=fl(t),u=r*n;null==i?(i=t+r*el,a=t-u/2):(i=circleRadius(o,i),a=circleRadius(o,a),(r>0?i<a:i>a)&&(i+=r*el));for(var l,c=i;r>0?c>a:c<a;c-=u)l=cartesian_spherical([o,-s*ol(c),-s*fl(c)]),e.point(l[0],l[1])}}function circleRadius(e,t){(t=cartesian_cartesian(t))[0]-=e,cartesianNormalizeInPlace(t);var n=math_acos(-t[1]);return((-t[2]<0?-n:n)+el-Xu)%el}var rc=function(){var e,t=[];return{point:function point(t,n){e.push([t,n])},lineStart:function lineStart(){t.push(e=[])},lineEnd:noop_noop,rejoin:function rejoin(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function result(){var result=t;return t=[],e=null,result}}},ic=function(e,t){return rl(e[0]-t[0])<Xu&&rl(e[1]-t[1])<Xu};function Intersection(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var ac=function(e,t,n,r,i){var a,o,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(ic(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);i.lineEnd()}else s.push(n=new Intersection(r,e,null,!0)),u.push(n.o=new Intersection(r,null,n,!1)),s.push(n=new Intersection(o,e,null,!1)),u.push(n.o=new Intersection(o,null,n,!0))}})),s.length){for(u.sort(t),rejoin_link(s),rejoin_link(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function rejoin_link(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}var oc=Yu();function longitude(e){return rl(e[0])<=Ju?e[0]:dl(e[0])*((rl(e[0])+Ju)%el-Ju)}var sc=function(e,t){var n=longitude(t),r=t[1],i=fl(r),a=[fl(n),-ol(n),0],o=0,s=0;oc.reset(),1===i?r=Zu+Xu:-1===i&&(r=-Zu-Xu);for(var u=0,l=e.length;u<l;++u)if(f=(c=e[u]).length)for(var c,f,d=c[f-1],h=longitude(d),p=d[1]/2+Qu,g=fl(p),m=ol(p),v=0;v<f;++v,h=_,g=x,m=w,d=y){var y=c[v],_=longitude(y),b=y[1]/2+Qu,x=fl(b),w=ol(b),k=_-h,S=k>=0?1:-1,E=S*k,T=E>Ju,C=g*x;if(oc.add(al(C*S*fl(E),m*w+C*ol(E))),o+=T?k+S*el:k,T^h>=n^_>=n){var O=cartesianCross(cartesian_cartesian(d),cartesian_cartesian(y));cartesianNormalizeInPlace(O);var A=cartesianCross(a,O);cartesianNormalizeInPlace(A);var R=(T^k>=0?-1:1)*math_asin(A[2]);(r>R||r===R&&(O[0]||O[1]))&&(s+=T^k>=0?1:-1)}}return(o<-Xu||o<Xu&&oc<-Xu)^1&s},uc=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN};var lc=function(e){return 1===e.length&&(e=function src_bisector_ascendingComparator(e){return function(t,n){return uc(e(t),n)}}(e)),{left:function left(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function right(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}(uc);lc.right,lc.left;var cc=Array.prototype,fc=(cc.slice,cc.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var dc=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n};var hc=function(e,t,n,r){return function(i){var a,o,s,u=t(i),l=rc(),c=t(l),f=!1,d={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function polygonStart(){d.point=pointRing,d.lineStart=ringStart,d.lineEnd=ringEnd,o=[],a=[]},polygonEnd:function polygonEnd(){d.point=point,d.lineStart=lineStart,d.lineEnd=lineEnd,o=dc(o);var e=sc(a,r);o.length?(f||(i.polygonStart(),f=!0),ac(o,clip_compareIntersection,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),o=a=null},sphere:function sphere(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function point(t,n){e(t,n)&&i.point(t,n)}function pointLine(e,t){u.point(e,t)}function lineStart(){d.point=pointLine,u.lineStart()}function lineEnd(){d.point=point,u.lineEnd()}function pointRing(e,t){s.push([e,t]),c.point(e,t)}function ringStart(){c.lineStart(),s=[]}function ringEnd(){pointRing(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),a.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),o.push(d.filter(validSegment))}return d}};function validSegment(e){return e.length>1}function clip_compareIntersection(e,t){return((e=e.x)[0]<0?e[1]-Zu-Xu:Zu-e[1])-((t=t.x)[0]<0?t[1]-Zu-Xu:Zu-t[1])}var pc=hc((function(){return!0}),(function clipAntimeridianLine(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function lineStart(){e.lineStart(),t=1},point:function point(a,o){var s=a>0?Ju:-Ju,u=rl(a-n);rl(u-Ju)<Xu?(e.point(n,r=(r+o)/2>0?Zu:-Zu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&u>=Ju&&(rl(n-i)<Xu&&(n-=i*Xu),rl(a-s)<Xu&&(a-=s*Xu),r=function clipAntimeridianIntersect(e,t,n,r){var i,a,o=fl(e-n);return rl(o)>Xu?il((fl(t)*(a=ol(r))*fl(n)-fl(r)*(i=ol(t))*fl(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function lineEnd(){e.lineEnd(),n=r=NaN},clean:function clean(){return 2-t}}}),(function clipAntimeridianInterpolate(e,t,n,r){var i;if(null==e)i=n*Zu,r.point(-Ju,i),r.point(0,i),r.point(Ju,i),r.point(Ju,0),r.point(Ju,-i),r.point(0,-i),r.point(-Ju,-i),r.point(-Ju,0),r.point(-Ju,i);else if(rl(e[0]-t[0])>Xu){var a=e[0]<t[0]?Ju:-Ju;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-Ju,-Zu]);var gc=function(e){var t=ol(e),n=6*nl,r=t>0,i=rl(t)>Xu;function visible(e,n){return ol(e)*ol(n)>t}function intersect(e,n,r){var i=[1,0,0],a=cartesianCross(cartesian_cartesian(e),cartesian_cartesian(n)),o=cartesianDot(a,a),s=a[0],u=o-s*s;if(!u)return!r&&e;var l=t*o/u,c=-t*s/u,f=cartesianCross(i,a),d=cartesianScale(i,l);cartesianAddInPlace(d,cartesianScale(a,c));var h=f,p=cartesianDot(d,h),g=cartesianDot(h,h),m=p*p-g*(cartesianDot(d,d)-1);if(!(m<0)){var v=hl(m),y=cartesianScale(h,(-p-v)/g);if(cartesianAddInPlace(y,d),y=cartesian_spherical(y),!r)return y;var _,b=e[0],x=n[0],w=e[1],k=n[1];x<b&&(_=b,b=x,x=_);var S=x-b,E=rl(S-Ju)<Xu;if(!E&&k<w&&(_=w,w=k,k=_),E||S<Xu?E?w+k>0^y[1]<(rl(y[0]-b)<Xu?w:k):w<=y[1]&&y[1]<=k:S>Ju^(b<=y[0]&&y[0]<=x)){var T=cartesianScale(h,(-p+v)/g);return cartesianAddInPlace(T,d),[y,cartesian_spherical(T)]}}}function code(t,n){var i=r?e:Ju-e,a=0;return t<-i?a|=1:t>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return hc(visible,(function clipLine(e){var t,n,a,o,s;return{lineStart:function lineStart(){o=a=!1,s=1},point:function point(u,l){var c,f=[u,l],d=visible(u,l),h=r?d?0:code(u,l):d?code(u+(u<0?Ju:-Ju),l):0;if(!t&&(o=a=d)&&e.lineStart(),d!==a&&(!(c=intersect(t,f))||ic(t,c)||ic(f,c))&&(f[0]+=Xu,f[1]+=Xu,d=visible(f[0],f[1])),d!==a)s=0,d?(e.lineStart(),c=intersect(f,t),e.point(c[0],c[1])):(c=intersect(t,f),e.point(c[0],c[1]),e.lineEnd()),t=c;else if(i&&t&&r^d){var p;h&n||!(p=intersect(f,t,!0))||(s=0,r?(e.lineStart(),e.point(p[0][0],p[0][1]),e.point(p[1][0],p[1][1]),e.lineEnd()):(e.point(p[1][0],p[1][1]),e.lineEnd(),e.lineStart(),e.point(p[0][0],p[0][1])))}!d||t&&ic(t,f)||e.point(f[0],f[1]),t=f,a=d,n=h},lineEnd:function lineEnd(){a&&e.lineEnd(),t=null},clean:function clean(){return s|(o&&a)<<1}}}),(function interpolate(t,r,i,a){circleStream(a,e,n,i,t,r)}),r?[0,-e]:[-Ju,e-Ju])},mc=function(e,t,n,r,i,a){var o,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<c&&(c=o)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}},vc=1e9,yc=-vc;function clipRectangle(e,t,n,r){function visible(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function interpolate(i,a,o,s){var u=0,l=0;if(null==i||(u=corner(i,o))!==(l=corner(a,o))||comparePoint(i,a)<0^o>0)do{s.point(0===u||3===u?e:n,u>1?r:t)}while((u=(u+o+4)%4)!==l);else s.point(a[0],a[1])}function corner(r,i){return rl(r[0]-e)<Xu?i>0?0:3:rl(r[0]-n)<Xu?i>0?2:1:rl(r[1]-t)<Xu?i>0?1:0:i>0?3:2}function compareIntersection(e,t){return comparePoint(e.x,t.x)}function comparePoint(e,t){var n=corner(e,1),r=corner(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(i){var a,o,s,u,l,c,f,d,h,p,g,m=i,v=rc(),y={point:point,lineStart:function lineStart(){y.point=linePoint,o&&o.push(s=[]);p=!0,h=!1,f=d=NaN},lineEnd:function lineEnd(){a&&(linePoint(u,l),c&&h&&v.rejoin(),a.push(v.result()));y.point=point,h&&m.lineEnd()},polygonStart:function polygonStart(){m=v,a=[],o=[],g=!0},polygonEnd:function polygonEnd(){var t=function polygonInside(){for(var t=0,n=0,i=o.length;n<i;++n)for(var a,s,u=o[n],l=1,c=u.length,f=u[0],d=f[0],h=f[1];l<c;++l)a=d,s=h,f=u[l],d=f[0],h=f[1],s<=r?h>r&&(d-a)*(r-s)>(h-s)*(e-a)&&++t:h<=r&&(d-a)*(r-s)<(h-s)*(e-a)&&--t;return t}(),n=g&&t,u=(a=dc(a)).length;(n||u)&&(i.polygonStart(),n&&(i.lineStart(),interpolate(null,null,1,i),i.lineEnd()),u&&ac(a,compareIntersection,t,interpolate,i),i.polygonEnd());m=i,a=o=s=null}};function point(e,t){visible(e,t)&&m.point(e,t)}function linePoint(i,a){var v=visible(i,a);if(o&&s.push([i,a]),p)u=i,l=a,c=v,p=!1,v&&(m.lineStart(),m.point(i,a));else if(v&&h)m.point(i,a);else{var y=[f=Math.max(yc,Math.min(vc,f)),d=Math.max(yc,Math.min(vc,d))],_=[i=Math.max(yc,Math.min(vc,i)),a=Math.max(yc,Math.min(vc,a))];mc(y,_,e,t,n,r)?(h||(m.lineStart(),m.point(y[0],y[1])),m.point(_[0],_[1]),v||m.lineEnd(),g=!1):v&&(m.lineStart(),m.point(i,a),g=!1)}f=i,d=a,h=v}return y}}Yu();function graticuleX(e,t,n){var r=fc(e,t-Xu,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function graticuleY(e,t,n){var r=fc(e,t-Xu,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function graticule_graticule(){var e,t,n,r,i,a,o,s,u,l,c,f,d=10,h=d,p=90,g=360,m=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return fc(sl(r/p)*p,n,p).map(c).concat(fc(sl(s/g)*g,o,g).map(f)).concat(fc(sl(t/d)*d,e,d).filter((function(e){return rl(e%p)>Xu})).map(u)).concat(fc(sl(a/h)*h,i,h).filter((function(e){return rl(e%g)>Xu})).map(l))}return graticule.lines=function(){return lines().map((function(e){return{type:"LineString",coordinates:e}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(o).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},graticule.extent=function(e){return arguments.length?graticule.extentMajor(e).extentMinor(e):graticule.extentMinor()},graticule.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),graticule.precision(m)):[[r,s],[n,o]]},graticule.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],a=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),a>i&&(n=a,a=i,i=n),graticule.precision(m)):[[t,a],[e,i]]},graticule.step=function(e){return arguments.length?graticule.stepMajor(e).stepMinor(e):graticule.stepMinor()},graticule.stepMajor=function(e){return arguments.length?(p=+e[0],g=+e[1],graticule):[p,g]},graticule.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],graticule):[d,h]},graticule.precision=function(d){return arguments.length?(m=+d,u=graticuleX(a,i,90),l=graticuleY(t,e,m),c=graticuleX(s,o,90),f=graticuleY(r,n,m),graticule):m},graticule.extentMajor([[-180,-90+Xu],[180,90-Xu]]).extentMinor([[-180,-80-Xu],[180,80+Xu]])}var _c,bc,xc,wc,kc=function(e){return e},Sc=Yu(),Ec=Yu(),Tc={point:noop_noop,lineStart:noop_noop,lineEnd:noop_noop,polygonStart:function polygonStart(){Tc.lineStart=area_areaRingStart,Tc.lineEnd=area_areaRingEnd},polygonEnd:function polygonEnd(){Tc.lineStart=Tc.lineEnd=Tc.point=noop_noop,Sc.add(rl(Ec)),Ec.reset()},result:function result(){var e=Sc/2;return Sc.reset(),e}};function area_areaRingStart(){Tc.point=area_areaPointFirst}function area_areaPointFirst(e,t){Tc.point=area_areaPoint,_c=xc=e,bc=wc=t}function area_areaPoint(e,t){Ec.add(wc*e-xc*t),xc=e,wc=t}function area_areaRingEnd(){area_areaPoint(_c,bc)}var Cc=Tc,Oc=1/0,Ac=Oc,Rc=-Oc,Dc=Rc;var Pc,Mc,jc,Fc,Ic={point:function bounds_boundsPoint(e,t){e<Oc&&(Oc=e);e>Rc&&(Rc=e);t<Ac&&(Ac=t);t>Dc&&(Dc=t)},lineStart:noop_noop,lineEnd:noop_noop,polygonStart:noop_noop,polygonEnd:noop_noop,result:function result(){var e=[[Oc,Ac],[Rc,Dc]];return Rc=Dc=-(Ac=Oc=1/0),e}},Lc=0,Nc=0,Bc=0,Uc=0,zc=0,qc=0,Wc=0,Gc=0,Hc=0,Vc={point:centroid_centroidPoint,lineStart:centroid_centroidLineStart,lineEnd:centroid_centroidLineEnd,polygonStart:function polygonStart(){Vc.lineStart=centroid_centroidRingStart,Vc.lineEnd=centroid_centroidRingEnd},polygonEnd:function polygonEnd(){Vc.point=centroid_centroidPoint,Vc.lineStart=centroid_centroidLineStart,Vc.lineEnd=centroid_centroidLineEnd},result:function result(){var e=Hc?[Wc/Hc,Gc/Hc]:qc?[Uc/qc,zc/qc]:Bc?[Lc/Bc,Nc/Bc]:[NaN,NaN];return Lc=Nc=Bc=Uc=zc=qc=Wc=Gc=Hc=0,e}};function centroid_centroidPoint(e,t){Lc+=e,Nc+=t,++Bc}function centroid_centroidLineStart(){Vc.point=centroidPointFirstLine}function centroidPointFirstLine(e,t){Vc.point=centroidPointLine,centroid_centroidPoint(jc=e,Fc=t)}function centroidPointLine(e,t){var n=e-jc,r=t-Fc,i=hl(n*n+r*r);Uc+=i*(jc+e)/2,zc+=i*(Fc+t)/2,qc+=i,centroid_centroidPoint(jc=e,Fc=t)}function centroid_centroidLineEnd(){Vc.point=centroid_centroidPoint}function centroid_centroidRingStart(){Vc.point=centroidPointFirstRing}function centroid_centroidRingEnd(){centroidPointRing(Pc,Mc)}function centroidPointFirstRing(e,t){Vc.point=centroidPointRing,centroid_centroidPoint(Pc=jc=e,Mc=Fc=t)}function centroidPointRing(e,t){var n=e-jc,r=t-Fc,i=hl(n*n+r*r);Uc+=i*(jc+e)/2,zc+=i*(Fc+t)/2,qc+=i,Wc+=(i=Fc*e-jc*t)*(jc+e),Gc+=i*(Fc+t),Hc+=3*i,centroid_centroidPoint(jc=e,Fc=t)}var Yc=Vc;function PathContext(e){this._context=e}PathContext.prototype={_radius:4.5,pointRadius:function pointRadius(e){return this._radius=e,this},polygonStart:function polygonStart(){this._line=0},polygonEnd:function polygonEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){0===this._line&&this._context.closePath(),this._point=NaN},point:function point(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,el)}},result:noop_noop};var $c,Xc,Kc,Jc,Zc,Qc=Yu(),ef={point:noop_noop,lineStart:function lineStart(){ef.point=measure_lengthPointFirst},lineEnd:function lineEnd(){$c&&measure_lengthPoint(Xc,Kc),ef.point=noop_noop},polygonStart:function polygonStart(){$c=!0},polygonEnd:function polygonEnd(){$c=null},result:function result(){var e=+Qc;return Qc.reset(),e}};function measure_lengthPointFirst(e,t){ef.point=measure_lengthPoint,Xc=Jc=e,Kc=Zc=t}function measure_lengthPoint(e,t){Jc-=e,Zc-=t,Qc.add(hl(Jc*Jc+Zc*Zc)),Jc=e,Zc=t}var tf=ef;function PathString(){this._string=[]}function string_circle(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function pointRadius(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function polygonStart(){this._line=0},polygonEnd:function polygonEnd(){this._line=NaN},lineStart:function lineStart(){this._point=0},lineEnd:function lineEnd(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function point(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function result(){if(this._string.length){var result=this._string.join("");return this._string=[],result}return null}};var nf=function(e,t){var n,r,i=4.5;function path(e){return e&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),wl(e,n(r))),r.result()}return path.area=function(e){return wl(e,n(Cc)),Cc.result()},path.measure=function(e){return wl(e,n(tf)),tf.result()},path.bounds=function(e){return wl(e,n(Ic)),Ic.result()},path.centroid=function(e){return wl(e,n(Yc)),Yc.result()},path.projection=function(t){return arguments.length?(n=null==t?(e=null,kc):(e=t).stream,path):e},path.context=function(e){return arguments.length?(r=null==e?(t=null,new PathString):new PathContext(t=e),"function"!==typeof i&&r.pointRadius(i),path):t},path.pointRadius=function(e){return arguments.length?(i="function"===typeof e?e:(r.pointRadius(+e),+e),path):i},path.projection(e).context(t)};function transform_transformer(e){return function(t){var n=new TransformStream;for(var r in e)n[r]=e[r];return n.stream=t,n}}function TransformStream(){}function fit_fit(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),wl(n,e.stream(Ic)),t(Ic.result()),null!=r&&e.clipExtent(r),e}function fit_fitExtent(e,t,n){return fit_fit(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,s])}),n)}function fit_fitSize(e,t,n){return fit_fitExtent(e,[[0,0],t],n)}function fit_fitWidth(e,t,n){return fit_fit(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])}),n)}function fit_fitHeight(e,t,n){return fit_fit(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])}),n)}TransformStream.prototype={constructor:TransformStream,point:function point(e,t){this.stream.point(e,t)},sphere:function sphere(){this.stream.sphere()},lineStart:function lineStart(){this.stream.lineStart()},lineEnd:function lineEnd(){this.stream.lineEnd()},polygonStart:function polygonStart(){this.stream.polygonStart()},polygonEnd:function polygonEnd(){this.stream.polygonEnd()}};var rf=16,af=ol(30*nl),of=function(e,t){return+t?function resample_resample(e,t){function resampleLineTo(n,r,i,a,o,s,u,l,c,f,d,h,p,g){var m=u-n,v=l-r,y=m*m+v*v;if(y>4*t&&p--){var _=a+f,b=o+d,x=s+h,w=hl(_*_+b*b+x*x),k=math_asin(x/=w),S=rl(rl(x)-1)<Xu||rl(i-c)<Xu?(i+c)/2:al(b,_),E=e(S,k),T=E[0],C=E[1],O=T-n,A=C-r,R=v*O-m*A;(R*R/y>t||rl((m*O+v*A)/y-.5)>.3||a*f+o*d+s*h<af)&&(resampleLineTo(n,r,i,a,o,s,T,C,S,_/=w,b/=w,x,p,g),g.point(T,C),resampleLineTo(T,C,S,_,b,x,u,l,c,f,d,h,p,g))}}return function(t){var n,r,i,a,o,s,u,l,c,f,d,h,p={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function polygonStart(){t.polygonStart(),p.lineStart=ringStart},polygonEnd:function polygonEnd(){t.polygonEnd(),p.lineStart=lineStart}};function point(n,r){n=e(n,r),t.point(n[0],n[1])}function lineStart(){l=NaN,p.point=linePoint,t.lineStart()}function linePoint(n,r){var i=cartesian_cartesian([n,r]),a=e(n,r);resampleLineTo(l,c,u,f,d,h,l=a[0],c=a[1],u=n,f=i[0],d=i[1],h=i[2],rf,t),t.point(l,c)}function lineEnd(){p.point=point,t.lineEnd()}function ringStart(){lineStart(),p.point=ringPoint,p.lineEnd=ringEnd}function ringPoint(e,t){linePoint(n=e,t),r=l,i=c,a=f,o=d,s=h,p.point=linePoint}function ringEnd(){resampleLineTo(l,c,u,f,d,h,r,i,n,a,o,s,rf,t),p.lineEnd=lineEnd,lineEnd()}return p}}(e,t):function resampleNone(e){return transform_transformer({point:function point(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var sf=transform_transformer({point:function point(e,t){this.stream.point(e*nl,t*nl)}});function scaleTranslate(e,t,n){function transform(r,i){return[t+e*r,n-e*i]}return transform.invert=function(r,i){return[(r-t)/e,(n-i)/e]},transform}function scaleTranslateRotate(e,t,n,r){var i=ol(r),a=fl(r),o=i*e,s=a*e,u=i/e,l=a/e,c=(a*n-i*t)/e,f=(a*t+i*n)/e;function transform(e,r){return[o*e-s*r+t,n-s*e-o*r]}return transform.invert=function(e,t){return[u*e-l*t+c,f-l*e-u*t]},transform}function projection_projection(e){return projectionMutator((function(){return e}))()}function projectionMutator(e){var t,n,r,i,a,o,s,u,l,c,f=150,d=480,h=250,p=0,g=0,m=0,v=0,y=0,_=0,b=null,x=pc,w=null,k=kc,S=.5;function projection(e){return u(e[0]*nl,e[1]*nl)}function invert(e){return(e=u.invert(e[0],e[1]))&&[e[0]*tl,e[1]*tl]}function recenter(){var e=scaleTranslateRotate(f,0,0,_).apply(null,t(p,g)),r=(_?scaleTranslateRotate:scaleTranslate)(f,d-e[0],h-e[1],_);return n=rotateRadians(m,v,y),s=tc(t,r),u=tc(n,s),o=of(s,S),reset()}function reset(){return l=c=null,projection}return projection.stream=function(e){return l&&c===e?l:l=sf(function transformRotate(e){return transform_transformer({point:function point(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(x(o(k(c=e)))))},projection.preclip=function(e){return arguments.length?(x=e,b=void 0,reset()):x},projection.postclip=function(e){return arguments.length?(k=e,w=r=i=a=null,reset()):k},projection.clipAngle=function(e){return arguments.length?(x=+e?gc(b=e*nl):(b=null,pc),reset()):b*tl},projection.clipExtent=function(e){return arguments.length?(k=null==e?(w=r=i=a=null,kc):clipRectangle(w=+e[0][0],r=+e[0][1],i=+e[1][0],a=+e[1][1]),reset()):null==w?null:[[w,r],[i,a]]},projection.scale=function(e){return arguments.length?(f=+e,recenter()):f},projection.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],recenter()):[d,h]},projection.center=function(e){return arguments.length?(p=e[0]%360*nl,g=e[1]%360*nl,recenter()):[p*tl,g*tl]},projection.rotate=function(e){return arguments.length?(m=e[0]%360*nl,v=e[1]%360*nl,y=e.length>2?e[2]%360*nl:0,recenter()):[m*tl,v*tl,y*tl]},projection.angle=function(e){return arguments.length?(_=e%360*nl,recenter()):_*tl},projection.precision=function(e){return arguments.length?(o=of(s,S=e*e),reset()):hl(S)},projection.fitExtent=function(e,t){return fit_fitExtent(projection,e,t)},projection.fitSize=function(e,t){return fit_fitSize(projection,e,t)},projection.fitWidth=function(e,t){return fit_fitWidth(projection,e,t)},projection.fitHeight=function(e,t){return fit_fitHeight(projection,e,t)},function(){return t=e.apply(this,arguments),projection.invert=t.invert&&invert,recenter()}}function conicProjection(e){var t=0,n=Ju/3,r=projectionMutator(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*nl,n=e[1]*nl):[t*tl,n*tl]},i}function conicEqualAreaRaw(e,t){var n=fl(e),r=(n+fl(t))/2;if(rl(r)<Xu)return function cylindricalEqualAreaRaw(e){var t=ol(e);function forward(e,n){return[e*t,fl(n)/t]}return forward.invert=function(e,n){return[e/t,math_asin(n*t)]},forward}(e);var i=1+n*(2*r-n),a=hl(i)/r;function project(e,t){var n=hl(i-2*r*fl(t))/r;return[n*fl(e*=r),a-n*ol(e)]}return project.invert=function(e,t){var n=a-t;return[al(e,rl(n))/r*dl(n),math_asin((i-(e*e+n*n)*r*r)/(2*r))]},project}var uf=function(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])},lf=function(){return uf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function azimuthalRaw(e){return function(t,n){var r=ol(t),i=ol(n),a=e(r*i);return[a*i*fl(t),a*fl(n)]}}function azimuthalInvert(e){return function(t,n){var r=hl(t*t+n*n),i=e(r),a=fl(i),o=ol(i);return[al(t*a,r*o),math_asin(r&&n*a/r)]}}var cf=azimuthalRaw((function(e){return hl(2/(1+e))}));cf.invert=azimuthalInvert((function(e){return 2*math_asin(e/2)}));var ff=azimuthalRaw((function(e){return(e=math_acos(e))&&e/fl(e)}));ff.invert=azimuthalInvert((function(e){return e}));function mercatorRaw(e,t){return[e,ll(pl((Zu+t)/2))]}mercatorRaw.invert=function(e,t){return[e,2*il(ul(t))-Zu]};function mercatorProjection(e){var t,n,r,i=projection_projection(e),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,l=null;function reclip(){var a=Ju*o(),s=i(nc(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:e===mercatorRaw?[[Math.max(s[0]-a,l),t],[Math.min(s[0]+a,n),r]]:[[l,Math.max(s[1]-a,t)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(e){return arguments.length?(o(e),reclip()):o()},i.translate=function(e){return arguments.length?(s(e),reclip()):s()},i.center=function(e){return arguments.length?(a(e),reclip()):a()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),reclip()):null==l?null:[[l,t],[n,r]]},reclip()}function tany(e){return pl((Zu+e)/2)}function conicConformalRaw(e,t){var n=ol(e),r=e===t?fl(e):ll(n/ol(t))/ll(tany(t)/tany(e)),i=n*cl(tany(e),r)/r;if(!r)return mercatorRaw;function project(e,t){i>0?t<-Zu+Xu&&(t=-Zu+Xu):t>Zu-Xu&&(t=Zu-Xu);var n=i/cl(tany(t),r);return[n*fl(r*e),i-n*ol(r*e)]}return project.invert=function(e,t){var n=i-t,a=dl(r)*hl(e*e+n*n);return[al(e,rl(n))/r*dl(n),2*il(cl(i/a,1/r))-Zu]},project}function equirectangularRaw(e,t){return[e,t]}equirectangularRaw.invert=equirectangularRaw;function conicEquidistantRaw(e,t){var n=ol(e),r=e===t?fl(e):(n-ol(t))/(t-e),i=n/r+e;if(rl(r)<Xu)return equirectangularRaw;function project(e,t){var n=i-t,a=r*e;return[n*fl(a),i-n*ol(a)]}return project.invert=function(e,t){var n=i-t;return[al(e,rl(n))/r*dl(n),i-dl(r)*hl(e*e+n*n)]},project}var df=1.340264,hf=-.081106,pf=893e-6,gf=.003796,mf=hl(3)/2;function equalEarthRaw(e,t){var n=math_asin(mf*fl(t)),r=n*n,i=r*r*r;return[e*ol(n)/(mf*(df+3*hf*r+i*(7*pf+9*gf*r))),n*(df+hf*r+i*(pf+gf*r))]}equalEarthRaw.invert=function(e,t){for(var n,r=t,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(df+hf*i+a*(pf+gf*i))-t)/(df+3*hf*i+a*(7*pf+9*gf*i)))*r)*i*i,!(rl(n)<Ku));++o);return[mf*e*(df+3*hf*i+a*(7*pf+9*gf*i))/ol(r),math_asin(fl(r)/mf)]};function gnomonicRaw(e,t){var n=ol(t),r=ol(e)*n;return[n*fl(e)/r,fl(t)/r]}gnomonicRaw.invert=azimuthalInvert(il);function identity_scaleTranslate(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?kc:transform_transformer({point:function point(i,a){this.stream.point(i*e+n,a*t+r)}})}function naturalEarth1Raw(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}naturalEarth1Raw.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(rl(n)>Xu&&--i>0);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};function orthographicRaw(e,t){return[ol(t)*fl(e),fl(t)]}orthographicRaw.invert=azimuthalInvert(math_asin);function stereographicRaw(e,t){var n=ol(t),r=1+ol(e)*n;return[n*fl(e)/r,fl(t)/r]}stereographicRaw.invert=azimuthalInvert((function(e){return 2*il(e)}));function transverseMercatorRaw(e,t){return[ll(pl((Zu+t)/2)),-e]}transverseMercatorRaw.invert=function(e,t){return[-t,2*il(ul(e))-Zu]};var vf=nf(),yf=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function projections_projection(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(_f[e]=function projections_create(e,t){return function projection(){var n=t();return n.type=e,n.path=nf().projection(n),n.copy=n.copy||function(){var e=projection();return yf.forEach((function(t){n[t]&&e[t](n[t]())})),e.path.pointRadius(n.path.pointRadius()),e},n}}(e,t),this):_f[e]||null}function getProjectionPath(e){return e&&e.path||vf}var _f={albers:lf,albersusa:function(){var e,t,n,r,i,a,o=lf(),s=uf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=uf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function point(e,t){a=[e,t]}};function albersUsa(e){var t=e[0],o=e[1];return a=null,n.point(t,o),a||(r.point(t,o),a)||(i.point(t,o),a)}function reset(){return e=t=null,albersUsa}return albersUsa.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(e)},albersUsa.stream=function(n){return e&&t===n?e:e=function multiplex(e){var t=e.length;return{point:function point(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function sphere(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function lineStart(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function lineEnd(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function polygonStart(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function polygonEnd(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([o.stream(t=n),s.stream(n),u.stream(n)])},albersUsa.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),u.precision(e),reset()):o.precision()},albersUsa.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),u.scale(e),albersUsa.translate(o.translate())):o.scale()},albersUsa.translate=function(e){if(!arguments.length)return o.translate();var t=o.scale(),a=+e[0],c=+e[1];return n=o.translate(e).clipExtent([[a-.455*t,c-.238*t],[a+.455*t,c+.238*t]]).stream(l),r=s.translate([a-.307*t,c+.201*t]).clipExtent([[a-.425*t+Xu,c+.12*t+Xu],[a-.214*t-Xu,c+.234*t-Xu]]).stream(l),i=u.translate([a-.205*t,c+.212*t]).clipExtent([[a-.214*t+Xu,c+.166*t+Xu],[a-.115*t-Xu,c+.234*t-Xu]]).stream(l),reset()},albersUsa.fitExtent=function(e,t){return fit_fitExtent(albersUsa,e,t)},albersUsa.fitSize=function(e,t){return fit_fitSize(albersUsa,e,t)},albersUsa.fitWidth=function(e,t){return fit_fitWidth(albersUsa,e,t)},albersUsa.fitHeight=function(e,t){return fit_fitHeight(albersUsa,e,t)},albersUsa.scale(1070)},azimuthalequalarea:function(){return projection_projection(cf).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return projection_projection(ff).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},conicequalarea:uf,conicequidistant:function(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},equalEarth:function(){return projection_projection(equalEarthRaw).scale(177.158)},equirectangular:function(){return projection_projection(equirectangularRaw).scale(152.63)},gnomonic:function(){return projection_projection(gnomonicRaw).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,a,o=1,s=0,u=0,l=1,c=1,f=kc,d=null,h=kc;function reset(){return r=i=null,a}return a={stream:function stream(e){return r&&i===e?r:r=f(h(i=e))},postclip:function postclip(r){return arguments.length?(h=r,d=e=t=n=null,reset()):h},clipExtent:function clipExtent(r){return arguments.length?(h=null==r?(d=e=t=n=null,kc):clipRectangle(d=+r[0][0],e=+r[0][1],t=+r[1][0],n=+r[1][1]),reset()):null==d?null:[[d,e],[t,n]]},scale:function scale(e){return arguments.length?(f=identity_scaleTranslate((o=+e)*l,o*c,s,u),reset()):o},translate:function translate(e){return arguments.length?(f=identity_scaleTranslate(o*l,o*c,s=+e[0],u=+e[1]),reset()):[s,u]},reflectX:function reflectX(e){return arguments.length?(f=identity_scaleTranslate(o*(l=e?-1:1),o*c,s,u),reset()):l<0},reflectY:function reflectY(e){return arguments.length?(f=identity_scaleTranslate(o*l,o*(c=e?-1:1),s,u),reset()):c<0},fitExtent:function fitExtent(e,t){return fit_fitExtent(a,e,t)},fitSize:function fitSize(e,t){return fit_fitSize(a,e,t)},fitWidth:function fitWidth(e,t){return fit_fitWidth(a,e,t)},fitHeight:function fitHeight(e,t){return fit_fitHeight(a,e,t)}}},mercator:function(){return mercatorProjection(mercatorRaw).scale(961/el)},naturalEarth1:function(){return projection_projection(naturalEarth1Raw).scale(175.295)},orthographic:function(){return projection_projection(orthographicRaw).scale(249.5).clipAngle(90+Xu)},stereographic:function(){return projection_projection(stereographicRaw).scale(250).clipAngle(142)},transversemercator:function(){var e=mercatorProjection(transverseMercatorRaw),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(var bf in _f)projections_projection(bf,_f[bf]);function GeoPath(e){Transform.call(this,null,e)}function GeoPoint(e){Transform.call(this,null,e)}function GeoShape(e){Transform.call(this,null,e)}function Graticule(e){Transform.call(this,[],e),this.generator=graticule_graticule()}function Projection(e){Transform.call(this,null,e),this.modified(!0)}function Projection_set(e,t,n){Object(V.D)(e[t])&&e[t](n)}GeoPath.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Object(V.y)(GeoPath,Transform).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||V.x,a=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=getProjectionPath(e.projection),n.materialize().reflow()):o=i===V.x||t.modified(i.fields)?n.ADD_MOD:n.ADD;var s=function initPath(e,t){var n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(o,(function set(e){e[a]=r(i(e))})),r.pointRadius(s),n.modifies(a)},GeoPoint.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Object(V.y)(GeoPoint,Transform).transform=function(e,t){var n,r=e.projection,i=e.fields[0],a=e.fields[1],o=e.as||["x","y"],s=o[0],u=o[1];function set(e){var t=r([i(e),a(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,set):(n=t.modified(i.fields)||t.modified(a.fields),t.visit(n?t.ADD_MOD:t.ADD,set)),t.modifies(o)},GeoShape.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Object(V.y)(GeoShape,Transform).transform=function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",a=n.ADD;return r&&!e.modified()||(this.value=r=function shapeGenerator(e,t,n){var r=null==n?function(n){return e(t(n))}:function(r){var i=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(i),a};return r.context=function(t){return e.context(t),r},r}(getProjectionPath(e.projection),e.field||Object(V.t)("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,(function(e){e[i]=r})),n.modifies(i)},Graticule.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Object(V.y)(Graticule,Transform).transform=function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(var a in e)Object(V.D)(i[a])&&i[a](e[a]);return n=i(),r.length?t.mod.push(replace(r[0],n)):t.add.push(ingest(n)),r[0]=n,t},Object(V.y)(Projection,Transform).transform=function(e,t){var n=this.value;return!n||e.modified("type")?(this.value=n=function Projection_create(e){var t=projections_projection((e||"mercator").toLowerCase());t||Object(V.n)("Unrecognized projection type: "+e);return t()}(e.type),yf.forEach((function(t){null!=e[t]&&Projection_set(n,t,e[t])}))):yf.forEach((function(t){e.modified(t)&&Projection_set(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function Projection_fit(e,t){var n=function collectGeoJSON(e){return 1===(e=Object(V.i)(e)).length?e[0]:{type:Vu,features:e.reduce((function(e,t){return e.concat(function featurize(e){return e.type===Vu?e.features:Object(V.i)(e).filter((function(e){return null!=e})).map((function(e){return e.type===Hu?e:{type:Hu,geometry:e}}))}(t))}),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)};function add_add(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,u,l,c,f,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(a=(g+v)/2))?g=a:v=a,(c=n>=(o=(m+y)/2))?m=o:y=o}while((f=c<<1|l)===(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=p,e}var xf=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function x_defaultX(e){return e[0]}function y_defaultY(e){return e[1]}function quadtree(e,t,n){var r=new Quadtree(null==t?x_defaultX:t,null==n?y_defaultY:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Quadtree(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function leaf_copy(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var wf=quadtree.prototype=Quadtree.prototype;wf.copy=function(){var e,t,n=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=leaf_copy(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=leaf_copy(t));return n},wf.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return add_add(this.cover(t,n),t,n,e)},wf.addAll=function addAll(e){var t,n,r,i,a=e.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<a;++n)add_add(this,o[n],s[n],e[n]);return this},wf.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,u=i-n,l=this._root;n>e||e>=i||r>t||t>=a;)switch(s=(t<r)<<1|e<n,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=n+u,a=r+u;break;case 1:n=i-u,a=r+u;break;case 2:i=n+u,r=a-u;break;case 3:n=i-u,r=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},wf.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},wf.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},wf.find=function(e,t,n){var r,i,a,o,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new xf(g,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<c||(s=u.y1)<f))if(g.length){var m=(i+o)/2,v=(a+s)/2;p.push(new xf(g[3],m,v,o,s),new xf(g[2],i,v,m,s),new xf(g[1],m,a,o,v),new xf(g[0],i,a,m,v)),(l=(t>=v)<<1|e>=m)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=e-+this._x.call(null,g.data),_=t-+this._y.call(null,g.data),b=y*y+_*_;if(b<n){var x=Math.sqrt(n=b);c=e-x,f=t-x,d=e+x,h=t+x,r=g.data}}return r},wf.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,u,l,c,f,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(p+m)/2))?p=s:m=s,(c=o>=(u=(g+v)/2))?g=u:v=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},wf.removeAll=function removeAll(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},wf.root=function(){return this._root},wf.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},wf.visit=function(e){var t,n,r,i,a,o,s=[],u=this._root;for(u&&s.push(new xf(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&u.length){var l=(r+a)/2,c=(i+o)/2;(n=u[3])&&s.push(new xf(n,l,c,a,o)),(n=u[2])&&s.push(new xf(n,r,c,l,o)),(n=u[1])&&s.push(new xf(n,l,i,a,c)),(n=u[0])&&s.push(new xf(n,r,i,l,c))}return this},wf.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new xf(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(o+u)/2,f=(s+l)/2;(a=i[0])&&n.push(new xf(a,o,s,c,f)),(a=i[1])&&n.push(new xf(a,c,s,u,f)),(a=i[2])&&n.push(new xf(a,o,f,c,l)),(a=i[3])&&n.push(new xf(a,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},wf.x=function(e){return arguments.length?(this._x=e,this):this._x},wf.y=function(e){return arguments.length?(this._y=e,this):this._y};var kf=function(e){return function(){return e}},Sf=function(){return 1e-6*(Math.random()-.5)};function collide_x(e){return e.x+e.vx}function collide_y(e){return e.y+e.vy}function link_index(e){return e.index}function link_find(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}var Ef={value:function value(){}};function dispatch_dispatch(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new Dispatch(r)}function Dispatch(e){this._=e}function dispatch_parseTypenames(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function dispatch_get(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function dispatch_set(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ef,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Dispatch.prototype=dispatch_dispatch.prototype={constructor:Dispatch,on:function on(e,t){var n,r=this._,i=dispatch_parseTypenames(e+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=dispatch_set(r[n],e.name,t);else if(null==t)for(n in r)r[n]=dispatch_set(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=dispatch_get(r[n],e.name)))return n},copy:function copy(){var copy={},e=this._;for(var t in e)copy[t]=e[t].slice();return new Dispatch(copy)},call:function call(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function apply(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var Tf,Cf,Of=dispatch_dispatch,Af=0,Rf=0,Df=0,Pf=1e3,Mf=0,jf=0,Ff=0,If="object"===typeof performance&&performance.now?performance:Date,Lf="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return jf||(Lf(clearNow),jf=If.now()+Ff)}function clearNow(){jf=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,n){var r=new Timer;return r.restart(e,t,n),r}function wake(){jf=(Mf=If.now())+Ff,Af=Rf=0;try{!function timerFlush(){now(),++Af;for(var e,t=Tf;t;)(e=jf-t._time)>=0&&t._call.call(null,e),t=t._next;--Af}()}finally{Af=0,function nap(){var e,t,n=Tf,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Tf=t);Cf=e,sleep(r)}(),jf=0}}function poke(){var e=If.now(),t=e-Mf;t>Pf&&(Ff-=t,Mf=e)}function sleep(e){Af||(Rf&&(Rf=clearTimeout(Rf)),e-jf>24?(e<1/0&&(Rf=setTimeout(wake,e-If.now()-Ff)),Df&&(Df=clearInterval(Df))):(Df||(Mf=If.now(),Df=setInterval(poke,Pf)),Af=1,Lf(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function restart(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?now():+n)+(null==t?0:+t),this._next||Cf===this||(Cf?Cf._next=this:Tf=this,Cf=this),this._call=e,this._time=n,sleep()},stop:function stop(){this._call&&(this._call=null,this._time=1/0,sleep())}};function simulation_x(e){return e.x}function simulation_y(e){return e.y}var Nf=10,Bf=Math.PI*(3-Math.sqrt(5)),Uf=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,u=timer(step),l=Of("tick","end");function step(){tick(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function tick(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=o:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=o:(l.y=l.fy,l.vy=0);return t}function initializeNodes(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=Nf*Math.sqrt(n),a=n*Bf;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function initializeForce(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),initializeNodes(),t={tick:tick,restart:function restart(){return u.restart(step),t},stop:function stop(){return u.stop(),t},nodes:function nodes(n){return arguments.length?(e=n,initializeNodes(),s.forEach(initializeForce),t):e},alpha:function alpha(e){return arguments.length?(n=+e,t):n},alphaMin:function alphaMin(e){return arguments.length?(r=+e,t):r},alphaDecay:function alphaDecay(e){return arguments.length?(i=+e,t):+i},alphaTarget:function alphaTarget(e){return arguments.length?(a=+e,t):a},velocityDecay:function velocityDecay(e){return arguments.length?(o=1-e,t):1-o},force:function force(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,initializeForce(n)),t):s.get(e)},find:function find(t,n,r){var i,a,o,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(o=(i=t-(s=e[l]).x)*i+(a=n-s.y)*a)<r&&(u=s,r=o);return u},on:function on(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}},zf={center:function(e,t){var n;function force(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-e,s=s/a-t,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==e&&(e=0),null==t&&(t=0),force.initialize=function(e){n=e},force.x=function(t){return arguments.length?(e=+t,force):e},force.y=function(e){return arguments.length?(t=+e,force):t},force},collide:function(e){var t,n,r=1,i=1;function force(){for(var e,a,o,s,u,l,c,f=t.length,d=0;d<i;++d)for(a=quadtree(t,collide_x,collide_y).visitAfter(prepare),e=0;e<f;++e)o=t[e],l=n[o.index],c=l*l,s=o.x+o.vx,u=o.y+o.vy,a.visit(apply);function apply(e,t,n,i,a){var f=e.data,d=e.r,h=l+d;if(!f)return t>s+h||i<s-h||n>u+h||a<u-h;if(f.index>o.index){var p=s-f.x-f.vx,g=u-f.y-f.vy,m=p*p+g*g;m<h*h&&(0===p&&(m+=(p=Sf())*p),0===g&&(m+=(g=Sf())*g),m=(h-(m=Math.sqrt(m)))/m*r,o.vx+=(p*=m)*(h=(d*=d)/(c+d)),o.vy+=(g*=m)*h,f.vx-=p*(h=1-h),f.vy-=g*h)}}}function prepare(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function initialize(){if(t){var r,i,a=t.length;for(n=new Array(a),r=0;r<a;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!==typeof e&&(e=kf(null==e?1:+e)),force.initialize=function(e){t=e,initialize()},force.iterations=function(e){return arguments.length?(i=+e,force):i},force.strength=function(e){return arguments.length?(r=+e,force):r},force.radius=function(t){return arguments.length?(e="function"===typeof t?t:kf(+t),initialize(),force):e},force},nbody:function(){var e,t,n,r,i=kf(-30),a=1,o=1/0,s=.81;function force(r){var i,a=e.length,o=quadtree(e,simulation_x,simulation_y).visitAfter(accumulate);for(n=r,i=0;i<a;++i)t=e[i],o.visit(apply)}function initialize(){if(e){var t,n,a=e.length;for(r=new Array(a),t=0;t<a;++t)n=e[t],r[n.index]=+i(n,t,e)}}function accumulate(e){var t,n,i,a,o,s=0,u=0;if(e.length){for(i=a=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,i+=n*t.x,a+=n*t.y);e.x=i/u,e.y=a/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=r[t.data.index]}while(t=t.next)}e.value=s}function apply(e,i,u,l){if(!e.value)return!0;var c=e.x-t.x,f=e.y-t.y,d=l-i,h=c*c+f*f;if(d*d/s<h)return h<o&&(0===c&&(h+=(c=Sf())*c),0===f&&(h+=(f=Sf())*f),h<a&&(h=Math.sqrt(a*h)),t.vx+=c*e.value*n/h,t.vy+=f*e.value*n/h),!0;if(!(e.length||h>=o)){(e.data!==t||e.next)&&(0===c&&(h+=(c=Sf())*c),0===f&&(h+=(f=Sf())*f),h<a&&(h=Math.sqrt(a*h)));do{e.data!==t&&(d=r[e.data.index]*n/h,t.vx+=c*d,t.vy+=f*d)}while(e=e.next)}}return force.initialize=function(t){e=t,initialize()},force.strength=function(e){return arguments.length?(i="function"===typeof e?e:kf(+e),initialize(),force):i},force.distanceMin=function(e){return arguments.length?(a=e*e,force):Math.sqrt(a)},force.distanceMax=function(e){return arguments.length?(o=e*e,force):Math.sqrt(o)},force.theta=function(e){return arguments.length?(s=e*e,force):Math.sqrt(s)},force},link:function(e){var t,n,r,i,a,o=link_index,s=function defaultStrength(e){return 1/Math.min(i[e.source.index],i[e.target.index])},u=kf(30),l=1;function force(r){for(var i=0,o=e.length;i<l;++i)for(var s,u,c,f,d,h,p,g=0;g<o;++g)u=(s=e[g]).source,f=(c=s.target).x+c.vx-u.x-u.vx||Sf(),d=c.y+c.vy-u.y-u.vy||Sf(),f*=h=((h=Math.sqrt(f*f+d*d))-n[g])/h*r*t[g],d*=h,c.vx-=f*(p=a[g]),c.vy-=d*p,u.vx+=f*(p=1-p),u.vy+=d*p}function initialize(){if(r){var s,u,l=r.length,c=e.length,f=new Map(r.map((function(e,t){return[o(e,t,r),e]})));for(s=0,i=new Array(l);s<c;++s)(u=e[s]).index=s,"object"!==typeof u.source&&(u.source=link_find(f,u.source)),"object"!==typeof u.target&&(u.target=link_find(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,a=new Array(c);s<c;++s)u=e[s],a[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),initializeStrength(),n=new Array(c),initializeDistance()}}function initializeStrength(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+s(e[n],n,e)}function initializeDistance(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),force.initialize=function(e){r=e,initialize()},force.links=function(t){return arguments.length?(e=t,initialize(),force):e},force.id=function(e){return arguments.length?(o=e,force):o},force.iterations=function(e){return arguments.length?(l=+e,force):l},force.strength=function(e){return arguments.length?(s="function"===typeof e?e:kf(+e),initializeStrength(),force):s},force.distance=function(e){return arguments.length?(u="function"===typeof e?e:kf(+e),initializeDistance(),force):u},force},x:function(e){var t,n,r,i=kf(.1);function force(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vx+=(r[a]-i.x)*n[a]*e}function initialize(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!==typeof e&&(e=kf(null==e?0:+e)),force.initialize=function(e){t=e,initialize()},force.strength=function(e){return arguments.length?(i="function"===typeof e?e:kf(+e),initialize(),force):i},force.x=function(t){return arguments.length?(e="function"===typeof t?t:kf(+t),initialize(),force):e},force},y:function(e){var t,n,r,i=kf(.1);function force(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vy+=(r[a]-i.y)*n[a]*e}function initialize(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!==typeof e&&(e=kf(null==e?0:+e)),force.initialize=function(e){t=e,initialize()},force.strength=function(e){return arguments.length?(i="function"===typeof e?e:kf(+e),initialize(),force):i},force.y=function(t){return arguments.length?(e="function"===typeof t?t:kf(+t),initialize(),force):e},force}},qf="forces",Wf=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Gf=["static","iterations"],Hf=["x","y","vx","vy"];function Force(e){Transform.call(this,null,e)}Force.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Hf}]};var Vf=Object(V.y)(Force,Transform);function setup(e,t,n,r){var i,a,o,s,u=Object(V.i)(t.forces);for(i=0,a=Wf.length;i<a;++i)(o=Wf[i])!==qf&&t.modified(o)&&e[o](t[o]);for(i=0,a=u.length;i<a;++i)s=qf+i,(o=n||t.modified(qf,i)?getForce(u[i]):r&&modified(u[i],r)?e.force(s):null)&&e.force(s,o);for(a=e.numForces||0;i<a;++i)e.force(qf+i,null);return e.numForces=u.length,e}function modified(e,t){var n,r;for(n in e)if(Object(V.D)(r=e[n])&&t.modified(Object(V.g)(r)))return 1;return 0}function getForce(e){var t,n;for(n in Object(V.v)(zf,e.force)||Object(V.n)("Unrecognized force: "+e.force),t=zf[e.force](),e)Object(V.D)(t[n])&&setForceParam(t[n],e[n],e);return t}function setForceParam(e,t,n){e(Object(V.D)(t)?function(e){return t(e,n)}:t)}Vf.transform=function(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Wf),a=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&setup(n,e,0,t)):(this.value=n=function Force_simulation(e,t){var n=Uf(e),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},setup(n,t,!0).on("end",(function(){r=!0}))}(t.source,e),n.on("tick",function rerun(e,t){return function(){e.touch(t).run()}}(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Gf)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},Vf.finish=function(e,t){for(var n,r=t.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if((n=i[a]).name===qf&&"link"===n.op._argval.force)for(var s,u=n.op._argops,l=0,c=u.length;l<c;++l)if("links"===u[l].name&&(s=u[l].op.source)){r.pulse(s,r.changeset().reflow());break}return t.reflow(e.modified()).modifies(Hf)};var Yf=function(e,t,n){var r={};return e.each((function(e){var i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e};function defaultSeparation(e,t){return e.parent===t.parent?1:2}function meanXReduce(e,t){return e+t.x}function maxYReduce(e,t){return Math.max(e,t.y)}function count_count(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function hierarchy(e,t){var n,r,i,a,o,s=new Node(e),u=+e.value&&(s.value=e.value),l=[s];for(null==t&&(t=defaultChildren);n=l.pop();)if(u&&(n.value=+n.data.value),(i=t(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(r=n.children[a]=new Node(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(computeHeight)}function defaultChildren(e){return e.children}function copyData(e){e.data=e.data.data}function computeHeight(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Node(e){this.data=e,this.depth=this.height=0,this.parent=null}Node.prototype=hierarchy.prototype={constructor:Node,count:function(){return this.eachAfter(count_count)},each:function(e){var t,n,r,i,a=this,o=[a];do{for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function leastCommonAncestor(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function node_copy(){return hierarchy(this).eachBefore(copyData)}};var $f=Array.prototype.slice;var Xf=function(e){for(var t,n,r=0,i=(e=function array_shuffle(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}($f.call(e))).length,a=[];r<i;)t=e[r],n&&enclosesWeak(n,t)?++r:(n=encloseBasis(a=extendBasis(a,t)),r=0);return n};function extendBasis(e,t){var n,r;if(enclosesWeakAll(t,e))return[t];for(n=0;n<e.length;++n)if(enclosesNot(t,e[n])&&enclosesWeakAll(encloseBasis2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(enclosesNot(encloseBasis2(e[n],e[r]),t)&&enclosesNot(encloseBasis2(e[n],t),e[r])&&enclosesNot(encloseBasis2(e[r],t),e[n])&&enclosesWeakAll(encloseBasis3(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function enclosesNot(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function enclosesWeak(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function enclosesWeakAll(e,t){for(var n=0;n<t.length;++n)if(!enclosesWeak(e,t[n]))return!1;return!0}function encloseBasis(e){switch(e.length){case 1:return function encloseBasis1(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return encloseBasis2(e[0],e[1]);case 3:return encloseBasis3(e[0],e[1],e[2])}}function encloseBasis2(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,u=a-n,l=o-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+a+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+s)/2}}function encloseBasis3(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-s,g=i-c,m=u-a,v=f-a,y=r*r+i*i-a*a,_=y-o*o-s*s+u*u,b=y-l*l-c*c+f*f,x=h*p-d*g,w=(p*b-g*_)/(2*x)-r,k=(g*m-p*v)/x,S=(h*_-d*b)/(2*x)-i,E=(d*v-h*m)/x,T=k*k+E*E-1,C=2*(a+w*k+S*E),O=w*w+S*S-a*a,A=-(T?(C+Math.sqrt(C*C-4*T*O))/(2*T):O/C);return{x:r+w+k*A,y:i+S+E*A,r:A}}function siblings_place(e,t,n){var r,i,a,o,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),n.x=e.x-r*s-a*u,n.y=e.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-a*u,n.y=t.y+r*u+a*s)):(n.x=t.x+n.r,n.y=t.y)}function intersects(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function score(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function siblings_Node(e){this._=e,this.next=null,this.previous=null}function packEnclose(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,s,u,l,c,f;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;siblings_place(n,t,r=e[2]),t=new siblings_Node(t),n=new siblings_Node(n),r=new siblings_Node(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(s=3;s<i;++s){siblings_place(t._,n._,r=e[s]),r=new siblings_Node(r),u=n.next,l=t.previous,c=n._.r,f=t._.r;do{if(c<=f){if(intersects(u._,r._)){n=u,t.next=n,n.previous=t,--s;continue e}c+=u._.r,u=u.next}else{if(intersects(l._,r._)){(t=l).next=n,n.previous=t,--s;continue e}f+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=score(t);(r=r.next)!==n;)(o=score(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Xf(t),s=0;s<i;++s)(t=e[s]).x-=r.x,t.y-=r.y;return r.r}function optional(e){return null==e?null:required(e)}function required(e){if("function"!==typeof e)throw new Error;return e}function constantZero(){return 0}var Kf=function(e){return function(){return e}};function defaultRadius(e){return Math.sqrt(e.value)}function radiusLeaf(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function packChildren(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,s=e(n)*t||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=packEnclose(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function translateChild(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var Jf=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},Zf=function(e,t,n,r,i){for(var a,o=e.children,s=-1,u=o.length,l=e.value&&(r-t)/e.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l},Qf="$",ed={depth:-1},td={};function defaultId(e){return e.id}function defaultParentId(e){return e.parentId}var nd=function(){var e=defaultId,t=defaultParentId;function stratify(n){var r,i,a,o,s,u,l,c=n.length,f=new Array(c),d={};for(i=0;i<c;++i)r=n[i],s=f[i]=new Node(r),null!=(u=e(r,i,n))&&(u+="")&&(d[l=Qf+(s.id=u)]=l in d?td:s);for(i=0;i<c;++i)if(s=f[i],null!=(u=t(n[i],i,n))&&(u+="")){if(!(o=d[Qf+u]))throw new Error("missing: "+u);if(o===td)throw new Error("ambiguous: "+u);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=ed,a.eachBefore((function(e){e.depth=e.parent.depth+1,--c})).eachBefore(computeHeight),a.parent=null,c>0)throw new Error("cycle");return a}return stratify.id=function(t){return arguments.length?(e=required(t),stratify):e},stratify.parentId=function(e){return arguments.length?(t=required(e),stratify):t},stratify};function tree_defaultSeparation(e,t){return e.parent===t.parent?1:2}function nextLeft(e){var t=e.children;return t?t[0]:e.t}function nextRight(e){var t=e.children;return t?t[t.length-1]:e.t}function moveSubtree(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function nextAncestor(e,t,n){return e.a.parent===t.parent?e.a:n}function TreeNode(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}TreeNode.prototype=Object.create(Node.prototype);var rd=function(e,t,n,r,i){for(var a,o=e.children,s=-1,u=o.length,l=e.value&&(i-n)/e.value;++s<u;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*l},id=(1+Math.sqrt(5))/2;function squarifyRatio(e,t,n,r,i,a){for(var o,s,u,l,c,f,d,h,p,g,m,v=[],y=t.children,_=0,b=0,x=y.length,w=t.value;_<x;){u=i-n,l=a-r;do{c=y[b++].value}while(!c&&b<x);for(f=d=c,m=c*c*(g=Math.max(l/u,u/l)/(w*e)),p=Math.max(d/m,m/f);b<x;++b){if(c+=s=y[b].value,s<f&&(f=s),s>d&&(d=s),m=c*c*g,(h=Math.max(d/m,m/f))>p){c-=s;break}p=h}v.push(o={value:c,dice:u<l,children:y.slice(_,b)}),o.dice?Zf(o,n,r,i,w?r+=l*c/w:a):rd(o,n,r,w?n+=u*c/w:i,a),w-=c,_=b}return v}var ad=function custom(e){function squarify(t,n,r,i,a){squarifyRatio(e,t,n,r,i,a)}return squarify.ratio=function(e){return custom((e=+e)>1?e:1)},squarify}(id),od=function custom(e){function resquarify(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,s,u,l,c,f=-1,d=o.length,h=t.value;++f<d;){for(u=(s=o[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?Zf(s,n,r,i,r+=(a-r)*s.value/h):rd(s,n,r,n+=(i-n)*s.value/h,a),h-=s.value}else t._squarify=o=squarifyRatio(e,t,n,r,i,a),o.ratio=e}return resquarify.ratio=function(e){return custom((e=+e)>1?e:1)},resquarify}(id);function Nest(e){Transform.call(this,null,e)}function Nest_children(e){return e.values}function nest(){var e,t=[];return e={entries:function entries(e){return function _entries(e,n){if(++n>t.length)return e;var r,i=[];for(r in e)i.push({key:r,values:_entries(e[r],n)});return i}(function apply(e,n){if(n>=t.length)return e;for(var r,i,a,o=-1,s=e.length,u=t[n++],l={},c={};++o<s;)(a=l[r=u(i=e[o])+""])?a.push(i):l[r]=[i];for(r in l)c[r]=apply(l[r],n);return c}(e,0),0)},key:function key(n){return t.push(n),e}}}function HierarchyLayout(e){Transform.call(this,null,e)}function HierarchyLayout_defaultSeparation(e,t){return e.parent===t.parent?1:2}Nest.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]},Object(V.y)(Nest,Transform).transform=function(e,t){t.source||Object(V.n)("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),a=this.value;return(!a||r||t.changed())&&(a&&a.each((function(e){e.children&&isTuple(e.data)&&i.rem.push(e.data)})),this.value=a=hierarchy({values:Object(V.i)(e.keys).reduce((function(e,t){return e.key(t),e}),nest()).entries(i.source)},Nest_children),n&&a.each((function(e){e.children&&(e=ingest(e.data),i.add.push(e),i.source.push(e))})),Yf(a,tupleid,tupleid)),i.source.root=a,i},Object(V.y)(HierarchyLayout,Transform).transform=function(e,t){t.source&&t.source.root||Object(V.n)(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(e.method),r=this.fields,i=t.source.root,a=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(stableCompare(e.sort,(function(e){return e.data}))),function setParams(e,t,n){for(var r,i=0,a=t.length;i<a;++i)(r=t[i])in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?HierarchyLayout_defaultSeparation:V.M);try{this.value=n(i)}catch(o){Object(V.n)(o)}return i.each((function(e){!function setFields(e,t,n){for(var r=e.data,i=0,a=t.length-1;i<a;++i)r[n[i]]=e[t[i]];r[n[a]]=e.children?e.children.length:0}(e,r,a)})),t.reflow(e.modified()).modifies(a).modifies("leaf")};var sd=["x","y","r","depth","children"];function Pack(e){HierarchyLayout.call(this,e)}Pack.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sd.length,default:sd}]};var ud=Object(V.y)(Pack,HierarchyLayout);ud.layout=function(){var e=null,t=1,n=1,r=constantZero;function pack(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(radiusLeaf(e)).eachAfter(packChildren(r,.5)).eachBefore(translateChild(1)):i.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(r,i.r/Math.min(t,n))).eachBefore(translateChild(Math.min(t,n)/(2*i.r))),i}return pack.radius=function(t){return arguments.length?(e=optional(t),pack):e},pack.size=function(e){return arguments.length?(t=+e[0],n=+e[1],pack):[t,n]},pack.padding=function(e){return arguments.length?(r="function"===typeof e?e:Kf(+e),pack):r},pack},ud.params=["radius","size","padding"],ud.fields=sd;var ld=["x0","y0","x1","y1","depth","children"];function Partition(e){HierarchyLayout.call(this,e)}Partition.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ld.length,default:ld}]};var cd=Object(V.y)(Partition,HierarchyLayout);function Stratify(e){Transform.call(this,null,e)}cd.layout=function(){var e=1,t=1,n=0,r=!1;function partition(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function positionNode(e,t){return function(r){r.children&&Zf(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(t,a)),r&&i.eachBefore(Jf),i}return partition.round=function(e){return arguments.length?(r=!!e,partition):r},partition.size=function(n){return arguments.length?(e=+n[0],t=+n[1],partition):[e,t]},partition.padding=function(e){return arguments.length?(n=+e,partition):n},partition},cd.params=["size","round","padding"],cd.fields=ld,Stratify.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Object(V.y)(Stratify,Transform).transform=function(e,t){t.source||Object(V.n)("Stratify transform requires an upstream data source.");var n=this.value,r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),a=!this.value||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),a&&(n=i.source.length?Yf(nd().id(e.key).parentId(e.parentKey)(i.source),e.key,V.eb):Yf(nd()([{}]),e.key,e.key)),i.source.root=this.value=n,i};var fd={tidy:function(){var e=tree_defaultSeparation,t=1,n=1,r=null;function tree(i){var a=function treeRoot(e){for(var t,n,r,i,a,o=new TreeNode(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new TreeNode(r[i],i)),n.parent=t;return(o.parent=new TreeNode(null,0)).children=[o],o}(i);if(a.eachAfter(firstWalk),a.parent.m=-a.z,a.eachBefore(secondWalk),r)i.eachBefore(sizeNode);else{var o=i,s=i,u=i;i.eachBefore((function(e){e.x<o.x&&(o=e),e.x>s.x&&(s=e),e.depth>u.depth&&(u=e)}));var l=o===s?1:e(o,s)/2,c=l-o.x,f=t/(s.x+l+c),d=n/(u.depth||1);i.eachBefore((function(e){e.x=(e.x+c)*f,e.y=e.depth*d}))}return i}function firstWalk(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function executeShifts(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function apportion(t,n,r){if(n){for(var i,a=t,o=t,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,d=u.m;s=nextRight(s),a=nextLeft(a),s&&a;)u=nextLeft(u),(o=nextRight(o)).a=t,(i=s.z+f-a.z-l+e(s._,a._))>0&&(moveSubtree(nextAncestor(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=a.m,d+=u.m,c+=o.m;s&&!nextRight(o)&&(o.t=s,o.m+=f-c),a&&!nextLeft(u)&&(u.t=a,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function secondWalk(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function sizeNode(e){e.x*=t,e.y=e.depth*n}return tree.separation=function(t){return arguments.length?(e=t,tree):e},tree.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],tree):r?null:[t,n]},tree.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],tree):r?[t,n]:null},tree},cluster:function(){var e=defaultSeparation,t=1,n=1,r=!1;function cluster(i){var a,o=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function meanX(e){return e.reduce(meanXReduce,0)/e.length}(n),t.y=function maxY(e){return 1+e.reduce(maxYReduce,0)}(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)}));var s=function leafLeft(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function leafRight(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return cluster.separation=function(t){return arguments.length?(e=t,cluster):e},cluster.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],cluster):r?null:[t,n]},cluster.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],cluster):r?[t,n]:null},cluster}},dd=["x","y","depth","children"];function Tree(e){HierarchyLayout.call(this,e)}Tree.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:dd.length,default:dd}]};var hd=Object(V.y)(Tree,HierarchyLayout);function TreeLinks(e){Transform.call(this,[],e)}hd.layout=function(e){var t=e||"tidy";if(Object(V.v)(fd,t))return fd[t]();Object(V.n)("Unrecognized Tree layout method: "+t)},hd.params=["size","nodeSize"],hd.fields=dd,TreeLinks.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Object(V.y)(TreeLinks,Transform).transform=function(e,t){var n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),a={};return r||Object(V.n)("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(function(e){a[tupleid(e)]=1})),r.each((function(e){var t=e.data,n=e.parent&&e.parent.data;n&&a[tupleid(t)]&&a[tupleid(n)]&&i.add.push(ingest({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(function(e){a[tupleid(e)]=1})),n.forEach((function(e){(a[tupleid(e.source)]||a[tupleid(e.target)])&&i.mod.push(e)}))),i};var pd={binary:function(e,t,n,r,i){var a,o,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;!function partition(e,t,n,r,i,a,o){if(e>=t-1){var u=s[e];return u.x0=r,u.y0=i,u.x1=a,void(u.y1=o)}var c=l[e],f=n/2+c,d=e+1,h=t-1;for(;d<h;){var p=d+h>>>1;l[p]<f?d=p+1:h=p}f-l[d-1]<l[d]-f&&e+1<d&&--d;var g=l[d]-c,m=n-g;if(a-r>o-i){var v=(r*m+a*g)/n;partition(e,d,g,r,i,v,o),partition(d,t,m,v,i,a,o)}else{var y=(i*m+o*g)/n;partition(e,d,g,r,i,a,y),partition(d,t,m,r,y,a,o)}}(0,u,e.value,t,n,r,i)},dice:Zf,slice:rd,slicedice:function(e,t,n,r,i){(1&e.depth?rd:Zf)(e,t,n,r,i)},squarify:ad,resquarify:od},gd=["x0","y0","x1","y1","depth","children"];function Treemap(e){HierarchyLayout.call(this,e)}Treemap.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gd.length,default:gd}]};var md=Object(V.y)(Treemap,HierarchyLayout);md.layout=function(){var e=function(){var e=ad,t=!1,n=1,r=1,i=[0],a=constantZero,o=constantZero,s=constantZero,u=constantZero,l=constantZero;function treemap(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(positionNode),i=[0],t&&e.eachBefore(Jf),e}function positionNode(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=a(t)/2,r+=l(t)-n,c+=o(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return treemap.round=function(e){return arguments.length?(t=!!e,treemap):t},treemap.size=function(e){return arguments.length?(n=+e[0],r=+e[1],treemap):[n,r]},treemap.tile=function(t){return arguments.length?(e=required(t),treemap):e},treemap.padding=function(e){return arguments.length?treemap.paddingInner(e).paddingOuter(e):treemap.paddingInner()},treemap.paddingInner=function(e){return arguments.length?(a="function"===typeof e?e:Kf(+e),treemap):a},treemap.paddingOuter=function(e){return arguments.length?treemap.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):treemap.paddingTop()},treemap.paddingTop=function(e){return arguments.length?(o="function"===typeof e?e:Kf(+e),treemap):o},treemap.paddingRight=function(e){return arguments.length?(s="function"===typeof e?e:Kf(+e),treemap):s},treemap.paddingBottom=function(e){return arguments.length?(u="function"===typeof e?e:Kf(+e),treemap):u},treemap.paddingLeft=function(e){return arguments.length?(l="function"===typeof e?e:Kf(+e),treemap):l},treemap}();return e.ratio=function(t){var n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=function(t){Object(V.v)(pd,t)?e.tile(pd[t]):Object(V.n)("Unrecognized Treemap layout method: "+t)},e},md.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],md.fields=gd;var vd=function(e,t){var n,r,i,a,o,s,u=[],l=function get(e){return e(a)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)a=e[r],(s=n[o=t.map(l)])||(n[o]=s=[],s.dims=o,u.push(s)),s.push(a);return u};function Loess(e){Transform.call(this,null,e)}Loess.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Object(V.y)(Loess,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,i=vd(r,e.groupby),a=(e.groupby||[]).map(V.h),o=a.length,s=e.as||[Object(V.h)(e.x),Object(V.h)(e.y)],u=[];i.forEach((function(t){Ht(t,e.x,e.y,e.bandwidth||.3).forEach((function(e){for(var n={},r=0;r<o;++r)n[a[r]]=t.dims[r];n[s[0]]=e[0],n[s[1]]=e[1],u.push(ingest(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n};var yd={linear:Lt,log:Nt,exp:Bt,pow:Ut,quad:zt,poly:Wt};function Regression(e){Transform.call(this,null,e)}Regression.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(yd)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Object(V.y)(Regression,Transform).transform=function(e,t){var n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){var r=t.materialize(t.SOURCE).source,i=vd(r,e.groupby),a=(e.groupby||[]).map(V.h),o=e.method||"linear",s=e.order||3,u=function degreesOfFreedom(e,t){return"poly"===e?t:"quad"===e?2:1}(o,s),l=e.as||[Object(V.h)(e.x),Object(V.h)(e.y)],c=yd[o],f=[],d=e.extent;Object(V.v)(yd,o)||Object(V.n)("Invalid regression method: "+o),null!=d&&"log"===o&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach((function(n){if(n.length<=u)t.dataflow.warn("Skipping regression with more parameters than data points.");else{var r=c(n,e.x,e.y,s);if(e.params)f.push(ingest({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));else{var i=d||Object(V.p)(n,e.x),h=function add(e){for(var t={},r=0;r<a.length;++r)t[a[r]]=n.dims[r];t[l[0]]=e[0],t[l[1]]=e[1],f.push(ingest(t))};"linear"===o?i.forEach((function(e){return h([e,r.predict(e)])})):Yt(r.predict,i,25,200).forEach(h)}}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n};var _d=n(2),bd=n(3),xd=Math.pow(2,-52),wd=new Uint32Array(512),kd=function(){function Delaunator(e){Object(_d.a)(this,Delaunator);var t=e.length>>1;if(t>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}return Object(bd.a)(Delaunator,null,[{key:"from",value:function from(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultGetX,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:defaultGetY,r=e.length,i=new Float64Array(2*r),a=0;a<r;a++){var o=e[a];i[2*a]=t(o),i[2*a+1]=n(o)}return new Delaunator(i)}}]),Object(bd.a)(Delaunator,[{key:"update",value:function update(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,a=e.length>>1,o=1/0,s=1/0,u=-1/0,l=-1/0,c=0;c<a;c++){var f=e[2*c],d=e[2*c+1];f<o&&(o=f),d<s&&(s=d),f>u&&(u=f),d>l&&(l=d),this._ids[c]=c}for(var h,p,g,m=(o+u)/2,v=(s+l)/2,y=1/0,_=0;_<a;_++){var b=delaunator_dist(m,v,e[2*_],e[2*_+1]);b<y&&(h=_,y=b)}var x=e[2*h],w=e[2*h+1];y=1/0;for(var k=0;k<a;k++)if(k!==h){var S=delaunator_dist(x,w,e[2*k],e[2*k+1]);S<y&&S>0&&(p=k,y=S)}for(var E=e[2*p],T=e[2*p+1],C=1/0,O=0;O<a;O++)if(O!==h&&O!==p){var A=circumradius(x,w,E,T,e[2*O],e[2*O+1]);A<C&&(g=O,C=A)}var R=e[2*g],D=e[2*g+1];if(C===1/0){for(var P=0;P<a;P++)this._dists[P]=e[2*P]-e[0]||e[2*P+1]-e[1];quicksort(this._ids,this._dists,0,a-1);for(var M=new Uint32Array(a),j=0,F=0,I=-1/0;F<a;F++){var L=this._ids[F];this._dists[L]>I&&(M[j++]=L,I=this._dists[L])}return this.hull=M.subarray(0,j),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(delaunator_orient(x,w,E,T,R,D)){var N=p,B=E,U=T;p=g,E=R,T=D,g=N,R=B,D=U}var z=function circumcenter(e,t,n,r,i,a){var o=n-e,s=r-t,u=i-e,l=a-t,c=o*o+s*s,f=u*u+l*l,d=.5/(o*l-s*u);return{x:e+(l*c-s*f)*d,y:t+(o*f-u*c)*d}}(x,w,E,T,R,D);this._cx=z.x,this._cy=z.y;for(var q=0;q<a;q++)this._dists[q]=delaunator_dist(e[2*q],e[2*q+1],z.x,z.y);quicksort(this._ids,this._dists,0,a-1),this._hullStart=h;var W=3;n[h]=t[g]=p,n[p]=t[h]=g,n[g]=t[p]=h,r[h]=0,r[p]=1,r[g]=2,i.fill(-1),i[this._hashKey(x,w)]=h,i[this._hashKey(E,T)]=p,i[this._hashKey(R,D)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(var G,H,V=0;V<this._ids.length;V++){var Y=this._ids[V],$=e[2*Y],X=e[2*Y+1];if(!(V>0&&Math.abs($-G)<=xd&&Math.abs(X-H)<=xd)&&(G=$,H=X,Y!==h&&Y!==p&&Y!==g)){for(var K=0,J=0,Z=this._hashKey($,X);J<this._hashSize&&(-1===(K=i[(Z+J)%this._hashSize])||K===n[K]);J++);for(var Q=K=t[K],ee=void 0;ee=n[Q],!delaunator_orient($,X,e[2*Q],e[2*Q+1],e[2*ee],e[2*ee+1]);)if((Q=ee)===K){Q=-1;break}if(-1!==Q){var te=this._addTriangle(Q,Y,n[Q],-1,-1,r[Q]);r[Y]=this._legalize(te+2),r[Q]=te,W++;for(var ne=n[Q];ee=n[ne],delaunator_orient($,X,e[2*ne],e[2*ne+1],e[2*ee],e[2*ee+1]);)te=this._addTriangle(ne,Y,ee,r[Y],-1,r[ne]),r[Y]=this._legalize(te+2),n[ne]=ne,W--,ne=ee;if(Q===K)for(;delaunator_orient($,X,e[2*(ee=t[Q])],e[2*ee+1],e[2*Q],e[2*Q+1]);)te=this._addTriangle(ee,Y,Q,-1,r[Q],r[ee]),this._legalize(te+2),r[ee]=te,n[Q]=Q,W--,Q=ee;this._hullStart=t[Y]=Q,n[Q]=t[ne]=Y,n[Y]=ne,i[this._hashKey($,X)]=Y,i[this._hashKey(e[2*Q],e[2*Q+1])]=Q}}}this.hull=new Uint32Array(W);for(var re=0,ie=this._hullStart;re<W;re++)this.hull[re]=ie,ie=n[ie];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function _hashKey(e,t){return Math.floor(function pseudoAngle(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function _legalize(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,i=0,a=0;;){var o=n[e],s=e-e%3;if(a=s+(e+2)%3,-1!==o){var u=o-o%3,l=s+(e+1)%3,c=u+(o+2)%3,f=t[a],d=t[e],h=t[l],p=t[c];if(inCircle(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=f;var g=n[c];if(-1===g){var m=this._hullStart;do{if(this._hullTri[m]===c){this._hullTri[m]=e;break}m=this._hullPrev[m]}while(m!==this._hullStart)}this._link(e,g),this._link(o,n[a]),this._link(a,c);var v=u+(o+1)%3;i<wd.length&&(wd[i++]=v)}else{if(0===i)break;e=wd[--i]}}else{if(0===i)break;e=wd[--i]}}return a}},{key:"_link",value:function _link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function _addTriangle(e,t,n,r,i,a){var o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}]),Delaunator}();function delaunator_dist(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}function orientIfSure(e,t,n,r,i,a){var o=(r-t)*(i-e),s=(n-e)*(a-t);return Math.abs(o-s)>=33306690738754716e-32*Math.abs(o+s)?o-s:0}function delaunator_orient(e,t,n,r,i,a){return(orientIfSure(i,a,e,t,n,r)||orientIfSure(e,t,n,r,i,a)||orientIfSure(n,r,i,a,e,t))<0}function inCircle(e,t,n,r,i,a,o,s){var u=e-o,l=t-s,c=n-o,f=r-s,d=i-o,h=a-s,p=c*c+f*f,g=d*d+h*h;return u*(f*g-p*h)-l*(c*g-p*d)+(u*u+l*l)*(c*h-f*d)<0}function circumradius(e,t,n,r,i,a){var o=n-e,s=r-t,u=i-e,l=a-t,c=o*o+s*s,f=u*u+l*l,d=.5/(o*l-s*u),h=(l*c-s*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function quicksort(e,t,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var a=e[i],o=t[a],s=i-1;s>=n&&t[e[s]]>o;)e[s+1]=e[s--];e[s+1]=a}else{var u=n+1,l=r;delaunator_swap(e,n+r>>1,u),t[e[n]]>t[e[r]]&&delaunator_swap(e,n,r),t[e[u]]>t[e[r]]&&delaunator_swap(e,u,r),t[e[n]]>t[e[u]]&&delaunator_swap(e,n,u);for(var c=e[u],f=t[c];;){do{u++}while(t[e[u]]<f);do{l--}while(t[e[l]]>f);if(l<u)break;delaunator_swap(e,u,l)}e[n+1]=e[l],e[l]=c,r-u+1>=l-n?(quicksort(e,t,u,r),quicksort(e,t,n,l-1)):(quicksort(e,t,n,l-1),quicksort(e,t,u,r))}}function delaunator_swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function defaultGetX(e){return e[0]}function defaultGetY(e){return e[1]}var Sd=function(){function Path(){Object(_d.a)(this,Path),this._x0=this._y0=this._x1=this._y1=null,this._=""}return Object(bd.a)(Path,[{key:"moveTo",value:function moveTo(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function lineTo(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function arc(e,t,n){var r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function rect(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function value(){return this._||null}}]),Path}(),Ed=function(){function Polygon(){Object(_d.a)(this,Polygon),this._=[]}return Object(bd.a)(Polygon,[{key:"moveTo",value:function moveTo(e,t){this._.push([e,t])}},{key:"closePath",value:function closePath(){this._.push(this._[0].slice())}},{key:"lineTo",value:function lineTo(e,t){this._.push([e,t])}},{key:"value",value:function value(){return this._.length?this._:null}}]),Polygon}(),Td=function(){function Voronoi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],n=Object(qt.a)(t,4),r=n[0],i=n[1],a=n[2],o=n[3];if(Object(_d.a)(this,Voronoi),!((a=+a)>=(r=+r))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=a,this.xmin=r,this.ymax=o,this.ymin=i,this._init()}return Object(bd.a)(Voronoi,[{key:"update",value:function update(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function _init(){for(var e,t,n=this.delaunay,r=n.points,i=n.hull,a=n.triangles,o=this.vectors,s=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),u=0,l=0,c=a.length;u<c;u+=3,l+=2){var f=2*a[u],d=2*a[u+1],h=2*a[u+2],p=r[f],g=r[f+1],m=r[d],v=r[d+1],y=r[h],_=r[h+1],b=m-p,x=v-g,w=y-p,k=_-g,S=b*b+x*x,E=w*w+k*k,T=2*(b*k-x*w);if(T)if(Math.abs(T)<1e-8)e=(p+y)/2,t=(g+_)/2;else{var C=1/T;e=p+(k*S-x*E)*C,t=g+(b*E-w*S)*C}else e=(p+y)/2-1e8*k,t=(g+_)/2+1e8*w;s[l]=e,s[l+1]=t}var O,A,R,D=i[i.length-1],P=4*D,M=r[2*D],j=r[2*D+1];o.fill(0);for(var F=0;F<i.length;++F)O=P,A=M,R=j,P=4*(D=i[F]),M=r[2*D],j=r[2*D+1],o[O+2]=o[P]=R-j,o[O+3]=o[P+1]=M-A}},{key:"render",value:function render(e){var t=null==e?e=new Sd:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,a=n.hull,o=this.circumcenters,s=this.vectors;if(a.length<=1)return null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(!(c<u)){var f=2*Math.floor(u/3),d=2*Math.floor(c/3),h=o[f],p=o[f+1],g=o[d],m=o[d+1];this._renderSegment(h,p,g,m,e)}}for(var v,y=a[a.length-1],_=0;_<a.length;++_){v=y,y=a[_];var b=2*Math.floor(i[y]/3),x=o[b],w=o[b+1],k=4*v,S=this._project(x,w,s[k+2],s[k+3]);S&&this._renderSegment(x,w,S[0],S[1],e)}return t&&t.value()}},{key:"renderBounds",value:function renderBounds(e){var t=null==e?e=new Sd:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function renderCell(e,t){var n=null==t?t=new Sd:void 0,r=this._clip(e);if(null!==r){t.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||t.lineTo(r[a],r[a+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:A.a.mark((function cellPolygons(){var e,t,n,r;return A.a.wrap((function cellPolygons$(i){for(;;)switch(i.prev=i.next){case 0:e=this.delaunay.points,t=0,n=e.length/2;case 2:if(!(t<n)){i.next=10;break}if(!(r=this.cellPolygon(t))){i.next=7;break}return i.next=7,r;case 7:++t,i.next=2;break;case 10:case"end":return i.stop()}}),cellPolygons,this)}))},{key:"cellPolygon",value:function cellPolygon(e){var t=new Ed;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function _renderSegment(e,t,n,r,i){var a,o=this._regioncode(e,t),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function contains(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}},{key:"_cell",value:function _cell(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,a=n.triangles,o=r[e];if(-1===o)return null;var s=[],u=o;do{var l=Math.floor(u/3);if(s.push(t[2*l],t[2*l+1]),a[u=u%3===2?u-2:u+1]!==e)break;u=i[u]}while(u!==o&&-1!==u);return s}},{key:"_clip",value:function _clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}},{key:"_clipFinite",value:function _clipFinite(e,t){for(var n,r,i,a,o,s=t.length,u=null,l=t[s-2],c=t[s-1],f=this._regioncode(l,c),d=0;d<s;d+=2)if(n=l,r=c,l=t[d],c=t[d+1],i=f,f=this._regioncode(l,c),0===i&&0===f)a=o,o=0,u?u.push(l,c):u=[l,c];else{var h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;if(0===i){if(null===(h=this._clipSegment(n,r,l,c,i,f)))continue;var y=h,_=Object(qt.a)(y,4);p=_[0],g=_[1],m=_[2],v=_[3]}else{if(null===(h=this._clipSegment(l,c,n,r,f,i)))continue;var b=h,x=Object(qt.a)(b,4);m=x[0],v=x[1],p=x[2],g=x[3],a=o,o=this._edgecode(p,g),a&&o&&this._edge(e,a,o,u,u.length),u?u.push(p,g):u=[p,g]}a=o,o=this._edgecode(m,v),a&&o&&this._edge(e,a,o,u,u.length),u?u.push(m,v):u=[m,v]}if(u)a=o,o=this._edgecode(u[0],u[1]),a&&o&&this._edge(e,a,o,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}},{key:"_clipSegment",value:function _clipSegment(e,t,n,r,i,a){for(;;){if(0===i&&0===a)return[e,t,n,r];if(i&a)return null;var o=void 0,s=void 0,u=i||a;8&u?(o=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(o=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),o=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),o=this.xmin),i?(e=o,t=s,i=this._regioncode(e,t)):(n=o,r=s,a=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function _clipInfinite(e,t,n,r,i,a){var o,s=Array.from(t);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(e,s))for(var u,l=0,c=s.length,f=this._edgecode(s[c-2],s[c-1]);l<c;l+=2)u=f,f=this._edgecode(s[l],s[l+1]),u&&f&&(l=this._edge(e,u,f,s,l),c=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}},{key:"_edge",value:function _edge(e,t,n,r,i){for(;t!==n;){var a=void 0,o=void 0;switch(t){case 5:t=4;continue;case 4:t=6,a=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,a=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,a=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(e,a,o)||(r.splice(i,0,a,o),i+=2)}if(r.length>4)for(var s=0;s<r.length;s+=2){var u=(s+2)%r.length,l=(s+4)%r.length;(r[s]===r[u]&&r[u]===r[l]||r[s+1]===r[u+1]&&r[u+1]===r[l+1])&&(r.splice(u,2),s-=2)}return i}},{key:"_project",value:function _project(e,t,n,r){var i,a,o,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(o=this.ymin,a=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(o=this.ymax,a=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(a=this.xmax,o=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(a=this.xmin,o=t+(s=i)*r)}return[a,o]}},{key:"_edgecode",value:function _edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function _regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}]),Voronoi}(),Cd=A.a.mark(flatIterable),Od=2*Math.PI;function pointX(e){return e[0]}function pointY(e){return e[1]}function jitter(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var Ad=function(){function Delaunay(e){Object(_d.a)(this,Delaunay),this._delaunator=new kd(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}return Object(bd.a)(Delaunay,[{key:"update",value:function update(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function _init(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function delaunay_area(e,t){for(var n,r=e.length,i=t[2*e[r-1]],a=t[2*e[r-1]+1],o=0,s=0;s<r;s++)n=i,o+=a*(i=t[2*e[s]])-n*(a=t[2*e[s]+1]);return o/2}(e.hull,t)<1e-10){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],a=1e-8*Math.sqrt(Math.pow(i[3]-i[1],2)+Math.pow(i[2]-i[0],2)),o=0,s=t.length/2;o<s;++o){var u=jitter(t[2*o],t[2*o+1],a);t[2*o]=u[0],t[2*o+1]=u[1]}this._delaunator=new kd(t)}else delete this.collinear;for(var l=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),h=this._hullIndex.fill(-1),p=0,g=l.length;p<g;++p){var m=f[p%3===2?p-2:p+1];-1!==l[p]&&-1!==d[m]||(d[m]=p)}for(var v=0,y=c.length;v<y;++v)h[c[v]]=v;c.length<=2&&c.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],this.triangles[1]=c[1],this.triangles[2]=c[1],d[c[0]]=1,2===c.length&&(d[c[1]]=0))}},{key:"voronoi",value:function voronoi(e){return new Td(this,e)}},{key:"neighbors",value:A.a.mark((function neighbors(e){var t,n,r,i,a,o,s,u,l,c;return A.a.wrap((function neighbors$(f){for(;;)switch(f.prev=f.next){case 0:if(t=this.inedges,n=this.hull,r=this._hullIndex,i=this.halfedges,a=this.triangles,!this.collinear){f.next=10;break}if(!((o=this.collinear.indexOf(e))>0)){f.next=6;break}return f.next=6,this.collinear[o-1];case 6:if(!(o<this.collinear.length-1)){f.next=9;break}return f.next=9,this.collinear[o+1];case 9:return f.abrupt("return");case 10:if(-1!==(s=t[e])){f.next=13;break}return f.abrupt("return");case 13:u=s,l=-1;case 14:return f.next=16,l=a[u];case 16:if(a[u=u%3===2?u-2:u+1]===e){f.next=19;break}return f.abrupt("return");case 19:if(-1!==(u=i[u])){f.next=26;break}if((c=n[(r[e]+1)%n.length])===l){f.next=25;break}return f.next=25,c;case 25:return f.abrupt("return");case 26:if(u!==s){f.next=14;break}case 27:case"end":return f.stop()}}),neighbors,this)}))},{key:"find",value:function find(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!==e||(t=+t)!==t)return-1;for(var r,i=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function _step(e,t,n){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,s=this.triangles,u=this.points;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);var l=e,c=Math.pow(t-u[2*e],2)+Math.pow(n-u[2*e+1],2),f=r[e],d=f;do{var h=s[d],p=Math.pow(t-u[2*h],2)+Math.pow(n-u[2*h+1],2);if(p<c&&(c=p,l=h),s[d=d%3===2?d-2:d+1]!==e)break;if(-1===(d=o[d])){if((d=i[(a[e]+1)%i.length])!==h&&Math.pow(t-u[2*d],2)+Math.pow(n-u[2*d+1],2)<c)return d;break}}while(d!==f);return l}},{key:"render",value:function render(e){for(var t=null==e?e=new Sd:void 0,n=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var s=r[a];if(!(s<a)){var u=2*i[a],l=2*i[s];e.moveTo(n[u],n[u+1]),e.lineTo(n[l],n[l+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function renderPoints(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=null==e?e=new Sd:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],s=r[i+1];e.moveTo(o+t,s),e.arc(o,s,t,0,Od)}return n&&n.value()}},{key:"renderHull",value:function renderHull(e){var t=null==e?e=new Sd:void 0,n=this.hull,r=this.points,i=2*n[0],a=n.length;e.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var s=2*n[o];e.lineTo(r[s],r[s+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function hullPolygon(){var e=new Ed;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function renderTriangle(e,t){var n=null==t?t=new Sd:void 0,r=this.points,i=this.triangles,a=2*i[e*=3],o=2*i[e+1],s=2*i[e+2];return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:A.a.mark((function trianglePolygons(){var e,t,n;return A.a.wrap((function trianglePolygons$(r){for(;;)switch(r.prev=r.next){case 0:e=this.triangles,t=0,n=e.length/3;case 2:if(!(t<n)){r.next=8;break}return r.next=5,this.trianglePolygon(t);case 5:++t,r.next=2;break;case 8:case"end":return r.stop()}}),trianglePolygons,this)}))},{key:"trianglePolygon",value:function trianglePolygon(e){var t=new Ed;return this.renderTriangle(e,t),t.value()}}]),Delaunay}();function flatArray(e,t,n,r){for(var i=e.length,a=new Float64Array(2*i),o=0;o<i;++o){var s=e[o];a[2*o]=t.call(r,s,o,e),a[2*o+1]=n.call(r,s,o,e)}return a}function flatIterable(e,t,n,r){var i,a,o,s,u,l,c;return A.a.wrap((function flatIterable$(f){for(;;)switch(f.prev=f.next){case 0:i=0,a=!0,o=!1,s=void 0,f.prev=4,u=e[Symbol.iterator]();case 6:if(a=(l=u.next()).done){f.next=16;break}return c=l.value,f.next=10,t.call(r,c,i,e);case 10:return f.next=12,n.call(r,c,i,e);case 12:++i;case 13:a=!0,f.next=6;break;case 16:f.next=22;break;case 18:f.prev=18,f.t0=f.catch(4),o=!0,s=f.t0;case 22:f.prev=22,f.prev=23,a||null==u.return||u.return();case 25:if(f.prev=25,!o){f.next=28;break}throw s;case 28:return f.finish(25);case 29:return f.finish(22);case 30:case"end":return f.stop()}}),Cd,null,[[4,18,22,30],[23,,25,29]])}function Voronoi_Voronoi(e){Transform.call(this,null,e)}Ad.from=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pointX,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pointY,r=arguments.length>3?arguments[3]:void 0;return new Ad("length"in e?flatArray(e,t,n,r):Float64Array.from(flatIterable(e,t,n,r)))},Voronoi_Voronoi.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};var Rd=Object(V.y)(Voronoi_Voronoi,Transform),Dd=[-1e5,-1e5,1e5,1e5];function toPathString(e){for(var t=e[0][0],n=e[0][1],r=e.length-1;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}Rd.transform=function(e,t){var n=e.as||"path",r=t.source;if(!r||!r.length)return t;var i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Dd;for(var a=this.value=Ad.from(r,e.x,e.y).voronoi(i),o=0,s=r.length;o<s;++o){var u=a.cellPolygon(o);r[o][n]=u?toPathString(u):null}return t.reflow(e.modified()).modifies(n)};var Pd=Math.PI/180,Md=64,jd=2048,Fd=function(){var e,t,n,r,i,a,o,s=[256,256],u=archimedeanSpiral,l=[],c=Math.random,f={};function place(e,t,n){for(var r,i,a,o,l,f=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),g=c()<.5?1:-1,m=-g;(r=p(m+=g))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=h));)if(t.x=f+i,t.y=d+a,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1])&&(!n||!cloudCollide(t,e,s[0]))&&(!n||(l=n,(o=t).x+o.x1>l[0].x&&o.x+o.x0<l[1].x&&o.y+o.y1>l[0].y&&o.y+o.y0<l[1].y))){for(var v,y=t.sprite,_=t.width>>5,b=s[0]>>5,x=t.x-(_<<4),w=127&x,k=32-w,S=t.y1-t.y0,E=(t.y+t.y0)*b+(x>>5),T=0;T<S;T++){v=0;for(var C=0;C<=_;C++)e[E+C]|=v<<k|(C<_?(v=y[T*_+C])>>>w:0);E+=b}return t.sprite=null,!0}return!1}return f.layout=function(){for(var u=function getContext(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(Md<<5)/t,e.height=jd/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(domCanvas()),f=function zeroArray(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),d=null,h=l.length,p=-1,g=[],m=l.map((function(s){return{text:e(s),font:t(s),style:r(s),weight:i(s),rotate:a(s),size:~~n(s),padding:o(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}})).sort((function(e,t){return t.size-e.size}));++p<h;){var v=m[p];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,cloudSprite(u,v,m,p),v.hasText&&place(f,v,d)&&(g.push(v),d?cloudBounds(d,v):d=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(l=e,f):l},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=functor(e),f):t},f.fontStyle=function(e){return arguments.length?(r=functor(e),f):r},f.fontWeight=function(e){return arguments.length?(i=functor(e),f):i},f.rotate=function(e){return arguments.length?(a=functor(e),f):a},f.text=function(t){return arguments.length?(e=functor(t),f):e},f.spiral=function(e){return arguments.length?(u=Id[e]||e,f):u},f.fontSize=function(e){return arguments.length?(n=functor(e),f):n},f.padding=function(e){return arguments.length?(o=functor(e),f):o},f.random=function(e){return arguments.length?(c=e,f):c},f};function cloudSprite(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(Md<<5)/a,jd/a);var o,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,o=i.measureText(t.text+"m").width*a,u=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Pd),m=Math.cos(t.rotate*Pd),v=o*m,y=o*g,_=u*m,b=u*g;o=Math.max(Math.abs(v+b),Math.abs(v-b))+31>>5<<5,u=~~Math.max(Math.abs(y+_),Math.abs(y-_))}else o=o+31>>5<<5;if(u>h&&(h=u),f+o>=Md<<5&&(f=0,d+=h,h=0),d+u>=jd)break;i.translate((f+(o>>1))/a,(d+(u>>1))/a),t.rotate&&i.rotate(t.rotate*Pd),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=o,t.height=u,t.xoff=f,t.yoff=d,t.x1=o>>1,t.y1=u>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=o}for(var x=i.getImageData(0,0,(Md<<5)/a,jd/a).data,w=[];--r>=0;)if((t=n[r]).hasText){for(s=(o=t.width)>>5,u=t.y1-t.y0,l=0;l<u*s;l++)w[l]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,S=-1;for(c=0;c<u;c++){for(l=0;l<o;l++){var E=s*c+(l>>5),T=x[(d+c)*(Md<<5)+(f+l)<<2]?1<<31-l%32:0;w[E]|=T,k|=T}k?S=c:(t.y0++,u--,c--,d++)}t.y1=t.y0+S,t.sprite=w.slice(0,(t.y1-t.y0)*s)}}}function cloudCollide(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),f=0;f<l;f++){r=0;for(var d=0;d<=a;d++)if((r<<u|(d<a?(r=i[f*a+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function cloudBounds(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function archimedeanSpiral(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function functor(e){return"function"===typeof e?e:function(){return e}}var Id={archimedean:archimedeanSpiral,rectangular:function rectangularSpiral(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}},Ld=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Nd=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wordcloud(e){Transform.call(this,Fd(),e)}function array8(e){return new Uint8Array(e)}function array16(e){return new Uint16Array(e)}function array32(e){return new Uint32Array(e)}function Bitmaps_array(e,t,n){var r=(t<257?array8:t<65537?array16:array32)(e);return n&&r.set(n),r}Wordcloud.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Ld}]},Object(V.y)(Wordcloud,Transform).transform=function(e,t){!e.size||e.size[0]&&e.size[1]||Object(V.n)("Wordcloud size dimensions must be non-zero.");var n=e.modified();if(n||t.changed(t.ADD_REM)||Nd.some((function modp(n){var r=e[n];return Object(V.D)(r)&&t.modified(r.fields)}))){var r,i=t.materialize(t.SOURCE).source,a=this.value,o=e.as||Ld,s=e.fontSize||14;if(Object(V.D)(s)?r=e.fontSizeRange:s=Object(V.l)(s),r){var u=s,l=scales_scale("sqrt")().domain(function Wordcloud_extent(e,t){for(var n,r=1/0,i=-1/0,a=0,o=t.length;a<o;++a)(n=e(t[a]))<r&&(r=n),n>i&&(i=n);return[r,i]}(u,i)).range(r);s=function fontSize(e){return l(u(e))}}i.forEach((function(e){e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));for(var c,f,d=a.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(kt).layout(),h=a.size(),p=h[0]>>1,g=h[1]>>1,m=0,v=d.length;m<v;++m)(f=(c=d[m]).datum)[o[0]]=c.x+p,f[o[1]]=c.y+g,f[o[2]]=c.font,f[o[3]]=c.size,f[o[4]]=c.style,f[o[5]]=c.weight,f[o[6]]=c.rotate;return t.reflow(n).modifies(o)}};var Bd=function(e,t,n){var r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function onAdd(e,t){var n,i=this.bisect(this.range,e.value),a=e.index,o=i[0],s=i[1],u=a.length;for(n=0;n<o;++n)t[a[n]]|=r;for(n=s;n<u;++n)t[a[n]]|=r;return this}}},Ud=function(e,t){return Array.from(t,(function(t){return e[t]}))};function SortedIndex(){var e=array32(0),t=[],n=0;return{insert:function insert(r,i,a){if(!i.length)return[];var o,s,u,l=n,c=i.length,f=Array(c),d=array32(c);for(u=0;u<c;++u)f[u]=r(i[u]),d[u]=u;if(f=function SortedIndex_sort(e,t){return e.sort.call(t,(function(t,n){var r=e[t],i=e[n];return r<i?-1:r>i?1:0})),Ud(e,t)}(f,d),l)o=t,s=e,t=Array(l+c),e=array32(l+c),function SortedIndex_merge(e,t,n,r,i,a,o,s,u){var l,c=0,f=0;for(l=0;c<r&&f<o;++l)t[c]<i[f]?(s[l]=t[c],u[l]=n[c++]):(s[l]=i[f],u[l]=a[f++]+e);for(;c<r;++c,++l)s[l]=t[c],u[l]=n[c];for(;f<o;++f,++l)s[l]=i[f],u[l]=a[f]+e}(a,o,s,l,f,d,c,t,e);else{if(a>0)for(u=0;u<c;++u)d[u]+=a;t=f,e=d}return n=l+c,{index:d,value:f}},remove:function remove(r,i){var a,o,s,u=n;for(o=0;!i[e[o]]&&o<u;++o);for(s=o;o<u;++o)i[a=e[o]]||(e[s]=a,t[s]=t[o],++s);n=u-r},bisect:function bisect(e,r){var i;return r?i=r.length:(r=t,i=n),[_o(r,e[0],0,i),yo(r,e[1],0,i)]},reindex:function reindex(t){for(var r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:function index(){return e},size:function size(){return n}}}function CrossFilter(e){Transform.call(this,function Bitmaps(){var e=8,t=[],n=array32(0),r=Bitmaps_array(0,e),i=Bitmaps_array(0,e);return{data:function data(){return t},seen:function seen(){return n=function lengthen(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}(n,t.length)},add:function add(e){for(var n,r=0,i=t.length,a=e.length;r<a;++r)(n=e[r])._index=i++,t.push(n)},remove:function remove(e,n){var a,o,s,u=t.length,l=Array(u-e),c=t;for(o=0;!n[o]&&o<u;++o)l[o]=t[o],c[o]=o;for(s=o;o<u;++o)a=t[o],n[o]?c[o]=-1:(c[o]=s,r[s]=r[o],i[s]=i[o],l[s]=a,a._index=s++),r[o]=0;return t=l,c},size:function size(){return t.length},curr:function curr(){return r},prev:function prev(){return i},reset:function reset(e){i[e]=r[e]},all:function all(){return e<257?255:e<65537?65535:4294967295},set:function set(e,t){r[e]|=t},clear:function clear(e,t){r[e]&=~t},resize:function resize(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=Bitmaps_array(t,e,r),i=Bitmaps_array(t,e))}}}(),e),this._indices=null,this._dims=null}CrossFilter.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};var zd=Object(V.y)(CrossFilter,Transform);function ResolveFilter(e){Transform.call(this,null,e)}zd.transform=function(e,t){return this._dims?e.modified("fields")||e.fields.some((function(e){return t.modified(e.fields)}))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},zd.init=function(e,t){for(var n,r,i=e.fields,a=e.query,o=this._indices={},s=this._dims=[],u=a.length,l=0;l<u;++l)r=o[n=i[l].fname]||(o[n]=SortedIndex()),s.push(Bd(r,l,a[l]));return this.eval(e,t)},zd.reinit=function(e,t){var n,r,i,a,o,s,u,l,c,f=t.materialize().fork(),d=e.fields,h=e.query,p=this._indices,g=this._dims,m=this.value,v=m.curr(),y=m.prev(),_=m.all(),b=f.rem=f.add,x=f.mod,w=h.length,k={};if(y.set(v),t.rem.length&&(o=this.remove(e,t,f)),t.add.length&&m.add(t.add),t.mod.length)for(s={},u=0,l=(a=t.mod).length;u<l;++u)s[a[u]._index]=1;for(u=0;u<w;++u)c=d[u],(!g[u]||e.modified("fields",u)||t.modified(c.fields))&&((n=k[i=c.fname])||(p[i]=r=SortedIndex(),k[i]=n=r.insert(c,t.source,0)),g[u]=Bd(r,u,h[u]).onAdd(n,v));for(u=0,l=m.data().length;u<l;++u)o[u]||(y[u]!==v[u]?b.push(u):s[u]&&v[u]!==_&&x.push(u));return m.mask=(1<<w)-1,f},zd.eval=function(e,t){var n=t.materialize().fork(),r=this._dims.length,i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},zd.insert=function(e,t,n){var r,i,a,o=t.add,s=this.value,u=this._dims,l=this._indices,c=e.fields,f={},d=n.add,h=s.size(),p=h+o.length,g=u.length;s.resize(p,g),s.add(o);var m=s.curr(),v=s.prev(),y=s.all();for(r=0;r<g;++r)a=f[i=c[r].fname]||(f[i]=l[i].insert(c[r],o,h)),u[r].onAdd(a,m);for(;h<p;++h)v[h]=y,m[h]!==y&&d.push(h)},zd.modify=function(e,t){var n,r,i,a=t.mod,o=this.value,s=o.curr(),u=o.all(),l=e.mod;for(n=0,r=l.length;n<r;++n)s[i=l[n]._index]!==u&&a.push(i)},zd.remove=function(e,t,n){var r,i,a,o,s=this._indices,u=this.value,l=u.curr(),c=u.prev(),f=u.all(),d={},h=n.rem,p=t.rem;for(r=0,i=p.length;r<i;++r)d[a=p[r]._index]=1,c[a]=o=l[a],l[a]=f,o!==f&&h.push(a);for(a in s)s[a].remove(i,d);return this.reindex(t,i,d),d},zd.reindex=function(e,t,n){var r=this._indices,i=this.value;e.runAfter((function(){var e=i.remove(t,n);for(var a in r)r[a].reindex(e)}))},zd.update=function(e,t,n){var r,i,a=this._dims,o=e.query,s=t.stamp,u=a.length,l=0;for(n.filters=0,i=0;i<u;++i)e.modified("query",i)&&(r=i,++l);if(1===l)l=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,l=0;i<u;++i)e.modified("query",i)&&(l|=a[i].one,this.incrementAll(a[i],o[i],s,n.add),n.rem=n.add);return l},zd.incrementAll=function(e,t,n,r){var i,a,o,s=this.value,u=s.seen(),l=s.curr(),c=s.prev(),f=e.index(),d=e.bisect(e.range),h=e.bisect(t),p=h[0],g=h[1],m=d[0],v=d[1],y=e.one;if(p<m)for(i=p,a=Math.min(m,g);i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;else if(p>m)for(i=m,a=Math.min(p,v);i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;if(g>v)for(i=Math.max(p,v),a=g;i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;else if(g<v)for(i=Math.max(m,g),a=v;i<a;++i)u[o=f[i]]!==n&&(c[o]=l[o],u[o]=n,r.push(o)),l[o]^=y;e.range=t.slice()},zd.incrementOne=function(e,t,n,r){var i,a,o,s=this.value.curr(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;if(f<h)for(i=f,a=Math.min(h,d);i<a;++i)s[o=u[i]]^=g,n.push(o);else if(f>h)for(i=h,a=Math.min(f,p);i<a;++i)s[o=u[i]]^=g,r.push(o);if(d>p)for(i=Math.max(f,p),a=d;i<a;++i)s[o=u[i]]^=g,n.push(o);else if(d<p)for(i=Math.max(h,d),a=p;i<a;++i)s[o=u[i]]^=g,r.push(o);e.range=t.slice()},ResolveFilter.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Object(V.y)(ResolveFilter,Transform).transform=function(e,t){var n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;var a=t.fork(t.ALL),o=r.data(),s=r.curr(),u=r.prev(),l=function pass(e){return s[e]&n?null:o[e]};return a.filter(a.MOD,l),i&i-1?(a.filter(a.ADD,(function(e){var t=s[e]&n;return!t&&t^u[e]&n?o[e]:null})),a.filter(a.REM,(function(e){var t=s[e]&n;return t&&!(t^t^u[e]&n)?o[e]:null}))):(a.filter(a.ADD,l),a.filter(a.REM,(function(e){return(s[e]&n)===i?o[e]:null}))),a.filter(a.SOURCE,(function(e){return l(e._index)}))};var qd=n(186),Wd=/^([A-Za-z]+:)?\/\//,Gd=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Hd=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Vd="file://";function vega_loader_src_loader_load(e,t){return node_modules_vega_loader_src_loader_load.apply(this,arguments)}function node_modules_vega_loader_src_loader_load(){return(node_modules_vega_loader_src_loader_load=Object(Y.a)(A.a.mark((function _callee2(e,t){var n,r;return A.a.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sanitize(e,t);case 2:return n=i.sent,r=n.href,i.abrupt("return",n.localFile?this.file(r):this.http(r,t));case 5:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}function vega_loader_src_loader_sanitize(e,t){return node_modules_vega_loader_src_loader_sanitize.apply(this,arguments)}function node_modules_vega_loader_src_loader_sanitize(){return(node_modules_vega_loader_src_loader_sanitize=Object(Y.a)(A.a.mark((function _callee3(e,t){var n,r,i,a,o,s,u;return A.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(V.o)({},this.options,t),n=this.fileAccess,r={href:null},s=Gd.test(e.replace(Hd,"")),null!=e&&"string"===typeof e&&s||Object(V.n)("Sanitize failure, invalid URI: "+Object(V.X)(e)),u=Wd.test(e),(o=t.baseURL)&&!u&&(e.startsWith("/")||"/"===o[o.length-1]||(e="/"+e),e=o+e),a=(i=e.startsWith(Vd))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(Vd.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee3,this)})))).apply(this,arguments)}function src_loader_fileLoader(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:vega_loader_src_loader_fileReject}function vega_loader_src_loader_fileReject(){return node_modules_vega_loader_src_loader_fileReject.apply(this,arguments)}function node_modules_vega_loader_src_loader_fileReject(){return(node_modules_vega_loader_src_loader_fileReject=Object(Y.a)(A.a.mark((function _callee4(){return A.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No file system access.");case 1:case"end":return e.stop()}}),_callee4)})))).apply(this,arguments)}function src_loader_httpLoader(e){return e?function(){var t=Object(Y.a)(A.a.mark((function _callee(t,n){var r,i,a;return A.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(V.o)({},this.options.http,n),i=n&&n.response,o.next=4,e(t,r);case 4:return a=o.sent,o.abrupt("return",a.ok?Object(V.D)(a[i])?a[i]():a.text():Object(V.n)(a.status+""+a.statusText));case 6:case"end":return o.stop()}}),_callee,this)})));return function(e,n){return t.apply(this,arguments)}}():vega_loader_src_loader_httpReject}function vega_loader_src_loader_httpReject(){return node_modules_vega_loader_src_loader_httpReject.apply(this,arguments)}function node_modules_vega_loader_src_loader_httpReject(){return(node_modules_vega_loader_src_loader_httpReject=Object(Y.a)(A.a.mark((function _callee5(){return A.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),_callee5)})))).apply(this,arguments)}var Yd={boolean:V.Y,integer:V.ab,number:V.ab,date:V.Z,string:V.cb,unknown:V.x},$d=[function src_type_isBoolean(e){return"true"===e||"false"===e||!0===e||!1===e},function src_type_isInteger(e){return src_type_isNumber(e)&&(e=+e)===~~e},src_type_isNumber,function src_type_isDate(e){return!isNaN(Date.parse(e))}],Xd=["boolean","integer","number","date"];function src_type_inferType(e,t){if(!e||!e.length)return"unknown";var n,r,i,a,o=0,s=e.length,u=$d.length,l=$d.map((function(e,t){return t+1}));for(r=0,s=e.length;r<s;++r)for(n=t?e[r][t]:e[r],i=0;i<u;++i)if(l[i]&&(null!=(a=n)&&a===a)&&!$d[i](n)&&(l[i]=0,++o===$d.length))return"string";return o=l.reduce((function(e,t){return 0===e?t:e}),0)-1,Xd[o]}function src_type_inferTypes(e,t){return t.reduce((function(t,n){return t[n]=src_type_inferType(e,n),t}),{})}function src_type_isNumber(e){return!isNaN(+e)&&!(e instanceof Date)}function formats_dsv_delimitedFormat(e){var t=function parse(t,n){var r={delimiter:e};return src_formats_dsv_dsv(t,n?Object(V.o)(n,r):r)};return t.responseType="text",t}function src_formats_dsv_dsv(e,t){return t.header&&(e=t.header.map(V.X).join(t.delimiter)+"\n"+e),me(t.delimiter).parse(e+"")}src_formats_dsv_dsv.responseType="text";var Kd=n(81),Jd={interior:function interior(e,t){return e!==t},exterior:function exterior(e,t){return e===t}};function formats_topojson_topojson(e,t){var n,r,i,a;return e=Object(Kd.a)(e,t),t&&t.feature?(n=ke,i=t.feature):t&&t.mesh?(n=Ee,i=t.mesh,a=Jd[t.filter]):Object(V.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,a):Object(V.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}formats_topojson_topojson.responseType="json";var Zd={dsv:src_formats_dsv_dsv,csv:formats_dsv_delimitedFormat(","),tsv:formats_dsv_delimitedFormat("\t"),json:Kd.a,topojson:formats_topojson_topojson};function vega_loader_src_formats_formats(e,t){return arguments.length>1?(Zd[e]=t,this):Object(V.v)(Zd,e)?Zd[e]:null}function src_formats_responseType(e){var t=vega_loader_src_formats_formats(e);return t&&t.responseType||"text"}var Qd=function(e,t,n){var r=vega_loader_src_formats_formats((t=t||{}).type||"json");return r||Object(V.n)("Unknown data format type: "+t.type),e=r(e,t),t.parse&&function vega_loader_src_read_parse(e,t,n){if(!e.length)return;n=n||nt;var r,i,a,o,s,u,l,c=e.columns||Object.keys(e[0]);"auto"===t&&(t=src_type_inferTypes(e,c));for(c=Object.keys(t),r=c.map((function(e){var r,i,a=t[e];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return("'"===(i=(r=a.split(/:(.+)?/,2))[1])[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?it(i):n(i);if(!Yd[a])throw Error("Illegal format pattern: "+e+":"+a);return Yd[a]})),o=0,u=e.length,l=c.length;o<u;++o)for(i=e[o],s=0;s<l;++s)a=c[s],i[a]=r[s](i[a])}(e,t.parse,n),Object(V.v)(e,"columns")&&delete e.columns,e};var eh=function(e,t){return function(n){return{options:n||{},sanitize:vega_loader_src_loader_sanitize,load:vega_loader_src_loader_load,fileAccess:!!t,file:src_loader_fileLoader(t),http:src_loader_httpLoader(e)}}}("undefined"!==typeof fetch&&fetch,null);function Bounds_Bounds(e){this.clear(),e&&this.union(e)}var th=Bounds_Bounds.prototype;th.clone=function(){return new Bounds_Bounds(this)},th.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},th.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},th.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},th.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},th.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},th.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},th.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},th.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},th.rotate=function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},th.rotatedPoints=function(e,t,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*o+l,u*r+s*o+c,s*a-u*i+l,u*a+s*i+c,s*a-u*o+l,u*a+s*o+c]},th.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},th.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},th.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},th.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},th.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},th.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},th.width=function(){return this.x2-this.x1},th.height=function(){return this.y2-this.y1};var nh=0,rh="p_";function Gradient_isGradient(e){return e&&e.gradient}function Gradient_gradientRef(e,t,n){var r=e.id,i=e.gradient,a="radial"===i?rh:"";return r||(r=e.id="gradient_"+nh++,"radial"===i?(e.x1=src_Gradient_get(e.x1,.5),e.y1=src_Gradient_get(e.y1,.5),e.r1=src_Gradient_get(e.r1,0),e.x2=src_Gradient_get(e.x2,.5),e.y2=src_Gradient_get(e.y2,.5),e.r2=src_Gradient_get(e.r2,.5),a=rh):(e.x1=src_Gradient_get(e.x1,0),e.y1=src_Gradient_get(e.y1,0),e.x2=src_Gradient_get(e.x2,1),e.y2=src_Gradient_get(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function src_Gradient_get(e,t){return null!=e?e:t}var ih=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function stop(e,t){return r.push({offset:e,color:t}),n}}};function Item_Item(e){this.mark=e,this.bounds=this.bounds||new Bounds_Bounds}function GroupItem_GroupItem(e){Item_Item.call(this,e),this.items=this.items||[]}function ResourceLoader_ResourceLoader(e){this._pending=0,this._loader=e||eh()}Object(V.y)(GroupItem_GroupItem,Item_Item);var ah=ResourceLoader_ResourceLoader.prototype;function ResourceLoader_increment(e){e._pending+=1}function ResourceLoader_decrement(e){e._pending-=1}ah.pending=function(){return this._pending},ah.sanitizeURL=function(e){var t=this;return ResourceLoader_increment(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return ResourceLoader_decrement(t),e})).catch((function(){return ResourceLoader_decrement(t),null}))},ah.loadImage=function(e){var t=this,n=domImage();return ResourceLoader_increment(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){ResourceLoader_decrement(t),i.loaded=!0},i.onerror=function(){ResourceLoader_decrement(t),i.loaded=!1},i.src=r,i})).catch((function(e){return ResourceLoader_decrement(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}}))},ah.ready=function(){var e=this;return new Promise((function(t){!function poll(n){e.pending()?setTimeout((function(){poll(!0)}),10):t(n)}(!1)}))};var oh={basis:{curve:Br},"basis-closed":{curve:Ur},"basis-open":{curve:zr},bundle:{curve:qr,tension:"beta",value:.85},cardinal:{curve:Wr,tension:"tension",value:0},"cardinal-open":{curve:Hr,tension:"tension",value:0},"cardinal-closed":{curve:Gr,tension:"tension",value:0},"catmull-rom":{curve:Vr,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Yr,tension:"alpha",value:.5},"catmull-rom-open":{curve:$r,tension:"alpha",value:.5},linear:{curve:Pr},"linear-closed":{curve:Xr},monotone:{horizontal:monotoneY,vertical:monotoneX},natural:{curve:Kr},step:{curve:Jr},"step-after":{curve:stepAfter},"step-before":{curve:stepBefore}};function curves_curves(e,t,n){var r=Object(V.v)(oh,e)&&oh[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var sh={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},uh=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],lh=function(e){var t,n,r,i,a,o,s,u,l,c,f,d=[];for(u=0,c=(t=e.slice().replace(uh[0],"###$1").split(uh[1]).slice(1)).length;u<c;++u){for(r=(n=t[u]).slice(1).trim().replace(uh[2],"$1###$2").split(uh[3]),i=[o=n.charAt(0)],l=0,f=r.length;l<f;++l)(a=+r[l])===a&&i.push(a);if(s=sh[o.toLowerCase()],i.length-1>s)for(l=1,f=i.length;l<f;l+=s)d.push([o].concat(i.slice(l,l+s)));else d.push(i)}return d},ch=Math.PI/180,fh=Math.PI/2,dh=2*Math.PI,hh=Math.sqrt(3)/2,ph={},gh={},mh=[].join;function arc_bezier(e){var t=mh.call(e);if(gh[t])return gh[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=l*o,f=-u*s,d=u*o,h=l*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),_=Math.sin(.5*y),b=8/3*_*_/Math.sin(y),x=n+p-b*g,w=r+g+b*p,k=n+m,S=r+v,E=k+b*v,T=S-b*m;return gh[t]=[c*x+f*w,d*x+h*w,c*E+f*T,d*E+h*T,c*k+f*S,d*k+h*S]}var vh=["l",0,0,0,0,0,0,0];function path_render_scale(e,t){var n=vh[0]=e[0];if("a"===n||"A"===n)vh[1]=t*e[1],vh[2]=t*e[2],vh[3]=e[3],vh[4]=e[4],vh[5]=e[5],vh[6]=t*e[6],vh[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)vh[r]=t*e[r];return vh}var _h=function(e,t,n,r,i){var a,o,s,u,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=path_render_scale(a,i)),a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+r);break;case"h":f+=a[1],e.lineTo(f+n,d+r);break;case"H":f=a[1],e.lineTo(f+n,d+r);break;case"v":d+=a[1],e.lineTo(f+n,d+r);break;case"V":d=a[1],e.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+r);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+r,h+n,p+r,o+n,s+r),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,f+n,d+r);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,f+a[1]+n,d+a[2]+r,o+n,s+r),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-u,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),u=h,l=p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),d=s,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"a":render_drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":render_drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}};function render_drawArc(e,t,n,r){for(var i=function path_arc_segments(e,t,n,r,i,a,o,s,u){var l=mh.call(arguments);if(ph[l])return ph[l];var c=o*ch,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=f/n,y=-f/r,_=d/r,b=m*s+v*u,x=y*s+_*u,w=m*e+v*t,k=y*e+_*t,S=1/((w-b)*(w-b)+(k-x)*(k-x))-.25;S<0&&(S=0);var E=Math.sqrt(S);a==i&&(E=-E);var T=.5*(b+w)-E*(k-x),C=.5*(x+k)+E*(w-b),O=Math.atan2(x-C,b-T),A=Math.atan2(k-C,w-T)-O;A<0&&1===a?A+=dh:A>0&&0===a&&(A-=dh);for(var R=Math.ceil(Math.abs(A/(fh+.001))),D=[],P=0;P<R;++P){var M=O+P*A/R,j=O+(P+1)*A/R;D[P]=[T,C,M,j,n,r,f,d]}return ph[l]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=arc_bezier(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var bh={circle:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,dh)}},cross:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function draw(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=hh*n,i=r-.5773502691896257*n,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=hh*n,i=r-.5773502691896257*n;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=hh*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=hh*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=hh*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=hh*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function path_symbols_symbols(e){return Object(V.v)(bh,e)?bh[e]:function symbols_customSymbol(e){if(!Object(V.v)(xh,e)){var t=lh(e);xh[e]={draw:function draw(e,n){_h(e,t,0,0,Math.sqrt(n)/2)}}}return xh[e]}(e)}var xh={};function rectangle_rectangleX(e){return e.x}function rectangle_rectangleY(e){return e.y}function rectangle_rectangleWidth(e){return e.width}function rectangle_rectangleHeight(e){return e.height}function path_rectangle_constant(e){return function(){return e}}var wh=function(){var e=rectangle_rectangleX,t=rectangle_rectangleY,n=rectangle_rectangleWidth,r=rectangle_rectangleHeight,i=path_rectangle_constant(0),a=null;function rectangle(o,s,u){var l,c=null!=s?s:+e.call(this,o),f=null!=u?u:+t.call(this,o),d=+n.call(this,o),h=+r.call(this,o),p=+i.call(this,o);if(a||(a=l=yr()),p<=0)a.rect(c,f,d,h);else{var g=c+d,m=f+h;a.moveTo(c+p,f),a.lineTo(g-p,f),a.quadraticCurveTo(g,f,g,f+p),a.lineTo(g,m-p),a.quadraticCurveTo(g,m,g-p,m),a.lineTo(c+p,m),a.quadraticCurveTo(c,m,c,m-p),a.lineTo(c,f+p),a.quadraticCurveTo(c,f,c+p,f),a.closePath()}if(l)return a=null,l+""||null}return rectangle.x=function(t){return arguments.length?(e="function"===typeof t?t:path_rectangle_constant(+t),rectangle):e},rectangle.y=function(e){return arguments.length?(t="function"===typeof e?e:path_rectangle_constant(+e),rectangle):t},rectangle.width=function(e){return arguments.length?(n="function"===typeof e?e:path_rectangle_constant(+e),rectangle):n},rectangle.height=function(e){return arguments.length?(r="function"===typeof e?e:path_rectangle_constant(+e),rectangle):r},rectangle.cornerRadius=function(e){return arguments.length?(i="function"===typeof e?e:path_rectangle_constant(+e),rectangle):i},rectangle.context=function(e){return arguments.length?(a=null==e?null:e,rectangle):a},rectangle},kh=function(){var e,t,n,r,i,a,o,s,u=null;function point(e,t,n){var r=n/2;if(i){var l=o-t,c=e-a;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(a-d,o-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(e,t,r,0,dh);u.closePath()}else i=1;a=e,o=t,s=r}function trail(a){var o,s,l,c=a.length,f=!1;for(null==u&&(u=l=yr()),o=0;o<=c;++o)!(o<c&&r(s=a[o],o,a))===f&&(f=!f)&&(i=0),f&&point(+e(s,o,a),+t(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return trail.x=function(t){return arguments.length?(e=t,trail):e},trail.y=function(e){return arguments.length?(t=e,trail):t},trail.size=function(e){return arguments.length?(n=e,trail):n},trail.defined=function(e){return arguments.length?(r=e,trail):r},trail.context=function(e){return arguments.length?(u=null==e?null:e,trail):u},trail};function path_shapes_x(e){return e.x||0}function path_shapes_y(e){return e.y||0}function path_shapes_cr(e){return e.cornerRadius||0}function path_shapes_def(e){return!(!1===e.defined)}var Sh=Dr().startAngle((function path_shapes_sa(e){return e.startAngle||0})).endAngle((function path_shapes_ea(e){return e.endAngle||0})).padAngle((function path_shapes_pa(e){return e.padAngle||0})).innerRadius((function shapes_ir(e){return e.innerRadius||0})).outerRadius((function path_shapes_or(e){return e.outerRadius||0})).cornerRadius(path_shapes_cr),Eh=jr().x(path_shapes_x).y1(path_shapes_y).y0((function shapes_yh(e){return(e.y||0)+(e.height||0)})).defined(path_shapes_def),Th=jr().y(path_shapes_y).x1(path_shapes_x).x0((function shapes_xw(e){return(e.x||0)+(e.width||0)})).defined(path_shapes_def),Ch=Mr().x(path_shapes_x).y(path_shapes_y).defined(path_shapes_def),Oh=wh().x(path_shapes_x).y(path_shapes_y).width((function path_shapes_w(e){return e.width||0})).height((function path_shapes_h(e){return e.height||0})).cornerRadius(path_shapes_cr),Ah=Lr().type((function path_shapes_type(e){return path_symbols_symbols(e.shape||"circle")})).size((function path_shapes_size(e){return null==e.size?64:e.size})),Rh=kh().x(path_shapes_x).y(path_shapes_y).defined(path_shapes_def).size((function shapes_ts(e){return e.size||1}));function path_shapes_rectangle(e,t,n,r){return Oh.context(e)(t,n,r)}var Dh,Ph=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e},Mh=dh-1e-8;function bound_boundContext_context(e){return Dh=e,bound_boundContext_context}function bound_boundContext_noop(){}function bound_boundContext_add(e,t){Dh.add(e,t)}bound_boundContext_context.beginPath=bound_boundContext_noop,bound_boundContext_context.closePath=bound_boundContext_noop,bound_boundContext_context.moveTo=bound_boundContext_add,bound_boundContext_context.lineTo=bound_boundContext_add,bound_boundContext_context.rect=function(e,t,n,r){bound_boundContext_add(e,t),bound_boundContext_add(e+n,t+r)},bound_boundContext_context.quadraticCurveTo=function(e,t,n,r){bound_boundContext_add(e,t),bound_boundContext_add(n,r)},bound_boundContext_context.bezierCurveTo=function(e,t,n,r,i,a){bound_boundContext_add(e,t),bound_boundContext_add(n,r),bound_boundContext_add(i,a)},bound_boundContext_context.arc=function(e,t,n,r,i,a){if(Math.abs(i-r)>Mh)return bound_boundContext_add(e-n,t-n),void bound_boundContext_add(e+n,t+n);var o,s,u,l,c=1/0,f=-1/0,d=1/0,h=-1/0;function update(e){u=n*Math.cos(e),l=n*Math.sin(e),u<c&&(c=u),u>f&&(f=u),l<d&&(d=l),l>h&&(h=l)}if(update(r),update(i),i!==r)if((r%=dh)<0&&(r+=dh),(i%=dh)<0&&(i+=dh),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=dh,o=r-r%fh,s=0;s<4&&o>i;++s,o-=fh)update(o);else for(o=r-r%fh+fh,s=0;s<4&&o<i;++s,o+=fh)update(o);bound_boundContext_add(e+c,t+d),bound_boundContext_add(e+f,t+h)};var jh=(jh=domCanvas(1,1))?jh.getContext("2d"):null,Fh=new Bounds_Bounds;function intersect_intersectPath(e){return function(t,n){if(!jh)return!0;e(jh,t),Fh.clear().union(t.bounds).intersect(n).round();for(var r=Fh.x1,i=Fh.y1,a=Fh.x2,o=Fh.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(jh.isPointInPath(u,s))return!0;return!1}}function intersect_intersectPoint(e,t){return t.contains(e.x||0,e.y||0)}function intersect_intersectRect(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return t.intersects(Fh.set(n,r,n+i,r+a))}function intersect_intersectRule(e,t){var n=e.x||0,r=e.y||0;return intersect_intersectBoxLine(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function intersect_intersectBoxLine(e,t,n,r,i){var a,o,s,u,l=e.x1,c=e.y1,f=e.x2,d=e.y2,h=r-t,p=i-n,g=0,m=1;for(u=0;u<4;++u){if(0===u&&(a=-h,o=-(l-t)),1===u&&(a=h,o=f-t),2===u&&(a=-p,o=-(c-n)),3===u&&(a=p,o=d-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>m)return!1;s>g&&(g=s)}else if(a>0){if(s<g)return!1;s<m&&(m=s)}}return!0}var Ih=function(e,t,n){return Gradient_isGradient(n)?function(e,t,n){for(var r=n.width(),i=n.height(),a=t.stops,o=a.length,s="radial"===t.gradient?e.createRadialGradient(n.x1+(t.x1||.5)*r,n.y1+(t.y1||.5)*i,Math.max(r,i)*(t.r1||0),n.x1+(t.x2||.5)*r,n.y1+(t.y2||.5)*i,Math.max(r,i)*(t.r2||.5)):e.createLinearGradient(n.x1+(t.x1||0)*r,n.y1+(t.y1||0)*i,n.x1+(t.x2||1)*r,n.y1+(t.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(e,n,t.bounds):n},Lh=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=Ih(e,t,t.fill),!0)},Nh=[],Bh=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=Ih(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Nh),e.lineDashOffset=t.strokeDashOffset||0),!0))};function util_visit_compare(e,t){return e.zindex-t.zindex||e.index-t.index}function visit_zorder(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(util_visit_compare)}function util_visit_visit(e,t){var n,r,i=e.items;if(i&&i.length){var a=visit_zorder(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function visit_pickVisit(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=visit_zorder(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function draw_drawAll(e){return function(t,n,r){util_visit_visit(n,(function(n){r&&!r.intersects(n.bounds)||draw_drawPath(e,t,n,n)}))}}function draw_drawPath(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Lh(t,n,i)&&t.fill(),n.stroke&&Bh(t,n,i)&&t.stroke()))}function canvas_pick_pick(e){return e=e||V.eb,function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,visit_pickVisit(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return e(t,n,r,i,a,o)?n:void 0}))}}function pick_hitPath(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function pick_pickPath(e){return canvas_pick_pick(pick_hitPath(e))}function svg_transform_translate(e,t){return"translate("+e+","+t+")"}function svg_transform_rotate(e){return"rotate("+e+")"}function transform_translateItem(e){return svg_transform_translate(e.x||0,e.y||0)}var Uh=function(e,t,n){function draw(e,n){var r=n.x||0,i=n.y||0,a=n.angle||0;e.translate(r,i),a&&e.rotate(a*=ch),e.beginPath(),t(e,n),a&&e.rotate(-a),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function attr(e,n){e("transform",function transform_transformItem(e){return svg_transform_translate(e.x||0,e.y||0)+(e.angle?" "+svg_transform_rotate(e.angle):"")}(n)),e("d",t(null,n))},bound:function bound(e,n){var r=n.x||0,i=n.y||0;return t(bound_boundContext_context(e),n),Ph(e,n).translate(r,i),n.angle&&e.rotate(n.angle*ch,r,i),e},draw:draw_drawAll(draw),pick:pick_pickPath(draw),isect:n||intersect_intersectPath(draw)}},zh=Uh("arc",(function path_shapes_arc(e,t){return Sh.context(e)(t)}));var qh=function(e,t,n){function draw(e,n){e.beginPath(),t(e,n)}var r,i=pick_hitPath(draw);return{type:e,tag:"path",nested:!0,attr:function attr(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function bound(e,n){var r=n.items;return 0===r.length?e:(t(bound_boundContext_context(e),r),Ph(e,r[0]))},draw:(r=draw,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||draw_drawPath(r,e,t.items[0],t.items)}),pick:function pick(e,t,n,r,a,o){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:intersect_intersectPoint,tip:n}},Wh=qh("area",(function path_shapes_area(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Th:Eh).curve(curves_curves(r,n.orient,n.tension)).context(e)(t)}),(function pickPath_pickArea(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,s=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][a]-i))<s&&(s=r,n=e[o]);return n})),Gh=1;function clip_resetSVGClipId(){Gh=1}var Hh=function(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Gh++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(V.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},Vh=.5;function group_backgroundPath(e,t){var n=t.stroke?Vh:0;e.beginPath(),path_shapes_rectangle(e,t,n,n)}var Yh=pick_hitPath(group_backgroundPath);var $h={type:"group",tag:"g",nested:!1,attr:function marks_group_attr(e,t){e("transform",transform_translateItem(t))},bound:function marks_group_bound(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ph(e,t),e.translate(t.x||0,t.y||0)},draw:function marks_group_draw(e,t,n){var r=this;util_visit_visit(t,(function(t){var i,a=t.x||0,o=t.y||0,s=t.width||0,u=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity)>0&&(group_backgroundPath(e,t),t.fill&&Lh(e,t,i)&&e.fill(),t.stroke&&Bh(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,s,u),e.clip()),n&&n.translate(-a,-o),util_visit_visit(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,o),e.restore()}))},pick:function marks_group_pick(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,s=n*e.pixelRatio,u=r*e.pixelRatio;return visit_pickVisit(t,(function(l){var c,f,d,h;if(!(h=l.bounds)||h.contains(i,a))return f=l.x||0,d=l.y||0,e.save(),e.translate(f,d),f=i-f,d=a-d,!(c=visit_pickVisit(l,(function(e){return function group_pickMark(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&!1!==t.interactive&&(l.fill||l.stroke)&&Yh(e,l,s,u)&&(c=l),e.restore(),c||null}))},isect:intersect_intersectRect,background:function group_background(e,t){var n=t.stroke?Vh:0;e("class","background"),e("d",path_shapes_rectangle(null,t,n,n))},foreground:function group_foreground(e,t,n){e("clip-path",t.clip?Hh(n,t,t):null)}};function image_getImage(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function image_imageXOffset(e,t){return"center"===e?t/2:"right"===e?t:0}function image_imageYOffset(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Xh={type:"image",tag:"image",nested:!1,attr:function marks_image_attr(e,t,n){var r=image_getImage(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,s=(null!=t.height?t.height:r.height)||0,u=!1===t.aspect?"none":"xMidYMid";i-=image_imageXOffset(t.align,o),a-=image_imageYOffset(t.baseline,s),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",svg_transform_translate(i,a)),e("width",o),e("height",s),e("preserveAspectRatio",u)},bound:function marks_image_bound(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=image_imageXOffset(t.align,a),i-=image_imageYOffset(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function marks_image_draw(e,t,n){var r=this;util_visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var i,a,o,s,u=image_getImage(t,r),l=t.x||0,c=t.y||0,f=(null!=t.width?t.width:u.width)||0,d=(null!=t.height?t.height:u.height)||0;l-=image_imageXOffset(t.align,f),c-=image_imageYOffset(t.baseline,d),!1!==t.aspect&&(a=u.width/u.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(c+=(d-(s=f/a))/2,d=s):(l+=(f-(s=d*a))/2,f=s))),u.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(u,l,c,f,d))}}))},pick:canvas_pick_pick(),isect:V.eb,get:image_getImage,xOffset:image_imageXOffset,yOffset:image_imageYOffset},Kh=qh("line",(function path_shapes_line(e,t){var n=t[0],r=n.interpolate||"linear";return Ch.curve(curves_curves(r,n.orient,n.tension)).context(e)(t)}),(function pickPath_pickLine(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}));function src_marks_path_path(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=lh(n)).path=n),_h(e,r,t.x,t.y)}var Jh={type:"path",tag:"path",nested:!1,attr:function marks_path_attr(e,t){e("transform",transform_translateItem(t)),e("d",t.path)},bound:function marks_path_bound(e,t){return src_marks_path_path(bound_boundContext_context(e),t)?e.set(0,0,0,0):Ph(e,t)},draw:draw_drawAll(src_marks_path_path),pick:pick_pickPath(src_marks_path_path),isect:intersect_intersectPath(src_marks_path_path)};function marks_rect_draw(e,t){e.beginPath(),path_shapes_rectangle(e,t)}var Zh={type:"rect",tag:"path",nested:!1,attr:function marks_rect_attr(e,t){e("d",path_shapes_rectangle(null,t))},bound:function marks_rect_bound(e,t){var n,r;return Ph(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:draw_drawAll(marks_rect_draw),pick:pick_pickPath(marks_rect_draw),isect:intersect_intersectRect};function marks_rule_path(e,t,n){var r,i,a,o;return!(!t.stroke||!Bh(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}var Qh,ep={type:"rule",tag:"line",nested:!1,attr:function marks_rule_attr(e,t){e("transform",transform_translateItem(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function marks_rule_bound(e,t){var n,r;return Ph(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function marks_rule_draw(e,t,n){util_visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&marks_rule_path(e,t,r)&&e.stroke()}}))},pick:canvas_pick_pick((function marks_rule_hit(e,t,n,r){return!!e.isPointInStroke&&(marks_rule_path(e,t,1)&&e.isPointInStroke(n,r))})),isect:intersect_intersectRule},tp=Uh("shape",(function path_shapes_shape(e,t){return(t.mark.shape||t.shape).context(e)(t)})),np=Uh("symbol",(function path_shapes_symbol(e,t){return Ah.context(e)(t)}),intersect_intersectPoint),rp={height:util_text_fontSize,measureWidth:text_measureWidth,estimateWidth:text_estimateWidth,width:text_estimateWidth,canvas:text_useCanvas};function text_estimateWidth(e){return Qh=util_text_fontSize(e),text_estimate(text_textValue(e))}function text_estimate(e){return~~(.8*e.length*Qh)}function text_measureWidth(e){return util_text_fontSize(e)<=0?0:(jh.font=util_text_font(e),util_text_measure(text_textValue(e)))}function util_text_measure(e){return jh.measureText(e).width}function util_text_fontSize(e){return null!=e.fontSize?e.fontSize:11}function text_useCanvas(e){rp.width=e&&jh?text_measureWidth:text_estimateWidth}function text_textValue(e){var t=e.text;return null==t?"":e.limit>0?function text_truncate(e){var t,n=+e.limit,r=e.text+"";rp.width===text_measureWidth?(jh.font=util_text_font(e),t=util_text_measure):(Qh=util_text_fontSize(e),t=text_estimate);if(t(r)<n)return r;var i,a=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,u=r.length;if(n-=t(a),o){for(;s<u;)i=s+u>>>1,t(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),t(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(e):t+""}function text_fontFamily(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function util_text_font(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+util_text_fontSize(e)+"px "+text_fontFamily(e,t)}function util_text_offset(e){var t=e.baseline,n=util_text_fontSize(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}text_useCanvas(!0);var ip={left:"start",center:"middle",right:"end"},ap=new Bounds_Bounds;function text_anchorPoint(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-fh,n+=i*Math.cos(t),r+=i*Math.sin(t)),ap.x1=n,ap.y1=r,ap}function marks_text_bound(e,t,n){var r,i=rp.height(t),a=t.align,o=text_anchorPoint(t),s=o.x1,u=o.y1,l=t.dx||0,c=(t.dy||0)+util_text_offset(t)-Math.round(.8*i);if(r=rp.width(t),"center"===a?l-=r/2:"right"===a&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*ch,s,u);else if(2===n)return e.rotatedPoints(t.angle*ch,s,u);return e}var op={arc:zh,area:Wh,group:$h,image:Xh,line:Kh,path:Jh,rect:Zh,rule:ep,shape:tp,symbol:np,text:{type:"text",tag:"text",nested:!1,attr:function marks_text_attr(e,t){var n,r=t.dx||0,i=(t.dy||0)+util_text_offset(t),a=text_anchorPoint(t),o=a.x1,s=a.y1,u=t.angle||0;e("text-anchor",ip[t.align]||"start"),u?(n=svg_transform_translate(o,s)+" "+svg_transform_rotate(u),(r||i)&&(n+=" "+svg_transform_translate(r,i))):n=svg_transform_translate(o+r,s+i),e("transform",n)},bound:marks_text_bound,draw:function marks_text_draw(e,t,n){util_visit_visit(t,(function(t){var r,i,a,o,s;n&&!n.intersects(t.bounds)||(s=text_textValue(t))&&(0===(r=null==t.opacity?1:t.opacity)||t.fontSize<=0||(e.font=util_text_font(t),e.textAlign=t.align||"left",a=(i=text_anchorPoint(t)).x1,o=i.y1,t.angle&&(e.save(),e.translate(a,o),e.rotate(t.angle*ch),a=o=0),a+=t.dx||0,o+=(t.dy||0)+util_text_offset(t),t.fill&&Lh(e,t,r)&&e.fillText(s,a,o),t.stroke&&Bh(e,t,r)&&e.strokeText(s,a,o),t.angle&&e.restore()))}))},pick:canvas_pick_pick((function marks_text_hit(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=text_anchorPoint(t),s=o.x1,u=o.y1,l=marks_text_bound(ap,t,1),c=-t.angle*ch,f=Math.cos(c),d=Math.sin(c),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return l.contains(h,p)})),isect:function text_intersectText(e,t){var n=marks_text_bound(ap,e,2);return intersect_intersectBoxLine(t,n[0],n[1],n[2],n[3])||intersect_intersectBoxLine(t,n[0],n[1],n[4],n[5])||intersect_intersectBoxLine(t,n[4],n[5],n[6],n[7])||intersect_intersectBoxLine(t,n[2],n[3],n[6],n[7])}},trail:qh("trail",(function path_shapes_trail(e,t){return Rh.context(e)(t)}),(function pickPath_pickTrail(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))},sp=function(e,t,n){var r=op[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Bounds_Bounds),e,n)},up={mark:null},lp=function(e,t,n){var r,i,a,o,s=op[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?a=l[0]:(up.mark=e,a=up),o=sp(a,u,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new Bounds_Bounds,c)for(r=0,i=l.length;r<i;++r)t.union(sp(l[r],u,n));return e.bounds=t},cp=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function serialize_sceneToJSON(e,t){return JSON.stringify(e,cp,t)}function serialize_sceneFromJSON(e){return function util_serialize_initialize(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&util_serialize_initialize(a[n]);i&&lp(e);return e}("string"===typeof e?JSON.parse(e):e)}function Scenegraph_Scenegraph(e){arguments.length?this.root=serialize_sceneFromJSON(e):(this.root=Scenegraph_createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GroupItem_GroupItem(this.root)])}var fp=Scenegraph_Scenegraph.prototype;function Scenegraph_createMark(e,t){return{bounds:new Bounds_Bounds,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function dom_domCreate(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function dom_domFind(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function dom_domChild(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=dom_domCreate(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function dom_domClear(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function dom_cssClass(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}fp.toJSON=function(e){return serialize_sceneToJSON(this.root,e||0)},fp.mark=function(e,t,n){var r=Scenegraph_createMark(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var dp=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function src_Handler_Handler(e,t){this._active=null,this._handlers={},this._loader=e||eh(),this._tooltip=t||Handler_defaultTooltip}function Handler_defaultTooltip(e,t,n,r){e.element().setAttribute("title",r||"")}var hp=src_Handler_Handler.prototype;function src_Renderer_Renderer(e){this._el=null,this._bgcolor=null,this._loader=new ResourceLoader_ResourceLoader(e)}hp.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},hp.element=function(){return this._el},hp.canvas=function(){return this._el&&this._el.firstChild},hp.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},hp.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},hp.on=function(){},hp.off=function(){},hp._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},hp.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},hp.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},hp.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=dom_domCreate(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},hp.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=op[o.marktype]).tip){for((a=dp(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},hp.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var pp=src_Renderer_Renderer.prototype;pp.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},pp.element=function(){return this._el},pp.canvas=function(){return this._el&&this._el.firstChild},pp.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},pp.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},pp.dirty=function(){},pp.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},pp._render=function(){},pp.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},pp._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},pp.sanitizeURL=function(e){return this._load("sanitizeURL",e)},pp.loadImage=function(e){return this._load("loadImage",e)};var gp="mouseout";function CanvasHandler_CanvasHandler(e,t){src_Handler_Handler.call(this,e,t),this._down=null,this._touch=null,this._first=!0}var mp=Object(V.y)(CanvasHandler_CanvasHandler,src_Handler_Handler);function CanvasHandler_move(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function CanvasHandler_inactive(e){return function(t){this.fire(e,t),this._active=null}}mp.initialize=function(e,t,n){var r=this._canvas=e&&dom_domFind(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){mp[e]?mp[e].call(i,t):i.fire(e,t)}))}))}return src_Handler_Handler.prototype.initialize.call(this,e,t,n)},mp.canvas=function(){return this._canvas},mp.context=function(){return this._canvas.getContext("2d")},mp.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],mp.DOMMouseScroll=function(e){this.fire("mousewheel",e)},mp.mousemove=CanvasHandler_move("mousemove","mouseover","mouseout"),mp.dragover=CanvasHandler_move("dragover","dragenter","dragleave"),mp.mouseout=CanvasHandler_inactive("mouseout"),mp.dragleave=CanvasHandler_inactive("dragleave"),mp.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},mp.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},mp.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},mp.touchmove=function(e){this.fire("touchmove",e,!0)},mp.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},mp.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,"click"===e&&a&&a.href?this.handleHref(t,a,a.href):"mousemove"!==e&&e!==gp||this.handleTooltip(t,a,e!==gp),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},mp.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},mp.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},mp.pickEvent=function(e){var t=dp(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},mp.pick=function(e,t,n,r,i){var a=this.context();return op[e.marktype].pick.call(this,a,e,t,n,r,i)};var vp=function resize_devicePixelRatio(){return"undefined"!==typeof window&&window.devicePixelRatio||1}();function CanvasRenderer_CanvasRenderer(e){src_Renderer_Renderer.call(this,e),this._redraw=!1,this._dirty=new Bounds_Bounds}var yp=Object(V.y)(CanvasRenderer_CanvasRenderer,src_Renderer_Renderer),_p=src_Renderer_Renderer.prototype,bp=new Bounds_Bounds;function SVGHandler_SVGHandler(e,t){src_Handler_Handler.call(this,e,t);var n=this;n._hrefHandler=SVGHandler_listener(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=SVGHandler_listener(n,(function(e,t){n.handleTooltip(e,t,e.type!==gp)}))}yp.initialize=function(e,t,n,r,i,a){return this._options=a,this._canvas=domCanvas(1,1,a&&a.type),e&&(dom_domClear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),_p.initialize.call(this,e,t,n,r,i)},yp.resize=function(e,t,n,r){return _p.resize.call(this,e,t,n,r),function(e,t,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),l=s?vp:i;for(o in e.width=t*l,e.height=n*l,a)u[o]=a[o];s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=l,u.setTransform(l,0,0,l,l*r[0],l*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},yp.canvas=function(){return this._canvas},yp.context=function(){return this._canvas?this._canvas.getContext("2d"):null},yp.dirty=function(e){var t=function src_CanvasRenderer_translate(e,t){if(null==t)return e;for(var n=bp.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},yp._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function CanvasRenderer_clipToBounds(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},yp.draw=function(e,t,n){var r=op[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),Object(V.D)(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},yp.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var xp=Object(V.y)(SVGHandler_SVGHandler,src_Handler_Handler);function SVGHandler_listener(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function tags_openTag(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function tags_closeTag(e){return"</"+e+">"}xp.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(gp,this._tooltipHandler)),this._svg=r=e&&dom_domFind(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(gp,this._tooltipHandler)),src_Handler_Handler.prototype.initialize.call(this,e,t,n)},xp.canvas=function(){return this._svg},xp.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:SVGHandler_listener(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},xp.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var wp={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},kp={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Sp=Object.keys(kp),Ep=wp.xmlns;function SVGRenderer_SVGRenderer(e){src_Renderer_Renderer.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var Tp=Object(V.y)(SVGRenderer_SVGRenderer,src_Renderer_Renderer),Cp=src_Renderer_Renderer.prototype;function SVGRenderer_updateGradient(e,t,n){var r,i,a;if("radial"===t.gradient){var o=dom_domChild(e,n++,"pattern",Ep);o.setAttribute("id",rh+t.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=dom_domChild(o,0,"rect",Ep)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+src_SVGRenderer_href()+"#"+t.id+")"),(e=dom_domChild(e,n++,"radialGradient",Ep)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=dom_domChild(e,n++,"linearGradient",Ep)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r)(a=dom_domChild(e,r,"stop",Ep)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return dom_domClear(e,r),n}function SVGRenderer_updateClipping(e,t,n){var r;return(e=dom_domChild(e,n,"clipPath",Ep)).setAttribute("id",t.id),t.path?(r=dom_domChild(e,0,"path",Ep)).setAttribute("d",t.path):((r=dom_domChild(e,0,"rect",Ep)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),n+1}function SVGRenderer_dirtyParents(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function src_SVGRenderer_bind(e,t,n,r,i){var a,o=e._svg;if(!o&&(o=dom_domCreate(a=t.ownerDocument,r,Ep),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var s=dom_domCreate(a,"path",Ep);s.setAttribute("class","background"),o.appendChild(s),s.__data__=e;var u=dom_domCreate(a,"g",Ep);o.appendChild(u),u.__data__=e}return(o.ownerSVGElement!==i||function SVGRenderer_hasSiblings(e){var t=e.mark||e.group;return t&&t.items.length>1}(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}Tp.initialize=function(e,t,n,r){return e&&(this._svg=dom_domChild(e,0,"svg",Ep),this._svg.setAttribute("class","marks"),dom_domClear(e,1),this._root=dom_domChild(this._svg,0,"g",Ep),dom_domClear(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),Cp.initialize.call(this,e,t,n,r)},Tp.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),Cp.background.apply(this,arguments)},Tp.resize=function(e,t,n,r){return Cp.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},Tp.canvas=function(){return this._svg},Tp.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in wp)e[t]=wp[t];var n=this._bgcolor?tags_openTag("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+tags_closeTag("rect"):"";return tags_openTag("svg",e)+n+this._svg.innerHTML+tags_closeTag("svg")},Tp._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),dom_domClear(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},Tp.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=dom_domChild(t,0,"defs",Ep)),i=SVGRenderer_updateGradient(r,n.gradient[e],i);for(e in n.clipping)r||(n.el=r=dom_domChild(t,0,"defs",Ep)),i=SVGRenderer_updateClipping(r,n.clipping[e],i);r&&(0===i?(t.removeChild(r),n.el=null):dom_domClear(r,i))},Tp._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},Tp.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},Tp.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},Tp._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=op[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,SVGRenderer_dirtyParents(t,u),n.items.forEach((function(e){e.dirty=u}))),n.zdirty||(t.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):t._svg&&(s=t._svg.parentNode)&&s.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==u&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,SVGRenderer_dirtyParents(t,u)),t._update=u));return!this._dirtyAll},Tp.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,i=this,a=this._svg,o=op[t.marktype],s=!1===t.interactive?"none":null,u="g"===o.tag,l=null,c=0;function process(e){var t=i.isDirty(e),n=src_SVGRenderer_bind(e,r,l,o.tag,a);t&&(i._update(o,n,e),u&&function src_SVGRenderer_recurse(e,t,n){t=t.lastChild;var r,i=0;util_visit_visit(n,(function(n){r=e.draw(t,n,r),++i})),dom_domClear(t,1+i)}(i,n,e)),l=n,++c}return(r=src_SVGRenderer_bind(t,e,n,"g",a)).setAttribute("class",dom_cssClass(t)),u||r.style.setProperty("pointer-events",s),t.clip?r.setAttribute("clip-path",Hh(i,t,t.group)):r.removeAttribute("clip-path"),o.nested?t.items.length&&process(t.items[0]):util_visit_visit(t,process),dom_domClear(r,c),r};var Op=null,Ap=null,Rp={group:function group(e,t,n){Ap=t.__values__,Op=t.childNodes[1],e.foreground(src_SVGRenderer_emit,n,this),Op=t.childNodes[0],e.background(src_SVGRenderer_emit,n,this);var r=!1===n.mark.interactive?"none":null;r!==Ap.events&&(Op.style.setProperty("pointer-events",r),Ap.events=r)},text:function text(e,t,n){var r;(r=text_textValue(n))!==Ap.text&&(t.textContent=r,Ap.text=r),SVGRenderer_setStyle(t,"font-family",text_fontFamily(n)),SVGRenderer_setStyle(t,"font-size",util_text_fontSize(n)+"px"),SVGRenderer_setStyle(t,"font-style",n.fontStyle),SVGRenderer_setStyle(t,"font-variant",n.fontVariant),SVGRenderer_setStyle(t,"font-weight",n.fontWeight)}};function SVGRenderer_setStyle(e,t,n){n!==Ap[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Ap[t]=n)}function src_SVGRenderer_emit(e,t,n){t!==Ap[e]&&(null!=t?n?Op.setAttributeNS(n,e,t):Op.setAttribute(e,t):n?Op.removeAttributeNS(n,e):Op.removeAttribute(e),Ap[e]=t)}function src_SVGRenderer_href(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function SVGStringRenderer_SVGStringRenderer(e){src_Renderer_Renderer.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}Tp._update=function(e,t,n){Op=t,Ap=t.__values__,e.attr(src_SVGRenderer_emit,n,this);var r=Rp[e.type];r&&r.call(this,e,t,n),this.style(Op,n)},Tp.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=Sp.length;n<r;++n)o=t[i=Sp[n]],"font"===i&&(o=text_fontFamily(t)),o!==Ap[i]&&(a=kp[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(Gradient_isGradient(o)&&(o=Gradient_gradientRef(o,this._defs.gradient,src_SVGRenderer_href())),e.style.setProperty(a,o+"")),Ap[i]=o)};var Dp,Pp=Object(V.y)(SVGStringRenderer_SVGStringRenderer,src_Renderer_Renderer),Mp=src_Renderer_Renderer.prototype;function src_SVGStringRenderer_emit(e,t,n,r){Dp[r||e]=t}function SVGStringRenderer_applyStyles(e,t,n,r){if(null==e)return"";var i,a,o,s,u,l="";for("bgrect"===n&&!1===t.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+text_fontFamily(e)+"; ",l+="font-size: "+util_text_fontSize(e)+"px; ",e.fontStyle&&(l+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(l+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(l+="font-weight: "+e.fontWeight+"; ")),i=0,a=Sp.length;i<a;++i)o=Sp[i],s=kp[o],null==(u=e[o])?"fill"===s&&(l+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(Gradient_isGradient(u)&&(u=Gradient_gradientRef(u,r.gradient,"")),l+=s+": "+u+"; "):l+=s+": none; ";return l?'style="'+l.trim()+'"':null}Pp.resize=function(e,t,n,r){Mp.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in wp)o[s]=wp[s];a.head=tags_openTag("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?tags_openTag("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+tags_closeTag("rect"):"",a.root=tags_openTag("g",{transform:"translate("+i+")"}),a.foot=tags_closeTag("g")+tags_closeTag("svg"),this},Pp.background=function(){var e=Mp.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},Pp.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},Pp._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},Pp.buildDefs=function(){var e,t,n,r,i,a=this._defs,o="";for(t in a.gradient){for(i=(n=a.gradient[t]).stops,"radial"===n.gradient?(o+=tags_openTag(r="pattern",{id:rh+t,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=tags_openTag("rect",{width:"1",height:"1",fill:"url(#"+t+")"})+tags_closeTag("rect"),o+=tags_closeTag(r),o+=tags_openTag(r="radialGradient",{id:t,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=tags_openTag(r="linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<i.length;++e)o+=tags_openTag("stop",{offset:i[e].offset,"stop-color":i[e].color})+tags_closeTag("stop");o+=tags_closeTag(r)}for(t in a.clipping)n=a.clipping[t],o+=tags_openTag("clipPath",{id:t}),n.path?o+=tags_openTag("path",{d:n.path})+tags_closeTag("path"):o+=tags_openTag("rect",{x:0,y:0,width:n.width,height:n.height})+tags_closeTag("rect"),o+=tags_closeTag("clipPath");return o.length>0?tags_openTag("defs")+o+tags_closeTag("defs"):""},Pp.attributes=function(e,t){return Dp={},e(src_SVGStringRenderer_emit,t,this),Dp},Pp.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},Pp.mark=function(e){var t,n=this,r=op[e.marktype],i=r.tag,a=this._defs,o="";function process(s){var u=n.href(s);u&&(o+=tags_openTag("a",u)),t="g"!==i?SVGStringRenderer_applyStyles(s,e,i,a):null,o+=tags_openTag(i,n.attributes(r.attr,s),t),"text"===i?o+=function SVGStringRenderer_escape_text(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(text_textValue(s)):"g"===i&&(o+=tags_openTag("path",n.attributes(r.background,s),SVGStringRenderer_applyStyles(s,e,"bgrect",a))+tags_closeTag("path"),o+=tags_openTag("g",n.attributes(r.foreground,s))+n.markGroup(s)+tags_closeTag("g")),o+=tags_closeTag(i),u&&(o+=tags_closeTag("a"))}return"g"!==i&&!1===e.interactive&&(t='style="pointer-events: none;"'),o+=tags_openTag("g",{class:dom_cssClass(e),"clip-path":e.clip?Hh(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&process(e.items[0]):util_visit_visit(e,process),o+tags_closeTag("g")},Pp.markGroup=function(e){var t=this,n="";return util_visit_visit(e,(function(e){n+=t.mark(e)})),n};var jp={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},Fp={};function modules_renderModule(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Fp[e]=t,this):Fp[e]}function src_intersect_intersect(e,t,n){var r=[],i=(new Bounds_Bounds).union(t),a=e.marktype;return a?intersect_intersectMark(e,i,n,r):"group"===a?intersect_intersectGroup(e,i,n,r):Object(V.n)("Intersect scene must be mark node or group item.")}function intersect_intersectMark(e,t,n,r){if(function intersect_visitMark(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var i=e.items,a=e.marktype,o=i.length,s=0;if("group"===a)for(;s<o;++s)intersect_intersectGroup(i[s],t,n,r);else for(var u=op[a].isect;s<o;++s){var l=i[s];intersect_intersectItem(l,t,u)&&r.push(l)}}return r}function intersect_intersectGroup(e,t,n,r){n&&n(e.mark)&&intersect_intersectItem(e,t,op.group.isect)&&r.push(e);var i=e.items,a=i&&i.length;if(a){var o=e.x||0,s=e.y||0;t.translate(-o,-s);for(var u=0;u<a;++u)intersect_intersectMark(i[u],t,n,r);t.translate(o,s)}return r}function intersect_intersectItem(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}Fp.canvas=Fp.png={renderer:CanvasRenderer_CanvasRenderer,headless:CanvasRenderer_CanvasRenderer,handler:CanvasHandler_CanvasHandler},Fp.svg={renderer:SVGRenderer_SVGRenderer,headless:SVGStringRenderer_SVGStringRenderer,handler:SVGHandler_SVGHandler},Fp.none={};var Ip=new Bounds_Bounds,Lp=function(e){var t=e.clip;if(Object(V.D)(t))t(bound_boundContext_context(Ip.clear()));else{if(!t)return;Ip.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(Ip)},Np=1e-9;function equal_sceneEqual(e,t,n){return e===t||("path"===n?equal_pathEqual(e,t):e instanceof Date&&t instanceof Date?+e===+t:Object(V.E)(e)&&Object(V.E)(t)?Math.abs(e-t)<=Np:e&&t&&(Object(V.F)(e)||Object(V.F)(t))?null!=e&&null!=t&&function equal_objectEqual(e,t){var n,r,i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!equal_sceneEqual(e[n],t[n],n))return!1;return typeof e===typeof t}(e,t):e==t)}function equal_pathEqual(e,t){return equal_sceneEqual(lh(e),lh(t))}var Bp=function(e){var t=e._signals.cursor;t||(e._signals.cursor=t=e.add({user:"default",item:null})),e.on(e.events("view","mousemove"),t,(function(e,n){var r=t.value,i=r?Object(V.H)(r)?r:r.user:"default",a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}})),e.add(null,(function(e){var t=e.cursor,n=this.value;return Object(V.H)(t)||(n=t.item,t=t.user),function setCursor(e){"undefined"!==typeof document&&document.body&&(document.body.style.cursor=e)}(t&&"default"!==t?t:n||t),n}),{cursor:t})};function dataref(e,t){var n=e._runtime.data;return Object(V.v)(n,t)||Object(V.n)("Unrecognized data set: "+t),n[t]}function change(e,t){isChangeSet(t)||Object(V.n)("Second argument to changes must be a changeset.");var n=dataref(this,e);return n.modified=!0,this.pulse(n.input,t)}function render_size_width(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function render_size_height(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function render_size_offset(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function resizeRenderer(e){var t=render_size_offset(e),n=render_size_width(e),r=render_size_height(e);e._renderer.background(e._background),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((function(t){try{t(n,r)}catch(i){e.error(i)}}))}function src_Bounds_Bounds(e){this.clear(),e&&this.union(e)}var Up=src_Bounds_Bounds.prototype;Up.clone=function(){return new src_Bounds_Bounds(this)},Up.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Up.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Up.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},Up.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},Up.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},Up.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},Up.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Up.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},Up.rotate=function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},Up.rotatedPoints=function(e,t,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*o+l,u*r+s*o+c,s*a-u*i+l,u*a+s*i+c,s*a-u*o+l,u*a+s*o+c]},Up.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},Up.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},Up.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},Up.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},Up.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},Up.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},Up.width=function(){return this.x2-this.x1},Up.height=function(){return this.y2-this.y1};var zp=0,qp="p_";function src_Gradient_isGradient(e){return e&&e.gradient}function src_Gradient_gradientRef(e,t,n){var r=e.id,i=e.gradient,a="radial"===i?qp:"";return r||(r=e.id="gradient_"+zp++,"radial"===i?(e.x1=vega_scenegraph_src_Gradient_get(e.x1,.5),e.y1=vega_scenegraph_src_Gradient_get(e.y1,.5),e.r1=vega_scenegraph_src_Gradient_get(e.r1,0),e.x2=vega_scenegraph_src_Gradient_get(e.x2,.5),e.y2=vega_scenegraph_src_Gradient_get(e.y2,.5),e.r2=vega_scenegraph_src_Gradient_get(e.r2,.5),a=qp):(e.x1=vega_scenegraph_src_Gradient_get(e.x1,0),e.y1=vega_scenegraph_src_Gradient_get(e.y1,0),e.x2=vega_scenegraph_src_Gradient_get(e.x2,1),e.y2=vega_scenegraph_src_Gradient_get(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function vega_scenegraph_src_Gradient_get(e,t){return null!=e?e:t}function src_Item_Item(e){this.mark=e,this.bounds=this.bounds||new src_Bounds_Bounds}function src_GroupItem_GroupItem(e){src_Item_Item.call(this,e),this.items=this.items||[]}Object(V.y)(src_GroupItem_GroupItem,src_Item_Item);var Wp=/^([A-Za-z]+:)?\/\//,Gp=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Hp=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Vp="file://";function vega_view_node_modules_vega_loader_src_loader_load(e,t){return node_modules_vega_view_node_modules_vega_loader_src_loader_load.apply(this,arguments)}function node_modules_vega_view_node_modules_vega_loader_src_loader_load(){return(node_modules_vega_view_node_modules_vega_loader_src_loader_load=Object(Y.a)(A.a.mark((function _callee2(e,t){var n,r;return A.a.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sanitize(e,t);case 2:return n=i.sent,r=n.href,i.abrupt("return",n.localFile?this.file(r):this.http(r,t));case 5:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}function vega_view_node_modules_vega_loader_src_loader_sanitize(e,t){return node_modules_vega_view_node_modules_vega_loader_src_loader_sanitize.apply(this,arguments)}function node_modules_vega_view_node_modules_vega_loader_src_loader_sanitize(){return(node_modules_vega_view_node_modules_vega_loader_src_loader_sanitize=Object(Y.a)(A.a.mark((function _callee3(e,t){var n,r,i,a,o,s,u;return A.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(V.o)({},this.options,t),n=this.fileAccess,r={href:null},s=Gp.test(e.replace(Hp,"")),null!=e&&"string"===typeof e&&s||Object(V.n)("Sanitize failure, invalid URI: "+Object(V.X)(e)),u=Wp.test(e),(o=t.baseURL)&&!u&&(e.startsWith("/")||"/"===o[o.length-1]||(e="/"+e),e=o+e),a=(i=e.startsWith(Vp))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(Vp.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee3,this)})))).apply(this,arguments)}function vega_loader_src_loader_fileLoader(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:vega_view_node_modules_vega_loader_src_loader_fileReject}function vega_view_node_modules_vega_loader_src_loader_fileReject(){return node_modules_vega_view_node_modules_vega_loader_src_loader_fileReject.apply(this,arguments)}function node_modules_vega_view_node_modules_vega_loader_src_loader_fileReject(){return(node_modules_vega_view_node_modules_vega_loader_src_loader_fileReject=Object(Y.a)(A.a.mark((function _callee4(){return A.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No file system access.");case 1:case"end":return e.stop()}}),_callee4)})))).apply(this,arguments)}function vega_loader_src_loader_httpLoader(e){return e?function(){var t=Object(Y.a)(A.a.mark((function _callee(t,n){var r,i,a;return A.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(V.o)({},this.options.http,n),i=n&&n.response,o.next=4,e(t,r);case 4:return a=o.sent,o.abrupt("return",a.ok?Object(V.D)(a[i])?a[i]():a.text():Object(V.n)(a.status+""+a.statusText));case 6:case"end":return o.stop()}}),_callee,this)})));return function(e,n){return t.apply(this,arguments)}}():vega_view_node_modules_vega_loader_src_loader_httpReject}function vega_view_node_modules_vega_loader_src_loader_httpReject(){return node_modules_vega_view_node_modules_vega_loader_src_loader_httpReject.apply(this,arguments)}function node_modules_vega_view_node_modules_vega_loader_src_loader_httpReject(){return(node_modules_vega_view_node_modules_vega_loader_src_loader_httpReject=Object(Y.a)(A.a.mark((function _callee5(){return A.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),_callee5)})))).apply(this,arguments)}V.Y,V.ab,V.ab,V.Z,V.cb,V.x;function src_formats_dsv_delimitedFormat(e){var t=function parse(t,n){var r={delimiter:e};return vega_loader_src_formats_dsv_dsv(t,n?Object(V.o)(n,r):r)};return t.responseType="text",t}function vega_loader_src_formats_dsv_dsv(e,t){return t.header&&(e=t.header.map(V.X).join(t.delimiter)+"\n"+e),me(t.delimiter).parse(e+"")}vega_loader_src_formats_dsv_dsv.responseType="text";var Yp=n(82),$p={interior:function interior(e,t){return e!==t},exterior:function exterior(e,t){return e===t}};function src_formats_topojson_topojson(e,t){var n,r,i,a;return e=Object(Yp.a)(e,t),t&&t.feature?(n=ke,i=t.feature):t&&t.mesh?(n=Ee,i=t.mesh,a=$p[t.filter]):Object(V.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,a):Object(V.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}src_formats_topojson_topojson.responseType="json";src_formats_dsv_delimitedFormat(","),src_formats_dsv_delimitedFormat("\t"),Yp.a;var Xp=function(e,t){return function(n){return{options:n||{},sanitize:vega_view_node_modules_vega_loader_src_loader_sanitize,load:vega_view_node_modules_vega_loader_src_loader_load,fileAccess:!!t,file:vega_loader_src_loader_fileLoader(t),http:vega_loader_src_loader_httpLoader(e)}}}("undefined"!==typeof fetch&&fetch,null);function src_ResourceLoader_ResourceLoader(e){this._pending=0,this._loader=e||Xp()}var Kp=src_ResourceLoader_ResourceLoader.prototype;function src_ResourceLoader_increment(e){e._pending+=1}function src_ResourceLoader_decrement(e){e._pending-=1}Kp.pending=function(){return this._pending},Kp.sanitizeURL=function(e){var t=this;return src_ResourceLoader_increment(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return src_ResourceLoader_decrement(t),e})).catch((function(){return src_ResourceLoader_decrement(t),null}))},Kp.loadImage=function(e){var t=this,n=domImage();return src_ResourceLoader_increment(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){src_ResourceLoader_decrement(t),i.loaded=!0},i.onerror=function(){src_ResourceLoader_decrement(t),i.loaded=!1},i.src=r,i})).catch((function(e){return src_ResourceLoader_decrement(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}}))},Kp.ready=function(){var e=this;return new Promise((function(t){!function poll(n){e.pending()?setTimeout((function(){poll(!0)}),10):t(n)}(!1)}))};var Jp={basis:{curve:Br},"basis-closed":{curve:Ur},"basis-open":{curve:zr},bundle:{curve:qr,tension:"beta",value:.85},cardinal:{curve:Wr,tension:"tension",value:0},"cardinal-open":{curve:Hr,tension:"tension",value:0},"cardinal-closed":{curve:Gr,tension:"tension",value:0},"catmull-rom":{curve:Vr,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Yr,tension:"alpha",value:.5},"catmull-rom-open":{curve:$r,tension:"alpha",value:.5},linear:{curve:Pr},"linear-closed":{curve:Xr},monotone:{horizontal:monotoneY,vertical:monotoneX},natural:{curve:Kr},step:{curve:Jr},"step-after":{curve:stepAfter},"step-before":{curve:stepBefore}};function path_curves_curves(e,t,n){var r=Object(V.v)(Jp,e)&&Jp[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var Zp={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Qp=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],eg=function(e){var t,n,r,i,a,o,s,u,l,c,f,d=[];for(u=0,c=(t=e.slice().replace(Qp[0],"###$1").split(Qp[1]).slice(1)).length;u<c;++u){for(r=(n=t[u]).slice(1).trim().replace(Qp[2],"$1###$2").split(Qp[3]),i=[o=n.charAt(0)],l=0,f=r.length;l<f;++l)(a=+r[l])===a&&i.push(a);if(s=Zp[o.toLowerCase()],i.length-1>s)for(l=1,f=i.length;l<f;l+=s)d.push([o].concat(i.slice(l,l+s)));else d.push(i)}return d},tg=Math.PI/180,ng=Math.PI/2,rg=2*Math.PI,ig=Math.sqrt(3)/2,ag={},og={},sg=[].join;function path_arc_bezier(e){var t=sg.call(e);if(og[t])return og[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=l*o,f=-u*s,d=u*o,h=l*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),_=Math.sin(.5*y),b=8/3*_*_/Math.sin(y),x=n+p-b*g,w=r+g+b*p,k=n+m,S=r+v,E=k+b*v,T=S-b*m;return og[t]=[c*x+f*w,d*x+h*w,c*E+f*T,d*E+h*T,c*k+f*S,d*k+h*S]}var ug=["l",0,0,0,0,0,0,0];function src_path_render_scale(e,t){var n=ug[0]=e[0];if("a"===n||"A"===n)ug[1]=t*e[1],ug[2]=t*e[2],ug[3]=e[3],ug[4]=e[4],ug[5]=e[5],ug[6]=t*e[6],ug[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)ug[r]=t*e[r];return ug}var lg=function(e,t,n,r,i){var a,o,s,u,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=src_path_render_scale(a,i)),a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+r);break;case"h":f+=a[1],e.lineTo(f+n,d+r);break;case"H":f=a[1],e.lineTo(f+n,d+r);break;case"v":d+=a[1],e.lineTo(f+n,d+r);break;case"V":d=a[1],e.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+r);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+r,h+n,p+r,o+n,s+r),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,f+n,d+r);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,f+a[1]+n,d+a[2]+r,o+n,s+r),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-u,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),u=h,l=p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),d=s,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"a":path_render_drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":path_render_drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}};function path_render_drawArc(e,t,n,r){for(var i=function src_path_arc_segments(e,t,n,r,i,a,o,s,u){var l=sg.call(arguments);if(ag[l])return ag[l];var c=o*tg,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=f/n,y=-f/r,_=d/r,b=m*s+v*u,x=y*s+_*u,w=m*e+v*t,k=y*e+_*t,S=1/((w-b)*(w-b)+(k-x)*(k-x))-.25;S<0&&(S=0);var E=Math.sqrt(S);a==i&&(E=-E);var T=.5*(b+w)-E*(k-x),C=.5*(x+k)+E*(w-b),O=Math.atan2(x-C,b-T),A=Math.atan2(k-C,w-T)-O;A<0&&1===a?A+=rg:A>0&&0===a&&(A-=rg);for(var R=Math.ceil(Math.abs(A/(ng+.001))),D=[],P=0;P<R;++P){var M=O+P*A/R,j=O+(P+1)*A/R;D[P]=[T,C,M,j,n,r,f,d]}return ag[l]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=path_arc_bezier(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var cg={circle:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,rg)}},cross:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function draw(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ig*n,i=r-.5773502691896257*n,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ig*n,i=r-.5773502691896257*n;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ig*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ig*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ig*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=ig*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function src_path_symbols_symbols(e){return Object(V.v)(cg,e)?cg[e]:function path_symbols_customSymbol(e){if(!Object(V.v)(fg,e)){var t=eg(e);fg[e]={draw:function draw(e,n){lg(e,t,0,0,Math.sqrt(n)/2)}}}return fg[e]}(e)}var fg={};function path_rectangle_rectangleX(e){return e.x}function path_rectangle_rectangleY(e){return e.y}function path_rectangle_rectangleWidth(e){return e.width}function path_rectangle_rectangleHeight(e){return e.height}function src_path_rectangle_constant(e){return function(){return e}}function src_path_shapes_x(e){return e.x||0}function src_path_shapes_y(e){return e.y||0}function src_path_shapes_cr(e){return e.cornerRadius||0}function src_path_shapes_def(e){return!(!1===e.defined)}var dg=Dr().startAngle((function src_path_shapes_sa(e){return e.startAngle||0})).endAngle((function src_path_shapes_ea(e){return e.endAngle||0})).padAngle((function src_path_shapes_pa(e){return e.padAngle||0})).innerRadius((function path_shapes_ir(e){return e.innerRadius||0})).outerRadius((function src_path_shapes_or(e){return e.outerRadius||0})).cornerRadius(src_path_shapes_cr),hg=jr().x(src_path_shapes_x).y1(src_path_shapes_y).y0((function path_shapes_yh(e){return(e.y||0)+(e.height||0)})).defined(src_path_shapes_def),pg=jr().y(src_path_shapes_y).x1(src_path_shapes_x).x0((function path_shapes_xw(e){return(e.x||0)+(e.width||0)})).defined(src_path_shapes_def),gg=Mr().x(src_path_shapes_x).y(src_path_shapes_y).defined(src_path_shapes_def),mg=function(){var e=path_rectangle_rectangleX,t=path_rectangle_rectangleY,n=path_rectangle_rectangleWidth,r=path_rectangle_rectangleHeight,i=src_path_rectangle_constant(0),a=null;function rectangle(o,s,u){var l,c=null!=s?s:+e.call(this,o),f=null!=u?u:+t.call(this,o),d=+n.call(this,o),h=+r.call(this,o),p=+i.call(this,o);if(a||(a=l=yr()),p<=0)a.rect(c,f,d,h);else{var g=c+d,m=f+h;a.moveTo(c+p,f),a.lineTo(g-p,f),a.quadraticCurveTo(g,f,g,f+p),a.lineTo(g,m-p),a.quadraticCurveTo(g,m,g-p,m),a.lineTo(c+p,m),a.quadraticCurveTo(c,m,c,m-p),a.lineTo(c,f+p),a.quadraticCurveTo(c,f,c+p,f),a.closePath()}if(l)return a=null,l+""||null}return rectangle.x=function(t){return arguments.length?(e="function"===typeof t?t:src_path_rectangle_constant(+t),rectangle):e},rectangle.y=function(e){return arguments.length?(t="function"===typeof e?e:src_path_rectangle_constant(+e),rectangle):t},rectangle.width=function(e){return arguments.length?(n="function"===typeof e?e:src_path_rectangle_constant(+e),rectangle):n},rectangle.height=function(e){return arguments.length?(r="function"===typeof e?e:src_path_rectangle_constant(+e),rectangle):r},rectangle.cornerRadius=function(e){return arguments.length?(i="function"===typeof e?e:src_path_rectangle_constant(+e),rectangle):i},rectangle.context=function(e){return arguments.length?(a=null==e?null:e,rectangle):a},rectangle}().x(src_path_shapes_x).y(src_path_shapes_y).width((function src_path_shapes_w(e){return e.width||0})).height((function src_path_shapes_h(e){return e.height||0})).cornerRadius(src_path_shapes_cr),vg=Lr().type((function src_path_shapes_type(e){return src_path_symbols_symbols(e.shape||"circle")})).size((function src_path_shapes_size(e){return null==e.size?64:e.size})),yg=function(){var e,t,n,r,i,a,o,s,u=null;function point(e,t,n){var r=n/2;if(i){var l=o-t,c=e-a;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(a-d,o-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(e,t,r,0,rg);u.closePath()}else i=1;a=e,o=t,s=r}function trail(a){var o,s,l,c=a.length,f=!1;for(null==u&&(u=l=yr()),o=0;o<=c;++o)!(o<c&&r(s=a[o],o,a))===f&&(f=!f)&&(i=0),f&&point(+e(s,o,a),+t(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return trail.x=function(t){return arguments.length?(e=t,trail):e},trail.y=function(e){return arguments.length?(t=e,trail):t},trail.size=function(e){return arguments.length?(n=e,trail):n},trail.defined=function(e){return arguments.length?(r=e,trail):r},trail.context=function(e){return arguments.length?(u=null==e?null:e,trail):u},trail}().x(src_path_shapes_x).y(src_path_shapes_y).defined(src_path_shapes_def).size((function path_shapes_ts(e){return e.size||1}));function src_path_shapes_rectangle(e,t,n,r){return mg.context(e)(t,n,r)}var _g,bg=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e},xg=rg-1e-8;function src_bound_boundContext_context(e){return _g=e,src_bound_boundContext_context}function src_bound_boundContext_noop(){}function src_bound_boundContext_add(e,t){_g.add(e,t)}src_bound_boundContext_context.beginPath=src_bound_boundContext_noop,src_bound_boundContext_context.closePath=src_bound_boundContext_noop,src_bound_boundContext_context.moveTo=src_bound_boundContext_add,src_bound_boundContext_context.lineTo=src_bound_boundContext_add,src_bound_boundContext_context.rect=function(e,t,n,r){src_bound_boundContext_add(e,t),src_bound_boundContext_add(e+n,t+r)},src_bound_boundContext_context.quadraticCurveTo=function(e,t,n,r){src_bound_boundContext_add(e,t),src_bound_boundContext_add(n,r)},src_bound_boundContext_context.bezierCurveTo=function(e,t,n,r,i,a){src_bound_boundContext_add(e,t),src_bound_boundContext_add(n,r),src_bound_boundContext_add(i,a)},src_bound_boundContext_context.arc=function(e,t,n,r,i,a){if(Math.abs(i-r)>xg)return src_bound_boundContext_add(e-n,t-n),void src_bound_boundContext_add(e+n,t+n);var o,s,u,l,c=1/0,f=-1/0,d=1/0,h=-1/0;function update(e){u=n*Math.cos(e),l=n*Math.sin(e),u<c&&(c=u),u>f&&(f=u),l<d&&(d=l),l>h&&(h=l)}if(update(r),update(i),i!==r)if((r%=rg)<0&&(r+=rg),(i%=rg)<0&&(i+=rg),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=rg,o=r-r%ng,s=0;s<4&&o>i;++s,o-=ng)update(o);else for(o=r-r%ng+ng,s=0;s<4&&o<i;++s,o+=ng)update(o);src_bound_boundContext_add(e+c,t+d),src_bound_boundContext_add(e+f,t+h)};var wg=(wg=domCanvas(1,1))?wg.getContext("2d"):null,kg=new src_Bounds_Bounds;function util_intersect_intersectPath(e){return function(t,n){if(!wg)return!0;e(wg,t),kg.clear().union(t.bounds).intersect(n).round();for(var r=kg.x1,i=kg.y1,a=kg.x2,o=kg.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(wg.isPointInPath(u,s))return!0;return!1}}function util_intersect_intersectPoint(e,t){return t.contains(e.x||0,e.y||0)}function util_intersect_intersectRect(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return t.intersects(kg.set(n,r,n+i,r+a))}function util_intersect_intersectBoxLine(e,t,n,r,i){var a,o,s,u,l=e.x1,c=e.y1,f=e.x2,d=e.y2,h=r-t,p=i-n,g=0,m=1;for(u=0;u<4;++u){if(0===u&&(a=-h,o=-(l-t)),1===u&&(a=h,o=f-t),2===u&&(a=-p,o=-(c-n)),3===u&&(a=p,o=d-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>m)return!1;s>g&&(g=s)}else if(a>0){if(s<g)return!1;s<m&&(m=s)}}return!0}var Sg=function(e,t,n){return src_Gradient_isGradient(n)?function(e,t,n){for(var r=n.width(),i=n.height(),a=t.stops,o=a.length,s="radial"===t.gradient?e.createRadialGradient(n.x1+(t.x1||.5)*r,n.y1+(t.y1||.5)*i,Math.max(r,i)*(t.r1||0),n.x1+(t.x2||.5)*r,n.y1+(t.y2||.5)*i,Math.max(r,i)*(t.r2||.5)):e.createLinearGradient(n.x1+(t.x1||0)*r,n.y1+(t.y1||0)*i,n.x1+(t.x2||1)*r,n.y1+(t.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(e,n,t.bounds):n},Eg=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=Sg(e,t,t.fill),!0)},Tg=[],Cg=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=Sg(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Tg),e.lineDashOffset=t.strokeDashOffset||0),!0))};function src_util_visit_compare(e,t){return e.zindex-t.zindex||e.index-t.index}function util_visit_zorder(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(src_util_visit_compare)}function src_util_visit_visit(e,t){var n,r,i=e.items;if(i&&i.length){var a=util_visit_zorder(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function util_visit_pickVisit(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=util_visit_zorder(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function canvas_draw_drawAll(e){return function(t,n,r){src_util_visit_visit(n,(function(n){r&&!r.intersects(n.bounds)||canvas_draw_drawPath(e,t,n,n)}))}}function canvas_draw_drawPath(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&Eg(t,n,i)&&t.fill(),n.stroke&&Cg(t,n,i)&&t.stroke()))}function util_canvas_pick_pick(e){return e=e||V.eb,function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,util_visit_pickVisit(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return e(t,n,r,i,a,o)?n:void 0}))}}function canvas_pick_hitPath(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function canvas_pick_pickPath(e){return util_canvas_pick_pick(canvas_pick_hitPath(e))}function util_svg_transform_translate(e,t){return"translate("+e+","+t+")"}function util_svg_transform_rotate(e){return"rotate("+e+")"}function svg_transform_translateItem(e){return util_svg_transform_translate(e.x||0,e.y||0)}var Og=function(e,t,n){function draw(e,n){var r=n.x||0,i=n.y||0,a=n.angle||0;e.translate(r,i),a&&e.rotate(a*=tg),e.beginPath(),t(e,n),a&&e.rotate(-a),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function attr(e,n){e("transform",function svg_transform_transformItem(e){return util_svg_transform_translate(e.x||0,e.y||0)+(e.angle?" "+util_svg_transform_rotate(e.angle):"")}(n)),e("d",t(null,n))},bound:function bound(e,n){var r=n.x||0,i=n.y||0;return t(src_bound_boundContext_context(e),n),bg(e,n).translate(r,i),n.angle&&e.rotate(n.angle*tg,r,i),e},draw:canvas_draw_drawAll(draw),pick:canvas_pick_pickPath(draw),isect:n||util_intersect_intersectPath(draw)}},Ag=Og("arc",(function src_path_shapes_arc(e,t){return dg.context(e)(t)}));var Rg=function(e,t,n){function draw(e,n){e.beginPath(),t(e,n)}var r,i=canvas_pick_hitPath(draw);return{type:e,tag:"path",nested:!0,attr:function attr(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function bound(e,n){var r=n.items;return 0===r.length?e:(t(src_bound_boundContext_context(e),r),bg(e,r[0]))},draw:(r=draw,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||canvas_draw_drawPath(r,e,t.items[0],t.items)}),pick:function pick(e,t,n,r,a,o){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:util_intersect_intersectPoint,tip:n}},Dg=Rg("area",(function src_path_shapes_area(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?pg:hg).curve(path_curves_curves(r,n.orient,n.tension)).context(e)(t)}),(function util_pickPath_pickArea(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,s=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][a]-i))<s&&(s=r,n=e[o]);return n})),Pg=1;var Mg=function(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+Pg++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(V.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},jg=.5;function marks_group_backgroundPath(e,t){var n=t.stroke?jg:0;e.beginPath(),src_path_shapes_rectangle(e,t,n,n)}var Fg=canvas_pick_hitPath(marks_group_backgroundPath);var Ig={type:"group",tag:"g",nested:!1,attr:function src_marks_group_attr(e,t){e("transform",svg_transform_translateItem(t))},bound:function src_marks_group_bound(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),bg(e,t),e.translate(t.x||0,t.y||0)},draw:function src_marks_group_draw(e,t,n){var r=this;src_util_visit_visit(t,(function(t){var i,a=t.x||0,o=t.y||0,s=t.width||0,u=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity)>0&&(marks_group_backgroundPath(e,t),t.fill&&Eg(e,t,i)&&e.fill(),t.stroke&&Cg(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,s,u),e.clip()),n&&n.translate(-a,-o),src_util_visit_visit(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,o),e.restore()}))},pick:function src_marks_group_pick(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,s=n*e.pixelRatio,u=r*e.pixelRatio;return util_visit_pickVisit(t,(function(l){var c,f,d,h;if(!(h=l.bounds)||h.contains(i,a))return f=l.x||0,d=l.y||0,e.save(),e.translate(f,d),f=i-f,d=a-d,!(c=util_visit_pickVisit(l,(function(e){return function marks_group_pickMark(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&!1!==t.interactive&&(l.fill||l.stroke)&&Fg(e,l,s,u)&&(c=l),e.restore(),c||null}))},isect:util_intersect_intersectRect,background:function marks_group_background(e,t){var n=t.stroke?jg:0;e("class","background"),e("d",src_path_shapes_rectangle(null,t,n,n))},foreground:function marks_group_foreground(e,t,n){e("clip-path",t.clip?Mg(n,t,t):null)}};function marks_image_getImage(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function marks_image_imageXOffset(e,t){return"center"===e?t/2:"right"===e?t:0}function marks_image_imageYOffset(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Lg={type:"image",tag:"image",nested:!1,attr:function src_marks_image_attr(e,t,n){var r=marks_image_getImage(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,s=(null!=t.height?t.height:r.height)||0,u=!1===t.aspect?"none":"xMidYMid";i-=marks_image_imageXOffset(t.align,o),a-=marks_image_imageYOffset(t.baseline,s),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",util_svg_transform_translate(i,a)),e("width",o),e("height",s),e("preserveAspectRatio",u)},bound:function src_marks_image_bound(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=marks_image_imageXOffset(t.align,a),i-=marks_image_imageYOffset(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function src_marks_image_draw(e,t,n){var r=this;src_util_visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var i,a,o,s,u=marks_image_getImage(t,r),l=t.x||0,c=t.y||0,f=(null!=t.width?t.width:u.width)||0,d=(null!=t.height?t.height:u.height)||0;l-=marks_image_imageXOffset(t.align,f),c-=marks_image_imageYOffset(t.baseline,d),!1!==t.aspect&&(a=u.width/u.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(c+=(d-(s=f/a))/2,d=s):(l+=(f-(s=d*a))/2,f=s))),u.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(u,l,c,f,d))}}))},pick:util_canvas_pick_pick(),isect:V.eb,get:marks_image_getImage,xOffset:marks_image_imageXOffset,yOffset:marks_image_imageYOffset},Ng=Rg("line",(function src_path_shapes_line(e,t){var n=t[0],r=n.interpolate||"linear";return gg.curve(path_curves_curves(r,n.orient,n.tension)).context(e)(t)}),(function util_pickPath_pickLine(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}));function vega_scenegraph_src_marks_path_path(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=eg(n)).path=n),lg(e,r,t.x,t.y)}var Bg={type:"path",tag:"path",nested:!1,attr:function src_marks_path_attr(e,t){e("transform",svg_transform_translateItem(t)),e("d",t.path)},bound:function src_marks_path_bound(e,t){return vega_scenegraph_src_marks_path_path(src_bound_boundContext_context(e),t)?e.set(0,0,0,0):bg(e,t)},draw:canvas_draw_drawAll(vega_scenegraph_src_marks_path_path),pick:canvas_pick_pickPath(vega_scenegraph_src_marks_path_path),isect:util_intersect_intersectPath(vega_scenegraph_src_marks_path_path)};function src_marks_rect_draw(e,t){e.beginPath(),src_path_shapes_rectangle(e,t)}var Ug={type:"rect",tag:"path",nested:!1,attr:function src_marks_rect_attr(e,t){e("d",src_path_shapes_rectangle(null,t))},bound:function src_marks_rect_bound(e,t){var n,r;return bg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:canvas_draw_drawAll(src_marks_rect_draw),pick:canvas_pick_pickPath(src_marks_rect_draw),isect:util_intersect_intersectRect};function src_marks_rule_path(e,t,n){var r,i,a,o;return!(!t.stroke||!Cg(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}var zg,qg={type:"rule",tag:"line",nested:!1,attr:function src_marks_rule_attr(e,t){e("transform",svg_transform_translateItem(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function src_marks_rule_bound(e,t){var n,r;return bg(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function src_marks_rule_draw(e,t,n){src_util_visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&src_marks_rule_path(e,t,r)&&e.stroke()}}))},pick:util_canvas_pick_pick((function src_marks_rule_hit(e,t,n,r){return!!e.isPointInStroke&&(src_marks_rule_path(e,t,1)&&e.isPointInStroke(n,r))})),isect:function util_intersect_intersectRule(e,t){var n=e.x||0,r=e.y||0;return util_intersect_intersectBoxLine(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},Wg=Og("shape",(function src_path_shapes_shape(e,t){return(t.mark.shape||t.shape).context(e)(t)})),Gg=Og("symbol",(function src_path_shapes_symbol(e,t){return vg.context(e)(t)}),util_intersect_intersectPoint),Hg={height:src_util_text_fontSize,measureWidth:util_text_measureWidth,estimateWidth:util_text_estimateWidth,width:util_text_estimateWidth,canvas:util_text_useCanvas};function util_text_estimateWidth(e){return zg=src_util_text_fontSize(e),util_text_estimate(util_text_textValue(e))}function util_text_estimate(e){return~~(.8*e.length*zg)}function util_text_measureWidth(e){return src_util_text_fontSize(e)<=0?0:(wg.font=src_util_text_font(e),src_util_text_measure(util_text_textValue(e)))}function src_util_text_measure(e){return wg.measureText(e).width}function src_util_text_fontSize(e){return null!=e.fontSize?e.fontSize:11}function util_text_useCanvas(e){Hg.width=e&&wg?util_text_measureWidth:util_text_estimateWidth}function util_text_textValue(e){var t=e.text;return null==t?"":e.limit>0?function util_text_truncate(e){var t,n=+e.limit,r=e.text+"";Hg.width===util_text_measureWidth?(wg.font=src_util_text_font(e),t=src_util_text_measure):(zg=src_util_text_fontSize(e),t=util_text_estimate);if(t(r)<n)return r;var i,a=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,u=r.length;if(n-=t(a),o){for(;s<u;)i=s+u>>>1,t(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),t(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(e):t+""}function util_text_fontFamily(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function src_util_text_font(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+src_util_text_fontSize(e)+"px "+util_text_fontFamily(e,t)}function src_util_text_offset(e){var t=e.baseline,n=src_util_text_fontSize(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}util_text_useCanvas(!0);var Vg={left:"start",center:"middle",right:"end"},Yg=new src_Bounds_Bounds;function marks_text_anchorPoint(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-ng,n+=i*Math.cos(t),r+=i*Math.sin(t)),Yg.x1=n,Yg.y1=r,Yg}function src_marks_text_bound(e,t,n){var r,i=Hg.height(t),a=t.align,o=marks_text_anchorPoint(t),s=o.x1,u=o.y1,l=t.dx||0,c=(t.dy||0)+src_util_text_offset(t)-Math.round(.8*i);if(r=Hg.width(t),"center"===a?l-=r/2:"right"===a&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*tg,s,u);else if(2===n)return e.rotatedPoints(t.angle*tg,s,u);return e}var $g={arc:Ag,area:Dg,group:Ig,image:Lg,line:Ng,path:Bg,rect:Ug,rule:qg,shape:Wg,symbol:Gg,text:{type:"text",tag:"text",nested:!1,attr:function src_marks_text_attr(e,t){var n,r=t.dx||0,i=(t.dy||0)+src_util_text_offset(t),a=marks_text_anchorPoint(t),o=a.x1,s=a.y1,u=t.angle||0;e("text-anchor",Vg[t.align]||"start"),u?(n=util_svg_transform_translate(o,s)+" "+util_svg_transform_rotate(u),(r||i)&&(n+=" "+util_svg_transform_translate(r,i))):n=util_svg_transform_translate(o+r,s+i),e("transform",n)},bound:src_marks_text_bound,draw:function src_marks_text_draw(e,t,n){src_util_visit_visit(t,(function(t){var r,i,a,o,s;n&&!n.intersects(t.bounds)||(s=util_text_textValue(t))&&(0===(r=null==t.opacity?1:t.opacity)||t.fontSize<=0||(e.font=src_util_text_font(t),e.textAlign=t.align||"left",a=(i=marks_text_anchorPoint(t)).x1,o=i.y1,t.angle&&(e.save(),e.translate(a,o),e.rotate(t.angle*tg),a=o=0),a+=t.dx||0,o+=(t.dy||0)+src_util_text_offset(t),t.fill&&Eg(e,t,r)&&e.fillText(s,a,o),t.stroke&&Cg(e,t,r)&&e.strokeText(s,a,o),t.angle&&e.restore()))}))},pick:util_canvas_pick_pick((function src_marks_text_hit(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=marks_text_anchorPoint(t),s=o.x1,u=o.y1,l=src_marks_text_bound(Yg,t,1),c=-t.angle*tg,f=Math.cos(c),d=Math.sin(c),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return l.contains(h,p)})),isect:function marks_text_intersectText(e,t){var n=src_marks_text_bound(Yg,e,2);return util_intersect_intersectBoxLine(t,n[0],n[1],n[2],n[3])||util_intersect_intersectBoxLine(t,n[0],n[1],n[4],n[5])||util_intersect_intersectBoxLine(t,n[4],n[5],n[6],n[7])||util_intersect_intersectBoxLine(t,n[2],n[3],n[6],n[7])}},trail:Rg("trail",(function src_path_shapes_trail(e,t){return yg.context(e)(t)}),(function util_pickPath_pickTrail(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))},Xg=function(e,t,n){var r=$g[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new src_Bounds_Bounds),e,n)},Kg={mark:null},Jg=function(e,t,n){var r,i,a,o,s=$g[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?a=l[0]:(Kg.mark=e,a=Kg),o=Xg(a,u,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new src_Bounds_Bounds,c)for(r=0,i=l.length;r<i;++r)t.union(Xg(l[r],u,n));return e.bounds=t},Zg=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function util_serialize_sceneFromJSON(e){return function src_util_serialize_initialize(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&src_util_serialize_initialize(a[n]);i&&Jg(e);return e}("string"===typeof e?JSON.parse(e):e)}function src_Scenegraph_Scenegraph(e){arguments.length?this.root=util_serialize_sceneFromJSON(e):(this.root=src_Scenegraph_createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new src_GroupItem_GroupItem(this.root)])}var Qg=src_Scenegraph_Scenegraph.prototype;function src_Scenegraph_createMark(e,t){return{bounds:new src_Bounds_Bounds,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function util_dom_domCreate(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function util_dom_domFind(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function util_dom_domChild(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=util_dom_domCreate(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function util_dom_domClear(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function util_dom_cssClass(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}Qg.toJSON=function(e){return function util_serialize_sceneToJSON(e,t){return JSON.stringify(e,Zg,t)}(this.root,e||0)},Qg.mark=function(e,t,n){var r=src_Scenegraph_createMark(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var em=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function vega_scenegraph_src_Handler_Handler(e,t){this._active=null,this._handlers={},this._loader=e||Xp(),this._tooltip=t||src_Handler_defaultTooltip}function src_Handler_defaultTooltip(e,t,n,r){e.element().setAttribute("title",r||"")}var tm=vega_scenegraph_src_Handler_Handler.prototype;function vega_scenegraph_src_Renderer_Renderer(e){this._el=null,this._bgcolor=null,this._loader=new src_ResourceLoader_ResourceLoader(e)}tm.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},tm.element=function(){return this._el},tm.canvas=function(){return this._el&&this._el.firstChild},tm.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},tm.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},tm.on=function(){},tm.off=function(){},tm._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},tm.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},tm.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},tm.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=util_dom_domCreate(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},tm.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=$g[o.marktype]).tip){for((a=em(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},tm.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var nm=vega_scenegraph_src_Renderer_Renderer.prototype;nm.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},nm.element=function(){return this._el},nm.canvas=function(){return this._el&&this._el.firstChild},nm.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},nm.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},nm.dirty=function(){},nm.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},nm._render=function(){},nm.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},nm._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},nm.sanitizeURL=function(e){return this._load("sanitizeURL",e)},nm.loadImage=function(e){return this._load("loadImage",e)};var rm="mouseout";function src_CanvasHandler_CanvasHandler(e,t){vega_scenegraph_src_Handler_Handler.call(this,e,t),this._down=null,this._touch=null,this._first=!0}var im=Object(V.y)(src_CanvasHandler_CanvasHandler,vega_scenegraph_src_Handler_Handler);function src_CanvasHandler_move(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function src_CanvasHandler_inactive(e){return function(t){this.fire(e,t),this._active=null}}im.initialize=function(e,t,n){var r=this._canvas=e&&util_dom_domFind(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){im[e]?im[e].call(i,t):i.fire(e,t)}))}))}return vega_scenegraph_src_Handler_Handler.prototype.initialize.call(this,e,t,n)},im.canvas=function(){return this._canvas},im.context=function(){return this._canvas.getContext("2d")},im.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],im.DOMMouseScroll=function(e){this.fire("mousewheel",e)},im.mousemove=src_CanvasHandler_move("mousemove","mouseover","mouseout"),im.dragover=src_CanvasHandler_move("dragover","dragenter","dragleave"),im.mouseout=src_CanvasHandler_inactive("mouseout"),im.dragleave=src_CanvasHandler_inactive("dragleave"),im.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},im.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},im.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},im.touchmove=function(e){this.fire("touchmove",e,!0)},im.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},im.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,"click"===e&&a&&a.href?this.handleHref(t,a,a.href):"mousemove"!==e&&e!==rm||this.handleTooltip(t,a,e!==rm),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},im.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},im.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},im.pickEvent=function(e){var t=em(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},im.pick=function(e,t,n,r,i){var a=this.context();return $g[e.marktype].pick.call(this,a,e,t,n,r,i)};var am=function canvas_resize_devicePixelRatio(){return"undefined"!==typeof window&&window.devicePixelRatio||1}();function src_CanvasRenderer_CanvasRenderer(e){vega_scenegraph_src_Renderer_Renderer.call(this,e),this._redraw=!1,this._dirty=new src_Bounds_Bounds}var om=Object(V.y)(src_CanvasRenderer_CanvasRenderer,vega_scenegraph_src_Renderer_Renderer),sm=vega_scenegraph_src_Renderer_Renderer.prototype,um=new src_Bounds_Bounds;function src_SVGHandler_SVGHandler(e,t){vega_scenegraph_src_Handler_Handler.call(this,e,t);var n=this;n._hrefHandler=src_SVGHandler_listener(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=src_SVGHandler_listener(n,(function(e,t){n.handleTooltip(e,t,e.type!==rm)}))}om.initialize=function(e,t,n,r,i,a){return this._options=a,this._canvas=domCanvas(1,1,a&&a.type),e&&(util_dom_domClear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),sm.initialize.call(this,e,t,n,r,i)},om.resize=function(e,t,n,r){return sm.resize.call(this,e,t,n,r),function(e,t,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),l=s?am:i;for(o in e.width=t*l,e.height=n*l,a)u[o]=a[o];s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=l,u.setTransform(l,0,0,l,l*r[0],l*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},om.canvas=function(){return this._canvas},om.context=function(){return this._canvas?this._canvas.getContext("2d"):null},om.dirty=function(e){var t=function vega_scenegraph_src_CanvasRenderer_translate(e,t){if(null==t)return e;for(var n=um.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},om._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function src_CanvasRenderer_clipToBounds(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},om.draw=function(e,t,n){var r=$g[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),Object(V.D)(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},om.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var lm=Object(V.y)(src_SVGHandler_SVGHandler,vega_scenegraph_src_Handler_Handler);function src_SVGHandler_listener(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function util_tags_openTag(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function util_tags_closeTag(e){return"</"+e+">"}lm.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(rm,this._tooltipHandler)),this._svg=r=e&&util_dom_domFind(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(rm,this._tooltipHandler)),vega_scenegraph_src_Handler_Handler.prototype.initialize.call(this,e,t,n)},lm.canvas=function(){return this._svg},lm.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:src_SVGHandler_listener(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},lm.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var cm={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},fm={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},dm=Object.keys(fm),hm=cm.xmlns;function src_SVGRenderer_SVGRenderer(e){vega_scenegraph_src_Renderer_Renderer.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var pm=Object(V.y)(src_SVGRenderer_SVGRenderer,vega_scenegraph_src_Renderer_Renderer),gm=vega_scenegraph_src_Renderer_Renderer.prototype;function src_SVGRenderer_updateGradient(e,t,n){var r,i,a;if("radial"===t.gradient){var o=util_dom_domChild(e,n++,"pattern",hm);o.setAttribute("id",qp+t.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=util_dom_domChild(o,0,"rect",hm)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+vega_scenegraph_src_SVGRenderer_href()+"#"+t.id+")"),(e=util_dom_domChild(e,n++,"radialGradient",hm)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=util_dom_domChild(e,n++,"linearGradient",hm)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r)(a=util_dom_domChild(e,r,"stop",hm)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return util_dom_domClear(e,r),n}function src_SVGRenderer_updateClipping(e,t,n){var r;return(e=util_dom_domChild(e,n,"clipPath",hm)).setAttribute("id",t.id),t.path?(r=util_dom_domChild(e,0,"path",hm)).setAttribute("d",t.path):((r=util_dom_domChild(e,0,"rect",hm)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),n+1}function src_SVGRenderer_dirtyParents(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function vega_scenegraph_src_SVGRenderer_bind(e,t,n,r,i){var a,o=e._svg;if(!o&&(o=util_dom_domCreate(a=t.ownerDocument,r,hm),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var s=util_dom_domCreate(a,"path",hm);s.setAttribute("class","background"),o.appendChild(s),s.__data__=e;var u=util_dom_domCreate(a,"g",hm);o.appendChild(u),u.__data__=e}return(o.ownerSVGElement!==i||function src_SVGRenderer_hasSiblings(e){var t=e.mark||e.group;return t&&t.items.length>1}(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}pm.initialize=function(e,t,n,r){return e&&(this._svg=util_dom_domChild(e,0,"svg",hm),this._svg.setAttribute("class","marks"),util_dom_domClear(e,1),this._root=util_dom_domChild(this._svg,0,"g",hm),util_dom_domClear(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),gm.initialize.call(this,e,t,n,r)},pm.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),gm.background.apply(this,arguments)},pm.resize=function(e,t,n,r){return gm.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},pm.canvas=function(){return this._svg},pm.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in cm)e[t]=cm[t];var n=this._bgcolor?util_tags_openTag("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+util_tags_closeTag("rect"):"";return util_tags_openTag("svg",e)+n+this._svg.innerHTML+util_tags_closeTag("svg")},pm._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),util_dom_domClear(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},pm.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=util_dom_domChild(t,0,"defs",hm)),i=src_SVGRenderer_updateGradient(r,n.gradient[e],i);for(e in n.clipping)r||(n.el=r=util_dom_domChild(t,0,"defs",hm)),i=src_SVGRenderer_updateClipping(r,n.clipping[e],i);r&&(0===i?(t.removeChild(r),n.el=null):util_dom_domClear(r,i))},pm._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},pm.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},pm.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},pm._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=$g[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,src_SVGRenderer_dirtyParents(t,u),n.items.forEach((function(e){e.dirty=u}))),n.zdirty||(t.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):t._svg&&(s=t._svg.parentNode)&&s.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==u&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,src_SVGRenderer_dirtyParents(t,u)),t._update=u));return!this._dirtyAll},pm.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,i=this,a=this._svg,o=$g[t.marktype],s=!1===t.interactive?"none":null,u="g"===o.tag,l=null,c=0;function process(e){var t=i.isDirty(e),n=vega_scenegraph_src_SVGRenderer_bind(e,r,l,o.tag,a);t&&(i._update(o,n,e),u&&function vega_scenegraph_src_SVGRenderer_recurse(e,t,n){t=t.lastChild;var r,i=0;src_util_visit_visit(n,(function(n){r=e.draw(t,n,r),++i})),util_dom_domClear(t,1+i)}(i,n,e)),l=n,++c}return(r=vega_scenegraph_src_SVGRenderer_bind(t,e,n,"g",a)).setAttribute("class",util_dom_cssClass(t)),u||r.style.setProperty("pointer-events",s),t.clip?r.setAttribute("clip-path",Mg(i,t,t.group)):r.removeAttribute("clip-path"),o.nested?t.items.length&&process(t.items[0]):src_util_visit_visit(t,process),util_dom_domClear(r,c),r};var mm=null,vm=null,ym={group:function group(e,t,n){vm=t.__values__,mm=t.childNodes[1],e.foreground(vega_scenegraph_src_SVGRenderer_emit,n,this),mm=t.childNodes[0],e.background(vega_scenegraph_src_SVGRenderer_emit,n,this);var r=!1===n.mark.interactive?"none":null;r!==vm.events&&(mm.style.setProperty("pointer-events",r),vm.events=r)},text:function text(e,t,n){var r;(r=util_text_textValue(n))!==vm.text&&(t.textContent=r,vm.text=r),src_SVGRenderer_setStyle(t,"font-family",util_text_fontFamily(n)),src_SVGRenderer_setStyle(t,"font-size",src_util_text_fontSize(n)+"px"),src_SVGRenderer_setStyle(t,"font-style",n.fontStyle),src_SVGRenderer_setStyle(t,"font-variant",n.fontVariant),src_SVGRenderer_setStyle(t,"font-weight",n.fontWeight)}};function src_SVGRenderer_setStyle(e,t,n){n!==vm[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),vm[t]=n)}function vega_scenegraph_src_SVGRenderer_emit(e,t,n){t!==vm[e]&&(null!=t?n?mm.setAttributeNS(n,e,t):mm.setAttribute(e,t):n?mm.removeAttributeNS(n,e):mm.removeAttribute(e),vm[e]=t)}function vega_scenegraph_src_SVGRenderer_href(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function src_SVGStringRenderer_SVGStringRenderer(e){vega_scenegraph_src_Renderer_Renderer.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}pm._update=function(e,t,n){mm=t,vm=t.__values__,e.attr(vega_scenegraph_src_SVGRenderer_emit,n,this);var r=ym[e.type];r&&r.call(this,e,t,n),this.style(mm,n)},pm.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=dm.length;n<r;++n)o=t[i=dm[n]],"font"===i&&(o=util_text_fontFamily(t)),o!==vm[i]&&(a=fm[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(src_Gradient_isGradient(o)&&(o=src_Gradient_gradientRef(o,this._defs.gradient,vega_scenegraph_src_SVGRenderer_href())),e.style.setProperty(a,o+"")),vm[i]=o)};var _m,bm=Object(V.y)(src_SVGStringRenderer_SVGStringRenderer,vega_scenegraph_src_Renderer_Renderer),xm=vega_scenegraph_src_Renderer_Renderer.prototype;function vega_scenegraph_src_SVGStringRenderer_emit(e,t,n,r){_m[r||e]=t}function src_SVGStringRenderer_applyStyles(e,t,n,r){if(null==e)return"";var i,a,o,s,u,l="";for("bgrect"===n&&!1===t.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+util_text_fontFamily(e)+"; ",l+="font-size: "+src_util_text_fontSize(e)+"px; ",e.fontStyle&&(l+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(l+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(l+="font-weight: "+e.fontWeight+"; ")),i=0,a=dm.length;i<a;++i)o=dm[i],s=fm[o],null==(u=e[o])?"fill"===s&&(l+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(src_Gradient_isGradient(u)&&(u=src_Gradient_gradientRef(u,r.gradient,"")),l+=s+": "+u+"; "):l+=s+": none; ";return l?'style="'+l.trim()+'"':null}bm.resize=function(e,t,n,r){xm.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in cm)o[s]=cm[s];a.head=util_tags_openTag("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?util_tags_openTag("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+util_tags_closeTag("rect"):"",a.root=util_tags_openTag("g",{transform:"translate("+i+")"}),a.foot=util_tags_closeTag("g")+util_tags_closeTag("svg"),this},bm.background=function(){var e=xm.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},bm.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},bm._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},bm.buildDefs=function(){var e,t,n,r,i,a=this._defs,o="";for(t in a.gradient){for(i=(n=a.gradient[t]).stops,"radial"===n.gradient?(o+=util_tags_openTag(r="pattern",{id:qp+t,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=util_tags_openTag("rect",{width:"1",height:"1",fill:"url(#"+t+")"})+util_tags_closeTag("rect"),o+=util_tags_closeTag(r),o+=util_tags_openTag(r="radialGradient",{id:t,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=util_tags_openTag(r="linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<i.length;++e)o+=util_tags_openTag("stop",{offset:i[e].offset,"stop-color":i[e].color})+util_tags_closeTag("stop");o+=util_tags_closeTag(r)}for(t in a.clipping)n=a.clipping[t],o+=util_tags_openTag("clipPath",{id:t}),n.path?o+=util_tags_openTag("path",{d:n.path})+util_tags_closeTag("path"):o+=util_tags_openTag("rect",{x:0,y:0,width:n.width,height:n.height})+util_tags_closeTag("rect"),o+=util_tags_closeTag("clipPath");return o.length>0?util_tags_openTag("defs")+o+util_tags_closeTag("defs"):""},bm.attributes=function(e,t){return _m={},e(vega_scenegraph_src_SVGStringRenderer_emit,t,this),_m},bm.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},bm.mark=function(e){var t,n=this,r=$g[e.marktype],i=r.tag,a=this._defs,o="";function process(s){var u=n.href(s);u&&(o+=util_tags_openTag("a",u)),t="g"!==i?src_SVGStringRenderer_applyStyles(s,e,i,a):null,o+=util_tags_openTag(i,n.attributes(r.attr,s),t),"text"===i?o+=function src_SVGStringRenderer_escape_text(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(util_text_textValue(s)):"g"===i&&(o+=util_tags_openTag("path",n.attributes(r.background,s),src_SVGStringRenderer_applyStyles(s,e,"bgrect",a))+util_tags_closeTag("path"),o+=util_tags_openTag("g",n.attributes(r.foreground,s))+n.markGroup(s)+util_tags_closeTag("g")),o+=util_tags_closeTag(i),u&&(o+=util_tags_closeTag("a"))}return"g"!==i&&!1===e.interactive&&(t='style="pointer-events: none;"'),o+=util_tags_openTag("g",{class:util_dom_cssClass(e),"clip-path":e.clip?Mg(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&process(e.items[0]):src_util_visit_visit(e,process),o+util_tags_closeTag("g")},bm.markGroup=function(e){var t=this,n="";return src_util_visit_visit(e,(function(e){n+=t.mark(e)})),n};var wm={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},km={};function src_modules_renderModule(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(km[e]=t,this):km[e]}km.canvas=km.png={renderer:src_CanvasRenderer_CanvasRenderer,headless:src_CanvasRenderer_CanvasRenderer,handler:src_CanvasHandler_CanvasHandler},km.svg={renderer:src_SVGRenderer_SVGRenderer,headless:src_SVGStringRenderer_SVGStringRenderer,handler:src_SVGHandler_SVGHandler},km.none={};new src_Bounds_Bounds;var Sm=function(e,t,n){var r,i,a,o=e._renderer,s=o&&o.canvas();return s&&(a=render_size_offset(e),i=t.changedTouches?t.changedTouches[0]:t,(r=em(i,s))[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=function extension(e,t,n){var r=t?"group"===t.mark.marktype?t:t.mark.group:null;function group(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function xy(e){if(!e)return n;Object(V.H)(e)&&(e=group(e));for(var t=n.slice();e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:Object(V.l)(e),item:Object(V.l)(t||{}),group:group,xy:xy,x:function x(e){return xy(e)[0]},y:function y(e){return xy(e)[1]}}}(e,n,r),t};var Em="view",Tm="timer",Cm="window",Om={trap:!1};function permit(e,t,n){var r=e._eventConfig&&e._eventConfig[t];return!(!1===r||Object(V.F)(r)&&!r[n])||(e.warn("Blocked ".concat(t," ").concat(n," event listener.")),!1)}function itemFilter(e){return e.item}function markTarget(e){return e.item.mark.source}function invoke(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}var Am=function(e,t,n){var r=document.createElement(e);for(var i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r},Rm="vega-bind",Dm="vega-bind-name",Pm="vega-bind-radio",Mm="vega-option-",jm=function(e,t,n){if(t){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function update(t){t!==e.signal(r.signal)&&e.runAsync(null,(function(){i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=Object(V.m)(r.debounce,i.update))),function bind_generate(e,t,n,r){var i=Am("div",{class:Rm});i.appendChild(Am("span",{class:Dm},n.name||n.signal)),t.appendChild(i);var a=bind_form;switch(n.input){case"checkbox":a=bind_checkbox;break;case"select":a=bind_select;break;case"radio":a=bind_radio;break;case"range":a=bind_range}a(e,i,n,r)}(i,t,r,e.signal(r.signal)),i.active||(e.on(e._signals[r.signal],null,(function(){i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0),i}};function bind_form(e,t,n,r){var i=Am("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(function(){e.update(i.value)})),e.elements=[i],e.set=function(e){i.value=e}}function bind_checkbox(e,t,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=Am("input",i);t.appendChild(a),a.addEventListener("change",(function(){e.update(a.checked)})),e.elements=[a],e.set=function(e){a.checked=!!e||null}}function bind_select(e,t,n,r){var i=Am("select",{name:n.signal});n.options.forEach((function(e){var t={value:e};valuesEqual(e,r)&&(t.selected=!0),i.appendChild(Am("option",t,e+""))})),t.appendChild(i),i.addEventListener("change",(function(){e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=function(e){for(var t=0,r=n.options.length;t<r;++t)if(valuesEqual(n.options[t],e))return void(i.selectedIndex=t)}}function bind_radio(e,t,n,r){var i=Am("span",{class:Pm});t.appendChild(i),e.elements=n.options.map((function(t){var a=Mm+n.signal+"-"+t,o={id:a,type:"radio",name:n.signal,value:t};valuesEqual(t,r)&&(o.checked=!0);var s=Am("input",o);return s.addEventListener("change",(function(){e.update(t)})),i.appendChild(s),i.appendChild(Am("label",{for:a},t+"")),s})),e.set=function(t){for(var n=e.elements,r=0,i=n.length;r<i;++r)valuesEqual(n[r].value,t)&&(n[r].checked=!0)}}function bind_range(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;var i=null!=n.max?n.max:Math.max(100,+r)||100,a=n.min||Math.min(0,i,+r)||0,o=n.step||tickStep(a,i,100),s=Am("input",{type:"range",name:n.signal,min:a,max:i,step:o});s.value=r;var u=Am("label",{},+r);function update(){u.textContent=s.value,e.update(+s.value)}t.appendChild(s),t.appendChild(u),s.addEventListener("input",update),s.addEventListener("change",update),e.elements=[s],e.set=function(e){s.value=e,u.textContent=e}}function valuesEqual(e,t){return e===t||e+""===t+""}var Fm=function(e,t,n,r,i,a){return(t=t||new r(e.loader())).initialize(n,render_size_width(e),render_size_height(e),render_size_offset(e),i,a).background(e._background)},Im=function(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null};function initialize_lookup(e,t){if("string"===typeof t){if("undefined"===typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}var Lm=function(e,t,n,r){return render_headless_ref.apply(this,arguments)};function render_headless_ref(){return(render_headless_ref=Object(Y.a)(A.a.mark((function _callee(e,t,n,r){var i,a;return A.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return i=src_modules_renderModule(t),(a=i&&i.headless)||Object(V.n)("Unrecognized renderer type: "+t),o.next=4,e.runAsync();case 4:return o.abrupt("return",Fm(e,null,null,a,n,r).renderAsync(e._scenegraph.root));case 5:case"end":return o.stop()}}),_callee)})))).apply(this,arguments)}function render_to_image_url_ref(){return(render_to_image_url_ref=Object(Y.a)(A.a.mark((function _callee(e,t){var n;return A.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return e!==wm.Canvas&&e!==wm.SVG&&e!==wm.PNG&&Object(V.n)("Unrecognized image type: "+e),r.next=3,Lm(this,e,t);case 3:return n=r.sent,r.abrupt("return",e===wm.SVG?toBlobURL(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png"));case 5:case"end":return r.stop()}}),_callee,this)})))).apply(this,arguments)}function toBlobURL(e,t){var n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function render_to_canvas_ref(){return(render_to_canvas_ref=Object(Y.a)(A.a.mark((function _callee(e,t){var n;return A.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Lm(this,wm.Canvas,e,t);case 2:return n=r.sent,r.abrupt("return",n.canvas());case 4:case"end":return r.stop()}}),_callee,this)})))).apply(this,arguments)}function render_to_svg_ref(){return(render_to_svg_ref=Object(Y.a)(A.a.mark((function _callee(e){var t;return A.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Lm(this,wm.SVG,e);case 2:return t=n.sent,n.abrupt("return",t.svg());case 4:case"end":return n.stop()}}),_callee,this)})))).apply(this,arguments)}var Nm,Bm,Um,zm,qm,Wm="RawCode",Gm="Literal",Hm="Property",Vm="Identifier",Ym="ArrayExpression",$m="BinaryExpression",Xm="CallExpression",Km="ConditionalExpression",Jm="LogicalExpression",Zm="MemberExpression",Qm="ObjectExpression",ev="UnaryExpression";function ASTNode(e){this.type=e}ASTNode.prototype.visit=function(e){var t,n,r;if(e(this))return 1;for(n=0,r=(t=function ast_children(e){switch(e.type){case Ym:return e.elements;case $m:case Jm:return[e.left,e.right];case Xm:var t=e.arguments.slice();return t.unshift(e.callee),t;case Km:return[e.test,e.consequent,e.alternate];case Zm:return[e.object,e.property];case Qm:return e.properties;case Hm:return[e.key,e.value];case ev:return[e.argument];case Vm:case Gm:case Wm:default:return[]}}(this)).length;n<r;++n)if(t[n].visit(e))return 1};var tv=1,nv=2,rv=3,iv=4,av=5,ov=6,sv=7,uv=8;(Nm={})[tv]="Boolean",Nm[nv]="<end>",Nm[rv]="Identifier",Nm[iv]="Keyword",Nm[av]="Null",Nm[ov]="Numeric",Nm[sv]="Punctuator",Nm[uv]="String",Nm[9]="RegularExpression";var lv="ArrayExpression",cv="BinaryExpression",fv="CallExpression",dv="ConditionalExpression",hv="Identifier",pv="Literal",gv="LogicalExpression",mv="MemberExpression",vv="ObjectExpression",yv="Property",_v="UnaryExpression",bv="Unexpected token %0",xv="Unexpected number",wv="Unexpected string",kv="Unexpected identifier",Sv="Unexpected reserved word",Ev="Unexpected end of input",Tv="Invalid regular expression",Cv="Invalid regular expression: missing /",Ov="Octal literals are not allowed in strict mode.",Av="Duplicate data property in object literal not allowed in strict mode",Rv="ILLEGAL",Dv="Disabled.",Pv=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Mv=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function assert(e,t){if(!e)throw new Error("ASSERT: "+t)}function isDecimalDigit(e){return e>=48&&e<=57}function isHexDigit(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function isOctalDigit(e){return"01234567".indexOf(e)>=0}function isWhiteSpace(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function isLineTerminator(e){return 10===e||13===e||8232===e||8233===e}function isIdentifierStart(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Pv.test(String.fromCharCode(e))}function isIdentifierPart(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Mv.test(String.fromCharCode(e))}var jv={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function skipComment(){for(var e;Um<zm&&(isWhiteSpace(e=Bm.charCodeAt(Um))||isLineTerminator(e));)++Um}function scanHexEscape(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)Um<zm&&isHexDigit(Bm[Um])?(r=Bm[Um++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):throwError({},bv,Rv);return String.fromCharCode(i)}function scanUnicodeCodePointEscape(){var e,t,n,r;for(t=0,"}"===(e=Bm[Um])&&throwError({},bv,Rv);Um<zm&&isHexDigit(e=Bm[Um++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&throwError({},bv,Rv),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function getEscapedIdentifier(){var e,t;for(e=Bm.charCodeAt(Um++),t=String.fromCharCode(e),92===e&&(117!==Bm.charCodeAt(Um)&&throwError({},bv,Rv),++Um,(e=scanHexEscape("u"))&&"\\"!==e&&isIdentifierStart(e.charCodeAt(0))||throwError({},bv,Rv),t=e);Um<zm&&isIdentifierPart(e=Bm.charCodeAt(Um));)++Um,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Bm.charCodeAt(Um)&&throwError({},bv,Rv),++Um,(e=scanHexEscape("u"))&&"\\"!==e&&isIdentifierPart(e.charCodeAt(0))||throwError({},bv,Rv),t+=e);return t}function scanIdentifier(){var e,t;return e=Um,{type:1===(t=92===Bm.charCodeAt(Um)?getEscapedIdentifier():function getIdentifier(){var e,t;for(e=Um++;Um<zm;){if(92===(t=Bm.charCodeAt(Um)))return Um=e,getEscapedIdentifier();if(!isIdentifierPart(t))break;++Um}return Bm.slice(e,Um)}()).length?rv:jv.hasOwnProperty(t)?iv:"null"===t?av:"true"===t||"false"===t?tv:rv,value:t,start:e,end:Um}}function scanPunctuator(){var e,t,n,r,i=Um,a=Bm.charCodeAt(Um),o=Bm[Um];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Um,{type:sv,value:String.fromCharCode(a),start:i,end:Um};default:if(61===(e=Bm.charCodeAt(Um+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Um+=2,{type:sv,value:String.fromCharCode(a)+String.fromCharCode(e),start:i,end:Um};case 33:case 61:return Um+=2,61===Bm.charCodeAt(Um)&&++Um,{type:sv,value:Bm.slice(i,Um),start:i,end:Um}}}return">>>="===(r=Bm.substr(Um,4))?{type:sv,value:r,start:i,end:Um+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:sv,value:n,start:i,end:Um+=3}:o===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?{type:sv,value:t,start:i,end:Um+=2}:"<>=!+-*%&|^/".indexOf(o)>=0?{type:sv,value:o,start:i,end:++Um}:void throwError({},bv,Rv)}function scanNumericLiteral(){var e,t,n;if(assert(isDecimalDigit((n=Bm[Um]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Um,e="","."!==n){if(e=Bm[Um++],n=Bm[Um],"0"===e){if("x"===n||"X"===n)return++Um,function scanHexLiteral(e){for(var t="";Um<zm&&isHexDigit(Bm[Um]);)t+=Bm[Um++];return 0===t.length&&throwError({},bv,Rv),isIdentifierStart(Bm.charCodeAt(Um))&&throwError({},bv,Rv),{type:ov,value:parseInt("0x"+t,16),start:e,end:Um}}(t);if(isOctalDigit(n))return function scanOctalLiteral(e){for(var t="0"+Bm[Um++];Um<zm&&isOctalDigit(Bm[Um]);)t+=Bm[Um++];return(isIdentifierStart(Bm.charCodeAt(Um))||isDecimalDigit(Bm.charCodeAt(Um)))&&throwError({},bv,Rv),{type:ov,value:parseInt(t,8),octal:!0,start:e,end:Um}}(t);n&&isDecimalDigit(n.charCodeAt(0))&&throwError({},bv,Rv)}for(;isDecimalDigit(Bm.charCodeAt(Um));)e+=Bm[Um++];n=Bm[Um]}if("."===n){for(e+=Bm[Um++];isDecimalDigit(Bm.charCodeAt(Um));)e+=Bm[Um++];n=Bm[Um]}if("e"===n||"E"===n)if(e+=Bm[Um++],"+"!==(n=Bm[Um])&&"-"!==n||(e+=Bm[Um++]),isDecimalDigit(Bm.charCodeAt(Um)))for(;isDecimalDigit(Bm.charCodeAt(Um));)e+=Bm[Um++];else throwError({},bv,Rv);return isIdentifierStart(Bm.charCodeAt(Um))&&throwError({},bv,Rv),{type:ov,value:parseFloat(e),start:t,end:Um}}function scanRegExp(){var e,t,n,r;return qm=null,skipComment(),e=Um,t=function scanRegExpBody(){var e,t,n,r;for(assert("/"===(e=Bm[Um]),"Regular expression literal must start with a slash"),t=Bm[Um++],n=!1,r=!1;Um<zm;)if(t+=e=Bm[Um++],"\\"===e)isLineTerminator((e=Bm[Um++]).charCodeAt(0))&&throwError({},Cv),t+=e;else if(isLineTerminator(e.charCodeAt(0)))throwError({},Cv);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||throwError({},Cv),{value:t.substr(1,t.length-2),literal:t}}(),n=function scanRegExpFlags(){var e,t,n;for(t="",n="";Um<zm&&isIdentifierPart((e=Bm[Um]).charCodeAt(0));)++Um,"\\"===e&&Um<zm?throwError({},bv,Rv):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&throwError({},Tv,n),{value:n,literal:t}}(),r=function testRegExp(e,t){var n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(e,t){if(parseInt(t,16)<=1114111)return"x";throwError({},Tv)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){throwError({},Tv)}try{return new RegExp(e,t)}catch(i){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Um}}function advance(){var e;return skipComment(),Um>=zm?{type:nv,start:Um,end:Um}:isIdentifierStart(e=Bm.charCodeAt(Um))?scanIdentifier():40===e||41===e||59===e?scanPunctuator():39===e||34===e?function scanStringLiteral(){var e,t,n,r,i="",a=!1;for(assert("'"===(e=Bm[Um])||'"'===e,"String literal must starts with a quote"),t=Um,++Um;Um<zm;){if((n=Bm[Um++])===e){e="";break}if("\\"===n)if((n=Bm[Um++])&&isLineTerminator(n.charCodeAt(0)))"\r"===n&&"\n"===Bm[Um]&&++Um;else switch(n){case"u":case"x":"{"===Bm[Um]?(++Um,i+=scanUnicodeCodePointEscape()):i+=scanHexEscape(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:isOctalDigit(n)?(0!==(r="01234567".indexOf(n))&&(a=!0),Um<zm&&isOctalDigit(Bm[Um])&&(a=!0,r=8*r+"01234567".indexOf(Bm[Um++]),"0123".indexOf(n)>=0&&Um<zm&&isOctalDigit(Bm[Um])&&(r=8*r+"01234567".indexOf(Bm[Um++]))),i+=String.fromCharCode(r)):i+=n}else{if(isLineTerminator(n.charCodeAt(0)))break;i+=n}}return""!==e&&throwError({},bv,Rv),{type:uv,value:i,octal:a,start:t,end:Um}}():46===e?isDecimalDigit(Bm.charCodeAt(Um+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(e)?scanNumericLiteral():scanPunctuator()}function lex(){var e;return Um=(e=qm).end,qm=advance(),Um=e.end,e}function peek(){var e;e=Um,qm=advance(),Um=e}function finishBinaryExpression(e,t,n){var r=new ASTNode("||"===e||"&&"===e?gv:cv);return r.operator=e,r.left=t,r.right=n,r}function finishCallExpression(e,t){var n=new ASTNode(fv);return n.callee=e,n.arguments=t,n}function finishIdentifier(e){var t=new ASTNode(hv);return t.name=e,t}function finishLiteral(e){var t=new ASTNode(pv);return t.value=e.value,t.raw=Bm.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function finishMemberExpression(e,t,n){var r=new ASTNode(mv);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function finishProperty(e,t,n){var r=new ASTNode(yv);return r.key=t,r.value=n,r.kind=e,r}function throwError(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return assert(t<r.length,"Message reference must be in range"),r[t]}));throw(n=new Error(i)).index=Um,n.description=i,n}function throwUnexpected(e){e.type===nv&&throwError(e,Ev),e.type===ov&&throwError(e,xv),e.type===uv&&throwError(e,wv),e.type===rv&&throwError(e,kv),e.type===iv&&throwError(e,Sv),throwError(e,bv,e.value)}function expect(e){var t=lex();t.type===sv&&t.value===e||throwUnexpected(t)}function parser_match(e){return qm.type===sv&&qm.value===e}function matchKeyword(e){return qm.type===iv&&qm.value===e}function parseArrayInitialiser(){var e=[];for(Um=qm.start,expect("[");!parser_match("]");)parser_match(",")?(lex(),e.push(null)):(e.push(parseConditionalExpression()),parser_match("]")||expect(","));return lex(),function finishArrayExpression(e){var t=new ASTNode(lv);return t.elements=e,t}(e)}function parseObjectPropertyKey(){var e;return Um=qm.start,(e=lex()).type===uv||e.type===ov?(e.octal&&throwError(e,Ov),finishLiteral(e)):finishIdentifier(e.value)}function parseObjectProperty(){var e,t,n;return Um=qm.start,(e=qm).type===rv?(n=parseObjectPropertyKey(),expect(":"),finishProperty("init",n,parseConditionalExpression())):e.type!==nv&&e.type!==sv?(t=parseObjectPropertyKey(),expect(":"),finishProperty("init",t,parseConditionalExpression())):void throwUnexpected(e)}function parseObjectInitialiser(){var e,t,n=[],r={},i=String;for(Um=qm.start,expect("{");!parser_match("}");)t="$"+((e=parseObjectProperty()).key.type===hv?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?throwError({},Av):r[t]=!0,n.push(e),parser_match("}")||expect(",");return expect("}"),function finishObjectExpression(e){var t=new ASTNode(vv);return t.properties=e,t}(n)}var Fv={if:1,this:1};function parsePrimaryExpression(){var e,t,n;if(parser_match("("))return function parseGroupExpression(){var e;return expect("("),e=parseExpression(),expect(")"),e}();if(parser_match("["))return parseArrayInitialiser();if(parser_match("{"))return parseObjectInitialiser();if(e=qm.type,Um=qm.start,e===rv||Fv[qm.value])n=finishIdentifier(lex().value);else if(e===uv||e===ov)qm.octal&&throwError(qm,Ov),n=finishLiteral(lex());else{if(e===iv)throw new Error(Dv);e===tv?((t=lex()).value="true"===t.value,n=finishLiteral(t)):e===av?((t=lex()).value=null,n=finishLiteral(t)):parser_match("/")||parser_match("/=")?(n=finishLiteral(scanRegExp()),peek()):throwUnexpected(lex())}return n}function parseArguments(){var e=[];if(expect("("),!parser_match(")"))for(;Um<zm&&(e.push(parseConditionalExpression()),!parser_match(")"));)expect(",");return expect(")"),e}function parseNonComputedProperty(){var e;return Um=qm.start,function isIdentifierName(e){return e.type===rv||e.type===iv||e.type===tv||e.type===av}(e=lex())||throwUnexpected(e),finishIdentifier(e.value)}function parseComputedMember(){var e;return expect("["),e=parseExpression(),expect("]"),e}function parsePostfixExpression(){var e=function parseLeftHandSideExpressionAllowCall(){var e;for(e=parsePrimaryExpression();;)if(parser_match("."))expect("."),e=finishMemberExpression(".",e,parseNonComputedProperty());else if(parser_match("("))e=finishCallExpression(e,parseArguments());else{if(!parser_match("["))break;e=finishMemberExpression("[",e,parseComputedMember())}return e}();if(qm.type===sv&&(parser_match("++")||parser_match("--")))throw new Error(Dv);return e}function parseUnaryExpression(){var e,t;if(qm.type!==sv&&qm.type!==iv)t=parsePostfixExpression();else{if(parser_match("++")||parser_match("--"))throw new Error(Dv);if(parser_match("+")||parser_match("-")||parser_match("~")||parser_match("!"))e=lex(),t=parseUnaryExpression(),t=function finishUnaryExpression(e,t){var n=new ASTNode(_v);return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof"))throw new Error(Dv);t=parsePostfixExpression()}}return t}function binaryPrecedence(e){var t=0;if(e.type!==sv&&e.type!==iv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function parseConditionalExpression(){var e,t;return e=function parseBinaryExpression(){var e,t,n,r,i,a,o,s,u,l;if(e=qm,u=parseUnaryExpression(),0===(i=binaryPrecedence(r=qm)))return u;for(r.prec=i,lex(),t=[e,qm],a=[u,r,o=parseUnaryExpression()];(i=binaryPrecedence(qm))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),t.pop(),n=finishBinaryExpression(s,u,o),a.push(n);(r=lex()).prec=i,a.push(r),t.push(qm),n=parseUnaryExpression(),a.push(n)}for(n=a[l=a.length-1],t.pop();l>1;)t.pop(),n=finishBinaryExpression(a[l-1].value,a[l-2],n),l-=2;return n}(),parser_match("?")&&(lex(),t=parseConditionalExpression(),expect(":"),e=function finishConditionalExpression(e,t,n){var r=new ASTNode(dv);return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,parseConditionalExpression())),e}function parseExpression(){var e=parseConditionalExpression();if(parser_match(","))throw new Error(Dv);return e}var Iv=function(e){Um=0,zm=(Bm=e).length,qm=null,peek();var t=parseExpression();if(qm.type!==nv)throw new Error("Unexpect token after expression.");return t},Lv={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},Nv=function(e){function fn(t,n,r){return function(i){return function fncall(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}}var t="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function clamp(t){t.length<3&&Object(V.n)("Missing arguments to clamp function."),t.length>3&&Object(V.n)("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:t,date:fn("getDate",t,0),day:fn("getDay",t,0),year:fn("getFullYear",t,0),month:fn("getMonth",t,0),hours:fn("getHours",t,0),minutes:fn("getMinutes",t,0),seconds:fn("getSeconds",t,0),milliseconds:fn("getMilliseconds",t,0),time:fn("getTime",t,0),timezoneoffset:fn("getTimezoneOffset",t,0),utcdate:fn("getUTCDate",t,0),utcday:fn("getUTCDay",t,0),utcyear:fn("getUTCFullYear",t,0),utcmonth:fn("getUTCMonth",t,0),utchours:fn("getUTCHours",t,0),utcminutes:fn("getUTCMinutes",t,0),utcseconds:fn("getUTCSeconds",t,0),utcmilliseconds:fn("getUTCMilliseconds",t,0),length:fn("length",null,-1),join:fn("join",null),indexof:fn("indexOf",null),lastindexof:fn("lastIndexOf",null),slice:fn("slice",null),reverse:function reverse(t){return"("+e(t[0])+").slice().reverse()"},parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase","String",0),lower:fn("toLowerCase","String",0),substring:fn("substring","String"),split:fn("split","String"),replace:fn("replace","String"),trim:fn("trim","String",0),regexp:"RegExp",test:fn("test","RegExp"),if:function _if(t){t.length<3&&Object(V.n)("Missing arguments to if function."),t.length>3&&Object(V.n)("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}};var Bv="intersect",Uv="union",zv="E",qv="R",Wv="R-E",Gv="R-LE",Hv="R-RE",Vv="index:unit";function testPoint(e,t){for(var n,r,i=t.fields,a=t.values,o=i.length,s=0;s<o;++s)if((r=i[s]).getter=V.t.getter||Object(V.t)(r.field),n=r.getter(e),Object(V.C)(n)&&(n=Object(V.ab)(n)),Object(V.C)(a[s])&&(a[s]=Object(V.ab)(a[s])),Object(V.C)(a[s][0])&&(a[s]=a[s].map(V.ab)),r.type===zv){if(Object(V.A)(a[s])?a[s].indexOf(n)<0:n!==a[s])return!1}else if(r.type===qv){if(!Object(V.z)(n,a[s]))return!1}else if(r.type===Hv){if(!Object(V.z)(n,a[s],!0,!1))return!1}else if(r.type===Wv){if(!Object(V.z)(n,a[s],!1,!1))return!1}else if(r.type===Gv&&!Object(V.z)(n,a[s],!1,!0))return!1;return!0}var Yv={E_union:function E_union(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function E_intersect(e,t){return e.length?e.filter((function(e){return t.indexOf(e)>=0})):t},R_union:function R_union(e,t){var n=Object(V.ab)(t[0]),r=Object(V.ab)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function R_intersect(e,t){var n=Object(V.ab)(t[0]),r=Object(V.ab)(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}},$v=":",Xv="@";function selectionVisitor(e,t,n,r){t[0].type!==Gm&&Object(V.n)("First argument to selection functions must be a string literal.");var i=t[0].value,a=t.length>=2&&Object(V.S)(t).value,o=Xv+"unit",s=$v+i;a!==Bv||Object(V.v)(r,o)||(r[o]=n.getData(i).indataRef(n,"unit")),Object(V.v)(r,s)||(r[s]=n.getData(i).tuplesRef())}function src_data_data(e){var t=this.context.data[e];return t?t.values.value:[]}var Kv={};function formatter(e,t,n){var r=e+":"+n,i=Kv[r];return i&&i[0]===t||(Kv[r]=i=[t,t(n)]),i[1]}function format_timeFormat(e,t){return formatter("timeFormat",tt,t)(e)}var Jv=new Date(2e3,0,1);function format_time(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(Jv.setMonth(e),Jv.setDate(t),format_timeFormat(Jv,n)):""}function getScale(e,t){var n;return Object(V.D)(e)?e:Object(V.H)(e)?(n=t.scales[e])&&n.value:void 0}function geoMethod(e,t){return function(n,r,i){if(n){var a=getScale(n,(i||this).context);return a&&a.path[e](r)}return t(r)}}var Zv=geoMethod("area",(function(e){return Sl.reset(),wl(e,El),2*Sl})),Qv=geoMethod("bounds",(function(e){var t,n,r,i,a,o,s;if(Al=Ol=-(Tl=Cl=1/0),jl=[],wl(e,Ll),n=jl.length){for(jl.sort(rangeCompare),t=1,a=[r=jl[0]];t<n;++t)rangeContains(r,(i=jl[t])[0])||rangeContains(r,i[1])?(bounds_angle(r[0],i[1])>bounds_angle(r[0],r[1])&&(r[1]=i[1]),bounds_angle(i[0],r[1])>bounds_angle(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(s=bounds_angle(r[1],i[0]))>o&&(o=s,Tl=i[0],Ol=r[1])}return jl=Fl=null,Tl===1/0||Cl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Tl,Cl],[Ol,Al]]})),ey=geoMethod("centroid",(function(e){Nl=Bl=Ul=zl=ql=Wl=Gl=Hl=Vl=Yl=$l=0,wl(e,ec);var t=Vl,n=Yl,r=$l,i=t*t+n*n+r*r;return i<Ku&&(t=Wl,n=Gl,r=Hl,Bl<Xu&&(t=Ul,n=zl,r=ql),(i=t*t+n*n+r*r)<Ku)?[NaN,NaN]:[al(n,t)*tl,math_asin(r/hl(i))*tl]}));function vega_scenegraph_src_Bounds_Bounds(e){this.clear(),e&&this.union(e)}var ty=vega_scenegraph_src_Bounds_Bounds.prototype;ty.clone=function(){return new vega_scenegraph_src_Bounds_Bounds(this)},ty.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},ty.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},ty.equals=function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},ty.set=function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},ty.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},ty.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},ty.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},ty.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},ty.rotate=function(e,t,n){var r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},ty.rotatedPoints=function(e,t,n){var r=this.x1,i=this.y1,a=this.x2,o=this.y2,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*o+l,u*r+s*o+c,s*a-u*i+l,u*a+s*i+c,s*a-u*o+l,u*a+s*o+c]},ty.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},ty.intersect=function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},ty.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},ty.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},ty.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},ty.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},ty.width=function(){return this.x2-this.x1},ty.height=function(){return this.y2-this.y1};var ny=0,ry="p_";function vega_scenegraph_src_Gradient_isGradient(e){return e&&e.gradient}function vega_scenegraph_src_Gradient_gradientRef(e,t,n){var r=e.id,i=e.gradient,a="radial"===i?ry:"";return r||(r=e.id="gradient_"+ny++,"radial"===i?(e.x1=node_modules_vega_scenegraph_src_Gradient_get(e.x1,.5),e.y1=node_modules_vega_scenegraph_src_Gradient_get(e.y1,.5),e.r1=node_modules_vega_scenegraph_src_Gradient_get(e.r1,0),e.x2=node_modules_vega_scenegraph_src_Gradient_get(e.x2,.5),e.y2=node_modules_vega_scenegraph_src_Gradient_get(e.y2,.5),e.r2=node_modules_vega_scenegraph_src_Gradient_get(e.r2,.5),a=ry):(e.x1=node_modules_vega_scenegraph_src_Gradient_get(e.x1,0),e.y1=node_modules_vega_scenegraph_src_Gradient_get(e.y1,0),e.x2=node_modules_vega_scenegraph_src_Gradient_get(e.x2,1),e.y2=node_modules_vega_scenegraph_src_Gradient_get(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function node_modules_vega_scenegraph_src_Gradient_get(e,t){return null!=e?e:t}function vega_scenegraph_src_Item_Item(e){this.mark=e,this.bounds=this.bounds||new vega_scenegraph_src_Bounds_Bounds}function vega_scenegraph_src_GroupItem_GroupItem(e){vega_scenegraph_src_Item_Item.call(this,e),this.items=this.items||[]}Object(V.y)(vega_scenegraph_src_GroupItem_GroupItem,vega_scenegraph_src_Item_Item);var iy=/^([A-Za-z]+:)?\/\//,ay=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,oy=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,sy="file://";function vega_functions_node_modules_vega_loader_src_loader_load(e,t){return node_modules_vega_functions_node_modules_vega_loader_src_loader_load.apply(this,arguments)}function node_modules_vega_functions_node_modules_vega_loader_src_loader_load(){return(node_modules_vega_functions_node_modules_vega_loader_src_loader_load=Object(Y.a)(A.a.mark((function _callee2(e,t){var n,r;return A.a.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sanitize(e,t);case 2:return n=i.sent,r=n.href,i.abrupt("return",n.localFile?this.file(r):this.http(r,t));case 5:case"end":return i.stop()}}),_callee2,this)})))).apply(this,arguments)}function vega_functions_node_modules_vega_loader_src_loader_sanitize(e,t){return node_modules_vega_functions_node_modules_vega_loader_src_loader_sanitize.apply(this,arguments)}function node_modules_vega_functions_node_modules_vega_loader_src_loader_sanitize(){return(node_modules_vega_functions_node_modules_vega_loader_src_loader_sanitize=Object(Y.a)(A.a.mark((function _callee3(e,t){var n,r,i,a,o,s,u;return A.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:return t=Object(V.o)({},this.options,t),n=this.fileAccess,r={href:null},s=ay.test(e.replace(oy,"")),null!=e&&"string"===typeof e&&s||Object(V.n)("Sanitize failure, invalid URI: "+Object(V.X)(e)),u=iy.test(e),(o=t.baseURL)&&!u&&(e.startsWith("/")||"/"===o[o.length-1]||(e="/"+e),e=o+e),a=(i=e.startsWith(sy))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(sy.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!a}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),l.abrupt("return",r);case 13:case"end":return l.stop()}}),_callee3,this)})))).apply(this,arguments)}function node_modules_vega_loader_src_loader_fileLoader(e){return e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){e?r(e):n(t)}))}))}:vega_functions_node_modules_vega_loader_src_loader_fileReject}function vega_functions_node_modules_vega_loader_src_loader_fileReject(){return node_modules_vega_functions_node_modules_vega_loader_src_loader_fileReject.apply(this,arguments)}function node_modules_vega_functions_node_modules_vega_loader_src_loader_fileReject(){return(node_modules_vega_functions_node_modules_vega_loader_src_loader_fileReject=Object(Y.a)(A.a.mark((function _callee4(){return A.a.wrap((function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No file system access.");case 1:case"end":return e.stop()}}),_callee4)})))).apply(this,arguments)}function node_modules_vega_loader_src_loader_httpLoader(e){return e?function(){var t=Object(Y.a)(A.a.mark((function _callee(t,n){var r,i,a;return A.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r=Object(V.o)({},this.options.http,n),i=n&&n.response,o.next=4,e(t,r);case 4:return a=o.sent,o.abrupt("return",a.ok?Object(V.D)(a[i])?a[i]():a.text():Object(V.n)(a.status+""+a.statusText));case 6:case"end":return o.stop()}}),_callee,this)})));return function(e,n){return t.apply(this,arguments)}}():vega_functions_node_modules_vega_loader_src_loader_httpReject}function vega_functions_node_modules_vega_loader_src_loader_httpReject(){return node_modules_vega_functions_node_modules_vega_loader_src_loader_httpReject.apply(this,arguments)}function node_modules_vega_functions_node_modules_vega_loader_src_loader_httpReject(){return(node_modules_vega_functions_node_modules_vega_loader_src_loader_httpReject=Object(Y.a)(A.a.mark((function _callee5(){return A.a.wrap((function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:Object(V.n)("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),_callee5)})))).apply(this,arguments)}V.Y,V.ab,V.ab,V.Z,V.cb,V.x;function vega_loader_src_formats_dsv_delimitedFormat(e){var t=function parse(t,n){var r={delimiter:e};return node_modules_vega_loader_src_formats_dsv_dsv(t,n?Object(V.o)(n,r):r)};return t.responseType="text",t}function node_modules_vega_loader_src_formats_dsv_dsv(e,t){return t.header&&(e=t.header.map(V.X).join(t.delimiter)+"\n"+e),me(t.delimiter).parse(e+"")}node_modules_vega_loader_src_formats_dsv_dsv.responseType="text";var uy=n(83),ly={interior:function interior(e,t){return e!==t},exterior:function exterior(e,t){return e===t}};function vega_loader_src_formats_topojson_topojson(e,t){var n,r,i,a;return e=Object(uy.a)(e,t),t&&t.feature?(n=ke,i=t.feature):t&&t.mesh?(n=Ee,i=t.mesh,a=ly[t.filter]):Object(V.n)("Missing TopoJSON feature or mesh parameter."),(r=(r=e.objects[i])?n(e,r,a):Object(V.n)("Invalid TopoJSON object: "+i))&&r.features||[r]}vega_loader_src_formats_topojson_topojson.responseType="json";vega_loader_src_formats_dsv_delimitedFormat(","),vega_loader_src_formats_dsv_delimitedFormat("\t"),uy.a;var cy=function(e,t){return function(n){return{options:n||{},sanitize:vega_functions_node_modules_vega_loader_src_loader_sanitize,load:vega_functions_node_modules_vega_loader_src_loader_load,fileAccess:!!t,file:node_modules_vega_loader_src_loader_fileLoader(t),http:node_modules_vega_loader_src_loader_httpLoader(e)}}}("undefined"!==typeof fetch&&fetch,null);function vega_scenegraph_src_ResourceLoader_ResourceLoader(e){this._pending=0,this._loader=e||cy()}var fy=vega_scenegraph_src_ResourceLoader_ResourceLoader.prototype;function vega_scenegraph_src_ResourceLoader_increment(e){e._pending+=1}function vega_scenegraph_src_ResourceLoader_decrement(e){e._pending-=1}fy.pending=function(){return this._pending},fy.sanitizeURL=function(e){var t=this;return vega_scenegraph_src_ResourceLoader_increment(t),t._loader.sanitize(e,{context:"href"}).then((function(e){return vega_scenegraph_src_ResourceLoader_decrement(t),e})).catch((function(){return vega_scenegraph_src_ResourceLoader_decrement(t),null}))},fy.loadImage=function(e){var t=this,n=domImage();return vega_scenegraph_src_ResourceLoader_increment(t),t._loader.sanitize(e,{context:"image"}).then((function(e){var r=e.href;if(!r||!n)throw{url:r};var i=new n;return i.onload=function(){vega_scenegraph_src_ResourceLoader_decrement(t),i.loaded=!0},i.onerror=function(){vega_scenegraph_src_ResourceLoader_decrement(t),i.loaded=!1},i.src=r,i})).catch((function(e){return vega_scenegraph_src_ResourceLoader_decrement(t),{loaded:!1,width:0,height:0,src:e&&e.url||""}}))},fy.ready=function(){var e=this;return new Promise((function(t){!function poll(n){e.pending()?setTimeout((function(){poll(!0)}),10):t(n)}(!1)}))};var dy={basis:{curve:Br},"basis-closed":{curve:Ur},"basis-open":{curve:zr},bundle:{curve:qr,tension:"beta",value:.85},cardinal:{curve:Wr,tension:"tension",value:0},"cardinal-open":{curve:Hr,tension:"tension",value:0},"cardinal-closed":{curve:Gr,tension:"tension",value:0},"catmull-rom":{curve:Vr,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Yr,tension:"alpha",value:.5},"catmull-rom-open":{curve:$r,tension:"alpha",value:.5},linear:{curve:Pr},"linear-closed":{curve:Xr},monotone:{horizontal:monotoneY,vertical:monotoneX},natural:{curve:Kr},step:{curve:Jr},"step-after":{curve:stepAfter},"step-before":{curve:stepBefore}};function src_path_curves_curves(e,t,n){var r=Object(V.v)(dy,e)&&dy[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}var hy={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},py=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],gy=function(e){var t,n,r,i,a,o,s,u,l,c,f,d=[];for(u=0,c=(t=e.slice().replace(py[0],"###$1").split(py[1]).slice(1)).length;u<c;++u){for(r=(n=t[u]).slice(1).trim().replace(py[2],"$1###$2").split(py[3]),i=[o=n.charAt(0)],l=0,f=r.length;l<f;++l)(a=+r[l])===a&&i.push(a);if(s=hy[o.toLowerCase()],i.length-1>s)for(l=1,f=i.length;l<f;l+=s)d.push([o].concat(i.slice(l,l+s)));else d.push(i)}return d},my=Math.PI/180,vy=Math.PI/2,yy=2*Math.PI,_y=Math.sqrt(3)/2,by={},wy={},ky=[].join;function src_path_arc_bezier(e){var t=ky.call(e);if(wy[t])return wy[t];var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=l*o,f=-u*s,d=u*o,h=l*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(a),v=Math.sin(a),y=.5*(a-i),_=Math.sin(.5*y),b=8/3*_*_/Math.sin(y),x=n+p-b*g,w=r+g+b*p,k=n+m,S=r+v,E=k+b*v,T=S-b*m;return wy[t]=[c*x+f*w,d*x+h*w,c*E+f*T,d*E+h*T,c*k+f*S,d*k+h*S]}var Sy=["l",0,0,0,0,0,0,0];function vega_scenegraph_src_path_render_scale(e,t){var n=Sy[0]=e[0];if("a"===n||"A"===n)Sy[1]=t*e[1],Sy[2]=t*e[2],Sy[3]=e[3],Sy[4]=e[4],Sy[5]=e[5],Sy[6]=t*e[6],Sy[7]=t*e[7];else for(var r=1,i=e.length;r<i;++r)Sy[r]=t*e[r];return Sy}var Ey=function(e,t,n,r,i){var a,o,s,u,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),e.beginPath&&e.beginPath();for(var g=0,m=t.length;g<m;++g){switch(a=t[g],1!==i&&(a=vega_scenegraph_src_path_render_scale(a,i)),a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+r);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+r);break;case"h":f+=a[1],e.lineTo(f+n,d+r);break;case"H":f=a[1],e.lineTo(f+n,d+r);break;case"v":d+=a[1],e.lineTo(f+n,d+r);break;case"V":d=a[1],e.lineTo(f+n,d+r);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+r);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+r);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+r,h+n,p+r,o+n,s+r),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,p+r,f+n,d+r);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,f+a[1]+n,d+a[2]+r,o+n,s+r),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+r,a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,o+n,s+r),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-u,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),u=h,l=p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),d=s,h=(f=o)+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+r,o+n,s+r),f=o,d=s;break;case"a":src_path_render_drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+r]),f+=a[6],d+=a[7];break;case"A":src_path_render_drawArc(e,f+n,d+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}};function src_path_render_drawArc(e,t,n,r){for(var i=function vega_scenegraph_src_path_arc_segments(e,t,n,r,i,a,o,s,u){var l=ky.call(arguments);if(by[l])return by[l];var c=o*my,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5,g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(n*=g=Math.sqrt(g),r*=g);var m=d/n,v=f/n,y=-f/r,_=d/r,b=m*s+v*u,x=y*s+_*u,w=m*e+v*t,k=y*e+_*t,S=1/((w-b)*(w-b)+(k-x)*(k-x))-.25;S<0&&(S=0);var E=Math.sqrt(S);a==i&&(E=-E);var T=.5*(b+w)-E*(k-x),C=.5*(x+k)+E*(w-b),O=Math.atan2(x-C,b-T),A=Math.atan2(k-C,w-T)-O;A<0&&1===a?A+=yy:A>0&&0===a&&(A-=yy);for(var R=Math.ceil(Math.abs(A/(vy+.001))),D=[],P=0;P<R;++P){var M=O+P*A/R,j=O+(P+1)*A/R;D[P]=[T,C,M,j,n,r,f,d]}return by[l]=D}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),a=0;a<i.length;++a){var o=src_path_arc_bezier(i[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}var Ty={circle:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,yy)}},cross:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function draw(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,a=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-a),e.lineTo(i,-a),e.lineTo(0,-n),e.lineTo(-i,-a),e.lineTo(-r,-a),e.closePath()}},wedge:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=_y*n,i=r-.5773502691896257*n,a=n/4;e.moveTo(0,-r-i),e.lineTo(-a,r-i),e.lineTo(a,r-i),e.closePath()}},triangle:{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=_y*n,i=r-.5773502691896257*n;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=_y*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=_y*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=_y*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function draw(e,t){var n=Math.sqrt(t)/2,r=_y*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function draw(e,t){var n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function vega_scenegraph_src_path_symbols_symbols(e){return Object(V.v)(Ty,e)?Ty[e]:function src_path_symbols_customSymbol(e){if(!Object(V.v)(Cy,e)){var t=gy(e);Cy[e]={draw:function draw(e,n){Ey(e,t,0,0,Math.sqrt(n)/2)}}}return Cy[e]}(e)}var Cy={};function src_path_rectangle_rectangleX(e){return e.x}function src_path_rectangle_rectangleY(e){return e.y}function src_path_rectangle_rectangleWidth(e){return e.width}function src_path_rectangle_rectangleHeight(e){return e.height}function vega_scenegraph_src_path_rectangle_constant(e){return function(){return e}}function vega_scenegraph_src_path_shapes_x(e){return e.x||0}function vega_scenegraph_src_path_shapes_y(e){return e.y||0}function vega_scenegraph_src_path_shapes_cr(e){return e.cornerRadius||0}function vega_scenegraph_src_path_shapes_def(e){return!(!1===e.defined)}var Oy=Dr().startAngle((function vega_scenegraph_src_path_shapes_sa(e){return e.startAngle||0})).endAngle((function vega_scenegraph_src_path_shapes_ea(e){return e.endAngle||0})).padAngle((function vega_scenegraph_src_path_shapes_pa(e){return e.padAngle||0})).innerRadius((function src_path_shapes_ir(e){return e.innerRadius||0})).outerRadius((function vega_scenegraph_src_path_shapes_or(e){return e.outerRadius||0})).cornerRadius(vega_scenegraph_src_path_shapes_cr),Ay=jr().x(vega_scenegraph_src_path_shapes_x).y1(vega_scenegraph_src_path_shapes_y).y0((function src_path_shapes_yh(e){return(e.y||0)+(e.height||0)})).defined(vega_scenegraph_src_path_shapes_def),Ry=jr().y(vega_scenegraph_src_path_shapes_y).x1(vega_scenegraph_src_path_shapes_x).x0((function src_path_shapes_xw(e){return(e.x||0)+(e.width||0)})).defined(vega_scenegraph_src_path_shapes_def),Dy=Mr().x(vega_scenegraph_src_path_shapes_x).y(vega_scenegraph_src_path_shapes_y).defined(vega_scenegraph_src_path_shapes_def),Py=function(){var e=src_path_rectangle_rectangleX,t=src_path_rectangle_rectangleY,n=src_path_rectangle_rectangleWidth,r=src_path_rectangle_rectangleHeight,i=vega_scenegraph_src_path_rectangle_constant(0),a=null;function rectangle(o,s,u){var l,c=null!=s?s:+e.call(this,o),f=null!=u?u:+t.call(this,o),d=+n.call(this,o),h=+r.call(this,o),p=+i.call(this,o);if(a||(a=l=yr()),p<=0)a.rect(c,f,d,h);else{var g=c+d,m=f+h;a.moveTo(c+p,f),a.lineTo(g-p,f),a.quadraticCurveTo(g,f,g,f+p),a.lineTo(g,m-p),a.quadraticCurveTo(g,m,g-p,m),a.lineTo(c+p,m),a.quadraticCurveTo(c,m,c,m-p),a.lineTo(c,f+p),a.quadraticCurveTo(c,f,c+p,f),a.closePath()}if(l)return a=null,l+""||null}return rectangle.x=function(t){return arguments.length?(e="function"===typeof t?t:vega_scenegraph_src_path_rectangle_constant(+t),rectangle):e},rectangle.y=function(e){return arguments.length?(t="function"===typeof e?e:vega_scenegraph_src_path_rectangle_constant(+e),rectangle):t},rectangle.width=function(e){return arguments.length?(n="function"===typeof e?e:vega_scenegraph_src_path_rectangle_constant(+e),rectangle):n},rectangle.height=function(e){return arguments.length?(r="function"===typeof e?e:vega_scenegraph_src_path_rectangle_constant(+e),rectangle):r},rectangle.cornerRadius=function(e){return arguments.length?(i="function"===typeof e?e:vega_scenegraph_src_path_rectangle_constant(+e),rectangle):i},rectangle.context=function(e){return arguments.length?(a=null==e?null:e,rectangle):a},rectangle}().x(vega_scenegraph_src_path_shapes_x).y(vega_scenegraph_src_path_shapes_y).width((function vega_scenegraph_src_path_shapes_w(e){return e.width||0})).height((function vega_scenegraph_src_path_shapes_h(e){return e.height||0})).cornerRadius(vega_scenegraph_src_path_shapes_cr),My=Lr().type((function vega_scenegraph_src_path_shapes_type(e){return vega_scenegraph_src_path_symbols_symbols(e.shape||"circle")})).size((function vega_scenegraph_src_path_shapes_size(e){return null==e.size?64:e.size})),jy=function(){var e,t,n,r,i,a,o,s,u=null;function point(e,t,n){var r=n/2;if(i){var l=o-t,c=e-a;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(a-d,o-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(a+d,o+h),u.arc(a,o,s,p,p+Math.PI)}else u.arc(e,t,r,0,yy);u.closePath()}else i=1;a=e,o=t,s=r}function trail(a){var o,s,l,c=a.length,f=!1;for(null==u&&(u=l=yr()),o=0;o<=c;++o)!(o<c&&r(s=a[o],o,a))===f&&(f=!f)&&(i=0),f&&point(+e(s,o,a),+t(s,o,a),+n(s,o,a));if(l)return u=null,l+""||null}return trail.x=function(t){return arguments.length?(e=t,trail):e},trail.y=function(e){return arguments.length?(t=e,trail):t},trail.size=function(e){return arguments.length?(n=e,trail):n},trail.defined=function(e){return arguments.length?(r=e,trail):r},trail.context=function(e){return arguments.length?(u=null==e?null:e,trail):u},trail}().x(vega_scenegraph_src_path_shapes_x).y(vega_scenegraph_src_path_shapes_y).defined(vega_scenegraph_src_path_shapes_def).size((function src_path_shapes_ts(e){return e.size||1}));function vega_scenegraph_src_path_shapes_rectangle(e,t,n,r){return Py.context(e)(t,n,r)}var Fy,Iy=function(e,t){return t.stroke&&0!==t.opacity&&0!==t.strokeOpacity&&e.expand(null!=t.strokeWidth?+t.strokeWidth:1),e},Ly=yy-1e-8;function vega_scenegraph_src_bound_boundContext_context(e){return Fy=e,vega_scenegraph_src_bound_boundContext_context}function vega_scenegraph_src_bound_boundContext_noop(){}function vega_scenegraph_src_bound_boundContext_add(e,t){Fy.add(e,t)}vega_scenegraph_src_bound_boundContext_context.beginPath=vega_scenegraph_src_bound_boundContext_noop,vega_scenegraph_src_bound_boundContext_context.closePath=vega_scenegraph_src_bound_boundContext_noop,vega_scenegraph_src_bound_boundContext_context.moveTo=vega_scenegraph_src_bound_boundContext_add,vega_scenegraph_src_bound_boundContext_context.lineTo=vega_scenegraph_src_bound_boundContext_add,vega_scenegraph_src_bound_boundContext_context.rect=function(e,t,n,r){vega_scenegraph_src_bound_boundContext_add(e,t),vega_scenegraph_src_bound_boundContext_add(e+n,t+r)},vega_scenegraph_src_bound_boundContext_context.quadraticCurveTo=function(e,t,n,r){vega_scenegraph_src_bound_boundContext_add(e,t),vega_scenegraph_src_bound_boundContext_add(n,r)},vega_scenegraph_src_bound_boundContext_context.bezierCurveTo=function(e,t,n,r,i,a){vega_scenegraph_src_bound_boundContext_add(e,t),vega_scenegraph_src_bound_boundContext_add(n,r),vega_scenegraph_src_bound_boundContext_add(i,a)},vega_scenegraph_src_bound_boundContext_context.arc=function(e,t,n,r,i,a){if(Math.abs(i-r)>Ly)return vega_scenegraph_src_bound_boundContext_add(e-n,t-n),void vega_scenegraph_src_bound_boundContext_add(e+n,t+n);var o,s,u,l,c=1/0,f=-1/0,d=1/0,h=-1/0;function update(e){u=n*Math.cos(e),l=n*Math.sin(e),u<c&&(c=u),u>f&&(f=u),l<d&&(d=l),l>h&&(h=l)}if(update(r),update(i),i!==r)if((r%=yy)<0&&(r+=yy),(i%=yy)<0&&(i+=yy),i<r&&(a=!a,o=r,r=i,i=o),a)for(i-=yy,o=r-r%vy,s=0;s<4&&o>i;++s,o-=vy)update(o);else for(o=r-r%vy+vy,s=0;s<4&&o<i;++s,o+=vy)update(o);vega_scenegraph_src_bound_boundContext_add(e+c,t+d),vega_scenegraph_src_bound_boundContext_add(e+f,t+h)};var Ny=(Ny=domCanvas(1,1))?Ny.getContext("2d"):null,By=new vega_scenegraph_src_Bounds_Bounds;function src_util_intersect_intersectPath(e){return function(t,n){if(!Ny)return!0;e(Ny,t),By.clear().union(t.bounds).intersect(n).round();for(var r=By.x1,i=By.y1,a=By.x2,o=By.y2,s=i;s<=o;++s)for(var u=r;u<=a;++u)if(Ny.isPointInPath(u,s))return!0;return!1}}function src_util_intersect_intersectPoint(e,t){return t.contains(e.x||0,e.y||0)}function src_util_intersect_intersectRect(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return t.intersects(By.set(n,r,n+i,r+a))}function src_util_intersect_intersectBoxLine(e,t,n,r,i){var a,o,s,u,l=e.x1,c=e.y1,f=e.x2,d=e.y2,h=r-t,p=i-n,g=0,m=1;for(u=0;u<4;++u){if(0===u&&(a=-h,o=-(l-t)),1===u&&(a=h,o=f-t),2===u&&(a=-p,o=-(c-n)),3===u&&(a=p,o=d-n),Math.abs(a)<1e-10&&o<0)return!1;if(s=o/a,a<0){if(s>m)return!1;s>g&&(g=s)}else if(a>0){if(s<g)return!1;s<m&&(m=s)}}return!0}var Uy=function(e,t,n){return vega_scenegraph_src_Gradient_isGradient(n)?function(e,t,n){for(var r=n.width(),i=n.height(),a=t.stops,o=a.length,s="radial"===t.gradient?e.createRadialGradient(n.x1+(t.x1||.5)*r,n.y1+(t.y1||.5)*i,Math.max(r,i)*(t.r1||0),n.x1+(t.x2||.5)*r,n.y1+(t.y2||.5)*i,Math.max(r,i)*(t.r2||.5)):e.createLinearGradient(n.x1+(t.x1||0)*r,n.y1+(t.y1||0)*i,n.x1+(t.x2||1)*r,n.y1+(t.y2||0)*i),u=0;u<o;++u)s.addColorStop(a[u].offset,a[u].color);return s}(e,n,t.bounds):n},zy=function(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=Uy(e,t,t.fill),!0)},qy=[],Wy=function(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=Uy(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||qy),e.lineDashOffset=t.strokeDashOffset||0),!0))};function vega_scenegraph_src_util_visit_compare(e,t){return e.zindex-t.zindex||e.index-t.index}function src_util_visit_zorder(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,a=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&a.push(t);return e.zdirty=!1,e.zitems=a.sort(vega_scenegraph_src_util_visit_compare)}function vega_scenegraph_src_util_visit_visit(e,t){var n,r,i=e.items;if(i&&i.length){var a=src_util_visit_zorder(e);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=a}for(n=0,r=i.length;n<r;++n)t(i[n])}}function src_util_visit_pickVisit(e,t){var n,r,i=e.items;if(!i||!i.length)return null;var a=src_util_visit_zorder(e);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===a)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function util_canvas_draw_drawAll(e){return function(t,n,r){vega_scenegraph_src_util_visit_visit(n,(function(n){r&&!r.intersects(n.bounds)||util_canvas_draw_drawPath(e,t,n,n)}))}}function util_canvas_draw_drawPath(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(n.fill&&zy(t,n,i)&&t.fill(),n.stroke&&Wy(t,n,i)&&t.stroke()))}function src_util_canvas_pick_pick(e){return e=e||V.eb,function(t,n,r,i,a,o){return r*=t.pixelRatio,i*=t.pixelRatio,src_util_visit_pickVisit(n,(function(n){var s=n.bounds;if((!s||s.contains(a,o))&&s)return e(t,n,r,i,a,o)?n:void 0}))}}function util_canvas_pick_hitPath(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function util_canvas_pick_pickPath(e){return src_util_canvas_pick_pick(util_canvas_pick_hitPath(e))}function src_util_svg_transform_translate(e,t){return"translate("+e+","+t+")"}function src_util_svg_transform_rotate(e){return"rotate("+e+")"}function util_svg_transform_translateItem(e){return src_util_svg_transform_translate(e.x||0,e.y||0)}var Gy=function(e,t,n){function draw(e,n){var r=n.x||0,i=n.y||0,a=n.angle||0;e.translate(r,i),a&&e.rotate(a*=my),e.beginPath(),t(e,n),a&&e.rotate(-a),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function attr(e,n){e("transform",function util_svg_transform_transformItem(e){return src_util_svg_transform_translate(e.x||0,e.y||0)+(e.angle?" "+src_util_svg_transform_rotate(e.angle):"")}(n)),e("d",t(null,n))},bound:function bound(e,n){var r=n.x||0,i=n.y||0;return t(vega_scenegraph_src_bound_boundContext_context(e),n),Iy(e,n).translate(r,i),n.angle&&e.rotate(n.angle*my,r,i),e},draw:util_canvas_draw_drawAll(draw),pick:util_canvas_pick_pickPath(draw),isect:n||src_util_intersect_intersectPath(draw)}},Hy=Gy("arc",(function vega_scenegraph_src_path_shapes_arc(e,t){return Oy.context(e)(t)}));var Vy=function(e,t,n){function draw(e,n){e.beginPath(),t(e,n)}var r,i=util_canvas_pick_hitPath(draw);return{type:e,tag:"path",nested:!0,attr:function attr(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function bound(e,n){var r=n.items;return 0===r.length?e:(t(vega_scenegraph_src_bound_boundContext_context(e),r),Iy(e,r[0]))},draw:(r=draw,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||util_canvas_draw_drawPath(r,e,t.items[0],t.items)}),pick:function pick(e,t,n,r,a,o){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(a,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:src_util_intersect_intersectPoint,tip:n}},Yy=Vy("area",(function vega_scenegraph_src_path_shapes_area(e,t){var n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Ry:Ay).curve(src_path_curves_curves(r,n.orient,n.tension)).context(e)(t)}),(function src_util_pickPath_pickArea(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],a="horizontal"===e[0].orient?"y":"x",o=e.length,s=1/0;--o>=0;)!1!==e[o].defined&&(r=Math.abs(e[o][a]-i))<s&&(s=r,n=e[o]);return n})),$y=1;var Xy=function(e,t,n){var r=t.clip,i=e._defs,a=t.clip_id||(t.clip_id="clip"+$y++),o=i.clipping[a]||(i.clipping[a]={id:a});return Object(V.D)(r)?o.path=r(null):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"},Ky=.5;function src_marks_group_backgroundPath(e,t){var n=t.stroke?Ky:0;e.beginPath(),vega_scenegraph_src_path_shapes_rectangle(e,t,n,n)}var Jy=util_canvas_pick_hitPath(src_marks_group_backgroundPath);var Zy={type:"group",tag:"g",nested:!1,attr:function vega_scenegraph_src_marks_group_attr(e,t){e("transform",util_svg_transform_translateItem(t))},bound:function vega_scenegraph_src_marks_group_bound(e,t){if(!t.clip&&t.items)for(var n=t.items,r=0,i=n.length;r<i;++r)e.union(n[r].bounds);return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Iy(e,t),e.translate(t.x||0,t.y||0)},draw:function vega_scenegraph_src_marks_group_draw(e,t,n){var r=this;vega_scenegraph_src_util_visit_visit(t,(function(t){var i,a=t.x||0,o=t.y||0,s=t.width||0,u=t.height||0;e.save(),e.translate(a,o),(t.stroke||t.fill)&&(i=null==t.opacity?1:t.opacity)>0&&(src_marks_group_backgroundPath(e,t),t.fill&&zy(e,t,i)&&e.fill(),t.stroke&&Wy(e,t,i)&&e.stroke()),t.clip&&(e.beginPath(),e.rect(0,0,s,u),e.clip()),n&&n.translate(-a,-o),vega_scenegraph_src_util_visit_visit(t,(function(t){r.draw(e,t,n)})),n&&n.translate(a,o),e.restore()}))},pick:function vega_scenegraph_src_marks_group_pick(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a)||!t.items)return null;var o=this,s=n*e.pixelRatio,u=r*e.pixelRatio;return src_util_visit_pickVisit(t,(function(l){var c,f,d,h;if(!(h=l.bounds)||h.contains(i,a))return f=l.x||0,d=l.y||0,e.save(),e.translate(f,d),f=i-f,d=a-d,!(c=src_util_visit_pickVisit(l,(function(e){return function src_marks_group_pickMark(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,f,d)?o.pick(e,n,r,f,d):null})))&&!1!==t.interactive&&(l.fill||l.stroke)&&Jy(e,l,s,u)&&(c=l),e.restore(),c||null}))},isect:src_util_intersect_intersectRect,background:function src_marks_group_background(e,t){var n=t.stroke?Ky:0;e("class","background"),e("d",vega_scenegraph_src_path_shapes_rectangle(null,t,n,n))},foreground:function src_marks_group_foreground(e,t,n){e("clip-path",t.clip?Xy(n,t,t):null)}};function src_marks_image_getImage(e,t){var n=e.image;return n&&n.url===e.url||(n={loaded:!1,width:0,height:0},t.loadImage(e.url).then((function(t){e.image=t,e.image.url=e.url}))),n}function src_marks_image_imageXOffset(e,t){return"center"===e?t/2:"right"===e?t:0}function src_marks_image_imageYOffset(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var Qy={type:"image",tag:"image",nested:!1,attr:function vega_scenegraph_src_marks_image_attr(e,t,n){var r=src_marks_image_getImage(t,n),i=t.x||0,a=t.y||0,o=(null!=t.width?t.width:r.width)||0,s=(null!=t.height?t.height:r.height)||0,u=!1===t.aspect?"none":"xMidYMid";i-=src_marks_image_imageXOffset(t.align,o),a-=src_marks_image_imageYOffset(t.baseline,s),e("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),e("transform",src_util_svg_transform_translate(i,a)),e("width",o),e("height",s),e("preserveAspectRatio",u)},bound:function vega_scenegraph_src_marks_image_bound(e,t){var n=t.image,r=t.x||0,i=t.y||0,a=(null!=t.width?t.width:n&&n.width)||0,o=(null!=t.height?t.height:n&&n.height)||0;return r-=src_marks_image_imageXOffset(t.align,a),i-=src_marks_image_imageYOffset(t.baseline,o),e.set(r,i,r+a,i+o)},draw:function vega_scenegraph_src_marks_image_draw(e,t,n){var r=this;vega_scenegraph_src_util_visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var i,a,o,s,u=src_marks_image_getImage(t,r),l=t.x||0,c=t.y||0,f=(null!=t.width?t.width:u.width)||0,d=(null!=t.height?t.height:u.height)||0;l-=src_marks_image_imageXOffset(t.align,f),c-=src_marks_image_imageYOffset(t.baseline,d),!1!==t.aspect&&(a=u.width/u.height,o=t.width/t.height,a===a&&o===o&&a!==o&&(o<a?(c+=(d-(s=f/a))/2,d=s):(l+=(f-(s=d*a))/2,f=s))),u.loaded&&(e.globalAlpha=null!=(i=t.opacity)?i:1,e.drawImage(u,l,c,f,d))}}))},pick:src_util_canvas_pick_pick(),isect:V.eb,get:src_marks_image_getImage,xOffset:src_marks_image_imageXOffset,yOffset:src_marks_image_imageYOffset},e_=Vy("line",(function vega_scenegraph_src_path_shapes_line(e,t){var n=t[0],r=n.interpolate||"linear";return Dy.curve(src_path_curves_curves(r,n.orient,n.tension)).context(e)(t)}),(function src_util_pickPath_pickLine(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),a=e.length;--a>=0;)if(!1!==e[a].defined&&(n=e[a].x-t[0])*n+(r=e[a].y-t[1])*r<i)return e[a];return null}));function node_modules_vega_scenegraph_src_marks_path_path(e,t){var n=t.path;if(null==n)return!0;var r=t.pathCache;r&&r.path===n||((t.pathCache=r=gy(n)).path=n),Ey(e,r,t.x,t.y)}var t_={type:"path",tag:"path",nested:!1,attr:function vega_scenegraph_src_marks_path_attr(e,t){e("transform",util_svg_transform_translateItem(t)),e("d",t.path)},bound:function vega_scenegraph_src_marks_path_bound(e,t){return node_modules_vega_scenegraph_src_marks_path_path(vega_scenegraph_src_bound_boundContext_context(e),t)?e.set(0,0,0,0):Iy(e,t)},draw:util_canvas_draw_drawAll(node_modules_vega_scenegraph_src_marks_path_path),pick:util_canvas_pick_pickPath(node_modules_vega_scenegraph_src_marks_path_path),isect:src_util_intersect_intersectPath(node_modules_vega_scenegraph_src_marks_path_path)};function vega_scenegraph_src_marks_rect_draw(e,t){e.beginPath(),vega_scenegraph_src_path_shapes_rectangle(e,t)}var n_={type:"rect",tag:"path",nested:!1,attr:function vega_scenegraph_src_marks_rect_attr(e,t){e("d",vega_scenegraph_src_path_shapes_rectangle(null,t))},bound:function vega_scenegraph_src_marks_rect_bound(e,t){var n,r;return Iy(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:util_canvas_draw_drawAll(vega_scenegraph_src_marks_rect_draw),pick:util_canvas_pick_pickPath(vega_scenegraph_src_marks_rect_draw),isect:src_util_intersect_intersectRect};function vega_scenegraph_src_marks_rule_path(e,t,n){var r,i,a,o;return!(!t.stroke||!Wy(e,t,n))&&(r=t.x||0,i=t.y||0,a=null!=t.x2?t.x2:r,o=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(a,o),!0)}var r_,i_={type:"rule",tag:"line",nested:!1,attr:function vega_scenegraph_src_marks_rule_attr(e,t){e("transform",util_svg_transform_translateItem(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function vega_scenegraph_src_marks_rule_bound(e,t){var n,r;return Iy(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function vega_scenegraph_src_marks_rule_draw(e,t,n){vega_scenegraph_src_util_visit_visit(t,(function(t){if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&vega_scenegraph_src_marks_rule_path(e,t,r)&&e.stroke()}}))},pick:src_util_canvas_pick_pick((function vega_scenegraph_src_marks_rule_hit(e,t,n,r){return!!e.isPointInStroke&&(vega_scenegraph_src_marks_rule_path(e,t,1)&&e.isPointInStroke(n,r))})),isect:function src_util_intersect_intersectRule(e,t){var n=e.x||0,r=e.y||0;return src_util_intersect_intersectBoxLine(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}},a_=Gy("shape",(function vega_scenegraph_src_path_shapes_shape(e,t){return(t.mark.shape||t.shape).context(e)(t)})),o_=Gy("symbol",(function vega_scenegraph_src_path_shapes_symbol(e,t){return My.context(e)(t)}),src_util_intersect_intersectPoint),s_={height:vega_scenegraph_src_util_text_fontSize,measureWidth:src_util_text_measureWidth,estimateWidth:src_util_text_estimateWidth,width:src_util_text_estimateWidth,canvas:src_util_text_useCanvas};function src_util_text_estimateWidth(e){return r_=vega_scenegraph_src_util_text_fontSize(e),src_util_text_estimate(src_util_text_textValue(e))}function src_util_text_estimate(e){return~~(.8*e.length*r_)}function src_util_text_measureWidth(e){return vega_scenegraph_src_util_text_fontSize(e)<=0?0:(Ny.font=vega_scenegraph_src_util_text_font(e),vega_scenegraph_src_util_text_measure(src_util_text_textValue(e)))}function vega_scenegraph_src_util_text_measure(e){return Ny.measureText(e).width}function vega_scenegraph_src_util_text_fontSize(e){return null!=e.fontSize?e.fontSize:11}function src_util_text_useCanvas(e){s_.width=e&&Ny?src_util_text_measureWidth:src_util_text_estimateWidth}function src_util_text_textValue(e){var t=e.text;return null==t?"":e.limit>0?function src_util_text_truncate(e){var t,n=+e.limit,r=e.text+"";s_.width===src_util_text_measureWidth?(Ny.font=vega_scenegraph_src_util_text_font(e),t=vega_scenegraph_src_util_text_measure):(r_=vega_scenegraph_src_util_text_fontSize(e),t=src_util_text_estimate);if(t(r)<n)return r;var i,a=e.ellipsis||"\u2026",o="rtl"===e.dir,s=0,u=r.length;if(n-=t(a),o){for(;s<u;)i=s+u>>>1,t(r.slice(i))>n?s=i+1:u=i;return a+r.slice(s)}for(;s<u;)i=1+(s+u>>>1),t(r.slice(0,i))<n?s=i:u=i-1;return r.slice(0,s)+a}(e):t+""}function src_util_text_fontFamily(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function vega_scenegraph_src_util_text_font(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+vega_scenegraph_src_util_text_fontSize(e)+"px "+src_util_text_fontFamily(e,t)}function vega_scenegraph_src_util_text_offset(e){var t=e.baseline,n=vega_scenegraph_src_util_text_fontSize(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}src_util_text_useCanvas(!0);var u_={left:"start",center:"middle",right:"end"},l_=new vega_scenegraph_src_Bounds_Bounds;function src_marks_text_anchorPoint(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-vy,n+=i*Math.cos(t),r+=i*Math.sin(t)),l_.x1=n,l_.y1=r,l_}function vega_scenegraph_src_marks_text_bound(e,t,n){var r,i=s_.height(t),a=t.align,o=src_marks_text_anchorPoint(t),s=o.x1,u=o.y1,l=t.dx||0,c=(t.dy||0)+vega_scenegraph_src_util_text_offset(t)-Math.round(.8*i);if(r=s_.width(t),"center"===a?l-=r/2:"right"===a&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*my,s,u);else if(2===n)return e.rotatedPoints(t.angle*my,s,u);return e}var c_={arc:Hy,area:Yy,group:Zy,image:Qy,line:e_,path:t_,rect:n_,rule:i_,shape:a_,symbol:o_,text:{type:"text",tag:"text",nested:!1,attr:function vega_scenegraph_src_marks_text_attr(e,t){var n,r=t.dx||0,i=(t.dy||0)+vega_scenegraph_src_util_text_offset(t),a=src_marks_text_anchorPoint(t),o=a.x1,s=a.y1,u=t.angle||0;e("text-anchor",u_[t.align]||"start"),u?(n=src_util_svg_transform_translate(o,s)+" "+src_util_svg_transform_rotate(u),(r||i)&&(n+=" "+src_util_svg_transform_translate(r,i))):n=src_util_svg_transform_translate(o+r,s+i),e("transform",n)},bound:vega_scenegraph_src_marks_text_bound,draw:function vega_scenegraph_src_marks_text_draw(e,t,n){vega_scenegraph_src_util_visit_visit(t,(function(t){var r,i,a,o,s;n&&!n.intersects(t.bounds)||(s=src_util_text_textValue(t))&&(0===(r=null==t.opacity?1:t.opacity)||t.fontSize<=0||(e.font=vega_scenegraph_src_util_text_font(t),e.textAlign=t.align||"left",a=(i=src_marks_text_anchorPoint(t)).x1,o=i.y1,t.angle&&(e.save(),e.translate(a,o),e.rotate(t.angle*my),a=o=0),a+=t.dx||0,o+=(t.dy||0)+vega_scenegraph_src_util_text_offset(t),t.fill&&zy(e,t,r)&&e.fillText(s,a,o),t.stroke&&Wy(e,t,r)&&e.strokeText(s,a,o),t.angle&&e.restore()))}))},pick:src_util_canvas_pick_pick((function vega_scenegraph_src_marks_text_hit(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=src_marks_text_anchorPoint(t),s=o.x1,u=o.y1,l=vega_scenegraph_src_marks_text_bound(l_,t,1),c=-t.angle*my,f=Math.cos(c),d=Math.sin(c),h=f*i-d*a+(s-f*s+d*u),p=d*i+f*a+(u-d*s-f*u);return l.contains(h,p)})),isect:function src_marks_text_intersectText(e,t){var n=vega_scenegraph_src_marks_text_bound(l_,e,2);return src_util_intersect_intersectBoxLine(t,n[0],n[1],n[2],n[3])||src_util_intersect_intersectBoxLine(t,n[0],n[1],n[4],n[5])||src_util_intersect_intersectBoxLine(t,n[4],n[5],n[6],n[7])||src_util_intersect_intersectBoxLine(t,n[2],n[3],n[6],n[7])}},trail:Vy("trail",(function vega_scenegraph_src_path_shapes_trail(e,t){return jy.context(e)(t)}),(function src_util_pickPath_pickTrail(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))},f_=function(e,t,n){var r=c_[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new vega_scenegraph_src_Bounds_Bounds),e,n)},d_={mark:null},h_=function(e,t,n){var r,i,a,o,s=c_[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?a=l[0]:(d_.mark=e,a=d_),o=f_(a,u,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new vega_scenegraph_src_Bounds_Bounds,c)for(r=0,i=l.length;r<i;++r)t.union(f_(l[r],u,n));return e.bounds=t},p_=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function src_util_serialize_sceneFromJSON(e){return function vega_scenegraph_src_util_serialize_initialize(e){var t,n,r,i=e.marktype,a=e.items;if(a)for(n=0,r=a.length;n<r;++n)t=i?"mark":"group",a[n][t]=e,a[n].zindex&&(a[n][t].zdirty=!0),"group"===(i||t)&&vega_scenegraph_src_util_serialize_initialize(a[n]);i&&h_(e);return e}("string"===typeof e?JSON.parse(e):e)}var g_=function vega_scenegraph_src_Scenegraph_Scenegraph(e){arguments.length?this.root=src_util_serialize_sceneFromJSON(e):(this.root=vega_scenegraph_src_Scenegraph_createMark({marktype:"group",name:"root",role:"frame"}),this.root.items=[new vega_scenegraph_src_GroupItem_GroupItem(this.root)])}.prototype;function vega_scenegraph_src_Scenegraph_createMark(e,t){return{bounds:new vega_scenegraph_src_Bounds_Bounds,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0}}function src_util_dom_domCreate(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function src_util_dom_domFind(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function src_util_dom_domChild(e,t,n,r){var i,a=e.childNodes[t];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=src_util_dom_domCreate(e.ownerDocument,n,r),e.insertBefore(a,i)),a}function src_util_dom_domClear(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function src_util_dom_cssClass(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}g_.toJSON=function(e){return function src_util_serialize_sceneToJSON(e,t){return JSON.stringify(e,p_,t)}(this.root,e||0)},g_.mark=function(e,t,n){var r=vega_scenegraph_src_Scenegraph_createMark(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var m_=function(e,t){var n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]};function node_modules_vega_scenegraph_src_Handler_Handler(e,t){this._active=null,this._handlers={},this._loader=e||cy(),this._tooltip=t||vega_scenegraph_src_Handler_defaultTooltip}function vega_scenegraph_src_Handler_defaultTooltip(e,t,n,r){e.element().setAttribute("title",r||"")}var v_=node_modules_vega_scenegraph_src_Handler_Handler.prototype;function node_modules_vega_scenegraph_src_Renderer_Renderer(e){this._el=null,this._bgcolor=null,this._loader=new vega_scenegraph_src_ResourceLoader_ResourceLoader(e)}v_.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},v_.element=function(){return this._el},v_.canvas=function(){return this._el&&this._el.firstChild},v_.origin=function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},v_.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},v_.on=function(){},v_.off=function(){},v_._handlerIndex=function(e,t,n){for(var r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},v_.handlers=function(e){var t,n=this._handlers,r=[];if(e)r.push.apply(r,n[this.eventName(e)]);else for(t in n)r.push.apply(r,n[t]);return r},v_.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)},v_.handleHref=function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((function(t){var n=new MouseEvent(e.type,e),r=src_util_dom_domCreate(null,"a");for(var i in t)r.setAttribute(i,t[i]);r.dispatchEvent(n)})).catch((function(){}))},v_.handleTooltip=function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,a,o=e&&e.mark;if(o&&(i=c_[o.marktype]).tip){for((a=m_(t,n))[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=i.tip(o.items,a)}return e}(t,e,this.canvas(),this._origin);var r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},v_.getItemBoundingClientRect=function(e){if(t=this.canvas()){for(var t,n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,a=i.x1+r[0]+n.left,o=i.y1+r[1]+n.top,s=i.width(),u=i.height();e.mark&&(e=e.mark.group);)a+=e.x||0,o+=e.y||0;return{x:a,y:o,width:s,height:u,left:a,top:o,right:a+s,bottom:o+u}}};var y_=node_modules_vega_scenegraph_src_Renderer_Renderer.prototype;y_.initialize=function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},y_.element=function(){return this._el},y_.canvas=function(){return this._el&&this._el.firstChild},y_.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},y_.resize=function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},y_.dirty=function(){},y_.render=function(e){var t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},y_._render=function(){},y_.renderAsync=function(e){var t=this.render(e);return this._ready?this._ready.then((function(){return t})):Promise.resolve(t)},y_._load=function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then((function(e){e&&i(),n._ready=null}))}return r},y_.sanitizeURL=function(e){return this._load("sanitizeURL",e)},y_.loadImage=function(e){return this._load("loadImage",e)};var __="mouseout";function vega_scenegraph_src_CanvasHandler_CanvasHandler(e,t){node_modules_vega_scenegraph_src_Handler_Handler.call(this,e,t),this._down=null,this._touch=null,this._first=!0}var b_=Object(V.y)(vega_scenegraph_src_CanvasHandler_CanvasHandler,node_modules_vega_scenegraph_src_Handler_Handler);function vega_scenegraph_src_CanvasHandler_move(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(e,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(t,r),this.fire(e,r))}}function vega_scenegraph_src_CanvasHandler_inactive(e){return function(t){this.fire(e,t),this._active=null}}b_.initialize=function(e,t,n){var r=this._canvas=e&&src_util_dom_domFind(e,"canvas");if(r){var i=this;this.events.forEach((function(e){r.addEventListener(e,(function(t){b_[e]?b_[e].call(i,t):i.fire(e,t)}))}))}return node_modules_vega_scenegraph_src_Handler_Handler.prototype.initialize.call(this,e,t,n)},b_.canvas=function(){return this._canvas},b_.context=function(){return this._canvas.getContext("2d")},b_.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],b_.DOMMouseScroll=function(e){this.fire("mousewheel",e)},b_.mousemove=vega_scenegraph_src_CanvasHandler_move("mousemove","mouseover","mouseout"),b_.dragover=vega_scenegraph_src_CanvasHandler_move("dragover","dragenter","dragleave"),b_.mouseout=vega_scenegraph_src_CanvasHandler_inactive("mouseout"),b_.dragleave=vega_scenegraph_src_CanvasHandler_inactive("dragleave"),b_.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},b_.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},b_.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},b_.touchmove=function(e){this.fire("touchmove",e,!0)},b_.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},b_.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(t.vegaType=e,"click"===e&&a&&a.href?this.handleHref(t,a,a.href):"mousemove"!==e&&e!==__||this.handleTooltip(t,a,e!==__),o)for(r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,t,a)},b_.on=function(e,t){var n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(r[n]||(r[n]=[])).push({type:e,handler:t}),this},b_.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},b_.pickEvent=function(e){var t=m_(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},b_.pick=function(e,t,n,r,i){var a=this.context();return c_[e.marktype].pick.call(this,a,e,t,n,r,i)};var x_=function util_canvas_resize_devicePixelRatio(){return"undefined"!==typeof window&&window.devicePixelRatio||1}();function vega_scenegraph_src_CanvasRenderer_CanvasRenderer(e){node_modules_vega_scenegraph_src_Renderer_Renderer.call(this,e),this._redraw=!1,this._dirty=new vega_scenegraph_src_Bounds_Bounds}var w_=Object(V.y)(vega_scenegraph_src_CanvasRenderer_CanvasRenderer,node_modules_vega_scenegraph_src_Renderer_Renderer),k_=node_modules_vega_scenegraph_src_Renderer_Renderer.prototype,S_=new vega_scenegraph_src_Bounds_Bounds;function vega_scenegraph_src_SVGHandler_SVGHandler(e,t){node_modules_vega_scenegraph_src_Handler_Handler.call(this,e,t);var n=this;n._hrefHandler=vega_scenegraph_src_SVGHandler_listener(n,(function(e,t){t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=vega_scenegraph_src_SVGHandler_listener(n,(function(e,t){n.handleTooltip(e,t,e.type!==__)}))}w_.initialize=function(e,t,n,r,i,a){return this._options=a,this._canvas=domCanvas(1,1,a&&a.type),e&&(src_util_dom_domClear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),k_.initialize.call(this,e,t,n,r,i)},w_.resize=function(e,t,n,r){return k_.resize.call(this,e,t,n,r),function(e,t,n,r,i,a){var o,s="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,u=e.getContext("2d"),l=s?x_:i;for(o in e.width=t*l,e.height=n*l,a)u[o]=a[o];s&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=l,u.setTransform(l,0,0,l,l*r[0],l*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options&&this._options.context),this._redraw=!0,this},w_.canvas=function(){return this._canvas},w_.context=function(){return this._canvas?this._canvas.getContext("2d"):null},w_.dirty=function(e){var t=function node_modules_vega_scenegraph_src_CanvasRenderer_translate(e,t){if(null==t)return e;for(var n=S_.clear().union(e);null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}(e.bounds,e.mark.group);this._dirty.union(t)},w_._render=function(e){var t=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return t.save(),this._redraw||a.empty()?(this._redraw=!1,a=null):a=function vega_scenegraph_src_CanvasRenderer_clipToBounds(e,t,n){return t.expand(1).round(),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a,n),this.clear(-n[0],-n[1],r,i),this.draw(t,e,a),t.restore(),this._dirty.clear(),this},w_.draw=function(e,t,n){var r=c_[t.marktype];t.clip&&function(e,t){var n=t.clip;if(e.save(),e.beginPath(),Object(V.D)(n))n(e);else{var r=t.group;e.rect(0,0,r.width||0,r.height||0)}e.clip()}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},w_.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))};var E_=Object(V.y)(vega_scenegraph_src_SVGHandler_SVGHandler,node_modules_vega_scenegraph_src_Handler_Handler);function vega_scenegraph_src_SVGHandler_listener(e,t){return function(n){var r=n.target.__data__;n.vegaType=n.type,r=Array.isArray(r)?r[0]:r,t.call(e._obj,n,r)}}function src_util_tags_openTag(e,t,n){var r,i,a="<"+e;if(t)for(r in t)null!=(i=t[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function src_util_tags_closeTag(e){return"</"+e+">"}E_.initialize=function(e,t,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mousemove",this._tooltipHandler),r.removeEventListener(__,this._tooltipHandler)),this._svg=r=e&&src_util_dom_domFind(e,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mousemove",this._tooltipHandler),r.addEventListener(__,this._tooltipHandler)),node_modules_vega_scenegraph_src_Handler_Handler.prototype.initialize.call(this,e,t,n)},E_.canvas=function(){return this._svg},E_.on=function(e,t){var n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){var i={type:e,handler:t,listener:vega_scenegraph_src_SVGHandler_listener(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},E_.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this};var T_={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},C_={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},O_=Object.keys(C_),A_=T_.xmlns;function vega_scenegraph_src_SVGRenderer_SVGRenderer(e){node_modules_vega_scenegraph_src_Renderer_Renderer.call(this,e),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}var R_=Object(V.y)(vega_scenegraph_src_SVGRenderer_SVGRenderer,node_modules_vega_scenegraph_src_Renderer_Renderer),D_=node_modules_vega_scenegraph_src_Renderer_Renderer.prototype;function vega_scenegraph_src_SVGRenderer_updateGradient(e,t,n){var r,i,a;if("radial"===t.gradient){var o=src_util_dom_domChild(e,n++,"pattern",A_);o.setAttribute("id",ry+t.id),o.setAttribute("viewBox","0,0,1,1"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("preserveAspectRatio","xMidYMid slice"),(o=src_util_dom_domChild(o,0,"rect",A_)).setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("fill","url("+node_modules_vega_scenegraph_src_SVGRenderer_href()+"#"+t.id+")"),(e=src_util_dom_domChild(e,n++,"radialGradient",A_)).setAttribute("id",t.id),e.setAttribute("fx",t.x1),e.setAttribute("fy",t.y1),e.setAttribute("fr",t.r1),e.setAttribute("cx",t.x2),e.setAttribute("cy",t.y2),e.setAttribute("r",t.r2)}else(e=src_util_dom_domChild(e,n++,"linearGradient",A_)).setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r)(a=src_util_dom_domChild(e,r,"stop",A_)).setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);return src_util_dom_domClear(e,r),n}function vega_scenegraph_src_SVGRenderer_updateClipping(e,t,n){var r;return(e=src_util_dom_domChild(e,n,"clipPath",A_)).setAttribute("id",t.id),t.path?(r=src_util_dom_domChild(e,0,"path",A_)).setAttribute("d",t.path):((r=src_util_dom_domChild(e,0,"rect",A_)).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)),n+1}function vega_scenegraph_src_SVGRenderer_dirtyParents(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function node_modules_vega_scenegraph_src_SVGRenderer_bind(e,t,n,r,i){var a,o=e._svg;if(!o&&(o=src_util_dom_domCreate(a=t.ownerDocument,r,A_),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},"g"===r))){var s=src_util_dom_domCreate(a,"path",A_);s.setAttribute("class","background"),o.appendChild(s),s.__data__=e;var u=src_util_dom_domCreate(a,"g",A_);o.appendChild(u),u.__data__=e}return(o.ownerSVGElement!==i||function vega_scenegraph_src_SVGRenderer_hasSiblings(e){var t=e.mark||e.group;return t&&t.items.length>1}(e)&&o.previousSibling!==n)&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}R_.initialize=function(e,t,n,r){return e&&(this._svg=src_util_dom_domChild(e,0,"svg",A_),this._svg.setAttribute("class","marks"),src_util_dom_domClear(e,1),this._root=src_util_dom_domChild(this._svg,0,"g",A_),src_util_dom_domClear(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),D_.initialize.call(this,e,t,n,r)},R_.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),D_.background.apply(this,arguments)},R_.resize=function(e,t,n,r){return D_.resize.call(this,e,t,n,r),this._svg&&(this._svg.setAttribute("width",this._width*this._scale),this._svg.setAttribute("height",this._height*this._scale),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},R_.canvas=function(){return this._svg},R_.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var t in T_)e[t]=T_[t];var n=this._bgcolor?src_util_tags_openTag("rect",{width:this._width,height:this._height,style:"fill: "+this._bgcolor+";"})+src_util_tags_closeTag("rect"):"";return src_util_tags_openTag("svg",e)+n+this._svg.innerHTML+src_util_tags_closeTag("svg")},R_._render=function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e),src_util_dom_domClear(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},R_.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,i=0;for(e in n.gradient)r||(n.el=r=src_util_dom_domChild(t,0,"defs",A_)),i=vega_scenegraph_src_SVGRenderer_updateGradient(r,n.gradient[e],i);for(e in n.clipping)r||(n.el=r=src_util_dom_domChild(t,0,"defs",A_)),i=vega_scenegraph_src_SVGRenderer_updateClipping(r,n.clipping[e],i);r&&(0===i?(t.removeChild(r),n.el=null):src_util_dom_domClear(r,i))},R_._resetDefs=function(){var e=this._defs;e.gradient={},e.clipping={}},R_.dirty=function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},R_.isDirty=function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},R_._dirtyCheck=function(){this._dirtyAll=!0;var e=this._dirty;if(!e.length)return!0;var t,n,r,i,a,o,s,u=++this._dirtyID;for(a=0,o=e.length;a<o;++a)(n=(t=e[a]).mark).marktype!==r&&(r=n.marktype,i=c_[r]),n.zdirty&&n.dirty!==u&&(this._dirtyAll=!1,vega_scenegraph_src_SVGRenderer_dirtyParents(t,u),n.items.forEach((function(e){e.dirty=u}))),n.zdirty||(t.exit?(i.nested&&n.items.length?(s=n.items[0])._svg&&this._update(i,s._svg,s):t._svg&&(s=t._svg.parentNode)&&s.removeChild(t._svg),t._svg=null):(t=i.nested?n.items[0]:t)._update!==u&&(t._svg&&t._svg.ownerSVGElement?this._update(i,t._svg,t):(this._dirtyAll=!1,vega_scenegraph_src_SVGRenderer_dirtyParents(t,u)),t._update=u));return!this._dirtyAll},R_.draw=function(e,t,n){if(!this.isDirty(t))return t._svg;var r,i=this,a=this._svg,o=c_[t.marktype],s=!1===t.interactive?"none":null,u="g"===o.tag,l=null,c=0;function process(e){var t=i.isDirty(e),n=node_modules_vega_scenegraph_src_SVGRenderer_bind(e,r,l,o.tag,a);t&&(i._update(o,n,e),u&&function node_modules_vega_scenegraph_src_SVGRenderer_recurse(e,t,n){t=t.lastChild;var r,i=0;vega_scenegraph_src_util_visit_visit(n,(function(n){r=e.draw(t,n,r),++i})),src_util_dom_domClear(t,1+i)}(i,n,e)),l=n,++c}return(r=node_modules_vega_scenegraph_src_SVGRenderer_bind(t,e,n,"g",a)).setAttribute("class",src_util_dom_cssClass(t)),u||r.style.setProperty("pointer-events",s),t.clip?r.setAttribute("clip-path",Xy(i,t,t.group)):r.removeAttribute("clip-path"),o.nested?t.items.length&&process(t.items[0]):vega_scenegraph_src_util_visit_visit(t,process),src_util_dom_domClear(r,c),r};var P_=null,M_=null,j_={group:function group(e,t,n){M_=t.__values__,P_=t.childNodes[1],e.foreground(node_modules_vega_scenegraph_src_SVGRenderer_emit,n,this),P_=t.childNodes[0],e.background(node_modules_vega_scenegraph_src_SVGRenderer_emit,n,this);var r=!1===n.mark.interactive?"none":null;r!==M_.events&&(P_.style.setProperty("pointer-events",r),M_.events=r)},text:function text(e,t,n){var r;(r=src_util_text_textValue(n))!==M_.text&&(t.textContent=r,M_.text=r),vega_scenegraph_src_SVGRenderer_setStyle(t,"font-family",src_util_text_fontFamily(n)),vega_scenegraph_src_SVGRenderer_setStyle(t,"font-size",vega_scenegraph_src_util_text_fontSize(n)+"px"),vega_scenegraph_src_SVGRenderer_setStyle(t,"font-style",n.fontStyle),vega_scenegraph_src_SVGRenderer_setStyle(t,"font-variant",n.fontVariant),vega_scenegraph_src_SVGRenderer_setStyle(t,"font-weight",n.fontWeight)}};function vega_scenegraph_src_SVGRenderer_setStyle(e,t,n){n!==M_[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),M_[t]=n)}function node_modules_vega_scenegraph_src_SVGRenderer_emit(e,t,n){t!==M_[e]&&(null!=t?n?P_.setAttributeNS(n,e,t):P_.setAttribute(e,t):n?P_.removeAttributeNS(n,e):P_.removeAttribute(e),M_[e]=t)}function node_modules_vega_scenegraph_src_SVGRenderer_href(){var e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function vega_scenegraph_src_SVGStringRenderer_SVGStringRenderer(e){node_modules_vega_scenegraph_src_Renderer_Renderer.call(this,e),this._text={head:"",bg:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}R_._update=function(e,t,n){P_=t,M_=t.__values__,e.attr(node_modules_vega_scenegraph_src_SVGRenderer_emit,n,this);var r=j_[e.type];r&&r.call(this,e,t,n),this.style(P_,n)},R_.style=function(e,t){var n,r,i,a,o;if(null!=t)for(n=0,r=O_.length;n<r;++n)o=t[i=O_[n]],"font"===i&&(o=src_util_text_fontFamily(t)),o!==M_[i]&&(a=C_[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(vega_scenegraph_src_Gradient_isGradient(o)&&(o=vega_scenegraph_src_Gradient_gradientRef(o,this._defs.gradient,node_modules_vega_scenegraph_src_SVGRenderer_href())),e.style.setProperty(a,o+"")),M_[i]=o)};var F_,I_=Object(V.y)(vega_scenegraph_src_SVGStringRenderer_SVGStringRenderer,node_modules_vega_scenegraph_src_Renderer_Renderer),L_=node_modules_vega_scenegraph_src_Renderer_Renderer.prototype;function node_modules_vega_scenegraph_src_SVGStringRenderer_emit(e,t,n,r){F_[r||e]=t}function vega_scenegraph_src_SVGStringRenderer_applyStyles(e,t,n,r){if(null==e)return"";var i,a,o,s,u,l="";for("bgrect"===n&&!1===t.interactive&&(l+="pointer-events: none; "),"text"===n&&(l+="font-family: "+src_util_text_fontFamily(e)+"; ",l+="font-size: "+vega_scenegraph_src_util_text_fontSize(e)+"px; ",e.fontStyle&&(l+="font-style: "+e.fontStyle+"; "),e.fontVariant&&(l+="font-variant: "+e.fontVariant+"; "),e.fontWeight&&(l+="font-weight: "+e.fontWeight+"; ")),i=0,a=O_.length;i<a;++i)o=O_[i],s=C_[o],null==(u=e[o])?"fill"===s&&(l+="fill: none; "):"transparent"!==u||"fill"!==s&&"stroke"!==s?(vega_scenegraph_src_Gradient_isGradient(u)&&(u=vega_scenegraph_src_Gradient_gradientRef(u,r.gradient,"")),l+=s+": "+u+"; "):l+=s+": none; ";return l?'style="'+l.trim()+'"':null}I_.resize=function(e,t,n,r){L_.resize.call(this,e,t,n,r);var i=this._origin,a=this._text,o={class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 "+this._width+" "+this._height};for(var s in T_)o[s]=T_[s];a.head=src_util_tags_openTag("svg",o);var u=this._bgcolor;return"transparent"!==u&&"none"!==u||(u=null),a.bg=u?src_util_tags_openTag("rect",{width:this._width,height:this._height,style:"fill: "+u+";"})+src_util_tags_closeTag("rect"):"",a.root=src_util_tags_openTag("g",{transform:"translate("+i+")"}),a.foot=src_util_tags_closeTag("g")+src_util_tags_closeTag("svg"),this},I_.background=function(){var e=L_.background.apply(this,arguments);return arguments.length&&this._text.head&&this.resize(this._width,this._height,this._origin,this._scale),e},I_.svg=function(){var e=this._text;return e.head+e.bg+e.defs+e.root+e.body+e.foot},I_._render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},I_.buildDefs=function(){var e,t,n,r,i,a=this._defs,o="";for(t in a.gradient){for(i=(n=a.gradient[t]).stops,"radial"===n.gradient?(o+=src_util_tags_openTag(r="pattern",{id:ry+t,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o+=src_util_tags_openTag("rect",{width:"1",height:"1",fill:"url(#"+t+")"})+src_util_tags_closeTag("rect"),o+=src_util_tags_closeTag(r),o+=src_util_tags_openTag(r="radialGradient",{id:t,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})):o+=src_util_tags_openTag(r="linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<i.length;++e)o+=src_util_tags_openTag("stop",{offset:i[e].offset,"stop-color":i[e].color})+src_util_tags_closeTag("stop");o+=src_util_tags_closeTag(r)}for(t in a.clipping)n=a.clipping[t],o+=src_util_tags_openTag("clipPath",{id:t}),n.path?o+=src_util_tags_openTag("path",{d:n.path})+src_util_tags_closeTag("path"):o+=src_util_tags_openTag("rect",{x:0,y:0,width:n.width,height:n.height})+src_util_tags_closeTag("rect"),o+=src_util_tags_closeTag("clipPath");return o.length>0?src_util_tags_openTag("defs")+o+src_util_tags_closeTag("defs"):""},I_.attributes=function(e,t){return F_={},e(node_modules_vega_scenegraph_src_SVGStringRenderer_emit,t,this),F_},I_.href=function(e){var t,n=this,r=e.href;if(r){if(t=n._hrefs&&n._hrefs[r])return t;n.sanitizeURL(r).then((function(e){e["xlink:href"]=e.href,e.href=null,(n._hrefs||(n._hrefs={}))[r]=e}))}return null},I_.mark=function(e){var t,n=this,r=c_[e.marktype],i=r.tag,a=this._defs,o="";function process(s){var u=n.href(s);u&&(o+=src_util_tags_openTag("a",u)),t="g"!==i?vega_scenegraph_src_SVGStringRenderer_applyStyles(s,e,i,a):null,o+=src_util_tags_openTag(i,n.attributes(r.attr,s),t),"text"===i?o+=function vega_scenegraph_src_SVGStringRenderer_escape_text(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(src_util_text_textValue(s)):"g"===i&&(o+=src_util_tags_openTag("path",n.attributes(r.background,s),vega_scenegraph_src_SVGStringRenderer_applyStyles(s,e,"bgrect",a))+src_util_tags_closeTag("path"),o+=src_util_tags_openTag("g",n.attributes(r.foreground,s))+n.markGroup(s)+src_util_tags_closeTag("g")),o+=src_util_tags_closeTag(i),u&&(o+=src_util_tags_closeTag("a"))}return"g"!==i&&!1===e.interactive&&(t='style="pointer-events: none;"'),o+=src_util_tags_openTag("g",{class:src_util_dom_cssClass(e),"clip-path":e.clip?Xy(n,e,e.group):null},t),r.nested?e.items&&e.items.length&&process(e.items[0]):vega_scenegraph_src_util_visit_visit(e,process),o+src_util_tags_closeTag("g")},I_.markGroup=function(e){var t=this,n="";return vega_scenegraph_src_util_visit_visit(e,(function(e){n+=t.mark(e)})),n};var N_={};function vega_scenegraph_src_intersect_intersectMark(e,t,n,r){if(function vega_scenegraph_src_intersect_visitMark(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){var i=e.items,a=e.marktype,o=i.length,s=0;if("group"===a)for(;s<o;++s)vega_scenegraph_src_intersect_intersectGroup(i[s],t,n,r);else for(var u=c_[a].isect;s<o;++s){var l=i[s];vega_scenegraph_src_intersect_intersectItem(l,t,u)&&r.push(l)}}return r}function vega_scenegraph_src_intersect_intersectGroup(e,t,n,r){n&&n(e.mark)&&vega_scenegraph_src_intersect_intersectItem(e,t,c_.group.isect)&&r.push(e);var i=e.items,a=i&&i.length;if(a){var o=e.x||0,s=e.y||0;t.translate(-o,-s);for(var u=0;u<a;++u)vega_scenegraph_src_intersect_intersectMark(i[u],t,n,r);t.translate(o,s)}return r}function vega_scenegraph_src_intersect_intersectItem(e,t,n){var r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}N_.canvas=N_.png={renderer:vega_scenegraph_src_CanvasRenderer_CanvasRenderer,headless:vega_scenegraph_src_CanvasRenderer_CanvasRenderer,handler:vega_scenegraph_src_CanvasHandler_CanvasHandler},N_.svg={renderer:vega_scenegraph_src_SVGRenderer_SVGRenderer,headless:vega_scenegraph_src_SVGStringRenderer_SVGStringRenderer,handler:vega_scenegraph_src_SVGHandler_SVGHandler},N_.none={};new vega_scenegraph_src_Bounds_Bounds;function src_log_log(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function equal(e,t){return e===t||e!==e&&t!==t||(Object(V.A)(e)?!(!Object(V.A)(t)||e.length!==t.length)&&function equalArray(e,t){for(var n=0,r=e.length;n<r;++n)if(!equal(e[n],t[n]))return!1;return!0}(e,t):!(!Object(V.F)(e)||!Object(V.F)(t))&&equalObject(e,t))}function equalObject(e,t){for(var n in e)if(!equal(e[n],t[n]))return!1;return!0}function removePredicate(e){return function(t){return equalObject(e,t)}}var B_={};function tree_datum(e){return e.data}function treeNodes(e,t){var n=src_data_data.call(t,e);return n.root&&n.root.lookup||B_}var U_="undefined"!==typeof window&&window||null;var z_=":",q_="@",W_="%";function dataVisitor(e,t,n,r){t[0].type!==Gm&&Object(V.n)("First argument to data functions must be a string literal.");var i=t[0].value,a=z_+i;if(!Object(V.v)(a,r))try{r[a]=n.getData(i).tuplesRef()}catch(o){}}function scaleVisitor(e,t,n,r){if(t[0].type===Gm)addScaleDependency(n,r,t[0].value);else if(t[0].type===Vm)for(e in n.scales)addScaleDependency(n,r,e)}function addScaleDependency(e,t,n){var r=W_+n;if(!Object(V.v)(t,r))try{t[r]=e.scaleRef(n)}catch(i){}}var G_={random:function random(){return kt()},isArray:V.A,isBoolean:V.B,isDate:V.C,isDefined:function isDefined(e){return void 0!==e},isNumber:V.E,isObject:V.F,isRegExp:V.G,isString:V.H,isTuple:isTuple,isValid:function isValid(e){return null!=e&&e===e},toBoolean:V.Y,toDate:V.Z,toNumber:V.ab,toString:V.cb,flush:V.u,lerp:V.J,merge:function(){var e=[].slice.call(arguments);return e.unshift({}),V.o.apply(null,e)},pad:V.N,peek:V.S,span:V.V,inrange:V.z,truncate:V.db,rgb:color_rgb,lab:lab,hcl:hcl,hsl:hsl,sequence:pn,format:function format_format(e,t){return formatter("format",Do,t)(e)},utcFormat:function format_utcFormat(e,t){return formatter("utcFormat",rt,t)(e)},utcParse:function format_utcParse(e,t){return formatter("utcParse",it,t)(e)},timeFormat:format_timeFormat,timeParse:function format_timeParse(e,t){return formatter("timeParse",nt,t)(e)},monthFormat:function monthFormat(e){return format_time(e,1,"%B")},monthAbbrevFormat:function monthAbbrevFormat(e){return format_time(e,1,"%b")},dayFormat:function dayFormat(e){return format_time(0,2+e,"%A")},dayAbbrevFormat:function dayAbbrevFormat(e){return format_time(0,2+e,"%a")},quarter:V.T,utcquarter:V.fb,warn:function warn(){return src_log_log(this.context.dataflow,"warn",arguments)},info:function info(){return src_log_log(this.context.dataflow,"info",arguments)},debug:function debug(){return src_log_log(this.context.dataflow,"debug",arguments)},extent:V.p,inScope:function(e){var t=this.context.group,n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];var r=Object(qt.a)(e,2),i=r[0],a=r[1],o=(new vega_scenegraph_src_Bounds_Bounds).set(i[0],i[1],a[0],a[1]);return function node_modules_vega_scenegraph_src_intersect_intersect(e,t,n){var r=[],i=(new vega_scenegraph_src_Bounds_Bounds).union(t),a=e.marktype;return a?vega_scenegraph_src_intersect_intersectMark(e,i,n,r):"group"===a?vega_scenegraph_src_intersect_intersectGroup(e,i,n,r):Object(V.n)("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,o,function intersect_filter(e){var t=null;if(e){var n=Object(V.i)(e.marktype),r=Object(V.i)(e.markname);t=function p(e){return(!n.length||n.some((function(t){return e.marktype===t})))&&(!r.length||r.some((function(t){return e.name===t})))}}return t}(t))},clampRange:V.j,pinchDistance:function pinchDistance(e){var t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function pinchAngle(e){var t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function screen(){return U_?U_.screen:{}},containerSize:function containerSize(){var e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function windowSize(){return U_?[U_.innerWidth,U_.innerHeight]:[void 0,void 0]},bandspace:function bandspace(e,t,n){return Da(e||0,t||0,n||0)},setdata:function setdata(e,t){var n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(V.eb).insert(t)),1},pathShape:function pathShape(e){var t=null;return function(n){return n?Ey(n,t=t||gy(e)):e}},panLinear:V.O,panLog:V.P,panPow:V.Q,panSymlog:V.R,zoomLinear:V.ib,zoomLog:V.jb,zoomPow:V.kb,zoomSymlog:V.lb,encode:function(e,t,n){if(e){var r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,a){var o,s,u=this.context.dataflow,l=this.context.data[e],c=l.input,f=l.changes,d=u.stamp();if(!1===u._trigger||!(c.value.length||t||r))return 0;if((!f||f.stamp<d)&&(l.changes=f=u.changeset(),f.stamp=d,u.runAfter((function(){l.modified=!0,u.pulse(c,f).run()}),!0,1)),n&&(o=!0===n?V.eb:Object(V.A)(n)||isTuple(n)?n:removePredicate(n),f.remove(o)),t&&f.insert(t),r&&(o=removePredicate(r),c.value.some(o)?f.remove(o):f.insert(r)),i)for(s in a)f.modify(i,s,a[s]);return 1}},H_=["view","item","group","xy","x","y"],V_="event.vega.",Y_="this.",$_={};function expressionFunction(e,t,n){return 1===arguments.length?G_[e]:(G_[e]=t,n&&($_[e]=n),K_&&(K_.functions[e]=Y_+e),this)}expressionFunction("bandwidth",(function scale_bandwidth(e,t){var n=getScale(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),scaleVisitor),expressionFunction("copy",(function scale_copy(e,t){var n=getScale(e,(t||this).context);return n?n.copy():void 0}),scaleVisitor),expressionFunction("domain",(function scale_domain(e,t){var n=getScale(e,(t||this).context);return n?n.domain():[]}),scaleVisitor),expressionFunction("range",(function scale_range(e,t){var n=getScale(e,(t||this).context);return n&&n.range?n.range():[]}),scaleVisitor),expressionFunction("invert",(function scale_invert(e,t,n){var r=getScale(e,(n||this).context);return r?Object(V.A)(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),scaleVisitor),expressionFunction("scale",(function scale_scale(e,t,n){var r=getScale(e,(n||this).context);return r&&void 0!==t?r(t):void 0}),scaleVisitor),expressionFunction("gradient",(function(e,t,n,r,i){e=getScale(e,(i||this).context);var a=function(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function stop(e,t){return r.push({offset:e,color:t}),n}}}(t,n),o=e.domain(),s=o[0],u=Object(V.S)(o),l=V.x;return u-s?l=scaleFraction(e,s,u):e=(e.interpolator?scales_scale("sequential")().interpolator(e.interpolator()):scales_scale("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(s!==(o=e.ticks(+r||15))[0]&&o.unshift(s),u!==Object(V.S)(o)&&o.push(u)),o.forEach((function(t){return a.stop(l(t),e(t))})),a}),scaleVisitor),expressionFunction("geoArea",Zv,scaleVisitor),expressionFunction("geoBounds",Qv,scaleVisitor),expressionFunction("geoCentroid",ey,scaleVisitor),expressionFunction("geoShape",(function geoShape(e,t,n){var r=getScale(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),scaleVisitor),expressionFunction("indata",(function indata(e,t,n){var r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function indataVisitor(e,t,n,r){t[0].type!==Gm&&Object(V.n)("First argument to indata must be a string literal."),t[1].type!==Gm&&Object(V.n)("Second argument to indata must be a string literal.");var i=t[0].value,a=t[1].value,o=q_+a;Object(V.v)(o,r)||(r[o]=n.getData(i).indataRef(n,a))})),expressionFunction("data",src_data_data,dataVisitor),expressionFunction("treePath",(function treePath(e,t,n){var r=treeNodes(e,this),i=r[t],a=r[n];return i&&a?i.path(a).map(tree_datum):void 0}),dataVisitor),expressionFunction("treeAncestors",(function treeAncestors(e,t){var n=treeNodes(e,this)[t];return n?n.ancestors().map(tree_datum):void 0}),dataVisitor),expressionFunction("vlSelectionTest",(function selectionTest(e,t,n){for(var r,i,a,o,s,u=this.context.data[e],l=u?u.values.value:[],c=u?u[Vv]&&u[Vv].value:void 0,f=n===Bv,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(a=(i=i||{})[o=r.unit]||0))continue;if(s=testPoint(t,r),i[o]=s?-1:++a,s&&1===c.size)return!0;if(!s&&a===c.get(o).count)return!1}else if(f^(s=testPoint(t,r)))return s;return d&&f}),selectionVisitor),expressionFunction("vlSelectionResolve",(function selectionResolve(e,t){for(var n,r,i,a,o,s,u,l,c,f,d,h=this.context.data[e],p=h?h.values.value:[],g={},m={},v=p.length,y=0;y<v;++y)for(a=(n=p[y]).unit,r=n.fields,i=n.values,f=0,d=r.length;f<d;++f)o=r[f],u=(s=g[o.field]||(g[o.field]={}))[a]||(s[a]=[]),m[o.field]=l=o.type.charAt(0),c=Yv[l+"_union"],s[a]=c(u,Object(V.i)(i[f]));return t=t||Uv,Object.keys(g).forEach((function(e){g[e]=Object.keys(g[e]).map((function(t){return g[e][t]})).reduce((function(n,r){return void 0===n?r:Yv[m[e]+"_"+t](n,r)}))})),g}),selectionVisitor);var X_={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function globalvar(e){return"_["+Object(V.X)("$"+e)+"]"},functions:function buildFunctions(e){var t=Nv(e);for(var n in H_.forEach((function(e){return t[e]=V_+e})),G_)t[n]=Y_+n;return t},constants:Lv,visitors:$_},K_=function(e){var t=(e=e||{}).whitelist?Object(V.bb)(e.whitelist):{},n=e.blacklist?Object(V.bb)(e.blacklist):{},r=e.constants||Lv,i=(e.functions||Nv)(visit),a=e.globalvar,o=e.fieldvar,s={},u={},l=0,c=Object(V.D)(a)?a:function(e){return a+'["'+e+'"]'};function visit(e){if(Object(V.H)(e))return e;var t=f[e.type];return null==t&&Object(V.n)("Unsupported type: "+e.type),t(e)}var f={Literal:function Literal(e){return e.raw},Identifier:function Identifier(e){var i=e.name;return l>0?i:Object(V.v)(n,i)?Object(V.n)("Illegal identifier: "+i):Object(V.v)(r,i)?r[i]:Object(V.v)(t,i)?i:(s[i]=1,c(i))},MemberExpression:function MemberExpression(e){var t=!e.computed,n=visit(e.object);t&&(l+=1);var r=visit(e.property);return n===o&&(u[function stripQuotes(e){var t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(l-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function CallExpression(e){"Identifier"!==e.callee.type&&Object(V.n)("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=Object(V.v)(i,t)&&i[t];return r||Object(V.n)("Unrecognized function: "+t),Object(V.D)(r)?r(n):r+"("+n.map(visit).join(",")+")"},ArrayExpression:function ArrayExpression(e){return"["+e.elements.map(visit).join(",")+"]"},BinaryExpression:function BinaryExpression(e){return"("+visit(e.left)+e.operator+visit(e.right)+")"},UnaryExpression:function UnaryExpression(e){return"("+e.operator+visit(e.argument)+")"},ConditionalExpression:function ConditionalExpression(e){return"("+visit(e.test)+"?"+visit(e.consequent)+":"+visit(e.alternate)+")"},LogicalExpression:function LogicalExpression(e){return"("+visit(e.left)+e.operator+visit(e.right)+")"},ObjectExpression:function ObjectExpression(e){return"{"+e.properties.map(visit).join(",")+"}"},Property:function Property(e){l+=1;var t=visit(e.key);return l-=1,t+":"+visit(e.value)}};function codegen(e){var t={code:visit(e),globals:Object.keys(s),fields:Object.keys(u)};return s={},u={},t}return codegen.functions=i,codegen.constants=r,codegen}(X_);function expression_expression(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function eventExpression(e,t){return expression_expression(["event"],e,t)}function encodeExpression(e,t){return expression_expression(["item","_"],e,t)}function parseParameters(e,t,n){var r,i;for(r in n=n||{},e)i=e[r],n[r]=Object(V.A)(i)?i.map((function(e){return parseParameter(e,t,n)})):parseParameter(i,t,n);return n}function parseParameter(e,t,n){if(!e||!Object(V.F)(e))return e;for(var r,i=0,a=J_.length;i<a;++i)if(r=J_[i],Object(V.v)(e,r.key))return r.parse(e,t,n);return e}var J_=[{key:"$ref",parse:function getOperator(e,t){return t.get(e.$ref)||Object(V.n)("Operator not defined: "+e.$ref)}},{key:"$key",parse:function getKey(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Object(V.I)(e.$key,e.$flat))}},{key:"$expr",parse:function getExpression(e,t,n){e.$params&&parseParameters(e.$params,t,n);var r="e:"+e.$expr+"_"+e.$name;return t.fn[r]||(t.fn[r]=Object(V.f)(function parameterExpression(e,t){return expression_expression(["datum","_"],e,t)}(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function parameters_getField(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Object(V.t)(e.$field,e.$name))}},{key:"$encode",parse:function getEncode(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=Object(V.f)(encodeExpression(r.$expr,t),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function getCompare(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Object(V.i)(e.$compare).map((function(e){return e&&e.$tupleid?tupleid:e}));return t.fn[n]||(t.fn[n]=Object(V.k)(r,e.$order))}},{key:"$context",parse:function parameters_getContext(e,t){return t}},{key:"$subflow",parse:function getSubflow(e,t){var n=e.$subflow;return function(e,r,i){var a=eb(n,t.fork()),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o}}},{key:"$tupleid",parse:function getTupleId(){return tupleid}}];function canonicalType(e){return(e+"").toLowerCase()}var Z_=function(e,t){!function isOperator(e){return"operator"===canonicalType(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?function operatorExpression(e,t){return expression_expression(["_"],e,t)}(e.update,t):null)};var Q_=function(e,t){var n=Object(V.F)(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||Object(V.n)("Source not defined: "+e.source),i=e.target&&e.target.$expr?eventExpression(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=parseParameters(a.$params,t)),a=function handlerExpression(e,t){return expression_expression(["_","event"],e,t)}(a.$expr,t)),t.update(e,r,i,a,o)},eb=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach((function(e){Z_(e,t)})),n.forEach((function(e){!function parseOperatorParameters(e,t){if(e.params){var n=t.get(e.id);n||Object(V.n)("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(parseParameters(e.params,t),e.react,e.initonly))}}(e,t)})),(e.streams||[]).forEach((function(e){!function(e,t){var n,r=null!=e.filter?eventExpression(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(i=(n=e.merge.map(t.get.bind(t)))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&Object(V.n)("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}(e,t)})),(e.updates||[]).forEach((function(e){Q_(e,t)})),t.resolve()},tb={skip:!0};function Context(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ContextFork(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Context.prototype=ContextFork.prototype={fork:function fork(){var e=new ContextFork(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function get(e){return this.nodes[e]},set:function set(e,t){return this.nodes[e]=t},add:function add(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),function isCollect(e){return"collect"===canonicalType(e)}(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.preload(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push((function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)}))}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach((function(e){n[e]=t}))},resolve:function resolve(){return(this.unresolved||[]).forEach((function(e){e()})),delete this.unresolved,this},operator:function operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function transform(e,t){this.add(e,this.dataflow.add(this.transforms[canonicalType(t)]))},stream:function stream(e,t){this.set(e.id,t)},update:function update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function getState(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function setState(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((function(e){n.update(t.signals[e],i[e],tb)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(V.eb).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}};var nb=function(e,t,n){return eb(t,function(e,t,n){return new Context(e,t,n)}(e,yt,n||G_))};var rb="width",ib="height",ab="padding",ob={skip:!0};function size_viewWidth(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ab?r.left+r.right:0)}function size_viewHeight(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===ab?r.top+r.bottom:0)}function dataTest(e,t){return t.modified&&Object(V.A)(t.input.value)&&e.indexOf("_:vega:_")}function signalTest(e,t){return!("parent"===e||t instanceof yt.proxy)}var sb=function(e,t,n,r){var i=e.element();i&&i.setAttribute("title",function formatTooltip(e){return null==e?"":Object(V.A)(e)?formatArray(e):Object(V.F)(e)&&!Object(V.C)(e)?function formatObject(e){return Object.keys(e).map((function(t){var n=e[t];return t+": "+(Object(V.A)(n)?formatArray(n):tooltip_formatValue(n))})).join("\n")}(e):e+""}(r))};function formatArray(e){return"["+e.map(tooltip_formatValue).join(", ")+"]"}function tooltip_formatValue(e){return Object(V.A)(e)?"[\u2026]":Object(V.F)(e)&&!Object(V.C)(e)?"{\u2026}":e}function View(e,t){t=t||{},Dataflow.call(this),t.loader&&this.loader(t.loader),t.logger&&this.logger(t.logger),null!=t.logLevel&&this.logLevel(t.logLevel),this._el=null,this._elBind=null,this._renderType=t.renderer||wm.Canvas,this._scenegraph=new src_Scenegraph_Scenegraph;var n=this._scenegraph.root;this._renderer=null,this._tooltip=t.tooltip||sb,this._redraw=!0,this._handler=(new src_CanvasHandler_CanvasHandler).scene(n),this._preventDefault=!1,this._timers=[],this._eventListeners=[],this._resizeListeners=[],this._eventConfig=function initializeEventConfig(e){var t=Object(V.o)({defaults:{}},e),n=function unpack(e,t){t.forEach((function(t){Object(V.A)(e[t])&&(e[t]=Object(V.bb)(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig);var r=nb(this,e,t.functions);this._runtime=r,this._signals=r.signals,this._bind=(e.bindings||[]).map((function(e){return{state:null,param:Object(V.o)({},e)}})),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._background=t.background||r.background||null,this._width=this.width(),this._height=this.height(),this._viewWidth=size_viewWidth(this,this._width),this._viewHeight=size_viewHeight(this,this._height),this._origin=[0,0],this._resize=0,this._autosize=1,function initializeResize(e){var t=e._signals,n=t[rb],r=t[ib],i=t[ab];function resetSize(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(function(t){e._width=t.size,e._viewWidth=size_viewWidth(e,t.size),resetSize()}),{size:n}),e._resizeHeight=e.add(null,(function(t){e._height=t.size,e._viewHeight=size_viewHeight(e,t.size),resetSize()}),{size:r});var a=e.add(null,resetSize,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(this),Bp(this),t.hover&&this.hover(),t.container&&this.initialize(t.container,t.bind)}var ub=Object(V.y)(View,Dataflow);function lookupSignal(e,t){return Object(V.v)(e._signals,t)?e._signals[t]:Object(V.n)("Unrecognized signal name: "+Object(V.X)(t))}function findOperatorHandler(e,t){var n=(e._targets||[]).filter((function(e){var n=e._update;return n&&n.handler===t}));return n.length?n[0]:null}function addOperatorListener(e,t,n,r){var i=findOperatorHandler(n,r);return i||((i=Im(this,(function(){r(t,n.value)}))).handler=r,e.on(n,null,i)),e}function removeOperatorListener(e,t,n){var r=findOperatorHandler(t,n);return r&&t._targets.remove(r),e}ub.evaluate=function(){var e=Object(Y.a)(A.a.mark((function _callee(e,t,n){return A.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Dataflow.prototype.evaluate.call(this,e,t);case 2:if(!this._redraw&&!this._resize){r.next=14;break}if(r.prev=3,!this._renderer){r.next=8;break}return this._resize&&(this._resize=0,resizeRenderer(this)),r.next=8,this._renderer.renderAsync(this._scenegraph.root);case 8:this._redraw=!1,r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),this.error(r.t0);case 14:return n&&$(this,n),r.abrupt("return",this);case 16:case"end":return r.stop()}}),_callee,this,[[3,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ub.dirty=function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},ub.container=function(){return this._el},ub.scenegraph=function(){return this._scenegraph},ub.origin=function(){return this._origin.slice()},ub.signal=function(e,t,n){var r=lookupSignal(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},ub.background=function(e){return arguments.length?(this._background=e,this._resize=1,this):this._background},ub.width=function(e){return arguments.length?this.signal("width",e):this.signal("width")},ub.height=function(e){return arguments.length?this.signal("height",e):this.signal("height")},ub.padding=function(e){return arguments.length?this.signal("padding",e):this.signal("padding")},ub.autosize=function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},ub.renderer=function(e){return arguments.length?(src_modules_renderModule(e)||Object(V.n)("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},ub.tooltip=function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},ub.loader=function(e){return arguments.length?(e!==this._loader&&(Dataflow.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},ub.resize=function(){return this._autosize=1,this.touch(lookupSignal(this,"autosize"))},ub._resetRenderer=function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},ub._resizeView=function resizeView(e,t,n,r,i,a){this.runAfter((function(o){var s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(rb,n,ob),o._resizeWidth.skip(!0)),o.height()!==r&&(s=1,o.signal(ib,r,ob),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),s&&o.run("enter"),a&&o.runAfter((function(e){return e.resize()}))}),!1,1)},ub.addEventListener=function(e,t,n){var r=t;return n&&!1===n.trap||((r=Im(this,t)).raw=t),this._handler.on(e,r),this},ub.removeEventListener=function(e,t){for(var n,r,i=this._handler.handlers(e),a=i.length;--a>=0;)if(r=i[a].type,n=i[a].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},ub.addResizeListener=function(e){var t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},ub.removeResizeListener=function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},ub.addSignalListener=function(e,t){return addOperatorListener(this,e,lookupSignal(this,e),t)},ub.removeSignalListener=function(e,t){return removeOperatorListener(this,lookupSignal(this,e),t)},ub.addDataListener=function(e,t){return addOperatorListener(this,e,dataref(this,e).values,t)},ub.removeDataListener=function(e,t){return removeOperatorListener(this,dataref(this,e).values,t)},ub.preventDefault=function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},ub.timer=function(e,t){this._timers.push(function(e,t,n){var r=new Timer,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?now():+n,r.restart((function tick(a){a+=i,r.restart(tick,i+=t,n),e(a)}),t,n),r)}((function tick(t){e({timestamp:Date.now(),elapsed:t})}),t))},ub.events=function events_events(e,t,n){var r,i=this,a=new EventStream(n),o=function send(n,r){i.runAsync(null,(function(){e===Em&&function prevent(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),a.receive(Sm(i,n,r))}))};if(e===Tm)permit(i,"timer",t)&&i.timer(o,t);else if(e===Em)permit(i,"view",t)&&i.addEventListener(t,o,Om);else if(e===Cm?permit(i,"window",t)&&"undefined"!==typeof window&&(r=[window]):"undefined"!==typeof document&&permit(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(t,o);i._eventListeners.push({type:t,sources:r,handler:o})}else i.warn("Can not resolve event source: "+e);return a},ub.finalize=function(){var e,t,n,r=this._tooltip,i=this._timers,a=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=a.length;--e>=0;)for(t=(n=a[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},ub.hover=function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",itemFilter),markTarget,invoke(e)),this.on(this.events("view","mouseout",itemFilter),markTarget,invoke(t)),this},ub.data=function data_data(e,t){return arguments.length<2?dataref(this,e).values.value:change.call(this,e,ChangeSet_changeset().remove(V.eb).insert(t))},ub.change=change,ub.insert=function data_insert(e,t){return change.call(this,e,ChangeSet_changeset().insert(t))},ub.remove=function data_remove(e,t){return change.call(this,e,ChangeSet_changeset().remove(t))},ub.scale=function src_scale_scale(e){var t=this._runtime.scales;return Object(V.v)(t,e)||Object(V.n)("Unrecognized scale or projection: "+e),t[e].value},ub.initialize=function(e,t){var n,r,i=this,a=i._renderType,o=i._eventConfig.bind,s=src_modules_renderModule(a);return e=i._el=e?initialize_lookup(i,e):null,s||i.error("Unrecognized renderer type: "+a),n=s.handler||src_CanvasHandler_CanvasHandler,r=e?s.renderer:s.headless,i._renderer=r?Fm(i,i._renderer,e,r):null,i._handler=function(e,t,n,r){var i=new r(e.loader(),Im(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,render_size_offset(e),e);return t&&t.handlers().forEach((function(e){i.on(e.type,e.handler)})),i}(i,i._handler,e,n),i._redraw=!0,e&&"none"!==o&&(t=t?i._elBind=initialize_lookup(i,t):e.appendChild(Am("div",{class:"vega-bindings"})),i._bind.forEach((function(e){e.param.element&&"container"!==o&&(e.element=initialize_lookup(i,e.param.element))})),i._bind.forEach((function(e){jm(i,e.element||t,e)}))),i},ub.toImageURL=function(e,t){return render_to_image_url_ref.apply(this,arguments)},ub.toCanvas=function(e,t){return render_to_canvas_ref.apply(this,arguments)},ub.toSVG=function(e){return render_to_svg_ref.apply(this,arguments)},ub.getState=function state_getState(e){return this._runtime.getState(e||{data:dataTest,signals:signalTest,recurse:!0})},ub.setState=function state_setState(e){return this.runAsync(null,(function(t){t._trigger=!1,t._runtime.setState(e)}),(function(e){e._trigger=!0})),this};var lb=function(e,t){return e=e||t.autosize,Object(V.F)(e)?e:{type:e||"pad"}},cb=function(e,t){return e=e||t.padding,Object(V.F)(e)?{top:padding_number(e.top),bottom:padding_number(e.bottom),left:padding_number(e.left),right:padding_number(e.right)}:function paddingObject(e){return{top:e,bottom:e,left:e,right:e}}(padding_number(e))};function padding_number(e){return+e||0}var fb=["value","update","init","react","bind"];function outerError(e,t){Object(V.n)(e+' for "outer" push: '+Object(V.X)(t))}var db=function(e,t){var n=e.name;if("outer"===e.push)t.signals[n]||outerError("No prior signal definition",n),fb.forEach((function(t){void 0!==e[t]&&outerError("Invalid property ",t)}));else{var r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}},hb=function(e,t,n){var r,i,a={};try{e=Object(V.H)(e)?e:Object(V.X)(e)+"",r=Iv(e)}catch(o){Object(V.n)("Expression parse error: "+e)}return r.visit((function visitor(e){if(e.type===Xm){var n=e.callee.name,r=X_.visitors[n];r&&r(n,e.arguments,t,a)}})),(i=K_(r)).globals.forEach((function(e){var n="$"+e;!Object(V.v)(a,n)&&t.getSignal(e)&&(a[n]=t.signalRef(e))})),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}};function Entry(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function util_entry(e,t,n,r){return new Entry(e,t,n,r)}function util_operator(e,t){return util_entry("operator",e,t)}function util_ref(e){var t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function util_fieldRef(e,t){return t?{$field:e,$name:t}:{$field:e}}var pb=util_fieldRef("key");function compareRef(e,t){return{$compare:e,$order:t}}var gb="descending";function aggrField(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}var mb="scope",vb="view";function isSignal(e){return e&&e.signal}function util_hasSignal(e){if(isSignal(e))return!0;if(Object(V.F)(e))for(var t in e)if(util_hasSignal(e[t]))return!0;return!1}function util_value(e,t){return null!=e?e:t}function deref(e){return e&&e.signal||e}var yb="timer";function parseStream(e,t){return(e.merge?mergeStream:e.stream?nestedStream:e.type?eventStream:Object(V.n)("Invalid stream specification: "+Object(V.X)(e)))(e,t)}function mergeStream(e,t){var n=streamParameters({merge:e.merge.map((function(e){return parseStream(e,t)}))},e,t);return t.addStream(n).id}function nestedStream(e,t){var n=streamParameters({stream:parseStream(e.stream,t)},e,t);return t.addStream(n).id}function eventStream(e,t){var n,r;return e.type===yb?(n=t.event(yb,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(function eventSource(e){return e===mb?vb:e||vb}(e.source),e.type),r=streamParameters({stream:n},e,t),1===Object.keys(r).length?n:t.addStream(r).id}function streamParameters(e,t,n){var r=t.between;return r&&(2!==r.length&&Object(V.n)('Stream "between" parameter must have 2 entries: '+Object(V.X)(t)),e.between=[parseStream(r[0],n),parseStream(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function filterMark(e,t,n){var r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===mb&&r.push("inScope(event.item)"),r.length&&(e.filter=hb("("+r.join(")&&(")+")").$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}var _b,bb,xb=function(e,t,n){return _b=t||wb,bb=n||Pb,parseMerge(e.trim()).map(parseSelector)},wb="view",kb="[",Sb="]",Eb="{",Tb="}",Cb=":",Ob=",",Ab="@",Rb=">",Db=/[[\]{}]/,Pb={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};function event_selector_find(e,t,n,r,i){for(var a,o=0,s=e.length;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function parseMerge(e){for(var t=[],n=0,r=e.length,i=0;i<r;)i=event_selector_find(e,i,Ob,kb+Eb,Sb+Tb),t.push(e.substring(n,i).trim()),n=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function parseSelector(e){return"["===e[0]?function parseBetween(e){var t,n,r=e.length,i=1;if((i=event_selector_find(e,i,Sb,kb,Sb))===r)throw"Empty between selector: "+e;if(2!==(t=parseMerge(e.substring(1,i))).length)throw"Between selector must have two elements: "+e;if((e=e.slice(i+1).trim())[0]!==Rb)throw"Expected '>' after between selector: "+e;if(t=t.map(parseSelector),(n=parseSelector(e.slice(1).trim())).between)return{between:t,stream:n};n.between=t;return n}(e):function event_selector_parseStream(e){var t,n,r={source:_b},i=[],a=[0,0],o=0,s=0,u=e.length,l=0;if(e[u-1]===Tb){if(!((l=e.lastIndexOf(Eb))>=0))throw"Unmatched right brace: "+e;try{a=function parseThrottle(e){var t=e.split(Ob);if(!e.length||t.length>2)throw e;return t.map((function(t){var n=+t;if(n!==n)throw e;return n}))}(e.substring(l+1,u-1))}catch(c){throw"Invalid throttle specification: "+e}e=e.slice(0,l).trim(),u=e.length,l=0}if(!u)throw e;e[0]===Ab&&(o=++l);(t=event_selector_find(e,l,Cb))<u&&(i.push(e.substring(s,t).trim()),s=l=++t);if((l=event_selector_find(e,l,kb))===u)i.push(e.substring(s,u).trim());else if(i.push(e.substring(s,l).trim()),n=[],(s=++l)===u)throw"Unmatched left bracket: "+e;for(;l<u;){if((l=event_selector_find(e,l,Sb))===u)throw"Unmatched left bracket: "+e;if(n.push(e.substring(s,l).trim()),l<u-1&&e[++l]!==kb)throw"Expected left bracket: "+e;s=++l}if(!(u=i.length)||Db.test(i[u-1]))throw"Invalid event selector: "+e;u>1?(r.type=i[1],o?r.markname=i[0].slice(1):!function isMarkType(e){return bb[e]}(i[0])?r.source=i[0]:r.marktype=i[0]):r.type=i[0];"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1));null!=n&&(r.filter=n);a[0]&&(r.throttle=a[0]);a[1]&&(r.debounce=a[1]);return r}(e)}var Mb=function(e,t,n){var r=e.events,i=e.update,a=e.encode,o=[],s={target:n};r||Object(V.n)("Signal update missing events specification."),Object(V.H)(r)&&(r=xb(r,t.isSubscope()?mb:vb)),r=Object(V.i)(r).filter((function(e){return e.signal||e.scale?(o.push(e),0):1})),o.length>1&&(o=[mergeSources(o)]),r.length&&o.push(r.length>1?{merge:r}:r[0]),null!=a&&(i&&Object(V.n)("Signal encode and update are mutually exclusive."),i="encode(item(),"+Object(V.X)(a)+")"),s.update=Object(V.H)(i)?hb(i,t,"var datum=event.item&&event.item.datum;"):null!=i.expr?hb(i.expr,t,"var datum=event.item&&event.item.datum;"):null!=i.value?i.value:null!=i.signal?{$expr:"_.value",$params:{value:t.signalRef(i.signal)}}:Object(V.n)("Invalid signal update specification."),e.force&&(s.options={force:!0}),o.forEach((function(e){t.addUpdate(Object(V.o)(function streamSource(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):parseStream(e,t)}}(e,t),s))}))};function mergeSources(e){return{signal:"["+e.map((function(e){return e.scale?'scale("'+e.scale+'")':e.signal}))+"]"}}function transforms_transform(e){return function(t,n,r){return util_entry(e,n,t||void 0,r)}}var jb=transforms_transform("aggregate"),Fb=transforms_transform("axisticks"),Ib=transforms_transform("bound"),Lb=transforms_transform("collect"),Nb=transforms_transform("compare"),Bb=transforms_transform("datajoin"),Ub=transforms_transform("encode"),zb=transforms_transform("expression"),qb=(transforms_transform("extent"),transforms_transform("facet")),Wb=transforms_transform("field"),Gb=transforms_transform("key"),Hb=transforms_transform("legendentries"),Vb=transforms_transform("load"),Yb=transforms_transform("mark"),$b=transforms_transform("multiextent"),Xb=transforms_transform("multivalues"),Kb=transforms_transform("overlap"),Jb=transforms_transform("params"),Zb=transforms_transform("prefacet"),Qb=transforms_transform("projection"),ex=transforms_transform("proxy"),tx=transforms_transform("relay"),nx=transforms_transform("render"),rx=transforms_transform("scale"),ix=transforms_transform("sieve"),ax=transforms_transform("sortitems"),ox=transforms_transform("viewlayout"),sx=transforms_transform("values"),ux=0,lx={min:"min",max:"max",count:"sum"};function initScale(e,t){var n=e.type||"linear";(function isValidScaleType(e){switch(e){case Pa:case Ma:case ja:case Fa:case Ia:case La:case Na:case Ba:case Ua:case qa:case Wa:case Ga:case Ha:case Va:case Ya:case $a:return!0}return!1})(n)||Object(V.n)("Unrecognized scale type: "+Object(V.X)(n)),t.addScale(e.name,{type:n,domain:void 0})}function scale_parseScale(e,t){var n,r=t.getScale(e.name).params;for(n in r.domain=parseScaleDomain(e.domain,e,t),null!=e.range&&(r.range=function parseScaleRange(e,t,n){var r=e.range,i=t.config.range;if(r.signal)return t.signalRef(r.signal);if(Object(V.H)(r)){if(i&&Object(V.v)(i,r))return e=Object(V.o)({},e,{range:i[r]}),parseScaleRange(e,t,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=isDiscrete(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Object(V.n)("Unrecognized scale range value: "+Object(V.X)(r))}else{if(r.scheme)return n.scheme=Object(V.A)(r.scheme)?parseArray(r.scheme,t):parseLiteral(r.scheme,t),r.extent&&(n.schemeExtent=parseArray(r.extent,t)),void(r.count&&(n.schemeCount=parseLiteral(r.count,t)));if(r.step)return void(n.rangeStep=parseLiteral(r.step,t));if(isDiscrete(e.type)&&!Object(V.A)(r))return parseScaleDomain(r,e,t);Object(V.A)(r)||Object(V.n)("Unsupported range type: "+Object(V.X)(r))}return r.map((function(e){return(Object(V.A)(e)?parseArray:parseLiteral)(e,t)}))}(e,t,r)),null!=e.interpolate&&function parseScaleInterpolate(e,t){t.interpolate=parseLiteral(e.type||e),null!=e.gamma&&(t.interpolateGamma=parseLiteral(e.gamma))}(e.interpolate,r),null!=e.nice&&(r.nice=function parseScaleNice(e){return Object(V.F)(e)?{interval:parseLiteral(e.interval),step:parseLiteral(e.step)}:parseLiteral(e)}(e.nice)),null!=e.bins&&(r.bins=function parseScaleBins(e,t){return e.signal||Object(V.A)(e)?parseArray(e,t):t.objectProperty(e)}(e.bins,t)),e)Object(V.v)(r,n)||"name"===n||(r[n]=parseLiteral(e[n],t))}function parseLiteral(e,t){return Object(V.F)(e)?e.signal?t.signalRef(e.signal):Object(V.n)("Unsupported object: "+Object(V.X)(e)):e}function parseArray(e,t){return e.signal?t.signalRef(e.signal):e.map((function(e){return parseLiteral(e,t)}))}function dataLookupError(e){Object(V.n)("Can not find data set: "+Object(V.X)(e))}function parseScaleDomain(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(Object(V.A)(e)?explicitDomain:e.fields?multipleDomain:singularDomain)(e,t,n);null==t.domainMin&&null==t.domainMax||Object(V.n)("No scale domain defined for domainMin/domainMax to override.")}function explicitDomain(e,t,n){return e.map((function(e){return parseLiteral(e,n)}))}function singularDomain(e,t,n){var r=n.getData(e.data);return r||dataLookupError(e.data),isDiscrete(t.type)?r.valuesRef(n,e.field,parseSort(e.sort,!1)):isQuantile(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function multipleDomain(e,t,n){var r=e.data,i=e.fields.reduce((function(e,t){return t=Object(V.H)(t)?{data:r,field:t}:Object(V.A)(t)||t.signal?function scale_fieldRef(e,t){var n="_:vega:_"+ux++,r=Lb({});if(Object(V.A)(e))r.value={$ingest:e};else if(e.signal){var i="setdata("+Object(V.X)(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ix({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e}),[]);return(isDiscrete(t.type)?ordinalMultipleDomain:isQuantile(t.type)?quantileMultipleDomain:numericMultipleDomain)(e,n,i)}function ordinalMultipleDomain(e,t,n){var r,i,a,o,s,u=parseSort(e.sort,!0);return r=n.map((function(e){var n=t.getData(e.data);return n||dataLookupError(e.data),n.countsRef(t,e.field,u)})),i={groupby:pb,pulse:r},u&&(a=u.op||"count",s=u.field?aggrField(a,u.field):"count",i.ops=[lx[a]],i.fields=[t.fieldRef(s)],i.as=[s]),a=t.add(jb(i)),o=t.add(Lb({pulse:util_ref(a)})),s=t.add(sx({field:pb,sort:t.sortRef(u),pulse:util_ref(o)})),util_ref(s)}function parseSort(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!lx[e.op]&&Object(V.n)("Multiple domain scales can not be sorted using "+e.op):Object(V.n)("No field provided for sort aggregate op: "+e.op):Object(V.F)(e)?e.field="key":e={field:"key"}),e}function quantileMultipleDomain(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||dataLookupError(e.data),n.domainRef(t,e.field)}));return util_ref(t.add(Xb({values:r})))}function numericMultipleDomain(e,t,n){var r=n.map((function(e){var n=t.getData(e.data);return n||dataLookupError(e.data),n.extentRef(t,e.field)}));return util_ref(t.add($b({extents:r})))}function projection_parseParameter(e,t,n){return Object(V.A)(e)?e.map((function(e){return projection_parseParameter(e,t,n)})):Object(V.F)(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:Object(V.n)("Unsupported parameter object: "+Object(V.X)(e)):e}var cx="vertical",fx="start",dx="end",hx="value",px="guide-label",gx="group-title",mx="symbol",vx="gradient",yx="discrete",_x=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],bx={name:1,interactive:1},xx={value:0},wx={value:1},kx=Object(V.bb)(["rule"]),Sx=Object(V.bb)(["group","image","rect"]),Ex=function(e,t){var n="";return kx[t]?n:(e.x2&&(e.x?(Sx[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Sx[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;"),n)},Tx=function(e,t,n,r){var i=hb(e,t);return i.$fields.forEach((function(e){r[e]=1})),Object(V.o)(n,i.$params),i.$expr},Cx=function(e,t,n,r){return function field_resolve(e,t,n,r){var i,a,o;if(e.signal)i="datum",o=Tx(e.signal,t,n,r);else if(e.group||e.parent){for(a=Math.max(1,e.level||1),i="item";a-- >0;)i+=".mark.group";e.parent?(o=e.parent,i+=".datum"):o=e.group}else e.datum?(i="datum",o=e.datum):Object(V.n)("Invalid field reference: "+Object(V.X)(e));e.signal||(Object(V.H)(o)?(r[o]=1,o=Object(V.W)(o).map(V.X).join("][")):o=field_resolve(o,t,n,r));return i+"["+o+"]"}(Object(V.F)(e)?e:{datum:e},t,n,r)};var Ox=function(e,t,n,r,i){var a,o,s,u=scale_getScale(e.scale,n,r,i);return null!=e.range?(o=u+".range()",t=0===(a=+e.range)?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==t&&(t=u+"("+t+")"),e.band&&(s=function hasBandwidth(e,t){if(!Object(V.H)(e))return-1;var n=t.scaleType(e);return"band"===n||"point"===n?1:0}(e.scale,n))&&(a=(o=u+".bandwidth")+"()"+(1===(a=+e.band)?"":"*"+a),s<0&&(a="("+o+"?"+a+":0)"),t=(t?t+"+":"")+a,e.extra&&(t="(datum.extra?"+u+"(datum.extra.value):"+t+")")),null==t&&(t="0")),t};function scale_getScale(e,t,n,r){var i;if(Object(V.H)(e))i=W_+e,Object(V.v)(n,i)||(n[i]=t.scaleRef(e)),i=Object(V.X)(i);else{for(i in t.scales)n[W_+i]=t.scaleRef(i);i=Object(V.X)(W_)+"+"+(e.signal?"("+Tx(e.signal,t,n,r)+")":Cx(e,t,n,r))}return"_["+i+"]"}var Ax=function(e,t,n,r){return Object(V.F)(e)?"("+Rx(null,e,t,n,r)+")":e},Rx=function(e,t,n,r,i){if(null!=t.gradient)return function(e,t,n,r){return"this.gradient("+scale_getScale(e.gradient,t,n,r)+","+Object(V.X)(e.start)+","+Object(V.X)(e.stop)+","+Object(V.X)(e.count)+")"}(t,n,r,i);var a=t.signal?Tx(t.signal,n,r,i):t.color?function(e,t,n,r){function color(e,i,a,o){return"this."+e+"("+[Rx(null,i,t,n,r),Rx(null,a,t,n,r),Rx(null,o,t,n,r)].join(",")+").toString()"}return e.c?color("hcl",e.h,e.c,e.l):e.h||e.s?color("hsl",e.h,e.s,e.l):e.l||e.a?color("lab",e.l,e.a,e.b):e.r||e.g||e.b?color("rgb",e.r,e.g,e.b):null}(t.color,n,r,i):null!=t.field?Cx(t.field,n,r,i):void 0!==t.value?Object(V.X)(t.value):void 0;return null!=t.scale&&(a=Ox(t,a,n,r,i)),void 0===a&&(a=null),null!=t.exponent&&(a="Math.pow("+a+","+Ax(t.exponent,n,r,i)+")"),null!=t.mult&&(a+="*"+Ax(t.mult,n,r,i)),null!=t.offset&&(a+="+"+Ax(t.offset,n,r,i)),t.round&&(a="Math.round("+a+")"),a},Dx=function(e,t,n){var r=e+"["+Object(V.X)(t)+"]";return"$=".concat(n,";if(").concat(r,"!==$)").concat(r,"=$,m=1;")},Px=function(e,t,n,r,i){var a="";return t.forEach((function(t){var o=Rx(e,t,n,r,i);a+=t.test?Tx(t.test,n,r,i)+"?"+o+":":o})),":"===Object(V.S)(a)&&(a+="null"),Dx("o",e,a)};function parseEncode(e,t,n,r){var i,a,o,s={},u="var o=item,datum=o.datum,m=0,$;";for(i in e)a=e[i],Object(V.A)(a)?u+=Px(i,a,r,n,s):(o=Rx(i,a,r,n,s),u+=Dx("o",i,o));return u+=Ex(e,t),{$expr:u+="return m;",$fields:Object.keys(s),$output:Object.keys(e)}}var Mx="mark",jx="frame",Fx="title";function encoder(e){return Object(V.F)(e)?Object(V.o)({},e):{value:e}}function addEncode(e,t,n,r){return null!=n?(Object(V.F)(n)&&!Object(V.A)(n)?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function addEncoders(e,t,n){for(var r in t)addEncode(e,r,t[r]);for(var i in n)addEncode(e,i,n[i],"update")}function extendEncode(e,t,n){for(var r in t)n&&Object(V.v)(n,r)||(e[r]=Object(V.o)(e[r]||{},t[r]));return e}function encode_util_encoders(e,t,n,r,i,a){var o,s;for(s in(a=a||{}).encoders={$encode:o={}},e=function applyDefaults(e,t,n,r,i){var a,o,s,u={},l={};"legend"!=n&&0!==String(n).indexOf("axis")||(n=null);for(o in s=n===jx?i.group:n===Mx?Object(V.o)({},i.mark,i[t]):null)has(o,e)||("fill"===o||"stroke"===o)&&(has("fill",e)||has("stroke",e))||applyDefault(u,o,s[o]);for(o in Object(V.i)(r).forEach((function(t){var n=i.style&&i.style[t];for(var r in n)has(r,e)||applyDefault(u,r,n[r])})),e=Object(V.o)({},e),u)(s=u[o]).signal?(a=a||{})[o]=s:l[o]=s;e.enter=Object(V.o)(l,e.enter),a&&(e.update=Object(V.o)(a,e.update));return e}(e,t,n,r,i.config))o[s]=parseEncode(e[s],t,a,i);return a}function applyDefault(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}function has(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}var Ix=function(e,t,n,r,i,a,o){return{type:e,name:o?o.name:void 0,role:t,style:o&&o.style||n,key:r,from:i,interactive:!(!o||!o.interactive),encode:extendEncode(a,o,bx)}};function guide_util_lookup(e,t){var n=function _(n){return util_value(e[n],t[n])};return n.isVertical=function(n){return cx===util_value(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection))},n.gradientLength=function(){return util_value(e.gradientLength,t.gradientLength||t.gradientWidth)},n.gradientThickness=function(){return util_value(e.gradientThickness,t.gradientThickness||t.gradientHeight)},n.entryColumns=function(){return util_value(e.columns,util_value(t.columns,+n.isVertical(!0)))},n}function getEncoding(e,t){var n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function anchorExpr(e,t,n){return'item.anchor === "'.concat(fx,'" ? ').concat(e,' : item.anchor === "').concat(dx,'" ? ').concat(t," : ").concat(n)}var Lx=anchorExpr(Object(V.X)("left"),Object(V.X)("right"),Object(V.X)("center")),Nx="group",Bx="text",Ux=function(e,t,n,r){var i,a,o,s,u,l,c=guide_util_lookup(e,n),f=c.isVertical(),d=c.gradientThickness(),h=c.gradientLength();return f?(o=[0,1],s=[0,0],u=d,l=h):(o=[0,0],s=[1,0],u=h,l=d),addEncoders(i={enter:a={opacity:xx,x:xx,y:xx,width:encoder(u),height:encoder(l)},update:Object(V.o)({},a,{opacity:wx,fill:{gradient:t,start:o,stop:s}}),exit:{opacity:xx}},{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),Ix("rect","legend-gradient",null,void 0,void 0,i,r)},zx=function(e,t,n,r,i){var a,o,s,u,l,c,f=guide_util_lookup(e,n),d=f.isVertical(),h=f.gradientThickness(),p=f.gradientLength(),g="";return d?(s="y",l="y2",u="x",c="width",g="1-"):(s="x",l="x2",u="y",c="height"),(o={opacity:xx,fill:{scale:t,field:hx}})[s]={signal:g+"datum.perc",mult:p},o[u]=xx,o[l]={signal:g+"datum.perc2",mult:p},o[c]=encoder(h),addEncoders(a={enter:o,update:Object(V.o)({},o,{opacity:wx}),exit:{opacity:xx}},{stroke:f("gradientStrokeColor"),strokeWidth:f("gradientStrokeWidth")},{opacity:f("gradientOpacity")}),Ix("rect","legend-band",null,hx,i,a,r)},qx="datum.".concat("perc",'<=0?"').concat("left",'":datum.').concat("perc",'>=1?"').concat("right",'":"').concat("center",'"'),Wx="datum.".concat("perc",'<=0?"').concat("bottom",'":datum.').concat("perc",'>=1?"').concat("top",'":"').concat("middle",'"'),Gx=function(e,t,n,r){var i,a,o,s,u,l=guide_util_lookup(e,t),c=l.isVertical(),f=encoder(l.gradientThickness()),d=l.gradientLength(),h=l("labelOverlap"),p=l("labelSeparation"),g="";return addEncoders(i={enter:a={opacity:xx},update:o={opacity:wx,text:{field:"label"}},exit:{opacity:xx}},{fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:util_value(e.labelLimit,t.gradientLabelLimit)}),c?(a.align={value:"left"},a.baseline=o.baseline={signal:Wx},s="y",u="x",g="1-"):(a.align=o.align={signal:qx},a.baseline={value:"top"},s="x",u="y"),a[s]=o[s]={signal:g+"datum.perc",mult:d},a[u]=o[u]=f,f.offset=util_value(e.labelOffset,t.gradientLabelOffset)||0,e=Ix(Bx,"legend-label",px,hx,r,i,n),h&&(e.overlap={separation:p,method:h,order:"datum.index"}),e},Hx=function(e,t,n,r,i,a,o,s){return{type:Nx,name:n,role:e,style:t,from:r,interactive:i||!1,encode:a,marks:o,layout:s}},Vx=function(e,t,n,r,i){var a,o,s,u,l,c,f,d=guide_util_lookup(e,t),h=n.entries,p=!(!h||!h.interactive),g=h?h.name:void 0,m=d("clipHeight"),v=d("symbolOffset"),y={data:"value"},_={},b="".concat(i," ? datum.").concat("offset"," : datum.").concat("size"),x=m?encoder(m):{field:"size"},w="datum.".concat("index"),k="max(1, ".concat(i,")");return x.mult=.5,_={enter:a={opacity:xx,x:{signal:b,mult:.5,offset:v},y:x},update:o={opacity:wx,x:a.x,y:a.y},exit:{opacity:xx}},e.fill||addEncoders(_,{fill:t.symbolBaseFillColor,stroke:t.symbolBaseStrokeColor}),addEncoders(_,{fill:d("symbolFillColor"),shape:d("symbolType"),size:d("symbolSize"),stroke:d("symbolStrokeColor"),strokeDash:d("symbolDash"),strokeDashOffset:d("symbolDashOffset"),strokeWidth:d("symbolStrokeWidth")},{opacity:d("symbolOpacity")}),_x.forEach((function(t){e[t]&&(o[t]=a[t]={scale:e[t],field:hx})})),u=Ix("symbol","legend-symbol",null,hx,y,_,n.symbols),m&&(u.clip=!0),(s=encoder(v)).offset=d("labelOffset"),addEncoders(_={enter:a={opacity:xx,x:{signal:b,offset:s},y:x},update:o={opacity:wx,text:{field:"label"},x:a.x,y:a.y},exit:{opacity:xx}},{align:d("labelAlign"),baseline:d("labelBaseline"),fill:d("labelColor"),fillOpacity:d("labelOpacity"),font:d("labelFont"),fontSize:d("labelFontSize"),fontStyle:d("labelFontStyle"),fontWeight:d("labelFontWeight"),limit:d("labelLimit")}),l=Ix(Bx,"legend-label",px,hx,y,_,n.labels),_={enter:{noBound:{value:!m},width:xx,height:m?encoder(m):xx,opacity:xx},exit:{opacity:xx},update:o={opacity:wx,row:{signal:null},column:{signal:null}}},d.isVertical(!0)?(c="ceil(item.mark.items.length / ".concat(k,")"),o.row.signal="".concat(w,"%").concat(c),o.column.signal="floor(".concat(w," / ").concat(c,")"),f={field:["row",w]}):(o.row.signal="floor(".concat(w," / ").concat(k,")"),o.column.signal="".concat(w," % ").concat(k),f={field:w}),o.column.signal="".concat(i,"?").concat(o.column.signal,":").concat(w),(e=Hx("scope",null,g,r={facet:{data:r,name:"value",groupby:"index"}},p,extendEncode(_,h,bx),[u,l])).sort=f,e};var Yx='item.orient === "left"',$x='item.orient === "right"',Xx="(".concat(Yx," || ").concat($x,")"),Kx="datum.vgrad && ".concat(Xx),Jx=anchorExpr('"top"','"bottom"','"middle"'),Zx=anchorExpr('"right"','"left"','"center"'),Qx="datum.vgrad && ".concat($x," ? (").concat(Zx,") : (").concat(Xx," && !(datum.vgrad && ").concat(Yx,')) ? "left" : ').concat(Lx),ew="item._anchor || (".concat(Xx,' ? "middle" : "start")'),tw="".concat(Kx," ? (").concat(Yx," ? -90 : 90) : 0"),nw="".concat(Xx," ? (datum.vgrad ? (").concat($x,' ? "bottom" : "top") : ').concat(Jx,') : "top"'),rw=function(e,t){var n;return Object(V.F)(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+clip_param(e.path)+")":e.sphere&&(n="geoShape("+clip_param(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e};function clip_param(e){return Object(V.F)(e)&&e.signal?e.signal:Object(V.X)(e)}var iw=function(e){var t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")?e.type===Nx?"scope":t||Mx:t},aw=function(e){return{marktype:e.type,name:e.name||void 0,role:e.role||iw(e),zindex:+e.zindex||void 0}},ow=function(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e},sw=function(e,t){var n=register_definition(e.type);n||Object(V.n)("Unrecognized transform type: "+Object(V.X)(e.type));var r=util_entry(n.type.toLowerCase(),null,transform_parseParameters(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r};function transform_parseParameters(e,t,n){var r,i,a,o={};for(i=0,a=e.params.length;i<a;++i)o[(r=e.params[i]).name]=transform_parseParameter(r,t,n);return o}function transform_parseParameter(e,t,n){var r=e.type,i=t[e.name];return"index"===r?function parseIndexParameter(e,t,n){Object(V.H)(t.from)||Object(V.n)('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function parseSubParameters(e,t,n){var r=t[e.name];return e.array?(Object(V.A)(r)||Object(V.n)("Expected an array of sub-parameters. Instead: "+Object(V.X)(r)),r.map((function(t){return parseSubParameter(e,t,n)}))):parseSubParameter(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!isSignal(i)?i.map((function(t){return parameterValue(e,t,n)})):parameterValue(e,i,n):void(e.required&&Object(V.n)("Missing required "+Object(V.X)(t.type)+" parameter: "+Object(V.X)(e.name)))}function parameterValue(e,t,n){var r=e.type;if(isSignal(t))return transform_isExpr(r)?Object(V.n)("Expression references can not be signals."):isField(r)?n.fieldRef(t):isCompare(r)?n.compareRef(t):n.signalRef(t.signal);var i=e.expr||isField(r);return i&&function outerExpr(e){return e&&e.expr}(t)?n.exprRef(t.expr,t.as):i&&function outerField(e){return e&&e.field}(t)?util_fieldRef(t.field,t.as):transform_isExpr(r)?hb(t,n):function isData(e){return"data"===e}(r)?util_ref(n.getData(t).values):isField(r)?util_fieldRef(t):isCompare(r)?n.compareRef(t):t}function parseSubParameter(e,t,n){var r,i,a,o,s;for(o=0,s=e.params.length;o<s;++o){for(a in(i=e.params[o]).key)if(i.key[a]!==t[a]){i=null;break}if(i)break}return i||Object(V.n)("Unsupported parameter: "+Object(V.X)(t)),r=Object(V.o)(transform_parseParameters(i,t,n),i.key),util_ref(n.add(Jb(r)))}function transform_isExpr(e){return"expr"===e}function isField(e){return"field"===e}function isCompare(e){return"compare"===e}function getDataRef(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:util_ref(t.getData(e.data).output)}function DataScope(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}DataScope.fromEntries=function(e,t){var n=t.length,r=1,i=t[0],a=t[n-1],o=t[n-2],s=null;for(i&&"load"===i.type&&(i=t[1]),e.add(t[0]);r<n;++r)t[r].params.pulse=util_ref(t[r-1]),e.add(t[r]),"aggregate"===t[r].type&&(s=t[r]);return new DataScope(e,i,o,a,s)};var uw=DataScope.prototype;function fieldKey(e){return Object(V.H)(e)?e:null}function addSortField(e,t,n){var r,i=aggrField(n.op,n.field);if(t.ops){for(var a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function DataScope_cache(e,t,n,r,i,a,o){var s,u,l=t[n]||(t[n]={}),c=function sortKey(e){return Object(V.F)(e)?(e.order===gb?"-":"+")+aggrField(e.op,e.field):""}(a),f=fieldKey(i);if(null!=f&&(e=t.scope,s=l[f+=c?"|"+c:""]),!s){var d=a?{field:pb,pulse:t.countsRef(e,i,a)}:{field:e.fieldRef(i),pulse:util_ref(t.output)};c&&(d.sort=e.sortRef(a)),u=e.add(util_entry(r,void 0,d)),o&&(t.index[i]=u),s=util_ref(u),null!=f&&(l[f]=s)}return s}uw.countsRef=function(e,t,n){var r,i,a,o=this.counts||(this.counts={}),s=fieldKey(t);return null!=s&&(e=this.scope,r=o[s]),r?n&&n.field&&addSortField(e,r.agg.params,n):(a={groupby:e.fieldRef(t,"key"),pulse:util_ref(this.output)},n&&n.field&&addSortField(e,a,n),i=e.add(jb(a)),r=e.add(Lb({pulse:util_ref(i)})),r={agg:i,ref:util_ref(r)},null!=s&&(o[s]=r)),r.ref},uw.tuplesRef=function(){return util_ref(this.values)},uw.extentRef=function(e,t){return DataScope_cache(e,this,"extent","extent",t,!1)},uw.domainRef=function(e,t){return DataScope_cache(e,this,"domain","values",t,!1)},uw.valuesRef=function(e,t,n){return DataScope_cache(e,this,"vals","values",t,n||!0)},uw.lookupRef=function(e,t){return DataScope_cache(e,this,"lookup","tupleindex",t,!1)},uw.indataRef=function(e,t){return DataScope_cache(e,this,"indata","tupleindex",t,!0,!0)};var lw=function(e,t,n){var r,i,a=e.remove,o=e.insert,s=e.toggle,u=e.modify,l=e.values,c=t.add(util_operator());r="if("+e.trigger+',modify("'+n+'",'+[o,a,s,u,l].map((function(e){return null==e?"null":e})).join(",")+"),0)",i=hb(r,t),c.update=i.$expr,c.params=i.$params},cw=function(e,t){var n,r,i,a,o,s,u,l,c,f,d,h,p,g,m=iw(e),v=e.type===Nx,y=e.from&&e.from.facet,_=e.layout||"scope"===m||m===jx,b=m===Mx||_||y,x=e.overlap;i=function(e,t,n){var r,i,a,o,s;return e?(r=e.facet)&&(t||Object(V.n)("Only group marks can be faceted."),null!=r.field?o=s=getDataRef(r,n):(e.data?s=util_ref(n.getData(e.data).aggregate):((a=sw(Object(V.o)({type:"aggregate",groupby:Object(V.i)(r.groupby)},r.aggregate),n)).params.key=n.keyRef(r.groupby),a.params.pulse=getDataRef(r,n),o=s=util_ref(n.add(a))),i=n.keyRef(r.groupby,!0))):o=util_ref(n.add(Lb(null,[{}]))),o||(o=getDataRef(e,n)),{key:i,pulse:o,parent:s}}(e.from,v,t),f=util_ref(r=t.add(Bb({key:i.key||(e.key?util_fieldRef(e.key):void 0),pulse:i.pulse,clean:!v}))),r=a=t.add(Lb({pulse:f})),r=t.add(Yb({markdef:aw(e),interactive:ow(e.interactive,t),clip:rw(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:util_ref(r)})),d=util_ref(r),(r=o=t.add(Ub(encode_util_encoders(e.encode,e.type,m,e.style,t,{mod:!1,pulse:d})))).params.parent=t.encode(),e.transform&&e.transform.forEach((function(e){var n=sw(e,t),i=n.metadata;(i.generates||i.changes)&&Object(V.n)("Mark transforms should not generate new data."),i.nomod||(o.params.mod=!0),n.params.pulse=util_ref(r),t.add(r=n)})),e.sort&&(r=t.add(ax({sort:t.compareRef(e.sort),pulse:util_ref(r)}))),h=util_ref(r),(y||_)&&(p=util_ref(_=t.add(ox({layout:t.objectProperty(e.layout),legends:t.legends,mark:d,pulse:h})))),g=util_ref(s=t.add(Ib({mark:d,pulse:p||h}))),v&&(b&&((n=t.operators).pop(),_&&n.pop()),t.pushState(h,p||g,f),y?function(e,t,n){var r,i,a,o,s=e.from.facet,u=s.name,l=getDataRef(s,t);s.name||Object(V.n)("Facet must have a name: "+Object(V.X)(s)),s.data||Object(V.n)("Facet must reference a data set: "+Object(V.X)(s)),s.field?o=t.add(Zb({field:t.fieldRef(s.field),pulse:l})):s.groupby?o=t.add(qb({key:t.keyRef(s.groupby),group:util_ref(t.proxy(n.parent)),pulse:l})):Object(V.n)("Facet must specify groupby or field: "+Object(V.X)(s)),i=(r=t.fork()).add(Lb()),a=r.add(ix({pulse:util_ref(i)})),r.addData(u,new DataScope(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:vw(e,r).toRuntime()}}(e,t,i):b?function(e,t,n){var r=t.add(Zb({pulse:n.pulse})),i=t.fork();i.add(ix()),i.addSignal("parent",null),r.params.subflow={$subflow:vw(e,i).toRuntime()}}(e,t,i):vw(e,t),t.popState(),b&&(_&&n.push(_),n.push(s))),x&&(g=function parseOverlap(e,t,n){var r,i=e.method,a=e.bound,o=e.separation,s={separation:isSignal(o)?n.signalRef(o.signal):o,method:isSignal(i)?n.signalRef(i.signal):i,pulse:t};e.order&&(s.sort=n.compareRef({field:e.order}));a&&(r=a.tolerance,s.boundTolerance=isSignal(r)?n.signalRef(r.signal):+r,s.boundScale=n.scaleRef(a.scale),s.boundOrient=a.orient);return util_ref(n.add(Kb(s)))}(x,g,t)),u=t.add(nx({pulse:g})),l=t.add(ix({pulse:util_ref(u)},void 0,t.parent())),null!=e.name&&(c=e.name,t.addData(c,new DataScope(t,a,u,l)),e.on&&e.on.forEach((function(e){(e.insert||e.remove||e.toggle)&&Object(V.n)("Marks only support modify triggers."),lw(e,t,c)})))};var fw=function(e,t){var n,r,i,a,o,s,u,l,c,f=t.config.legend,d=e.encode||{},h=d.legend||{},p=h.name||void 0,g=h.interactive,m=h.style,v=guide_util_lookup(e,f),y=_x.reduce((function(t,n){return t||e[n]}),0);return y||Object(V.n)("Missing valid scale for legend."),o=function legend_legendType(e,t){var n=e.type||mx;e.type||1!==function scaleCount(e){return _x.reduce((function(t,n){return t+(e[n]?1:0)}),0)}(e)||!e.fill&&!e.stroke||(n=isContinuous(t)?vx:isDiscretizing(t)?yx:mx);return n!==vx?n:isDiscretizing(t)?yx:vx}(e,t.scaleType(y)),s={title:null!=e.title,type:o,vgrad:"symbol"!==o&&v.isVertical()},u=util_ref(t.add(Lb(null,[s]))),h=extendEncode(function buildLegendEncode(e,t){var n={enter:{},update:{}};return addEncoders(n,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:t.strokeWidth,strokeDash:t.strokeDash,x:e("legendX"),y:e("legendY")}),n}(v,f),h,bx),n={enter:{x:{value:0},y:{value:0}}},l=util_ref(t.add(Hb(i={type:o,scale:t.scaleRef(y),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),o===vx?(a=[Ux(e,y,f,d.gradient),Gx(e,f,d.labels,l)],i.count=i.count||t.signalRef("max(2,2*floor((".concat(deref(v.gradientLength()),")/100))"))):o===yx?a=[zx(e,y,f,d.gradient,l),Gx(e,f,d.labels,l)]:(r=function legendSymbolLayout(e,t){var n=guide_util_lookup(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,f),a=[Vx(e,f,d,l,deref(r.columns))],i.size=function sizeExpression(e,t,n){var r=deref(getChannel("size",e,n)),i=deref(getChannel("strokeWidth",e,n)),a=deref(function getFontSize(e,t,n){return getEncoding("fontSize",e)||function getStyle(e,t,n){var r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,px));return hb("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(a,")"),t)}(e,t,a[0].marks)),a=[Hx("legend-entry",null,null,u,g,n,a,r)],s.title&&a.push(function(e,t,n,r){var i,a=guide_util_lookup(e,t);return addEncoders(i={enter:{opacity:xx},update:{opacity:wx,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:xx}},{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:ew},angle:{signal:tw},align:{signal:Qx},baseline:{signal:nw},text:e.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit")},{align:a("titleAlign"),baseline:a("titleBaseline")}),Ix(Bx,"legend-title","guide-title",null,r,i,n)}(e,f,d.title,u)),c=Hx("legend",m,p,u,g,h,a),e.zindex&&(c.zindex=e.zindex),cw(c,t)};function getChannel(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):getEncoding(e,n[0].encode)}var dw='item.orient==="'.concat("left",'"?-90:item.orient==="').concat("right",'"?90:0'),hw='item.orient==="'.concat("bottom",'"?"').concat("top",'":"').concat("bottom",'"'),pw=function(e,t){e=Object(V.H)(e)?{text:e}:e;var n,r,i=t.config.title,a=Object(V.o)({},e.encode);return n=util_ref(t.add(Lb(null,[{}]))),a.name=e.name,a.interactive=e.interactive,r=function buildTitle(e,t,n,r){var i,a=guide_util_lookup(e,t),o={value:0},s=e.text;return addEncoders(i={enter:{opacity:o},update:{opacity:{value:1}},exit:{opacity:o}},{text:s,orient:a("orient"),anchor:a("anchor"),align:{signal:Lx},angle:{signal:dw},baseline:{signal:hw},dx:a("dx"),dy:a("dy"),fill:a("color"),font:a("font"),fontSize:a("fontSize"),fontStyle:a("fontStyle"),fontWeight:a("fontWeight"),frame:a("frame"),limit:a("limit"),offset:a("offset")||0},{align:a("align"),angle:a("angle"),baseline:a("baseline")}),Ix(Bx,Fx,e.style||gx,null,r,i,n)}(e,i,a,n),e.zindex&&(r.zindex=e.zindex),cw(r,t)};function data_parseData(e,t){var n=[];e.transform&&e.transform.forEach((function(e){n.push(sw(e,t))})),e.on&&e.on.forEach((function(n){lw(n,t,e.name)})),t.addDataPipeline(e.name,function analyze(e,t,n){var r,i,a,o,s,u=[],l=null,c=!1,f=!1;e.values?util_hasSignal(e.values)||util_hasSignal(e.format)?(u.push(data_load(t,e)),u.push(l=collect())):u.push(l=collect({$ingest:e.values,$format:e.format})):e.url?util_hasSignal(e.url)||util_hasSignal(e.format)?(u.push(data_load(t,e)),u.push(l=collect())):u.push(l=collect({$request:e.url,$format:e.format})):e.source&&(l=r=Object(V.i)(e.source).map((function(e){return util_ref(t.getData(e).output)})),u.push(null));for(i=0,a=n.length;i<a;++i)o=n[i],s=o.metadata,l||s.source||u.push(l=collect()),u.push(o),s.generates&&(f=!0),s.modifies&&!f&&(c=!0),s.source?l=o:s.changes&&(l=null);r&&(a=r.length-1,u[0]=tx({derive:c,pulse:a?r:r[0]}),(c||a)&&u.splice(1,0,collect()));l||u.push(collect());return u.push(ix({})),u}(e,t,n))}function collect(e){var t=Lb({},e);return t.metadata={source:!0},t}function data_load(e,t){return Vb({url:t.url?e.property(t.url):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}function axis_domain_position(e,t){return{scale:e.scale,range:t}}var gw=function(e,t,n,r){var i,a,o,s,u,l,c,f,d,h=guide_util_lookup(e,t),p=e.orient,g=e.gridScale,m="left"===p||"top"===p?1:-1,v=function axis_grid_offsetValue(e,t){if(1===t);else if(Object(V.F)(e)){for(var n=e=Object(V.o)({},e);null!=n.mult;){if(!Object(V.F)(n.mult))return n.mult*=t,e;n=n.mult=Object(V.o)({},n.mult)}n.mult=t}else e=t*(e||0);return e}(e.offset,m);return addEncoders(i={enter:a={opacity:xx},update:s={opacity:wx},exit:o={opacity:xx}},{stroke:h("gridColor"),strokeDash:h("gridDash"),strokeDashOffset:h("gridDashOffset"),strokeOpacity:h("gridOpacity"),strokeWidth:h("gridWidth")}),u={scale:e.scale,field:hx,band:h("bandPosition"),round:h("tickRound"),extra:h("tickExtra"),offset:h("tickOffset")},"top"===p||"bottom"===p?(l="x",c="y",d="height"):(l="y",c="x",d="width"),f=c+"2",s[l]=a[l]=o[l]=u,g?(s[c]=a[c]={scale:g,range:0,mult:m,offset:v},s[f]=a[f]={scale:g,range:1,mult:m,offset:v}):(s[c]=a[c]={value:0,offset:v},s[f]=a[f]={signal:d,mult:m,offset:v}),Ix("rule","axis-grid",null,hx,r,i,n)};function flushExpr(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}var mw=function(e,t){var n,r,i,a,o,s,u=function(e,t){var n=t.config,r=e.orient,i="top"===r||"bottom"===r?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===t.scaleType(e.scale)&&n.axisBand;return i||a||o?Object(V.o)({},n.axis,i,a,o):n.axis}(e,t),l=e.encode||{},c=l.axis||{},f=c.name||void 0,d=c.interactive,h=c.style,p=guide_util_lookup(e,u);return n={orient:e.orient,ticks:!!p("ticks"),labels:!!p("labels"),grid:!!p("grid"),domain:!!p("domain"),title:null!=e.title},r=util_ref(t.add(Lb({},[n]))),c=extendEncode({update:{offset:encoder(p("offset")||0),position:encoder(util_value(e.position,0)),titlePadding:encoder(p("titlePadding")),minExtent:encoder(p("minExtent")),maxExtent:encoder(p("maxExtent")),range:{signal:'abs(span(range("'.concat(e.scale,'")))')}}},l.axis,bx),i=util_ref(t.add(Fb({scale:t.scaleRef(e.scale),extra:t.property(p("tickExtra")),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),s=[],n.grid&&s.push(gw(e,u,l.grid,i)),n.ticks&&(a=p("tickSize"),s.push(function(e,t,n,r,i){var a,o,s,u,l,c,f=guide_util_lookup(e,t),d=e.orient,h="left"===d||"top"===d?-1:1;return addEncoders(a={enter:o={opacity:xx},update:u={opacity:wx},exit:s={opacity:xx}},{stroke:f("tickColor"),strokeDash:f("tickDash"),strokeDashOffset:f("tickDashOffset"),strokeOpacity:f("tickOpacity"),strokeWidth:f("tickWidth")}),(l=encoder(i)).mult=h,c={scale:e.scale,field:hx,band:f("bandPosition"),round:f("tickRound"),extra:f("tickExtra"),offset:f("tickOffset")},"top"===d||"bottom"===d?(u.y=o.y=xx,u.y2=o.y2=l,u.x=o.x=s.x=c):(u.x=o.x=xx,u.x2=o.x2=l,u.y=o.y=s.y=c),Ix("rule","axis-tick",null,hx,r,a,n)}(e,u,l.ticks,i,a))),n.labels&&(a=n.ticks?a:0,s.push(function(e,t,n,r,i){var a,o,s,u,l,c,f,d,h,p,g,m=guide_util_lookup(e,t),v=e.orient,y="left"===v||"top"===v?-1:1,_="top"===v||"bottom"===v,b=e.scale,x=deref(m("labelFlush")),w=deref(m("labelFlushOffset")),k=0===x||!!x,S=m("labelAlign"),E=m("labelBaseline");return(u=encoder(i)).mult=y,u.offset=encoder(m("labelPadding")||0),u.offset.mult=y,l={scale:b,field:hx,band:.5,offset:m("tickOffset")},_?(c=S||(k?flushExpr(b,x,'"left"','"right"','"center"'):"center"),f=E||("top"===v?"bottom":"top"),d=!S):(c=S||("right"===v?"left":"right"),f=E||(k?flushExpr(b,x,'"top"','"bottom"','"middle"'):"middle"),d=!E),d=d&&k&&w?flushExpr(b,x,"-("+w+")",w,0):null,addEncoders(o={enter:s={opacity:xx,x:_?l:u,y:_?u:l},update:{opacity:wx,text:{field:"label"},x:s.x,y:s.y},exit:{opacity:xx,x:s.x,y:s.y}},(a={},Object(po.a)(a,_?"dx":"dy",d),Object(po.a)(a,"align",c),Object(po.a)(a,"baseline",f),Object(po.a)(a,"angle",m("labelAngle")),Object(po.a)(a,"fill",m("labelColor")),Object(po.a)(a,"fillOpacity",m("labelOpacity")),Object(po.a)(a,"font",m("labelFont")),Object(po.a)(a,"fontSize",m("labelFontSize")),Object(po.a)(a,"fontWeight",m("labelFontWeight")),Object(po.a)(a,"fontStyle",m("labelFontStyle")),Object(po.a)(a,"limit",m("labelLimit")),a)),h=m("labelBound"),p=m("labelOverlap"),g=m("labelSeparation"),e=Ix(Bx,"axis-label",px,hx,r,o,n),(p||h)&&(e.overlap={separation:g,method:p,order:"datum.index",bound:h?{scale:b,orient:v,tolerance:h}:null}),e}(e,u,l.labels,i,a))),n.domain&&s.push(function(e,t,n,r){var i,a,o,s,u,l,c=guide_util_lookup(e,t),f=e.orient;return addEncoders(i={enter:a={opacity:xx},update:o={opacity:wx},exit:{opacity:xx}},{stroke:c("domainColor"),strokeDash:c("domainDash"),strokeDashOffset:c("domainDashOffset"),strokeWidth:c("domainWidth"),strokeOpacity:c("domainOpacity")}),"top"===f||"bottom"===f?(s="x",l="y"):(s="y",l="x"),u=s+"2",a[l]=xx,o[s]=a[s]=axis_domain_position(e,0),o[u]=a[u]=axis_domain_position(e,1),Ix("rule","axis-domain",null,null,r,i,n)}(e,u,l.domain,r)),n.title&&s.push(function(e,t,n,r){var i,a,o,s,u=guide_util_lookup(e,t),l=e.orient,c="left"===l||"top"===l?-1:1,f="top"===l||"bottom"===l;return i={enter:a={opacity:xx,anchor:encoder(u("titleAnchor")),align:{signal:Lx}},update:o=Object(V.o)({},a,{opacity:wx,text:encoder(e.title)}),exit:{opacity:xx}},s={signal:'lerp(range("'.concat(e.scale,'"), ').concat(anchorExpr(0,1,.5),")")},f?(o.x=s,a.angle={value:0},a.baseline={value:"top"===l?"bottom":"top"}):(o.y=s,a.angle={value:90*c},a.baseline={value:"bottom"}),addEncoders(i,{angle:u("titleAngle"),baseline:u("titleBaseline"),fill:u("titleColor"),fillOpacity:u("titleOpacity"),font:u("titleFont"),fontSize:u("titleFontSize"),fontStyle:u("titleFontStyle"),fontWeight:u("titleFontWeight"),limit:u("titleLimit")},{align:u("titleAlign")}),!addEncode(i,"x",u("titleX"),"update")&&!f&&!has("x",n)&&(i.enter.auto={value:!0}),!addEncode(i,"y",u("titleY"),"update")&&f&&!has("y",n)&&(i.enter.auto={value:!0}),Ix(Bx,"axis-title","guide-title",null,r,i,n)}(e,u,l.title,r)),o=Hx("axis",h,f,r,d,c,s),e.zindex&&(o.zindex=e.zindex),cw(o,t)},vw=function(e,t,n){var r=Object(V.i)(e.signals),i=Object(V.i)(e.scales);return n||r.forEach((function(e){return db(e,t)})),Object(V.i)(e.projections).forEach((function(e){return function(e,t){var n={};for(var r in e)"name"!==r&&(n[r]=projection_parseParameter(e[r],r,t));t.addProjection(e.name,n)}(e,t)})),i.forEach((function(e){return initScale(e,t)})),Object(V.i)(e.data).forEach((function(e){return data_parseData(e,t)})),i.forEach((function(e){return scale_parseScale(e,t)})),(n||r).forEach((function(e){return function(e,t){var n=t.getSignal(e.name),r=e.update;e.init&&(r?Object(V.n)("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=hb(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((function(e){Mb(e,t,n.id)}))}(e,t)})),Object(V.i)(e.axes).forEach((function(e){return mw(e,t)})),Object(V.i)(e.marks).forEach((function(e){return cw(e,t)})),Object(V.i)(e.legends).forEach((function(e){return fw(e,t)})),e.title&&pw(e.title,t),t.parseLambdas(),t},yw=Object(V.bb)(["width","height","padding","autosize"]);function parseView(e,t){var n,r,i,a,o,s,u=t.config;return t.background=e.background||u.background,t.eventConfig=u.events,o=util_ref(t.root=t.add(util_operator())),t.addSignal("width",e.width||0),t.addSignal("height",e.height||0),t.addSignal("padding",cb(e.padding,u)),t.addSignal("autosize",lb(e.autosize,u)),t.legends=t.objectProperty(u.legend&&u.legend.layout),s=function addSignals(e,t,n){if(Object(V.i)(t).forEach((function(t){yw[t.name]||db(t,e)})),!n)return t;var r=Object(V.i)(t).slice();return Object(V.i)(n).forEach((function(t){e.hasOwnSignal(t.name)||(db(t,e),r.push(t))})),r}(t,e.signals,u.signals),r=t.add(Lb()),i=extendEncode({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e.encode),i=t.add(Ub(encode_util_encoders(i,Nx,jx,e.style,t,{pulse:util_ref(r)}))),a=t.add(ox({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:o,pulse:util_ref(i)})),t.operators.pop(),t.pushState(util_ref(i),util_ref(a),null),vw(e,t,s),t.operators.push(a),n=t.add(Ib({mark:o,pulse:util_ref(a)})),n=t.add(nx({pulse:util_ref(n)})),n=t.add(ix({pulse:util_ref(n)})),t.addData("root",new DataScope(t,r,r,n)),t}function Scope_Scope(e){this.config=e,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this.eventConfig=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Subscope(e){this.config=e.config,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}var _w=Scope_Scope.prototype=Subscope.prototype;function propertyLambda(e){return(Object(V.A)(e)?arrayLambda:objectLambda)(e)}function arrayLambda(e){for(var t,n="[",r=0,i=e.length;r<i;++r)t=e[r],n+=(r>0?",":"")+(Object(V.F)(t)?t.signal||propertyLambda(t):Object(V.X)(t));return n+"]"}function objectLambda(e){var t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+Object(V.X)(t)+":"+(Object(V.F)(n)?n.signal||propertyLambda(n):Object(V.X)(n));return r+"}"}_w.fork=function(){return new Subscope(this)},_w.isSubscope=function(){return this._subid>0},_w.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig}},_w.id=function(){return(this._subid?this._subid+":":0)+this._id++},_w.add=function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((function(t){t.$ref=e.id})),e.refs=null),e},_w.proxy=function(e){var t=e instanceof Entry?util_ref(e):e;return this.add(ex({value:t}))},_w.addStream=function(e){return this.streams.push(e),e.id=this.id(),e},_w.addUpdate=function(e){return this.updates.push(e),e},_w.finish=function(){var e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function annotate(e,t,n){var r;e&&((r=e.data||(e.data={}))[t]||(r[t]=[])).push(n)}for(e in this.data)for(var n in annotate((t=this.data[e]).input,e,"input"),annotate(t.output,e,"output"),annotate(t.values,e,"values"),t.index)annotate(t.index[n],e,"index:"+n);return this},_w.pushState=function(e,t,n){this._encode.push(util_ref(this.add(ix({pulse:e})))),this._parent.push(t),this._lookup.push(n?util_ref(this.proxy(n)):null),this._markpath.push(-1)},_w.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},_w.parent=function(){return Object(V.S)(this._parent)},_w.encode=function(){return Object(V.S)(this._encode)},_w.lookup=function(){return Object(V.S)(this._lookup)},_w.markpath=function(){var e=this._markpath;return++e[e.length-1]},_w.fieldRef=function(e,t){if(Object(V.H)(e))return util_fieldRef(e,t);e.signal||Object(V.n)("Unsupported field reference: "+Object(V.X)(e));var n,r=e.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},t&&(n.as=t),this.field[r]=i=util_ref(this.add(Wb(n)))),i},_w.compareRef=function(e){function check(e){return isSignal(e)?(n=!0,t.signalRef(e.signal)):function isExpr(e){return e&&e.expr}(e)?(n=!0,t.exprRef(e.expr)):e}var t=this,n=!1,r=Object(V.i)(e.field).map(check),i=Object(V.i)(e.order).map(check);return n?util_ref(this.add(Nb({fields:r,orders:i}))):compareRef(r,i)},_w.keyRef=function(e,t){var n=this.signals,r=!1;return e=Object(V.i)(e).map((function check(e){return isSignal(e)?(r=!0,util_ref(n[e.signal])):e})),r?util_ref(this.add(Gb({fields:e,flat:t}))):function keyRef(e,t){var n={$key:e};return t&&(n.$flat=!0),n}(e,t)},_w.sortRef=function(e){if(!e)return e;var t=aggrField(e.op,e.field),n=e.order||"ascending";return n.signal?util_ref(this.add(Nb({fields:t,orders:this.signalRef(n.signal)}))):compareRef(t,n)},_w.event=function(e,t){var n=e+":"+t;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},_w.hasOwnSignal=function(e){return Object(V.v)(this.signals,e)},_w.addSignal=function(e,t){this.hasOwnSignal(e)&&Object(V.n)("Duplicate signal name: "+Object(V.X)(e));var n=t instanceof Entry?t:this.add(util_operator(t));return this.signals[e]=n},_w.getSignal=function(e){return this.signals[e]||Object(V.n)("Unrecognized signal name: "+Object(V.X)(e)),this.signals[e]},_w.signalRef=function(e){return this.signals[e]?util_ref(this.signals[e]):(Object(V.v)(this.lambdas,e)||(this.lambdas[e]=this.add(util_operator(null))),util_ref(this.lambdas[e]))},_w.parseLambdas=function(){for(var e=Object.keys(this.lambdas),t=0,n=e.length;t<n;++t){var r=e[t],i=hb(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},_w.property=function(e){return e&&e.signal?this.signalRef(e.signal):e},_w.objectProperty=function(e){return e&&Object(V.F)(e)?this.signalRef(e.signal||propertyLambda(e)):e},_w.exprRef=function(e,t){var n={expr:hb(e,this)};return t&&(n.expr.$name=t),util_ref(this.add(zb(n)))},_w.addBinding=function(e,t){this.bindings||Object(V.n)("Nested signals do not support binding: "+Object(V.X)(e)),this.bindings.push(Object(V.o)({signal:e},t))},_w.addScaleProj=function(e,t){Object(V.v)(this.scales,e)&&Object(V.n)("Duplicate scale or projection name: "+Object(V.X)(e)),this.scales[e]=this.add(t)},_w.addScale=function(e,t){this.addScaleProj(e,rx(t))},_w.addProjection=function(e,t){this.addScaleProj(e,Qb(t))},_w.getScale=function(e){return this.scales[e]||Object(V.n)("Unrecognized scale name: "+Object(V.X)(e)),this.scales[e]},_w.projectionRef=_w.scaleRef=function(e){return util_ref(this.getScale(e))},_w.projectionType=_w.scaleType=function(e){return this.getScale(e).params.type},_w.addData=function(e,t){return Object(V.v)(this.data,e)&&Object(V.n)("Duplicate data set name: "+Object(V.X)(e)),this.data[e]=t},_w.getData=function(e){return this.data[e]||Object(V.n)("Undefined data set name: "+Object(V.X)(e)),this.data[e]},_w.addDataPipeline=function(e,t){return Object(V.v)(this.data,e)&&Object(V.n)("Duplicate data set name: "+Object(V.X)(e)),this.addData(e,DataScope.fromEntries(this,t))};var bw=function(e){return(e||[]).reduce((function(e,t){for(var n in t)if("signals"===n)e.signals=mergeNamed(e.signals,t.signals);else{var r="legend"===n?{layout:1}:"style"===n||null;config_copy(e,n,t[n],r)}return e}),function config_defaults(){return{padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:Ew},area:{fill:Ew},image:null,line:{stroke:Ew,strokeWidth:Sw},path:{stroke:Ew},rect:{fill:Ew},rule:{stroke:Tw},shape:{stroke:Ew},symbol:{fill:Ew,size:64},text:{fill:Tw,font:ww,fontSize:11},style:{"guide-label":{fill:Tw,font:ww,fontSize:10},"guide-title":{fill:Tw,font:ww,fontSize:11,fontWeight:"bold"},"group-title":{fill:Tw,font:ww,fontSize:13,fontWeight:"bold"},point:{size:kw,strokeWidth:Sw,shape:"circle"},circle:{size:kw,strokeWidth:Sw},square:{size:kw,strokeWidth:Sw,shape:"square"},cell:{fill:"transparent",stroke:Ow}},title:{orient:"top",anchor:"middle",offset:4},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:Cw,grid:!1,gridWidth:1,gridColor:Ow,labels:!0,labelAngle:0,labelLimit:180,labelPadding:2,ticks:!0,tickColor:Cw,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-1},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:Ow,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:Cw,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}())};function config_copy(e,t,n,r){var i,a;if(Object(V.F)(n)&&!Object(V.A)(n))for(i in a=Object(V.F)(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?config_copy(a,i,n[i]):a[i]=n[i];else e[t]=n}function mergeNamed(e,t){if(null==e)return t;var n={},r=[];function add(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(add),e.forEach(add),r}var ww="sans-serif",kw=30,Sw=2,Ew="#4c78a8",Tw="#000",Cw="#888",Ow="#ddd";var Aw=function(e,t){return Object(V.F)(e)||Object(V.n)("Input Vega specification must be an object."),parseView(e,new Scope_Scope(bw([t,e.config]))).toRuntime()};function src_expression_expression(e,t,n){";"!==t[t.length-1]&&(t="return("+t+");");var r=Function.apply(null,e.concat(t));return n&&n.functions?r.bind(n.functions):r}function expression_eventExpression(e,t){return src_expression_expression(["event"],e,t)}function expression_encodeExpression(e,t){return src_expression_expression(["item","_"],e,t)}function parameters_parseParameters(e,t,n){var r,i;for(r in n=n||{},e)i=e[r],n[r]=Object(V.A)(i)?i.map((function(e){return parameters_parseParameter(e,t,n)})):parameters_parseParameter(i,t,n);return n}function parameters_parseParameter(e,t,n){if(!e||!Object(V.F)(e))return e;for(var r,i=0,a=Rw.length;i<a;++i)if(r=Rw[i],Object(V.v)(e,r.key))return r.parse(e,t,n);return e}var Rw=[{key:"$ref",parse:function parameters_getOperator(e,t){return t.get(e.$ref)||Object(V.n)("Operator not defined: "+e.$ref)}},{key:"$key",parse:function parameters_getKey(e,t){var n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Object(V.I)(e.$key,e.$flat))}},{key:"$expr",parse:function parameters_getExpression(e,t,n){e.$params&&parameters_parseParameters(e.$params,t,n);var r="e:"+e.$expr+"_"+e.$name;return t.fn[r]||(t.fn[r]=Object(V.f)(function expression_parameterExpression(e,t){return src_expression_expression(["datum","_"],e,t)}(e.$expr,t),e.$fields,e.$name))}},{key:"$field",parse:function src_parameters_getField(e,t){if(!e.$field)return null;var n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Object(V.t)(e.$field,e.$name))}},{key:"$encode",parse:function parameters_getEncode(e,t){var n,r,i=e.$encode,a={};for(n in i)r=i[n],a[n]=Object(V.f)(expression_encodeExpression(r.$expr,t),r.$fields),a[n].output=r.$output;return a}},{key:"$compare",parse:function parameters_getCompare(e,t){var n="c:"+e.$compare+"_"+e.$order,r=Object(V.i)(e.$compare).map((function(e){return e&&e.$tupleid?tupleid:e}));return t.fn[n]||(t.fn[n]=Object(V.k)(r,e.$order))}},{key:"$context",parse:function src_parameters_getContext(e,t){return t}},{key:"$subflow",parse:function parameters_getSubflow(e,t){var n=e.$subflow;return function(e,r,i){var a=Mw(n,t.fork()),o=a.get(n.operators[0].id),s=a.signals.parent;return s&&s.set(i),o}}},{key:"$tupleid",parse:function parameters_getTupleId(){return tupleid}}];function util_canonicalType(e){return(e+"").toLowerCase()}var Dw=function(e,t){!function util_isOperator(e){return"operator"===util_canonicalType(e)}(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?function expression_operatorExpression(e,t){return src_expression_expression(["_"],e,t)}(e.update,t):null)};var Pw=function(e,t){var n=Object(V.F)(n=e.source)?n.$ref:n,r=t.get(n),i=null,a=e.update,o=void 0;r||Object(V.n)("Source not defined: "+e.source),i=e.target&&e.target.$expr?expression_eventExpression(e.target.$expr,t):t.get(e.target),a&&a.$expr&&(a.$params&&(o=parameters_parseParameters(a.$params,t)),a=function expression_handlerExpression(e,t){return src_expression_expression(["_","event"],e,t)}(a.$expr,t)),t.update(e,r,i,a,o)},Mw=function(e,t){var n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),n.forEach((function(e){Dw(e,t)})),n.forEach((function(e){!function operator_parseOperatorParameters(e,t){if(e.params){var n=t.get(e.id);n||Object(V.n)("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(parameters_parseParameters(e.params,t),e.react,e.initonly))}}(e,t)})),(e.streams||[]).forEach((function(e){!function(e,t){var n,r=null!=e.filter?expression_eventExpression(e.filter,t):void 0,i=null!=e.stream?t.get(e.stream):void 0;e.source?i=t.events(e.source,e.type,r):e.merge&&(i=(n=e.merge.map(t.get.bind(t)))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map(t.get.bind(t)),i=i.between(n[0],n[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&Object(V.n)("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}(e,t)})),(e.updates||[]).forEach((function(e){Pw(e,t)})),t.resolve()},jw={skip:!0};var Fw=function(e,t,n){return new context_Context(e,t,n)};function context_Context(e,t,n){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function context_ContextFork(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.functions=e.functions,this.events=e.events,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}context_Context.prototype=context_ContextFork.prototype={fork:function fork(){var e=new context_ContextFork(this);return(this.subcontext||(this.subcontext=[])).push(e),e},get:function get(e){return this.nodes[e]},set:function set(e,t){return this.nodes[e]=t},add:function add(e,t){var n,r=this,i=r.dataflow;if(r.set(e.id,t),function util_isCollect(e){return"collect"===util_canonicalType(e)}(e.type)&&(n=e.value)&&(n.$ingest?i.ingest(t,n.$ingest,n.$format):n.$request?i.preload(t,n.$request,n.$format):i.pulse(t,i.changeset().insert(n))),e.root&&(r.root=t),e.parent){var a=r.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(r.unresolved=r.unresolved||[]).push((function(){a=r.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)}))}if(e.signal&&(r.signals[e.signal]=t),e.scale&&(r.scales[e.scale]=t),e.data)for(var o in e.data)n=r.data[o]||(r.data[o]={}),e.data[o].forEach((function(e){n[e]=t}))},resolve:function resolve(){return(this.unresolved||[]).forEach((function(e){e()})),delete this.unresolved,this},operator:function operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function transform(e,t){this.add(e,this.dataflow.add(this.transforms[util_canonicalType(t)]))},stream:function stream(e,t){this.set(e.id,t)},update:function update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},getState:function src_state_getState(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((function(n){var i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((function(n){var r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((function(t){return t.getState(e)}))),n},setState:function src_state_setState(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((function(e){n.update(t.signals[e],i[e],jw)})),Object.keys(r||{}).forEach((function(e){n.pulse(t.data[e].input,n.changeset().remove(V.eb).insert(r[e]))})),(e.subcontext||[]).forEach((function(e,n){var r=t.subcontext[n];r&&r.setState(e)}))}},Object(V.o)(yt,r,a,s,u,l,c,d,h,g,m);var Iw=n(221),Lw=function(e,t,n){return e.fields=t||[],e.fname=n,e};var Nw=function(e){throw Error(e)},Bw=function(e){var t,n,r,i=[],a=null,o=0,s=e.length,u="";function push(){i.push(u+e.substring(t,n)),u="",t=n+1}for(e+="",t=n=0;n<s;++n)if("\\"===(r=e[n]))u+=e.substring(t,n),t=++n;else if(r===a)push(),a=null,o=-1;else{if(a)continue;t===o&&'"'===r?(t=n+1,a=r):t===o&&"'"===r?(t=n+1,a=r):"."!==r||o?"["===r?(n>t&&push(),o=t=n+1):"]"===r&&(o||Nw("Access path missing open bracket: "+e),o>0&&push(),o=0,t=n+1):n>t?push():t=n+1}return o&&Nw("Access path missing closing bracket: "+e),a&&Nw("Access path missing closing quote: "+e),n>t&&(n++,push()),i},Uw=Array.isArray,zw=function(e){return e===Object(e)},qw=function(e){return"string"===typeof e};function stringValue_$(e){return Uw(e)?"["+e.map(stringValue_$)+"]":zw(e)||qw(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}var Ww=[],Gw=(function(e,t){var n=Bw(e),r="return _["+n.map(stringValue_$).join("][")+"];";Lw(Function("_",r),[e=1===n.length?n[0]:e],t||e)}("id"),Lw((function(e){return e}),Ww,"identity"));Lw((function(){return 0}),Ww,"zero"),Lw((function(){return 1}),Ww,"one"),Lw((function(){return!0}),Ww,"true"),Lw((function(){return!1}),Ww,"false");function logger_log(e,t,n){var r,i=[t].concat([].slice.call(n));(r=console)[e].apply(r,Object(Ra.a)(i))}var Hw=function(e){return null!=e?Uw(e)?e:[e]:[]},Vw=function(e){return"function"===typeof e},Yw=function(e){return"boolean"===typeof e},$w=function(e){return"number"===typeof e};var Xw=function(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t},Kw=n(222),Jw=n.n(Kw),Zw=n(223),Qw=n.n(Zw),ek=n(87),tk=n.n(ek);function isLogicalOr(e){return!!e.or}function isLogicalAnd(e){return!!e.and}function isLogicalNot(e){return!!e.not}function normalizeLogicalOperand(e,t){return isLogicalNot(e)?{not:normalizeLogicalOperand(e.not,t)}:isLogicalAnd(e)?{and:e.and.map((function(e){return normalizeLogicalOperand(e,t)}))}:isLogicalOr(e)?{or:e.or.map((function(e){return normalizeLogicalOperand(e,t)}))}:t(e)}var nk=Qw.a,rk=Jw.a;function util_pick(e,t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.hasOwnProperty(u)&&(n[u]=e[u])}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}function omit(e,t){var n=Object.assign({},e),r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){delete n[o.value]}}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}Set.prototype.toJSON=function(){return"Set(".concat(Object(Ra.a)(this).map((function(e){return tk()(e)})).join(","),")")};var ik=tk.a;function util_hash(e){if($w(e))return e;var t=qw(e)?e:tk()(e);if(t.length<250)return t;for(var n=0,r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return n}function isNullOrFalse(e){return!1===e||null===e}function util_contains(e,t){return e.indexOf(t)>-1}function some(e,t){var n=0,r=!0,i=!1,a=void 0;try{for(var o,s=e.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=Object(qt.a)(u,2),c=l[0];if(t(l[1],c,n++))return!0}}catch(f){i=!0,a=f}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!1}function every(e,t){var n=0,r=!0,i=!1,a=void 0;try{for(var o,s=e.entries()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=Object(qt.a)(u,2),c=l[0];if(!t(l[1],c,n++))return!1}}catch(f){i=!0,a=f}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!0}function util_flatten(e){var t;return(t=[]).concat.apply(t,Object(Ra.a)(e))}function mergeDeep(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){e=deepMerge_(e,a[i])}return e}function deepMerge_(e,t){if("object"!==typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!==typeof t[n]||Uw(t[n])||null===t[n]?e[n]=t[n]:"object"!==typeof e[n]||null===e[n]?e[n]=mergeDeep(Uw(t[n].constructor)?[]:{},t[n]):mergeDeep(e[n],t[n]));return e}function unique(e,t){var n,r=[],i={},a=!0,o=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;(n=t(c))in i||(i[n]=1,r.push(c))}}catch(f){o=!0,s=f}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}function hasIntersection(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(t.has(s))return!0}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}function prefixGenerator(e){var t=new Set,n=!0,r=!1,i=void 0;try{for(var a,o=function _loop(){var e=a.value,n=Bw(e).map((function(e,t){return 0===t?e:"[".concat(e,"]")}));n.map((function(e,t){return n.slice(0,t+1).join("")})).forEach((function(e){return t.add(e)}))},s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)o()}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}function fieldIntersection(e,t){return hasIntersection(prefixGenerator(e),prefixGenerator(t))}var ak=Object.keys;function util_vals(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function util_isBoolean(e){return!0===e||!1===e}function varName(e){var t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function logicalExpr(e,t){return isLogicalNot(e)?"!("+logicalExpr(e.not,t)+")":isLogicalAnd(e)?"("+e.and.map((function(e){return logicalExpr(e,t)})).join(") && (")+")":isLogicalOr(e)?"("+e.or.map((function(e){return logicalExpr(e,t)})).join(") || (")+")":t(e)}function deleteNestedProperty(e,t){if(0===t.length)return!0;var n=t.shift();return deleteNestedProperty(e[n],t)&&delete e[n],0===ak(e).length}function titlecase(e){return e.charAt(0).toUpperCase()+e.substr(1)}function accessPathWithDatum(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum",n=Bw(e),r=[],i=1;i<=n.length;i++){var a="[".concat(n.slice(0,i).map(stringValue_$).join("]["),"]");r.push("".concat(t).concat(a))}return r.join(" && ")}function replacePathInField(e){return"".concat(Bw(e).map((function(e){return e.replace(".","\\.")})).join("\\."))}function removePathFromField(e){return"".concat(Bw(e).join("."))}function accessPathDepth(e){return e?Bw(e).length:0}function getFirstDefined(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];if(void 0!==a)return a}}var ok=42;function uniqueId(e){var t=++ok;return e?String(e)+t:t}function normalizeAngle(e){return(e%360+360)%360}var sk="area",uk="bar",lk="line",ck="point",fk="rect",dk="rule",hk="text",pk="tick",gk="trail",mk="circle",vk="square",yk="geoshape",_k={area:1,bar:1,line:1,point:1,text:1,tick:1,trail:1,rect:1,geoshape:1,rule:1,circle:1,square:1};function isPathMark(e){return util_contains(["line","area","trail"],e)}var bk=ak(_k);function isMarkDef(e){return e.type}Xw(bk);var xk=[].concat(["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],["fill","fillOpacity"]),wk=["filled","color","tooltip"],kk={binSpacing:1,continuousBandSize:5},Sk={binSpacing:0,continuousBandSize:5};function isUnitSpec(e){return!!e.mark}var Ek=function(){function CompositeMarkNormalizer(e,t){Object(_d.a)(this,CompositeMarkNormalizer),this.name=e,this.run=t}return Object(bd.a)(CompositeMarkNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(e){return!!isUnitSpec(e)&&function getMarkType(e){return isMarkDef(e)?e.type:e}(e.mark)===this.name}}]),CompositeMarkNormalizer}(),Tk={argmax:1,argmin:1,average:1,count:1,distinct:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1};function isArgminDef(e){return!!e&&!!e.argmin}function isArgmaxDef(e){return!!e&&!!e.argmax}ak(Tk);function isAggregateOp(e){return qw(e)&&!!Tk[e]}var Ck=["count","valid","missing","distinct"];function isCountingAggregateOp(e){return e&&qw(e)&&util_contains(Ck,e)}var Ok=["count","sum","distinct","valid","missing"],Ak=Xw(["mean","average","median","q1","q3","min","max"]),Rk="row",Dk="column",Pk="facet",Mk="x",jk="y",Fk="x2",Ik="y2",Lk="latitude",Nk="longitude",Bk="latitude2",Uk="longitude2",zk="color",qk="fill",Wk="stroke",Gk="shape",Hk="size",Vk="opacity",Yk="fillOpacity",$k="strokeOpacity",Xk="strokeWidth",Kk="text",Jk="order",Zk="detail",Qk="key",eS="tooltip",tS="href",nS={x:1,y:1,x2:1,y2:1};var rS={longitude:1,longitude2:1,latitude:1,latitude2:1};var iS=ak(rS),aS=Object.assign({},nS,rS,{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,size:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1});function isColorChannel(e){return"color"===e||"fill"===e||"stroke"===e}var oS={row:1,column:1,facet:1},sS=ak(oS),uS=Object.assign({},aS,oS),lS=ak(uS),cS=(uS.order,uS.detail,__rest(uS,["order","detail"])),fS=(uS.order,uS.detail,uS.row,uS.column,uS.facet,__rest(uS,["order","detail","row","column","facet"]));ak(cS),ak(fS);function isChannel(e){return!!uS[e]}var dS=["x2","y2","latitude2","longitude2"];function isSecondaryRangeChannel(e){return getMainRangeChannel(e)!==e}function getMainRangeChannel(e){switch(e){case"x2":return"x";case"y2":return"y";case"latitude2":return"latitude";case"longitude2":return"longitude"}return e}ak(aS),aS.x,aS.y,aS.x2,aS.y2,aS.latitude,aS.longitude,aS.latitude2,aS.longitude2;var hS=__rest(aS,["x","y","x2","y2","latitude","longitude","latitude2","longitude2"]),pS=ak(hS),gS={x:1,y:1},mS=ak(gS),vS=(hS.text,hS.tooltip,hS.href,hS.detail,hS.key,hS.order,__rest(hS,["text","tooltip","href","detail","key","order"])),yS=ak(vS);var _S=Object.assign({},gS,vS),bS=ak(_S);function isScaleChannel(e){return!!_S[e]}function supportMark(e,t){return function getSupportedMark(e){switch(e){case zk:case qk:case Wk:case Zk:case Qk:case eS:case tS:case Jk:case Vk:case Yk:case $k:case Xk:case Pk:case Rk:case Dk:return xS;case Mk:case jk:case Lk:case Nk:return wS;case Fk:case Ik:case Bk:case Uk:return{rule:"always",bar:"always",rect:"always",area:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Hk:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gk:return{point:"always",geoshape:"always"};case Kk:return{text:"always"}}}(e)[t]}var xS={area:"always",bar:"always",circle:"always",geoshape:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},wS=(xS.geoshape,__rest(xS,["geoshape"]));function rangeType(e){switch(e){case Mk:case jk:case Hk:case Xk:case Vk:case Yk:case $k:case Fk:case Ik:return;case Pk:case Rk:case Dk:case Gk:case Kk:case eS:case tS:return"discrete";case zk:case qk:case Wk:return"flexible";case Lk:case Nk:case Bk:case Uk:case Zk:case Qk:case Jk:return}throw new Error("rangeType not implemented for "+e)}var kS="Invalid spec",SS='Autosize "fit" only works for single views and layered views.',ES='Cannot use a fixed value of "rangeStep" when "autosize" is "fit".';function cannotProjectOnChannelWithoutField(e){return'Cannot project a selection on encoding channel "'.concat(e,'", which has no field.')}function nearestNotSupportForContinuous(e){return'The "nearest" transform is not supported for '.concat(e," marks.")}function selectionNotSupported(e){return"Selection not supported for ".concat(e," yet")}function selectionNotFound(e){return'Cannot find a selection named "'.concat(e,'"')}var TS="Scale bindings are currently only supported for scales with unbinned, continuous domains.",CS="Selections bound to scales cannot be separately initialized.";function noSuchRepeatedValue(e){return'Unknown repeated value "'.concat(e,'".')}function columnsNotSupportByRowCol(e){return'The "columns" property cannot be used when "'.concat(e,'" has nested row/column.')}var OS="Axes cannot be shared in concatenated views yet (https://github.com/vega/vega-lite/issues/2415).",AS="Axes cannot be shared in repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function unrecognizedParse(e){return'Unrecognized parse "'.concat(e,'".')}function differentParse(e,t,n){return'An ancestor parsed field "'.concat(e,'" as ').concat(n," but a child wants to parse the field as ").concat(t,".")}function invalidTransformIgnored(e){return"Ignoring an invalid transform: ".concat(ik(e),".")}var RS='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function encodingOverridden(e){return"Layer's shared ".concat(e.join(",")," channel ").concat(1===e.length?"is":"are"," overriden")}function projectionOverridden(e){var t=e.parentProjection,n=e.projection;return"Layer's shared projection ".concat(ik(t)," is overridden by a child projection ").concat(ik(n),".")}function primitiveChannelDef(e,t,n){return"Channel ".concat(e," is a ").concat(t,". Converted to {value: ").concat(ik(n),"}.")}function invalidFieldType(e){return'Invalid field type "'.concat(e,'"')}function nonZeroScaleUsedWithLengthMark(e,t,n){var r=n.scaleType?"".concat(n.scaleType," scale"):n.zeroFalse?"scale with zero=false":"scale with custom domain that excludes zero";return"A ".concat(r," is used to encode ").concat(e,"'s ").concat(t,". This can be misleading as the ").concat("x"===t?"width":"height"," of the ").concat(e," can be arbitrary based on the scale domain. You may want to use point mark instead.")}function invalidFieldTypeForCountAggregate(e,t){return'Invalid field type "'.concat(e,'" for aggregate: "').concat(t,'", using "quantitative" instead.')}function invalidAggregate(e){return'Invalid aggregation operator "'.concat(e,'"')}function missingFieldType(e,t){return'Missing type for channel "'.concat(e,'", using "').concat(t,'" instead.')}function droppingColor(e,t){var n=t.fill,r=t.stroke;return"Dropping color ".concat(e," as the plot also has ")+(n&&r?"fill and stroke":n?"fill":"stroke")}function emptyFieldDef(e,t){return"Dropping ".concat(ik(e),' from channel "').concat(t,'" since it does not contain data field or value.')}function latLongDeprecated(e,t,n){return"".concat(e,"-encoding with type ").concat(t," is deprecated. Replacing with ").concat(n,"-encoding.")}var DS="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function incompatibleChannel(e,t,n){return"".concat(e,' dropped as it is incompatible with "').concat(t,'"').concat(n?" when ".concat(n):"",".")}function invalidEncodingChannel(e){return"".concat(e,"-encoding is dropped as ").concat(e," is not a valid encoding channel.")}function facetChannelShouldBeDiscrete(e){return"".concat(e," encoding should be discrete (ordinal / nominal / binned).")}function facetChannelDropped(e){return"Facet encoding dropped as ".concat(e.join(" and ")," ").concat(e.length>1?"are":"is"," also specified.")}function discreteChannelCannotEncode(e,t){return'Using discrete channel "'.concat(e,'" to encode "').concat(t,'" field can be misleading as it does not encode ').concat("ordinal"===t?"order":"magnitude",".")}var PS="Bar mark should not be used with point scale when rangeStep is null. Please use band scale instead.";function lineWithRange(e,t){return"Line mark is for continuous lines and thus cannot be used with ".concat(e&&t?"x2 and y2":e?"x2":"y2",". We will use the rule mark (line segments) instead.")}function orientOverridden(e,t){return'Specified orient "'.concat(e,'" overridden with "').concat(t,'"')}var MS="custom domain scale cannot be unioned with default field-based domain";function cannotUseScalePropertyWithNonColor(e){return'Cannot use the scale property "'.concat(e,'" with non-color channel.')}function unaggregateDomainHasNoEffectForRawField(e){return"Using unaggregated domain with raw field has no effect (".concat(ik(e),").")}function unaggregateDomainWithNonSharedDomainOp(e){return'Unaggregated domain not applicable for "'.concat(e,'" since it produces values outside the origin domain of the source data.')}function unaggregatedDomainWithLogScale(e){return"Unaggregated domain is currently unsupported for log scale (".concat(ik(e),").")}function cannotApplySizeToNonOrientedMark(e){return'Cannot apply size to non-oriented mark "'.concat(e,'".')}function rangeStepDropped(e){return'rangeStep for "'.concat(e,'" is dropped as top-level ').concat("x"===e?"width":"height"," is provided.")}function scaleTypeNotWorkWithChannel(e,t,n){return'Channel "'.concat(e,'" does not work with "').concat(t,'" scale. We are using "').concat(n,'" scale instead.')}function scaleTypeNotWorkWithFieldDef(e,t){return'FieldDef does not work with "'.concat(e,'" scale. We are using "').concat(t,'" scale instead.')}function scalePropertyNotWorkWithScaleType(e,t,n){return"".concat(n,"-scale's \"").concat(t,'" is dropped as it does not work with ').concat(e," scale.")}function scaleTypeNotWorkWithMark(e,t){return'Scale type "'.concat(t,'" does not work with mark "').concat(e,'".')}function mergeConflictingProperty(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(ik(n)," and ").concat(ik(r),").  Using ").concat(ik(n),".")}function mergeConflictingDomainProperty(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(ik(n)," and ").concat(ik(r),").  Using the union of the two domains.")}function independentScaleMeansIndependentGuide(e){return'Setting the scale to be independent for "'.concat(e,'" means we also have to set the guide (axis or legend) to be independent.')}function domainSortDropped(e){return"Dropping sort property ".concat(ik(e)," as unioned domains only support boolean or op 'count'.")}var jS="Unable to merge domains",FS="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",IS="Invalid channel for axis.";function cannotStackRangedMark(e){return'Cannot stack "'.concat(e,'" if there is already "').concat(e,'2"')}function cannotStackNonLinearScale(e){return"Cannot stack non-linear scale (".concat(e,")")}function stackNonSummativeAggregate(e){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(e,'")')}function invalidTimeUnit(e,t){return"Invalid ".concat(e,": ").concat(ik(t))}function dayReplacedWithDate(e){return'Time unit "'.concat(e,'" is not supported. We are replacing it with ').concat(e.replace("day","date"),".")}function droppedDay(e){return"Dropping day from datetime ".concat(ik(e)," as day cannot be combined with other units.")}function errorBarCenterAndExtentAreNotNeeded(e,t){return"".concat(t?"extent ":"").concat(t&&e?"and ":"").concat(e?"center ":"").concat(t&&e?"are ":"is ","not needed when data are aggregated.")}function errorBarCenterIsUsedWithWrongExtent(e,t,n){return"".concat(e," is not usually used with ").concat(t," for ").concat(n,".")}function errorBarContinuousAxisHasCustomizedAggregate(e,t){return"Continuous axis should not have customized aggregation function ".concat(e,"; ").concat(t," already agregates the axis.")}function errorBarCenterIsNotNeeded(e,t){return"Center is not needed to be specified in ".concat(t," when extent is ").concat(e,".")}function errorBand1DNotSupport(e){return"1D error band does not support ".concat(e)}function channelRequiredForBinned(e){return"Channel ".concat(e,' is required for "binned" bin')}function domainRequiredForThresholdScale(e){return"Domain for ".concat(e," is required for threshold scale")}var LS=y,NS=function(e,t){var n=e||0;return{level:function level(e){return arguments.length?(n=+e,this):n},error:function error(){return n>=1&&logger_log(t||"error","ERROR",arguments),this},warn:function warn(){return n>=2&&logger_log(t||"warn","WARN",arguments),this},info:function info(){return n>=3&&logger_log(t||"log","INFO",arguments),this},debug:function debug(){return n>=4&&logger_log(t||"log","DEBUG",arguments),this}}}(2),BS=NS;function log_reset(){return BS=NS}function log_warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];BS.warn.apply(BS,arguments)}var US=2006;function isDateTime(e){return!!e&&(!!e.year||!!e.quarter||!!e.month||!!e.date||!!e.day||!!e.hours||!!e.minutes||!!e.seconds||!!e.milliseconds)}var zS,qS=["january","february","march","april","may","june","july","august","september","october","november","december"],WS=qS.map((function(e){return e.substr(0,3)})),GS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],HS=GS.map((function(e){return e.substr(0,3)}));function dateTimeExpr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(t&&void 0!==e.day&&ak(e).length>1&&(log_warn(LS.droppedDay(e)),delete(e=rk(e)).day),void 0!==e.year?r.push(e.year):void 0!==e.day?r.push(US):r.push(0),void 0!==e.month){var i=t?function normalizeMonth(e){if($w(e))return(e-1).toString();var t=e.toLowerCase(),n=qS.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=WS.indexOf(r);if(-1!==i)return i+"";throw new Error(LS.invalidTimeUnit("month",e))}(e.month):e.month;r.push(i)}else if(void 0!==e.quarter){var a=t?function normalizeQuarter(e){if($w(e))return e>4&&log_warn(LS.invalidTimeUnit("quarter",e)),(e-1).toString();throw new Error(LS.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;r.push(a+"*3")}else r.push(0);if(void 0!==e.date)r.push(e.date);else if(void 0!==e.day){var o=t?function normalizeDay(e){if($w(e))return e%7+"";var t=e.toLowerCase(),n=GS.indexOf(t);if(-1!==n)return n+"";var r=t.substr(0,3),i=HS.indexOf(r);if(-1!==i)return i+"";throw new Error(LS.invalidTimeUnit("day",e))}(e.day):e.day;r.push(o+"+1")}else r.push(1);for(var s=0,u=["hours","minutes","seconds","milliseconds"];s<u.length;s++){var l=u[s];void 0!==e[l]?r.push(e[l]):r.push(0)}var c=r.join(", ");return n?e.utc?new Function("return new Date(Date.UTC(".concat(c,"))"))().toJSON():new Function("return new Date(".concat(c,")"))().toJSON():e.utc?"utc(".concat(c,")"):"datetime(".concat(c,")")}function isFacetMapping(e){return!!e.row||!!e.column}function isFacetSpec(e){return void 0!==e.facet}!function(e){e.YEAR="year",e.MONTH="month",e.DAY="day",e.DATE="date",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.MILLISECONDS="milliseconds",e.YEARMONTH="yearmonth",e.YEARMONTHDATE="yearmonthdate",e.YEARMONTHDATEHOURS="yearmonthdatehours",e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes",e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds",e.MONTHDATE="monthdate",e.MONTHDATEHOURS="monthdatehours",e.HOURSMINUTES="hoursminutes",e.HOURSMINUTESSECONDS="hoursminutesseconds",e.MINUTESSECONDS="minutesseconds",e.SECONDSMILLISECONDS="secondsmilliseconds",e.QUARTER="quarter",e.YEARQUARTER="yearquarter",e.QUARTERMONTH="quartermonth",e.YEARQUARTERMONTH="yearquartermonth",e.UTCYEAR="utcyear",e.UTCMONTH="utcmonth",e.UTCDAY="utcday",e.UTCDATE="utcdate",e.UTCHOURS="utchours",e.UTCMINUTES="utcminutes",e.UTCSECONDS="utcseconds",e.UTCMILLISECONDS="utcmilliseconds",e.UTCYEARMONTH="utcyearmonth",e.UTCYEARMONTHDATE="utcyearmonthdate",e.UTCYEARMONTHDATEHOURS="utcyearmonthdatehours",e.UTCYEARMONTHDATEHOURSMINUTES="utcyearmonthdatehoursminutes",e.UTCYEARMONTHDATEHOURSMINUTESSECONDS="utcyearmonthdatehoursminutesseconds",e.UTCMONTHDATE="utcmonthdate",e.UTCMONTHDATEHOURS="utcmonthdatehours",e.UTCHOURSMINUTES="utchoursminutes",e.UTCHOURSMINUTESSECONDS="utchoursminutesseconds",e.UTCMINUTESSECONDS="utcminutesseconds",e.UTCSECONDSMILLISECONDS="utcsecondsmilliseconds",e.UTCQUARTER="utcquarter",e.UTCYEARQUARTER="utcyearquarter",e.UTCQUARTERMONTH="utcquartermonth",e.UTCYEARQUARTERMONTH="utcyearquartermonth"}(zS||(zS={}));var VS={year:1,quarter:1,month:1,day:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},YS=ak(VS);var $S={utcyear:1,utcquarter:1,utcmonth:1,utcday:1,utcdate:1,utchours:1,utcminutes:1,utcseconds:1,utcmilliseconds:1};var XS={utcyearquarter:1,utcyearquartermonth:1,utcyearmonth:1,utcyearmonthdate:1,utcyearmonthdatehours:1,utcyearmonthdatehoursminutes:1,utcyearmonthdatehoursminutesseconds:1,utcquartermonth:1,utcmonthdate:1,utcmonthdatehours:1,utchoursminutes:1,utchoursminutesseconds:1,utcminutesseconds:1,utcsecondsmilliseconds:1},KS=Object.assign({},$S,XS);function isUTCTimeUnit(e){return!!KS[e]}var JS=Object.assign({},VS,$S,{yearquarter:1,yearquartermonth:1,yearmonth:1,yearmonthdate:1,yearmonthdatehours:1,yearmonthdatehoursminutes:1,yearmonthdatehoursminutesseconds:1,quartermonth:1,monthdate:1,monthdatehours:1,hoursminutes:1,hoursminutesseconds:1,minutesseconds:1,secondsmilliseconds:1},XS);ak(JS);function containsTimeUnit(e,t){var n=e.indexOf(t);return n>-1&&(t!==zS.SECONDS||0===n||"i"!==e.charAt(n-1))}function timeunit_fieldExpr(e,t){var n=accessPathWithDatum(t),r=isUTCTimeUnit(e)?"utc":"";return dateTimeExpr(YS.reduce((function(t,i){return containsTimeUnit(e,i)&&(t[i]=function func(e){return e===zS.QUARTER?"(".concat(r,"quarter(").concat(n,")-1)"):"".concat(r).concat(e,"(").concat(n,")")}(i)),t}),{}))}function getDateTimeComponents(e,t){if(e){var n=[],r=containsTimeUnit(e,zS.YEAR);containsTimeUnit(e,zS.MONTH)&&n.push(!1!==t?"%b":"%B"),containsTimeUnit(e,zS.DAY)?n.push(t?"%a":"%A"):containsTimeUnit(e,zS.DATE)&&n.push("%d"+(r?",":"")),r&&n.push(t?"%y":"%Y");var i=[];containsTimeUnit(e,zS.HOURS)&&i.push("%H"),containsTimeUnit(e,zS.MINUTES)&&i.push("%M"),containsTimeUnit(e,zS.SECONDS)&&i.push("%S"),containsTimeUnit(e,zS.MILLISECONDS)&&i.push("%L");var a=[];return n.length>0&&a.push(n.join(" ")),i.length>0&&a.push(i.join(":")),a}}function normalizeTimeUnit(e){return"day"!==e&&e.indexOf("day")>=0?(log_warn(LS.dayReplacedWithDate(e)),e.replace("day","date")):e}var ZS={quantitative:1,ordinal:1,temporal:1,nominal:1,geojson:1};var QS="quantitative",eE="ordinal",tE="temporal",nE="nominal",rE="geojson";function toFieldDefBase(e){var t=e.field,n=e.timeUnit,r=e.bin,i=e.aggregate;return Object.assign({},n?{timeUnit:n}:{},r?{bin:r}:{},i?{aggregate:i}:{},{field:t})}function isConditionalDef(e){return!!e&&!!e.condition}function hasConditionalFieldDef(e){return!!e&&!!e.condition&&!Uw(e.condition)&&isFieldDef(e.condition)}function isFieldDef(e){return!!e&&(!!e.field||"count"===e.aggregate)}function isTypedFieldDef(e){return!!e&&(!!e.field&&!!e.type||"count"===e.aggregate)}function isStringFieldDef(e){return isFieldDef(e)&&qw(e.field)}function isValueDef(e){return e&&"value"in e&&void 0!==e.value}function isScaleFieldDef(e){return!!e&&(!!e.scale||!!e.sort)}function isTextFieldDef(e){return!!e&&!!e.format}function channeldef_vgField(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.field,r=t.prefix,i=t.suffix,a="";if(function isCount(e){return"count"===e.aggregate}(e))n=function internalField(e){return function isInternalField(e){return 0===e.indexOf("__")}(e)?e:"__".concat(e)}("count");else{var o;if(!t.nofn)if(function isOpFieldDef(e){return!!e.op}(e))o=e.op;else{var s=e.bin,u=e.aggregate,l=e.timeUnit;isBinning(s)?(o=binToString(s),i=(t.binSuffix||"")+(t.suffix||"")):u?isArgmaxDef(u)?(a=".".concat(n),n="argmax_".concat(u.argmax)):isArgminDef(u)?(a=".".concat(n),n="argmin_".concat(u.argmin)):o=String(u):l&&(o=String(l))}o&&(n=n?"".concat(o,"_").concat(n):o)}return i&&(n="".concat(n,"_").concat(i)),r&&(n="".concat(r,"_").concat(n)),t.forAs?n:t.expr?function flatAccessWithDatum(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"datum";return"".concat(t,"[").concat(stringValue_$(Bw(e).join(".")),"]")}(n,t.expr)+a:replacePathInField(n)+a}function channeldef_isContinuous(e){return!function channeldef_isDiscrete(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return!!e.bin;case"temporal":return!1}throw new Error(LS.invalidFieldType(e.type))}(e)}function verbalTitleFormatter(e,t){var n=e.field,r=e.bin,i=e.timeUnit,a=e.aggregate;if("count"===a)return t.countTitle;if(isBinning(r))return"".concat(n," (binned)");if(i){var o=function getTimeUnitParts(e){return YS.reduce((function(t,n){return containsTimeUnit(e,n)?[].concat(Object(Ra.a)(t),[n]):t}),[])}(i).join("-");return"".concat(n," (").concat(o,")")}return a?isArgmaxDef(a)?"".concat(n," for max ").concat(a.argmax):isArgminDef(a)?"".concat(n," for min ").concat(a.argmin):"".concat(titlecase(a)," of ").concat(n):n}var iE=function defaultTitleFormatter(e,t){switch(t.fieldTitle){case"plain":return e.field;case"functional":return function functionalTitleFormatter(e){var t=e.aggregate,n=e.bin,r=e.timeUnit,i=e.field;if(isArgmaxDef(t))return"".concat(i," for argmax(").concat(t.argmax,")");if(isArgminDef(t))return"".concat(i," for argmin(").concat(t.argmin,")");var a=t||r||isBinning(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}(e);default:return verbalTitleFormatter(e,t)}},aE=iE;function setTitleFormatter(e){aE=e}function channeldef_title(e,t,n){var r=n.allowDisabling,i=n.includeDefault,a=void 0===i||i,o=(getGuide(e)||{}).title,s=a?defaultTitle(e,t):void 0;return r?getFirstDefined(o,e.title,s):o||e.title||s}function getGuide(e){return function isPositionFieldDef(e){return!!e&&(!!e.axis||!!e.stack||!!e.impute)}(e)&&e.axis?e.axis:function isMarkPropFieldDef(e){return!!e&&!!e.legend}(e)&&e.legend?e.legend:function isFacetFieldDef(e){return!!e&&!!e.header}(e)&&e.header?e.header:void 0}function defaultTitle(e,t){return aE(e,t)}function channeldef_format(e){return isTextFieldDef(e)&&e.format?e.format:(getGuide(e)||{}).format}function getFieldDef(e){return isFieldDef(e)?e:hasConditionalFieldDef(e)?e.condition:void 0}function getTypedFieldDef(e){return isFieldDef(e)?e:hasConditionalFieldDef(e)?e.condition:void 0}function channeldef_normalize(e,t){if(qw(e)||$w(e)||Yw(e)){var n=qw(e)?"string":$w(e)?"number":"boolean";return log_warn(LS.primitiveChannelDef(t,n,e)),{value:e}}return isFieldDef(e)?normalizeFieldDef(e,t):hasConditionalFieldDef(e)?Object.assign({},e,{condition:normalizeFieldDef(e.condition,t)}):e}function normalizeFieldDef(e,t){var n=e,r=n.aggregate,i=n.timeUnit,a=n.bin;if(r&&!isAggregateOp(r)&&!isArgmaxDef(r)&&!isArgminDef(r)){e.aggregate;var o=__rest(e,["aggregate"]);log_warn(LS.invalidAggregate(r)),e=o}if(i&&(e=Object.assign({},e,{timeUnit:normalizeTimeUnit(i)})),isBinning(a)&&(e=Object.assign({},e,{bin:normalizeBin(a,t)})),bin_isBinned(a)&&!util_contains(mS,t)&&log_warn("Channel ".concat(t,' should not be used with "binned" bin')),isTypedFieldDef(e)){var s=e.type,u=function getFullName(e){if(e)switch(e=e.toLowerCase()){case"q":case QS:return"quantitative";case"t":case tE:return"temporal";case"o":case eE:return"ordinal";case"n":case nE:return"nominal";case rE:return"geojson"}}(s);s!==u&&(e=Object.assign({},e,{type:u})),"quantitative"!==s&&isCountingAggregateOp(r)&&(log_warn(LS.invalidFieldTypeForCountAggregate(s,r)),e=Object.assign({},e,{type:"quantitative"}))}else if(!isSecondaryRangeChannel(t)){var l=function defaultType(e,t){if(e.timeUnit)return"temporal";if(isBinning(e.bin))return"quantitative";switch(rangeType(t)){case"continuous":return"quantitative";case"discrete":case"flexible":return"nominal";default:return"quantitative"}}(e,t);log_warn(LS.missingFieldType(t,l)),e=Object.assign({},e,{type:l})}if(isTypedFieldDef(e)){var c=function channelCompatibility(e,t){var n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:"Channel ".concat(t," should not be used with a geojson data.")};switch(t){case"row":case"column":case"facet":return channeldef_isContinuous(e)?{compatible:!1,warning:LS.facetChannelShouldBeDiscrete(t)}:oE;case"x":case"y":case"color":case"fill":case"stroke":case"text":case"detail":case"key":case"tooltip":case"href":return oE;case"longitude":case"longitude2":case"latitude":case"latitude2":return n!==QS?{compatible:!1,warning:"Channel ".concat(t," should be used with a quantitative field only, not ").concat(e.type," field.")}:oE;case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":case"size":case"x2":case"y2":return"nominal"!==n||e.sort?oE:{compatible:!1,warning:"Channel ".concat(t," should not be used with an unsorted discrete field.")};case"shape":return util_contains(["ordinal","nominal","geojson"],e.type)?oE:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case"order":return"nominal"!==e.type||"sort"in e?oE:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}throw new Error("channelCompatability not implemented for channel "+t)}(e,t),f=c.compatible,d=c.warning;f||log_warn(d)}return Object.assign({},e,void 0!==e.field?{field:"".concat(e.field)}:{})}function normalizeBin(e,t){return Yw(e)?{maxbins:autoMaxBins(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:Object.assign({},e,{maxbins:autoMaxBins(t)})}var oE={compatible:!0};function isTimeFormatFieldDef(e){var t=getGuide(e),n=t&&t.formatType||isTextFieldDef(e)&&e.formatType;return"time"===n||!n&&function isTimeFieldDef(e){return"temporal"===e.type||!!e.timeUnit}(e)}function valueExpr(e,t){var n,r,i=t.timeUnit,a=t.type,o=t.time,s=t.undefinedIfExprNotRequired;return isDateTime(e)?n=dateTimeExpr(e,!0):(qw(e)||$w(e))&&(i||"temporal"===a)&&(n=function isLocalSingleTimeUnit(e){return!!VS[e]}(i)?dateTimeExpr(Object(po.a)({},i,e),!0):function isUtcSingleTimeUnit(e){return!!$S[e]}(i)?valueExpr(e,{timeUnit:(r=i,r.substr(3))}):"datetime(".concat(JSON.stringify(e),")")),n?o?"time(".concat(n,")"):n:s?void 0:JSON.stringify(e)}function valueArray(e,t){var n=e.timeUnit,r=e.type;return t.map((function(e){var t=valueExpr(e,{timeUnit:n,type:r,undefinedIfExprNotRequired:!0});return void 0!==t?{signal:t}:e}))}function binRequiresRange(e,t){return isBinning(e.bin)?isScaleChannel(t)&&util_contains(["ordinal","nominal"],e.type):(console.warn("Only use this method with binned field defs"),!1)}function binToString(e){return Yw(e)&&(e=normalizeBin(e,void 0)),"bin"+ak(e).map((function(t){return varName("_".concat(t,"_").concat(e[t]))})).join("")}function isBinning(e){return!0===e||isBinParams(e)&&!e.binned}function bin_isBinned(e){return"binned"===e||isBinParams(e)&&e.binned}function isBinParams(e){return zw(e)}function autoMaxBins(e){switch(e){case Rk:case Dk:case Hk:case zk:case qk:case Wk:case Xk:case Vk:case Yk:case $k:case Gk:return 6;default:return 10}}function encoding_channelHasField(e,t){var n=e&&e[t];return!!n&&(Uw(n)?some(n,(function(e){return!!e.field})):isFieldDef(n)||hasConditionalFieldDef(n))}function encoding_isAggregate(e){return some(lS,(function(t){if(encoding_channelHasField(e,t)){var n=e[t];if(Uw(n))return some(n,(function(e){return!!e.aggregate}));var r=getFieldDef(n);return r&&!!r.aggregate}return!1}))}function extractTransformsFromEncoding(e,t){var n=[],r=[],i=[],a=[],o={};return forEach(e,(function(s,u){if(isFieldDef(s)){var l=s.field,c=s.aggregate,f=s.timeUnit,d=s.bin,h=__rest(s,["field","aggregate","timeUnit","bin"]);if(c||f||d){var p,g=getGuide(s),m=g&&g.title,v=channeldef_vgField(s,{forAs:!0}),y=Object.assign({},m?[]:{title:channeldef_title(s,t,{allowDisabling:!0})},h,{field:v}),_="x"===u||"y"===u;if(c){if(isArgmaxDef(c)?(p="argmax",v=channeldef_vgField({aggregate:"argmax",field:c.argmax},{forAs:!0}),y.field="".concat(v,".").concat(l)):isArgminDef(c)?(p="argmin",v=channeldef_vgField({aggregate:"argmin",field:c.argmin},{forAs:!0}),y.field="".concat(v,".").concat(l)):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(p=c),p){var b={op:p,as:v};l&&(b.field=l),a.push(b)}}else if(n.push(v),isTypedFieldDef(s)&&isBinning(d)){if(r.push({bin:d,field:l,as:v}),n.push(channeldef_vgField(s,{binSuffix:"end"})),binRequiresRange(s,u)&&n.push(channeldef_vgField(s,{binSuffix:"range"})),_){var x={field:v+"_end"};o[u+"2"]=x}y.bin="binned",isSecondaryRangeChannel(u)||(y.type="quantitative")}else if(f){i.push({timeUnit:f,field:l,as:v});var w=getDateTimeComponents(f,t.axis.shortTimeLabels).join(" "),k=isTypedFieldDef(s)&&s.type!==tE&&"time";"text"===u||"tooltip"===u?(y.format=y.format||w,k&&(y.formatType=k)):!function isNonPositionScaleChannel(e){return!!hS[e]}(u)?_&&(y.axis=Object.assign({format:w},k?{formatType:k}:{},y.axis)):y.legend=Object.assign({format:w},k?{formatType:k}:{},y.legend)}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]})),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:o}}function normalizeEncoding(e,t){return ak(e).reduce((function(n,r){if(!isChannel(r))return log_warn(LS.invalidEncodingChannel(r)),n;if(!function markChannelCompatible(e,t,n){var r=supportMark(t,n);if(!r)return!1;if("binned"===r){var i=e["x2"===t?"x":"y"];return!!(isFieldDef(i)&&isFieldDef(e[t])&&bin_isBinned(i.bin))}return!0}(e,r,t))return log_warn(LS.incompatibleChannel(r,t)),n;if("size"===r&&"line"===t){var i=getTypedFieldDef(e[r]);if(i&&i.aggregate)return log_warn(LS.LINE_WITH_VARYING_SIZE),n}if("color"===r&&("fill"in e||"stroke"in e))return log_warn(LS.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),n;var a=e[r];if("detail"===r||"order"===r&&!Uw(a)&&!isValueDef(a)||"tooltip"===r&&Uw(a))a&&(n[r]=(Uw(a)?a:[a]).reduce((function(e,t){return isFieldDef(t)?e.push(normalizeFieldDef(t,r)):log_warn(LS.emptyFieldDef(t,r)),e}),[]));else{if("tooltip"===r&&null===a)n[r]=null;else if(!isFieldDef(a)&&!isValueDef(a)&&!isConditionalDef(a))return log_warn(LS.emptyFieldDef(a,r)),n;n[r]=channeldef_normalize(a,r)}return n}),{})}function fieldDefs(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=ak(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(encoding_channelHasField(e,s)){var u=e[s];(Uw(u)?u:[u]).forEach((function(e){isFieldDef(e)?t.push(e):hasConditionalFieldDef(e)&&t.push(e.condition)}))}}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}function forEach(e,t,n){if(e){var r=!0,i=!1,a=void 0;try{for(var o,s=function _loop(){var r=o.value,i=e[r];Uw(i)?i.forEach((function(e){t.call(n,e,r)})):t.call(n,i,r)},u=ak(e)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(l){i=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}}function encoding_reduce(e,t,n,r){return e?ak(e).reduce((function(n,i){var a=e[i];return Uw(a)?a.reduce((function(e,n){return t.call(r,e,n,i)}),n):t.call(r,n,a,i)}),n):n}function pathGroupingFields(e,t){return ak(t).reduce((function(n,r){switch(r){case"x":case"y":case"href":case"x2":case"y2":case"latitude":case"longitude":case"latitude2":case"longitude2":case"text":case"shape":case"tooltip":return n;case"order":if("line"===e||"trail"===e)return n;case"detail":case"key":var i=t[r];return(Uw(i)||isFieldDef(i))&&(Uw(i)?i:[i]).forEach((function(e){e.aggregate||n.push(channeldef_vgField(e,{}))})),n;case"size":if("trail"===e)return n;case"color":case"fill":case"stroke":case"opacity":case"fillOpacity":case"strokeOpacity":case"strokeWidth":var a=getTypedFieldDef(t[r]);return a&&!a.aggregate&&n.push(channeldef_vgField(a,{})),n}}),[])}function getCompositeMarkTooltip(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("tooltip"in n)return{tooltip:n.tooltip};var i=e.map((function(e){var n=e.fieldPrefix,i=e.titlePrefix;return{field:n+t.field,type:t.type,title:i+(r?" of "+t.field:"")}}));return{tooltip:[].concat(Object(Ra.a)(i),Object(Ra.a)(fieldDefs(n)))}}function makeCompositeAggregatePartFactory(e,t,n,r,i){var a=n.scale,o=n.axis;return function(s){var u=s.partName,l=s.mark,c=s.positionPrefix,f=s.endPositionPrefix,d=void 0===f?void 0:f,h=s.extraEncoding,p=void 0===h?{}:h,g=o&&void 0!==o.title?void 0:void 0!==n.title?n.title:n.field;return partLayerMixins(e,u,i,{mark:l,encoding:Object.assign(Object(po.a)({},t,Object.assign({field:c+"_"+n.field,type:n.type},g?{title:g}:{},a?{scale:a}:{},o?{axis:o}:{})),qw(d)?Object(po.a)({},t+"2",{field:d+"_"+n.field,type:n.type}):{},r,p)})}}function partLayerMixins(e,t,n,r){var i=e.clip,a=e.color,o=e.opacity,s=e.type;return e[t]||void 0===e[t]&&n[t]?[Object.assign({},r,{mark:Object.assign({},n[t],i?{clip:i}:{},a?{color:a}:{},o?{opacity:o}:{},isMarkDef(r.mark)?r.mark:{type:r.mark},{style:"".concat(s,"-").concat(t)},Yw(e[t])?{}:e[t])})]:[]}function compositeMarkContinuousAxis(e,t,n){var r=e.encoding,i="vertical"===t?"y":"x",a=r[i],o=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:filterAggregateFromChannelDef(a,n),continuousAxisChannelDef2:filterAggregateFromChannelDef(o,n),continuousAxisChannelDefError:filterAggregateFromChannelDef(s,n),continuousAxisChannelDefError2:filterAggregateFromChannelDef(u,n),continuousAxis:i}}function filterAggregateFromChannelDef(e,t){if(e&&e.aggregate){var n=e.aggregate,r=__rest(e,["aggregate"]);return n!==t&&log_warn(LS.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function compositeMarkOrient(e,t){var n=e.mark,r=e.encoding;if(isFieldDef(r.x)&&channeldef_isContinuous(r.x)){if(isFieldDef(r.y)&&channeldef_isContinuous(r.y)){if(void 0===r.x.aggregate&&r.y.aggregate===t)return"vertical";if(void 0===r.y.aggregate&&r.x.aggregate===t)return"horizontal";if(r.x.aggregate===t&&r.y.aggregate===t)throw new Error("Both x and y cannot have aggregate");return isMarkDef(n)&&n.orient?n.orient:"vertical"}return"horizontal"}if(isFieldDef(r.y)&&channeldef_isContinuous(r.y))return"vertical";throw new Error("Need a valid continuous axis for "+t+"s")}var sE="boxplot",uE=ak({box:1,median:1,outliers:1,rule:1,ticks:1}),lE=new Ek(sE,normalizeBoxPlot);function getBoxPlotType(e){return $w(e)?"tukey":e}function normalizeBoxPlot(e,t){var n=t.config,r=e.mark,i=(e.encoding,e.selection),a=(e.projection,__rest(e,["mark","encoding","selection","projection"])),o=isMarkDef(r)?r:{type:r};i&&log_warn(LS.selectionNotSupported("boxplot"));var s,u=o.extent||n.boxplot.extent,l=getFirstDefined(o.size,n.boxplot.size),c=getBoxPlotType(u),f=function boxParams(e,t,n){var r=compositeMarkOrient(e,sE),i=compositeMarkContinuousAxis(e,r,sE),a=i.continuousAxisChannelDef,o=i.continuousAxis,s=a.field,u=getBoxPlotType(t),l=[].concat(Object(Ra.a)(boxParamsQuartiles(s)),[{op:"median",field:s,as:"mid_box_"+s},{op:"min",field:s,as:("min-max"===u?"lower_whisker_":"min_")+s},{op:"max",field:s,as:("min-max"===u?"upper_whisker_":"max_")+s}]),c="min-max"===u||"tukey"===u?[]:[{calculate:'datum["upper_box_'.concat(s,'"] - datum["lower_box_').concat(s,'"]'),as:"iqr_"+s},{calculate:'min(datum["upper_box_'.concat(s,'"] + datum["iqr_').concat(s,'"] * ').concat(t,', datum["max_').concat(s,'"])'),as:"upper_whisker_"+s},{calculate:'max(datum["lower_box_'.concat(s,'"] - datum["iqr_').concat(s,'"] * ').concat(t,', datum["min_').concat(s,'"])'),as:"lower_whisker_"+s}],f=e.encoding,d=o,h=(f[d],function filterTooltipWithAggregatedField(e){var t,n,r=e.tooltip,i=__rest(e,["tooltip"]);return r?(Uw(r)?(r.forEach((function(e){e.aggregate?(t||(t=[]),t.push(e)):(n||(n=[]),n.push(e))})),t&&(i.tooltip=t)):r.aggregate?i.tooltip=r:n=r,Uw(n)&&1===n.length&&(n=n[0]),{customTooltipWithoutAggregatedField:n,filteredEncoding:i}):{filteredEncoding:e}}(__rest(f,["symbol"===typeof d?d:d+""]))),p=h.customTooltipWithoutAggregatedField,g=extractTransformsFromEncoding(h.filteredEncoding,n),m=g.bins,v=g.timeUnits,y=g.aggregate,_=g.groupby,b=g.encoding,x="vertical"===r?"horizontal":"vertical";return{transform:[].concat(Object(Ra.a)(m),Object(Ra.a)(v),[{aggregate:[].concat(Object(Ra.a)(y),Object(Ra.a)(l)),groupby:_}],c),groupby:_,aggregate:y,continuousAxisChannelDef:a,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,customTooltipWithoutAggregatedField:p}}(e,u,n),d=f.transform,h=f.continuousAxisChannelDef,p=f.continuousAxis,g=f.groupby,m=f.aggregate,v=f.encodingWithoutContinuousAxis,y=f.ticksOrient,_=f.customTooltipWithoutAggregatedField,b=(v.color,v.size),x=__rest(v,["color","size"]),w=function makeBoxPlotPart(e){return makeCompositeAggregatePartFactory(o,p,h,e,n.boxplot)},k=w(x),S=w(v),E=w(Object.assign({},x,b?{size:b}:{})),T=getCompositeMarkTooltip([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],h,v),C={type:"tick",color:"black",opacity:1,orient:y},O="min-max"===c?T:getCompositeMarkTooltip([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],h,v),A=[].concat(Object(Ra.a)(k({partName:"rule",mark:"rule",positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:O})),Object(Ra.a)(k({partName:"rule",mark:"rule",positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:O})),Object(Ra.a)(k({partName:"ticks",mark:C,positionPrefix:"lower_whisker",extraEncoding:O})),Object(Ra.a)(k({partName:"ticks",mark:C,positionPrefix:"upper_whisker",extraEncoding:O}))),R=[].concat(Object(Ra.a)("tukey"!==c?A:[]),Object(Ra.a)(S({partName:"box",mark:Object.assign({type:"bar"},l?{size:l}:{}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T})),Object(Ra.a)(E({partName:"median",mark:Object.assign({type:"tick"},zw(n.boxplot.median)&&n.boxplot.median.color?{color:n.boxplot.median.color}:{},l?{size:l}:{},{orient:y}),positionPrefix:"mid_box",extraEncoding:T})));if("min-max"!==c){var D='datum["lower_box_'.concat(h.field,'"]'),P='datum["upper_box_'.concat(h.field,'"]'),M="(".concat(P," - ").concat(D,")"),j="".concat(D," - ").concat(u," * ").concat(M),F="".concat(P," + ").concat(u," * ").concat(M),I='datum["'.concat(h.field,'"]'),L={joinaggregate:boxParamsQuartiles(h.field),groupby:g},N=void 0;"tukey"===c&&(N={transform:[{filter:"(".concat(j," <= ").concat(I,") && (").concat(I," <= ").concat(F,")")},{aggregate:[{op:"min",field:h.field,as:"lower_whisker_"+h.field},{op:"max",field:h.field,as:"upper_whisker_"+h.field},{op:"min",field:"lower_box_"+h.field,as:"lower_box_"+h.field},{op:"max",field:"upper_box_"+h.field,as:"upper_box_"+h.field}].concat(Object(Ra.a)(m)),groupby:g}],layer:A});x.tooltip;var B=__rest(x,["tooltip"]),U=partLayerMixins(o,"outliers",n.boxplot,{transform:[{filter:"(".concat(I," < ").concat(j,") || (").concat(I," > ").concat(F,")")}],mark:"point",encoding:Object.assign(Object(po.a)({},p,{field:h.field,type:h.type}),B,_?{tooltip:_}:{})})[0];U&&N?s={transform:[L],layer:[U,N]}:U?(s=U).transform.unshift(L):N&&(s=N).transform.unshift(L)}return s?Object.assign({},a,{layer:[].concat(Object(Ra.a)(s?[s]:[]),[{transform:d,layer:R}])}):Object.assign({},a,{transform:(a.transform||[]).concat(d),layer:R})}function boxParamsQuartiles(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}var cE="errorbar",fE=ak({ticks:1,rule:1}),dE=new Ek(cE,normalizeErrorBar);function normalizeErrorBar(e,t){var n=t.config,r=errorBarParams(e,cE,n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,s=r.encodingWithoutContinuousAxis,u=r.ticksOrient,l=r.markDef,c=r.outerSpec,f=r.tooltipEncoding,d=makeCompositeAggregatePartFactory(l,o,a,s,n.errorbar),h={type:"tick",orient:u};return Object.assign({},c,{transform:i,layer:[].concat(Object(Ra.a)(d({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:f})),Object(Ra.a)(d({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:f})),Object(Ra.a)(d({partName:"rule",mark:"rule",positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})))})}function errorBarOrientAndInputType(e,t){var n=e.encoding;if(function errorBarIsInputTypeRaw(e){return(isFieldDef(e.x)||isFieldDef(e.y))&&!isFieldDef(e.x2)&&!isFieldDef(e.y2)&&!isFieldDef(e.xError)&&!isFieldDef(e.xError2)&&!isFieldDef(e.yError)&&!isFieldDef(e.yError2)}(n))return{orient:compositeMarkOrient(e,t),inputType:"raw"};var r=function errorBarIsInputTypeAggregatedUpperLower(e){return isFieldDef(e.x2)||isFieldDef(e.y2)}(n),i=function errorBarIsInputTypeAggregatedError(e){return isFieldDef(e.xError)||isFieldDef(e.xError2)||isFieldDef(e.yError)||isFieldDef(e.yError2)}(n),a=n.x,o=n.y;if(r){if(i)throw new Error(t+" cannot be both type aggregated-upper-lower and aggregated-error");var s=n.x2,u=n.y2;if(isFieldDef(s)&&isFieldDef(u))throw new Error(t+" cannot have both x2 and y2");if(isFieldDef(s)){if(isFieldDef(a)&&channeldef_isContinuous(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in "+t)}if(isFieldDef(u)){if(isFieldDef(o)&&channeldef_isContinuous(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in "+t)}throw new Error("No ranged axis")}var l=n.xError,c=n.xError2,f=n.yError,d=n.yError2;if(isFieldDef(c)&&!isFieldDef(l))throw new Error(t+" cannot have xError2 without xError");if(isFieldDef(d)&&!isFieldDef(f))throw new Error(t+" cannot have yError2 without yError");if(isFieldDef(l)&&isFieldDef(f))throw new Error(t+" cannot have both xError and yError with both are quantiative");if(isFieldDef(l)){if(isFieldDef(a)&&channeldef_isContinuous(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(isFieldDef(f)){if(isFieldDef(o)&&channeldef_isContinuous(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}function errorBarParams(e,t,n){var r=e.mark,i=e.encoding,a=e.selection,o=(e.projection,__rest(e,["mark","encoding","selection","projection"])),s=isMarkDef(r)?r:{type:r};a&&log_warn(LS.selectionNotSupported(t));var u=errorBarOrientAndInputType(e,t),l=u.orient,c=u.inputType,f=compositeMarkContinuousAxis(e,l,t),d=f.continuousAxisChannelDef,h=f.continuousAxisChannelDef2,p=f.continuousAxisChannelDefError,g=f.continuousAxisChannelDefError2,m=f.continuousAxis,v=function errorBarAggregationAndCalculation(e,t,n,r,i,a,o,s){var u,l=[],c=[],f=t.field,d=!1;if("raw"===a){var h,p,g,m=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,v=e.extent?e.extent:"mean"===m?"stderr":"iqr";if("median"===m!==("iqr"===v)&&log_warn(LS.errorBarCenterIsUsedWithWrongExtent(m,v,o)),"stderr"===v||"stdev"===v)l=[{op:v,field:f,as:"extent_"+f},{op:m,field:f,as:"center_"+f}],c=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],u=[{fieldPrefix:"center_",titlePrefix:titlecase(m)},{fieldPrefix:"upper_",titlePrefix:getTitlePrefix(m,v,"+")},{fieldPrefix:"lower_",titlePrefix:getTitlePrefix(m,v,"-")}],d=!0;else e.center&&e.extent&&log_warn(LS.errorBarCenterIsNotNeeded(e.extent,o)),"ci"===v?(h="mean",p="ci0",g="ci1"):(h="median",p="q1",g="q3"),l=[{op:p,field:f,as:"lower_"+f},{op:g,field:f,as:"upper_"+f},{op:h,field:f,as:"center_"+f}],u=[{fieldPrefix:"upper_",titlePrefix:channeldef_title({field:f,aggregate:g,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:channeldef_title({field:f,aggregate:p,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:channeldef_title({field:f,aggregate:h,type:"quantitative"},s,{allowDisabling:!1})}]}else{(e.center||e.extent)&&log_warn(LS.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===a?(u=[],c=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===a&&(u=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],i?c.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_"+f}):c.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var y=!0,_=!1,b=void 0;try{for(var x,w=c[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var k=x.value;u.push({fieldPrefix:k.as.substring(0,6),titlePrefix:k.calculate.replace(new RegExp('datum\\[\\"',"g"),"").replace(new RegExp('\\"\\]',"g"),"")})}}catch(S){_=!0,b=S}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:u,tooltipTitleWithFieldName:d}}(s,d,h,p,g,c,t,n),y=v.errorBarSpecificAggregate,_=v.postAggregateCalculates,b=v.tooltipSummary,x=v.tooltipTitleWithFieldName,w=m,k=(i[w],"x"===m?"x2":"y2"),S=(i[k],"x"===m?"xError":"yError"),E=(i[S],"x"===m?"xError2":"yError2"),T=(i[E],extractTransformsFromEncoding(__rest(i,["symbol"===typeof w?w:w+"","symbol"===typeof k?k:k+"","symbol"===typeof S?S:S+"","symbol"===typeof E?E:E+""]),n)),C=T.bins,O=T.timeUnits,A=T.aggregate,R=T.groupby,D=T.encoding,P=[].concat(Object(Ra.a)(A),Object(Ra.a)(y)),M="raw"!==c?[]:R,j=getCompositeMarkTooltip(b,d,D,x);return{transform:[].concat(Object(Ra.a)(o.transform||[]),Object(Ra.a)(C),Object(Ra.a)(O),Object(Ra.a)(P.length?[{aggregate:P,groupby:M}]:[]),Object(Ra.a)(_)),groupby:M,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:s,outerSpec:o,tooltipEncoding:j}}function getTitlePrefix(e,t,n){return titlecase(e)+" "+n+" "+t}var hE="errorband",pE=ak({band:1,borders:1}),gE=new Ek(hE,normalizeErrorBand);function normalizeErrorBand(e,t){var n=t.config,r=errorBarParams(e,hE,n),i=r.transform,a=r.continuousAxisChannelDef,o=r.continuousAxis,s=r.encodingWithoutContinuousAxis,u=r.markDef,l=r.outerSpec,c=r.tooltipEncoding,f=u,d=makeCompositeAggregatePartFactory(f,o,a,s,n.errorband),h=void 0!==e.encoding.x&&void 0!==e.encoding.y,p={type:h?"area":"rect"},g={type:h?"line":"rule"},m=Object.assign({},f.interpolate?{interpolate:f.interpolate}:{},f.tension&&f.interpolate?{interpolate:f.tension}:{});return h?(p=Object.assign({},p,m),g=Object.assign({},g,m)):f.interpolate?log_warn(LS.errorBand1DNotSupport("interpolate")):f.tension&&log_warn(LS.errorBand1DNotSupport("tension")),Object.assign({},l,{transform:i,layer:[].concat(Object(Ra.a)(d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})),Object(Ra.a)(d({partName:"borders",mark:g,positionPrefix:"lower",extraEncoding:c})),Object(Ra.a)(d({partName:"borders",mark:g,positionPrefix:"upper",extraEncoding:c})))})}var mE={};function compositemark_add(e,t,n){var r=new Ek(e,t);mE[e]={normalizer:r,parts:n}}compositemark_add(sE,normalizeBoxPlot,uE),compositemark_add(cE,normalizeErrorBar,fE),compositemark_add(hE,normalizeErrorBand,pE);var vE,yE=["shortTimeLabels"],_E=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength"],bE={clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},xE=Object.assign({},bE,{opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,encode:1}),wE=ak(bE),kE=ak(xE);!function(e){e.LINEAR="linear",e.LOG="log",e.POW="pow",e.SQRT="sqrt",e.SYMLOG="symlog",e.TIME="time",e.UTC="utc",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.BIN_ORDINAL="bin-ordinal",e.ORDINAL="ordinal",e.POINT="point",e.BAND="band"}(vE||(vE={}));var SE={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},EE=ak(SE);var TE={linear:0,log:1,pow:1,sqrt:1,symlog:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function scaleTypePrecedence(e){return TE[e]}var CE=["linear","log","pow","sqrt","symlog","time","utc"],OE=Xw(CE),AE=Xw(["quantile","quantize","threshold"]),RE=Xw(CE.concat(["quantile","quantize","threshold"])),DE=Xw(["ordinal","bin-ordinal","point","band"]);function hasDiscreteDomain(e){return e in DE}function hasContinuousDomain(e){return e in RE}function isContinuousToContinuous(e){return e in OE}function isContinuousToDiscrete(e){return e in AE}var PE={textXRangeStep:90,rangeStep:20,pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function isSelectionDomain(e){return e&&e.selection}var ME={type:1,domain:1,align:1,range:1,rangeStep:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},jE=(ak(ME),__rest(ME,["type","domain","range","rangeStep","scheme"])),FE=ak(jE);(function generateScaleTypeIndex(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=lS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,u=!1,l=void 0;try{for(var c,f=ak(ZS)[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value,h=!0,p=!1,g=void 0;try{for(var m,v=EE[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value,_=generateScaleTypeIndexKey(o,d);channelSupportScaleType(o,y)&&scaleTypeSupportDataType(y,d)&&(e[_]=e[_]||[],e[_].push(y))}}catch(b){p=!0,g=b}finally{try{h||null==v.return||v.return()}finally{if(p)throw g}}}}catch(b){u=!0,l=b}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}}catch(b){n=!0,r=b}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e})();function scaleTypeSupportProperty(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!util_contains(["point","band","identity"],e);case"bins":return!util_contains(["point","band","identity","ordinal"],e);case"round":return isContinuousToContinuous(e)||"band"===e||"point"===e;case"padding":return isContinuousToContinuous(e)||util_contains(["point","band"],e);case"paddingOuter":case"rangeStep":case"align":return util_contains(["point","band"],e);case"paddingInner":return"band"===e;case"clamp":return isContinuousToContinuous(e);case"nice":return isContinuousToContinuous(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return hasContinuousDomain(e)&&!util_contains(["log","time","utc","threshold","quantile"],e)}}function channelScalePropertyIncompatability(e,t){switch(t){case"interpolate":case"scheme":return isColorChannel(e)?void 0:LS.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeStep":case"reverse":case"round":case"clamp":case"zero":return}}function scaleTypeSupportDataType(e,t){return util_contains([eE,nE],t)?void 0===e||hasDiscreteDomain(e):t===tE?util_contains([vE.TIME,vE.UTC,void 0],e):t!==QS||util_contains([vE.LOG,vE.POW,vE.SQRT,vE.SYMLOG,vE.QUANTILE,vE.QUANTIZE,vE.THRESHOLD,vE.LINEAR,void 0],e)}function channelSupportScaleType(e,t){switch(e){case Mk:case jk:return isContinuousToContinuous(t)||util_contains(["band","point"],t);case Hk:case Xk:case Vk:case Yk:case $k:return isContinuousToContinuous(t)||isContinuousToDiscrete(t)||util_contains(["band","point"],t);case zk:case qk:case Wk:return"band"!==t;case Gk:return"ordinal"===t}return!1}function generateScaleTypeIndexKey(e,t){return e+"_"+t}var IE="_vgsid_";function isIntervalSelection(e){return"interval"===e.type}var LE={single:{on:"click",fields:[IE],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[IE],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function isConcatSpec(e){return void 0!==e.concat}function isVConcatSpec(e){return void 0!==e.vconcat}function isHConcatSpec(e){return void 0!==e.hconcat}function isRepeatSpec(e){return void 0!==e.repeat}var NE=ak({align:1,bounds:1,center:1,columns:1,spacing:1});function extractTitleConfig(e){var t=e.anchor,n=e.frame,r=e.offset,i=e.orient,a=e.color,o=__rest(e,["anchor","frame","offset","orient","color"]);return{mark:Object.assign({},o,a?{fill:a}:{}),nonMark:Object.assign({},t?{anchor:t}:{},n?{frame:n}:{},r?{offset:r}:{},i?{orient:i}:{})}}var BE={padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",invalidValues:"filter",view:{width:200,height:200},mark:{color:"#4c78a8",tooltip:{content:"encoding"}},area:{},bar:kk,circle:{},geoshape:{},line:{},point:{},rect:Sk,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:PE,projection:{},axis:{},axisX:{},axisY:{},axisLeft:{},axisRight:{},axisTop:{},axisBottom:{},axisBand:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:LE,style:{},title:{},facet:{spacing:20},repeat:{spacing:20},concat:{spacing:20}};function initConfig(e){return mergeDeep(rk(BE),e)}var UE=["view"].concat(Object(Ra.a)(bk)),zE=["padding","facet","concat","repeat","numberFormat","timeFormat","countTitle","header","stack","scale","selection","invalidValues","overlay"],qE=Object.assign({view:["width","height"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],text:["shortTimeLabels"],tick:["bandSize","thickness"]});function stripAndRedirectConfig(e){e=rk(e);var t=!0,n=!1,r=void 0;try{for(var i,a=zE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){delete e[i.value]}}catch(te){n=!0,r=te}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}if(e.axis){var o=!0,s=!1,u=void 0;try{for(var l,c=yE[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;delete e.axis[f]}}catch(te){s=!0,u=te}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}if(e.legend){var d=!0,h=!1,p=void 0;try{for(var g,m=yE[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;delete e.legend[v]}}catch(te){h=!0,p=te}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}var y=!0,_=!1,b=void 0;try{for(var x,w=_E[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var k=x.value;delete e.legend[k]}}catch(te){_=!0,b=te}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}if(e.mark){var S=!0,E=!1,T=void 0;try{for(var C,O=wk[Symbol.iterator]();!(S=(C=O.next()).done);S=!0){var A=C.value;delete e.mark[A]}}catch(te){E=!0,T=te}finally{try{S||null==O.return||O.return()}finally{if(E)throw T}}}var R=!0,D=!1,P=void 0;try{for(var M,j=UE[Symbol.iterator]();!(R=(M=j.next()).done);R=!0){var F=M.value,I=!0,L=!1,N=void 0;try{for(var B,U=wk[Symbol.iterator]();!(I=(B=U.next()).done);I=!0){var z=B.value;delete e[F][z]}}catch(te){L=!0,N=te}finally{try{I||null==U.return||U.return()}finally{if(L)throw N}}var q=qE[F];if(q){var W=!0,G=!1,H=void 0;try{for(var V,Y=q[Symbol.iterator]();!(W=(V=Y.next()).done);W=!0){var $=V.value;delete e[F][$]}}catch(te){G=!0,H=te}finally{try{W||null==Y.return||Y.return()}finally{if(G)throw H}}}redirectConfig(e,F)}}catch(te){D=!0,P=te}finally{try{R||null==j.return||j.return()}finally{if(D)throw P}}var X=!0,K=!1,J=void 0;try{for(var Z,Q=function getAllCompositeMarks(){return ak(mE)}()[Symbol.iterator]();!(X=(Z=Q.next()).done);X=!0){delete e[Z.value]}}catch(te){K=!0,J=te}finally{try{X||null==Q.return||Q.return()}finally{if(K)throw J}}for(var ee in redirectConfig(e,"title","group-title"),e)zw(e[ee])&&0===ak(e[ee]).length&&delete e[ee];return ak(e).length>0?e:void 0}function redirectConfig(e,t,n,r){var i="title"===t?extractTitleConfig(e.title).mark:r?e[t][r]:e[t];"view"===t&&(n="cell");var a=Object.assign({},i,e.style[t]);ak(a).length>0&&(e.style[n||t]=a),r||delete e[t]}var WE=n(7),GE=n(4);function get_get(e,t,n){return(get_get="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var r=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(GE.a)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var HE=n(8);function isLayerSpec(e){return void 0!==e.layer}var VE=function(){function SpecMapper(){Object(_d.a)(this,SpecMapper)}return Object(bd.a)(SpecMapper,[{key:"map",value:function map(e,t){return isFacetSpec(e)?this.mapFacet(e,t):isRepeatSpec(e)?this.mapRepeat(e,t):isHConcatSpec(e)?this.mapHConcat(e,t):isVConcatSpec(e)?this.mapVConcat(e,t):isConcatSpec(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}},{key:"mapLayerOrUnit",value:function mapLayerOrUnit(e,t){if(isLayerSpec(e))return this.mapLayer(e,t);if(isUnitSpec(e))return this.mapUnit(e,t);throw new Error(LS.INVALID_SPEC)}},{key:"mapLayer",value:function mapLayer(e,t){var n=this;return Object.assign({},e,{layer:e.layer.map((function(e){return n.mapLayerOrUnit(e,t)}))})}},{key:"mapHConcat",value:function mapHConcat(e,t){var n=this;return Object.assign({},e,{hconcat:e.hconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapVConcat",value:function mapVConcat(e,t){var n=this;return Object.assign({},e,{vconcat:e.vconcat.map((function(e){return n.map(e,t)}))})}},{key:"mapConcat",value:function mapConcat(e,t){var n=this,r=e.concat,i=__rest(e,["concat"]);return Object.assign({},i,{concat:r.map((function(e){return n.map(e,t)}))})}},{key:"mapFacet",value:function mapFacet(e,t){return Object.assign({},e,{spec:this.map(e.spec,t)})}},{key:"mapRepeat",value:function mapRepeat(e,t){return Object.assign({},e,{spec:this.map(e.spec,t)})}}]),SpecMapper}(),YE={zero:1,center:1,normalize:1};var $E=[uk,sk,dk,ck,mk,vk,lk,hk,pk],XE=[uk,sk];function stack_stack(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=isMarkDef(e)?e.type:e;if(!util_contains($E,i))return null;var a=function potentialStackedChannel(e){var t=e.x,n=e.y;if(isFieldDef(t)&&isFieldDef(n))if("quantitative"===t.type&&"quantitative"===n.type){if(t.stack)return"x";if(n.stack)return"y";if(!!t.aggregate!==!!n.aggregate)return t.aggregate?"x":"y"}else{if("quantitative"===t.type)return"x";if("quantitative"===n.type)return"y"}else{if(isFieldDef(t)&&"quantitative"===t.type)return"x";if(isFieldDef(n)&&"quantitative"===n.type)return"y"}}(t);if(!a)return null;var o,s=t[a],u=isStringFieldDef(s)?channeldef_vgField(s,{}):void 0,l="x"===a?"y":"x",c=t[l],f=isStringFieldDef(c)?channeldef_vgField(c,{}):void 0,d=pS.reduce((function(e,n){if("tooltip"!==n&&encoding_channelHasField(t,n)){var r=t[n];(Uw(r)?r:[r]).forEach((function(t){var r=getTypedFieldDef(t);if(!r.aggregate){var i=isStringFieldDef(r)?channeldef_vgField(r,{}):void 0;(!i||i!==f&&i!==u)&&e.push({channel:n,fieldDef:r})}}))}return e}),[]);if(void 0!==s.stack?o=Yw(s.stack)?s.stack?"zero":null:s.stack:d.length>0&&(o=util_contains(XE,i)?getFirstDefined(n,"zero"):n),!o||!function isStackOffset(e){return!!YE[e]}(o))return null;if(s.scale&&s.scale.type&&s.scale.type!==vE.LINEAR){if(r.disallowNonLinearStack)return null;log_warn(LS.cannotStackNonLinearScale(s.scale.type))}return encoding_channelHasField(t,a===Mk?Fk:Ik)?(void 0!==s.stack&&log_warn(LS.cannotStackRangedMark(a)),null):(s.aggregate&&!util_contains(Ok,s.aggregate)&&log_warn(LS.stackNonSummativeAggregate(s.aggregate)),{groupbyChannel:c?l:void 0,fieldChannel:a,impute:isPathMark(i),stackBy:d,offset:o})}function dropLineAndPoint(e){e.point,e.line;var t=__rest(e,["point","line"]);return ak(t).length>1?t:t.type}function dropLineAndPointFromConfig(e){for(var t=0,n=["line","area","rule","trail"];t<n.length;t++){var r=n[t];e[r]&&(e=Object.assign({},e,Object(po.a)({},r,omit(e[r],["point","line"]))))}return e}function getPointOverlay(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return"transparent"===e.point?{opacity:0}:e.point?zw(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?zw(t.point)?t.point:{}:void 0}function getLineOverlay(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}var KE=function(){function PathOverlayNormalizer(){Object(_d.a)(this,PathOverlayNormalizer),this.name="path-overlay"}return Object(bd.a)(PathOverlayNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(e,t){if(isUnitSpec(e)){var n=e.mark,r=e.encoding,i=isMarkDef(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!getPointOverlay(i,t[i.type],r);case"area":return!!getPointOverlay(i,t[i.type],r)||!!getLineOverlay(i,t[i.type])}}return!1}},{key:"run",value:function run(e,t,n){var r=t.config,i=e.selection,a=e.projection,o=e.encoding,s=e.mark,u=__rest(e,["selection","projection","encoding","mark"]),l=isMarkDef(s)?s:{type:s},c=getPointOverlay(l,r[l.type],o),f="area"===l.type&&getLineOverlay(l,r[l.type]),d=[Object.assign({},i?{selection:i}:{},{mark:dropLineAndPoint(Object.assign({},l,"area"===l.type?{opacity:.7}:{})),encoding:omit(o,["shape"])})],h=stack_stack(l,o,r?r.stack:void 0),p=o;if(h){var g=h.fieldChannel,m=h.offset;p=Object.assign({},o,Object(po.a)({},g,Object.assign({},o[g],m?{stack:m}:{})))}return f&&d.push(Object.assign({},a?{projection:a}:{},{mark:Object.assign({type:"line"},util_pick(l,["clip","interpolate","tension","tooltip"]),f),encoding:p})),c&&d.push(Object.assign({},a?{projection:a}:{},{mark:Object.assign({type:"point",opacity:1,filled:!0},util_pick(l,["clip","tooltip"]),c),encoding:p})),n(Object.assign({},u,{layer:d}),Object.assign({},t,{config:dropLineAndPointFromConfig(r)}))}}]),PathOverlayNormalizer}(),JE=function(){function RuleForRangedLineNormalizer(){Object(_d.a)(this,RuleForRangedLineNormalizer),this.name="RuleForRangedLine"}return Object(bd.a)(RuleForRangedLineNormalizer,[{key:"hasMatchingType",value:function hasMatchingType(e){if(isUnitSpec(e)){var t=e.encoding;if("line"===e.mark){var n=!0,r=!1,i=void 0;try{for(var a,o=dS[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=t[getMainRangeChannel(s)];if(t[s]&&isFieldDef(u)&&!bin_isBinned(u.bin))return!0}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}}return!1}},{key:"run",value:function run(e,t,n){var r=e.encoding;return log_warn(LS.lineWithRange(!!r.x2,!!r.y2)),n(Object.assign({},e,{mark:"rule"}),t)}}]),RuleForRangedLineNormalizer}();function mergeEncoding(e){var t=e.parentEncoding,n=e.encoding;if(t&&n){var r=ak(t).reduce((function(e,t){return n[t]&&e.push(t),e}),[]);r.length>0&&log_warn(LS.encodingOverridden(r))}var i=Object.assign({},t||{},n||{});return ak(i).length>0?i:void 0}function mergeProjection(e){var t=e.parentProjection,n=e.projection;return t&&n&&log_warn(LS.projectionOverridden({parentProjection:t,projection:n})),n||t}function normalize_normalize(e,t){return void 0===t&&(t=initConfig(e.config)),function normalizeGenericSpec(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ZE.map(e,{config:t})}(e,t)}var ZE=new(function(e){function CoreNormalizer(){var e;return Object(_d.a)(this,CoreNormalizer),(e=Object(WE.a)(this,Object(GE.a)(CoreNormalizer).apply(this,arguments))).nonFacetUnitNormalizers=[lE,dE,gE,new KE,new JE],e}return Object(HE.a)(CoreNormalizer,e),Object(bd.a)(CoreNormalizer,[{key:"map",value:function map(e,t){if(isUnitSpec(e)){var n=encoding_channelHasField(e.encoding,Rk),r=encoding_channelHasField(e.encoding,Dk),i=encoding_channelHasField(e.encoding,Pk);if(n||r||i)return this.mapFacetedUnit(e,t)}return get_get(Object(GE.a)(CoreNormalizer.prototype),"map",this).call(this,e,t)}},{key:"mapUnit",value:function mapUnit(e,t){var n=t.parentEncoding,r=t.parentProjection;if(n||r)return this.mapUnitWithParentEncodingOrProjection(e,t);var i=this.mapLayerOrUnit.bind(this),a=!0,o=!1,s=void 0;try{for(var u,l=this.nonFacetUnitNormalizers[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;if(c.hasMatchingType(e,t.config))return c.run(e,t,i)}}catch(f){o=!0,s=f}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return e}},{key:"mapRepeat",value:function mapRepeat(e,t){var n=e.repeat;return!Uw(n)&&e.columns&&(e=omit(e,["columns"]),log_warn(LS.columnsNotSupportByRowCol("repeat"))),Object.assign({},e,{spec:this.map(e.spec,t)})}},{key:"mapFacet",value:function mapFacet(e,t){return isFacetMapping(e.facet)&&e.columns&&(e=omit(e,["columns"]),log_warn(LS.columnsNotSupportByRowCol("facet"))),get_get(Object(GE.a)(CoreNormalizer.prototype),"mapFacet",this).call(this,e,t)}},{key:"mapUnitWithParentEncodingOrProjection",value:function mapUnitWithParentEncodingOrProjection(e,t){var n=e.encoding,r=e.projection,i=t.parentEncoding,a=t.parentProjection,o=t.config,s=mergeProjection({parentProjection:a,projection:r}),u=mergeEncoding({parentEncoding:i,encoding:n});return this.mapUnit(Object.assign({},e,s?{projection:s}:{},u?{encoding:u}:{}),{config:o})}},{key:"mapFacetedUnit",value:function mapFacetedUnit(e,t){var n=e.encoding,r=n.row,i=n.column,a=n.facet,o=__rest(n,["row","column","facet"]),s=e.mark,u=e.width,l=e.projection,c=e.height,f=e.selection,d=(e.encoding,__rest(e,["mark","width","projection","height","selection","encoding"]));return a&&(r||i)&&log_warn(LS.facetChannelDropped([].concat(Object(Ra.a)(r?[Rk]:[]),Object(Ra.a)(i?[Dk]:[])))),this.mapFacet(Object.assign({},d,{facet:r||i?Object.assign({},r?{row:r}:{},i?{column:i}:{}):a,spec:Object.assign({},l?{projection:l}:{},{mark:s},u?{width:u}:{},c?{height:c}:{},{encoding:o},f?{selection:f}:{})}),t)}},{key:"mapLayer",value:function mapLayer(e,t){var n=t.parentEncoding,r=t.parentProjection,i=__rest(t,["parentEncoding","parentProjection"]),a=e.encoding,o=e.projection,s=__rest(e,["encoding","projection"]),u=Object.assign({},i,{parentEncoding:mergeEncoding({parentEncoding:n,encoding:a}),parentProjection:mergeProjection({parentProjection:r,projection:o})});return get_get(Object(GE.a)(CoreNormalizer.prototype),"mapLayer",this).call(this,s,u)}}]),CoreNormalizer}(VE));function _normalizeAutoSize(e){return qw(e)?{type:e}:e||{}}var QE=["background","padding"];function extractTopLevelProperties(e){return QE.reduce((function(t,n){return e&&void 0!==e[n]&&(t[n]=e[n]),t}),{})}var eT=n(6);function isUrlData(e){return!!e.url}function isInlineData(e){return!!e.values}function isNamedData(e){return!!e.name&&!isUrlData(e)&&!isInlineData(e)&&!isGenerator(e)}function isGenerator(e){return e&&(isSequenceGenerator(e)||isSphereGenerator(e)||isGraticuleGenerator(e))}function isSequenceGenerator(e){return!!e.sequence}function isSphereGenerator(e){return!!e.sphere}function isGraticuleGenerator(e){return!!e.graticule}var tT="main",nT="raw";function isFieldEqualPredicate(e){return e&&!!e.field&&void 0!==e.equal}function isFieldLTPredicate(e){return e&&!!e.field&&void 0!==e.lt}function isFieldLTEPredicate(e){return e&&!!e.field&&void 0!==e.lte}function isFieldGTPredicate(e){return e&&!!e.field&&void 0!==e.gt}function isFieldGTEPredicate(e){return e&&!!e.field&&void 0!==e.gte}function isFieldRangePredicate(e){return!!(e&&e.field&&Uw(e.range)&&2===e.range.length)}function isFieldOneOfPredicate(e){return e&&!!e.field&&(Uw(e.oneOf)||Uw(e.in))}function isFieldPredicate(e){return isFieldOneOfPredicate(e)||isFieldEqualPredicate(e)||isFieldRangePredicate(e)||isFieldLTPredicate(e)||isFieldGTPredicate(e)||isFieldLTEPredicate(e)||isFieldGTEPredicate(e)}function predicateValueExpr(e,t){return valueExpr(e,{timeUnit:t,time:!0})}function fieldFilterExpression(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.field,r=e.timeUnit,i=r?"time("+timeunit_fieldExpr(r,n)+")":channeldef_vgField(e,{expr:"datum"});if(isFieldEqualPredicate(e))return i+"==="+predicateValueExpr(e.equal,r);if(isFieldLTPredicate(e)){var a=e.lt;return"".concat(i,"<").concat(predicateValueExpr(a,r))}if(isFieldGTPredicate(e)){var o=e.gt;return"".concat(i,">").concat(predicateValueExpr(o,r))}if(isFieldLTEPredicate(e)){var s=e.lte;return"".concat(i,"<=").concat(predicateValueExpr(s,r))}if(isFieldGTEPredicate(e)){var u=e.gte;return"".concat(i,">=").concat(predicateValueExpr(u,r))}if(isFieldOneOfPredicate(e))return"indexof([".concat(function predicateValuesExpr(e,t){return e.map((function(e){return predicateValueExpr(e,t)}))}(e.oneOf,r).join(","),"], ").concat(i,") !== -1");if(function isFieldValidPredicate(e){return e&&!!e.field&&void 0!==e.valid}(e))return e.valid?"".concat(i,"!==null&&!isNaN(").concat(i,")"):"".concat(i,"===null||isNaN(").concat(i,")");if(isFieldRangePredicate(e)){var l=e.range[0],c=e.range[1];if(null!==l&&null!==c&&t)return"inrange("+i+", ["+predicateValueExpr(l,r)+", "+predicateValueExpr(c,r)+"])";var f=[];return null!==l&&f.push("".concat(i," >= ").concat(predicateValueExpr(l,r))),null!==c&&f.push("".concat(i," <= ").concat(predicateValueExpr(c,r))),f.length>0?f.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(e)))}function normalizePredicate(e){return isFieldPredicate(e)&&e.timeUnit?Object.assign({},e,{timeUnit:normalizeTimeUnit(e.timeUnit)}):e}function isFilter(e){return void 0!==e.filter}function isLookup(e){return void 0!==e.lookup}function isSample(e){return void 0!==e.sample}function isWindow(e){return void 0!==e.window}function isJoinAggregate(e){return void 0!==e.joinaggregate}function isFlatten(e){return void 0!==e.flatten}function isCalculate(e){return void 0!==e.calculate}function isBin(e){return!!e.bin}function isImpute(e){return void 0!==e.impute}function transform_isTimeUnit(e){return void 0!==e.timeUnit}function transform_isAggregate(e){return void 0!==e.aggregate}function isStack(e){return void 0!==e.stack}function isFold(e){return void 0!==e.fold}function isSignalRef(e){return!!e.signal}function isVgRangeStep(e){return!!e.step}function isDataRefDomain(e){return!Uw(e)&&("field"in e&&"data"in e)}var rT=ak({opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeMiterLimit:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,cursor:1,href:1,tooltip:1,cornerRadius:1,x:1,y:1,x2:1,y2:1,width:1,height:1}),iT=["domain","grid","labels","ticks","title"],aT={grid:"grid",gridColor:"grid",gridDash:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",domain:"main",domainColor:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontWeight:"main",labelLimit:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",maxExtent:"main",minExtent:"main",offset:"main",position:"main",tickColor:"main",tickExtra:"main",tickOffset:"both",tickOpacity:"main",tickRound:"main",ticks:"main",tickSize:"main",title:"main",titleAlign:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontWeight:"main",titleLimit:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",tickWidth:"both",tickCount:"both",values:"both",scale:"both",zindex:"both"},oT={orient:1,bandPosition:1,domain:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,values:1,zindex:1},sT=Object.assign({},oT,{encoding:1}),uT=Object.assign({gridScale:1,scale:1},oT,{encode:1});var lT=ak(uT);ak(sT);function assembleAxis(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{header:!1},i=e.combine(),a=i.orient,o=i.scale,s=i.title,u=i.zindex,l=__rest(i,["orient","scale","title","zindex"]);if(ak(l).forEach((function(e){var n=aT[e];n&&n!==t&&"both"!==n&&delete l[e]})),"grid"===t){if(!l.grid)return;if(l.encode){var c=l.encode.grid;l.encode=Object.assign({},c?{grid:c}:{}),0===ak(l.encode).length&&delete l.encode}return Object.assign({scale:o,orient:a},l,{domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:getFirstDefined(u,0)})}if(r.header||!e.mainExtracted){if(l.encode){var f=!0,d=!1,h=void 0;try{for(var p,g=iT[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value;e.hasAxisPart(m)||delete l.encode[m]}}catch(y){d=!0,h=y}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}0===ak(l.encode).length&&delete l.encode}var v=function assemble_assembleTitle(e,t){return Uw(e)?e.map((function(e){return defaultTitle(e,t)})).join(", "):e}(s,n);return Object.assign({scale:o,orient:a,grid:!1},v?{title:v}:{},l,{zindex:getFirstDefined(u,1)})}}function assembleAxisSignals(e){var t=e.component.axes,n=!0,r=!1,i=void 0;try{for(var a,o=mS[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(t[s]){var u=!0,l=!1,c=void 0;try{for(var f,d=t[s][Symbol.iterator]();!(u=(f=d.next()).done);u=!0){if(!f.value.get("gridScale")){var h="x"===s?"height":"width";return[{name:h,update:e.getSizeSignalRef(h).signal}]}}}catch(p){l=!0,c=p}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}}}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return[]}var cT={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleOrient:"orient",titlePadding:"offset"},fT={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelLimit:"limit",labelOrient:"orient",labelPadding:"offset"},dT=ak(cT),hT=ak(fT),pT="mean";function isSortField(e){return!!e&&("count"===e.op||!!e.field)}function isSortArray(e){return!!e&&Uw(e)}function getAxisConfig(e,t,n,r,i){var a=[].concat(Object(Ra.a)("band"===i?["axisBand"]:[]),["x"===n?"axisX":"axisY"],Object(Ra.a)(r?["axis"+r.substr(0,1).toUpperCase()+r.substr(1)]:[]),["axis"]),o=!0,s=!1,u=void 0;try{for(var l,c=a[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;if(t[f]&&void 0!==t[f][e])return t[f][e]}}catch(d){s=!0,u=d}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}function defaultLabelBaseline(e,t){if(void 0!==e)return e=normalizeAngle(e),"top"===t||"bottom"===t?e<=45||315<=e?"top"===t?"bottom":"top":135<=e&&e<=225?"top"===t?"top":"bottom":"middle":e<=45||315<=e||135<=e&&e<=225?"middle":45<=e&&e<=135?"left"===t?"top":"bottom":"left"===t?"bottom":"top"}function defaultLabelAlign(e,t){if(void 0!==e)return e=normalizeAngle(e),"top"===t||"bottom"===t?e%180===0?"center":0<e&&e<180?"top"===t?"right":"left":"top"===t?"left":"right":(e+90)%180===0?"center":90<=e&&e<270?"left"===t?"left":"right":"left"===t?"right":"left"}function properties_orient(e){switch(e){case Mk:return"bottom";case jk:return"left"}throw new Error(LS.INVALID_CHANNEL_FOR_AXIS)}function getStyles(e){return[].concat(e.type,e.style||[])}function getMarkConfig(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).vgChannel;return getFirstDefined(r?getStyleConfig(e,t,n.style):void 0,getStyleConfig(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function getStyleConfig(e,t,n){var r,i=getStyles(t),a=!0,o=!1,s=void 0;try{for(var u,l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=n[u.value],f=e;c&&void 0!==c[f]&&(r=c[f])}}catch(d){o=!0,s=d}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return r}function formatSignalRef(e,t,n,r){if(isTimeFormatFieldDef(e)){var i=isScaleFieldDef(e)&&e.scale&&e.scale.type===vE.UTC;return{signal:timeFormatExpression(channeldef_vgField(e,{expr:n}),e.timeUnit,t,r.text.shortTimeLabels,r.timeFormat,i,!0)}}var a=numberFormat(e,t,r);return isBinning(e.bin)?{signal:binFormatExpression(channeldef_vgField(e,{expr:n}),channeldef_vgField(e,{expr:n,binSuffix:"end"}),a,r)}:"quantitative"===e.type||a?{signal:"".concat(formatExpr(channeldef_vgField(e,{expr:n,binSuffix:"range"}),a))}:{signal:"''+".concat(channeldef_vgField(e,{expr:n}))}}function numberFormat(e,t,n){return t||(e.type===QS?n.numberFormat:void 0)}function formatExpr(e,t){return"format(".concat(e,', "').concat(t||"",'")')}function numberFormatExpr(e,t,n){return formatExpr(e,t||n.numberFormat)}function binFormatExpression(e,t,n,r){return"".concat(e," === null || isNaN(").concat(e,') ? "null" : ').concat(numberFormatExpr(e,n,r),' + " - " + ').concat(numberFormatExpr(t,n,r))}function timeFormatExpression(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return!t||n?(n=n||i)||o?"".concat(a?"utc":"time","Format(").concat(e,", '").concat(n,"')"):void 0:function formatExpression(e,t,n,r){if(e){var i=getDateTimeComponents(e,n),a="";return containsTimeUnit(e,zS.QUARTER)&&(a="'Q' + quarter(".concat(t,")")),i.length>0&&(a&&(a+=" + ' ' + "),a+=r?"utcFormat(".concat(t,", '").concat(i.join(" "),"')"):"timeFormat(".concat(t,", '").concat(i.join(" "),"')")),a||void 0}}(t,e,r,a)}function sortParams(e,t){return(Uw(e)?e:[e]).reduce((function(e,n){return e.field.push(channeldef_vgField(n,t)),e.order.push(n.sort||"ascending"),e}),{field:[],order:[]})}function mergeTitleFieldDefs(e,t){var n=Object(Ra.a)(e);return t.forEach((function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(ik(s)===ik(e))return}}catch(u){r=!0,i=u}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}n.push(e)})),n}function mergeTitle(e,t){return e!==t&&t?e?e+", "+t:t:e}function mergeTitleComponent(e,t){if(Uw(e.value)&&Uw(t.value))return{explicit:e.explicit,value:mergeTitleFieldDefs(e.value,t.value)};if(!Uw(e.value)&&!Uw(t.value))return{explicit:e.explicit,value:mergeTitle(e.value,t.value)};throw new Error("It should never reach here")}var gT=function(){function DataFlowNode(e,t){Object(_d.a)(this,DataFlowNode),this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}return Object(bd.a)(DataFlowNode,[{key:"clone",value:function clone(){throw new Error("Cannot clone node")}},{key:"hash",value:function hash(){return void 0===this._hash&&(this._hash=uniqueId()),this._hash}},{key:"producedFields",value:function producedFields(){return new Set}},{key:"dependentFields",value:function dependentFields(){return new Set}},{key:"numChildren",value:function numChildren(){return this._children.length}},{key:"addChild",value:function addChild(e,t){this._children.indexOf(e)>-1?console.warn("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}},{key:"removeChild",value:function removeChild(e){var t=this._children.indexOf(e);return this._children.splice(t,1),t}},{key:"remove",value:function remove(){var e=this._parent.removeChild(this),t=!0,n=!1,r=void 0;try{for(var i,a=this._children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;o._parent=this._parent,this._parent.addChild(o,e++)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"insertAsParentOf",value:function insertAsParentOf(e){var t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}},{key:"swapWithParent",value:function swapWithParent(){var e=this._parent,t=e.parent,n=!0,r=!1,i=void 0;try{for(var a,o=this._children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.parent=e}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}},{key:"parent",get:function get(){return this._parent},set:function set(e){this._parent=e,e&&e.addChild(this)}},{key:"children",get:function get(){return this._children}}]),DataFlowNode}(),mT=function(e){function OutputNode(e,t,n,r){var i;return Object(_d.a)(this,OutputNode),(i=Object(WE.a)(this,Object(GE.a)(OutputNode).call(this,e,t))).type=n,i.refCounts=r,i._source=i._name=t,!i.refCounts||i._name in i.refCounts||(i.refCounts[i._name]=0),i}return Object(HE.a)(OutputNode,e),Object(bd.a)(OutputNode,[{key:"clone",value:function clone(){var e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}},{key:"getSource",value:function getSource(){return this.refCounts[this._name]++,this._source}},{key:"isRequired",value:function isRequired(){return!!this.refCounts[this._name]}},{key:"setSource",value:function setSource(e){this._source=e}}]),OutputNode}(gT);function getDependentFields(e){var t=Iv(e),n=new Set;return t.visit((function(e){"MemberExpression"===e.type&&function startsWithDatum(e){return"MemberExpression"===e.object.type?startsWithDatum(e.object):"datum"===e.object.name}(e)&&n.add(function expressions_getName(e){var t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push.apply(t,Object(Ra.a)(expressions_getName(e.object))),t.push.apply(t,Object(Ra.a)(expressions_getName(e.property)))),t)}(e).slice(1).join("."))})),n}var vT=function(e){function CalculateNode(e,t){var n;return Object(_d.a)(this,CalculateNode),(n=Object(WE.a)(this,Object(GE.a)(CalculateNode).call(this,e))).transform=t,n._dependentFields=getDependentFields(n.transform.calculate),n}return Object(HE.a)(CalculateNode,e),Object(bd.a)(CalculateNode,[{key:"clone",value:function clone(){return new CalculateNode(null,rk(this.transform))}},{key:"producedFields",value:function producedFields(){return new Set([this.transform.as])}},{key:"dependentFields",value:function dependentFields(){return this._dependentFields}},{key:"assemble",value:function assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}},{key:"hash",value:function hash(){return"Calculate ".concat(util_hash(this.transform))}}],[{key:"parseAllForSortIndex",value:function parseAllForSortIndex(e,t){return t.forEachFieldDef((function(t,n){if(isScaleFieldDef(t)&&isSortArray(t.sort)){var r=t.field,i=t.timeUnit,a=t.sort,o=a.map((function(e,t){return"".concat(fieldFilterExpression({field:r,timeUnit:i,equal:e})," ? ").concat(t," : ")})).join("")+a.length;e=new CalculateNode(e,{calculate:o,as:sortArrayIndexField(t,n,{forAs:!0})})}})),e}}]),CalculateNode}(gT);function sortArrayIndexField(e,t,n){return channeldef_vgField(e,Object.assign({prefix:t,suffix:"sort_index"},n||{}))}function getHeaderChannel(e,t){return util_contains(["top","bottom"],t)?"column":util_contains(["left","right"],t)?"row":"row"===e?"row":"column"}function getHeaderProperty(e,t,n,r){var i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return getFirstDefined(t&&t.header?t.header[e]:void 0,i[e],n.header[e])}function getHeaderProperties(e,t,n,r){var i={},a=!0,o=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=getHeaderProperty(c,t,n,r);void 0!==f&&(i[c]=f)}}catch(d){o=!0,s=d}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i}var yT=["row","column"],_T=["header","footer"];function assembleTitleGroup(e,t){var n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,a=getHeaderProperties(["titleAnchor","titleAngle","titleOrient"],i,r,t),o=a.titleAnchor,s=a.titleAngle,u=getHeaderChannel(t,a.titleOrient);return{name:"".concat(t,"-title"),type:"group",role:"".concat(u,"-title"),title:Object.assign({text:n},"row"===t?{orient:"left"}:{},{style:"guide-title"},defaultHeaderGuideBaseline(s,u),defaultHeaderGuideAlign(u,s,o),assembleHeaderProperties(r,i,t,dT,cT))}}function defaultHeaderGuideAlign(e,t){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"middle"){case"start":return{align:"left"};case"end":return{align:"right"}}var n=defaultLabelAlign(t,"row"===e?"left":"top");return n?{align:n}:{}}function defaultHeaderGuideBaseline(e,t){var n=defaultLabelBaseline(e,"row"===t?"left":"top");return n?{baseline:n}:{}}function assembleHeaderGroups(e,t){var n=e.component.layoutHeaders[t],r=[],i=!0,a=!1,o=void 0;try{for(var s,u=_T[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(n[l]){var c=!0,f=!1,d=void 0;try{for(var h,p=n[l][Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value;r.push(assembleHeaderGroup(e,t,l,n,g))}}catch(m){f=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}}}catch(m){a=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}function getSort(e,t){var n=e.sort;return isSortField(n)?{field:channeldef_vgField(n,{expr:"datum"}),order:n.order||"ascending"}:Uw(n)?{field:sortArrayIndexField(e,t,{expr:"datum"}),order:"ascending"}:{field:channeldef_vgField(e,{expr:"datum"}),order:n||"ascending"}}function assemble_assembleLabelTitle(e,t,n){var r=getHeaderProperties(["format","labelAngle","labelAnchor","labelOrient"],e,n,t),i=r.format,a=r.labelAngle,o=r.labelAnchor,s=getHeaderChannel(t,r.labelOrient);return Object.assign({text:formatSignalRef(e,i,"parent",n)},"row"===t?{orient:"left"}:{},{style:"guide-label",frame:"group"},defaultHeaderGuideBaseline(a,s),defaultHeaderGuideAlign(s,a,o),assembleHeaderProperties(n,e,t,hT,fT))}function assembleHeaderGroup(e,t,n,r,i){if(i){var a=null,o=r.facetFieldDef,s=e.config?e.config:void 0;if(o&&i.labels){var u=getHeaderProperties(["labelOrient"],o,s,t).labelOrient;("row"===t&&!util_contains(["top","bottom"],u)||"column"===t&&!util_contains(["left","right"],u))&&(a=assemble_assembleLabelTitle(o,t,s))}var l=isFacetModel(e)&&!isFacetMapping(e.facet),c=i.axes,f=c&&c.length>0;if(a||f){var d="row"===t?"height":"width";return Object.assign({name:e.getName("".concat(t,"_").concat(n)),type:"group",role:"".concat(t,"-").concat(n)},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:getSort(o,t)}:{},f&&l?{from:{data:e.getName("facet_domain_".concat(t))}}:{},a?{title:a}:{},i.sizeSignal?{encode:{update:Object(po.a)({},d,i.sizeSignal)}}:{},f?{axes:c}:{})}}return null}var bT={column:{start:0,end:1},row:{start:1,end:0}};function getLayoutTitleBand(e,t){return bT[t][e]}function assembleHeaderProperties(e,t,n,r,i){var a={},o=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value;if(i[f]){var d=getHeaderProperty(f,t,e,n);void 0!==d&&(a[i[f]]=d)}}}catch(h){s=!0,u=h}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return a}function assemble_assembleLayoutSignals(e){return[].concat(Object(Ra.a)(sizeSignals(e,"width")),Object(Ra.a)(sizeSignals(e,"height")))}function sizeSignals(e,t){var n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];var i=e.getSizeSignalRef(t).signal;if("range-step"===r){var a=e.getScaleComponent(n);if(a){var o=a.get("type"),s=a.get("range");if(hasDiscreteDomain(o)&&isVgRangeStep(s)){var u=e.scaleName(n);if(isFacetModel(e.parent))if("independent"===e.parent.component.resolve.scale[n])return[stepSignal(u,s)];return[stepSignal(u,s),{name:i,update:sizeExpr(u,a,"domain('".concat(u,"').length"))}]}}throw new Error("layout size is range step although there is no rangeStep.")}return[{name:i,value:r}]}function stepSignal(e,t){return{name:e+"_step",value:t.step}}function sizeExpr(e,t,n){var r=t.get("type"),i=t.get("padding"),a=getFirstDefined(t.get("paddingOuter"),i),o=t.get("paddingInner");return o="band"===r?void 0!==o?o:i:1,"bandspace(".concat(n,", ").concat(o,", ").concat(a,") * ").concat(e,"_step")}var xT=function(e){function TimeUnitNode(e,t){var n;return Object(_d.a)(this,TimeUnitNode),(n=Object(WE.a)(this,Object(GE.a)(TimeUnitNode).call(this,e))).formula=t,n}return Object(HE.a)(TimeUnitNode,e),Object(bd.a)(TimeUnitNode,[{key:"clone",value:function clone(){return new TimeUnitNode(null,rk(this.formula))}},{key:"merge",value:function merge(e){this.formula=Object.assign({},this.formula,e.formula);var t=!0,n=!1,r=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e.removeChild(o),o.parent=this}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}e.remove()}},{key:"producedFields",value:function producedFields(){return new Set(util_vals(this.formula).map((function(e){return e.as})))}},{key:"dependentFields",value:function dependentFields(){return new Set(util_vals(this.formula).map((function(e){return e.field})))}},{key:"hash",value:function hash(){return"TimeUnit ".concat(util_hash(this.formula))}},{key:"assemble",value:function assemble(){return util_vals(this.formula).map((function(e){return{type:"formula",as:e.as,expr:timeunit_fieldExpr(e.timeUnit,e.field)}}))}}],[{key:"makeFromEncoding",value:function makeFromEncoding(e,t){var n=t.reduceFieldDef((function(e,t){var n=t.timeUnit,r=t.field;if(n){var i={as:channeldef_vgField(t,{forAs:!0}),timeUnit:n,field:r};e[util_hash(i)]=i}return e}),{});return 0===ak(n).length?null:new TimeUnitNode(e,n)}},{key:"makeFromTransform",value:function makeFromTransform(e,t){var n=Object.assign({},t);return new TimeUnitNode(e,Object(po.a)({},util_hash(n),n))}}]),TimeUnitNode}(gT),wT={has:function has(e){return"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind},parse:function parse(e,t,n){var r=varName(n.name),i=n.scales=[],a=!0,o=!1,s=void 0;try{for(var u,l=n.project.items[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=c.channel;if(isScaleChannel(f)){var d=e.getScaleComponent(f),h=d?d.get("type"):void 0;if(d&&hasContinuousDomain(h)){if(d.set("domainRaw",{signal:accessPathWithDatum(c.field,r)},!0),i.push(c),e.repeater&&e.repeater.row===e.repeater.column)e.getScaleComponent(f===Mk?jk:Mk).set("domainRaw",{signal:accessPathWithDatum(c.field,r)},!0)}else log_warn(LS.SCALE_BINDINGS_CONTINUOUS)}}}catch(p){o=!0,s=p}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}},topLevelSignals:function topLevelSignals(e,t,n){var r=t.scales.filter((function(e){return!n.filter((function(t){return t.name===e.signals.data})).length}));if(!e.parent||!r.length)return n;var i=n.filter((function(e){return e.name===t.name}))[0],a=i.update;if(a.indexOf(MT)>=0)i.update="{".concat(r.map((function(e){return"".concat(stringValue_$(e.field),": ").concat(e.signals.data)})).join(", "),"}");else{var o=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,d=", ".concat(stringValue_$(f.field),": ").concat(f.signals.data);a.indexOf(d)<0&&(i.update=a.substring(0,a.length-1)+d+"}")}}catch(h){s=!0,u=h}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}return n.concat(r.map((function(e){return{name:e.signals.data}})))},signals:function signals(e,t,n){if(e.parent){var r=!0,i=!1,a=void 0;try{for(var o,s=function _loop(){var e=o.value,t=n.filter((function(t){return t.name===e.signals.data}))[0];t.push="outer",delete t.value,delete t.update},u=t.scales[Symbol.iterator]();!(r=(o=u.next()).done);r=!0)s()}catch(l){i=!0,a=l}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}}return n}};function scales_domain(e,t){var n=stringValue_$(e.scaleName(t));return"domain(".concat(n,")")}var kT="_tuple_fields",ST=function SelectionProjectionComponent(){Object(_d.a)(this,SelectionProjectionComponent);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.items=t,this.has={}},ET="_scale_trigger",TT={signals:function signals(e,t){var n=t.name,r=n+kT,i=wT.has(t),signals=[],a=[],o=[];if(t.translate&&!i){var s="!event.item || event.item.mark.name !== ".concat(stringValue_$(n+"_brush"));interval_events(t,(function(e,t){var n=t.between[0].filter||(t.between[0].filter=[]);n.indexOf(s)<0&&n.push(s)}))}t.project.items.forEach((function(n,r){var i=n.channel;if(i===Mk||i===jk){var s=t.init?t.init[r]:null,u=function channelSignals(e,t,n,r){var i=n.channel,a=n.signals.visual,o=n.signals.data,s=wT.has(t),u=stringValue_$(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=function scaled(e){return"scale(".concat(u,", ").concat(e,")")},d=e.getSizeSignalRef(i===Mk?"width":"height").signal,h="".concat(i,"(unit)"),p=interval_events(t,(function(e,t){return[].concat(Object(Ra.a)(e),[{events:t.between[0],update:"[".concat(h,", ").concat(h,"]")},{events:t,update:"[".concat(a,"[0], clamp(").concat(h,", 0, ").concat(d,")]")}])}));return p.push({events:{signal:t.name+ET},update:hasContinuousDomain(c)?"[".concat(f("".concat(o,"[0]")),", ").concat(f("".concat(o,"[1]")),"]"):"[0, 0]"}),s?[{name:o,on:[]}]:[Object.assign({name:a},r?{init:assembleInit(r,f)}:{value:[]},{on:p}),Object.assign({name:o},r?{init:assembleInit(r)}:{},{on:[{events:{signal:a},update:"".concat(a,"[0] === ").concat(a,"[1] ? null : invert(").concat(u,", ").concat(a,")")}]})]}(e,t,n,s),l=n.signals.data,c=n.signals.visual,f=stringValue_$(e.scaleName(i)),d=hasContinuousDomain(e.getScaleComponent(i).get("type"))?"+":"";signals.push.apply(signals,Object(Ra.a)(u)),a.push(l),o.push({scaleName:e.scaleName(i),expr:"(!isArray(".concat(l,") || ")+"(".concat(d,"invert(").concat(f,", ").concat(c,")[0] === ").concat(d).concat(l,"[0] && ")+"".concat(d,"invert(").concat(f,", ").concat(c,")[1] === ").concat(d).concat(l,"[1]))")})}else log_warn("Interval selections only support x and y encoding channels.")})),i||signals.push({name:n+ET,value:{},on:[{events:o.map((function(e){return{scale:e.scaleName}})),update:o.map((function(e){return e.expr})).join(" && ")+" ? ".concat(n+ET," : {}")}]});var u=t.init,l="unit: ".concat(selection_unitName(e),", fields: ").concat(r,", values");return signals.concat(Object.assign({name:n+RT},u?{init:"{".concat(l,": ").concat(assembleInit(u),"}")}:{},{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+" ? {".concat(l,": [").concat(a,"]} : null")}]}))},modifyExpr:function modifyExpr(e,t){return t.name+RT+", "+("global"===t.resolve?"true":"{unit: ".concat(selection_unitName(e),"}"))},marks:function marks(e,t,n){var r=t.name,i=t.project.has,a=i.x,o=i.y,s=a&&a.signals.visual,u=o&&o.signals.visual,l="data(".concat(stringValue_$(t.name+AT),")");if(wT.has(t))return n;var c={x:void 0!==a?{signal:"".concat(s,"[0]")}:{value:0},y:void 0!==o?{signal:"".concat(u,"[0]")}:{value:0},x2:void 0!==a?{signal:"".concat(s,"[1]")}:{field:{group:"width"}},y2:void 0!==o?{signal:"".concat(u,"[1]")}:{field:{group:"height"}}};if("global"===t.resolve){var f=!0,d=!1,h=void 0;try{for(var p,g=ak(c)[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value;c[m]=[Object.assign({test:"".concat(l,".length && ").concat(l,"[0].unit === ").concat(selection_unitName(e))},c[m]),{value:0}]}}catch(w){d=!0,h=w}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}var v=t.mark,y=v.fill,_=v.fillOpacity,b=__rest(v,["fill","fillOpacity"]),x=ak(b).reduce((function(e,t){return e[t]=[{test:[void 0!==a&&"".concat(s,"[0] !== ").concat(s,"[1]"),void 0!==o&&"".concat(u,"[0] !== ").concat(u,"[1]")].filter((function(e){return e})).join(" && "),value:b[t]},{value:null}],e}),{});return[{name:r+"_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:y},fillOpacity:{value:_}},update:c}}].concat(Object(Ra.a)(n),[{name:r+"_brush",type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:Object.assign({},c,x)}}])}};function interval_events(e,t){return e.events.reduce((function(e,n){return n.between?t(e,n):(log_warn("".concat(n," is not an ordered event stream for interval selections")),e)}),[])}function singleOrMultiSignals(e,t){var n=t.name,r=n+kT,i=t.project,a="(item().isVoronoi ? datum.datum : datum)",o=i.items.map((function(t){var n=e.fieldDef(t.channel);return n&&n.bin?"[".concat(accessPathWithDatum(e.vgField(t.channel,{}),a),", ")+"".concat(accessPathWithDatum(e.vgField(t.channel,{binSuffix:"end"}),a),"]"):"".concat(accessPathWithDatum(t.field,a))})).join(", "),s="unit: ".concat(selection_unitName(e),", fields: ").concat(r,", values");return[{name:n+RT,on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? {".concat(s,": [").concat(o,"]} : null"),force:!0}]}]}var CT={signals:singleOrMultiSignals,modifyExpr:function modifyExpr(e,t){return t.name+RT+", "+("global"===t.resolve?"null":"{unit: ".concat(selection_unitName(e),"}"))}},OT={signals:singleOrMultiSignals,modifyExpr:function modifyExpr(e,t){return t.name+RT+", "+("global"===t.resolve?"true":"{unit: ".concat(selection_unitName(e),"}"))}},AT="_store",RT="_tuple",DT="_modify",PT="_selection_domain_",MT="vlSelectionResolve",jT={single:OT,multi:CT,interval:TT};function forEachSelection(e,t){var n=e.component.selection;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];t(i,jT[i.type])}}function selection_unitName(e){var t=stringValue_$(e.name),n=function getFacetModel(e){for(var t=e.parent;t&&!isFacetModel(t);)t=t.parent;return t}(e);if(n){var r=n.facet,i=!0,a=!1,o=void 0;try{for(var s,u=sS[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]&&(t+=" + '__facet_".concat(l,"_' + (").concat(accessPathWithDatum(n.vgField(l),"facet"),")"))}}catch(c){a=!0,o=c}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}return t}function requiresSelectionId(e){var t=!1;return forEachSelection(e,(function(e){t=t||e.project.items.some((function(e){return e.field===IE}))})),t}var FT={has:function has(e){return"interval"!==e.type&&e.nearest},marks:function marks(e,t,n){var r=t.project.has,i=r.x,a=r.y,o=e.mark;if(isPathMark(o))return log_warn(LS.nearestNotSupportForContinuous(o)),n;var s={name:e.getName("voronoi"),type:"path",from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},mixins_tooltip(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!i&&!a?"datum.datum.x || 0":"0"},y:{expr:a||!i&&!a?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]},u=0,l=!1;return n.forEach((function(t,n){var r=t.name||"";r===e.component.mark[0].name?u=n:r.indexOf("voronoi")>=0&&(l=!0)})),l||n.splice(u+1,0,s),n}},IT={has:function has(e){return"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind},topLevelSignals:function topLevelSignals(e,t,n){var r=t.name,i=t.project,a=t.bind,o=t.init&&t.init[0],s=FT.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((function(e,i){var u=varName("".concat(r,"_").concat(e.field));n.filter((function(e){return e.name===u})).length||n.unshift(Object.assign({name:u},o?{init:assembleInit(o[i])}:{value:null},{on:[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(accessPathWithDatum(e.field,s)," : null")}],bind:a[e.field]||a[e.channel]||a}))})),n},signals:function signals(e,t,n){var r=t.name,i=t.project,a=n.filter((function(e){return e.name===r+RT}))[0],o=r+kT,s=i.items.map((function(e){return varName("".concat(r,"_").concat(e.field))})),u=s.map((function(e){return"".concat(e," !== null")})).join(" && ");return s.length&&(a.update="".concat(u," ? {fields: ").concat(o,", values: [").concat(s.join(", "),"]} : null")),delete a.value,delete a.on,n}},LT={has:function has(e){return"multi"===e.type&&e.toggle},signals:function signals(e,t,n){return n.concat({name:t.name+"_toggle",value:!1,on:[{events:t.events,update:t.toggle}]})},modifyExpr:function modifyExpr(e,t){var n=t.name+RT,r=t.name+"_toggle";return"".concat(r," ? null : ").concat(n,", ")+("global"===t.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(selection_unitName(e),"}, "))+"".concat(r," ? ").concat(n," : null")}},NT={has:function has(e){return!1!==e.clear},parse:function parse(e,t,n){t.clear&&(n.clear=xb(t.clear,"scope"))},topLevelSignals:function topLevelSignals(e,t,n){return IT.has(t)&&t.project.items.forEach((function(e){var r=n.findIndex((function(n){return n.name===varName("".concat(t.name,"_").concat(e.field))}));-1!==r&&n[r].on.push({events:t.clear,update:"null"})})),n},signals:function signals(e,t,n){function addClear(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)t.project.items.forEach((function(e){var t=n.findIndex((function(t){return t.name===e.signals.visual}));(addClear(t,"[0, 0]"),-1===t)&&addClear(n.findIndex((function(t){return t.name===e.signals.data})),"null")}));else{var r=n.findIndex((function(e){return e.name===t.name+RT}));addClear(r,"null"),LT.has(t)&&addClear(r=n.findIndex((function(e){return e.name===t.name+"_toggle"})),"false")}return n}},BT="_translate_anchor",UT="_translate_delta",zT={has:function has(e){return"interval"===e.type&&e.translate},signals:function signals(e,t,n){var r=t.name,i=wT.has(t),a=r+BT,o=t.project.has,s=o.x,u=o.y,l=xb(t.translate,"scope");return i||(l=l.map((function(e){return e.between[0].markname=r+"_brush",e}))),n.push({name:a,value:{},on:[{events:l.map((function(e){return e.between[0]})),update:"{x: x(unit), y: y(unit)"+(void 0!==s?", extent_x: "+(i?scales_domain(e,Mk):"slice(".concat(s.signals.visual,")")):"")+(void 0!==u?", extent_y: "+(i?scales_domain(e,jk):"slice(".concat(u.signals.visual,")")):"")+"}"}]},{name:r+UT,value:{},on:[{events:l,update:"{x: ".concat(a,".x - x(unit), y: ").concat(a,".y - y(unit)}")}]}),void 0!==s&&onDelta(e,t,s,"width",n),void 0!==u&&onDelta(e,t,u,"height",n),n}};function onDelta(e,t,n,r,i){var a=t.name,o=a+BT,s=a+UT,u=n.channel,l=wT.has(t),c=i.filter((function(e){return e.name===n.signals[l?"data":"visual"]}))[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=l&&u===Mk?"-":"",g="".concat(o,".extent_").concat(u),m="".concat(p).concat(s,".").concat(u," / ")+(l?"".concat(f):"span(".concat(g,")")),v="".concat(l?"log"===h?"panLog":"pow"===h?"panPow":"panLinear":"panLinear","(").concat(g,", ").concat(m)+(l&&"pow"===h?", ".concat(d.get("exponent")||1):"")+")";c.on.push({events:{signal:s},update:l?v:"clampRange(".concat(v,", 0, ").concat(f,")")})}var qT="_zoom_anchor",WT="_zoom_delta",GT={has:function has(e){return"interval"===e.type&&e.zoom},signals:function signals(e,t,n){var r=t.name,i=wT.has(t),a=r+WT,o=t.project.has,s=o.x,u=o.y,l=stringValue_$(e.scaleName(Mk)),c=stringValue_$(e.scaleName(jk)),f=xb(t.zoom,"scope");return i||(f=f.map((function(e){return e.markname=r+"_brush",e}))),n.push({name:r+qT,on:[{events:f,update:i?"{"+[l?"x: invert(".concat(l,", x(unit))"):"",c?"y: invert(".concat(c,", y(unit))"):""].filter((function(e){return!!e})).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&zoom_onDelta(e,t,s,"width",n),void 0!==u&&zoom_onDelta(e,t,u,"height",n),n}};function zoom_onDelta(e,t,n,r,i){var a=t.name,o=n.channel,s=wT.has(t),u=i.filter((function(e){return e.name===n.signals[s?"data":"visual"]}))[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c.get("type"),d=s?scales_domain(e,o):u.name,h=a+WT,p="".concat(a).concat(qT,".").concat(o),g="".concat(s?"log"===f?"zoomLog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear","(").concat(d,", ").concat(p,", ").concat(h)+(s&&"pow"===f?", ".concat(c.get("exponent")||1):"")+")";u.on.push({events:{signal:h},update:s?g:"clampRange(".concat(g,", 0, ").concat(l,")")})}var HT=[{has:function has(){return!0},parse:function parse(e,t,n){var r=n.name,i=n.project||(n.project=new ST),a={},o={},s=new Set,u=function signalName(e,t){for(var n="visual"===t?e.channel:e.field,i=varName("".concat(r,"_").concat(n)),a=1;s.has(i);a++)i=varName("".concat(r,"_").concat(n,"_").concat(a));return s.add(i),Object(po.a)({},t,i)};if(!t.fields&&!t.encodings){var l=e.config.selection[t.type];if(t.init){var c=!0,f=!1,d=void 0;try{for(var h,p=Hw(t.init)[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value,m=!0,v=!1,y=void 0;try{for(var _,b=ak(g)[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var x=_.value;fS[x]?(t.encodings||(t.encodings=[])).push(x):isIntervalSelection(t)?(log_warn('Interval selections should be initialized using "x" and/or "y" keys.'),t.encodings=l.encodings):(t.fields||(t.fields=[])).push(x)}}catch(z){v=!0,y=z}finally{try{m||null==b.return||b.return()}finally{if(v)throw y}}}}catch(z){f=!0,d=z}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}else t.encodings=l.encodings,t.fields=l.fields}var w=!0,k=!1,S=void 0;try{for(var E,T=(t.fields||[])[Symbol.iterator]();!(w=(E=T.next()).done);w=!0){var C={type:"E",field:E.value};C.signals=Object.assign({},u(C,"data")),i.items.push(C)}}catch(z){k=!0,S=z}finally{try{w||null==T.return||T.return()}finally{if(k)throw S}}var O=!0,A=!1,R=void 0;try{for(var D,P=(t.encodings||[])[Symbol.iterator]();!(O=(D=P.next()).done);O=!0){var M=D.value,j=e.fieldDef(M);if(j){var F=j.field;if(j.timeUnit){var I={as:F=e.vgField(M),field:j.field,timeUnit:j.timeUnit};o[util_hash(I)]=I}if(!a[F]){var L="E";if("interval"===n.type)hasContinuousDomain(e.getScaleComponent(M).get("type"))&&(L="R");else j.bin&&(L="R-RE");var N={field:F,channel:M,type:L};N.signals=Object.assign({},u(N,"data"),u(N,"visual")),i.items.push(a[F]=N),i.has[M]=a[F]}}else log_warn(LS.cannotProjectOnChannelWithoutField(M))}}catch(z){A=!0,R=z}finally{try{O||null==P.return||P.return()}finally{if(A)throw R}}if(t.init)if(wT.has(n))log_warn(LS.NO_INIT_SCALE_BINDINGS);else{var B=function parseInit(e){return i.items.map((function(t){return void 0!==e[t.channel]?e[t.channel]:e[t.field]}))};if(isIntervalSelection(t))n.init=B(t.init);else{var U=Uw(t.init)?t.init:[t.init];n.init=U.map(B)}}ak(o).length&&(i.timeUnit=new xT(null,o))},signals:function signals(e,t,n){var r=t.name+kT;return n.filter((function(e){return e.name===r})).length?n:n.concat({name:r,value:t.project.items.map((function(e){e.signals;return __rest(e,["signals"])}))})}},LT,wT,zT,GT,IT,FT,NT];function forEachTransform(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=HT[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.has(e)&&t(s)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}function assembleInit(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gw;if(Uw(e)){var n=e.map((function(e){return assembleInit(e,t)})).join(", ");return"[".concat(n,"]")}return isDateTime(e)?t(dateTimeExpr(e)):t(JSON.stringify(e))}function assembleUnitSelectionData(e,t){return forEachSelection(e,(function(n){var r={name:n.name+AT};if(n.init){var i=n.project.items.map((function(e){e.signals;return __rest(e,["signals"])})),a=n.init.map((function(e){return function assembleInitData(e){return Uw(e)?e.map((function(e){return assembleInitData(e)})):isDateTime(e)?dateTimeExpr(e,!1,!0):e}(e)}));r.values="interval"===n.type?[{unit:selection_unitName(e),fields:i,values:a}]:a.map((function(t){return{unit:selection_unitName(e),fields:i,values:t}}))}t.filter((function(e){return e.name===n.name+AT})).length||t.push(r)})),t}function assembleUnitSelectionMarks(e,t){return forEachSelection(e,(function(n,r){t=r.marks?r.marks(e,n,t):t,forEachTransform(n,(function(r){r.marks&&(t=r.marks(e,n,t))}))})),t}function assembleSelectionPredicate(e,t,n){var r=[];var i=logicalExpr(t,(function expr(t){var i=varName(t),a=e.getSelectionComponent(i,t),o=stringValue_$(i+AT);if(a.project.timeUnit){var s=n||e.component.data.raw,u=a.project.timeUnit.clone();s.parent?u.insertAsParentOf(s):s.parent=u}return"none"!==a.empty&&r.push(o),"vlSelectionTest(".concat(o,", datum")+("global"===a.resolve?")":", ".concat(stringValue_$(a.resolve),")"))}));return(r.length?"!("+r.map((function(e){return"length(data(".concat(e,"))")})).join(" || ")+") || ":"")+"(".concat(i,")")}function predicate_expression(e,t,n){return logicalExpr(t,(function(t){return qw(t)?t:function isSelectionPredicate(e){return e&&e.selection}(t)?assembleSelectionPredicate(e,t.selection,n):fieldFilterExpression(t)}))}function midPointWithPositionInvalidTest(e){var t=e.channel,n=e.channelDef,r=e.mark,i=e.scale,a=midPoint(e);return isFieldDef(n)&&!isCountingAggregateOp(n.aggregate)&&i&&isContinuousToContinuous(i.get("type"))&&!1===i.get("zero")?wrapPositionInvalidTest({fieldDef:n,channel:t,mark:r,ref:a}):a}function wrapPositionInvalidTest(e){var t=e.fieldDef,n=e.channel,r=e.mark,i=e.ref;return isPathMark(r)?i:[fieldInvalidTestValueRef(t,n),i]}function fieldInvalidTestValueRef(e,t){var n=fieldInvalidPredicate(e,!0),r="x"===getMainRangeChannel(t)?{value:0}:{field:{group:"height"}};return Object.assign({test:n},r)}function fieldInvalidPredicate(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=qw(e)?e:channeldef_vgField(e,{expr:"datum"});var n=t?"||":"&&",r=t?"===":"!==";return"".concat(e," ").concat(r," null ").concat(n," ").concat(t?"":"!","isNaN(").concat(e,")")}function getOffset(e,t){var n=t[e+"Offset"];if(n)return n}function valueref_bin(e){var t=e.channel,n=e.fieldDef,r=e.scaleName,i=e.mark,a=e.side,o=e.offset;return wrapPositionInvalidTest({fieldDef:n,channel:t,mark:i,ref:valueref_fieldRef(n,r,{binSuffix:"start"===a?void 0:"end"},o?{offset:o}:{})})}function valueref_fieldRef(e,t,n,r){var i=Object.assign({},t?{scale:t}:{},{field:channeldef_vgField(e,n)});if(r){var a=r.offset,o=r.band;return Object.assign({},i,a?{offset:a}:{},o?{band:o}:{})}return i}function bandRef(e){return{scale:e,band:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function binMidSignal(e){var t=e.scaleName,n=e.fieldDef,r=e.fieldDef2,i=e.offset,a=e.band;a=getFirstDefined(a,.5);var o=channeldef_vgField(n,{expr:"datum"}),s=void 0!==r?channeldef_vgField(r,{expr:"datum"}):channeldef_vgField(n,{binSuffix:"end",expr:"datum"});return Object.assign({signal:'scale("'.concat(t,'", ').concat(a," * ").concat(o," + ").concat(1-a," * ").concat(s,")")},i?{offset:i}:{})}function midPoint(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,i=e.scaleName,a=e.scale,o=e.stack,s=e.offset,u=e.defaultRef;if(n){if(isFieldDef(n)){if(isTypedFieldDef(n)){if(isBinning(n.bin))return util_contains([Mk,jk],t)&&n.type===QS?o&&o.impute?valueref_fieldRef(n,i,{binSuffix:"mid"},{offset:s}):binMidSignal({scaleName:i,fieldDef:n,offset:s}):valueref_fieldRef(n,i,binRequiresRange(n,t)?{binSuffix:"range"}:{},{offset:s});if(bin_isBinned(n.bin)){if(isFieldDef(r))return binMidSignal({scaleName:i,fieldDef:n,fieldDef2:r,offset:s});var l=t===Mk?Fk:Ik;log_warn(LS.channelRequiredForBinned(l))}}if(a){var c=a.get("type");if(hasDiscreteDomain(c))return valueref_fieldRef(n,i,{binSuffix:"range"},"band"===c?{band:.5,offset:s}:{offset:s})}return valueref_fieldRef(n,i,{},{offset:s})}if(isValueDef(n)){var f=n.value,d=s?{offset:s}:{};return Object.assign({},vgValueRef(t,f),d)}}return Vw(u)?u():u}function vgValueRef(e,t){return util_contains(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:util_contains(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:{value:t}}function tooltipForEncoding(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).reactiveGeom,r=[],i={},a={},o=n?"datum.datum":"datum",s=[];function add(n,r){var i=getMainRangeChannel(r),u=isTypedFieldDef(n)?n:Object.assign({},n,{type:e[i].type}),l=channeldef_title(u,t,{allowDisabling:!1}),c=valueref_text(u,t,o).signal;if("x"===r||"y"===r){var f="x"===r?"x2":"y2",d=getFieldDef(e[f]);if(bin_isBinned(u.bin)&&d)c=binFormatExpression(channeldef_vgField(u,{expr:o}),channeldef_vgField(d,{expr:o}),channeldef_format(u),t),a[f]=!0}s.push({channel:r,key:l,value:c})}forEach(e,(function(e,t){isFieldDef(e)?add(e,t):hasConditionalFieldDef(e)&&add(e.condition,t)}));for(var u=0,l=s;u<l.length;u++){var c=l[u],f=c.channel,d=c.key,h=c.value;a[f]||i[d]||(r.push("".concat(stringValue_$(d),": ").concat(h)),i[d]=!0)}return r.length?{signal:"{".concat(r.join(", "),"}")}:void 0}function valueref_text(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"datum";if(e){if(isValueDef(e))return{value:e.value};if(isTypedFieldDef(e))return formatSignalRef(e,channeldef_format(e),n,t)}}function valueref_mid(e){return Object.assign({},e,{mult:.5})}function positionDefault(e){var t=e.markDef,n=e.config,r=e.defaultRef,i=e.channel,a=e.scaleName,o=e.scale,s=e.mark,u=e.checkBarAreaWithoutZero;return function(){var e=getMainRangeChannel(i),l=getFirstDefined(t[i],getMarkConfig(i,t,n));if(void 0!==l)return vgValueRef(i,l);if(qw(r)){if(a){var c=o.get("type");if(util_contains([vE.LOG,vE.TIME,vE.UTC],c))!u||"bar"!==s&&"area"!==s||log_warn(LS.nonZeroScaleUsedWithLengthMark(s,e,{scaleType:c}));else{if(o.domainDefinitelyIncludesZero())return{scale:a,value:0};!u||"bar"!==s&&"area"!==s||log_warn(LS.nonZeroScaleUsedWithLengthMark(s,e,{zeroFalse:!1===o.explicit.zero}))}}return"zeroOrMin"===r?"x"===e?{value:0}:{field:{group:"height"}}:"x"===e?{field:{group:"width"}}:{value:0}}return r}}function isVisible(e){return"transparent"!==e&&null!==e&&void 0!==e}function mixins_color(e){var t=e.markDef,n=e.encoding,r=e.config,i=t.filled,a=t.type,o={fill:getMarkConfig("fill",t,r),stroke:getMarkConfig("stroke",t,r),color:getMarkConfig("color",t,r)},s=util_contains(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,u=getFirstDefined(t.fill,o.fill,s),l=getFirstDefined(t.stroke,o.stroke),c=i?"fill":"stroke",f=Object.assign({},u?{fill:{value:u}}:{},l?{stroke:{value:l}}:{});return n.fill||n.stroke?(t.color&&log_warn(LS.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),Object.assign({},nonPosition("fill",e,{defaultValue:getFirstDefined(u,s)}),nonPosition("stroke",e,{defaultValue:l}))):n.color?Object.assign({},f,nonPosition("color",e,{vgChannel:c,defaultValue:getFirstDefined(t[c],t.color,o[c],o.color,i?s:void 0)})):isVisible(t.fill)||isVisible(t.stroke)?(t.color&&log_warn(LS.droppingColor("property",{fill:"fill"in t,stroke:"stroke"in t})),f):t.color?Object.assign({},f,Object(po.a)({},c,{value:t.color})):isVisible(o.fill)||isVisible(o.stroke)?f:o.color?Object.assign({},s?{fill:{value:"transparent"}}:{},Object(po.a)({},c,{value:o.color})):{}}function baseEncodeEntry(e,t){var n=mixins_color(e),r=n.fill,i=n.stroke;return Object.assign({},function markDefProperties(e,t){return rT.reduce((function(n,r){return void 0!==e[r]&&"ignore"!==t[r]&&(n[r]={value:e[r]}),n}),{})}(e.markDef,t),wrapAllFieldsInvalid(e,"fill",r),wrapAllFieldsInvalid(e,"stroke",i),nonPosition("opacity",e),nonPosition("fillOpacity",e),nonPosition("strokeOpacity",e),nonPosition("strokeWidth",e),mixins_tooltip(e),mixins_text(e,"href"))}function wrapAllFieldsInvalid(e,t,n){var r=e.config,i=e.mark;if("hide"===r.invalidValues&&n&&!isPathMark(i)){var a=allFieldsInvalidPredicate(e,{invalid:!0,channels:bS});if(a)return Object(po.a)({},t,[{test:a,value:null}].concat(Object(Ra.a)(Hw(n))))}return n?Object(po.a)({},t,n):{}}function valueIfDefined(e,t){if(void 0!==t)return Object(po.a)({},e,{value:t})}function allFieldsInvalidPredicate(e,t){var n=t.invalid,r=void 0!==n&&n,i=t.channels.reduce((function(t,n){var r=e.getScaleComponent(n);if(r){var i=r.get("type"),a=e.vgField(n,{expr:"datum"});a&&hasContinuousDomain(i)&&(t[a]=!0)}return t}),{}),a=ak(i);if(a.length>0){var o=r?"||":"&&";return a.map((function(e){return fieldInvalidPredicate(e,r)})).join(" ".concat(o," "))}}function mixins_defined(e){if(e.config.invalidValues){var t=allFieldsInvalidPredicate(e,{channels:["x","y"]});if(t)return{defined:{signal:t}}}return{}}function nonPosition(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.markDef,i=t.encoding,a=t.config,o=n.vgChannel,s=void 0===o?e:o,u=n.defaultRef,l=n.defaultValue;void 0===u&&(l=l||(s===e?r[e]:getFirstDefined(r[e],r[s],getMarkConfig(e,r,a,{vgChannel:s}))),u=l?{value:l}:void 0);var c=i[e];return wrapCondition(t,c,s,(function(n){return midPoint({channel:e,channelDef:n,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:u})}))}function wrapCondition(e,t,n,r){var i=t&&t.condition,a=r(t);if(i){var o=(Uw(i)?i:[i]).map((function(t){var n=r(t),i=function isConditionalSelection(e){return e.selection}(t)?assembleSelectionPredicate(e,t.selection):predicate_expression(e,t.test);return Object.assign({test:i},n)}));return Object(po.a)({},n,[].concat(Object(Ra.a)(o),Object(Ra.a)(void 0!==a?[a]:[])))}return void 0!==a?Object(po.a)({},n,a):{}}function mixins_tooltip(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.encoding,r=e.markDef,i=e.config,a=n.tooltip;return Uw(a)?{tooltip:tooltipForEncoding({tooltip:a},i,t)}:wrapCondition(e,a,"tooltip",(function(a){var o=valueref_text(a,e.config,t.reactiveGeom?"datum.datum":"datum");if(o)return o;if(null!==a){var s=getFirstDefined(r.tooltip,getMarkConfig("tooltip",r,i));return qw(s)?{value:s}:zw(s)?"encoding"===s.content?tooltipForEncoding(n,i,t):{signal:"datum"}:void 0}}))}function mixins_text(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=e.encoding[t];return wrapCondition(e,n,t,(function(t){return valueref_text(t,e.config)}))}function pointPosition(e,t,n,r){var i=t.encoding,a=t.mark,o=t.markDef,s=t.config,u=t.stack,l=i[e],c=i[e===Mk?Fk:Ik],f=t.scaleName(e),d=t.getScaleComponent(e),h=getOffset(e,t.markDef),p=l||!i.latitude&&!i.longitude?function valueref_position(e){var t=e.channel,n=e.channelDef,r=e.scaleName,i=e.stack,a=e.offset;return isFieldDef(n)&&i&&t===i.fieldChannel?valueref_fieldRef(n,r,{suffix:"end"},{offset:a}):midPointWithPositionInvalidTest(e)}({channel:e,channelDef:l,channel2Def:c,scaleName:f,scale:d,stack:u,mark:a,offset:h,defaultRef:positionDefault({markDef:o,config:s,defaultRef:n,channel:e,scaleName:f,scale:d,mark:a,checkBarAreaWithoutZero:!c})}):{field:t.getName(e)};return Object(po.a)({},r||e,p)}function pointPosition2(e,t,n){var r,i=e.encoding,a=e.mark,o=e.markDef,s=e.stack,u=e.config,l="x2"===n?"x":"y",c="x2"===n?"width":"height",f=i[l],d=e.scaleName(l),h=e.getScaleComponent(l),p=getOffset(n,e.markDef);if(!f&&(i.latitude||i.longitude))return Object(po.a)({},n,{field:e.getName(n)});var g=function position2(e){var t=e.channel,n=e.channelDef,r=e.channel2Def,i=e.scaleName,a=e.scale,o=e.stack,s=e.mark,u=e.offset,l=e.defaultRef;return isFieldDef(n)&&o&&t.charAt(0)===o.fieldChannel.charAt(0)?valueref_fieldRef(n,i,{suffix:"start"},{offset:u}):midPointWithPositionInvalidTest({channel:t,channelDef:r,scaleName:i,scale:a,stack:o,mark:s,offset:u,defaultRef:l})}({channel:n,channelDef:f,channel2Def:i[n],scaleName:d,scale:h,stack:s,mark:a,offset:p,defaultRef:void 0});return void 0!==g?Object(po.a)({},n,g):getFirstDefined(position2orSize(n,o),position2orSize(n,(r={},Object(po.a)(r,n,getStyleConfig(n,o,u.style)),Object(po.a)(r,c,getStyleConfig(c,o,u.style)),r)),position2orSize(n,u[a]),position2orSize(n,u.mark),Object(po.a)({},n,positionDefault({markDef:o,config:u,defaultRef:t,channel:n,scaleName:d,scale:h,mark:a,checkBarAreaWithoutZero:!i[n]})()))}function position2orSize(e,t){var n="x2"===e?"width":"height";return t[e]?Object(po.a)({},e,vgValueRef(e,t[e])):t[n]?Object(po.a)({},n,{value:t[n]}):void 0}function guideEncodeEntry(e,t){return ak(e).reduce((function(n,r){var i=e[r];return Object.assign({},n,wrapCondition(t,i,r,(function(e){return{value:e.value}})))}),{})}function parseGuideResolve(e,t){var n=e.scale[t],r=util_contains(mS,t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&log_warn(LS.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}var VT=function(){function Split(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(_d.a)(this,Split),this.explicit=e,this.implicit=t}return Object(bd.a)(Split,[{key:"clone",value:function clone(){return new Split(rk(this.explicit),rk(this.implicit))}},{key:"combine",value:function combine(){return Object.assign({},this.explicit,this.implicit)}},{key:"get",value:function get(e){return getFirstDefined(this.explicit[e],this.implicit[e])}},{key:"getWithExplicit",value:function getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}},{key:"setWithExplicit",value:function setWithExplicit(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}},{key:"set",value:function set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}},{key:"copyKeyFromSplit",value:function copyKeyFromSplit(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}},{key:"copyKeyFromObject",value:function copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}},{key:"copyAll",value:function copyAll(e){var t=!0,n=!1,r=void 0;try{for(var i,a=ak(e.combine())[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=e.getWithExplicit(o);this.setWithExplicit(o,s)}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}]),Split}();function split_makeExplicit(e){return{explicit:!0,value:e}}function makeImplicit(e){return{explicit:!1,value:e}}function tieBreakByComparing(e){return function(t,n,r,i){var a=e(t.value,n.value);return a>0?t:a<0?n:defaultTieBreaker(t,n,r,i)}}function defaultTieBreaker(e,t,n,r){return e.explicit&&t.explicit&&log_warn(LS.mergeConflictingProperty(n,r,e.value,t.value)),e}function mergeValuesWithExplicit(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:defaultTieBreaker;return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ik(e.value)===ik(t.value)?e:i(e,t,n,r)}var YT=function(e){function LegendComponent(){return Object(_d.a)(this,LegendComponent),Object(WE.a)(this,Object(GE.a)(LegendComponent).apply(this,arguments))}return Object(HE.a)(LegendComponent,e),LegendComponent}(VT);function properties_type(e){return getFirstDefined(e.legend.type,properties_defaultType(e))}function properties_defaultType(e){var t=e.channel,n=e.timeUnit,r=e.scaleType,i=e.alwaysReturn;if(isColorChannel(t)){if(util_contains(["quarter","month","day"],n))return"symbol";if(isContinuousToContinuous(r))return i?"gradient":void 0}return i?"symbol":void 0}function properties_direction(e){var t=e.legend,n=e.legendConfig,r=e.timeUnit,i=e.channel,a=e.scaleType,o=getFirstDefined(t.orient,n.orient,"right"),s=properties_type({legend:t,channel:i,timeUnit:r,scaleType:a,alwaysReturn:!0});return getFirstDefined(t.direction,n[s?"gradientDirection":"symbolDirection"],function defaultDirection(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(o,s))}function gradientLengthSignal(e,t,n,r){var i=e.getSizeSignalRef(t).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function encode_type(e,t,n){var r=t.getScaleComponent(n).get("type");return getFirstDefined(e.get("type"),properties_defaultType({channel:n,scaleType:r,alwaysReturn:!0}))}function encode_symbols(e,t,n,r,i){if("symbol"===encode_type(i,n,r)){var a=Object.assign({},function applyMarkConfig(e,t,n){var r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=getMarkConfig(u,t.markDef,t.config);void 0!==l&&(e[u]={value:l})}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}({},n,xk),mixins_color(n)),o=n.markDef,s=n.encoding,u=n.config,l=o.filled,c=getMaxValue(s.opacity)||o.opacity;if(a.fill)if("fill"===r||l&&r===zk)delete a.fill;else if(a.fill.field)i.get("symbolFillColor")?delete a.fill:(a.fill={value:u.legend.symbolBaseFillColor||"black"},a.fillOpacity={value:c||1});else if(Uw(a.fill)){var f=getFirstConditionValue(s.fill||s.color)||o.fill||l&&o.color;f&&(a.fill={value:f})}if(a.stroke)if("stroke"===r||!l&&r===zk)delete a.stroke;else if(a.stroke.field)delete a.stroke;else if(Uw(a.stroke)){var d=getFirstDefined(getFirstConditionValue(s.stroke||s.color),o.stroke,l?o.color:void 0);d&&(a.stroke={value:d})}return r!==Vk&&c&&(a.opacity={value:c}),a=Object.assign({},a,t),ak(a).length>0?a:void 0}}function legend_encode_gradient(e,t,n,r,i){if("gradient"===encode_type(i,n,r)){var a={},o=getMaxValue(n.encoding.opacity)||n.markDef.opacity;return o&&(a.opacity={value:o}),a=Object.assign({},a,t),ak(a).length>0?a:void 0}}function encode_labels(e,t,n,r){var i=n.legend(r),a=n.config,o={};if(isTimeFormatFieldDef(e)){var s=n.getScaleComponent(r).get("type")===vE.UTC,u=timeFormatExpression("datum.value",e.timeUnit,i.format,a.legend.shortTimeLabels,a.timeFormat,s);t=Object.assign({},u?{text:{signal:u}}:{},t)}return o=Object.assign({},o,t),ak(o).length>0?o:void 0}function getMaxValue(e){return getConditionValue(e,(function(e,t){return Math.max(e,t.value)}))}function getFirstConditionValue(e){return getConditionValue(e,(function(e,t){return getFirstDefined(e,t.value)}))}function getConditionValue(e,t){return function hasConditionalValueDef(e){return!!e&&!!e.condition&&(Uw(e.condition)||isValueDef(e.condition))}(e)?(Uw(e.condition)?e.condition:[e.condition]).reduce(t,e.value):isValueDef(e)?e.value:void 0}function parseLegend(e){isUnitModel(e)?e.component.legends=function parseUnitLegend(e){var t=e.encoding;return[zk,qk,Wk,Xk,Hk,Gk,Vk,Yk,$k].reduce((function(n,r){var i=t[r];return!e.legend(r)||!e.getScaleComponent(r)||isFieldDef(i)&&r===Gk&&i.type===rE||(n[r]=function parseLegendForChannel(e,t){var n=e.fieldDef(t),r=e.legend(t),i=new YT({},function getLegendDefWithScale(e,t){var n=e.scaleName(zk);if("color"===t)return e.markDef.filled?{fill:n}:{stroke:n};return Object(po.a)({},t,e.scaleName(t))}(e,t)),a=!0,o=!1,s=void 0;try{for(var u,l=wE[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=getProperty(c,r,t,e);if(void 0!==f){var d=isExplicit(f,c,r,n);(d||void 0===e.config.legend[c])&&i.set(c,f,d)}}}catch(g){o=!0,s=g}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}var h=r.encoding||{},p=["labels","legend","title","symbols","gradient"].reduce((function(r,a){var o=guideEncodeEntry(h[a]||{},e),s=x[a]?x[a](n,o,e,t,i):o;return void 0!==s&&ak(s).length>0&&(r[a]={update:s}),r}),{});ak(p).length>0&&i.set("encode",p,!!r.encoding);return i}(e,r)),n}),{})}(e):e.component.legends=function parseNonUnitLegend(e){var t=e.component,n=t.legends,r=t.resolve,i=!0,a=!1,o=void 0;try{for(var s,u=function _loop(){var t=s.value;parseLegend(t),ak(t.component.legends).forEach((function(i){r.legend[i]=parseGuideResolve(e.component.resolve,i),"shared"===r.legend[i]&&(n[i]=mergeLegendComponent(n[i],t.component.legends[i]),n[i]||(r.legend[i]="independent",delete n[i]))}))},l=e.children[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(c){a=!0,o=c}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return ak(n).forEach((function(t){var n=!0,i=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;u.component.legends[t]&&("shared"===r.legend[t]&&delete u.component.legends[t])}}catch(c){i=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}})),n}(e)}function isExplicit(e,t,n,r){switch(t){case"values":return!!n.values;case"title":if("title"===t&&e===r.title)return!0}return e===n[t]}function getProperty(e,t,n,r){var i=r.encoding,a=r.mark,o=getTypedFieldDef(i[n]),s=r.config.legend,u=o.timeUnit,l=r.getScaleComponent(n).get("type");switch(e){case"direction":return properties_direction({legend:t,legendConfig:s,timeUnit:u,channel:n,scaleType:l});case"format":if(isTimeFormatFieldDef(o))return;return numberFormat(o,t.format,r.config);case"formatType":if(isTimeFormatFieldDef(o))return;return t.formatType;case"gradientLength":return getFirstDefined(t.gradientLength,s.gradientLength,function defaultGradientLength(e){var t=e.legend,n=e.legendConfig,r=e.model,i=e.channel,a=e.scaleType,o=n.gradientHorizontalMaxLength,s=n.gradientHorizontalMinLength,u=n.gradientVerticalMaxLength,l=n.gradientVerticalMinLength;if("horizontal"===properties_direction({legend:t,legendConfig:n,channel:i,scaleType:a})){var c=getFirstDefined(t.orient,n.orient);return"top"===c||"bottom"===c?gradientLengthSignal(r,"width",s,o):s}return gradientLengthSignal(r,"height",l,u)}({model:r,legend:t,legendConfig:s,channel:n,scaleType:l}));case"labelOverlap":return getFirstDefined(t.labelOverlap,function properties_defaultLabelOverlap(e){if(util_contains(["quantile","threshold","log"],e))return"greedy"}(l));case"symbolType":return getFirstDefined(t.symbolType,function defaultSymbolType(e,t,n,r){if("shape"!==t){var i=getFirstConditionValue(n)||r;if(i)return i}switch(e){case"bar":case"rect":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(a,n,i.shape,r.markDef.shape));case"title":return channeldef_title(o,r.config,{allowDisabling:!0})||void 0;case"type":return properties_type({legend:t,channel:n,timeUnit:u,scaleType:l,alwaysReturn:!1});case"values":return function legend_properties_values(e,t){var n=e.values;if(n)return valueArray(t,n)}(t,o)}return t[e]}function mergeLegendComponent(e,t){if(!e)return t.clone();var n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(!n.explicit||!r.explicit||n.value===r.value){var i=!1,a=!0,o=!1,s=void 0;try{for(var u,l=function _loop2(){var n=u.value,r=mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",(function(e,t){switch(n){case"symbolType":return function mergeSymbolType(e,t){if("circle"===t.value)return t;return e}(e,t);case"title":return mergeTitleComponent(e,t);case"type":return i=!0,makeImplicit("symbol")}return defaultTieBreaker(e,t,n,"legend")}));e.setWithExplicit(n,r)},c=kE[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l()}catch(f){o=!0,s=f}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i&&(((e.implicit||{}).encode||{}).gradient&&deleteNestedProperty(e.implicit,["encode","gradient"]),((e.explicit||{}).encode||{}).gradient&&deleteNestedProperty(e.explicit,["encode","gradient"])),e}}function assemble_assembleLegends(e){var t=e.component.legends,n={},r=!0,i=!1,a=void 0;try{for(var o,s=ak(t)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=e.getScaleComponent(u),c=ik(l.get("domains"));if(n[c]){var f=!0,d=!1,h=void 0;try{for(var p,g=n[c][Symbol.iterator]();!(f=(p=g.next()).done);f=!0){mergeLegendComponent(p.value,t[u])||n[c].push(t[u])}}catch(m){d=!0,h=m}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}else n[c]=[t[u].clone()]}}catch(m){i=!0,a=m}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return util_flatten(util_vals(n)).map((function(e){var t=e.combine();if(t.encode&&t.encode.symbols){var n=t.encode.symbols.update;!n.fill||"transparent"===n.fill.value||n.stroke||t.stroke||(n.stroke={value:"transparent"}),t.fill&&delete n.fill}return t}))}function assemble_assembleProjections(e){return isLayerModel(e)||isConcatModel(e)||isRepeatModel(e)?function assembleProjectionsForModelAndChildren(e){return e.children.reduce((function(e,t){return e.concat(t.assembleProjections())}),assembleProjectionForModel(e))}(e):assembleProjectionForModel(e)}function assembleProjectionForModel(e){var t=e.component.projection;if(!t||t.merged)return[];var n=t.combine(),r=n.name,i=__rest(n,["name"]);if(t.data){var a={signal:"[".concat(t.size.map((function(e){return e.signal})).join(", "),"]")},o=t.data.reduce((function(t,n){var r=isSignalRef(n)?n.signal:"data('".concat(e.lookupDataSource(n),"')");return util_contains(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:r,size:a,fit:{signal:o.length>1?"[".concat(o.join(", "),"]"):o[0]}},i)]}return[Object.assign({name:r},{translate:{signal:"[width / 2, height / 2]"}},i)]}var $T=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],XT=function(e){function ProjectionComponent(e,t,n,r){var i;return Object(_d.a)(this,ProjectionComponent),(i=Object(WE.a)(this,Object(GE.a)(ProjectionComponent).call(this,Object.assign({},t),{name:e}))).specifiedProjection=t,i.size=n,i.data=r,i.merged=!1,i}return Object(HE.a)(ProjectionComponent,e),Object(bd.a)(ProjectionComponent,[{key:"isFit",get:function get(){return!!this.data}}]),ProjectionComponent}(VT);function parse_parseProjection(e){e.component.projection=isUnitModel(e)?function parseUnitProjection(e){if(e.hasProjection){var t=e.specifiedProjection,n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function gatherFitData(e){var t=[];[[Nk,Lk],[Uk,Bk]].forEach((function(n){(e.channelHasField(n[0])||e.channelHasField(n[1]))&&t.push({signal:e.getName("geojson_".concat(t.length))})})),e.channelHasField(Gk)&&e.fieldDef(Gk).type===rE&&t.push({signal:e.getName("geojson_".concat(t.length))});0===t.length&&t.push(e.requestDataName(tT));return t}(e):void 0;return new XT(e.projectionName(!0),Object.assign({},e.config.projection||{},t||{}),r,i)}return}(e):function parseNonUnitProjections(e){if(0===e.children.length)return;var t;e.children.forEach((function(e){return parse_parseProjection(e)}));var n=every(e.children,(function(e){var n=e.component.projection;if(n){if(t){var r=function mergeIfNoConflict(e,t){var n=every($T,(function(n){return!e.explicit.hasOwnProperty(n)&&!t.explicit.hasOwnProperty(n)||!(!e.explicit.hasOwnProperty(n)||!t.explicit.hasOwnProperty(n)||ik(e.get(n))!==ik(t.get(n)))}));if(ik(e.size)===ik(t.size)){if(n)return e;if(ik(e.explicit)===ik({}))return t;if(ik(t.explicit)===ik({}))return e}return null}(t,n);return r&&(t=r),!!r}return t=n,!0}return!0}));if(t&&n){var r=e.projectionName(!0),i=new XT(r,t.specifiedProjection,t.size,rk(t.data));return e.children.forEach((function(e){var t=e.component.projection;if(t){var n;if(t.isFit)(n=i.data).push.apply(n,Object(Ra.a)(e.component.projection.data));e.renameProjection(t.get("name"),r),t.merged=!0}})),i}return}(e)}var KT=n(76),JT=n(78),ZT=n(77);function binKey(e,t){return"".concat(binToString(e),"_").concat(t)}function getBinSignalName(e,t,n){var r=binKey(normalizeBin(n,void 0)||{},t);return e.getName("".concat(r,"_bins"))}function createBinComponent(e,t,n){var r;r=function isBinTransform(e){return"as"in e}(e)?qw(e.as)?[e.as,"".concat(e.as,"_end")]:[e.as[0],e.as[1]]:[channeldef_vgField(e,{forAs:!0}),channeldef_vgField(e,{binSuffix:"end",forAs:!0})];var i=normalizeBin(t,void 0)||{},a=binKey(i,e.field),o=function getSignalsFromModel(e,t){return{signal:e.getName("".concat(t,"_bins")),extentSignal:e.getName("".concat(t,"_extent"))}}(n,a),s=o.signal,u=o.extentSignal;return{key:a,binComponent:Object.assign({bin:i,field:e.field,as:[r]},s?{signal:s}:{},u?{extentSignal:u}:{})}}var QT=function(e){function BinNode(e,t){var n;return Object(_d.a)(this,BinNode),(n=Object(WE.a)(this,Object(GE.a)(BinNode).call(this,e))).bins=t,n}return Object(HE.a)(BinNode,e),Object(bd.a)(BinNode,[{key:"clone",value:function clone(){return new BinNode(null,rk(this.bins))}},{key:"merge",value:function merge(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=ak(e.bins)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s in this.bins?(t(e.bins[s].signal,this.bins[s].signal),this.bins[s].as=unique([].concat(Object(Ra.a)(this.bins[s].as),Object(Ra.a)(e.bins[s].as)),util_hash)):this.bins[s]=e.bins[s]}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,l=!1,c=void 0;try{for(var f,d=e.children[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;e.removeChild(h),h.parent=this}}catch(p){l=!0,c=p}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}e.remove()}},{key:"producedFields",value:function producedFields(){return new Set(util_flatten(util_flatten(util_vals(this.bins).map((function(e){return e.as})))))}},{key:"dependentFields",value:function dependentFields(){return new Set(util_vals(this.bins).map((function(e){return e.field})))}},{key:"hash",value:function hash(){return"Bin ".concat(util_hash(this.bins))}},{key:"assemble",value:function assemble(){return util_flatten(util_vals(this.bins).map((function(e){var t=[],n=function _toArray(e){return Object(KT.a)(e)||Object(JT.a)(e)||Object(ZT.a)()}(e.as),r=n[0],i=n.slice(1),a=Object.assign({type:"bin",field:replacePathInField(e.field),as:r,signal:e.signal},e.bin);!e.bin.extent&&e.extentSignal&&(t.push({type:"extent",field:replacePathInField(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);var o=!0,s=!1,u=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)for(var f=l.value,d=0;d<2;d++)t.push({type:"formula",expr:channeldef_vgField({field:r[d]},{expr:"datum"}),as:f[d]})}catch(h){s=!0,u=h}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t})))}}],[{key:"makeFromEncoding",value:function makeFromEncoding(e,t){var n=t.reduceFieldDef((function(e,n,r){if(isTypedFieldDef(n)&&isBinning(n.bin)){var i=createBinComponent(n,n.bin,t),a=i.key,o=i.binComponent;e[a]=Object.assign({},o,e[a],function rangeFormula(e,t,n,r){if(binRequiresRange(t,n)){var i=isUnitModel(e)&&(e.axis(n)||e.legend(n))||{},a=channeldef_vgField(t,{expr:"datum"}),o=channeldef_vgField(t,{expr:"datum",binSuffix:"end"});return{formulaAs:channeldef_vgField(t,{binSuffix:"range",forAs:!0}),formula:binFormatExpression(a,o,i.format,r)}}return{}}(t,n,r,t.config))}return e}),{});return 0===ak(n).length?null:new BinNode(e,n)}},{key:"makeFromTransform",value:function makeFromTransform(e,t,n){var r=createBinComponent(t,t.bin,n),i=r.key,a=r.binComponent;return new BinNode(e,Object(po.a)({},i,a))}}]),BinNode}(gT),eC=function(e){function SourceNode(e){var t,n;if(Object(_d.a)(this,SourceNode),t=Object(WE.a)(this,Object(GE.a)(SourceNode).call(this,null)),isGenerator(e=e||{name:"source"})||(n=e.format?Object.assign({},omit(e.format,["parse"])):{}),isInlineData(e))t._data={values:e.values};else if(isUrlData(e)){if(t._data={url:e.url},!n.type){var r=/(?:\.([^.]+))?$/.exec(e.url)[1];util_contains(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else isSphereGenerator(e)?t._data={values:[{type:"Sphere"}]}:(isNamedData(e)||isGenerator(e))&&(t._data={});return t._generator=isGenerator(e),e.name&&(t._name=e.name),n&&ak(n).length>0&&(t._data.format=n),t}return Object(HE.a)(SourceNode,e),Object(bd.a)(SourceNode,[{key:"hasName",value:function hasName(){return!!this._name}},{key:"remove",value:function remove(){throw new Error("Source nodes are roots and cannot be removed.")}},{key:"hash",value:function hash(){throw new Error("Cannot hash sources")}},{key:"assemble",value:function assemble(){return Object.assign({name:this._name},this._data,{transform:[]})}},{key:"data",get:function get(){return this._data}},{key:"isGenerator",get:function get(){return this._generator}},{key:"dataName",get:function get(){return this._name},set:function set(e){this._name=e}},{key:"parent",set:function set(e){throw new Error("Source nodes have to be roots.")}}]),SourceNode}(gT);function checkLinks(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,u=!1,l=void 0;try{for(var c,f=o.children[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;if(d.parent!==o)return console.error("Dataflow graph is inconsistent.",o,d),!1}}catch(h){u=!0,l=h}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}if(!checkLinks(o.children))return!1}}catch(h){n=!0,r=h}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}var tC=function(e){function GraticuleNode(e,t){var n;return Object(_d.a)(this,GraticuleNode),(n=Object(WE.a)(this,Object(GE.a)(GraticuleNode).call(this,e))).params=t,n}return Object(HE.a)(GraticuleNode,e),Object(bd.a)(GraticuleNode,[{key:"clone",value:function clone(){return new GraticuleNode(null,this.params)}},{key:"assemble",value:function assemble(){return Object.assign({type:"graticule"},!0===this.params?{}:this.params)}}]),GraticuleNode}(gT),nC=function(e){function SequenceNode(e,t){var n;return Object(_d.a)(this,SequenceNode),(n=Object(WE.a)(this,Object(GE.a)(SequenceNode).call(this,e))).params=t,n}return Object(HE.a)(SequenceNode,e),Object(bd.a)(SequenceNode,[{key:"clone",value:function clone(){return new SequenceNode(null,this.params)}},{key:"producedFields",value:function producedFields(){return new Set([this.params.as||"data"])}},{key:"assemble",value:function assemble(){return Object.assign({type:"sequence"},this.params)}}]),SequenceNode}(gT);function isDataSourceNode(e){return e instanceof eC||e instanceof tC||e instanceof nC}var rC=function(){function OptimizerBase(){Object(_d.a)(this,OptimizerBase),this._mutated=!1}return Object(bd.a)(OptimizerBase,[{key:"setMutated",value:function setMutated(){this._mutated=!0}},{key:"mutatedFlag",get:function get(){return this._mutated}}]),OptimizerBase}(),iC=function(e){function BottomUpOptimizer(){var e;return Object(_d.a)(this,BottomUpOptimizer),(e=Object(WE.a)(this,Object(GE.a)(BottomUpOptimizer).call(this)))._continue=!1,e}return Object(HE.a)(BottomUpOptimizer,e),Object(bd.a)(BottomUpOptimizer,[{key:"setContinue",value:function setContinue(){this._continue=!0}},{key:"reset",value:function reset(){}},{key:"optimizeNextFromLeaves",value:function optimizeNextFromLeaves(e){if(isDataSourceNode(e))return!1;var t=e.parent;return this.run(e).continueFlag&&this.optimizeNextFromLeaves(t),this.mutatedFlag}},{key:"continueFlag",get:function get(){return this._continue}},{key:"flags",get:function get(){return{continueFlag:this.continueFlag,mutatedFlag:this.mutatedFlag}},set:function set(e){var t=e.continueFlag,n=e.mutatedFlag;t&&this.setContinue(),n&&this.setMutated()}}]),BottomUpOptimizer}(rC),aC=function(e){function TopDownOptimizer(){return Object(_d.a)(this,TopDownOptimizer),Object(WE.a)(this,Object(GE.a)(TopDownOptimizer).apply(this,arguments))}return Object(HE.a)(TopDownOptimizer,e),TopDownOptimizer}(rC);function addDimension(e,t,n,r){if(isTypedFieldDef(n)&&isBinning(n.bin))e.add(channeldef_vgField(n,{})),e.add(channeldef_vgField(n,{binSuffix:"end"})),binRequiresRange(n,t)&&e.add(channeldef_vgField(n,{binSuffix:"range"}));else if(function isGeoPositionChannel(e){return e in rS}(t)){var i=function getPositionChannelFromLatLong(e){switch(e){case Lk:return"y";case Bk:return"y2";case Nk:return"x";case Uk:return"x2"}}(t);e.add(r.getName(i))}else e.add(channeldef_vgField(n));return e}var oC=function(e){function AggregateNode(e,t,n){var r;return Object(_d.a)(this,AggregateNode),(r=Object(WE.a)(this,Object(GE.a)(AggregateNode).call(this,e))).dimensions=t,r.measures=n,r}return Object(HE.a)(AggregateNode,e),Object(bd.a)(AggregateNode,[{key:"clone",value:function clone(){return new AggregateNode(null,new Set(this.dimensions),rk(this.measures))}},{key:"merge",value:function merge(e){return function setEqual(e,t){if(e.size!==t.size)return!1;var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!t.has(s))return!1}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}(this.dimensions,e.dimensions)?(function mergeMeasures(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=ak(t)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=t[s],l=!0,c=!1,f=void 0;try{for(var d,h=ak(u)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;s in e?e[s][p]=new Set([].concat(Object(Ra.a)(e[s][p]||[]),Object(Ra.a)(u[p]))):e[s]=Object(po.a)({},p,u[p])}}catch(g){c=!0,f=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}}catch(g){r=!0,i=g}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(this.measures,e.measures),!0):(function log_debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];BS.debug.apply(BS,arguments)}("different dimensions, cannot merge"),!1)}},{key:"addDimensions",value:function addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}},{key:"dependentFields",value:function dependentFields(){return new Set([].concat(Object(Ra.a)(this.dimensions),Object(Ra.a)(ak(this.measures))))}},{key:"producedFields",value:function producedFields(){var e=new Set,t=!0,n=!1,r=void 0;try{for(var i,a=ak(this.measures)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,u=!1,l=void 0;try{for(var c,f=ak(this.measures[o])[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value,h=this.measures[o][d];0===h.size?e.add("".concat(d,"_").concat(o)):h.forEach(e.add,e)}}catch(p){u=!0,l=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}}catch(p){n=!0,r=p}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"hash",value:function hash(){return"Aggregate ".concat(util_hash({dimensions:this.dimensions,measures:this.measures}))}},{key:"assemble",value:function assemble(){var e=[],t=[],n=[],r=!0,i=!1,a=void 0;try{for(var o,s=ak(this.measures)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=!0,c=!1,f=void 0;try{for(var d,h=ak(this.measures[u])[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,g=!0,m=!1,v=void 0;try{for(var y,_=this.measures[u][p][Symbol.iterator]();!(g=(y=_.next()).done);g=!0){var b=y.value;n.push(b),e.push(p),t.push("*"===u?null:replacePathInField(u))}}catch(x){m=!0,v=x}finally{try{g||null==_.return||_.return()}finally{if(m)throw v}}}}catch(x){c=!0,f=x}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}}catch(x){i=!0,a=x}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{type:"aggregate",groupby:Object(Ra.a)(this.dimensions),ops:e,fields:t,as:n}}},{key:"groupBy",get:function get(){return this.dimensions}}],[{key:"makeFromEncoding",value:function makeFromEncoding(e,t){var n=!1;t.forEachFieldDef((function(e){e.aggregate&&(n=!0)}));var r={},i=new Set;return n?(t.forEachFieldDef((function(e,n){var a=e.aggregate,o=e.field;if(a)if("count"===a)r["*"]=r["*"]||{},r["*"].count=new Set([channeldef_vgField(e,{forAs:!0})]);else{if(isArgminDef(a)||isArgmaxDef(a)){var s=isArgminDef(a)?"argmin":"argmax",u=a[s];r[u]=r[u]||{},r[u][s]=new Set([channeldef_vgField({op:s,field:u},{forAs:!0})])}else r[o]=r[o]||{},r[o][a]=new Set([channeldef_vgField(e,{forAs:!0})]);isScaleChannel(n)&&"unaggregated"===t.scaleDomain(n)&&(r[o]=r[o]||{},r[o].min=new Set([channeldef_vgField({field:o,aggregate:"min"},{forAs:!0})]),r[o].max=new Set([channeldef_vgField({field:o,aggregate:"max"},{forAs:!0})]))}else addDimension(i,n,e,t)})),i.size+ak(r).length===0?null:new AggregateNode(e,i,r)):null}},{key:"makeFromTransform",value:function makeFromTransform(e,t){var n=new Set,r={},i=!0,a=!1,o=void 0;try{for(var s,u=t.aggregate[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=l.op,f=l.field,d=l.as;c&&("count"===c?(r["*"]=r["*"]||{},r["*"].count=new Set([d||channeldef_vgField(l,{forAs:!0})])):(r[f]=r[f]||{},r[f][c]=new Set([d||channeldef_vgField(l,{forAs:!0})])))}}catch(_){a=!0,o=_}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var h=!0,p=!1,g=void 0;try{for(var m,v=(t.groupby||[])[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;n.add(y)}}catch(_){p=!0,g=_}finally{try{h||null==v.return||v.return()}finally{if(p)throw g}}return n.size+ak(r).length===0?null:new AggregateNode(e,n,r)}}]),AggregateNode}(gT),sC=function(e){function FacetNode(e,t,n,r){var i;Object(_d.a)(this,FacetNode),(i=Object(WE.a)(this,Object(GE.a)(FacetNode).call(this,e))).model=t,i.name=n,i.data=r;var a=!0,o=!1,s=void 0;try{for(var u,l=sS[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=t.facet[c];if(f){var d=f.bin,h=f.sort;i[c]=Object.assign({name:t.getName("".concat(c,"_domain")),fields:[channeldef_vgField(f)].concat(Object(Ra.a)(isBinning(d)?[channeldef_vgField(f,{binSuffix:"end"})]:[]))},isSortField(h)?{sortField:h}:Uw(h)?{sortIndexField:sortArrayIndexField(f,c)}:{})}}}catch(p){o=!0,s=p}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i.childModel=t.child,i}return Object(HE.a)(FacetNode,e),Object(bd.a)(FacetNode,[{key:"hash",value:function hash(){var e="Facet",t=!0,n=!1,r=void 0;try{for(var i,a=sS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this[o]&&(e+=" ".concat(o.charAt(0),":").concat(util_hash(this[o])))}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"getSource",value:function getSource(){return this.name}},{key:"getChildIndependentFieldsWithStep",value:function getChildIndependentFieldsWithStep(){for(var e={},t=0,n=["x","y"];t<n.length;t++){var r=n[t],i=this.childModel.component.scales[r];if(i&&!i.merged){var a=i.get("type"),o=i.get("range");if(hasDiscreteDomain(a)&&isVgRangeStep(o)){var s=getFieldFromDomain(assembleDomain(this.childModel,r));s?e[r]=s:log_warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return e}},{key:"assembleRowColumnHeaderData",value:function assembleRowColumnHeaderData(e,t,n){var r={row:"y",column:"x"}[e],i=[],a=[],o=[];n&&n[r]&&(t?(i.push("distinct_".concat(n[r])),a.push("max")):(i.push(n[r]),a.push("distinct")),o.push("distinct_".concat(n[r])));var s=this[e],u=s.sortField,l=s.sortIndexField;if(u){var c=u.op,f=void 0===c?pT:c,d=u.field;i.push(d),a.push(f),o.push(channeldef_vgField(u,{forAs:!0}))}else l&&(i.push(l),a.push("max"),o.push(l));return{name:this[e].name,source:t||this.data,transform:[Object.assign({type:"aggregate",groupby:this[e].fields},i.length?{fields:i,ops:a,as:o}:{})]}}},{key:"assembleFacetHeaderData",value:function assembleFacetHeaderData(e){var t=this.model.layout.columns,n=this.model.component.layoutHeaders,r=[],i={},a=!0,o=!1,s=void 0;try{for(var u,l=yT[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,f=!0,d=!1,h=void 0;try{for(var p,g=_T[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value,v=n[c]&&n[c][m]||[],y=!0,_=!1,b=void 0;try{for(var x,w=v[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var k=x.value;if(k.axes&&k.axes.length>0){i[c]=!0;break}}}catch(O){_=!0,b=O}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}}catch(O){d=!0,h=O}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}if(i[c]){var S='length(data("'.concat(this.facet.name,'"))'),E="row"===c?t?{signal:"ceil(".concat(S," / ").concat(t,")")}:1:t?{signal:"min(".concat(S,", ").concat(t,")")}:{signal:S};r.push({name:"".concat(this.facet.name,"_").concat(c),transform:[{type:"sequence",start:0,stop:E}]})}}}catch(O){o=!0,s=O}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}var T=i.row,C=i.column;return(T||C)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}},{key:"assemble",value:function assemble(){var e=[],t=null,n=this.getChildIndependentFieldsWithStep(),r=this.column,i=this.row,a=this.facet;if(r&&i&&(n.x||n.y)){t="cross_".concat(this.column.name,"_").concat(this.row.name);var o=[].concat(n.x||[],n.y||[]),s=o.map((function(){return"distinct"}));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:s}]})}for(var u=0,l=[Dk,Rk];u<l.length;u++){var c=l[u];this[c]&&e.push(this.assembleRowColumnHeaderData(c,t,n))}if(a){var f=this.assembleFacetHeaderData(n);f&&e.push.apply(e,Object(Ra.a)(f))}return e}},{key:"fields",get:function get(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=sS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this[o]&&this[o].fields&&e.push.apply(e,Object(Ra.a)(this[o].fields))}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}}]),FacetNode}(gT),uC=function(e){function FilterNode(e,t,n){var r;return Object(_d.a)(this,FilterNode),(r=Object(WE.a)(this,Object(GE.a)(FilterNode).call(this,e))).model=t,r.filter=n,r.expr=predicate_expression(r.model,r.filter,Object(eT.a)(r)),r._dependentFields=getDependentFields(r.expr),r}return Object(HE.a)(FilterNode,e),Object(bd.a)(FilterNode,[{key:"clone",value:function clone(){return new FilterNode(null,this.model,rk(this.filter))}},{key:"dependentFields",value:function dependentFields(){return this._dependentFields}},{key:"assemble",value:function assemble(){return{type:"filter",expr:this.expr}}},{key:"hash",value:function hash(){return"Filter ".concat(this.expr)}}]),FilterNode}(gT);function unquote(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function formatparse_parseExpression(e,t){var n=accessPathWithDatum(e);if("number"===t)return"toNumber(".concat(n,")");if("boolean"===t)return"toBoolean(".concat(n,")");if("string"===t)return"toString(".concat(n,")");if("date"===t)return"toDate(".concat(n,")");if("flatten"===t)return n;if(0===t.indexOf("date:")){var r=unquote(t.slice(5,t.length));return"timeParse(".concat(n,",'").concat(r,"')")}if(0===t.indexOf("utc:")){var i=unquote(t.slice(4,t.length));return"utcParse(".concat(n,",'").concat(i,"')")}return log_warn(LS.unrecognizedParse(t)),null}var lC=function(e){function ParseNode(e,t){var n;return Object(_d.a)(this,ParseNode),(n=Object(WE.a)(this,Object(GE.a)(ParseNode).call(this,e)))._parse=t,n}return Object(HE.a)(ParseNode,e),Object(bd.a)(ParseNode,[{key:"clone",value:function clone(){return new ParseNode(null,rk(this._parse))}}]),Object(bd.a)(ParseNode,[{key:"hash",value:function hash(){return"Parse ".concat(util_hash(this._parse))}},{key:"merge",value:function merge(e){this._parse=Object.assign({},this._parse,e.parse),e.remove()}},{key:"assembleFormatParse",value:function assembleFormatParse(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=ak(this._parse)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=this._parse[o];1===accessPathDepth(o)&&(e[o]=s)}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"producedFields",value:function producedFields(){return new Set(ak(this._parse))}},{key:"dependentFields",value:function dependentFields(){return new Set(ak(this._parse))}},{key:"assembleTransforms",value:function assembleTransforms(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return ak(this._parse).filter((function(e){return!t||accessPathDepth(e)>1})).map((function(t){var n=formatparse_parseExpression(t,e._parse[t]);return n?{type:"formula",expr:n,as:removePathFromField(t)}:null})).filter((function(e){return null!==e}))}},{key:"parse",get:function get(){return this._parse}}],[{key:"makeExplicit",value:function makeExplicit(e,t,n){var r={},i=t.data;return!isGenerator(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}},{key:"makeImplicitFromFilterTransform",value:function makeImplicitFromFilterTransform(e,t,n){var r={};return function forEachLeaf(e,t){if(isLogicalNot(e))forEachLeaf(e.not,t);else if(isLogicalAnd(e)){var n=!0,r=!1,i=void 0;try{for(var a,o=e.and[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){forEachLeaf(a.value,t)}}catch(d){r=!0,i=d}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}else if(isLogicalOr(e)){var s=!0,u=!1,l=void 0;try{for(var c,f=e.or[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){forEachLeaf(c.value,t)}}catch(d){u=!0,l=d}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}else t(e)}(t.filter,(function(e){if(isFieldPredicate(e)){var t=null;isFieldEqualPredicate(e)?t=e.equal:isFieldRangePredicate(e)?t=e.range[0]:isFieldOneOfPredicate(e)&&(t=(e.oneOf||e.in)[0]),t&&(isDateTime(t)?r[e.field]="date":$w(t)?r[e.field]="number":qw(t)&&(r[e.field]="string")),e.timeUnit&&(r[e.field]="date")}})),0===ak(r).length?null:this.makeWithAncestors(e,{},r,n)}},{key:"makeImplicitFromEncoding",value:function makeImplicitFromEncoding(e,t,n){var r={};function add(e){isTimeFormatFieldDef(e)?r[e.field]="date":"quantitative"===e.type&&function isMinMaxOp(e){return e&&qw(e)&&util_contains(["min","max"],e)}(e.aggregate)?r[e.field]="number":accessPathDepth(e.field)>1?e.field in r||(r[e.field]="flatten"):isScaleFieldDef(e)&&isSortField(e.sort)&&accessPathDepth(e.sort.field)>1&&(e.sort.field in r||(r[e.sort.field]="flatten"))}if((isUnitModel(t)||isFacetModel(t))&&t.forEachFieldDef((function(e,n){if(isTypedFieldDef(e))add(e);else{var r=getMainRangeChannel(n),i=t.fieldDef(r);add(Object.assign({},e,{type:i.type}))}})),isUnitModel(t)){var i=t.mark,a=t.markDef,o=t.encoding;if(isPathMark(i)&&!t.encoding.order){var s=o["horizontal"===a.orient?"y":"x"];!isFieldDef(s)||"quantitative"!==s.type||s.field in r||(r[s.field]="number")}}return this.makeWithAncestors(e,{},r,n)}},{key:"makeWithAncestors",value:function makeWithAncestors(e,t,n,r){var i=!0,a=!1,o=void 0;try{for(var s,u=ak(n)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=r.getWithExplicit(l);void 0!==c.value&&(c.explicit||c.value===n[l]||"derived"===c.value||"flatten"===n[l]?delete n[l]:log_warn(LS.differentParse(l,n[l],c.value)))}}catch(C){a=!0,o=C}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var f=!0,d=!1,h=void 0;try{for(var p,g=ak(t)[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value,v=r.get(m);void 0!==v&&(v===t[m]?delete t[m]:log_warn(LS.differentParse(m,t[m],v)))}}catch(C){d=!0,h=C}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}var y=new VT(t,n);r.copyAll(y);var _={},b=!0,x=!1,w=void 0;try{for(var k,S=ak(y.combine())[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var E=k.value,T=y.get(E);null!==T&&(_[E]=T)}}catch(C){x=!0,w=C}finally{try{b||null==S.return||S.return()}finally{if(x)throw w}}return 0===ak(_).length||r.parseNothing?null:new ParseNode(e,_)}}]),ParseNode}(gT),cC=function(e){function JoinAggregateTransformNode(e,t){var n;return Object(_d.a)(this,JoinAggregateTransformNode),(n=Object(WE.a)(this,Object(GE.a)(JoinAggregateTransformNode).call(this,e))).transform=t,n}return Object(HE.a)(JoinAggregateTransformNode,e),Object(bd.a)(JoinAggregateTransformNode,[{key:"clone",value:function clone(){return new JoinAggregateTransformNode(null,rk(this.transform))}},{key:"addDimensions",value:function addDimensions(e){this.transform.groupby=unique(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function dependentFields(){var e=new Set;return this.transform.groupby&&this.transform.groupby.forEach((function(t){return e.add(t)})),this.transform.joinaggregate.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach((function(t){return e.add(t)})),e}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}},{key:"getDefaultName",value:function getDefaultName(e){return e.as||channeldef_vgField(e)}},{key:"hash",value:function hash(){return"JoinAggregateTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var e=[],t=[],n=[],r=!0,i=!1,a=void 0;try{for(var o,s=this.transform.joinaggregate[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;t.push(u.op),n.push(this.getDefaultName(u)),e.push(void 0===u.field?null:u.field)}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var l=this.transform.groupby;return Object.assign({type:"joinaggregate",as:n,ops:t,fields:e},void 0!==l?{groupby:l}:{})}}]),JoinAggregateTransformNode}(gT);var fC=function(e){function StackNode(e,t){var n;return Object(_d.a)(this,StackNode),(n=Object(WE.a)(this,Object(GE.a)(StackNode).call(this,e)))._stack=t,n}return Object(HE.a)(StackNode,e),Object(bd.a)(StackNode,[{key:"clone",value:function clone(){return new StackNode(null,rk(this._stack))}}]),Object(bd.a)(StackNode,[{key:"addDimensions",value:function addDimensions(e){var t;(t=this._stack.facetby).push.apply(t,Object(Ra.a)(e))}},{key:"dependentFields",value:function dependentFields(){var e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach((function(t){return e.add(t)})),this._stack.facetby.forEach((function(t){return e.add(t)})),this._stack.sort.field.forEach((function(t){return e.add(t)})),e}},{key:"producedFields",value:function producedFields(){return new Set(this._stack.as)}},{key:"hash",value:function hash(){return"Stack ".concat(util_hash(this._stack))}},{key:"getGroupbyFields",value:function getGroupbyFields(){var e=this._stack,t=e.dimensionFieldDef,n=e.impute,r=e.groupby;return t?t.bin?n?[channeldef_vgField(t,{binSuffix:"mid"})]:[channeldef_vgField(t,{}),channeldef_vgField(t,{binSuffix:"end"})]:[channeldef_vgField(t)]:r||[]}},{key:"assemble",value:function assemble(){var e=[],t=this._stack,n=t.facetby,r=t.dimensionFieldDef,i=t.stackField,a=t.stackby,o=t.sort,s=t.offset,u=t.impute,l=t.as;return u&&r&&(r.bin&&e.push({type:"formula",expr:"0.5*"+channeldef_vgField(r,{expr:"datum"})+"+0.5*"+channeldef_vgField(r,{expr:"datum",binSuffix:"end"}),as:channeldef_vgField(r,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:i,groupby:[].concat(Object(Ra.a)(a),Object(Ra.a)(n)),key:channeldef_vgField(r,{binSuffix:"mid"}),method:"value",value:0})),e.push({type:"stack",groupby:[].concat(Object(Ra.a)(this.getGroupbyFields()),Object(Ra.a)(n)),field:i,sort:o,as:l,offset:s}),e}},{key:"stack",get:function get(){return this._stack}}],[{key:"makeFromTransform",value:function makeFromTransform(e,t){var n=t.stack,r=t.groupby,i=t.as,a=t.offset,o=void 0===a?"zero":a,s=[],u=[];if(void 0!==t.sort){var l=!0,c=!1,f=void 0;try{for(var d,h=t.sort[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;s.push(p.field),u.push(getFirstDefined(p.order,"ascending"))}}catch(g){c=!0,f=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}return new StackNode(e,{stackField:n,groupby:r,offset:o,sort:{field:s,order:u},facetby:[],as:function isValidAsArray(e){return Uw(e)&&e.every((function(e){return qw(e)}))&&e.length>1}(i)?i:qw(i)?[i,i+"_end"]:[t.stack+"_start",t.stack+"_end"]})}},{key:"makeFromEncoding",value:function makeFromEncoding(e,t){var n,r=t.stack,i=t.encoding;if(!r)return null;r.groupbyChannel&&(n=getTypedFieldDef(i[r.groupbyChannel]));var a,o=function getStackByFields(e){return e.stack.stackBy.reduce((function(e,t){var n=channeldef_vgField(t.fieldDef);return n&&e.push(n),e}),[])}(t),s=t.encoding.order;return a=Uw(s)||isFieldDef(s)?sortParams(s):o.reduce((function(e,t){return e.field.push(t),e.order.push("descending"),e}),{field:[],order:[]}),new StackNode(e,{dimensionFieldDef:n,stackField:t.vgField(r.fieldChannel),facetby:[],stackby:o,sort:a,offset:r.offset,impute:r.impute,as:[t.vgField(r.fieldChannel,{suffix:"start",forAs:!0}),t.vgField(r.fieldChannel,{suffix:"end",forAs:!0})]})}}]),StackNode}(gT),dC=function(e){function WindowTransformNode(e,t){var n;return Object(_d.a)(this,WindowTransformNode),(n=Object(WE.a)(this,Object(GE.a)(WindowTransformNode).call(this,e))).transform=t,n}return Object(HE.a)(WindowTransformNode,e),Object(bd.a)(WindowTransformNode,[{key:"clone",value:function clone(){return new WindowTransformNode(null,rk(this.transform))}},{key:"addDimensions",value:function addDimensions(e){this.transform.groupby=unique(this.transform.groupby.concat(e),(function(e){return e}))}},{key:"dependentFields",value:function dependentFields(){var e=new Set;return(this.transform.groupby||[]).forEach((function(t){return e.add(t)})),(this.transform.sort||[]).forEach((function(t){return e.add(t.field)})),this.transform.window.map((function(e){return e.field})).filter((function(e){return void 0!==e})).forEach((function(t){return e.add(t)})),e}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}},{key:"getDefaultName",value:function getDefaultName(e){return e.as||channeldef_vgField(e)}},{key:"hash",value:function hash(){return"WindowTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var e=[],t=[],n=[],r=[],i=!0,a=!1,o=void 0;try{for(var s,u=this.transform.window[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;t.push(l.op),n.push(this.getDefaultName(l)),r.push(void 0===l.param?null:l.param),e.push(void 0===l.field?null:l.field)}}catch(w){a=!0,o=w}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var c=this.transform.frame,f=this.transform.groupby;if(c&&null===c[0]&&null===c[1]&&t.every((function(e){return isAggregateOp(e)})))return Object.assign({type:"joinaggregate",as:n,ops:t,fields:e},void 0!==f?{groupby:f}:{});var d=[],h=[];if(void 0!==this.transform.sort){var p=!0,g=!1,m=void 0;try{for(var v,y=this.transform.sort[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var _=v.value;d.push(_.field),h.push(_.order||"ascending")}}catch(w){g=!0,m=w}finally{try{p||null==y.return||y.return()}finally{if(g)throw m}}}var b={field:d,order:h},x=this.transform.ignorePeers;return Object.assign({type:"window",params:r,as:n,ops:t,fields:e,sort:b},void 0!==x?{ignorePeers:x}:{},void 0!==f?{groupby:f}:{},void 0!==c?{frame:c}:{})}}]),WindowTransformNode}(gT),hC=function(e){function MoveParseUp(){return Object(_d.a)(this,MoveParseUp),Object(WE.a)(this,Object(GE.a)(MoveParseUp).apply(this,arguments))}return Object(HE.a)(MoveParseUp,e),Object(bd.a)(MoveParseUp,[{key:"run",value:function run(e){var t=e.parent;if(e instanceof lC){if(isDataSourceNode(t))return this.flags;if(t.numChildren()>1)return this.setContinue(),this.flags;if(t instanceof lC)this.setMutated(),t.merge(e);else{if(fieldIntersection(t.producedFields(),e.dependentFields()))return this.setContinue(),this.flags;this.setMutated(),e.swapWithParent()}}return this.setContinue(),this.flags}}]),MoveParseUp}(iC),pC=function(e){function MergeIdenticalNodes(){return Object(_d.a)(this,MergeIdenticalNodes),Object(WE.a)(this,Object(GE.a)(MergeIdenticalNodes).apply(this,arguments))}return Object(HE.a)(MergeIdenticalNodes,e),Object(bd.a)(MergeIdenticalNodes,[{key:"mergeNodes",value:function mergeNodes(e,t){var n=t.shift(),r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e.removeChild(u),u.parent=n,u.remove()}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"run",value:function run(e){for(var t=e.children.map((function(e){return e.hash()})),n={},r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);var i=!0,a=!1,o=void 0;try{for(var s,u=ak(n)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n[l].length>1&&(this.setMutated(),this.mergeNodes(e,n[l]))}}catch(m){a=!0,o=m}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var c=!0,f=!1,d=void 0;try{for(var h,p=e.children[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var g=h.value;this.run(g)}}catch(m){f=!0,d=m}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}return this.mutatedFlag}}]),MergeIdenticalNodes}(aC),gC=function(e){function RemoveUnusedSubtrees(){return Object(_d.a)(this,RemoveUnusedSubtrees),Object(WE.a)(this,Object(GE.a)(RemoveUnusedSubtrees).apply(this,arguments))}return Object(HE.a)(RemoveUnusedSubtrees,e),Object(bd.a)(RemoveUnusedSubtrees,[{key:"run",value:function run(e){return e instanceof mT||e.numChildren()>0||e instanceof sC?this.flags:(this.setMutated(),e.remove(),this.flags)}}]),RemoveUnusedSubtrees}(iC),mC=function(e){function RemoveDuplicateTimeUnits(){var e;return Object(_d.a)(this,RemoveDuplicateTimeUnits),(e=Object(WE.a)(this,Object(GE.a)(RemoveDuplicateTimeUnits).apply(this,arguments))).fields=new Set,e}return Object(HE.a)(RemoveDuplicateTimeUnits,e),Object(bd.a)(RemoveDuplicateTimeUnits,[{key:"run",value:function run(e){if(this.setContinue(),e instanceof xT){var t=e.producedFields();hasIntersection(t,this.fields)?(this.setMutated(),e.remove()):this.fields=new Set([].concat(Object(Ra.a)(this.fields),Object(Ra.a)(t)))}return this.flags}},{key:"reset",value:function reset(){this.fields.clear()}}]),RemoveDuplicateTimeUnits}(iC),vC=function(e){function MergeTimeUnits(){return Object(_d.a)(this,MergeTimeUnits),Object(WE.a)(this,Object(GE.a)(MergeTimeUnits).apply(this,arguments))}return Object(HE.a)(MergeTimeUnits,e),Object(bd.a)(MergeTimeUnits,[{key:"run",value:function run(e){this.setContinue();var t=e.parent.children.filter((function(e){return e instanceof xT})),n=t.pop(),r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;this.setMutated(),n.merge(u)}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this.flags}}]),MergeTimeUnits}(iC);function moveFacetDown(e){if(e instanceof sC)if(1!==e.numChildren()||e.children[0]instanceof mT){var t=e.model.component.data.main;!function moveMainDownToFacet(e){if(e instanceof mT&&e.type===tT&&1===e.numChildren()){var t=e.children[0];t instanceof sC||(t.swapWithParent(),moveMainDownToFacet(e))}}(t);var n=function cloneSubtree(e){return function clone(t){if(!(t instanceof sC)){var n=t.clone();if(n instanceof mT){var r=kC+n.getSource();n.setSource(r),e.model.component.data.outputNodes[r]=n}else(n instanceof oC||n instanceof fC||n instanceof dC||n instanceof cC)&&n.addDimensions(e.fields);return util_flatten(t.children.map(clone)).forEach((function(e){return e.parent=n})),[n]}return util_flatten(t.children.map(clone))}}(e),r=util_flatten(e.children.map(n)),i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.parent=t}}catch(c){a=!0,o=c}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else{var l=e.children[0];(l instanceof oC||l instanceof fC||l instanceof dC||l instanceof cC)&&l.addDimensions(e.fields),l.swapWithParent(),moveFacetDown(e)}else e.children.map(moveFacetDown)}var yC=function(e){function RemoveUnnecessaryNodes(){return Object(_d.a)(this,RemoveUnnecessaryNodes),Object(WE.a)(this,Object(GE.a)(RemoveUnnecessaryNodes).apply(this,arguments))}return Object(HE.a)(RemoveUnnecessaryNodes,e),Object(bd.a)(RemoveUnnecessaryNodes,[{key:"run",value:function run(e){e instanceof mT&&!e.isRequired()&&(this.setMutated(),e.remove());var t=!0,n=!1,r=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.run(o)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return this.mutatedFlag}}]),RemoveUnnecessaryNodes}(aC),_C=function(e){function MergeParse(){return Object(_d.a)(this,MergeParse),Object(WE.a)(this,Object(GE.a)(MergeParse).apply(this,arguments))}return Object(HE.a)(MergeParse,e),Object(bd.a)(MergeParse,[{key:"run",value:function run(e){var t=e.parent,n=Object(Ra.a)(t.children),r=t.children.filter((function(e){return e instanceof lC}));if(t.numChildren()>1&&r.length>=1){var i={},a=new Set,o=!0,s=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value.parse,d=!0,h=!1,p=void 0;try{for(var g,m=ak(f)[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;v in i?i[v]!==f[v]&&a.add(v):i[v]=f[v]}}catch(I){h=!0,p=I}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}}catch(I){s=!0,u=I}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}var y=!0,_=!1,b=void 0;try{for(var x,w=a[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){delete i[x.value]}}catch(I){_=!0,b=I}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}if(0!==ak(i).length){this.setMutated();var k=new lC(t,i),S=!0,E=!1,T=void 0;try{for(var C,O=n[Symbol.iterator]();!(S=(C=O.next()).done);S=!0){var A=C.value;if(A instanceof lC){var R=!0,D=!1,P=void 0;try{for(var M,j=ak(i)[Symbol.iterator]();!(R=(M=j.next()).done);R=!0){var F=M.value;delete A.parse[F]}}catch(I){D=!0,P=I}finally{try{R||null==j.return||j.return()}finally{if(D)throw P}}}t.removeChild(A),A.parent=k,A instanceof lC&&0===ak(A.parse).length&&A.remove()}}catch(I){E=!0,T=I}finally{try{S||null==O.return||O.return()}finally{if(E)throw T}}}}return this.setContinue(),this.flags}}]),MergeParse}(iC),bC=function(e){function MergeAggregates(){return Object(_d.a)(this,MergeAggregates),Object(WE.a)(this,Object(GE.a)(MergeAggregates).apply(this,arguments))}return Object(HE.a)(MergeAggregates,e),Object(bd.a)(MergeAggregates,[{key:"run",value:function run(e){var t=e.parent,n=t.children.filter((function(e){return e instanceof oC})),r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=util_hash(l.groupBy);c in r||(r[c]=[]),r[c].push(l)}}catch(S){a=!0,o=S}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var f=!0,d=!1,h=void 0;try{for(var p,g=ak(r)[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=r[p.value];if(m.length>1){var v=m.pop(),y=!0,_=!1,b=void 0;try{for(var x,w=m[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var k=x.value;v.merge(k)&&(t.removeChild(k),k.parent=v,k.remove(),this.setMutated())}}catch(S){_=!0,b=S}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}}}catch(S){d=!0,h=S}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}return this.setContinue(),this.flags}}]),MergeAggregates}(iC),xC=function(e){function MergeBins(e){var t;return Object(_d.a)(this,MergeBins),(t=Object(WE.a)(this,Object(GE.a)(MergeBins).call(this))).model=e,t}return Object(HE.a)(MergeBins,e),Object(bd.a)(MergeBins,[{key:"run",value:function run(e){var t=e.parent,n=!(isDataSourceNode(t)||t instanceof uC||t instanceof lC),r=[],i=[],a=!0,o=!1,s=void 0;try{for(var u,l=t.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;c instanceof QT&&(n&&!fieldIntersection(t.producedFields(),c.dependentFields())?r.push(c):i.push(c))}}catch(E){o=!0,s=E}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}if(r.length>0){var f=r.pop(),d=!0,h=!1,p=void 0;try{for(var g,m=r[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;f.merge(v,this.model.renameSignal.bind(this.model))}}catch(E){h=!0,p=E}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}this.setMutated(),t instanceof QT?t.merge(f,this.model.renameSignal.bind(this.model)):f.swapWithParent()}if(i.length>1){var y=i.pop(),_=!0,b=!1,x=void 0;try{for(var w,k=i[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){var S=w.value;y.merge(S,this.model.renameSignal.bind(this.model))}}catch(E){b=!0,x=E}finally{try{_||null==k.return||k.return()}finally{if(b)throw x}}this.setMutated()}return this.setContinue(),this.flags}}]),MergeBins}(iC),wC=function(e){function MergeOutputs(){return Object(_d.a)(this,MergeOutputs),Object(WE.a)(this,Object(GE.a)(MergeOutputs).apply(this,arguments))}return Object(HE.a)(MergeOutputs,e),Object(bd.a)(MergeOutputs,[{key:"run",value:function run(e){var t=e.parent,n=Object(Ra.a)(t.children);if(!some(n,(function(e){return e instanceof mT}))||t.numChildren()<=1)return this.setContinue(),this.flags;var r,i=[],a=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;if(c instanceof mT){for(var f=c;1===f.numChildren();){var d=f.children[0];if(!(d instanceof mT))break;f=d}i.push.apply(i,Object(Ra.a)(f.children)),r?(t.removeChild(c),c.parent=r.parent,r.parent.removeChild(r),r.parent=f,this.setMutated()):r=f}else i.push(c)}}catch(_){o=!0,s=_}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}if(i.length){this.setMutated();var h=!0,p=!1,g=void 0;try{for(var m,v=i[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;y.parent.removeChild(y),y.parent=r}}catch(_){p=!0,g=_}finally{try{h||null==v.return||v.return()}finally{if(p)throw g}}}return this.setContinue(),this.flags}}]),MergeOutputs}(iC),kC="scale_",SC=5;function getLeaves(e){var t=[];return e.forEach((function append(e){0===e.numChildren()?t.push(e):e.children.forEach(append)})),t}function isTrue(e){return e}function runOptimizer(e,t){return t.map((function(t){if(e instanceof iC){var n=e.optimizeNextFromLeaves(t);return e.reset(),n}return e.run(t)})).some(isTrue)}function optimizationDataflowHelper(e,t){var n=e.sources,r=new Set;return r.add(runOptimizer(new yC,n)),n=n.filter((function(e){return e.numChildren()>0})),r.add(runOptimizer(new gC,getLeaves(n))),n=n.filter((function(e){return e.numChildren()>0})),r.add(runOptimizer(new hC,getLeaves(n))),r.add(runOptimizer(new xC(t),getLeaves(n))),r.add(runOptimizer(new mC,getLeaves(n))),r.add(runOptimizer(new _C,getLeaves(n))),r.add(runOptimizer(new bC,getLeaves(n))),r.add(runOptimizer(new vC,getLeaves(n))),r.add(runOptimizer(new pC,n)),r.add(runOptimizer(new wC,getLeaves(n))),e.sources=n,r.has(!0)}var EC=function(){function SignalRefWrapper(e){Object(_d.a)(this,SignalRefWrapper),Object.defineProperty(this,"signal",{enumerable:!0,get:e})}return Object(bd.a)(SignalRefWrapper,null,[{key:"fromName",value:function fromName(e,t){return new SignalRefWrapper((function(){return e(t)}))}}]),SignalRefWrapper}();function domain_parseScaleDomain(e){isUnitModel(e)?function parseUnitScaleDomain(e){var t=e.specifiedScales,n=e.component.scales;ak(n).forEach((function(r){var i=t[r],a=i?i.domain:void 0,o=function parseDomainForChannel(e,t){var n=e.getScaleComponent(t).get("type"),r=function normalizeUnaggregatedDomain(e,t,n,r){if("unaggregated"===e){var i=canUseUnaggregatedDomain(t,n),a=i.valid,o=i.reason;if(!a)return void log_warn(o)}else if(void 0===e&&r.useUnaggregatedDomain){if(canUseUnaggregatedDomain(t,n).valid)return"unaggregated"}return e}(e.scaleDomain(t),e.fieldDef(t),n,e.config.scale);r!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign({},e.specifiedScales[t],{domain:r}));if("x"===t&&e.channelHasField("x2"))return e.channelHasField("x")?mergeValuesWithExplicit(parseSingleChannelDomain(n,r,e,"x"),parseSingleChannelDomain(n,r,e,"x2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(n,r,e,"x2");if("y"===t&&e.channelHasField("y2"))return e.channelHasField("y")?mergeValuesWithExplicit(parseSingleChannelDomain(n,r,e,"y"),parseSingleChannelDomain(n,r,e,"y2"),"domain","scale",domainsTieBreaker):parseSingleChannelDomain(n,r,e,"y2");return parseSingleChannelDomain(n,r,e,t)}(e,r),s=n[r];if(s.setWithExplicit("domains",o),isSelectionDomain(a)&&s.set("domainRaw",{signal:PT+util_hash(a)},!0),e.component.data.isFaceted){for(var u=e;!isFacetModel(u)&&u.parent;)u=u.parent;if("shared"===u.component.resolve.scale[r]){var l=!0,c=!1,f=void 0;try{for(var d,h=o.value[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;isDataRefDomain(p)&&(p.data=kC+p.data.replace(kC,""))}}catch(g){c=!0,f=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}}}))}(e):function parseNonUnitScaleDomain(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){domain_parseScaleDomain(i.value)}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var o=e.component.scales;ak(o).forEach((function(t){var n,r=null,i=!0,a=!1,u=void 0;try{for(var l,c=e.children[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value.component.scales[t];if(f){n=void 0===n?f.getWithExplicit("domains"):mergeValuesWithExplicit(n,f.getWithExplicit("domains"),"domains","scale",domainsTieBreaker);var d=f.get("domainRaw");r&&d&&r.signal!==d.signal&&log_warn("The same selection must be used to override scale domains in a layered view."),r=d}}}catch(s){a=!0,u=s}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}o[t].setWithExplicit("domains",n),r&&o[t].set("domainRaw",r,!0)}))}(e)}function parseSingleChannelDomain(e,t,n,r){var i=n.fieldDef(r);if(t&&"unaggregated"!==t&&!isSelectionDomain(t)){var a=i.type,o=i.timeUnit;return split_makeExplicit("temporal"===a||o?function mapDomainToDataSignal(e,t,n){return e.map((function(e){var r=valueExpr(e,{timeUnit:n,type:t});return{signal:"{data: ".concat(r,"}")}}))}(t,a,o):[t])}var s=n.stack;if(s&&r===s.fieldChannel){if("normalize"===s.offset)return makeImplicit([[0,1]]);var u=n.requestDataName(tT);return makeImplicit([{data:u,field:n.vgField(r,{suffix:"start"})},{data:u,field:n.vgField(r,{suffix:"end"})}])}var l=isScaleChannel(r)?function domainSort(e,t,n){if(!hasDiscreteDomain(n))return;var r=e.fieldDef(t),i=r.sort;if(isSortArray(i))return{op:"min",field:sortArrayIndexField(r,t),order:"ascending"};var a=null!==e.stack;if(isSortField(i))return normalizeSortField(i,a);if(function isSortByEncoding(e){return!!e&&!!e.encoding}(i)){var o=i.encoding,s=i.order,u=e.fieldDef(o),l=u.aggregate,c=u.field;return normalizeSortField({op:l,field:c,order:s},a)}if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(util_contains(["ascending",void 0],i))return!0;return}(n,r,e):void 0;if("unaggregated"===t){var c=n.requestDataName(tT),f=i.field;return makeImplicit([{data:c,field:channeldef_vgField({field:f,aggregate:"min"})},{data:c,field:channeldef_vgField({field:f,aggregate:"max"})}])}if(isBinning(i.bin)){if(hasDiscreteDomain(e))return makeImplicit("bin-ordinal"===e?[]:[{data:util_isBoolean(l)?n.requestDataName(tT):n.requestDataName(nT),field:n.vgField(r,binRequiresRange(i,r)?{binSuffix:"range"}:{}),sort:!0!==l&&zw(l)?l:{field:n.vgField(r,{}),op:"min"}}]);var d=i.bin;if(isBinning(d)){var h=getBinSignalName(n,i.field,d);return makeImplicit([new EC((function(){var e=n.getSignalName(h);return"[".concat(e,".start, ").concat(e,".stop]")}))])}return makeImplicit([{data:n.requestDataName(tT),field:n.vgField(r,{})}])}return makeImplicit(l?[{data:util_isBoolean(l)?n.requestDataName(tT):n.requestDataName(nT),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(tT),field:n.vgField(r)}])}function normalizeSortField(e,t){var n=e.op,r=e.field,i=e.order;return Object.assign({op:n||(t?"sum":pT)},r?{field:replacePathInField(r)}:{},i?{order:i}:{})}function canUseUnaggregatedDomain(e,t){var n=e.aggregate,r=e.type;return n?qw(n)&&!Ak[n]?{valid:!1,reason:LS.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:LS.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:LS.unaggregateDomainHasNoEffectForRawField(e)}}function domainsTieBreaker(e,t,n,r){return e.explicit&&t.explicit&&log_warn(LS.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[].concat(Object(Ra.a)(e.value),Object(Ra.a)(t.value))}}function getFieldFromDomain(e){if(isDataRefDomain(e)&&qw(e.field))return e.field;if(function isDataRefUnionedDomain(e){return!Uw(e)&&("fields"in e&&!("data"in e))}(e)){var t,n=!0,r=!1,i=void 0;try{for(var a,o=e.fields[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(isDataRefDomain(s)&&qw(s.field))if(t){if(t!==s.field)return log_warn("Detected faceted independent scales that union domain of multiple fields from different data sources.  We will use the first field.  The result view size may be incorrect."),t}else t=s.field}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return log_warn("Detected faceted independent scales that union domain of identical fields from different source detected.  We will assume that this is the same field from a different fork of the same data source.  However, if this is not case, the result view size maybe incorrect."),t}if(function isFieldRefUnionDomain(e){return!Uw(e)&&("fields"in e&&"data"in e)}(e)){log_warn("Detected faceted independent scales that union domain of multiple fields from the same data source.  We will use the first field.  The result view size may be incorrect.");var u=e.fields[0];return qw(u)?u:void 0}}function assembleDomain(e,t){return function mergeDomains(e){var t=unique(e.map((function(e){if(isDataRefDomain(e)){e.sort;return __rest(e,["sort"])}return e})),util_hash),n=unique(e.map((function(e){if(isDataRefDomain(e)){var t=e.sort;return void 0===t||util_isBoolean(t)||("count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((function(e){return void 0!==e})),util_hash);if(0!==t.length){if(1===t.length){var r=e[0];if(isDataRefDomain(r)&&n.length>0){var i=n[0];return n.length>1&&(log_warn(LS.MORE_THAN_ONE_SORT),i=!0),Object.assign({},r,{sort:i})}return r}var a,o=unique(n.map((function(e){return util_isBoolean(e)||"count"===e.op?e:(log_warn(LS.domainSortDropped(e)),!0)})),util_hash);1===o.length?a=o[0]:o.length>1&&(log_warn(LS.MORE_THAN_ONE_SORT),a=!0);var s=unique(e.map((function(e){return isDataRefDomain(e)?e.data:null})),(function(e){return e}));return 1===s.length&&null!==s[0]?Object.assign({data:s[0],fields:t.map((function(e){return e.field}))},a?{sort:a}:{}):Object.assign({fields:t},a?{sort:a}:{})}}(e.component.scales[t].get("domains").map((function(t){return isDataRefDomain(t)&&(t.data=e.lookupDataSource(t.data)),t})))}function assembleScales(e){return isLayerModel(e)||isConcatModel(e)||isRepeatModel(e)?e.children.reduce((function(e,t){return e.concat(assembleScales(t))}),assembleScalesForModel(e)):assembleScalesForModel(e)}function assembleScalesForModel(e){return ak(e.component.scales).reduce((function(t,n){var r=e.component.scales[n];if(r.merged)return t;var i=r.combine(),a=i.domainRaw,o=i.name,s=i.type,u=(i.domains,i.domainRaw,i.range,__rest(i,["name","type","domains","domainRaw","range"])),l=function assembleScaleRange(e,t,n){if(("x"===n||"y"===n)&&isVgRangeStep(e))return{step:{signal:t+"_step"}};return e}(i.range,o,n);a&&function isRawSelectionDomain(e){return e.signal.indexOf(PT)>=0}(a)&&(a=function assembleSelectionScaleDomain(e,t){var n=JSON.parse(t.signal.replace(PT,"")),r=varName(n.selection),i=n.encoding,a=n.field,o=e.component.selection&&e.component.selection[r];if(!o){if(o=e.getSelectionComponent(r,n.selection),i||a){if(i&&!a){var s=o.project.items.filter((function(e){return e.channel===i}));!s.length||s.length>1?(a=o.project.items[0].field,log_warn((s.length?"Multiple ":"No ")+"matching ".concat(stringValue_$(i)," encoding found for selection ").concat(stringValue_$(n.selection),". ")+'Using "field": '.concat(stringValue_$(a),"."))):a=s[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&log_warn('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(stringValue_$(a),"."));return{signal:accessPathWithDatum(a,r)}}return log_warn('Use "bind": "scales" to setup a binding for scales and selections within the same view.'),{signal:"null"}}(e,a));var c=assembleDomain(e,n);return t.push(Object.assign({name:o,type:s},c?{domain:c}:{},a?{domainRaw:a}:{},{range:l},u)),t}),[])}var TC=function(e){function ScaleComponent(e,t){var n;return Object(_d.a)(this,ScaleComponent),(n=Object(WE.a)(this,Object(GE.a)(ScaleComponent).call(this,{},{name:e}))).merged=!1,n.setWithExplicit("type",t),n}return Object(HE.a)(ScaleComponent,e),Object(bd.a)(ScaleComponent,[{key:"domainDefinitelyIncludesZero",value:function domainDefinitelyIncludesZero(){return!1!==this.get("zero")||some(this.get("domains"),(function(e){return Uw(e)&&2===e.length&&e[0]<=0&&e[1]>=0}))}}]),ScaleComponent}(VT),CC=["range","rangeStep","scheme"];function getSizeType(e){return"x"===e?"width":"y"===e?"height":void 0}function parseUnitScaleRange(e){var t=e.component.scales;bS.forEach((function(n){var r=t[n];if(r){var i=e.getScaleComponent(n),a=e.specifiedScales[n],o=e.fieldDef(n),s=getSizeType(n),u=s?!!e.component.layoutSize.get(s):void 0,l=i.get("type"),c=util_contains(["point","band"],l)||!!a.rangeStep;s&&e.fit&&!u&&c&&(log_warn(LS.CANNOT_FIX_RANGE_STEP_WITH_FIT),u=!0);var f=function getXYRangeStep(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=mS[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=getRangeStep(e,s);void 0!==u&&t.push(u)}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}(e),d=function parseRangeForChannel(e,t,n,r,i,a,o,s,u,l,c){var f=u||null===i.rangeStep,d=!0,h=!1,p=void 0;try{for(var g,m=CC[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;if(void 0!==i[v]){var y=scaleTypeSupportProperty(n,v),_=channelScalePropertyIncompatability(e,v);if(y)if(_)log_warn(_);else switch(v){case"range":return split_makeExplicit(i[v]);case"scheme":return split_makeExplicit(parseScheme(i[v]));case"rangeStep":var b=i[v];if(null!==b){if(!u)return split_makeExplicit({step:b});log_warn(LS.rangeStepDropped(e))}}else log_warn(LS.scalePropertyNotWorkWithScaleType(n,v,e))}}}catch(x){h=!0,p=x}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}return makeImplicit(function defaultRange(e,t,n,r,i,a,o,s,u,l,c){switch(e){case Mk:case jk:if(util_contains(["point","band"],n)&&!l)if(e===Mk&&"text"===o){if(i.scale.textXRangeStep)return{step:i.scale.textXRangeStep}}else if(i.scale.rangeStep)return{step:i.scale.rangeStep};return e===jk&&hasContinuousDomain(n)?[EC.fromName(t,s),0]:[0,EC.fromName(t,s)];case Hk:var f=function sizeRangeMin(e,t,n){if(t)return 0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(LS.incompatibleChannel("size",e))}(o,a,i),d=function sizeRangeMax(e,t,n){var r=n.scale;switch(e){case"bar":case"tick":if(void 0!==n.scale.maxBandSize)return n.scale.maxBandSize;var i=minXYRangeStep(t,n.scale);return $w(i)?i-1:new EC((function(){return"".concat(i.signal," - 1")}));case"line":case"trail":case"rule":return n.scale.maxStrokeWidth;case"text":return n.scale.maxFontSize;case"point":case"square":case"circle":if(n.scale.maxSize)return n.scale.maxSize;var a=minXYRangeStep(t,r);return $w(a)?Math.pow(OC*a,2):new EC((function(){return"pow(".concat(OC," * ").concat(a.signal,", 2)")}))}throw new Error(LS.incompatibleChannel("size",e))}(o,u,i);return isContinuousToDiscrete(n)?function range_interpolateRange(e,t,n){var r=function f(){var r=isSignalRef(t)?t.signal:t,i="(".concat(r," - ").concat(e,") / (").concat(n," - 1)");return"sequence(".concat(e,", ").concat(t," + ").concat(i,", ").concat(i,")")};return isSignalRef(t)?new EC(r):{signal:r()}}(f,d,function defaultContinuousToDiscreteCount(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&Uw(n)?n.length+1:(log_warn(LS.domainRequiredForThresholdScale(r)),3)}}(n,i,c,e)):[f,d];case Xk:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Gk:return"symbol";case zk:case qk:case Wk:return"ordinal"===n?"nominal"===r?"category":"ordinal":"rect"===o||"geoshape"===o?"heatmap":"ramp";case Vk:case Yk:case $k:return[i.scale.minOpacity,i.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(e))}(e,t,n,r,a,o,s,l,c,f,i.domain))}(n,e.getSignalName.bind(e),l,o.type,a,e.config,r.get("zero"),e.mark,u,e.getName(s),f);r.setWithExplicit("range",d)}}))}function getRangeStep(e,t){var n=e.getScaleComponent(t);if(n){var r=n.get("type"),i=e.fieldDef(t);if(hasDiscreteDomain(r)){var a=n&&n.get("range");if(a&&isVgRangeStep(a)&&$w(a.step))return a.step}else if(i&&i.bin&&isBinning(i.bin)){var o=getBinSignalName(e,i.field,i.bin),s=getSizeType(t),u=e.getName(s);return new EC((function(){var t=e.getSignalName(o),n="(".concat(t,".stop - ").concat(t,".start) / ").concat(t,".step");return"".concat(e.getSignalName(u)," / (").concat(n,")")}))}}}function parseScheme(e){return function isExtendedScheme(e){return e&&!!e.name}(e)?Object.assign({scheme:e.name},omit(e,["name"])):{scheme:e}}var OC=.95;function minXYRangeStep(e,t){if(e.length>0){var n=1/0,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;isSignalRef(u)?n=void 0:void 0!==n&&u<n&&(n=u)}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return void 0!==n?n:new EC((function(){var t=e.map((function(e){return isSignalRef(e)?e.signal:e}));return"min(".concat(t.join(", "),")")}))}return t.rangeStep?t.rangeStep:21}function parseScaleProperty(e,t){isUnitModel(e)?function parseUnitScaleProperty(e,t){var n=e.component.scales;ak(n).forEach((function(r){var i=e.specifiedScales[r],a=n[r],o=e.getScaleComponent(r),s=e.fieldDef(r),u=e.config,l=i[t],c=o.get("type"),f=scaleTypeSupportProperty(c,t),d=channelScalePropertyIncompatability(r,t);if(void 0!==l&&(f?d&&log_warn(d):log_warn(LS.scalePropertyNotWorkWithScaleType(c,t,r))),f&&void 0===d)if(void 0!==l)a.copyKeyFromObject(t,i);else{var h=function getDefaultValue(e,t,n,r,i,a,o,s,u,l){var c=l.scale,f=r.type,d=r.sort;switch(e){case"bins":return function properties_bins(e,t){var n=t.bin;if(isBinning(n)){var r=getBinSignalName(e,t.field,n);return new EC((function(){return e.getSignalName(r)}))}if(bin_isBinned(n)&&isBinParams(n)&&void 0!==n.step)return{step:n.step};return}(t,r);case"interpolate":return function properties_interpolate(e,t){if(util_contains([zk,qk,Wk],e)&&"nominal"!==t)return"hcl";return}(n,f);case"nice":return function properties_nice(e,t,n){if(n.bin||util_contains([vE.TIME,vE.UTC],e))return;return!!util_contains([Mk,jk],t)||void 0}(i,n,r);case"padding":return function properties_padding(e,t,n,r,i,a){if(util_contains([Mk,jk],e)){if(isContinuousToContinuous(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;var o=i.type,s=i.orient;if("bar"===o&&!r.bin&&("vertical"===s&&"x"===e||"horizontal"===s&&"y"===e))return a.continuousBandSize}if(t===vE.POINT)return n.pointPadding}return}(n,i,c,r,u,l.bar);case"paddingInner":return function properties_paddingInner(e,t,n,r){if(void 0!==e)return;if(util_contains([Mk,jk],t)){var i=r.bandPaddingInner,a=r.barBandPaddingInner,o=r.rectBandPaddingInner;return getFirstDefined(i,"bar"===n?a:o)}return}(a,n,u.type,c);case"paddingOuter":return function properties_paddingOuter(e,t,n,r,i,a){if(void 0!==e)return;if(util_contains([Mk,jk],t)&&n===vE.BAND){var o=a.bandPaddingOuter,s=a.barBandPaddingOuter,u=a.rectBandPaddingOuter;return getFirstDefined(o,"bar"===r?s:u,i/2)}return}(a,n,i,u.type,o,c);case"reverse":return function properties_reverse(e,t){if(hasContinuousDomain(e)&&"descending"===t)return!0;return}(i,d);case"zero":return function properties_zero(e,t,n,r,i){if(n&&"unaggregated"!==n&&hasContinuousDomain(i)){if(Uw(n)){var a=n[0],o=n[n.length-1];if(a<=0&&o>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!isContinuousToDiscrete(i))return!0;if(!t.bin&&util_contains([Mk,jk],e)){var s=r.orient;return!util_contains(["bar","area","line","trail"],r.type)||!("horizontal"===s&&"y"===e||"vertical"===s&&"x"===e)}return!1}(n,r,s,u,i)}return c[e]}(t,e,r,s,o.get("type"),o.get("padding"),o.get("paddingInner"),i.domain,e.markDef,u);void 0!==h&&a.set(t,h,!1)}}))}(e,t):parseNonUnitScaleProperty(e,t)}function properties_parseScaleRange(e){isUnitModel(e)?parseUnitScaleRange(e):parseNonUnitScaleProperty(e,"range")}function parseNonUnitScaleProperty(e,t){var n=e.component.scales,r=!0,i=!1,a=void 0;try{for(var o,s=e.children[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;"range"===t?properties_parseScaleRange(u):parseScaleProperty(u,t)}}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}ak(n).forEach((function(r){var i,a=!0,o=!1,s=void 0;try{for(var u,c=e.children[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var f=u.value.component.scales[r];if(f)i=mergeValuesWithExplicit(i,f.getWithExplicit(t),t,"scale",tieBreakByComparing((function(e,n){switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}catch(l){o=!0,s=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}n[r].setWithExplicit(t,i)}))}function type_scaleType(e,t,n,r){var i=function type_defaultType(e,t,n){switch(t.type){case"nominal":case"ordinal":if(isColorChannel(e)||"discrete"===rangeType(e))return"shape"===e&&"ordinal"===t.type&&log_warn(LS.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(util_contains(["x","y"],e)){if(util_contains(["rect","bar","rule"],n))return"band";if("bar"===n)return"band"}return"point";case"temporal":return isColorChannel(e)?"time":"discrete"===rangeType(e)?(log_warn(LS.discreteChannelCannotEncode(e,"temporal")),"ordinal"):"time";case"quantitative":return isColorChannel(e)?isBinning(t.bin)?"bin-ordinal":"linear":"discrete"===rangeType(e)?(log_warn(LS.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(LS.invalidFieldType(t.type))}(t,n,r),a=e.type;return isScaleChannel(t)?void 0!==a?channelSupportScaleType(t,a)?scaleTypeSupportDataType(a,n.type)?a:(log_warn(LS.scaleTypeNotWorkWithFieldDef(a,i)),i):(log_warn(LS.scaleTypeNotWorkWithChannel(t,a,i)),i):i:null}function parseScaleCore(e){isUnitModel(e)?e.component.scales=function parseUnitScaleCore(e){var t=e.encoding,n=e.mark;return bS.reduce((function(r,i){var a,o,s=t[i];if(isFieldDef(s)&&n===yk&&i===Gk&&s.type===rE)return r;if(isFieldDef(s)?(a=s,o=s.scale):hasConditionalFieldDef(s)&&(a=s.condition,o=s.condition.scale),a&&null!==o&&!1!==o){var u=type_scaleType(o=o||{},i,a,n);r[i]=new TC(e.scaleName(i+"",!0),{value:u,explicit:o.type===u})}return r}),{})}(e):e.component.scales=function parseNonUnitScaleCore(e){var t=e.component.scales={},n={},r=e.component.resolve,i=!0,a=!1,o=void 0;try{for(var s,u=function _loop(){var t=s.value;parseScaleCore(t),ak(t.component.scales).forEach((function(i){if(r.scale[i]=r.scale[i]||function defaultScaleResolve(e,t){if(isLayerModel(t)||isFacetModel(t))return"shared";if(isConcatModel(t)||isRepeatModel(t))return util_contains(mS,e)?"independent":"shared";throw new Error("invalid model type for resolve")}(i,e),"shared"===r.scale[i]){var a=n[i],o=t.component.scales[i].getWithExplicit("type");a?!function scaleCompatible(e,t){var n=SE[e],r=SE[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}(a.value,o.value)?(r.scale[i]="independent",delete n[i]):n[i]=mergeValuesWithExplicit(a,o,"type","scale",AC):n[i]=o}}))},l=e.children[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(c){a=!0,o=c}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return ak(n).forEach((function(r){var i=e.scaleName(r,!0),a=n[r];t[r]=new TC(i,a);var o=!0,s=!1,u=void 0;try{for(var l,f=e.children[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var d=l.value,h=d.component.scales[r];h&&(d.renameScale(h.get("name"),i),h.merged=!0)}}catch(c){s=!0,u=c}finally{try{o||null==f.return||f.return()}finally{if(s)throw u}}})),t}(e)}var AC=tieBreakByComparing((function(e,t){return scaleTypePrecedence(e)-scaleTypePrecedence(t)}));var RC=function(){function NameMap(){Object(_d.a)(this,NameMap),this.nameMap={}}return Object(bd.a)(NameMap,[{key:"rename",value:function rename(e,t){this.nameMap[e]=t}},{key:"has",value:function has(e){return void 0!==this.nameMap[e]}},{key:"get",value:function get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}]),NameMap}();function isUnitModel(e){return e&&"unit"===e.type}function isFacetModel(e){return e&&"facet"===e.type}function isRepeatModel(e){return e&&"repeat"===e.type}function isConcatModel(e){return e&&"concat"===e.type}function isLayerModel(e){return e&&"layer"===e.type}var DC=function(){function Model(e,t,n,r,i,a,o,s){var u=this;Object(_d.a)(this,Model),this.type=t,this.parent=n,this.config=i,this.repeater=a,this.view=s,this.children=[],this.correctDataNames=function(e){return e.from&&e.from.data&&(e.from.data=u.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=u.lookupDataSource(e.from.facet.data)),e},this.parent=n,this.config=i,this.repeater=a,this.name=e.name||r,this.title=qw(e.title)?{text:e.title}:e.title,this.scaleNameMap=n?n.scaleNameMap:new RC,this.projectionNameMap=n?n.projectionNameMap:new RC,this.signalNameMap=n?n.signalNameMap:new RC,this.data=e.data,this.description=e.description,this.transforms=function normalizeTransform(e){return e.map((function(e){return isFilter(e)?{filter:normalizeLogicalOperand(e.filter,normalizePredicate)}:e}))}(e.transform||[]),this.layout=isUnitSpec(e)||isLayerSpec(e)?{}:function extractCompositionLayout(e,t,n){var r=n[t],i={},a=r.spacing,o=r.columns;void 0!==a&&(i.spacing=a),void 0!==o&&(isFacetSpec(e)&&!isFacetMapping(e.facet)||isRepeatSpec(e)&&Uw(e.repeat)||isConcatSpec(e))&&(i.columns=o);var s=!0,u=!1,l=void 0;try{for(var c,f=NE[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;if(void 0!==e[d])if("spacing"===d){var h=e[d];i[d]=$w(h)?h:{row:h.row||a,column:h.column||a}}else i[d]=e[d]}}catch(p){u=!0,l=p}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:isFacetSpec(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new VT,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},o?rk(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}return Object(bd.a)(Model,[{key:"initSize",value:function initSize(e){var t=e.width,n=e.height;t&&this.component.layoutSize.set("width",t,!0),n&&this.component.layoutSize.set("height",n,!0)}},{key:"parse",value:function parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}},{key:"parseScale",value:function parseScale(){!function parseScales(e){parseScaleCore(e),domain_parseScaleDomain(e);var t=!0,n=!1,r=void 0;try{for(var i,a=FE[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){parseScaleProperty(e,i.value)}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}properties_parseScaleRange(e)}(this)}},{key:"parseProjection",value:function parseProjection(){parse_parseProjection(this)}},{key:"renameTopLevelLayoutSizeSignal",value:function renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}},{key:"parseLegends",value:function parseLegends(){parseLegend(this)}},{key:"assembleGroupStyle",value:function assembleGroupStyle(){if("unit"===this.type||"layer"===this.type)return this.view&&this.view.style||"cell"}},{key:"assembleEncodeFromView",value:function assembleEncodeFromView(e){e.style;var t=__rest(e,["style"]),n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];void 0!==i&&(n[r]={value:i})}return n}},{key:"assembleGroupEncodeEntry",value:function assembleGroupEncodeEntry(e){var t=void 0;return this.view&&(t=this.assembleEncodeFromView(this.view)),e||"unit"!==this.type&&"layer"!==this.type?t:Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},t||{})}},{key:"assembleLayout",value:function assembleLayout(){if(this.layout){var e=this.layout,t=e.spacing,n=__rest(e,["spacing"]),r=this.component,i=this.config,a=function assembleLayoutTitleBand(e,t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=sS[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,l=e[u];if(l&&l.facetFieldDef){var c=getHeaderProperties(["titleAnchor","titleOrient"],l.facetFieldDef,t,u),f=c.titleAnchor,d=getHeaderChannel(u,c.titleOrient),h=getLayoutTitleBand(f,d);void 0!==h&&(n[d]=h)}}}catch(p){i=!0,a=p}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return ak(n).length>0?n:void 0}(r.layoutHeaders,i);return Object.assign({padding:t},this.assembleDefaultLayout(),n,a?{titleBand:a}:{})}}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){return{}}},{key:"assembleHeaderMarks",value:function assembleHeaderMarks(){var e=this.component.layoutHeaders,t=[],n=!0,r=!1,i=void 0;try{for(var a,o=sS[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e[s].title&&t.push(assembleTitleGroup(this,s))}}catch(p){r=!0,i=p}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,l=!1,c=void 0;try{for(var f,d=yT[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value;t=t.concat(assembleHeaderGroups(this,h))}}catch(p){l=!0,c=p}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}return t}},{key:"assembleAxes",value:function assembleAxes(){return function assemble_assembleAxes(e,t){var n=e.x,r=void 0===n?[]:n,i=e.y,a=void 0===i?[]:i;return[].concat(Object(Ra.a)(r.map((function(e){return assembleAxis(e,"main",t)}))),Object(Ra.a)(r.map((function(e){return assembleAxis(e,"grid",t)}))),Object(Ra.a)(a.map((function(e){return assembleAxis(e,"main",t)}))),Object(Ra.a)(a.map((function(e){return assembleAxis(e,"grid",t)})))).filter((function(e){return e}))}(this.component.axes,this.config)}},{key:"assembleLegends",value:function assembleLegends(){return assemble_assembleLegends(this)}},{key:"assembleProjections",value:function assembleProjections(){return assemble_assembleProjections(this)}},{key:"assembleTitle",value:function assembleTitle(){var e=this.title||{},t=e.encoding,n=__rest(e,["encoding"]),r=Object.assign({},extractTitleConfig(this.config.title).nonMark,n,t?{encode:{update:t}}:{});if(r.text)return util_contains(["unit","layer"],this.type)?util_contains(["middle",void 0],r.anchor)&&(r.frame=r.frame||"group"):r.anchor=r.anchor||"start",ak(r).length>0?r:void 0}},{key:"assembleGroup",value:function assembleGroup(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);var n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());var r=!this.parent||isFacetModel(this.parent)?assembleScales(this):[];r.length>0&&(t.scales=r);var i=this.assembleAxes();i.length>0&&(t.axes=i);var a=this.assembleLegends();return a.length>0&&(t.legends=a),t}},{key:"hasDescendantWithFieldOnChannel",value:function hasDescendantWithFieldOnChannel(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(isUnitModel(o)){if(o.channelHasField(e))return!0}else if(o.hasDescendantWithFieldOnChannel(e))return!0}}catch(s){n=!0,r=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1}},{key:"getName",value:function getName(e){return varName((this.name?this.name+"_":"")+e)}},{key:"requestDataName",value:function requestDataName(e){var t=this.getName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}},{key:"getSizeSignalRef",value:function getSizeSignalRef(e){if(isFacetModel(this.parent)){var t="width"===e?"x":"y",n=this.component.scales[t];if(n&&!n.merged){var r=n.get("type"),i=n.get("range");if(hasDiscreteDomain(r)&&isVgRangeStep(i)){var a=n.get("name"),o=getFieldFromDomain(assembleDomain(this,t));return o?{signal:sizeExpr(a,n,channeldef_vgField({aggregate:"distinct",field:o},{expr:"datum"}))}:(log_warn("Unknown field for ${channel}.  Cannot calculate view size."),null)}}}return{signal:this.signalNameMap.get(this.getName(e))}}},{key:"lookupDataSource",value:function lookupDataSource(e){var t=this.component.data.outputNodes[e];return t?t.getSource():e}},{key:"getSignalName",value:function getSignalName(e){return this.signalNameMap.get(e)}},{key:"renameSignal",value:function renameSignal(e,t){this.signalNameMap.rename(e,t)}},{key:"renameScale",value:function renameScale(e,t){this.scaleNameMap.rename(e,t)}},{key:"renameProjection",value:function renameProjection(e,t){this.projectionNameMap.rename(e,t)}},{key:"scaleName",value:function scaleName(e,t){return t?this.getName(e):isChannel(e)&&isScaleChannel(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}},{key:"projectionName",value:function projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}},{key:"getScaleComponent",value:function getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale().  Make sure you have called parseScale or use parseUnitModelWithScale().");var t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}},{key:"getSelectionComponent",value:function getSelectionComponent(e,t){var n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(LS.selectionNotFound(t));return n}},{key:"width",get:function get(){return this.getSizeSignalRef("width")}},{key:"height",get:function get(){return this.getSizeSignalRef("height")}}]),Model}(),PC=function(e){function ModelWithField(){return Object(_d.a)(this,ModelWithField),Object(WE.a)(this,Object(GE.a)(ModelWithField).apply(this,arguments))}return Object(HE.a)(ModelWithField,e),Object(bd.a)(ModelWithField,[{key:"vgField",value:function vgField(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fieldDef(e);if(n)return channeldef_vgField(n,t)}},{key:"reduceFieldDef",value:function reduceFieldDef(e,t,n){return encoding_reduce(this.getMapping(),(function(t,n,r){var i=getFieldDef(n);return i?e(t,i,r):t}),t,n)}},{key:"forEachFieldDef",value:function forEachFieldDef(e,t){forEach(this.getMapping(),(function(t,n){var r=getFieldDef(t);r&&e(r,n)}),t)}}]),ModelWithField}(DC),MC=function(e){function FilterInvalidNode(e,t){var n;return Object(_d.a)(this,FilterInvalidNode),(n=Object(WE.a)(this,Object(GE.a)(FilterInvalidNode).call(this,e))).filter=t,n}return Object(HE.a)(FilterInvalidNode,e),Object(bd.a)(FilterInvalidNode,[{key:"clone",value:function clone(){return new FilterInvalidNode(null,Object.assign({},this.filter))}},{key:"dependentFields",value:function dependentFields(){return new Set(ak(this.filter))}},{key:"assemble",value:function assemble(){var e=this,t=ak(this.filter).reduce((function(t,n){var r=e.filter[n],i=channeldef_vgField(r,{expr:"datum"});return null!==r&&(t.push("".concat(i," !== null")),t.push("!isNaN(".concat(i,")"))),t}),[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}],[{key:"make",value:function make(e,t){var n=t.config,r=t.mark;if("filter"!==n.invalidValues)return null;var i=t.reduceFieldDef((function(e,n,i){var a=isScaleChannel(i)&&t.getScaleComponent(i);a&&(!hasContinuousDomain(a.get("type"))||n.aggregate||isPathMark(r)||(e[n.field]=n));return e}),{});return ak(i).length?new FilterInvalidNode(e,i):null}}]),FilterInvalidNode}(gT),jC=function(e){function FlattenTransformNode(e,t){var n;Object(_d.a)(this,FlattenTransformNode),(n=Object(WE.a)(this,Object(GE.a)(FlattenTransformNode).call(this,e))).transform=t,n.transform=rk(t);var r=n.transform,i=r.flatten,a=r.as,o=void 0===a?[]:a;return n.transform.as=i.map((function(e,t){return o[t]||e})),n}return Object(HE.a)(FlattenTransformNode,e),Object(bd.a)(FlattenTransformNode,[{key:"clone",value:function clone(){return new FlattenTransformNode(this.parent,rk(this.transform))}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"FlattenTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var e=this.transform;return{type:"flatten",fields:e.flatten,as:e.as}}}]),FlattenTransformNode}(gT),FC=function(e){function FoldTransformNode(e,t){var n;Object(_d.a)(this,FoldTransformNode),(n=Object(WE.a)(this,Object(GE.a)(FoldTransformNode).call(this,e))).transform=t,n.transform=rk(t);var r=n.transform.as||[void 0,void 0];return n.transform.as=[r[0]||"key",r[1]||"value"],n}return Object(HE.a)(FoldTransformNode,e),Object(bd.a)(FoldTransformNode,[{key:"clone",value:function clone(){return new FoldTransformNode(null,rk(this.transform))}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.as)}},{key:"hash",value:function hash(){return"FoldTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var e=this.transform;return{type:"fold",fields:e.fold,as:e.as}}}]),FoldTransformNode}(gT),IC=function(e){function GeoJSONNode(e,t,n,r){var i;return Object(_d.a)(this,GeoJSONNode),(i=Object(WE.a)(this,Object(GE.a)(GeoJSONNode).call(this,e))).fields=t,i.geojson=n,i.signal=r,i}return Object(HE.a)(GeoJSONNode,e),Object(bd.a)(GeoJSONNode,[{key:"clone",value:function clone(){return new GeoJSONNode(null,rk(this.fields),this.geojson,this.signal)}},{key:"assemble",value:function assemble(){return Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{},this.geojson?{geojson:this.geojson}:{},{signal:this.signal})}}],[{key:"parseAll",value:function parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;var n=0;if([[Nk,Lk],[Uk,Bk]].forEach((function(r){var i=r.map((function(e){return t.channelHasField(e)?t.fieldDef(e).field:isValueDef(t.encoding[e])?{expr:t.encoding[e].value+""}:void 0}));(i[0]||i[1])&&(e=new GeoJSONNode(e,i,null,t.getName("geojson_".concat(n++))))})),t.channelHasField(Gk)){var r=t.fieldDef(Gk);r.type===rE&&(e=new GeoJSONNode(e,null,r.field,t.getName("geojson_".concat(n++))))}return e}}]),GeoJSONNode}(gT),LC=function(e){function GeoPointNode(e,t,n,r){var i;return Object(_d.a)(this,GeoPointNode),(i=Object(WE.a)(this,Object(GE.a)(GeoPointNode).call(this,e))).projection=t,i.fields=n,i.as=r,i}return Object(HE.a)(GeoPointNode,e),Object(bd.a)(GeoPointNode,[{key:"clone",value:function clone(){return new GeoPointNode(null,this.projection,rk(this.fields),rk(this.as))}},{key:"assemble",value:function assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}],[{key:"parseAll",value:function parseAll(e,t){return t.projectionName()?([[Nk,Lk],[Uk,Bk]].forEach((function(n){var r=n.map((function(e){return t.channelHasField(e)?t.fieldDef(e).field:isValueDef(t.encoding[e])?{expr:t.encoding[e].value+""}:void 0})),i=n[0]===Uk?"2":"";(r[0]||r[1])&&(e=new GeoPointNode(e,t.projectionName(),r,[t.getName("x"+i),t.getName("y"+i)]))})),e):e}}]),GeoPointNode}(gT),NC=function(e){function IdentifierNode(e){return Object(_d.a)(this,IdentifierNode),Object(WE.a)(this,Object(GE.a)(IdentifierNode).call(this,e))}return Object(HE.a)(IdentifierNode,e),Object(bd.a)(IdentifierNode,[{key:"clone",value:function clone(){return new IdentifierNode(null)}}]),Object(bd.a)(IdentifierNode,[{key:"producedFields",value:function producedFields(){return new Set([IE])}},{key:"hash",value:function hash(){return"Identifier"}},{key:"assemble",value:function assemble(){return{type:"identifier",as:IE}}}]),IdentifierNode}(gT),BC=function(e){function ImputeNode(e,t){var n;return Object(_d.a)(this,ImputeNode),(n=Object(WE.a)(this,Object(GE.a)(ImputeNode).call(this,e))).transform=t,n}return Object(HE.a)(ImputeNode,e),Object(bd.a)(ImputeNode,[{key:"clone",value:function clone(){return new ImputeNode(null,rk(this.transform))}},{key:"producedFields",value:function producedFields(){return new Set([this.transform.impute])}},{key:"processSequence",value:function processSequence(e){var t=e.start,n=void 0===t?0:t,r=e.stop,i=e.step,a=[n,r].concat(Object(Ra.a)(i?[i]:[])).join(",");return{signal:"sequence(".concat(a,")")}}},{key:"hash",value:function hash(){return"Impute ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){var e,t,n=this.transform,r=n.impute,i=n.key,a=n.keyvals,o=n.method,s=n.groupby,u=n.value,l=n.frame,c=void 0===l?[null,null]:l,f=Object.assign({type:"impute",field:r,key:i},a?{keyvals:(e=a,e&&void 0!==e.stop?this.processSequence(a):a)}:{},{method:"value"},s?{groupby:s}:{},{value:null});o&&"value"!==o?t=[Object.assign({type:"window",as:["imputed_".concat(r,"_value")],ops:[o],fields:[r],frame:c,ignorePeers:!1},s?{groupby:s}:{}),{type:"formula",expr:"datum.".concat(r," === null ? datum.imputed_").concat(r,"_value : datum.").concat(r),as:r}]:t=[{type:"formula",expr:"datum.".concat(r," === null ? ").concat(u," : datum.").concat(r),as:r}];return[f].concat(Object(Ra.a)(t))}}],[{key:"makeFromTransform",value:function makeFromTransform(e,t){return new ImputeNode(e,t)}},{key:"makeFromEncoding",value:function makeFromEncoding(e,t){var n=t.encoding,r=n.x,i=n.y;if(isFieldDef(r)&&isFieldDef(i)){var a=r.impute?r:i.impute?i:void 0;if(void 0===a)return;var o=r.impute?i:i.impute?r:void 0,s=a.impute,u=s.method,l=s.value,c=s.frame,f=s.keyvals,d=pathGroupingFields(t.mark,n);return new ImputeNode(e,Object.assign({impute:a.field,key:o.field},u?{method:u}:{},void 0!==l?{value:l}:{},c?{frame:c}:{},void 0!==f?{keyvals:f}:{},d.length?{groupby:d}:{}))}return null}}]),ImputeNode}(gT),UC=function(e){function AncestorParse(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(_d.a)(this,AncestorParse),(e=Object(WE.a)(this,Object(GE.a)(AncestorParse).call(this,t,n))).explicit=t,e.implicit=n,e.parseNothing=r,e}return Object(HE.a)(AncestorParse,e),Object(bd.a)(AncestorParse,[{key:"clone",value:function clone(){var clone=get_get(Object(GE.a)(AncestorParse.prototype),"clone",this).call(this);return clone.parseNothing=this.parseNothing,clone}}]),AncestorParse}(VT),zC=function(e){function LookupNode(e,t,n){var r;return Object(_d.a)(this,LookupNode),(r=Object(WE.a)(this,Object(GE.a)(LookupNode).call(this,e))).transform=t,r.secondary=n,r}return Object(HE.a)(LookupNode,e),Object(bd.a)(LookupNode,[{key:"clone",value:function clone(){return new LookupNode(null,rk(this.transform),this.secondary)}},{key:"producedFields",value:function producedFields(){return new Set(this.transform.from.fields||(this.transform.as instanceof Array?this.transform.as:[this.transform.as]))}},{key:"hash",value:function hash(){return"Lookup ".concat(util_hash({transform:this.transform,secondary:this.secondary}))}},{key:"assemble",value:function assemble(){var e;if(this.transform.from.fields)e=Object.assign({values:this.transform.from.fields},this.transform.as?{as:this.transform.as instanceof Array?this.transform.as:[this.transform.as]}:{});else{var t=this.transform.as;qw(t)||(log_warn(LS.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e,this.transform.default?{default:this.transform.default}:{})}}],[{key:"make",value:function make(e,t,n,r){var i=t.component.data.sources,a=findSource(n.from.data,i);a||(a=new eC(n.from.data),i.push(a));var o=t.getName("lookup_".concat(r)),s=new mT(a,o,"lookup",t.component.data.outputNodeRefCounts);return t.component.data.outputNodes[o]=s,new LookupNode(e,n,s.getSource())}}]),LookupNode}(gT),qC=function(e){function SampleTransformNode(e,t){var n;return Object(_d.a)(this,SampleTransformNode),(n=Object(WE.a)(this,Object(GE.a)(SampleTransformNode).call(this,e))).transform=t,n}return Object(HE.a)(SampleTransformNode,e),Object(bd.a)(SampleTransformNode,[{key:"clone",value:function clone(){return new SampleTransformNode(null,rk(this.transform))}},{key:"hash",value:function hash(){return"SampleTransform ".concat(util_hash(this.transform))}},{key:"assemble",value:function assemble(){return{type:"sample",size:this.transform.sample}}}]),SampleTransformNode}(gT);function makeWalkTree(e){var t=0;return function walkTree(n,r){var i,a,o;n instanceof eC&&(n.isGenerator||isUrlData(n.data)||(e.push(r),r={name:null,source:r.name,transform:[]}));n instanceof lC&&(n.parent instanceof eC&&!r.source?(r.format=Object.assign({},r.format||{},{parse:n.assembleFormatParse()}),(i=r.transform).push.apply(i,Object(Ra.a)(n.assembleTransforms(!0)))):(a=r.transform).push.apply(a,Object(Ra.a)(n.assembleTransforms())));if(n instanceof sC)return r.name||(r.name="data_".concat(t++)),!r.source||r.transform.length>0?(e.push(r),n.data=r.name):n.data=r.source,void n.assemble().forEach((function(t){return e.push(t)}));(n instanceof tC||n instanceof nC||n instanceof MC||n instanceof uC||n instanceof vT||n instanceof LC||n instanceof IC||n instanceof oC||n instanceof zC||n instanceof dC||n instanceof cC||n instanceof FC||n instanceof jC||n instanceof NC||n instanceof qC)&&r.transform.push(n.assemble()),(n instanceof QT||n instanceof xT||n instanceof BC||n instanceof fC)&&(o=r.transform).push.apply(o,Object(Ra.a)(n.assemble()));if(n instanceof mT)if(r.source&&0===r.transform.length)n.setSource(r.source);else if(n.parent instanceof mT)n.setSource(r.name);else{if(r.name||(r.name="data_".concat(t++)),n.setSource(r.name),1===n.numChildren())e.push(r),r={name:null,source:r.name,transform:[]}}switch(n.numChildren()){case 0:n instanceof mT&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:walkTree(n.children[0],r);break;default:r.name||(r.name="data_".concat(t++));var s=r.name;!r.source||r.transform.length>0?e.push(r):s=r.source,n.children.forEach((function(e){walkTree(e,{name:null,source:s,transform:[]})}))}}}function parseFacetHeader(e,t){if(e.channelHasField(t)){var n=e.facet[t],r=getHeaderProperty("title",null,e.config,t),i=channeldef_title(n,e.config,{allowDisabling:!0,includeDefault:void 0===r||!!r});e.child.component.layoutHeaders[t].title&&(i+=" / "+e.child.component.layoutHeaders[t].title,e.child.component.layoutHeaders[t].title=null);var a=getHeaderProperty("labelOrient",n,e.config,t),o=getFirstDefined((n.header||{}).labels,!0),s=util_contains(["bottom","right"],a)?"footer":"header";e.component.layoutHeaders[t]=Object(po.a)({title:i,facetFieldDef:n},s,"facet"===t?[]:[makeHeaderComponent(e,t,o)])}}function makeHeaderComponent(e,t,n){var r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function mergeChildAxis(e,t){var n,r=e.child;if(r.component.axes[t]){var i=e.component,a=i.layoutHeaders,o=i.resolve;if(o.axis[t]=parseGuideResolve(o,t),"shared"===o.axis[t]){var s="x"===t?"column":"row",u=a[s],l=!0,c=!1,f=void 0;try{for(var d,h=r.component.axes[t][Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,g="top"===(n=p.get("orient"))||"left"===n?"header":"footer";u[g]=u[g]||[makeHeaderComponent(e,s,!1)];var m=assembleAxis(p,"main",e.config,{header:!0});u[g][0].axes.push(m),p.mainExtracted=!0}}catch(v){c=!0,f=v}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}}}}function parseLayerLayoutSize(e){parseChildrenLayoutSize(e);var t=e.component.layoutSize;t.setWithExplicit("width",parseNonUnitLayoutSizeForChannel(e,"width")),t.setWithExplicit("height",parseNonUnitLayoutSizeForChannel(e,"height"))}var WC=parseLayerLayoutSize,GC={vconcat:"width",hconcat:"height"};function parseChildrenLayoutSize(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.parseLayoutSize()}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}function parseNonUnitLayoutSizeForChannel(e,t){var n,r="width"===t?"x":"y",i=e.component.resolve,a=!0,o=!1,s=void 0;try{for(var u,l=e.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value.component.layoutSize.getWithExplicit(t),f=i.scale[r];if("independent"===f&&"range-step"===c.value){n=void 0;break}if(n){if("independent"===f&&n.value!==c.value){n=void 0;break}n=mergeValuesWithExplicit(n,c,t,"")}else n=c}}catch(y){o=!0,s=y}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}if(n){var d=!0,h=!1,p=void 0;try{for(var g,m=e.children[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;e.renameSignal(v.getName(t),e.getName(t)),v.component.layoutSize.set(t,"merged",!1)}}catch(y){h=!0,p=y}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}return n}return{explicit:!1,value:void 0}}function defaultUnitSize(e,t){var n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){var a=i.get("type"),o=i.get("range");return hasDiscreteDomain(a)&&isVgRangeStep(o)?"range-step":r.view[t]}return e.hasProjection?r.view[t]:"width"===t&&"text"===e.mark?r.scale.textXRangeStep:r.scale.rangeStep||PE.rangeStep}function replaceRepeat(e,t){return function isRepeatRef(e){return e&&!qw(e)&&"repeat"in e}(e.field)?e.field.repeat in t?Object.assign({},e,{field:t[e.field.repeat]}):void log_warn(LS.noSuchRepeatedValue(e.field.repeat)):e}function replaceRepeaterInFieldDef(e,t){if(void 0!==(e=replaceRepeat(e,t))){if(null===e)return null;if(function isSortableFieldDef(e){return isTypedFieldDef(e)&&!!e.sort}(e)&&isSortField(e.sort)){var n=replaceRepeat(e.sort,t);e=Object.assign({},e,n?{sort:n}:{})}return e}}function replaceRepeaterInChannelDef(e,t){if(!isFieldDef(e)){if(hasConditionalFieldDef(e)){var n=replaceRepeaterInFieldDef(e.condition,t);if(n)return Object.assign({},e,{condition:n});e.condition;return __rest(e,["condition"])}return e}var r=replaceRepeaterInFieldDef(e,t);return r||(isConditionalDef(e)?{condition:e.condition}:void 0)}function replaceRepeater(e,t){var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(Uw(i))n[r]=i.map((function(e){return replaceRepeaterInChannelDef(e,t)})).filter((function(e){return e}));else{var a=replaceRepeaterInChannelDef(i,t);void 0!==a&&(n[r]=a)}}return n}function facetSortFieldName(e,t,n){return channeldef_vgField(t,Object.assign({suffix:"by_".concat(channeldef_vgField(e))},n||{}))}var HC=function(e){function FacetModel(e,t,n,r,i){var a;Object(_d.a)(this,FacetModel),(a=Object(WE.a)(this,Object(GE.a)(FacetModel).call(this,e,"facet",t,n,i,r,e.resolve))).child=buildModel(e.spec,Object(eT.a)(a),a.getName("child"),void 0,r,i,!1),a.children=[a.child];var o=function replaceRepeaterInFacet(e,t){return isFacetMapping(e)?replaceRepeater(e,t):replaceRepeaterInFieldDef(e,t)}(e.facet,r);return a.facet=a.initFacet(o),a}return Object(HE.a)(FacetModel,e),Object(bd.a)(FacetModel,[{key:"initFacet",value:function initFacet(e){return isFacetMapping(e)?encoding_reduce(e,(function(e,t,n){return util_contains([Rk,Dk],n)?void 0===t.field?(log_warn(LS.emptyFieldDef(t,n)),e):(e[n]=channeldef_normalize(t,n),e):(log_warn(LS.incompatibleChannel(n,"facet")),e)}),{}):{facet:channeldef_normalize(e,"facet")}}},{key:"channelHasField",value:function channelHasField(e){return!!this.facet[e]}},{key:"fieldDef",value:function fieldDef(e){return this.facet[e]}},{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this),this.child.parseData()}},{key:"parseLayoutSize",value:function parseLayoutSize(){parseChildrenLayoutSize(this)}},{key:"parseSelections",value:function parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}},{key:"parseMarkGroup",value:function parseMarkGroup(){this.child.parseMarkGroup()}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function parseFacetHeaders(e){var t=!0,n=!1,r=void 0;try{for(var i,a=sS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){parseFacetHeader(e,i.value)}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}mergeChildAxis(e,"x"),mergeChildAxis(e,"y")}(this)}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}},{key:"assembleSignals",value:function assembleSignals(){return this.child.assembleSignals(),[]}},{key:"assembleSelectionData",value:function assembleSelectionData(e){return this.child.assembleSelectionData(e)}},{key:"getHeaderLayoutMixins",value:function getHeaderLayoutMixins(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=sS[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=!0,u=!1,l=void 0;try{for(var c,f=_T[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value,h=this.component.layoutHeaders[o],p=h[d],g=h.facetFieldDef;if(g){var m=getHeaderProperty("titleOrient",g,this.config,o);if(util_contains(["right","bottom"],m)){var v=getHeaderChannel(o,m);e.titleAnchor=e.titleAnchor||{},e.titleAnchor[v]="end"}}if(p&&p[0]){var y="row"===o?"height":"width",_="header"===d?"headerBand":"footerBand";"facet"===o||this.child.component.layoutSize.get(y)||(e[_]=e[_]||{},e[_][o]=.5),h.title&&(e.offset=e.offset||{},e.offset["row"===o?"rowTitle":"columnTitle"]=10)}}}catch(b){u=!0,l=b}finally{try{s||null==f.return||f.return()}finally{if(u)throw l}}}}catch(b){n=!0,r=b}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){var e=this.facet,t=e.column,n=e.row,r=t?this.columnDistinctSignal():n?1:void 0,i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(i="none"),Object.assign({},this.getHeaderLayoutMixins(),r?{columns:r}:{},{bounds:"full",align:i})}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return this.child.assembleLayoutSignals()}},{key:"columnDistinctSignal",value:function columnDistinctSignal(){if(!(this.parent&&this.parent instanceof FacetModel)){var e=this.getName("column_domain");return{signal:"length(data('".concat(e,"'))")}}}},{key:"assembleGroup",value:function assembleGroup(e){return this.parent&&this.parent instanceof FacetModel?Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:channeldef_vgField(this.facet.column,{prefix:"distinct"})}}}}:{},get_get(Object(GE.a)(FacetModel.prototype),"assembleGroup",this).call(this,e)):get_get(Object(GE.a)(FacetModel.prototype),"assembleGroup",this).call(this,e)}},{key:"getCardinalityAggregateForChild",value:function getCardinalityAggregateForChild(){var e=[],t=[],n=[];if(this.child instanceof FacetModel){if(this.child.channelHasField("column")){var r=channeldef_vgField(this.child.facet.column);e.push(r),t.push("distinct"),n.push("distinct_".concat(r))}}else for(var i=0,a=["x","y"];i<a.length;i++){var o=a[i],s=this.child.component.scales[o];if(s&&!s.merged){var u=s.get("type"),l=s.get("range");if(hasDiscreteDomain(u)&&isVgRangeStep(l)){var c=getFieldFromDomain(assembleDomain(this.child,o));c?(e.push(c),t.push("distinct"),n.push("distinct_".concat(c))):log_warn("Unknown field for ${channel}.  Cannot calculate view size.")}}}return{fields:e,ops:t,as:n}}},{key:"assembleFacet",value:function assembleFacet(){var e=this.component.data.facetRoot,t=e.name,n=e.data,r=this.facet,i=r.row,a=r.column,o=this.getCardinalityAggregateForChild(),s=o.fields,u=o.ops,l=o.as,c=[],f=!0,d=!1,h=void 0;try{for(var p,g=sS[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value,v=this.facet[m];if(v){c.push(channeldef_vgField(v));var y=v.bin,_=v.sort;if(isBinning(y)&&c.push(channeldef_vgField(v,{binSuffix:"end"})),isSortField(_)){var b=_.field,x=_.op,w=void 0===x?pT:x,k=facetSortFieldName(v,_);i&&a?(s.push(k),u.push("max"),l.push(k)):(s.push(b),u.push(w),l.push(k))}else if(Uw(_)){var S=sortArrayIndexField(v,m);s.push(S),u.push("max"),l.push(S)}}}}catch(T){d=!0,h=T}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}var E=!!i&&!!a;return Object.assign({name:t,data:n,groupby:c},E||s.length?{aggregate:Object.assign({},E?{cross:E}:{},s.length?{fields:s,ops:u,as:l}:{})}:{})}},{key:"facetSortFields",value:function facetSortFields(e){var t=this.facet[e];return t?isSortField(t.sort)?[facetSortFieldName(t,t.sort,{expr:"datum"})]:Uw(t.sort)?[sortArrayIndexField(t,e,{expr:"datum"})]:[channeldef_vgField(t,{expr:"datum"})]:[]}},{key:"facetSortOrder",value:function facetSortOrder(e){var t=this.facet[e];if(t){var n=t.sort;return[(isSortField(n)?n.order:!Uw(n)&&n)||"ascending"]}return[]}},{key:"assembleLabelTitle",value:function assembleLabelTitle(){var e=this.facet,t=this.config;if(e.facet)return assemble_assembleLabelTitle(e.facet,"facet",t);var n={row:["top","bottom"],column:["left","right"]},r=!0,i=!1,a=void 0;try{for(var o,s=yT[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(e[u]){var l=getHeaderProperty("labelOrient",e[u],t,u);if(util_contains(n[u],l))return assemble_assembleLabelTitle(e[u],u,t)}}}catch(c){i=!0,a=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"assembleMarks",value:function assembleMarks(){var e=this,t=this.child,n=function assembleFacetData(e){var t=[],n=makeWalkTree(t);return e.children.forEach((function(t){return n(t,{source:e.name,name:null,transform:[]})})),t}(this.component.data.facetRoot),r=t.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[Object.assign({name:this.getName("cell"),type:"group"},i?{title:i}:{},a?{style:a}:{},{from:{facet:this.assembleFacet()},sort:{field:util_flatten(sS.map((function(t){return e.facetSortFields(t)}))),order:util_flatten(sS.map((function(t){return e.facetSortOrder(t)})))}},n.length>0?{data:n}:{},r?{encode:{update:r}}:{},t.assembleGroup(function assembleFacetSignals(e,t){if(e.component.selection&&ak(e.component.selection).length){var n=stringValue_$(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:xb("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return t}(this,[])))]}},{key:"getMapping",value:function getMapping(){return this.facet}}]),FacetModel}(PC);function findSource(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.data;if((!e.name||!s.hasName()||e.name===s.dataName)&&!(e.format&&e.format.mesh&&u.format&&u.format.feature))if(isInlineData(e)&&isInlineData(u)){if(nk(e.values,u.values))return s}else if(isUrlData(e)&&isUrlData(u)){if(e.url===u.url)return s}else if(isNamedData(e)&&e.name===s.dataName)return s}}catch(l){r=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function parse_parseData(e){var t=function parseRoot(e,t){if(void 0===e.data&&e.parent)return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main;if(null===e.data){var n=new eC([]);return t.push(n),n}var r=findSource(e.data,t);if(r)return isGenerator(e.data)||(r.data.format=mergeDeep({},e.data.format,r.data.format)),!r.hasName()&&e.data.name&&(r.dataName=e.data.name),r;var i=new eC(e.data);return t.push(i),i}(e,e.component.data.sources),n=e.component.data,r=n.outputNodes,i=n.outputNodeRefCounts,a=e.parent?e.parent.component.data.ancestorParse.clone():new UC,o=e.data;isGenerator(o)?(isSequenceGenerator(o)?t=new nC(t,o.sequence):isGraticuleGenerator(o)&&(t=new tC(t,o.graticule)),a.parseNothing=!0):o&&o.format&&null===o.format.parse&&(a.parseNothing=!0),t=lC.makeExplicit(t,e,a)||t,!requiresSelectionId(e)||!isUnitModel(e)&&!isLayerModel(e)||e.parent&&isLayerModel(e.parent)||(t=new NC(t));var s=e.parent&&isLayerModel(e.parent);(isUnitModel(e)||isFacetModel(e))&&s&&(t=QT.makeFromEncoding(t,e)||t),e.transforms.length>0&&(t=function parseTransformArray(e,t,n){var r=0,i=!0,a=!1,o=void 0;try{for(var s,u=t.transforms[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=void 0,f=void 0;if(isCalculate(l))f=e=new vT(e,l),c="derived";else if(isFilter(l))f=e=lC.makeImplicitFromFilterTransform(e,l,n)||e,e=new uC(e,t,l.filter);else if(isBin(l))f=e=QT.makeFromTransform(e,l,t),c="number";else if(transform_isTimeUnit(l)){c="date",void 0===n.getWithExplicit(l.field).value&&(e=new lC(e,Object(po.a)({},l.field,c)),n.set(l.field,c,!1)),f=e=xT.makeFromTransform(e,l)}else if(transform_isAggregate(l))f=e=oC.makeFromTransform(e,l),c="number",requiresSelectionId(t)&&(e=new NC(e));else if(isLookup(l))f=e=zC.make(e,t,l,r++),c="derived";else if(isWindow(l))f=e=new dC(e,l),c="number";else if(isJoinAggregate(l))f=e=new cC(e,l),c="number";else if(isStack(l))f=e=fC.makeFromTransform(e,l),c="derived";else if(isFold(l))f=e=new FC(e,l),c="derived";else if(isFlatten(l))f=e=new jC(e,l),c="derived";else if(isSample(l))e=new qC(e,l);else{if(!isImpute(l)){log_warn(LS.invalidTransformIgnored(l));continue}f=e=BC.makeFromTransform(e,l),c="derived"}if(f&&void 0!==c){var d=!0,h=!1,p=void 0;try{for(var g,m=f.producedFields()[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=g.value;n.set(v,c,!1)}}catch(y){h=!0,p=y}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}}}catch(y){a=!0,o=y}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return e}(t,e,a)),t=lC.makeImplicitFromEncoding(t,e,a)||t,isUnitModel(e)&&(t=IC.parseAll(t,e),t=LC.parseAll(t,e)),(isUnitModel(e)||isFacetModel(e))&&(s||(t=QT.makeFromEncoding(t,e)||t),t=xT.makeFromEncoding(t,e)||t,t=vT.parseAllForSortIndex(t,e));var u=e.getName(nT),l=new mT(t,u,nT,i);if(r[u]=l,t=l,isUnitModel(e)){var c=oC.makeFromEncoding(t,e);c&&(t=c,requiresSelectionId(e)&&(t=new NC(t))),t=BC.makeFromEncoding(t,e)||t,t=fC.makeFromEncoding(t,e)||t}isUnitModel(e)&&(t=MC.make(t,e)||t);var f=e.getName(tT),d=new mT(t,f,tT,i);r[f]=d,t=d;var h=null;if(isFacetModel(e)){var p=e.getName("facet");t=function makeJoinAggregateFromFacet(e,t){var n=t.row,r=t.column;if(n&&r){for(var i=null,a=0,o=[n,r];a<o.length;a++){var s=o[a];if(isSortField(s.sort)){var u=s.sort,l=u.field,c=u.op;e=i=new cC(e,{joinaggregate:[{op:void 0===c?pT:c,field:l,as:facetSortFieldName(s,s.sort,{forAs:!0})}],groupby:[channeldef_vgField(s)]})}}return i}return null}(t=vT.parseAllForSortIndex(t,e),e.facet)||t,h=new sC(t,e,p,d.getSource()),r[p]=h,t=h}return Object.assign({},e.component.data,{outputNodes:r,outputNodeRefCounts:i,raw:l,main:d,facetRoot:h,ancestorParse:a})}var VC=function(e){function BaseConcatModel(e,t,n,r,i,a,o){return Object(_d.a)(this,BaseConcatModel),Object(WE.a)(this,Object(GE.a)(BaseConcatModel).call(this,e,t,n,r,i,a,o))}return Object(HE.a)(BaseConcatModel,e),Object(bd.a)(BaseConcatModel,[{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this),this.children.forEach((function(e){e.parseData()}))}},{key:"parseSelections",value:function parseSelections(){var e=this;this.component.selection={};var t=!0,n=!1,r=void 0;try{for(var i,a=function _loop(){var t=i.value;t.parseSelections(),ak(t.component.selection).forEach((function(n){e.component.selection[n]=t.component.selection[n]}))},o=this.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a()}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"parseMarkGroup",value:function parseMarkGroup(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.parseMarkGroup()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.parseAxesAndHeaders()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function assembleSignals(){return this.children.forEach((function(e){return e.assembleSignals()})),[]}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return this.children.reduce((function(e,t){return[].concat(Object(Ra.a)(e),Object(Ra.a)(t.assembleLayoutSignals()))}),assemble_assembleLayoutSignals(this))}},{key:"assembleSelectionData",value:function assembleSelectionData(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleMarks",value:function assembleMarks(){return this.children.map((function(e){var t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return Object.assign({type:"group",name:e.getName("group")},t?{title:t}:{},n?{style:n}:{},r?{encode:{update:r}}:{},e.assembleGroup())}))}}]),BaseConcatModel}(DC),YC=function(e){function ConcatModel(e,t,n,r,i){var a;return Object(_d.a)(this,ConcatModel),a=Object(WE.a)(this,Object(GE.a)(ConcatModel).call(this,e,"concat",t,n,i,r,e.resolve)),e.resolve&&e.resolve.axis&&("shared"===e.resolve.axis.x||"shared"===e.resolve.axis.y)&&log_warn(LS.CONCAT_CANNOT_SHARE_AXIS),a.concatType=isVConcatSpec(e)?"vconcat":isHConcatSpec(e)?"hconcat":"concat",a.children=a.getChildren(e).map((function(e,t){return buildModel(e,Object(eT.a)(a),a.getName("concat_"+t),void 0,r,i,!1)})),a}return Object(HE.a)(ConcatModel,e),Object(bd.a)(ConcatModel,[{key:"getChildren",value:function getChildren(e){return isVConcatSpec(e)?e.vconcat:isHConcatSpec(e)?e.hconcat:e.concat}},{key:"parseLayoutSize",value:function parseLayoutSize(){!function parseConcatLayoutSize(e){parseChildrenLayoutSize(e);var t=e.component.layoutSize,n=GC[e.concatType];n&&t.setWithExplicit(n,parseNonUnitLayoutSizeForChannel(e,n))}(this)}},{key:"parseAxisGroup",value:function parseAxisGroup(){return null}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){return Object.assign({},"vconcat"===this.concatType?{columns:1}:{},{bounds:"full",align:"each"})}}]),ConcatModel}(VC);var $C=function(e){function AxisComponent(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(_d.a)(this,AxisComponent),(e=Object(WE.a)(this,Object(GE.a)(AxisComponent).call(this))).explicit=t,e.implicit=n,e.mainExtracted=r,e}return Object(HE.a)(AxisComponent,e),Object(bd.a)(AxisComponent,[{key:"clone",value:function clone(){return new AxisComponent(rk(this.explicit),rk(this.implicit),this.mainExtracted)}},{key:"hasAxisPart",value:function hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!function isFalseOrNull(e){return!1===e||null===e}(this.get(e)))}}]),AxisComponent}(VT);var XC={bottom:"top",top:"bottom",left:"right",right:"left"};function mergeAxisComponents(e,t){if(!e)return t.map((function(e){return e.clone()}));if(e.length===t.length){for(var n=e.length,r=0;r<n;r++){var i=e[r],a=t[r];if(!!i!==!!a)return;if(i&&a){var o=i.getWithExplicit("orient"),s=a.getWithExplicit("orient");if(o.explicit&&s.explicit&&o.value!==s.value)return;e[r]=mergeAxisComponent(i,a)}}return e}}function mergeAxisComponent(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=function _loop(){var n=a.value,r=mergeValuesWithExplicit(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(function(e,t){switch(n){case"title":return mergeTitleComponent(e,t);case"gridScale":return{explicit:e.explicit,value:getFirstDefined(e.value,t.value)}}return defaultTieBreaker(e,t,n,"axis")}));e.setWithExplicit(n,r)},s=lT[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)o()}catch(u){r=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e}function getFieldDefTitle(e,t){var n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),a=r?r.title:void 0,o=i?i.title:void 0;return a&&o?mergeTitle(a,o):a||(o||(void 0!==a?a:void 0!==o?o:void 0))}function parseAxis(e,t){var n=t.axis(e),r=new $C;lT.forEach((function(i){var a=function parse_getProperty(e,t,n,r){var i=r.fieldDef(n),a=function properties_labelAngle(e,t,n,r){if(void 0!==t.labelAngle)return normalizeAngle(t.labelAngle);var i=getAxisConfig("labelAngle",e.config,n,properties_orient(n),e.getScaleComponent(n).get("type"));return void 0!==i?normalizeAngle(i):n===Mk&&util_contains([nE,eE],r.type)?270:void 0}(r,t,n,i),o=getFirstDefined(t.orient,properties_orient(n));switch(e){case"scale":return r.scaleName(n);case"gridScale":return function gridScale(e,t){var n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}(r,n);case"format":if(isTimeFormatFieldDef(i))return;return numberFormat(i,t.format,r.config);case"formatType":if(isTimeFormatFieldDef(i))return;return t.formatType;case"grid":if(bin_isBinned(r.fieldDef(n).bin))return!1;var s=r.getScaleComponent(n).get("type");return getFirstDefined(t.grid,function defaultGrid(e,t){return!hasDiscreteDomain(e)&&!isBinning(t.bin)}(s,i));case"labelAlign":return getFirstDefined(t.labelAlign,defaultLabelAlign(a,o));case"labelAngle":return a;case"labelBaseline":return getFirstDefined(t.labelBaseline,defaultLabelBaseline(a,o));case"labelFlush":return getFirstDefined(t.labelFlush,function defaultLabelFlush(e,t){if("x"===t&&util_contains(["quantitative","temporal"],e.type))return!0}(i,n));case"labelOverlap":var u=r.getScaleComponent(n).get("type");return getFirstDefined(t.labelOverlap,function defaultLabelOverlap(e,t){if("nominal"!==e.type)return"log"!==t||"greedy"}(i,u));case"orient":return o;case"tickCount":var l=r.getScaleComponent(n).get("type"),c="x"===n?"width":"y"===n?"height":void 0,f=c?r.getSizeSignalRef(c):void 0;return getFirstDefined(t.tickCount,function defaultTickCount(e){var t=e.fieldDef,n=e.scaleType,r=e.size;if(!hasDiscreteDomain(n)&&"log"!==n&&!util_contains(["month","hours","day","quarter"],t.timeUnit))return isBinning(t.bin)?{signal:"ceil(".concat(r.signal,"/10)")}:{signal:"ceil(".concat(r.signal,"/40)")}}({fieldDef:i,scaleType:l,size:f}));case"title":var d="x"===n?"x2":"y2",h=r.fieldDef(d);return getFirstDefined(t.title,getFieldDefTitle(r,n),mergeTitleFieldDefs([toFieldDefBase(i)],h?[toFieldDefBase(h)]:[]));case"values":return function properties_values(e,t,n){var r=e.values;if(r)return valueArray(n,r)}(t,0,i)}return function isAxisProperty(e){return!!sT[e]}(e)?t[e]:void 0}(i,n,e,t);if(void 0!==a){var o=function parse_isExplicit(e,t,n,r,i){switch(t){case"titleAngle":case"labelAngle":return e===normalizeAngle(n[t]);case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===getFieldDefTitle(r,i))return!0}return e===n[t]}(a,i,n,t,e),s=getAxisConfig(i,t.config,e,r.get("orient"),t.getScaleComponent(e).get("type"));o||void 0===s?r.set(i,a,o):util_contains(["grid","orient"],i)&&s&&r.set(i,s,!1)}}));var i=n.encoding||{},a=iT.reduce((function(n,a){if(!r.hasAxisPart(a))return n;var o=guideEncodeEntry(i[a]||{},t),s="labels"===a?function axis_encode_labels(e,t,n){var r=e.fieldDef(t)||("x"===t?e.fieldDef("x2"):"y"===t?e.fieldDef("y2"):void 0),i=e.axis(t),a=e.config,o={};if(isTimeFormatFieldDef(r)){var s=e.getScaleComponent(t).get("type")===vE.UTC,u=timeFormatExpression("datum.value",r.timeUnit,i.format,a.axis.shortTimeLabels,null,s);u&&(o.text={signal:u})}return o=Object.assign({},o,n),0===ak(o).length?void 0:o}(t,e,o):o;return void 0!==s&&ak(s).length>0&&(n[a]={update:s}),n}),{});return ak(a).length>0&&r.set("encode",a,!!n.encoding||void 0!==n.labelAngle),r}function normalizeMarkDef(e,t,n){var r=isMarkDef(e)?Object.assign({},e):{type:e},i=r.orient||getMarkConfig("orient",r,n);return r.orient=function init_orient(e,t,n){switch(e){case ck:case mk:case vk:case hk:case fk:return}var r=t.x,i=t.y,a=t.x2,o=t.y2;switch(e){case uk:if(isFieldDef(r)&&bin_isBinned(r.bin))return"vertical";if(isFieldDef(i)&&bin_isBinned(i.bin))return"horizontal";if(o||a){if(n)return n;if(!a&&isFieldDef(r)&&r.type===QS&&!isBinning(r.bin))return"horizontal";if(!o&&isFieldDef(i)&&i.type===QS&&!isBinning(i.bin))return"vertical"}case dk:if(a&&o)return;case sk:if(o)return isFieldDef(i)&&bin_isBinned(i.bin)?"horizontal":"vertical";if(a)return isFieldDef(r)&&bin_isBinned(r.bin)?"vertical":"horizontal";if(e===dk){if(t.x&&!t.y)return"vertical";if(t.y&&!t.x)return"horizontal"}case lk:case pk:var s=isFieldDef(t.x)&&channeldef_isContinuous(t.x),u=isFieldDef(t.y)&&channeldef_isContinuous(t.y);if(s&&!u)return"tick"!==e?"horizontal":"vertical";if(!s&&u)return"tick"!==e?"vertical":"horizontal";if(s&&u){var l=t.x,c=t.y,f=l.type===tE,d=c.type===tE;return f&&!d?"tick"!==e?"vertical":"horizontal":!f&&d?"tick"!==e?"horizontal":"vertical":!l.aggregate&&c.aggregate?"tick"!==e?"vertical":"horizontal":l.aggregate&&!c.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&log_warn(LS.orientOverridden(r.orient,i)),void 0===getFirstDefined(r.opacity,getMarkConfig("opacity",r,n))&&(r.opacity=function init_opacity(e,t){if(util_contains([ck,pk,mk,vk],e)&&!encoding_isAggregate(t))return.7;return}(r.type,t)),void 0===r.filled&&(r.filled=function init_filled(e,t){var n=getMarkConfig("filled",e,t),r=e.type;return getFirstDefined(n,r!==ck&&r!==lk&&r!==dk)}(r,n)),void 0===(r.cursor||getMarkConfig("cursor",r,n))&&(r.cursor=function init_cursor(e,t,n){if(t.href||e.href||getMarkConfig("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function rectPosition(e,t,n){var r=e.config,i=e.encoding,a=e.markDef,o="x"===t?"x2":"y2",s="x"===t?"width":"height",u=i[t],l=i[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=e.scaleName(t),h=a.orient,p=i[s]||i.size||a[s]||a.size||getMarkConfig("size",a,r,{vgChannel:s}),g="x"===t?"vertical"===h:"horizontal"===h;return!isFieldDef(u)||!isBinning(u.bin)&&!bin_isBinned(u.bin)||p||hasDiscreteDomain(f)?(isFieldDef(u)&&hasDiscreteDomain(f)||g)&&!l?isFieldDef(u)&&f===vE.BAND?function bandPosition(e,t,n,r){var i,a=n.scaleName(t),o="x"===t?"width":"height";if(n.encoding.size||void 0!==n.markDef.size||r&&void 0!==r.value)if(n.markDef.orient){var s=Object(po.a)({},t+"c",valueref_fieldRef(e,a,{},{band:.5}));if(getTypedFieldDef(n.encoding.size))return Object.assign({},s,nonPosition("size",n,{vgChannel:o}));if(isValueDef(n.encoding.size))return Object.assign({},s,nonPosition("size",n,{vgChannel:o}));if(void 0!==n.markDef.size)return Object.assign({},s,Object(po.a)({},o,{value:n.markDef.size}));if(r&&void 0!==r.value)return Object.assign({},s,Object(po.a)({},o,r))}else log_warn(LS.cannotApplySizeToNonOrientedMark(n.markDef.type));return i={},Object(po.a)(i,t,valueref_fieldRef(e,a,{binSuffix:"range"},{})),Object(po.a)(i,o,r||bandRef(a)),i}(u,t,e,rect_defaultSizeRef(n,a,s,d,c,r)):function centeredPointPositionWithSize(e,t,n,r){var i="x"===e?"xc":"yc",a="x"===e?"width":"height";return Object.assign({},pointPosition(e,t,n,i),nonPosition("size",t,{defaultRef:r,vgChannel:a}))}(t,e,valueref_mid(e[s]),rect_defaultSizeRef(n,a,s,d,c,r)):Object.assign({},pointPosition(t,e,"zeroOrMax"),pointPosition2(e,"zeroOrMin",o)):function binPosition(e){var t,n,r=e.fieldDef,i=e.fieldDef2,a=e.channel,o=e.scaleName,s=e.mark,u=e.spacing,l=void 0===u?0:u,c=e.reverse,f={x:c?l:0,x2:c?0:l,y:c?0:l,y2:c?l:0},d=a===Mk?Fk:Ik;return isBinning(r.bin)?(t={},Object(po.a)(t,d,valueref_bin({channel:a,fieldDef:r,scaleName:o,mark:s,side:"start",offset:f["".concat(a,"2")]})),Object(po.a)(t,a,valueref_bin({channel:a,fieldDef:r,scaleName:o,mark:s,side:"end",offset:f[a]})),t):bin_isBinned(r.bin)&&isFieldDef(i)?(n={},Object(po.a)(n,d,valueref_fieldRef(r,o,{},{offset:f["".concat(a,"2")]})),Object(po.a)(n,a,valueref_fieldRef(i,o,{},{offset:f[a]})),n):void log_warn(LS.channelRequiredForBinned(d))}({fieldDef:u,fieldDef2:l,channel:t,mark:n,scaleName:d,spacing:getFirstDefined(a.binSpacing,r[n].binSpacing),reverse:c.get("reverse")})}function rect_defaultSizeRef(e,t,n,r,i,a){var o=getFirstDefined(t[n],t.size,getMarkConfig("size",t,a,{vgChannel:n}));if(void 0!==o)return{value:o};if(i){var s=i.get("type");if("point"!==s&&"band"!==s)return{value:a[e].continuousBandSize};if(void 0!==a[e].discreteBandSize)return{value:a[e].discreteBandSize};if(s!==vE.POINT)return bandRef(r);var u=i.get("range");if(isVgRangeStep(u)&&$w(u.step))return{value:u.step-1};log_warn(LS.BAR_WITH_POINT_SCALE_AND_RANGESTEP_NULL)}return{value:getFirstDefined(a[e].discreteBandSize,a.scale.rangeStep?a.scale.rangeStep-1:void 0,20)}}function _encodeEntry(e,t){e.config;var n=e.width,r=e.height;return Object.assign({},baseEncodeEntry(e,{size:"include",orient:"ignore"}),pointPosition("x",e,valueref_mid(n)),pointPosition("y",e,valueref_mid(r)),nonPosition("size",e),function shapeMixins(e,t,n){if(n)return{shape:{value:n}};return nonPosition("shape",e)}(e,0,t))}function defaultSize(e){var t=e.config,n=e.markDef,r=n.orient,i="horizontal"===r?"width":"height",a=e.getScaleComponent("horizontal"===r?"x":"y"),o=getFirstDefined(n[i],n.size,getMarkConfig("size",n,t,{vgChannel:i}),t.tick.bandSize);if(void 0!==o)return o;var s=a?a.get("range"):void 0,u=s&&isVgRangeStep(s)?s.step:t.scale.rangeStep;if("number"!==typeof u)throw new Error("Function does not handle non-numeric rangeStep");return 3*u/4}var KC={area:{vgMark:"area",encodeEntry:function encodeEntry(e){return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"include"}),pointPosition("x",e,"zeroOrMin"),pointPosition("y",e,"zeroOrMin"),pointPosition2(e,"zeroOrMin","horizontal"===e.markDef.orient?"x2":"y2"),mixins_defined(e))}},bar:{vgMark:"rect",encodeEntry:function encodeEntry(e){return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}),rectPosition(e,"x","bar"),rectPosition(e,"y","bar"))}},circle:{vgMark:"symbol",encodeEntry:function encodeEntry(e){return _encodeEntry(e,"circle")}},geoshape:{vgMark:"shape",encodeEntry:function encodeEntry(e){return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}))},postEncodingTransform:function postEncodingTransform(e){var t=e.encoding.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},t&&isFieldDef(t)&&t.type===rE?{field:channeldef_vgField(t,{expr:"datum"})}:{})]}},line:{vgMark:"line",encodeEntry:function encodeEntry(e){var t=e.width,n=e.height;return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}),pointPosition("x",e,valueref_mid(t)),pointPosition("y",e,valueref_mid(n)),nonPosition("size",e,{vgChannel:"strokeWidth"}),mixins_defined(e))}},point:{vgMark:"symbol",encodeEntry:function encodeEntry(e){return _encodeEntry(e)}},rect:{vgMark:"rect",encodeEntry:function encodeEntry(e){return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}),rectPosition(e,"x","rect"),rectPosition(e,"y","rect"))}},rule:{vgMark:"rule",encodeEntry:function encodeEntry(e){var t=e.markDef,n=e.width,r=e.height,i=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}),pointPosition("x",e,"horizontal"===i?"zeroOrMin":valueref_mid(n)),pointPosition("y",e,"vertical"===i?"zeroOrMin":valueref_mid(r)),"vertical"!==i?pointPosition2(e,"zeroOrMax","x2"):{},"horizontal"!==i?pointPosition2(e,"zeroOrMax","y2"):{},nonPosition("size",e,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:function encodeEntry(e){return _encodeEntry(e,"square")}},text:{vgMark:"text",encodeEntry:function encodeEntry(e){var t=e.config,n=(e.encoding,e.width),r=e.height;return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}),pointPosition("x",e,valueref_mid(n)),pointPosition("y",e,valueref_mid(r)),mixins_text(e),nonPosition("size",e,{vgChannel:"fontSize"}),valueIfDefined("align",function text_align(e,t,n){if(void 0===(e.align||getMarkConfig("align",e,n)))return"center";return}(e.markDef,0,t)),valueIfDefined("baseline",function text_baseline(e,t,n){if(void 0===(e.baseline||getMarkConfig("baseline",e,n)))return"middle";return}(e.markDef,0,t)))}},tick:{vgMark:"rect",encodeEntry:function encodeEntry(e){var t=e.config,n=e.markDef,r=e.width,i=e.height,a=n.orient,o="horizontal"===a?"width":"height",s="horizontal"===a?"height":"width";return Object.assign({},baseEncodeEntry(e,{size:"ignore",orient:"ignore"}),pointPosition("x",e,valueref_mid(r),"xc"),pointPosition("y",e,valueref_mid(i),"yc"),nonPosition("size",e,{defaultValue:defaultSize(e),vgChannel:o}),Object(po.a)({},s,{value:getFirstDefined(n.thickness,t.tick.thickness)}))}},trail:{vgMark:"trail",encodeEntry:function encodeEntry(e){var t=e.width,n=e.height;return Object.assign({},baseEncodeEntry(e,{size:"include",orient:"ignore"}),pointPosition("x",e,valueref_mid(t)),pointPosition("y",e,valueref_mid(n)),nonPosition("size",e),mixins_defined(e))}}};function parseMarkGroups(e){return util_contains([lk,sk,gk],e.mark)?function parsePathMark(e){var t=pathGroupingFields(e.mark,e.encoding),n=getMarkGroups(e,{fromPrefix:t.length>0?JC:""});return t.length>0?[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:JC+e.requestDataName(tT),data:e.requestDataName(tT),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:n}]:n}(e):getMarkGroups(e)}var JC="faceted_path_";function getMarkGroups(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrefix:""},n=e.mark,r=getFirstDefined(e.markDef.clip,function scaleClip(e){var t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("domainRaw")||n&&n.get("domainRaw"))||void 0}(e),function projectionClip(e){var t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),i=getStyles(e.markDef),a=e.encoding.key,o=function mark_getSort(e){var t=e.encoding,n=e.stack,r=e.mark,i=e.markDef,a=e.config,o=t.order;if(!(!Uw(o)&&isValueDef(o)&&isNullOrFalse(o.value)||!o&&isNullOrFalse(i.order)||isNullOrFalse(getMarkConfig("order",i,a)))){if((Uw(o)||isFieldDef(o))&&!n)return sortParams(o,{expr:"datum"});if(isPathMark(r)){var s="horizontal"===i.orient?"y":"x",u=t[s];if(isFieldDef(u)){var l=u.sort;return Uw(l)?{field:channeldef_vgField(u,{prefix:s,suffix:"sort_index",expr:"datum"})}:isSortField(l)?{field:channeldef_vgField({aggregate:encoding_isAggregate(e.encoding)?l.op:void 0,field:l.field},{expr:"datum"})}:{field:channeldef_vgField(u,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}else;}}(e),s=KC[n].postEncodingTransform?KC[n].postEncodingTransform(e):null;return[Object.assign({name:e.getName("marks"),type:KC[n].vgMark},r?{clip:!0}:{},i?{style:i}:{},a?{key:{field:a.field}}:{},o?{sort:o}:{},{from:{data:t.fromPrefix+e.requestDataName(tT)},encode:{update:KC[n].encodeEntry(e)}},s?{transform:s}:{})]}var ZC=function(e){function UnitModel(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;Object(_d.a)(this,UnitModel),(r=Object(WE.a)(this,Object(GE.a)(UnitModel).call(this,e,"unit",t,n,o,a,void 0,e.view))).fit=s,r.specifiedScales={},r.specifiedAxes={},r.specifiedLegends={},r.specifiedProjection={},r.selection={},r.children=[],r.initSize(Object.assign({},i,e.width?{width:e.width}:{},e.height?{height:e.height}:{}));var u=isMarkDef(e.mark)?e.mark.type:e.mark,l=r.encoding=normalizeEncoding(function replaceRepeaterInEncoding(e,t){return replaceRepeater(e,t)}(e.encoding||{},a),u);return r.markDef=normalizeMarkDef(e.mark,l,o),r.stack=stack_stack(u,l,r.config.stack),r.specifiedScales=r.initScales(u,l),r.specifiedAxes=r.initAxes(l),r.specifiedLegends=r.initLegend(l),r.specifiedProjection=e.projection,r.selection=e.selection,r}return Object(HE.a)(UnitModel,e),Object(bd.a)(UnitModel,[{key:"scaleDomain",value:function scaleDomain(e){var t=this.specifiedScales[e];return t?t.domain:void 0}},{key:"axis",value:function axis(e){return this.specifiedAxes[e]}},{key:"legend",value:function legend(e){return this.specifiedLegends[e]}},{key:"initScales",value:function initScales(e,t){return bS.reduce((function(e,n){var r,i,a=t[n];return isFieldDef(a)?(r=a,i=a.scale):hasConditionalFieldDef(a)&&(r=a.condition,i=a.condition.scale),r&&(e[n]=i||{}),e}),{})}},{key:"initAxes",value:function initAxes(e){return[Mk,jk].reduce((function(t,n){var r=e[n];if(isFieldDef(r)||n===Mk&&isFieldDef(e.x2)||n===jk&&isFieldDef(e.y2)){var i=isFieldDef(r)?r.axis:null;null!==i&&(t[n]=Object.assign({},i))}return t}),{})}},{key:"initLegend",value:function initLegend(e){return yS.reduce((function(t,n){var r=e[n];if(r){var i=isFieldDef(r)?r.legend:hasConditionalFieldDef(r)?r.condition.legend:null;null!==i&&!1!==i&&function supportLegend(e){switch(e){case zk:case qk:case Wk:case Hk:case Gk:case Vk:case Xk:return!0;case Yk:case $k:return!1}}(n)&&(t[n]=Object.assign({},i))}return t}),{})}},{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this)}},{key:"parseLayoutSize",value:function parseLayoutSize(){!function parseUnitLayoutSize(e){var t=e.component.layoutSize;if(!t.explicit.width){var n=defaultUnitSize(e,"width");t.set("width",n,!1)}if(!t.explicit.height){var r=defaultUnitSize(e,"height");t.set("height",r,!1)}}(this)}},{key:"parseSelections",value:function parseSelections(){this.component.selection=function parseUnitSelection(e,t){var n={},r=e.config.selection;t&&(t=rk(t));var i=function _loop(i){if(!t.hasOwnProperty(i))return a=i,"continue";var o=t[i],s=r[o.type],u=(s.fields,s.encodings,__rest(s,["fields","encodings"]));for(var l in u)"encodings"===l&&o.fields||"fields"===l&&o.encodings||("mark"===l&&(o[l]=Object.assign({},u[l],o[l])),void 0!==o[l]&&!0!==o[l]||(o[l]=u[l]||o[l]));i=varName(i);var c=n[i]=Object.assign({},o,{name:i,events:qw(o.on)?xb(o.on,"scope"):o.on});forEachTransform(c,(function(t){t.parse&&t.parse(e,o,c)})),a=i};for(var a in t)i(a);return n}(this,this.selection)}},{key:"parseMarkGroup",value:function parseMarkGroup(){this.component.mark=parseMarkGroups(this)}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){this.component.axes=function parseUnitAxes(e){return mS.reduce((function(t,n){return e.component.scales[n]&&e.axis(n)&&(t[n]=[parseAxis(n,e)]),t}),{})}(this)}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(e){return function assembleTopLevelSignals(e,t){var n=!1;return forEachSelection(e,(function(r,i){var a=r.name,o=stringValue_$(a+AT);t.filter((function(e){return e.name===a})).length||t.push({name:r.name,update:"".concat(MT,"(").concat(o)+("global"===r.resolve?")":", ".concat(stringValue_$(r.resolve),")"))}),n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),forEachTransform(r,(function(n){n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}))})),n&&(t.filter((function(e){return"unit"===e.name})).length||t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]})),t}(this,e)}},{key:"assembleSignals",value:function assembleSignals(){return[].concat(Object(Ra.a)(assembleAxisSignals(this)),Object(Ra.a)(function assembleUnitSelectionSignals(e,t){return forEachSelection(e,(function(n,r){var i,a=n.name,o=r.modifyExpr(e,n);(i=t).push.apply(i,Object(Ra.a)(r.signals(e,n))),forEachTransform(n,(function(r){r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))})),t.push({name:a+DT,update:"modify(".concat(stringValue_$(n.name+AT),", ").concat(o,")")})})),t}(this,[])))}},{key:"assembleSelectionData",value:function assembleSelectionData(e){return assembleUnitSelectionData(this,e)}},{key:"assembleLayout",value:function assembleLayout(){return null}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return assemble_assembleLayoutSignals(this)}},{key:"assembleMarks",value:function assembleMarks(){var e=this.component.mark||[];return this.parent&&isLayerModel(this.parent)||(e=assembleUnitSelectionMarks(this,e)),e.map(this.correctDataNames)}},{key:"getMapping",value:function getMapping(){return this.encoding}},{key:"channelHasField",value:function channelHasField(e){return encoding_channelHasField(this.encoding,e)}},{key:"fieldDef",value:function fieldDef(e){return getTypedFieldDef(this.encoding[e])}},{key:"hasProjection",get:function get(){var e=this.encoding,t=this.mark===yk,n=e&&iS.some((function(t){return isFieldDef(e[t])}));return t||n}},{key:"mark",get:function get(){return this.markDef.type}}]),UnitModel}(PC),QC=function(e){function LayerModel(e,t,n,r,i,a,o){var s;Object(_d.a)(this,LayerModel),s=Object(WE.a)(this,Object(GE.a)(LayerModel).call(this,e,"layer",t,n,a,i,e.resolve,e.view));var u=Object.assign({},r,e.width?{width:e.width}:{},e.height?{height:e.height}:{});return s.initSize(u),s.children=e.layer.map((function(e,t){if(isLayerSpec(e))return new LayerModel(e,Object(eT.a)(s),s.getName("layer_"+t),u,i,a,o);if(isUnitSpec(e))return new ZC(e,Object(eT.a)(s),s.getName("layer_"+t),u,i,a,o);throw new Error(LS.INVALID_SPEC)})),s}return Object(HE.a)(LayerModel,e),Object(bd.a)(LayerModel,[{key:"parseData",value:function parseData(){this.component.data=parse_parseData(this);var e=!0,t=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.parseData()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"parseLayoutSize",value:function parseLayoutSize(){parseLayerLayoutSize(this)}},{key:"parseSelections",value:function parseSelections(){var e=this;this.component.selection={};var t=!0,n=!1,r=void 0;try{for(var i,a=function _loop(){var t=i.value;t.parseSelections(),ak(t.component.selection).forEach((function(n){e.component.selection[n]=t.component.selection[n]}))},o=this.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a()}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"parseMarkGroup",value:function parseMarkGroup(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.parseMarkGroup()}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"parseAxesAndHeaders",value:function parseAxesAndHeaders(){!function parseLayerAxes(e){var t=e.component,n=t.axes,r=t.resolve,i={top:0,bottom:0,right:0,left:0},a=!0,o=!1,s=void 0;try{for(var u,l=e.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;c.parseAxesAndHeaders();var f=!0,d=!1,h=void 0;try{for(var p,g=ak(c.component.axes)[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value;r.axis[m]=parseGuideResolve(e.component.resolve,m),"shared"===r.axis[m]&&(n[m]=mergeAxisComponents(n[m],c.component.axes[m]),n[m]||(r.axis[m]="independent",delete n[m]))}}catch(q){d=!0,h=q}finally{try{f||null==g.return||g.return()}finally{if(d)throw h}}}}catch(q){o=!0,s=q}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}for(var v=0,y=[Mk,jk];v<y.length;v++){var _=y[v],b=!0,x=!1,w=void 0;try{for(var k,S=e.children[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var E=k.value;if(E.component.axes[_]){if("independent"===r.axis[_]){n[_]=(n[_]||[]).concat(E.component.axes[_]);var T=!0,C=!1,O=void 0;try{for(var A,R=E.component.axes[_][Symbol.iterator]();!(T=(A=R.next()).done);T=!0){var D=A.value,P=D.getWithExplicit("orient"),M=P.value,j=P.explicit;if(i[M]>0&&!j){var F=XC[M];i[M]>i[F]&&D.set("orient",F,!1)}i[M]++}}catch(q){C=!0,O=q}finally{try{T||null==R.return||R.return()}finally{if(C)throw O}}}delete E.component.axes[_]}}}catch(q){x=!0,w=q}finally{try{b||null==S.return||S.return()}finally{if(x)throw w}}if("independent"===r.axis[_]&&n[_]&&n[_].length>1){var I=!0,L=!1,N=void 0;try{for(var B,U=n[_][Symbol.iterator]();!(I=(B=U.next()).done);I=!0){var z=B.value;z.get("grid")&&!z.explicit.grid&&(z.implicit.grid=!1)}}catch(q){L=!0,N=q}finally{try{I||null==U.return||U.return()}finally{if(L)throw N}}}}}(this)}},{key:"assembleSelectionTopLevelSignals",value:function assembleSelectionTopLevelSignals(e){return this.children.reduce((function(e,t){return t.assembleSelectionTopLevelSignals(e)}),e)}},{key:"assembleSignals",value:function assembleSignals(){return this.children.reduce((function(e,t){return e.concat(t.assembleSignals())}),assembleAxisSignals(this))}},{key:"assembleLayoutSignals",value:function assembleLayoutSignals(){return this.children.reduce((function(e,t){return e.concat(t.assembleLayoutSignals())}),assemble_assembleLayoutSignals(this))}},{key:"assembleSelectionData",value:function assembleSelectionData(e){return this.children.reduce((function(e,t){return t.assembleSelectionData(e)}),e)}},{key:"assembleTitle",value:function assembleTitle(){var e=get_get(Object(GE.a)(LayerModel.prototype),"assembleTitle",this).call(this);if(e)return e;var t=!0,n=!1,r=void 0;try{for(var i,a=this.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(e=i.value.assembleTitle())return e}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"assembleLayout",value:function assembleLayout(){return null}},{key:"assembleMarks",value:function assembleMarks(){return function assembleLayerSelectionMarks(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e.children[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;isUnitModel(s)&&(t=assembleUnitSelectionMarks(s,t))}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}(this,util_flatten(this.children.map((function(e){return e.assembleMarks()}))))}},{key:"assembleLegends",value:function assembleLegends(){return this.children.reduce((function(e,t){return e.concat(t.assembleLegends())}),assemble_assembleLegends(this))}}]),LayerModel}(DC),eO=function(e){function RepeatModel(e,t,n,r,i){var a;return Object(_d.a)(this,RepeatModel),a=Object(WE.a)(this,Object(GE.a)(RepeatModel).call(this,e,"repeat",t,n,i,r,e.resolve)),e.resolve&&e.resolve.axis&&("shared"===e.resolve.axis.x||"shared"===e.resolve.axis.y)&&log_warn(LS.REPEAT_CANNOT_SHARE_AXIS),a.repeat=e.repeat,a.children=a._initChildren(e,a.repeat,r,i),a}return Object(HE.a)(RepeatModel,e),Object(bd.a)(RepeatModel,[{key:"_initChildren",value:function _initChildren(e,t,n,r){var i=[],a=!Uw(t)&&t.row||[n?n.row:null],o=!Uw(t)&&t.column||[n?n.column:null],s=Uw(t)&&t||[n?n.repeat:null],u=!0,l=!1,c=void 0;try{for(var f,d=s[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value,p=!0,g=!1,m=void 0;try{for(var v,y=a[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var _=v.value,b=!0,x=!1,w=void 0;try{for(var k,S=o[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var E=k.value,T=(h?"__repeat_repeat_".concat(h):"")+(_?"__repeat_row_".concat(_):"")+(E?"__repeat_column_".concat(E):""),C={repeat:h,row:_,column:E};i.push(buildModel(e.spec,this,this.getName("child"+T),void 0,C,r,!1))}}catch(O){x=!0,w=O}finally{try{b||null==S.return||S.return()}finally{if(x)throw w}}}}catch(O){g=!0,m=O}finally{try{p||null==y.return||y.return()}finally{if(g)throw m}}}}catch(O){l=!0,c=O}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}return i}},{key:"parseLayoutSize",value:function parseLayoutSize(){WC(this)}},{key:"assembleDefaultLayout",value:function assembleDefaultLayout(){var e=this.repeat,t=Uw(e)?void 0:e.column?e.column.length:1;return Object.assign({},t?{columns:t}:{},{bounds:"full",align:"all"})}}]),RepeatModel}(VC);function buildModel(e,t,n,r,i,a,o){if(isFacetSpec(e))return new HC(e,t,n,i,a);if(isLayerSpec(e))return new QC(e,t,n,r,i,a,o);if(isUnitSpec(e))return new ZC(e,t,n,r,i,a,o);if(isRepeatSpec(e))return new eO(e,t,n,i,a);if(function isAnyConcatSpec(e){return isVConcatSpec(e)||isHConcatSpec(e)||isConcatSpec(e)}(e))return new YC(e,t,n,i,a);throw new Error(LS.INVALID_SPEC)}function compile(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.logger&&function log_set(e){return BS=e}(t.logger),t.fieldTitle&&setTitleFormatter(t.fieldTitle);try{var n=initConfig(mergeDeep({},t.config,e.config)),r=normalize_normalize(e,n),i=function normalizeAutoSize(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Object.assign({type:"pad"},_normalizeAutoSize(t),_normalizeAutoSize(e));return"fit"===r.type&&(n||(log_warn(LS.FIT_NON_SINGLE),r.type="pad")),r}(e.autosize,n.autosize,isLayerSpec(r)||isUnitSpec(r)),a=buildModel(r,null,"",void 0,void 0,n,"fit"===i.type);return a.parse(),function optimizeDataflow(e,t){checkLinks(e.sources);for(var n=0,r=0,i=0;i<SC&&optimizationDataflowHelper(e,t);i++)n++;e.sources.map(moveFacetDown);for(var a=0;a<SC&&optimizationDataflowHelper(e,t);a++)r++;checkLinks(e.sources),Math.max(n,r)===SC&&log_warn("Maximum optimization runs(".concat(SC,") reached."))}(a.component.data,a),function assembleTopLevelModel(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=e.config?stripAndRedirectConfig(e.config):void 0,a=[].concat(e.assembleSelectionData([]),function assembleRootData(e,t){var n=[],r=makeWalkTree(n),i=0;e.sources.forEach((function(e){e.hasName()||(e.dataName="source_".concat(i++));var t=e.assemble();r(e,t)})),n.forEach((function(e){0===e.transform.length&&delete e.transform}));var a=0,o=!0,s=!1,u=void 0;try{for(var l,c=n.entries()[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,d=Object(qt.a)(f,2),h=d[0],p=d[1];0!==(p.transform||[]).length||p.source||n.splice(a++,0,n.splice(h,1)[0])}}catch(C){s=!0,u=C}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}for(var g=0,m=n;g<m.length;g++){var v=m[g],y=!0,_=!1,b=void 0;try{for(var x,w=(v.transform||[])[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var k=x.value;"lookup"===k.type&&(k.from=e.outputNodes[k.from].getSource())}}catch(C){_=!0,b=C}finally{try{y||null==w.return||w.return()}finally{if(_)throw b}}}for(var S=0,E=n;S<E.length;S++){var T=E[S];T.name in t&&(T.values=t[T.name])}return n}(e.component.data,n)),o=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0),c=e.assembleLayoutSignals();return c=c.filter((function(e){return"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)})),{spec:Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{},t,s?{title:s}:{},u?{style:u}:{},l?{encode:{update:l}}:{},{data:a},o.length>0?{projections:o}:{},e.assembleGroup([].concat(Object(Ra.a)(c),Object(Ra.a)(e.assembleSelectionTopLevelSignals([])))),i?{config:i}:{},r?{usermeta:r}:{})}}(a,function getTopLevelProperties(e,t,n){return Object.assign({autosize:1===ak(n).length&&n.type?n.type:n},extractTopLevelProperties(t),extractTopLevelProperties(e))}(e,n,i),e.datasets,e.usermeta)}finally{t.logger&&log_reset(),t.fieldTitle&&function resetTitleFormatter(){setTitleFormatter(iE)}()}}var tO=new(function(e){function TransformExtractMapper(){return Object(_d.a)(this,TransformExtractMapper),Object(WE.a)(this,Object(GE.a)(TransformExtractMapper).apply(this,arguments))}return Object(HE.a)(TransformExtractMapper,e),Object(bd.a)(TransformExtractMapper,[{key:"mapUnit",value:function mapUnit(e,t){var n=t.config;if(e.encoding){var r=e.encoding,i=e.transform,a=extractTransformsFromEncoding(r,n),o=a.bins,s=a.timeUnits,u=a.aggregate,l=a.groupby,c=a.encoding,f=[].concat(Object(Ra.a)(i||[]),Object(Ra.a)(o),Object(Ra.a)(s),Object(Ra.a)(u.length?[{aggregate:u,groupby:l}]:[]));return Object.assign({},e,f.length>0?{transform:f}:{},{encoding:c})}return e}}]),TransformExtractMapper}(VE));function extractTransforms(e,t){return tO.map(e,{config:t})}var nO=Iw.version,rO=n(131),iO=n.n(rO),aO=n(224),oO={background:"#333",title:{color:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},sO={background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},uO={arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},style:{bar:{binSpacing:2,fill:"#30a2da",stroke:null}},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},lO={group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},cO="Benton Gothic Bold, sans-serif",fO={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},dO={background:"#ffffff",title:{anchor:"start",color:"#000000",font:cO,fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:cO,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:cO,titleFontSize:13,titleFontWeight:"normal"},range:{category:fO["category-6"],diverging:fO["fireandice-6"],heatmap:fO["fire-7"],ordinal:fO["fire-7"],ramp:fO["fire-7"]}},hO={background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pO={background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},gO=aO.version,mO=n(225),vO="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n",yO="vg-tooltip-element",_O={offsetX:10,offsetY:10,id:yO,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function escapeHTML(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};var bO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function formatValue_stringify(e,t){return JSON.stringify(e,function replacer(e){var t=[];return function(n,r){if("object"!==typeof r||null===r)return r;var i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}var xO=function(){function Handler(e){Object(_d.a)(this,Handler),this.options=Object.assign({},_O,e);var t=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){var n=document.createElement("style");n.setAttribute("id",this.options.styleId),n.innerHTML=function createDefaultStyle(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return vO.toString().replace(yO,e)}(t);var r=document.head;r.childNodes.length>0?r.insertBefore(n,r.childNodes[0]):r.appendChild(n)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}return Object(bd.a)(Handler,[{key:"tooltipHandler",value:function tooltipHandler(e,t,n,r){if(null!=r&&""!==r){this.el.innerHTML=function formatValue_formatValue(e,t,n){if(Object(V.A)(e))return"[".concat(e.map((function(e){return t(Object(V.H)(e)?e:formatValue_stringify(e,n))})).join(", "),"]");if(Object(V.F)(e)){var r="",i=e,a=i.title,o=bO(i,["title"]);a&&(r+="<h2>".concat(t(a),"</h2>"));var s=Object.keys(o);if(s.length>0){r+="<table>";var u=!0,l=!1,c=void 0;try{for(var f,d=s[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value,p=o[h];void 0!==p&&(Object(V.F)(p)&&(p=formatValue_stringify(p,n)),r+='<tr><td class="key">'.concat(t(h),':</td><td class="value">').concat(t(p),"</td></tr>"))}}catch(g){l=!0,c=g}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}r+="</table>"}return r||"{}"}return t(e)}(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));var i=function calculatePosition(e,t,n,r){var i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);var a=e.clientY+r;return a+t.height>window.innerHeight&&(a=+e.clientY-r-t.height),{x:i,y:a}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),a=i.x,o=i.y;this.el.setAttribute("style","top: ".concat(o,"px; left: ").concat(a,"px"))}else this.el.classList.remove("visible","".concat(this.options.theme,"-theme"))}}]),Handler}(),wO=(mO.version,function(e,t,n){var r=e.open(t),i=250,a=~~(1e4/i);e.addEventListener("message",(function listen(t){t.source===r&&(a=0,e.removeEventListener("message",listen,!1))}),!1),setTimeout((function send(){a<=0||(r.postMessage(n,"*"),setTimeout(send,i),a-=1)}),i)}),kO='.vega-embed {\n  position: relative;\n  display: inline-block;\n  padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    display: flex;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5); }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function util_deepMerge_(e,t){if("object"!==typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!==typeof t[n]||Object(V.A)(t[n])||null===t[n]?e[n]=t[n]:"object"!==typeof e[n]||null===e[n]?e[n]=util_mergeDeep(Object(V.A)(t[n].constructor)?[]:{},t[n]):util_mergeDeep(e[n],t[n]));return e}function util_mergeDeep(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){e=util_deepMerge_(e,a[i])}return e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var SO=v,EO=w,TO={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},CO={vega:"Vega","vega-lite":"Vega-Lite"},OO={vega:SO.version,"vega-lite":EO?EO.version:"not available"},AO={vega:function vega(e){return e},"vega-lite":function vegaLite(e,t){return EO.compile(e,{config:t}).spec}},RO='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" width="14" height="14">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function viewSource(e,t,n,r){var i="<html><head>".concat(t,'</head><body><pre><code class="json">'),a="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(i+e+a),o.document.title="".concat(CO[r]," JSON Source")}function guessMode(e,t){if(e.$schema){var n=iO()(e.$schema);t&&t!==n.library&&console.warn("The given visualization spec is written in ".concat(CO[n.library],", but mode argument sets ").concat(CO[t]||t,"."));var r=n.library;return Object(H.satisfies)(OO[r],"^".concat(n.version.slice(1)))||console.warn("The input spec uses ".concat(CO[r]," ").concat(n.version,", but the current version of ").concat(CO[r]," is v").concat(OO[r],".")),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t||"vega"}function embed_embed(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,a){function fulfilled(e){try{step(r.next(e))}catch(t){a(t)}}function rejected(e){try{step(r.throw(e))}catch(t){a(t)}}function step(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,A.a.mark((function _callee(){var r,i,a,o,s,u,l,c,f,d,h,p,g,m,v,y,_,b,x,w,S,E,T,C,O,R,D,P,M,j,F,I;return A.a.wrap((function _callee$(A){for(;;)switch(A.prev=A.next){case 0:if(N=n.loader,r=N&&"load"in N?n.loader:SO.loader(n.loader),!SO.isString(t)){A.next=6;break}return A.next=4,r.load(t);case 4:return i=A.sent,A.abrupt("return",embed_embed(e,JSON.parse(i),n));case 6:if(n=util_mergeDeep(n,t.usermeta&&t.usermeta.embedOptions),a=n.patch||n.onBeforeParse,o=!0===n.actions||!1===n.actions?n.actions:util_mergeDeep({},{export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},n.actions||{}),s=Object.assign({},TO,n.i18n),u=n.renderer||"canvas",l=n.logLevel||SO.Warn,c=n.downloadFileName||"visualization",f=n.config||{},!SO.isString(f)){A.next=19;break}return A.next=17,r.load(f);case 17:return d=A.sent,A.abrupt("return",embed_embed(e,t,Object.assign({},n,{config:JSON.parse(d)})));case 19:if(!1!==n.defaultStyle&&(h="vega-embed-style",document.getElementById(h)||((p=document.createElement("style")).id=h,p.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?(kO||"").toString():n.defaultStyle,document.head.appendChild(p))),n.theme&&(f=util_mergeDeep({},k[n.theme],f)),g=guessMode(t,n.mode),m=AO[g](t,f),"vega-lite"===g&&m.$schema&&(v=iO()(m.$schema),Object(H.satisfies)(OO.vega,"^".concat(v.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(v.version,", but current version is v").concat(OO.vega,"."))),y=z(e).classed("vega-embed",!0).html(""),!a){A.next=38;break}if(!(a instanceof Function)){A.next=30;break}m=a(m),A.next=38;break;case 30:if(!SO.isString(a)){A.next=37;break}return A.next=33,r.load(a);case 33:_=A.sent,m=util_mergeDeep({},m,JSON.parse(_)),A.next=38;break;case 37:m=util_mergeDeep({},m,a);case 38:return b=SO.parse(m,"vega-lite"===g?{}:f),x=new SO.View(b,{loader:r,logLevel:l,renderer:u}),!1!==n.tooltip&&(L=n.tooltip,w="function"===typeof L?n.tooltip:new xO(!0===n.tooltip?{}:n.tooltip).call,x.tooltip(w)),void 0===(S=n.hover)&&(S="vega"===g),S&&(T=(E="boolean"===typeof S?{}:S).hoverSet,C=E.updateSet,x.hover(T,C)),n&&(n.width&&x.width(n.width),n.height&&x.height(n.height),n.padding&&x.padding(n.padding)),A.next=47,x.initialize(e).runAsync();case 47:if(!1!==o){if(O=y,!1!==n.defaultStyle&&(R=y.append("details").attr("title",s.CLICK_TO_VIEW_ACTIONS),O=R,R.insert("summary").html(RO),D=R.node(),document.addEventListener("click",(function(e){D.contains(e.target)||D.removeAttribute("open")}))),P=O.insert("div").attr("class","vega-actions"),!0===o||!1!==o.export)for(M=function _loop(){var e=F[j];if(!0===o||!0===o.export||o.export[e]){var t=s["".concat(e.toUpperCase(),"_ACTION")];P.append("a").text(t).attr("href","#").attr("target","_blank").attr("download","".concat(c,".").concat(e)).on("mousedown",(function(){var t=this;x.toImageURL(e,n.scaleFactor).then((function(e){t.href=e})).catch((function(e){throw e})),B.preventDefault()}))}},j=0,F=["svg","png"];j<F.length;j++)M();!0!==o&&!1===o.source||P.append("a").text(s.SOURCE_ACTION).attr("href","#").on("mousedown",(function(){viewSource(G()(t),n.sourceHeader||"",n.sourceFooter||"",g),B.preventDefault()})),"vega-lite"!==g||!0!==o&&!1===o.compiled||P.append("a").text(s.COMPILED_ACTION).attr("href","#").on("mousedown",(function(){viewSource(G()(m),n.sourceHeader||"",n.sourceFooter||"","vega"),B.preventDefault()})),!0!==o&&!1===o.editor||(I=n.editorUrl||"https://vega.github.io/editor/",P.append("a").text(s.EDITOR_ACTION).attr("href","#").on("mousedown",(function(){wO(window,I,{config:f,mode:g,renderer:u,spec:G()(t)}),B.preventDefault()})))}return A.abrupt("return",{view:x,spec:t,vgSpec:m});case 49:case"end":return A.stop()}var L,N}),_callee)})))}var DO={};function shallowEqual(e,t){void 0===e&&(e=DO),void 0===t&&(t=DO);var n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every((function(n){return e[n]===t[n]}))}var PO=function NOOP(){};function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var MO=function(e){function b(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"containerRef",C.a.createRef()),_defineProperty(_assertThisInitialized(t),"viewPromise",void 0),_defineProperty(_assertThisInitialized(t),"handleError",(function(e){var n=t.props.onError;return(void 0===n?PO:n)(e),void console.warn(e)})),_defineProperty(_assertThisInitialized(t),"modifyView",(function(e){t.viewPromise&&t.viewPromise.then((function(t){return t&&e(t),!0})).catch(t.handleError)})),t}!function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(b,e);var t=b.prototype;return t.componentDidMount=function componentDidMount(){this.createView()},t.componentDidUpdate=function componentDidUpdate(e){var t=this,n=function getUniqueFieldNames(e){var t=new Set;return e.forEach((function(e){Object.keys(e).forEach((function(e){t.add(e)}))})),t}([this.props,e]);n.delete("className"),n.delete("style"),n.delete("signalListeners"),(Array.from(n).some((function(n){return t.props[n]!==e[n]}))||!shallowEqual(this.props.signalListeners,e.signalListeners))&&(this.clearView(),this.createView())},t.componentWillUnmount=function componentWillUnmount(){this.clearView()},t.createView=function createView(){var e=this.props,t=e.spec,n=e.onNewView,r=(e.onError,e.signalListeners),i=void 0===r?{}:r,a=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["spec","onNewView","onError","signalListeners"]);this.containerRef.current&&(this.viewPromise=embed_embed(this.containerRef.current,t,a).then((function(e){var t=e.view,n=Object.keys(i);return n.forEach((function(e){try{t.addSignalListener(e,i[e])}catch(e){console.warn("Cannot add invalid signal handler >>",e)}})),0<n.length&&t.run(),t})).catch(this.handleError),n&&this.modifyView(n))},t.clearView=function clearView(){return this.modifyView((function(e){e.finalize()})),this.viewPromise=void 0,this},t.render=function render(){var e=this.props,t=e.className,n=e.style;return C.a.createElement("div",{ref:this.containerRef,className:t,style:n})},b}(C.a.PureComponent);function _extends(){return(_extends=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)}function Vega_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vega_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_defineProperty(MO,"propTypes",{className:E.a.string,spec:E.a.any.isRequired,signalListeners:E.a.any,style:E.a.any,onNewView:E.a.any,onError:E.a.func}),n.d(t,"a",(function(){return jO}));var jO=function(e){function b(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return Vega_defineProperty(Vega_assertThisInitialized(t=e.call.apply(e,[this].concat(r))||this),"vegaEmbed",C.a.createRef()),Vega_defineProperty(Vega_assertThisInitialized(t),"handleNewView",(function(e){t.update();var n=t.props.onNewView;(void 0===n?PO:n)(e)})),t}!function Vega_inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(b,e);var t=b.prototype;return t.componentDidMount=function componentDidMount(){this.update()},t.componentDidUpdate=function componentDidUpdate(e){shallowEqual(this.props.data,e.data)||this.update()},t.update=function update(){var e=this.props,t=e.data,n=e.spec;if(t){var r=function getDatasetNamesFromSpec(e){var t=e.data;if(t){if(Array.isArray(t))return t.map((function(e){return e.name}));if("string"==typeof t.name)return[t.name]}return[]}(n).filter((function(e){return t[e]}));this.vegaEmbed.current&&0<r.length&&this.vegaEmbed.current.modifyView((function(e){r.forEach((function(n){!function updateData(e,t,n){n&&(function isFunction_isFunction(e){return!!e&&"[object Function]"==={}.toString.call(e)}(n)?n(e.data(t)):e.change(t,SO.changeset().remove((function(){return!0})).insert(n)))}(e,n,t[n])})),e.run()}))}},t.render=function render(){var e=this.props,t=(e.data,function Vega_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,["data"]));return C.a.createElement(MO,_extends({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))},b}(C.a.PureComponent);Vega_defineProperty(jO,"propTypes",{data:E.a.any}),Vega_defineProperty(jO,"defaultProps",{data:{}})}]]);
//# sourceMappingURL=2.1368bb24.chunk.js.map